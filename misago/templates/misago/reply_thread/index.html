{% extends "misago/base.html" %}
{% load i18n misago_forms %}


{% block title %}
  {% trans "Reply to thread" context "reply thread page" %} | {{ thread }} | {{ block.super }}
{% endblock title %}


{% block content %}
<div class="page page-reply-thread">
  {% include "misago/thread/header.html" %}

  <div class="container page-container">

    {% if preview %}
      {% include "misago/posting/preview.html" %}
    {% endif %}

    <form 
      action="{% url 'misago:thread-reply' id=thread.id slug=thread.slug %}"
      method="post"
    >
      {% csrf_token %}
      <div class="panel panel-default panel-form">
        <div class="panel-heading">
          <h3 class="panel-title">
            {% trans "Reply to thread" context "reply thread page" %}
          </h3>
        </div>
        <div class="panel-body">
          {% for form in formset.get_forms %}
            {% include form.template_name with form=form post_control_large=True %}
          {% endfor %}
        </div>
        <div class="panel-footer panel-footer-sticky">
          <button class="btn btn-primary" type="submit">
            {% trans "Post reply" context "reply thread submit btn" %}
          </button>
          <button class="btn btn-secondary" type="submit" name="preview" value="true" formnovalidate>
            {% trans "Preview" context "reply thread submit btn" %}
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
{% endblock content %}
