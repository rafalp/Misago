{"version":3,"file":"misago.js","mappings":"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","sources":["webpack://misago/webpack/runtime/chunk loaded","webpack://misago/webpack/runtime/load script","webpack://misago/./src/components/FlexRow/FlexRow.jsx","webpack://misago/./src/components/FlexRow/FlexRowCol.jsx","webpack://misago/./src/components/FlexRow/FlexRowSection.jsx","webpack://misago/./src/components/PageContainer.jsx","webpack://misago/./src/components/PageHeader/PageHeader.jsx","webpack://misago/./src/components/PageHeader/PageHeaderBanner.jsx","webpack://misago/./src/components/PageHeader/PageHeaderContainer.jsx","webpack://misago/./src/components/PageHeader/PageHeaderDetails.jsx","webpack://misago/./src/components/PageHeader/PageHeaderHTMLMessage.jsx","webpack://misago/./src/components/PageHeader/PageHeaderMessage.jsx","webpack://misago/./src/components/PageHeader/PageHeaderPlain.jsx","webpack://misago/./src/components/RegisterLegalFootnote.js","webpack://misago/./src/components/StartSocialAuth.js","webpack://misago/./src/components/ThreadFlags.jsx","webpack://misago/./src/components/ThreadReplies.jsx","webpack://misago/./src/components/Toolbar/Toolbar.jsx","webpack://misago/./src/components/Toolbar/ToolbarItem.jsx","webpack://misago/./src/components/Toolbar/ToolbarSection.jsx","webpack://misago/./src/components/Toolbar/ToolbarSpacer.jsx","webpack://misago/./src/components/avatar.js","webpack://misago/./src/components/button.js","webpack://misago/./src/components/category-select.js","webpack://misago/./src/components/edit-details/blankslate.js","webpack://misago/./src/components/edit-details/loader.js","webpack://misago/./src/components/edit-details/field-input.js","webpack://misago/./src/components/edit-details/fieldset.js","webpack://misago/./src/components/edit-details/form.js","webpack://misago/./src/components/edit-details/index.js","webpack://misago/./src/components/form-group.js","webpack://misago/./src/components/form.js","webpack://misago/./src/components/li.js","webpack://misago/./src/components/loader.js","webpack://misago/./src/components/merge-conflict.js","webpack://misago/./src/services/one-box.js","webpack://misago/./src/components/misago-markup.js","webpack://misago/./src/components/modal-loader.js","webpack://misago/./src/components/modal-message.js","webpack://misago/./src/components/panel-loader.js","webpack://misago/./src/components/panel-message.js","webpack://misago/./src/components/post-feed/post/body.js","webpack://misago/./src/components/post-feed/post/header.js","webpack://misago/./src/components/post-feed/post/post-side/button.js","webpack://misago/./src/components/post-feed/post/post-side/anonymous.js","webpack://misago/./src/components/post-feed/post/post-side/user-title.js","webpack://misago/./src/components/post-feed/post/post-side/registered.js","webpack://misago/./src/components/post-feed/post/post-side/index.js","webpack://misago/./src/components/post-feed/post/index.js","webpack://misago/./src/components/post-feed/preview.js","webpack://misago/./src/components/post-feed/index.js","webpack://misago/./src/components/posting/PostingQuoteSelection.jsx","webpack://misago/./src/components/posting/getQuoteMarkup.js","webpack://misago/./src/components/posting/globalState.js","webpack://misago/./src/components/posting/utils/attachments.js","webpack://misago/./src/components/MarkupEditor/MarkupAttachmentModal.jsx","webpack://misago/./src/components/MarkupEditor/operations.js","webpack://misago/./src/components/MarkupEditor/MarkupEditorAttachment.jsx","webpack://misago/./src/components/MarkupEditor/MarkupEditorAttachments.jsx","webpack://misago/./src/components/MarkupEditor/MarkupEditorFooter.jsx","webpack://misago/./src/components/MarkupEditor/MarkupCodeModal.jsx","webpack://misago/./src/components/MarkupEditor/MarkupFormattingHelpModal.jsx","webpack://misago/./src/utils/is-url.js","webpack://misago/./src/components/MarkupEditor/MarkupImageModal.jsx","webpack://misago/./src/components/MarkupEditor/MarkupLinkModal.jsx","webpack://misago/./src/components/MarkupEditor/MarkupQuoteModal.jsx","webpack://misago/./src/components/MarkupEditor/MarkupEditorButton.jsx","webpack://misago/./src/components/MarkupEditor/uploadFile.js","webpack://misago/./src/components/MarkupEditor/MarkupEditorToolbar.jsx","webpack://misago/./src/components/MarkupEditor/MarkupEditor.jsx","webpack://misago/./src/components/MarkupEditor/index.js","webpack://misago/./src/components/posting/PostingDialog.jsx","webpack://misago/./src/components/posting/PostingDialogBody.jsx","webpack://misago/./src/components/posting/PostingDialogError.jsx","webpack://misago/./src/components/posting/PostingDialogHeader.jsx","webpack://misago/./src/components/posting/PostingThreadOptions.jsx","webpack://misago/./src/components/posting/start.js","webpack://misago/./src/components/posting/utils/usernames.js","webpack://misago/./src/components/posting/start-private.js","webpack://misago/./src/components/posting/reply.js","webpack://misago/./src/components/posting/edit.js","webpack://misago/./src/components/posting/index.js","webpack://misago/./src/components/posting/utils/validators.js","webpack://misago/./src/components/select.js","webpack://misago/./src/components/sign-in.js","webpack://misago/./src/components/user-status.js","webpack://misago/./src/components/username-history/list-empty.js","webpack://misago/./src/components/username-history/change.js","webpack://misago/./src/components/username-history/list-ready.js","webpack://misago/./src/components/username-history/change-preview.js","webpack://misago/./src/components/username-history/list-preview.js","webpack://misago/./src/components/username-history/root.js","webpack://misago/./src/components/users-list/card/stats.js","webpack://misago/./src/components/users-list/card/user-title.js","webpack://misago/./src/components/users-list/card/index.js","webpack://misago/./src/components/users-list/preview/card.js","webpack://misago/./src/components/users-list/preview/index.js","webpack://misago/./src/components/users-list/index.js","webpack://misago/./src/components/with-dropdown.js","webpack://misago/./src/components/yes-no-switch.js","webpack://misago/./src/utils/ordered-list.js","webpack://misago/./src/index.js","webpack://misago/./src/initializers/ajax.js","webpack://misago/./src/initializers/auth-sync.js","webpack://misago/./src/initializers/auth.js","webpack://misago/./src/initializers/captcha.js","webpack://misago/./src/components/accept-agreement.js","webpack://misago/./src/initializers/components/accept-agreement.js","webpack://misago/./src/components/auth-message.js","webpack://misago/./src/initializers/components/auth-message.js","webpack://misago/./src/initializers/components/banned-page.js","webpack://misago/./src/components/categories/blankslate.js","webpack://misago/./src/components/categories/category/list-item/description.js","webpack://misago/./src/components/categories/category/list-item/icon.js","webpack://misago/./src/components/categories/category/list-item/main.js","webpack://misago/./src/components/categories/category/list-item/last-thread.js","webpack://misago/./src/components/categories/category/list-item/stats.js","webpack://misago/./src/components/categories/category/list-item/subcategories/list-item.js","webpack://misago/./src/components/categories/category/list-item/subcategories/index.js","webpack://misago/./src/components/categories/category/list-item/index.js","webpack://misago/./src/components/categories/category/index.js","webpack://misago/./src/components/categories/categories-list.js","webpack://misago/./src/components/categories/index.js","webpack://misago/./src/initializers/components/categories.js","webpack://misago/./src/components/options/navs.js","webpack://misago/./src/components/options/delete-account.js","webpack://misago/./src/components/options/edit-details.js","webpack://misago/./src/components/options/download-data.js","webpack://misago/./src/components/options/forum-options.js","webpack://misago/./src/components/options/change-username/form-loading.js","webpack://misago/./src/components/options/change-username/form-locked.js","webpack://misago/./src/components/options/change-username/form.js","webpack://misago/./src/components/options/change-username/root.js","webpack://misago/./src/components/options/sign-in-credentials/change-email.js","webpack://misago/./src/components/options/sign-in-credentials/change-password.js","webpack://misago/./src/components/options/sign-in-credentials/UnusablePasswordMessage.js","webpack://misago/./src/components/options/sign-in-credentials/root.js","webpack://misago/./src/components/options/root.js","webpack://misago/./src/initializers/components/options.js","webpack://misago/./src/components/profile/ban-details.js","webpack://misago/./src/components/profile/details/form.js","webpack://misago/./src/components/profile/details/empty-message.js","webpack://misago/./src/components/profile/details/field-value.js","webpack://misago/./src/components/profile/details/field.js","webpack://misago/./src/components/profile/details/group.js","webpack://misago/./src/components/profile/details/groups-list.js","webpack://misago/./src/components/profile/details/header.js","webpack://misago/./src/data/profile-details.js","webpack://misago/./src/components/profile/details/index.js","webpack://misago/./src/components/profile/feed/route.js","webpack://misago/./src/components/quick-search.js","webpack://misago/./src/components/profile/followers.js","webpack://misago/./src/components/profile/username-history.js","webpack://misago/./src/components/profile/follow-button.js","webpack://misago/./src/components/profile/message-button.js","webpack://misago/./src/components/profile/moderation/avatar-controls.js","webpack://misago/./src/components/profile/moderation/change-username.js","webpack://misago/./src/components/profile/moderation/delete-account.js","webpack://misago/./src/components/profile/moderation/nav.js","webpack://misago/./src/components/profile/ProfileDataList.jsx","webpack://misago/./src/components/profile/ProfileHeader.jsx","webpack://misago/./src/components/profile/ProfileNav.js","webpack://misago/./src/components/profile/root.js","webpack://misago/./src/components/profile/feed/index.js","webpack://misago/./src/components/profile/follows.js","webpack://misago/./src/initializers/components/profile.js","webpack://misago/./src/components/request-activation-link.js","webpack://misago/./src/initializers/components/request-activation-link.js","webpack://misago/./src/components/request-password-reset.js","webpack://misago/./src/initializers/components/request-password-reset.js","webpack://misago/./src/components/reset-password-form.js","webpack://misago/./src/initializers/components/reset-password-form.js","webpack://misago/./src/components/search/form.js","webpack://misago/./src/components/search/sidenav.js","webpack://misago/./src/components/search/page.js","webpack://misago/./src/components/search/threads/results.js","webpack://misago/./src/components/search/threads/index.js","webpack://misago/./src/components/search/users/index.js","webpack://misago/./src/components/search/index.js","webpack://misago/./src/initializers/components/search.js","webpack://misago/./src/components/snackbar.js","webpack://misago/./src/initializers/components/snackbar.js","webpack://misago/./src/components/social-auth/header.js","webpack://misago/./src/components/social-auth/register.js","webpack://misago/./src/components/social-auth/complete.js","webpack://misago/./src/components/social-auth/index.js","webpack://misago/./src/initializers/components/social-auth.js","webpack://misago/./src/components/add-participant.js","webpack://misago/./src/components/participants/add-participant.js","webpack://misago/./src/components/participants/cards-list/make-owner.js","webpack://misago/./src/components/participants/cards-list/actions.js","webpack://misago/./src/components/participants/cards-list/remove.js","webpack://misago/./src/components/participants/cards-list/card.js","webpack://misago/./src/components/participants/cards-list/index.js","webpack://misago/./src/components/participants/index.js","webpack://misago/./src/components/participants/utils.js","webpack://misago/./src/components/poll/results/chart.js","webpack://misago/./src/components/poll/results/modal.js","webpack://misago/./src/components/poll/results/options.js","webpack://misago/./src/components/poll/info.js","webpack://misago/./src/components/poll/results/index.js","webpack://misago/./src/components/poll/voting/help.js","webpack://misago/./src/components/poll/voting/select.js","webpack://misago/./src/components/poll/voting/utils.js","webpack://misago/./src/components/poll/voting/index.js","webpack://misago/./src/components/poll/poll.js","webpack://misago/./src/components/poll/form/choices-control.js","webpack://misago/./src/components/poll/form/index.js","webpack://misago/./src/components/posts-list/event/icon.js","webpack://misago/./src/components/posts-list/event/controls.js","webpack://misago/./src/components/posts-list/event/info.js","webpack://misago/./src/components/posts-list/event/message.js","webpack://misago/./src/components/posts-list/event/unread-label.js","webpack://misago/./src/components/posts-list/waypoint.js","webpack://misago/./src/components/posts-list/event/index.js","webpack://misago/./src/components/posts-list/post/attachments/attachment.js","webpack://misago/./src/components/posts-list/post/attachments/index.js","webpack://misago/./src/components/posts-list/post/body.js","webpack://misago/./src/components/posts-list/post/flags.js","webpack://misago/./src/components/posts-list/post/controls/actions.js","webpack://misago/./src/components/post-likes.js","webpack://misago/./src/components/posts-list/post/footer.js","webpack://misago/./src/components/posts-list/post/controls/move.js","webpack://misago/./src/components/post-changelog/diff.js","webpack://misago/./src/components/post-changelog/footer.js","webpack://misago/./src/components/post-changelog/toolbar.js","webpack://misago/./src/components/post-changelog/utils.js","webpack://misago/./src/components/post-changelog/index.js","webpack://misago/./src/components/posts-list/post/controls/split.js","webpack://misago/./src/components/posts-list/post/controls/dropdown.js","webpack://misago/./src/components/posts-list/post/controls/index.js","webpack://misago/./src/components/posts-list/post/select.js","webpack://misago/./src/components/posts-list/post/header.js","webpack://misago/./src/components/posts-list/post/post-side/anonymous.js","webpack://misago/./src/components/posts-list/post/post-side/has-visible-title.js","webpack://misago/./src/components/posts-list/post/post-side/user-postcount.js","webpack://misago/./src/components/posts-list/post/post-side/user-status.js","webpack://misago/./src/components/posts-list/post/post-side/user-title.js","webpack://misago/./src/components/posts-list/post/post-side/registered.js","webpack://misago/./src/components/posts-list/post/post-side/index.js","webpack://misago/./src/components/posts-list/post/index.js","webpack://misago/./src/components/posts-list/post/preview.js","webpack://misago/./src/components/posts-list/index.js","webpack://misago/./src/components/ThreadStarterCard.jsx","webpack://misago/./src/components/thread/moderation/thread/ThreadChangeTitleModal.jsx","webpack://misago/./src/components/thread/moderation/thread/merge.js","webpack://misago/./src/components/thread/moderation/thread/move.js","webpack://misago/./src/components/thread/moderation/thread/controls.js","webpack://misago/./src/components/thread/moderation/thread/index.js","webpack://misago/./src/components/thread/ThreadModeration.jsx","webpack://misago/./src/components/thread/ThreadSubscriptionButton.jsx","webpack://misago/./src/components/Breadcrumbs/Breadcrumbs.jsx","webpack://misago/./src/components/Breadcrumbs/BreadcrumbsCategory.jsx","webpack://misago/./src/components/Breadcrumbs/BreadcrumbsRootCategory.jsx","webpack://misago/./src/components/thread/ThreadHeader/ThreadHeaderBreadcrumbs.jsx","webpack://misago/./src/components/thread/ThreadHeader/ThreadHeader.jsx","webpack://misago/./src/components/thread/ThreadHeader/index.js","webpack://misago/./src/components/thread/ThreadPagination.jsx","webpack://misago/./src/components/thread/ThreadPostsLeft.jsx","webpack://misago/./src/components/thread/moderation/posts/errors-list.js","webpack://misago/./src/components/thread/moderation/posts/actions.js","webpack://misago/./src/components/thread/moderation/posts/move.js","webpack://misago/./src/components/thread/moderation/posts/split.js","webpack://misago/./src/components/thread/moderation/posts/dropdown.js","webpack://misago/./src/components/thread/ThreadPostsModeration.jsx","webpack://misago/./src/components/thread/ThreadReplyButton.jsx","webpack://misago/./src/components/thread/ThreadToolbarBottom.jsx","webpack://misago/./src/components/thread/ThreadPollButton.jsx","webpack://misago/./src/components/thread/ThreadShortcutsButton.jsx","webpack://misago/./src/components/thread/ThreadToolbarTop.jsx","webpack://misago/./src/components/thread/route.js","webpack://misago/./src/components/thread/root.js","webpack://misago/./src/initializers/components/thread.js","webpack://misago/./src/components/threads/compare.js","webpack://misago/./src/components/threads/ThreadsCategoryPicker.jsx","webpack://misago/./src/components/threads/ThreadsListPicker.jsx","webpack://misago/./src/components/threads/moderation/errors-list.js","webpack://misago/./src/components/threads/moderation/merge.js","webpack://misago/./src/components/threads/moderation/move.js","webpack://misago/./src/components/threads/moderation/controls.js","webpack://misago/./src/components/threads/ThreadsToolbarModeration.jsx","webpack://misago/./src/components/threads/ThreadsToolbar.jsx","webpack://misago/./src/components/threads/container.js","webpack://misago/./src/components/threads/utils.js","webpack://misago/./src/components/ThreadsList/ThreadsListEmpty.jsx","webpack://misago/./src/components/ThreadsList/ThreadsListItemActivity.jsx","webpack://misago/./src/components/ThreadsList/ThreadsListItemCategory.jsx","webpack://misago/./src/components/ThreadsList/ThreadsListItemCheckbox.jsx","webpack://misago/./src/components/ThreadsList/ThreadsListItemIcon.jsx","webpack://misago/./src/components/ThreadsList/ThreadsListItemLastPoster.jsx","webpack://misago/./src/components/ThreadsList/ThreadsListItemSubscriptionOptions.jsx","webpack://misago/./src/components/ThreadsList/ThreadsListItemSubscription.jsx","webpack://misago/./src/components/ThreadsList/ThreadsListItem.jsx","webpack://misago/./src/components/UIPreview/UIPreviewText.js","webpack://misago/./src/components/ThreadsList/ThreadsListLoader.jsx","webpack://misago/./src/components/ThreadsList/ThreadsListUpdatePrompt.jsx","webpack://misago/./src/components/ThreadsList/index.js","webpack://misago/./src/components/ThreadsList/ThreadsList.jsx","webpack://misago/./src/components/threads/route.js","webpack://misago/./src/components/threads/root.js","webpack://misago/./src/initializers/components/threads.js","webpack://misago/./src/components/navbar-search/clean-results.js","webpack://misago/./src/components/navbar-search/dropdown/constants.js","webpack://misago/./src/components/navbar-search/dropdown/input.js","webpack://misago/./src/components/navbar-search/dropdown/dropdown-menu.js","webpack://misago/./src/components/navbar-search/dropdown/empty.js","webpack://misago/./src/components/navbar-search/dropdown/loader.js","webpack://misago/./src/components/navbar-search/dropdown/result/footer.js","webpack://misago/./src/components/navbar-search/dropdown/result/header.js","webpack://misago/./src/components/navbar-search/dropdown/result/thread.js","webpack://misago/./src/components/navbar-search/dropdown/result/user.js","webpack://misago/./src/components/navbar-search/dropdown/result/result.js","webpack://misago/./src/components/navbar-search/dropdown/result/index.js","webpack://misago/./src/components/navbar-search/dropdown/flatten-results.js","webpack://misago/./src/components/navbar-search/dropdown/index.js","webpack://misago/./src/components/navbar-search/index.js","webpack://misago/./src/components/password-strength.js","webpack://misago/./src/components/register.js","webpack://misago/./src/components/register-button.js","webpack://misago/./src/components/user-menu/guest-nav.js","webpack://misago/./src/components/change-avatar/index.js","webpack://misago/./src/components/change-avatar/crop.js","webpack://misago/./src/components/change-avatar/upload.js","webpack://misago/./src/components/change-avatar/gallery.js","webpack://misago/./src/components/change-avatar/root.js","webpack://misago/./src/components/user-menu/user-nav.js","webpack://misago/./src/components/user-menu/root.js","webpack://misago/./src/initializers/components/user-menu.js","webpack://misago/./src/components/users/UsersNav.js","webpack://misago/./src/components/users/active-posters/list-empty.js","webpack://misago/./src/components/users/active-posters/list-item-preview.js","webpack://misago/./src/components/users/active-posters/list-preview.js","webpack://misago/./src/components/users/active-posters/list-item.js","webpack://misago/./src/components/users/active-posters/list-ready.js","webpack://misago/./src/components/users/active-posters/root.js","webpack://misago/./src/components/page-lead.js","webpack://misago/./src/utils/string-count.js","webpack://misago/./src/components/users/rank/RankUsersList.js","webpack://misago/./src/components/users/rank/RankUsersListLoader.js","webpack://misago/./src/components/users/rank/RankUsersLeft.jsx","webpack://misago/./src/components/users/rank/RankUsersPagination.jsx","webpack://misago/./src/components/users/rank/RankUsersToolbar.jsx","webpack://misago/./src/components/users/rank/root.js","webpack://misago/./src/components/users/root.js","webpack://misago/./src/initializers/components/users.js","webpack://misago/./src/initializers/include.js","webpack://misago/./src/initializers/local-storage.js","webpack://misago/./src/initializers/mobile-navbar-dropdown.js","webpack://misago/./src/initializers/modal.js","webpack://misago/./src/initializers/moment-locale.js","webpack://misago/./src/initializers/page-title.js","webpack://misago/./src/initializers/polls.js","webpack://misago/./src/initializers/posting.js","webpack://misago/./src/initializers/reducers/auth.js","webpack://misago/./src/initializers/reducers/participants.js","webpack://misago/./src/initializers/reducers/poll.js","webpack://misago/./src/initializers/reducers/posts.js","webpack://misago/./src/initializers/reducers/profile-details.js","webpack://misago/./src/initializers/reducers/profile-hydrate.js","webpack://misago/./src/initializers/reducers/profile.js","webpack://misago/./src/initializers/reducers/search.js","webpack://misago/./src/initializers/reducers/selection.js","webpack://misago/./src/initializers/reducers/snackbar.js","webpack://misago/./src/initializers/reducers/thread.js","webpack://misago/./src/initializers/reducers/threads.js","webpack://misago/./src/initializers/reducers/tick.js","webpack://misago/./src/initializers/reducers/username-history.js","webpack://misago/./src/initializers/reducers/users.js","webpack://misago/./src/initializers/snackbar.js","webpack://misago/./src/initializers/store.js","webpack://misago/./src/initializers/tick-start.js","webpack://misago/./src/initializers/zxcvbn.js","webpack://misago/./src/reducers/auth.js","webpack://misago/./src/reducers/participants.js","webpack://misago/./src/reducers/poll.js","webpack://misago/./src/reducers/post.js","webpack://misago/./src/reducers/posts.js","webpack://misago/./src/reducers/profile-details.js","webpack://misago/./src/reducers/profile.js","webpack://misago/./src/reducers/search.js","webpack://misago/./src/reducers/selection.js","webpack://misago/./src/reducers/snackbar.js","webpack://misago/./src/reducers/thread.js","webpack://misago/./src/reducers/threads.js","webpack://misago/./src/reducers/tick.js","webpack://misago/./src/reducers/username-history.js","webpack://misago/./src/reducers/users.js","webpack://misago/./src/services/ajax.js","webpack://misago/./src/services/auth.js","webpack://misago/./src/services/captcha.js","webpack://misago/./src/services/include.js","webpack://misago/./src/services/local-storage.js","webpack://misago/./src/services/mobile-navbar-dropdown.js","webpack://misago/./src/services/modal.js","webpack://misago/./src/services/page-title.js","webpack://misago/./src/services/polls.js","webpack://misago/./src/services/posting.js","webpack://misago/./src/services/snackbar.js","webpack://misago/./src/services/store.js","webpack://misago/./src/services/zxcvbn.js","webpack://misago/./src/components/banned-page.js","webpack://misago/./src/utils/banned-page.js","webpack://misago/./src/utils/batch.js","webpack://misago/./src/utils/concat-unique.js","webpack://misago/./src/utils/escape-html.js","webpack://misago/./src/utils/file-size.js","webpack://misago/./src/utils/mount-component.js","webpack://misago/./src/utils/random.js","webpack://misago/./src/utils/routed-component.js","webpack://misago/./src/utils/sets.js","webpack://misago/./src/utils/validators.js","webpack://misago/./node_modules/moment/locale/ sync ^\\.\\/.*$","webpack://misago/webpack/bootstrap","webpack://misago/webpack/runtime/compat get default export","webpack://misago/webpack/runtime/define property getters","webpack://misago/webpack/runtime/ensure chunk","webpack://misago/webpack/runtime/get javascript chunk filename","webpack://misago/webpack/runtime/get mini-css chunk filename","webpack://misago/webpack/runtime/global","webpack://misago/webpack/runtime/harmony module decorator","webpack://misago/webpack/runtime/hasOwnProperty shorthand","webpack://misago/webpack/runtime/make namespace object","webpack://misago/webpack/runtime/node module decorator","webpack://misago/webpack/runtime/publicPath","webpack://misago/webpack/runtime/jsonp chunk loading","webpack://misago/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"misago:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","import classnames from \"classnames\"\nimport React from \"react\"\n\nconst FlexRow = ({ children, className }) => (\n  <div className={classnames(\"flex-row\", className)}>{children}</div>\n)\n\nexport default FlexRow\n","import classnames from \"classnames\"\nimport React from \"react\"\n\nconst FlexRowCol = ({ children, className, shrink }) => (\n  <div\n    className={classnames(\"flex-row-col\", className, {\n      \"flex-row-col-shrink\": shrink,\n    })}\n  >\n    {children}\n  </div>\n)\n\nexport default FlexRowCol\n","import classnames from \"classnames\"\nimport React from \"react\"\n\nconst FlexRowSection = ({ auto, children, className }) => (\n  <div\n    className={classnames(\n      \"flex-row-section\",\n      { \"flex-row-section-auto\": auto },\n      className\n    )}\n  >\n    {children}\n  </div>\n)\n\nexport default FlexRowSection\n","import React from \"react\"\n\nconst PageContainer = ({ children }) => (\n  <div className=\"container page-container\">{children}</div>\n)\n\nexport default PageContainer\n","import classnames from \"classnames\"\nimport React from \"react\"\n\nconst PageHeader = ({ children, className, styleName }) => (\n  <div\n    className={classnames(\n      \"page-header\",\n      className,\n      styleName && \"page-header-\" + styleName\n    )}\n  >\n    <div className=\"page-header-bg-image\">\n      <div className=\"page-header-bg-overlay\">\n        <div className=\"page-header-image\" />\n        {children}\n      </div>\n    </div>\n  </div>\n)\n\nexport default PageHeader\n","import classnames from \"classnames\"\nimport React from \"react\"\n\nconst PageHeaderBanner = ({ children, className, styleName }) => (\n  <div\n    className={classnames(\n      \"page-header-banner\",\n      className,\n      styleName && \"page-header-banner-\" + styleName\n    )}\n  >\n    <div className=\"page-header-banner-bg-image\">\n      <div className=\"page-header-banner-bg-overlay\">{children}</div>\n    </div>\n  </div>\n)\n\nexport default PageHeaderBanner\n","import React from \"react\"\n\nconst PageHeaderContainer = ({ children }) => (\n  <div className=\"container page-header-container\">{children}</div>\n)\n\nexport default PageHeaderContainer\n","import classnames from \"classnames\"\nimport React from \"react\"\n\nconst PageHeaderDetails = ({ children, className }) => (\n  <div className={classnames(\"page-header-details\", className)}>{children}</div>\n)\n\nexport default PageHeaderDetails\n","import classnames from \"classnames\"\nimport React from \"react\"\n\nconst PageHeaderHTMLMessage = ({ className, message }) => (\n  <div\n    className={classnames(\"page-header-message\", className)}\n    dangerouslySetInnerHTML={{ __html: message }}\n  />\n)\n\nexport default PageHeaderHTMLMessage\n","import classnames from \"classnames\"\nimport React from \"react\"\n\nconst PageHeaderMessage = ({ children, className }) => (\n  <div className={classnames(\"page-header-message\", className)}>{children}</div>\n)\n\nexport default PageHeaderMessage\n","import React from \"react\"\nimport PageHeader from \"./PageHeader\"\nimport PageHeaderBanner from \"./PageHeaderBanner\"\nimport PageHeaderContainer from \"./PageHeaderContainer\"\nimport PageHeaderDetails from \"./PageHeaderDetails\"\n\nconst PageHeaderPlain = ({ styleName, header, message }) => (\n  <PageHeaderContainer>\n    <PageHeader styleName={styleName}>\n      <PageHeaderBanner styleName={styleName}>\n        <h1>{header}</h1>\n      </PageHeaderBanner>\n      {message && (\n        <PageHeaderDetails styleName={styleName}>{message}</PageHeaderDetails>\n      )}\n    </PageHeader>\n  </PageHeaderContainer>\n)\n\nexport default PageHeaderPlain\n","import React from \"react\"\nimport misago from \"misago\"\nimport escapeHtml from \"misago/utils/escape-html\"\n\nconst AGREEMENT_URL = '<a href=\"%(url)s\" target=\"_blank\">%(agreement)s</a>'\n\nconst RegisterLegalFootnote = (props) => {\n  const {\n    errors,\n    privacyPolicy,\n    termsOfService,\n    onPrivacyPolicyChange,\n    onTermsOfServiceChange,\n  } = props\n\n  const termsOfServiceId = misago.get(\"TERMS_OF_SERVICE_ID\")\n  const termsOfServiceUrl = misago.get(\"TERMS_OF_SERVICE_URL\")\n\n  const privacyPolicyId = misago.get(\"PRIVACY_POLICY_ID\")\n  const privacyPolicyUrl = misago.get(\"PRIVACY_POLICY_URL\")\n\n  if (!termsOfServiceId && !privacyPolicyId) return null\n\n  return (\n    <div>\n      <LegalAgreement\n        agreement={gettext(\"the terms of service\")}\n        checked={termsOfService !== null}\n        errors={errors.termsOfService}\n        url={termsOfServiceUrl}\n        value={termsOfServiceId}\n        onChange={onTermsOfServiceChange}\n      />\n      <LegalAgreement\n        agreement={gettext(\"the privacy policy\")}\n        checked={privacyPolicy !== null}\n        errors={errors.privacyPolicy}\n        url={privacyPolicyUrl}\n        value={privacyPolicyId}\n        onChange={onPrivacyPolicyChange}\n      />\n    </div>\n  )\n}\n\nconst LegalAgreement = (props) => {\n  const { agreement, checked, errors, url, value, onChange } = props\n\n  if (!url) return null\n\n  const agreementHtml = interpolate(\n    AGREEMENT_URL,\n    { agreement: escapeHtml(agreement), url: escapeHtml(url) },\n    true\n  )\n  const label = interpolate(\n    gettext(\"I have read and accept %(agreement)s.\"),\n    { agreement: agreementHtml },\n    true\n  )\n\n  return (\n    <div className=\"checkbox legal-footnote\">\n      <label>\n        <input\n          checked={checked}\n          type=\"checkbox\"\n          value={value}\n          onChange={onChange}\n        />\n        <span dangerouslySetInnerHTML={{ __html: label }} />\n      </label>\n      {errors &&\n        errors.map((error, i) => (\n          <div className=\"help-block errors\" key={i}>\n            {error}\n          </div>\n        ))}\n    </div>\n  )\n}\n\nexport default RegisterLegalFootnote\n","import React from \"react\"\nimport misago from \"misago\"\n\nconst StartSocialAuth = (props) => {\n  const { buttonClassName, buttonLabel, formLabel, header, labelClassName } =\n    props\n  const socialAuth = misago.get(\"SOCIAL_AUTH\")\n\n  if (socialAuth.length === 0) return null\n\n  return (\n    <div className=\"form-group form-social-auth\">\n      <FormHeader className={labelClassName} text={header} />\n      <div className=\"row\">\n        {socialAuth.map(({ id, name, button_text, button_color, url }) => {\n          const className = \"btn btn-block btn-default btn-social-\" + id\n          const style = button_color ? { color: button_color } : null\n          const finalButtonLabel =\n            button_text || interpolate(buttonLabel, { site: name }, true)\n\n          return (\n            <div className={buttonClassName || \"col-xs-12\"} key={id}>\n              <a className={className} style={style} href={url}>\n                {finalButtonLabel}\n              </a>\n            </div>\n          )\n        })}\n      </div>\n      <hr />\n      <FormHeader className={labelClassName} text={formLabel} />\n    </div>\n  )\n}\n\nconst FormHeader = ({ className, text }) => {\n  if (!text) return null\n  return <h5 className={className || \"\"}>{text}</h5>\n}\n\nexport default StartSocialAuth\n","import React from \"react\"\n\nconst ThreadFlags = ({ thread }) => (\n  <ul className=\"thread-flags\">\n    {thread.weight == 2 && (\n      <li\n        className=\"thread-flag-pinned-globally\"\n        title={gettext(\"Pinned globally\")}\n      >\n        <span className=\"material-icon\">bookmark</span>\n      </li>\n    )}\n    {thread.weight == 1 && (\n      <li\n        className=\"thread-flag-pinned-locally\"\n        title={gettext(\"Pinned in category\")}\n      >\n        <span className=\"material-icon\">bookmark_outline</span>\n      </li>\n    )}\n    {thread.best_answer && (\n      <li className=\"thread-flag-answered\" title={gettext(\"Answered\")}>\n        <span className=\"material-icon\">check_circle</span>\n      </li>\n    )}\n    {thread.has_poll && (\n      <li className=\"thread-flag-poll\" title={gettext(\"Poll\")}>\n        <span className=\"material-icon\">poll</span>\n      </li>\n    )}\n    {(thread.is_unapproved || thread.has_unapproved_posts) && (\n      <li\n        className=\"thread-flag-unapproved\"\n        title={\n          thread.is_unapproved\n            ? gettext(\"Awaiting approval\")\n            : gettext(\"Has unapproved posts\")\n        }\n      >\n        <span className=\"material-icon\">visibility</span>\n      </li>\n    )}\n    {thread.is_closed && (\n      <li className=\"thread-flag-closed\" title={gettext(\"Closed\")}>\n        <span className=\"material-icon\">lock</span>\n      </li>\n    )}\n    {thread.is_hidden && (\n      <li className=\"thread-flag-hidden\" title={gettext(\"Hidden\")}>\n        <span className=\"material-icon\">visibility_off</span>\n      </li>\n    )}\n  </ul>\n)\n\nexport default ThreadFlags\n","import React from \"react\"\n\nconst ThreadReplies = ({ thread }) => (\n  <span\n    className=\"threads-replies\"\n    title={interpolate(\n      ngettext(\"%(replies)s reply\", \"%(replies)s replies\", thread.replies),\n      { replies: thread.replies },\n      true\n    )}\n  >\n    <span className=\"material-icon\">chat_bubble_outline</span>\n    {thread.replies > 980\n      ? Math.round(thread.replies / 1000) + \"K\"\n      : thread.replies}\n  </span>\n)\n\nexport default ThreadReplies\n","import classnames from \"classnames\"\nimport React from \"react\"\n\nconst Toolbar = ({ children, className }) => (\n  <nav className={classnames(\"toolbar\", className)}>{children}</nav>\n)\n\nexport default Toolbar\n","import classnames from \"classnames\"\nimport React from \"react\"\n\nconst ToolbarItem = ({ children, className, shrink }) => (\n  <div\n    className={classnames(\"toolbar-item\", className, {\n      \"toolbar-item-shrink\": shrink,\n    })}\n  >\n    {children}\n  </div>\n)\n\nexport default ToolbarItem\n","import classnames from \"classnames\"\nimport React from \"react\"\n\nconst ToolbarSection = ({ auto, children, className }) => (\n  <div\n    className={classnames(\n      \"toolbar-section\",\n      { \"toolbar-section-auto\": auto },\n      className\n    )}\n  >\n    {children}\n  </div>\n)\n\nexport default ToolbarSection\n","import classnames from \"classnames\"\nimport React from \"react\"\n\nconst ToolbarSpacer = ({ className }) => (\n  <div className={classnames(\"toolbar-spacer\", className)} />\n)\n\nexport default ToolbarSpacer\n","import React from \"react\"\nimport misago from \"misago\"\n\nexport default function (props) {\n  const size = props.size || 100\n  const size2x = props.size2x || size\n\n  return (\n    <img\n      alt=\"\"\n      className={props.className || \"user-avatar\"}\n      src={getSrc(props.user, size)}\n      srcSet={getSrc(props.user, size2x)}\n      width={size}\n      height={size}\n    />\n  )\n}\n\nexport function getSrc(user, size) {\n  if (user && user.id) {\n    // just avatar hash, size and user id\n    return resolveAvatarForSize(user.avatars, size).url\n  } else {\n    // just append avatar size to file to produce no-avatar placeholder\n    return misago.get(\"BLANK_AVATAR_URL\")\n  }\n}\n\nexport function resolveAvatarForSize(avatars, size) {\n  let avatar = avatars[0]\n  avatars.forEach((av) => {\n    if (av.size >= size) {\n      avatar = av\n    }\n  })\n  return avatar\n}\n","import React from \"react\"\nimport Loader from \"./loader\"\n\nexport default class Button extends React.Component {\n  render() {\n    let className = \"btn \" + this.props.className\n    let disabled = this.props.disabled\n\n    if (this.props.loading) {\n      className += \" btn-loading\"\n      disabled = true\n    }\n\n    return (\n      <button\n        className={className}\n        disabled={disabled}\n        onClick={this.props.onClick}\n        type={this.props.onClick ? \"button\" : \"submit\"}\n      >\n        {this.props.children}\n        {this.props.loading ? <Loader /> : null}\n      </button>\n    )\n  }\n}\n\nButton.defaultProps = {\n  className: \"btn-default\",\n\n  type: \"submit\",\n\n  loading: false,\n  disabled: false,\n\n  onClick: null,\n}\n","import React from \"react\"\n\nexport default function (props) {\n  return (\n    <select\n      className={props.className || \"form-control\"}\n      disabled={props.disabled || false}\n      id={props.id || null}\n      onChange={props.onChange}\n      value={props.value}\n    >\n      {props.choices.map((item) => {\n        return (\n          <option\n            disabled={item.disabled || false}\n            key={item.value}\n            value={item.value}\n          >\n            {\"- - \".repeat(item.level) + item.label}\n          </option>\n        )\n      })}\n    </select>\n  )\n}\n","import React from \"react\"\nimport PanelMessage from \"misago/components/panel-message\"\n\nexport default function ({ display }) {\n  if (!display) return null\n\n  return (\n    <PanelMessage\n      helpText={gettext(\"No profile details are editable at this time.\")}\n      message={gettext(\"This option is currently unavailable.\")}\n    />\n  )\n}\n","import React from \"react\"\nimport Loader from \"misago/components/loader\"\n\nexport default function ({ display }) {\n  if (!display) return null\n\n  return (\n    <div className=\"panel-body\">\n      <Loader />\n    </div>\n  )\n}\n","import React from \"react\"\nimport Select from \"misago/components/select\"\n\nexport default class extends React.Component {\n  onChange = (ev) => {\n    const { field, onChange } = this.props\n    onChange(field.fieldname, ev.target.value)\n  }\n\n  render() {\n    const { disabled, field, value } = this.props\n    const { input } = field\n\n    if (input.type === \"select\") {\n      return (\n        <Select\n          choices={input.choices}\n          disabled={disabled}\n          id={\"id_\" + field.fieldname}\n          onChange={this.onChange}\n          value={value}\n        />\n      )\n    }\n\n    if (input.type === \"textarea\") {\n      return (\n        <textarea\n          className=\"form-control\"\n          disabled={disabled}\n          id={\"id_\" + field.fieldname}\n          onChange={this.onChange}\n          rows=\"4\"\n          type=\"text\"\n          value={value}\n        />\n      )\n    }\n\n    if (input.type === \"text\") {\n      return (\n        <input\n          className=\"form-control\"\n          disabled={disabled}\n          id={\"id_\" + field.fieldname}\n          onChange={this.onChange}\n          type=\"text\"\n          value={value}\n        />\n      )\n    }\n\n    return null\n  }\n}\n","import React from \"react\"\nimport FieldInput from \"./field-input\"\nimport FormGroup from \"misago/components/form-group\"\n\nexport default function ({ disabled, errors, fields, name, onChange, value }) {\n  return (\n    <fieldset>\n      <legend>{name}</legend>\n      {fields.map((field) => {\n        return (\n          <FormGroup\n            for={\"id_\" + field.fieldname}\n            helpText={field.help_text}\n            key={field.fieldname}\n            label={field.label}\n            validation={errors[field.fieldname]}\n          >\n            <FieldInput\n              disabled={disabled}\n              field={field}\n              onChange={onChange}\n              value={value[field.fieldname]}\n            />\n          </FormGroup>\n        )\n      })}\n    </fieldset>\n  )\n}\n","import React from \"react\"\nimport Fieldset from \"./fieldset\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      errors: {},\n    }\n\n    const groups = props.groups.length\n    for (let i = 0; i < groups; i++) {\n      const group = props.groups[i]\n      const fields = group.fields.length\n      for (let f = 0; f < fields; f++) {\n        const fieldname = group.fields[f].fieldname\n        const initial = group.fields[f].initial\n        this.state[fieldname] = initial\n      }\n    }\n  }\n\n  send() {\n    const data = Object.assign({}, this.state, {\n      errors: null,\n      isLoading: null,\n    })\n\n    return ajax.post(this.props.api, data)\n  }\n\n  handleSuccess(data) {\n    this.props.onSuccess(data)\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      snackbar.error(gettext(\"Form contains errors.\"))\n      this.setState({ errors: rejection })\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  onChange = (name, value) => {\n    this.setState({\n      [name]: value,\n    })\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"panel-body\">\n          {this.props.groups.map((group, i) => {\n            return (\n              <Fieldset\n                disabled={this.state.isLoading}\n                errors={this.state.errors}\n                fields={group.fields}\n                name={group.name}\n                key={i}\n                onChange={this.onChange}\n                value={this.state}\n              />\n            )\n          })}\n        </div>\n        <div className=\"panel-footer text-right\">\n          <CancelButton\n            disabled={this.state.isLoading}\n            onCancel={this.props.onCancel}\n          />{\" \"}\n          <Button className=\"btn-primary\" loading={this.state.isLoading}>\n            {gettext(\"Save changes\")}\n          </Button>\n        </div>\n      </form>\n    )\n  }\n}\n\nexport function CancelButton({ onCancel, disabled }) {\n  if (!onCancel) return null\n\n  return (\n    <button\n      className=\"btn btn-default\"\n      disabled={disabled}\n      onClick={onCancel}\n      type=\"button\"\n    >\n      {gettext(\"Cancel\")}\n    </button>\n  )\n}\n","import React from \"react\"\nimport Blankslate from \"./blankslate\"\nimport Loader from \"./loader\"\nimport Form from \"./form\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      loading: true,\n      groups: null,\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(this.props.api).then(\n      (groups) => {\n        this.setState({\n          loading: false,\n\n          groups,\n        })\n      },\n      (rejection) => {\n        snackbar.apiError(rejection)\n        if (this.props.cancel) {\n          this.props.cancel()\n        }\n      }\n    )\n  }\n\n  render() {\n    const { groups, loading } = this.state\n\n    return (\n      <div className=\"panel panel-default panel-form\">\n        <div className=\"panel-heading\">\n          <h3 className=\"panel-title\">{gettext(\"Edit details\")}</h3>\n        </div>\n        <Loader display={loading} />\n        <Blankslate display={!loading && !groups.length} />\n        <FormDisplay\n          api={this.props.api}\n          display={!loading && groups.length}\n          groups={groups}\n          onCancel={this.props.onCancel}\n          onSuccess={this.props.onSuccess}\n        />\n      </div>\n    )\n  }\n}\n\nexport function FormDisplay({ api, display, groups, onCancel, onSuccess }) {\n  if (!display) return null\n\n  return (\n    <Form api={api} groups={groups} onCancel={onCancel} onSuccess={onSuccess} />\n  )\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  isValidated() {\n    return typeof this.props.validation !== \"undefined\"\n  }\n\n  getClassName() {\n    let className = \"form-group\"\n    if (this.isValidated()) {\n      className += \" has-feedback\"\n      if (this.props.validation === null) {\n        className += \" has-success\"\n      } else {\n        className += \" has-error\"\n      }\n    }\n    return className\n  }\n\n  getFeedback() {\n    if (this.props.validation) {\n      return (\n        <div className=\"help-block errors\">\n          {this.props.validation.map((error, i) => {\n            return <p key={this.props.for + \"FeedbackItem\" + i}>{error}</p>\n          })}\n        </div>\n      )\n    } else {\n      return null\n    }\n  }\n\n  getFeedbackDescription() {\n    if (this.isValidated()) {\n      return (\n        <span id={this.props.for + \"_status\"} className=\"sr-only\">\n          {this.props.validation ? gettext(\"(error)\") : gettext(\"(success)\")}\n        </span>\n      )\n    } else {\n      return null\n    }\n  }\n\n  getHelpText() {\n    if (this.props.helpText) {\n      return <p className=\"help-block\">{this.props.helpText}</p>\n    } else {\n      return null\n    }\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()}>\n        <label\n          className={\"control-label \" + (this.props.labelClass || \"\")}\n          htmlFor={this.props.for || \"\"}\n        >\n          {this.props.label + \":\"}\n        </label>\n        <div className={this.props.controlClass || \"\"}>\n          {this.props.children}\n          {this.getFeedbackDescription()}\n          {this.getFeedback()}\n          {this.getHelpText()}\n          {this.props.extra || null}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport { required } from \"misago/utils/validators\"\nimport snackbar from \"misago/services/snackbar\"\n\nlet validateRequired = required()\n\nexport default class extends React.Component {\n  validate() {\n    let errors = {}\n    if (!this.state.validators) {\n      return errors\n    }\n\n    let validators = {\n      required: this.state.validators.required || this.state.validators,\n      optional: this.state.validators.optional || {},\n    }\n\n    let validatedFields = []\n\n    // add required fields to validation\n    for (let name in validators.required) {\n      if (\n        validators.required.hasOwnProperty(name) &&\n        validators.required[name]\n      ) {\n        validatedFields.push(name)\n      }\n    }\n\n    // add optional fields to validation\n    for (let name in validators.optional) {\n      if (\n        validators.optional.hasOwnProperty(name) &&\n        validators.optional[name]\n      ) {\n        validatedFields.push(name)\n      }\n    }\n\n    // validate fields values\n    for (let i in validatedFields) {\n      let name = validatedFields[i]\n      let fieldErrors = this.validateField(name, this.state[name])\n\n      if (fieldErrors === null) {\n        errors[name] = null\n      } else if (fieldErrors) {\n        errors[name] = fieldErrors\n      }\n    }\n\n    return errors\n  }\n\n  isValid() {\n    let errors = this.validate()\n    for (let field in errors) {\n      if (errors.hasOwnProperty(field)) {\n        if (errors[field] !== null) {\n          return false\n        }\n      }\n    }\n\n    return true\n  }\n\n  validateField(name, value) {\n    let errors = []\n    if (!this.state.validators) {\n      return errors\n    }\n\n    let validators = {\n      required: (this.state.validators.required || this.state.validators)[name],\n      optional: (this.state.validators.optional || {})[name],\n    }\n\n    let requiredError = validateRequired(value) || false\n\n    if (validators.required) {\n      if (requiredError) {\n        errors = [requiredError]\n      } else {\n        for (let i in validators.required) {\n          let validationError = validators.required[i](value)\n          if (validationError) {\n            errors.push(validationError)\n          }\n        }\n      }\n\n      return errors.length ? errors : null\n    } else if (requiredError === false && validators.optional) {\n      for (let i in validators.optional) {\n        let validationError = validators.optional[i](value)\n        if (validationError) {\n          errors.push(validationError)\n        }\n      }\n\n      return errors.length ? errors : null\n    }\n\n    return false // false === field wasn't validated\n  }\n\n  bindInput = (name) => {\n    return (event) => {\n      this.changeValue(name, event.target.value)\n    }\n  }\n\n  changeValue = (name, value) => {\n    let newState = {\n      [name]: value,\n    }\n\n    const formErrors = this.state.errors || {}\n    formErrors[name] = this.validateField(name, newState[name])\n    newState.errors = formErrors\n\n    this.setState(newState)\n  }\n\n  clean() {\n    return true\n  }\n\n  send() {\n    return null\n  }\n\n  handleSuccess(success) {\n    return\n  }\n\n  handleError(rejection) {\n    snackbar.apiError(rejection)\n  }\n\n  handleSubmit = (event) => {\n    // we don't reload page on submissions\n    if (event) {\n      event.preventDefault()\n    }\n\n    if (this.state.isLoading) {\n      return\n    }\n\n    if (this.clean()) {\n      this.setState({ isLoading: true })\n      let promise = this.send()\n\n      if (promise) {\n        promise.then(\n          (success) => {\n            this.setState({ isLoading: false })\n            this.handleSuccess(success)\n          },\n          (rejection) => {\n            this.setState({ isLoading: false })\n            this.handleError(rejection)\n          }\n        )\n      } else {\n        this.setState({ isLoading: false })\n      }\n    }\n  }\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  isActive() {\n    if (this.props.isControlled) {\n      return this.props.isActive\n    } else {\n      if (this.props.path) {\n        return document.location.pathname.indexOf(this.props.path) === 0\n      } else {\n        return false\n      }\n    }\n  }\n\n  getClassName() {\n    if (this.isActive()) {\n      return (\n        (this.props.className || \"\") +\n        \" \" +\n        (this.props.activeClassName || \"active\")\n      )\n    } else {\n      return this.props.className || \"\"\n    }\n  }\n\n  render() {\n    return <li className={this.getClassName()}>{this.props.children}</li>\n  }\n}\n","import React from \"react\"\n\nexport default function (props) {\n  return (\n    <div className={props.className || \"loader\"}>\n      <div className=\"loader-spinning-wheel\" />\n    </div>\n  )\n}\n","import React from \"react\"\nimport Button from \"./button\"\nimport Form from \"./form\"\nimport FormGroup from \"./form-group\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      bestAnswer: \"0\",\n      poll: \"0\",\n    }\n  }\n\n  clean() {\n    if (this.props.polls && this.state.poll === \"0\") {\n      const confirmation = window.confirm(\n        gettext(\"Are you sure you want to delete all polls?\")\n      )\n      return confirmation\n    }\n\n    return true\n  }\n\n  send() {\n    const data = Object.assign({}, this.props.data, {\n      best_answer: this.state.bestAnswer,\n      poll: this.state.poll,\n    })\n\n    return ajax.post(this.props.api, data)\n  }\n\n  handleSuccess = (success) => {\n    this.props.onSuccess(success)\n    modal.hide()\n  }\n\n  handleError = (rejection) => {\n    this.props.onError(rejection)\n  }\n\n  onBestAnswerChange = (event) => {\n    this.changeValue(\"bestAnswer\", event.target.value)\n  }\n\n  onPollChange = (event) => {\n    this.changeValue(\"poll\", event.target.value)\n  }\n\n  render() {\n    return (\n      <div className=\"modal-dialog\" role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              aria-label={pgettext(\"modal\", \"Close\")}\n              className=\"close\"\n              data-dismiss=\"modal\"\n              type=\"button\"\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Merge threads\")}</h4>\n          </div>\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"modal-body\">\n              <BestAnswerSelect\n                choices={this.props.bestAnswers}\n                onChange={this.onBestAnswerChange}\n                value={this.state.bestAnswer}\n              />\n              <PollSelect\n                choices={this.props.polls}\n                onChange={this.onPollChange}\n                value={this.state.poll}\n              />\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn btn-default\"\n                data-dismiss=\"modal\"\n                disabled={this.state.isLoading}\n                type=\"button\"\n              >\n                {gettext(\"Cancel\")}\n              </button>\n              <Button className=\"btn-primary\" loading={this.state.isLoading}>\n                {gettext(\"Merge threads\")}\n              </Button>\n            </div>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport function BestAnswerSelect({ choices, onChange, value }) {\n  if (!choices) return null\n\n  return (\n    <FormGroup\n      label={gettext(\"Best answer\")}\n      helpText={gettext(\n        \"Please select the best answer for your newly merged thread. No posts will be deleted during the merge.\"\n      )}\n      for=\"id_best_answer\"\n    >\n      <select\n        className=\"form-control\"\n        id=\"id_best_answer\"\n        onChange={onChange}\n        value={value}\n      >\n        {choices.map((choice) => {\n          return (\n            <option value={choice[0]} key={choice[0]}>\n              {choice[1]}\n            </option>\n          )\n        })}\n      </select>\n    </FormGroup>\n  )\n}\n\nexport function PollSelect({ choices, onChange, value }) {\n  if (!choices) return null\n\n  return (\n    <FormGroup\n      label={gettext(\"Poll\")}\n      helpText={gettext(\n        \"Please select the poll for your newly merged thread. Rejected polls will be permanently deleted and cannot be recovered.\"\n      )}\n      for=\"id_poll\"\n    >\n      <select\n        className=\"form-control\"\n        id=\"id_poll\"\n        onChange={onChange}\n        value={value}\n      >\n        {choices.map((choice) => {\n          return (\n            <option value={choice[0]} key={choice[0]}>\n              {choice[1]}\n            </option>\n          )\n        })}\n      </select>\n    </FormGroup>\n  )\n}\n","const ytRegExp = new RegExp(\n  \"^.*(?:(?:youtu.be/|v/|vi/|u/w/|embed/)|(?:(?:watch)??v(?:i)?=|&v(?:i)?=))([^#&?]*).*\"\n)\n\nexport class OneBox {\n  constructor() {\n    this._youtube = {}\n  }\n\n  render = (element) => {\n    if (!element) return\n    this.highlightCode(element)\n    this.embedYoutubePlayers(element)\n  }\n\n  highlightCode(element) {\n    import(\"highlight\").then(({ default: hljs }) => {\n      const codeblocks = element.querySelectorAll(\"pre>code\")\n      for (let i = 0; i < codeblocks.length; i++) {\n        hljs.highlightElement(codeblocks[i])\n      }\n    })\n  }\n\n  embedYoutubePlayers(element) {\n    const anchors = element.querySelectorAll(\"p>a\")\n    for (let i = 0; i < anchors.length; i++) {\n      const a = anchors[i]\n      const p = a.parentNode\n      const onlyChild = p.childNodes.length === 1\n\n      if (!this._youtube[a.href]) {\n        this._youtube[a.href] = parseYoutubeUrl(a.href)\n      }\n\n      const youtubeMovie = this._youtube[a.href]\n      if (onlyChild && !!youtubeMovie && youtubeMovie.data !== false) {\n        this.swapYoutubePlayer(a, youtubeMovie)\n      }\n    }\n  }\n\n  swapYoutubePlayer(element, youtube) {\n    let url = \"https://www.youtube.com/embed/\"\n    url += youtube.video\n    url += \"?feature=oembed\"\n    if (youtube.start) {\n      url += \"&start=\" + youtube.start\n    }\n\n    const player = $(\n      '<iframe class=\"embed-responsive-item\" frameborder=\"0\" ' +\n        'src=\"' +\n        url +\n        '\" ' +\n        'allow=\"encrypted-media; gyroscope; picture-in-picture\" ' +\n        \"allowfullscreen></iframe>\"\n    )\n    $(element).replaceWith(player)\n    player.wrap('<div class=\"embed-responsive embed-responsive-16by9\"></div>')\n  }\n}\n\nexport default new OneBox()\n\nexport function parseYoutubeUrl(url) {\n  const cleanedUrl = cleanUrl(url)\n  const video = getVideoIdFromUrl(cleanedUrl)\n\n  if (!video) return null\n\n  let start = 0\n  if (cleanedUrl.indexOf(\"?\") > 0) {\n    const query = cleanedUrl.substr(cleanedUrl.indexOf(\"?\") + 1)\n    const timebit = query.split(\"&\").filter((i) => {\n      return i.substr(0, 2) === \"t=\"\n    })[0]\n\n    if (timebit) {\n      const bits = timebit.substr(2).split(\"m\")\n      if (bits[0].substr(-1) === \"s\") {\n        start += parseInt(bits[0].substr(0, bits[0].length - 1))\n      } else {\n        start += parseInt(bits[0]) * 60\n        if (!!bits[1] && bits[1].substr(-1) === \"s\") {\n          start += parseInt(bits[1].substr(0, bits[1].length - 1))\n        }\n      }\n    }\n  }\n\n  return {\n    start,\n    video,\n  }\n}\n\nexport function cleanUrl(url) {\n  let clean = url\n\n  if (url.substr(0, 8) === \"https://\") {\n    clean = clean.substr(8)\n  } else if (url.substr(0, 7) === \"http://\") {\n    clean = clean.substr(7)\n  }\n\n  if (clean.substr(0, 4) === \"www.\") {\n    clean = clean.substr(4)\n  }\n\n  return clean\n}\n\nexport function getVideoIdFromUrl(url) {\n  if (url.indexOf(\"youtu\") === -1) return null\n\n  const video = url.match(ytRegExp)\n  if (video) {\n    return video[1]\n  }\n  return null\n}\n","import classnames from \"classnames\"\nimport React from \"react\"\nimport onebox from \"misago/services/one-box\"\n\nexport default class extends React.Component {\n  componentDidMount() {\n    onebox.render(this.documentNode)\n    $(this.documentNode).find(\".spoiler-reveal\").click(revealSpoiler)\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    onebox.render(this.documentNode)\n    $(this.documentNode).find(\".spoiler-reveal\").click(revealSpoiler)\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextProps.markup !== this.props.markup\n  }\n\n  render() {\n    return (\n      <article\n        className={classnames(\"misago-markup\", this.props.className)}\n        dangerouslySetInnerHTML={{ __html: this.props.markup }}\n        data-author={this.props.author || undefined}\n        ref={(node) => {\n          this.documentNode = node\n        }}\n      />\n    )\n  }\n}\n\nfunction revealSpoiler(event) {\n  var btn = event.target\n  $(btn).parent().parent().addClass(\"revealed\")\n}\n","import React from \"react\"\nimport Loader from \"misago/components/loader\"\n\nexport default class extends React.Component {\n  render() {\n    return (\n      <div className=\"modal-body modal-loader\">\n        <Loader />\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport PanelMessage from \"misago/components/panel-message\"\n\nexport default class extends PanelMessage {\n  getHelpText() {\n    if (this.props.helpText) {\n      return <p className=\"help-block\">{this.props.helpText}</p>\n    } else {\n      return null\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"modal-body\">\n        <div className=\"message-icon\">\n          <span className=\"material-icon\">\n            {this.props.icon || \"info_outline\"}\n          </span>\n        </div>\n        <div className=\"message-body\">\n          <p className=\"lead\">{this.props.message}</p>\n          {this.getHelpText()}\n          <button\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            {gettext(\"Ok\")}\n          </button>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Loader from \"misago/components/loader\"\n\nexport default class extends React.Component {\n  render() {\n    return (\n      <div className=\"panel-body panel-body-loading\">\n        <Loader className=\"loader loader-spaced\" />\n      </div>\n    )\n  }\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  getHelpText() {\n    if (this.props.helpText) {\n      return <p className=\"help-block\">{this.props.helpText}</p>\n    } else {\n      return null\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"panel-body panel-message-body\">\n        <div className=\"message-icon\">\n          <span className=\"material-icon\">\n            {this.props.icon || \"info_outline\"}\n          </span>\n        </div>\n        <div className=\"message-body\">\n          <p className=\"lead\">{this.props.message}</p>\n          {this.getHelpText()}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport MisagoMarkup from \"misago/components/misago-markup\"\n\nexport default function (props) {\n  if (props.post.content) {\n    return <Default {...props} />\n  } else {\n    return <Invalid {...props} />\n  }\n}\n\nexport function Default(props) {\n  return (\n    <div className=\"post-body\">\n      <MisagoMarkup markup={props.post.content} />\n    </div>\n  )\n}\n\nexport function Invalid(props) {\n  return (\n    <div className=\"post-body post-body-invalid\">\n      <p className=\"lead\">\n        {gettext(\"This post's contents cannot be displayed.\")}\n      </p>\n      <p className=\"text-muted\">\n        {gettext(\"This error is caused by invalid post content manipulation.\")}\n      </p>\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport default function ({ post }) {\n  const { category, thread } = post\n\n  const tooltip = interpolate(\n    gettext(\"posted %(posted_on)s\"),\n    {\n      posted_on: post.posted_on.format(\"LL, LT\"),\n    },\n    true\n  )\n\n  return (\n    <div className=\"post-heading\">\n      <a className=\"btn btn-link item-title\" href={thread.url}>\n        {thread.title}\n      </a>\n      <a className=\"btn btn-link post-category\" href={category.url.index}>\n        {category.name}\n      </a>\n      <a\n        href={post.url.index}\n        className=\"btn btn-link posted-on\"\n        title={tooltip}\n      >\n        {post.posted_on.fromNow()}\n      </a>\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport default function ({ post }) {\n  return (\n    <a className=\"btn btn-default btn-icon pull-right\" href={post.url.index}>\n      <span className=\"btn-text-left hidden-xs\">{gettext(\"See post\")}</span>\n      <span className=\"material-icon\">chevron_right</span>\n    </a>\n  )\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport GoToButton from \"./button\"\n\nexport default function ({ post }) {\n  return (\n    <div className=\"post-side post-side-anonymous\">\n      <GoToButton post={post} />\n      <div className=\"media\">\n        <div className=\"media-left\">\n          <span>\n            <Avatar className=\"poster-avatar\" size={50} />\n          </span>\n        </div>\n        <div className=\"media-body\">\n          <div className=\"media-heading\">\n            <span className=\"item-title\">{post.poster_name}</span>\n          </div>\n          <span className=\"user-title user-title-anonymous\">\n            {gettext(\"Removed user\")}\n          </span>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport default function ({ rank, title }) {\n  let userTitle = title || rank.title || rank.name\n\n  let className = \"user-title\"\n  if (rank.css_class) {\n    className += \" user-title-\" + rank.css_class\n  }\n\n  if (rank.is_tab) {\n    return (\n      <a className={className} href={rank.url}>\n        {userTitle}\n      </a>\n    )\n  }\n\n  return <span className={className}>{userTitle}</span>\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport GoToButton from \"./button\"\nimport UserTitle from \"./user-title\"\n\nexport default function ({ post, poster }) {\n  return (\n    <div className=\"post-side post-side-registered\">\n      <GoToButton post={post} />\n      <div className=\"media\">\n        <div className=\"media-left\">\n          <a href={poster.url}>\n            <Avatar className=\"poster-avatar\" size={50} user={poster} />\n          </a>\n        </div>\n        <div className=\"media-body\">\n          <div className=\"media-heading\">\n            <a className=\"item-title\" href={poster.url}>\n              {poster.username}\n            </a>\n          </div>\n          <UserTitle title={poster.title} rank={poster.rank} />\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Anonymous from \"./anonymous\"\nimport Registered from \"./registered\"\n\nexport default function ({ post, poster }) {\n  if (poster && poster.id) {\n    return <Registered post={post} poster={poster} />\n  }\n\n  return <Anonymous post={post} />\n}\n","import React from \"react\"\nimport Body from \"./body\"\nimport Header from \"./header\"\nimport PostSide from \"./post-side\"\n\nexport default function ({ post, poster }) {\n  const user = poster || post.poster\n\n  let className = \"post\"\n  if (user && user.rank.css_class) {\n    className += \" post-\" + user.rank.css_class\n  }\n\n  return (\n    <li className={className} id={\"post-\" + post.id}>\n      <div className=\"panel panel-default panel-post\">\n        <div className=\"panel-body\">\n          <div className=\"panel-content\">\n            <PostSide post={post} poster={user} />\n            <Header post={post} />\n            <Body post={post} />\n          </div>\n        </div>\n      </div>\n    </li>\n  )\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport * as random from \"misago/utils/random\"\n\nexport default function () {\n  return (\n    <ul className=\"posts-list post-feed ui-preview\">\n      <li className=\"post\">\n        <div className=\"panel panel-default panel-post\">\n          <div className=\"panel-body\">\n            <div className=\"panel-content\">\n              <div className=\"post-side post-side-anonymous\">\n                <div className=\"media\">\n                  <div className=\"media-left\">\n                    <span>\n                      <Avatar className=\"poster-avatar\" size={50} />\n                    </span>\n                  </div>\n                  <div className=\"media-body\">\n                    <div className=\"media-heading\">\n                      <span className=\"item-title\">\n                        <span\n                          className=\"ui-preview-text\"\n                          style={{ width: random.int(30, 200) + \"px\" }}\n                        >\n                          &nbsp;\n                        </span>\n                      </span>\n                    </div>\n                    <span className=\"user-title user-title-anonymous\">\n                      <span\n                        className=\"ui-preview-text\"\n                        style={{ width: random.int(30, 200) + \"px\" }}\n                      >\n                        &nbsp;\n                      </span>\n                    </span>\n                  </div>\n                </div>\n              </div>\n              <div className=\"post-heading\">\n                <span\n                  className=\"ui-preview-text\"\n                  style={{ width: random.int(30, 200) + \"px\" }}\n                >\n                  &nbsp;\n                </span>\n              </div>\n              <div className=\"post-body\">\n                <article className=\"misago-markup\">\n                  <p>\n                    <span\n                      className=\"ui-preview-text\"\n                      style={{ width: random.int(30, 200) + \"px\" }}\n                    >\n                      &nbsp;\n                    </span>\n                    &nbsp;\n                    <span\n                      className=\"ui-preview-text\"\n                      style={{ width: random.int(30, 200) + \"px\" }}\n                    >\n                      &nbsp;\n                    </span>\n                    &nbsp;\n                    <span\n                      className=\"ui-preview-text\"\n                      style={{ width: random.int(30, 200) + \"px\" }}\n                    >\n                      &nbsp;\n                    </span>\n                  </p>\n                </article>\n              </div>\n            </div>\n          </div>\n        </div>\n      </li>\n    </ul>\n  )\n}\n","import React from \"react\"\nimport Post from \"./post\"\nimport Preview from \"./preview\"\n\nexport default function ({ isReady, posts, poster }) {\n  if (!isReady) {\n    return <Preview />\n  }\n\n  return (\n    <ul className=\"posts-list post-feed ui-ready\">\n      {posts.map((post) => {\n        return <Post key={post.id} post={post} poster={poster} />\n      })}\n    </ul>\n  )\n}\n","import React from \"react\"\nimport posting from \"../../services/posting\"\nimport { getGlobalState, getQuoteMarkup } from \"../posting\"\n\nexport default class PostingQuoteSelection extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      range: null,\n      rect: null,\n    }\n\n    this.element = null\n  }\n\n  selected = () => {\n    if (this.element) {\n      const range = getQuoteSelection(this.element) || null\n      const rect = range ? range.getBoundingClientRect() : null\n\n      this.setState({ range, rect })\n    }\n  }\n\n  reply = () => {\n    if (!posting.isOpen()) {\n      const content = getQuoteMarkup(this.state.range)\n      posting.open(Object.assign({}, this.props.posting, { default: content }))\n\n      this.setState({ range: null, rect: null })\n\n      window.setTimeout(focusEditor, 1000)\n    } else {\n      const globalState = getGlobalState()\n      if (globalState && !globalState.disabled) {\n        globalState.quote(getQuoteMarkup(this.state.range))\n        this.setState({ range: null, rect: null })\n        focusEditor()\n      }\n    }\n  }\n\n  render = () => (\n    <div>\n      <div\n        ref={(element) => {\n          if (element) {\n            this.element = element\n          }\n        }}\n        onMouseUp={this.selected}\n        onTouchEnd={this.selected}\n      >\n        {this.props.children}\n      </div>\n      {!!this.state.rect && (\n        <div\n          className=\"quote-control\"\n          style={{\n            position: \"absolute\",\n            left: this.state.rect.left + window.scrollX,\n            top: this.state.rect.bottom + window.scrollY,\n          }}\n        >\n          <div className=\"quote-control-arrow\" />\n          <div className=\"quote-control-inner\">\n            <button\n              className=\"btn quote-control-btn\"\n              type=\"button\"\n              onClick={this.reply}\n            >\n              {pgettext(\"post reply\", \"Quote\")}\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nfunction focusEditor() {\n  const textarea = document.querySelector(\"#posting-mount textarea\")\n  textarea.focus()\n  textarea.selectionStart = textarea.selectionEnd = textarea.value.length\n}\n\nconst getQuoteSelection = (container) => {\n  if (typeof window.getSelection === \"undefined\") return\n\n  // Validate that selection is of valid type and has one range\n  const selection = window.getSelection()\n  if (!selection) return\n  if (selection.type !== \"Range\") return\n  if (selection.rangeCount !== 1) return\n\n  // Validate that selection is within the container and post's article\n  const range = selection.getRangeAt(0)\n  if (!isRangeContained(range, container)) return\n  if (!isPostContained(range)) return\n  if (!isAnyTextSelected(range.cloneContents())) return\n\n  return range\n}\n\nconst isRangeContained = (range, container) => {\n  const node = range.commonAncestorContainer\n  if (node === container) return true\n\n  let p = node.parentNode\n  while (p) {\n    if (p === container) return true\n    p = p.parentNode\n  }\n\n  return false\n}\n\nconst isPostContained = (range) => {\n  const element = range.commonAncestorContainer\n  if (element.nodeName === \"ARTICLE\") return true\n  if (element.dataset && element.dataset.noquote === \"1\") return false\n  let p = element.parentNode\n  while (p) {\n    if (p.dataset && p.dataset.noquote === \"1\") return false\n    if (p.nodeName === \"ARTICLE\") return true\n    p = p.parentNode\n  }\n  return false\n}\n\nconst isAnyTextSelected = (node) => {\n  for (let i = 0; i < node.childNodes.length; i++) {\n    const child = node.childNodes[i]\n    if (child.nodeType === Node.TEXT_NODE) {\n      if (child.textContent && child.textContent.trim().length > 0) return true\n    }\n    if (child.nodeName === \"IMG\") return true\n    if (isAnyTextSelected(child)) return true\n  }\n\n  return false\n}\n","const getQuoteMarkup = (range) => {\n  const metadata = getQuoteMetadata(range)\n  let markup = convertNodesToMarkup(range.cloneContents().childNodes, [])\n  let prefix = metadata ? `[quote=\"${metadata}\"]\\n` : \"[quote]\\n\"\n  let suffix = \"\\n[/quote]\\n\\n\"\n\n  const codeBlock = getQuoteCodeBlock(range)\n  if (codeBlock) {\n    prefix += codeBlock.syntax ? `[code=${codeBlock.syntax}]\\n` : \"[code]\\n\"\n    suffix = \"\\n[/code]\" + suffix\n  } else if (isNodeInlineCodeBlock(range)) {\n    markup = markup.trim()\n    prefix += \"`\"\n    suffix = \"`\" + suffix\n  } else {\n    markup = markup.trim()\n  }\n\n  return prefix + markup + suffix\n}\n\nexport default getQuoteMarkup\n\nconst getQuoteMetadata = (range) => {\n  const node = range.commonAncestorContainer\n  if (isNodeElementWithQuoteMetadata(node)) {\n    return getQuoteMetadataFromNode(node)\n  }\n\n  let p = node.parentNode\n  while (p) {\n    if (isNodeElementWithQuoteMetadata(p)) {\n      return getQuoteMetadataFromNode(p)\n    }\n    p = p.parentNode\n  }\n\n  return \"\"\n}\n\nconst isNodeElementWithQuoteMetadata = (node) => {\n  if (node.nodeType !== Node.ELEMENT_NODE) return false\n  if (node.nodeName === \"ARTICLE\") return true\n  if (node.nodeName === \"BLOCKQUOTE\") {\n    return node.dataset && node.dataset.block === \"quote\"\n  }\n\n  return false\n}\n\nconst getQuoteMetadataFromNode = (element) => {\n  if (element.dataset) {\n    return element.dataset.author || null\n  }\n  return null\n}\n\nconst getQuoteCodeBlock = (range) => {\n  const node = range.commonAncestorContainer\n  if (isNodeCodeBlock(node)) {\n    return getNodeCodeBlockMeta(node)\n  }\n\n  let p = node.parentNode\n  while (p) {\n    if (isNodeCodeBlock(p)) {\n      return getNodeCodeBlockMeta(p)\n    }\n    p = p.parentNode\n  }\n\n  return null\n}\n\nconst isNodeCodeBlock = (node) => {\n  return node.nodeName === \"PRE\"\n}\n\nconst isNodeInlineCodeBlock = (range) => {\n  const node = range.commonAncestorContainer\n  if (node.nodeName === \"CODE\") {\n    return true\n  }\n\n  let p = node.parentNode\n  while (p) {\n    if (isNodeElementWithQuoteMetadata(p)) {\n      return false\n    }\n\n    if (p.nodeName === \"CODE\") {\n      return true\n    }\n\n    p = p.parentNode\n  }\n\n  return false\n}\n\nconst getNodeCodeBlockMeta = (node) => {\n  if (!node.dataset) {\n    return { syntax: null }\n  }\n\n  return { syntax: node.dataset.syntax || null }\n}\n\nconst convertNodesToMarkup = (nodes, stack) => {\n  let markup = \"\"\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i]\n    markup += convertNodeToMarkup(node, stack)\n  }\n  return markup\n}\n\nconst SIMPLE_NODE_MAPPINGS = {\n  H1: [\"\\n\\n# \", \"\"],\n  H2: [\"\\n\\n## \", \"\"],\n  H3: [\"\\n\\n### \", \"\"],\n  H4: [\"\\n\\n#### \", \"\"],\n  H5: [\"\\n\\n##### \", \"\"],\n  H6: [\"\\n\\n###### \", \"\"],\n  STRONG: [\"**\", \"**\"],\n  EM: [\"*\", \"*\"],\n  DEL: [\"~~\", \"~~\"],\n  B: [\"[b]\", \"[/b]\"],\n  U: [\"[u]\", \"[/u]\"],\n  I: [\"[i]\", \"[/i]\"],\n  SUB: [\"[sub]\", \"[/sub]\"],\n  SUP: [\"[sup]\", \"[/sup]\"],\n}\n\nconst convertNodeToMarkup = (node, stack) => {\n  const dataset = node.dataset || {}\n\n  if (node.nodeType === Node.TEXT_NODE) {\n    return node.textContent || \"\"\n  }\n\n  if (node.nodeType === Node.ELEMENT_NODE) {\n    if (dataset.quote) {\n      return dataset.quote || \"\"\n    }\n    if (dataset.noquote === \"1\") return \"\"\n  }\n\n  if (\n    node.nodeType === Node.ELEMENT_NODE &&\n    dataset.quote &&\n    dataset.quote.trim()\n  ) {\n    return \"\"\n  }\n\n  if (node.nodeName === \"HR\") {\n    return \"\\n\\n- - -\"\n  }\n\n  if (SIMPLE_NODE_MAPPINGS[node.nodeName]) {\n    const [prefix, suffix] = SIMPLE_NODE_MAPPINGS[node.nodeName]\n    return (\n      prefix +\n      convertNodesToMarkup(node.childNodes, [...stack, node.nodeName]) +\n      suffix\n    )\n  }\n\n  if (node.nodeName === \"A\") {\n    const href = node.href\n    const text = convertNodesToMarkup(node.childNodes, [\n      ...stack,\n      node.nodeName,\n    ])\n    if (text) {\n      return `[${text}](${href})`\n    } else {\n      return `!(${href})`\n    }\n  }\n\n  if (node.nodeName === \"IMG\") {\n    const src = node.src\n    const alt = node.alt\n    if (alt) {\n      return `![${alt}](${src})`\n    } else {\n      return `!(${src})`\n    }\n  }\n\n  if (node.nodeName === \"DIV\" || node.nodeName === \"ASIDE\") {\n    const block = dataset.block && dataset.block.toUpperCase()\n    if (block && SIMPLE_NODE_MAPPINGS[block]) {\n      const [prefix, suffix] = SIMPLE_NODE_MAPPINGS[block]\n      return (\n        prefix +\n        convertNodesToMarkup(node.childNodes, [...stack, block]) +\n        suffix\n      )\n    } else {\n      return convertNodesToMarkup(node.childNodes, stack)\n    }\n  }\n\n  if (node.nodeName === \"BLOCKQUOTE\") {\n    if (dataset.block === \"spoiler\") {\n      const content = convertNodesToMarkup(node.childNodes, [\n        ...stack,\n        \"SPOILER\",\n      ]).trim()\n\n      if (!content) return \"\"\n\n      let markup = \"\\n[spoiler]\\n\"\n      markup += content\n      markup += \"\\n[/spoiler]\"\n      return markup\n    }\n\n    const content = convertNodesToMarkup(node.childNodes, [\n      ...stack,\n      \"QUOTE\",\n    ]).trim()\n\n    if (!content) return \"\"\n\n    const metadata = getQuoteMetadataFromNode(node)\n    let markup = metadata ? `\\n[quote=${metadata}]\\n` : \"\\n\\n[quote]\\n\"\n    markup += content\n    markup += \"\\n[/quote]\"\n    return markup\n  }\n\n  if (node.nodeName === \"PRE\") {\n    const syntax = dataset.syntax || null\n    const code = node.querySelector(\"code\")\n    const content = code ? code.innerText || \"\" : \"\"\n\n    if (!content.trim()) return \"\"\n\n    return \"\\n[code\" + (syntax ? \"=\" + syntax : \"\") + \"]\" + content + \"[/code]\"\n  }\n\n  if (node.nodeName === \"CODE\") {\n    return \"`\" + node.innerText + \"`\"\n  }\n\n  if (node.nodeName === \"P\") {\n    return (\n      \"\\n\" + convertNodesToMarkup(node.childNodes, [...stack, node.nodeName])\n    )\n  }\n\n  if (node.nodeName === \"UL\" || node.nodeName === \"OL\") {\n    const level = stack.filter((item) => item === \"OL\" || item === \"UL\").length\n    const prefix = level === 0 ? \"\\n\" : \"\"\n    return (\n      prefix + convertNodesToMarkup(node.childNodes, [...stack, node.nodeName])\n    )\n  }\n\n  if (node.nodeName === \"LI\") {\n    let prefix = \"\"\n    const level = stack.filter((item) => item === \"OL\" || item === \"UL\").length\n    for (let i = 1; i < level; i++) {\n      prefix += \"    \"\n    }\n\n    const ordered = stack[stack.length - 1] === \"OL\"\n    if (ordered) {\n      prefix += dataset.index ? dataset.index + \". \" : \"1. \"\n    } else {\n      prefix += \"- \"\n    }\n\n    const content = convertNodesToMarkup(node.childNodes, [\n      ...stack,\n      node.nodeName,\n    ])\n    if (!content.trim()) return \"\"\n\n    return \"\\n\" + prefix + content\n  }\n\n  if (node.nodeName === \"SPAN\") {\n    return convertNodesToMarkup(node.childNodes, stack)\n  }\n\n  return \"\"\n}\n","export function getGlobalState() {\n  return window.misagoReply\n}\n\nexport function setGlobalState(disabled, quote) {\n  window.misagoReply = { disabled, quote }\n}\n\nexport function clearGlobalState() {\n  window.misagoReply = null\n}\n","import moment from \"moment\"\n\nexport function clean(attachments) {\n  return attachments\n    .filter((attachment) => {\n      return attachment.id && !attachment.isRemoved\n    })\n    .map((a) => {\n      return a.id\n    })\n}\n\nexport function hydrate(attachments) {\n  return attachments.map((attachment) => {\n    return Object.assign({}, attachment, {\n      uploaded_on: moment(attachment.uploaded_on),\n    })\n  })\n}\n","import React from \"react\"\nimport formatFilesize from \"../../utils/file-size\"\n\nexport default function MarkupAttachmentModal({ attachment }) {\n  return (\n    <div className=\"modal-dialog modal-lg\" role=\"document\">\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <button\n            aria-label={pgettext(\"modal\", \"Close\")}\n            className=\"close\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n          <h4 className=\"modal-title\">\n            {pgettext(\"markup editor\", \"Attachment details\")}\n          </h4>\n        </div>\n        <div className=\"modal-body\">\n          {!!attachment.is_image && (\n            <div className=\"markup-editor-attachment-modal-preview\">\n              <a href={attachment.url.index + \"?shva=1\"} target=\"_blank\">\n                <img src={attachment.url.index + \"?shva=1\"} alt=\"\" />\n              </a>\n            </div>\n          )}\n          <div className=\"markup-editor-attachment-modal-filename\">\n            {attachment.filename}\n          </div>\n          <div className=\"row markup-editor-attachment-modal-details\">\n            <div className=\"col-xs-12 col-md-3\">\n              <strong>\n                {attachment.filetype + \", \" + formatFilesize(attachment.size)}\n              </strong>\n              <div className=\"text-muted\">\n                <small>{pgettext(\"markup editor\", \"Type and size\")}</small>\n              </div>\n            </div>\n            <div className=\"col-xs-12 col-md-4\">\n              <strong>\n                <abbr title={attachment.uploaded_on.format(\"LLL\")}>\n                  {attachment.uploaded_on.fromNow()}\n                </abbr>\n              </strong>\n              <div className=\"text-muted\">\n                <small>{pgettext(\"markup editor\", \"Uploaded at\")}</small>\n              </div>\n            </div>\n            <div className=\"col-xs-12 col-md-3\">\n              {attachment.url.uploader ? (\n                <a\n                  href={attachment.url.uploader}\n                  target=\"_blank\"\n                  className=\"item-title\"\n                >\n                  {attachment.uploader_name}\n                </a>\n              ) : (\n                <span className=\"item-title\">{attachment.uploader_name}</span>\n              )}\n              <div className=\"text-muted\">\n                <small>{pgettext(\"markup editor\", \"Uploader\")}</small>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"modal-footer\">\n          <button\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            {pgettext(\"modal\", \"Close\")}\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n","const wrapSelection = (selection, update, prefix, suffix, def) => {\n  const text = selection.text || def || \"\"\n  let newValue = selection.prefix\n  newValue += prefix + text + suffix\n  newValue += selection.suffix\n  update(newValue)\n\n  window.setTimeout(() => {\n    focus(selection.textarea)\n\n    const caret = selection.start + prefix.length\n    selection.textarea.setSelectionRange(caret, caret + text.length)\n  }, 250)\n}\n\nconst replaceSelection = (selection, update, text) => {\n  let newValue = selection.prefix\n  newValue += text\n  newValue += selection.suffix\n  update(newValue)\n\n  window.setTimeout(() => {\n    focus(selection.textarea)\n\n    const caret = selection.end + text.length\n    selection.textarea.setSelectionRange(caret, caret)\n  }, 250)\n}\n\nconst getSelection = (textarea) => {\n  if (document.selection) {\n    textarea.focus()\n    const range = document.selection.createRange()\n    const length = range.text.length\n    range.moveStart(\"character\", -textarea.value.length)\n    return createRange(textarea, range.text.length - length, range.text.length)\n  }\n\n  if (textarea.selectionStart || textarea.selectionStart == \"0\") {\n    return createRange(textarea, textarea.selectionStart, textarea.selectionEnd)\n  }\n}\n\nconst createRange = (textarea, start, end) => {\n  return {\n    textarea: textarea,\n    start: start,\n    end: end,\n    text: textarea.value.substring(start, end),\n    prefix: textarea.value.substring(0, start),\n    suffix: textarea.value.substring(end),\n  }\n}\n\nexport function focus(textarea) {\n  const scroll = textarea.scrollTop\n  textarea.focus()\n  textarea.scrollTop = scroll\n}\n\nexport { getSelection, replaceSelection, wrapSelection }\n","import React from \"react\"\nimport modal from \"../../services/modal\"\nimport snackbar from \"../../services/snackbar\"\nimport formatFilesize from \"../../utils/file-size\"\nimport MarkupAttachmentModal from \"./MarkupAttachmentModal\"\nimport { getSelection, replaceSelection } from \"./operations\"\n\nconst MarkupEditorAttachment = ({\n  attachment,\n  disabled,\n  element,\n  setState,\n  update,\n}) => (\n  <div className=\"markup-editor-attachments-item\">\n    <div className=\"markup-editor-attachment\">\n      <div className=\"markup-editor-attachment-details\">\n        {attachment.id ? (\n          <a\n            className=\"item-title\"\n            href={attachment.url.index + \"?shva=1\"}\n            target=\"_blank\"\n            onClick={(event) => {\n              event.preventDefault()\n              modal.show(<MarkupAttachmentModal attachment={attachment} />)\n            }}\n          >\n            {attachment.filename}\n          </a>\n        ) : (\n          <strong className=\"item-title\">{attachment.filename}</strong>\n        )}\n        <div className=\"text-muted\">\n          <ul className=\"list-unstyled list-inline\">\n            {!attachment.id && <li>{attachment.progress + \"%\"}</li>}\n            {!!attachment.filetype && <li>{attachment.filetype}</li>}\n            {attachment.size > 0 && <li>{formatFilesize(attachment.size)}</li>}\n          </ul>\n        </div>\n      </div>\n      {!!attachment.id && (\n        <div className=\"markup-editor-attachment-buttons\">\n          <button\n            className=\"btn btn-markup-editor-attachment btn-icon\"\n            title={pgettext(\"markup editor\", \"Insert into message\")}\n            type=\"button\"\n            disabled={disabled}\n            onClick={() => {\n              const markup = getAttachmentMarkup(attachment)\n              const selection = getSelection(element)\n              replaceSelection(selection, update, markup)\n            }}\n          >\n            <span className=\"material-icon\">flip_to_front</span>\n          </button>\n          <button\n            className=\"btn btn-markup-editor-attachment btn-icon\"\n            title={pgettext(\"markup editor\", \"Remove attachment\")}\n            type=\"button\"\n            disabled={disabled}\n            onClick={() => {\n              setState(({ attachments }) => {\n                const confirm = window.confirm(\n                  pgettext(\"markup editor\", \"Remove this attachment?\")\n                )\n\n                if (confirm) {\n                  return {\n                    attachments: attachments.filter(\n                      ({ id }) => id !== attachment.id\n                    ),\n                  }\n                }\n              })\n            }}\n          >\n            <span className=\"material-icon\">close</span>\n          </button>\n        </div>\n      )}\n      {!attachment.id && !!attachment.key && (\n        <div className=\"markup-editor-attachment-buttons\">\n          {attachment.error && (\n            <button\n              className=\"btn btn-markup-editor-attachment btn-icon\"\n              title={pgettext(\"markup editor\", \"See error\")}\n              type=\"button\"\n              onClick={() => {\n                snackbar.error(\n                  interpolate(\n                    pgettext(\"markup editor\", \"%(filename)s: %(error)s\"),\n                    { filename: attachment.filename, error: attachment.error },\n                    true\n                  )\n                )\n              }}\n            >\n              <span className=\"material-icon\">warning</span>\n            </button>\n          )}\n          <button\n            className=\"btn btn-markup-editor-attachment btn-icon\"\n            title={pgettext(\"markup editor\", \"Remove attachment\")}\n            type=\"button\"\n            disabled={disabled}\n            onClick={() => {\n              setState(({ attachments }) => {\n                return {\n                  attachments: attachments.filter(\n                    ({ key }) => key !== attachment.key\n                  ),\n                }\n              })\n            }}\n          >\n            <span className=\"material-icon\">close</span>\n          </button>\n        </div>\n      )}\n    </div>\n  </div>\n)\n\nexport default MarkupEditorAttachment\n\nfunction getAttachmentMarkup(attachment) {\n  let markup = \"[\"\n\n  if (attachment.is_image) {\n    markup += \"![\" + attachment.filename + \"]\"\n    markup += \"(\" + (attachment.url.thumb || attachment.url.index) + \"?shva=1)\"\n  } else {\n    markup += attachment.filename\n  }\n\n  markup += \"](\" + attachment.url.index + \"?shva=1)\"\n  return markup\n}\n","import React from \"react\"\nimport MarkupEditorAttachment from \"./MarkupEditorAttachment\"\n\nconst MarkupEditorAttachments = ({\n  attachments,\n  disabled,\n  element,\n  setState,\n  update,\n}) => (\n  <div className=\"markup-editor-attachments\">\n    <div className=\"markup-editor-attachments-container\">\n      {attachments.map((attachment) => (\n        <MarkupEditorAttachment\n          key={attachment.key || attachment.id}\n          attachment={attachment}\n          disabled={disabled}\n          element={element}\n          setState={setState}\n          update={update}\n        />\n      ))}\n    </div>\n  </div>\n)\n\nexport default MarkupEditorAttachments\n","import React from \"react\"\nimport Button from \"../button\"\n\nconst MarkupEditorFooter = ({\n  canProtect,\n  disabled,\n  empty,\n  preview,\n  isProtected,\n  submitText,\n  showPreview,\n  closePreview,\n  enableProtection,\n  disableProtection,\n}) => (\n  <div className=\"markup-editor-footer\">\n    {!!canProtect && (\n      <Button\n        className=\"btn-default btn-icon hidden-sm hidden-md hidden-lg\"\n        title={\n          isProtected\n            ? pgettext(\"markup editor\", \"Protected\")\n            : pgettext(\"markup editor\", \"Protect\")\n        }\n        type=\"button\"\n        disabled={disabled}\n        onClick={() => {\n          if (isProtected) {\n            disableProtection()\n          } else {\n            enableProtection()\n          }\n        }}\n      >\n        <span className=\"material-icon\">\n          {isProtected ? \"lock\" : \"lock_open\"}\n        </span>\n      </Button>\n    )}\n    {!!canProtect && (\n      <div>\n        <Button\n          className=\"btn-default hidden-xs\"\n          type=\"button\"\n          disabled={disabled}\n          onClick={() => {\n            if (isProtected) {\n              disableProtection()\n            } else {\n              enableProtection()\n            }\n          }}\n        >\n          <span className=\"material-icon\">\n            {isProtected ? \"lock\" : \"lock_open\"}\n          </span>\n          {isProtected\n            ? pgettext(\"markup editor\", \"Protected\")\n            : pgettext(\"markup editor\", \"Protect\")}\n        </Button>\n      </div>\n    )}\n    <div className=\"markup-editor-spacer\" />\n    {preview ? (\n      <Button\n        className=\"btn-default btn-auto\"\n        type=\"button\"\n        onClick={closePreview}\n      >\n        {pgettext(\"markup editor\", \"Edit\")}\n      </Button>\n    ) : (\n      <Button\n        className=\"btn-default btn-auto\"\n        disabled={disabled || empty}\n        type=\"button\"\n        onClick={showPreview}\n      >\n        {pgettext(\"markup editor\", \"Preview\")}\n      </Button>\n    )}\n    <Button className=\"btn-primary btn-auto\" disabled={disabled || empty}>\n      {submitText || gettext(\"Post\")}\n    </Button>\n  </div>\n)\n\nexport default MarkupEditorFooter\n","import React from \"react\"\nimport modal from \"../../services/modal\"\nimport FormGroup from \"../form-group\"\nimport { replaceSelection } from \"./operations\"\n\nclass MarkupCodeModal extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      error: null,\n      syntax: \"\",\n      text: props.selection.text,\n    }\n  }\n\n  handleSubmit = (ev) => {\n    ev.preventDefault()\n\n    const { selection, update } = this.props\n    const syntax = this.state.syntax.trim()\n    const text = this.state.text.trim()\n\n    if (text.length === 0) {\n      this.setState({ error: gettext(\"This field is required.\") })\n      return false\n    }\n\n    const prefix = selection.prefix.trim().length ? \"\\n\\n\" : \"\"\n\n    replaceSelection(\n      Object.assign({}, selection, { text }),\n      update,\n      prefix + \"```\" + syntax + \"\\n\" + text + \"\\n```\\n\\n\"\n    )\n\n    modal.hide()\n\n    return false\n  }\n\n  render() {\n    return (\n      <div className=\"modal-dialog modal-lg\" role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              aria-label={pgettext(\"modal\", \"Close\")}\n              className=\"close\"\n              data-dismiss=\"modal\"\n              type=\"button\"\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{pgettext(\"markup editor\", \"Code\")}</h4>\n          </div>\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"modal-body\">\n              <FormGroup\n                for=\"markup_code_syntax\"\n                label={pgettext(\"markup editor\", \"Syntax highlighting\")}\n              >\n                <select\n                  id=\"markup_code_syntax\"\n                  className=\"form-control\"\n                  value={this.state.syntax}\n                  onChange={(event) =>\n                    this.setState({ syntax: event.target.value })\n                  }\n                >\n                  <option value=\"\">\n                    {pgettext(\"markup editor\", \"No syntax highlighting\")}\n                  </option>\n                  {LANGUAGES.map(({ value, name }) => (\n                    <option key={value} value={value}>\n                      {name}\n                    </option>\n                  ))}\n                </select>\n              </FormGroup>\n              <FormGroup\n                for=\"markup_code_text\"\n                label={pgettext(\"markup editor\", \"Code to insert\")}\n                validation={!!this.state.error ? [this.state.error] : undefined}\n              >\n                <textarea\n                  id=\"markup_code_text\"\n                  className=\"form-control\"\n                  rows=\"8\"\n                  value={this.state.text}\n                  onChange={(event) =>\n                    this.setState({ text: event.target.value })\n                  }\n                />\n              </FormGroup>\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn btn-default\"\n                data-dismiss=\"modal\"\n                type=\"button\"\n              >\n                {gettext(\"Cancel\")}\n              </button>\n              <button className=\"btn btn-primary\">\n                {pgettext(\"markup editor\", \"Insert code\")}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst LANGUAGES = [\n  { value: \"bash\", name: \"Bash\" },\n  { value: \"c\", name: \"C\" },\n  { value: \"c#\", name: \"C#\" },\n  { value: \"c++\", name: \"C++\" },\n  { value: \"css\", name: \"CSS\" },\n  { value: \"diff\", name: \"Diff\" },\n  { value: \"go\", name: \"Go\" },\n  { value: \"graphql\", name: \"GraphQL\" },\n  { value: \"html,\", name: \"HTML\" },\n  { value: \"xml\", name: \"XML\" },\n  { value: \"json\", name: \"JSON\" },\n  { value: \"java\", name: \"Java\" },\n  { value: \"javascript\", name: \"JavaScript\" },\n  { value: \"kotlin\", name: \"Kotlin\" },\n  { value: \"less\", name: \"Less\" },\n  { value: \"lua\", name: \"Lua\" },\n  { value: \"makefile\", name: \"Makefile\" },\n  { value: \"markdown\", name: \"Markdown\" },\n  { value: \"objective-C\", name: \"Objective-C\" },\n  { value: \"php\", name: \"PHP\" },\n  { value: \"perl\", name: \"Perl\" },\n  { value: \"plain\", name: \"Plain\" },\n  { value: \"text\", name: \"text\" },\n  { value: \"python\", name: \"Python\" },\n  { value: \"repl\", name: \"REPL\" },\n  { value: \"r\", name: \"R\" },\n  { value: \"ruby\", name: \"Ruby\" },\n  { value: \"rust\", name: \"Rust\" },\n  { value: \"scss\", name: \"SCSS\" },\n  { value: \"sql\", name: \"SQL\" },\n  { value: \"shell\", name: \"Shell Session\" },\n  { value: \"swift\", name: \"Swift\" },\n  { value: \"toml\", name: \"TOML\" },\n  { value: \"ini\", name: \"INI\" },\n  { value: \"typescript\", name: \"TypeScript\" },\n  { value: \"visualbasic\", name: \"Visual Basic .NET\" },\n  { value: \"webassembly\", name: \"WebAssembly\" },\n  { value: \"yaml\", name: \"YAML\" },\n]\n\nexport default MarkupCodeModal\n","import React from \"react\"\nimport formatFilesize from \"../../utils/file-size\"\n\nexport default function MarkupFormattingHelpModal() {\n  return (\n    <div className=\"modal-dialog modal-lg\" role=\"document\">\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <button\n            aria-label={pgettext(\"modal\", \"Close\")}\n            className=\"close\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n          <h4 className=\"modal-title\">\n            {pgettext(\"markup help\", \"Formatting help\")}\n          </h4>\n        </div>\n        <div className=\"modal-body formatting-help\">\n          <h4>{pgettext(\"markup help\", \"Emphasis text\")}</h4>\n          <ExampleFormatting\n            markup={pgettext(\"markup help\", \"_This text will have emphasis_\")}\n            result={\n              <p>\n                <em>\n                  {pgettext(\"markup help\", \"This text will have emphasis\")}\n                </em>\n              </p>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Bold text\")}</h4>\n          <ExampleFormatting\n            markup={pgettext(\"markup help\", \"**This text will be bold**\")}\n            result={\n              <p>\n                <strong>\n                  {pgettext(\"markup help\", \"This text will be bold\")}\n                </strong>\n              </p>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Removed text\")}</h4>\n          <ExampleFormatting\n            markup={pgettext(\"markup help\", \"~~This text will be removed~~\")}\n            result={\n              <p>\n                <del>\n                  {pgettext(\"markup help\", \"This text will be removed\")}\n                </del>\n              </p>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Bold text (BBCode)\")}</h4>\n          <ExampleFormatting\n            markup={pgettext(\"markup help\", \"[b]This text will be bold[/b]\")}\n            result={\n              <p>\n                <b>{pgettext(\"markup help\", \"This text will be bold\")}</b>\n              </p>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Underlined text (BBCode)\")}</h4>\n          <ExampleFormatting\n            markup={pgettext(\n              \"markup help\",\n              \"[u]This text will be underlined[/u]\"\n            )}\n            result={\n              <p>\n                <u>{pgettext(\"markup help\", \"This text will be underlined\")}</u>\n              </p>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Italics text (BBCode)\")}</h4>\n          <ExampleFormatting\n            markup={pgettext(\n              \"markup help\",\n              \"[i]This text will be in italics[/i]\"\n            )}\n            result={\n              <p>\n                <i>{pgettext(\"markup help\", \"This text will be in italics\")}</i>\n              </p>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Link\")}</h4>\n          <ExampleFormatting\n            markup=\"<http://example.com>\"\n            result={\n              <p>\n                <a href=\"#\">example.com</a>\n              </p>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Link with text\")}</h4>\n          <ExampleFormatting\n            markup={\n              \"[\" +\n              pgettext(\"markup help\", \"Link text\") +\n              \"](http://example.com)\"\n            }\n            result={\n              <p>\n                <a href=\"#\">{pgettext(\"markup help\", \"Link text\")}</a>\n              </p>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Link (BBCode)\")}</h4>\n          <ExampleFormatting\n            markup=\"[url]http://example.com[/url]\"\n            result={\n              <p>\n                <a href=\"#\">example.com</a>\n              </p>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Link with text (BBCode)\")}</h4>\n          <ExampleFormatting\n            markup={\n              \"[url=http://example.com]\" +\n              pgettext(\"markup help\", \"Link text\") +\n              \"[/url]\"\n            }\n            result={\n              <p>\n                <a href=\"#\">{pgettext(\"markup help\", \"Link text\")}</a>\n              </p>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Image\")}</h4>\n          <ExampleFormatting\n            markup=\"!(http://placekitten.com/38/38)\"\n            result={\n              <p>\n                <img alt=\"\" src=\"http://placekitten.com/38/38\" />\n              </p>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Image with alternate text\")}</h4>\n          <ExampleFormatting\n            markup={\n              \"![\" +\n              pgettext(\"markup help\", \"Image text\") +\n              \"](http://placekitten.com/38/38)\"\n            }\n            result={\n              <p>\n                <img\n                  alt={pgettext(\"markup help\", \"Image text\")}\n                  src=\"http://placekitten.com/38/38\"\n                />\n              </p>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Image (BBCode)\")}</h4>\n          <ExampleFormatting\n            markup=\"[img]http://placekitten.com/38/38[/img]\"\n            result={\n              <p>\n                <img alt=\"\" src=\"http://placekitten.com/38/38\" />\n              </p>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Mention user by their name\")}</h4>\n          <ExampleFormatting\n            markup=\"@username\"\n            result={\n              <p>\n                <a href=\"#\">@username</a>\n              </p>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Heading 1\")}</h4>\n          <ExampleFormatting\n            markup={pgettext(\"markup help\", \"# First level heading\")}\n            result={<h1>{pgettext(\"markup help\", \"First level heading\")}</h1>}\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Heading 2\")}</h4>\n          <ExampleFormatting\n            markup={pgettext(\"markup help\", \"## Second level heading\")}\n            result={<h2>{pgettext(\"markup help\", \"Second level heading\")}</h2>}\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Heading 3\")}</h4>\n          <ExampleFormatting\n            markup={pgettext(\"markup help\", \"### Third level heading\")}\n            result={<h3>{pgettext(\"markup help\", \"Third level heading\")}</h3>}\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Heading 4\")}</h4>\n          <ExampleFormatting\n            markup={pgettext(\"markup help\", \"#### Fourth level heading\")}\n            result={<h4>{pgettext(\"markup help\", \"Fourth level heading\")}</h4>}\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Heading 5\")}</h4>\n          <ExampleFormatting\n            markup={pgettext(\"markup help\", \"##### Fifth level heading\")}\n            result={<h5>{pgettext(\"markup help\", \"Fifth level heading\")}</h5>}\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Unordered list\")}</h4>\n          <ExampleFormatting\n            markup={\"- Lorem ipsum\\n- Dolor met\\n- Vulputate lectus\"}\n            result={\n              <ul>\n                <li>Lorem ipsum</li>\n                <li>Dolor met</li>\n                <li>Vulputate lectus</li>\n              </ul>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Ordered list\")}</h4>\n          <ExampleFormatting\n            markup={\"1. Lorem ipsum\\n2. Dolor met\\n3. Vulputate lectus\"}\n            result={\n              <ol>\n                <li>Lorem ipsum</li>\n                <li>Dolor met</li>\n                <li>Vulputate lectus</li>\n              </ol>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Quote text\")}</h4>\n          <ExampleFormatting\n            markup={\"> \" + pgettext(\"markup help\", \"Quoted text\")}\n            result={\n              <blockquote>\n                <p>{pgettext(\"markup help\", \"Quoted text\")}</p>\n              </blockquote>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Quote text (BBCode)\")}</h4>\n          <ExampleFormatting\n            markup={\n              \"[quote]\\n\" +\n              pgettext(\"markup help\", \"Quoted text\") +\n              \"\\n[/quote]\"\n            }\n            result={\n              <aside className=\"quote-block\">\n                <div className=\"quote-heading\">\n                  {gettext(\"Quoted message:\")}\n                </div>\n                <blockquote className=\"quote-body\">\n                  <p>{pgettext(\"markup help\", \"Quoted text\")}</p>\n                </blockquote>\n              </aside>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Quote text with title (BBCode)\")}</h4>\n          <ExampleFormatting\n            markup={\n              '[quote=\"' +\n              pgettext(\"markup help\", \"Quote title\") +\n              '\"]\\n' +\n              pgettext(\"markup help\", \"Quoted text\") +\n              \"\\n[/quote]\"\n            }\n            result={\n              <aside className=\"quote-block\">\n                <div className=\"quote-heading\">\n                  {gettext(\"Quote title has written:\")}\n                </div>\n                <blockquote className=\"quote-body\">\n                  <p>{pgettext(\"markup help\", \"Quoted text\")}</p>\n                </blockquote>\n              </aside>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Spoiler\")}</h4>\n          <ExampleFormatting\n            markup={\n              \"[spoiler]\\n\" +\n              pgettext(\"markup help\", \"Secret text\") +\n              \"\\n[/spoiler]\"\n            }\n            result={\n              <ExampleFormattingSpoiler>\n                {pgettext(\"markup help\", \"Secret text\")}\n              </ExampleFormattingSpoiler>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Inline code\")}</h4>\n          <ExampleFormatting\n            markup={pgettext(\"markup help\", \"`Inline code`\")}\n            result={\n              <p>\n                <code>{pgettext(\"markup help\", \"Inline code\")}</code>\n              </p>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Code block\")}</h4>\n          <ExampleFormatting\n            markup={\"```\\nalert\" + '(\"Hello world!\");' + \"\\n```\"}\n            result={\n              <pre>\n                <code className=\"hljs\">alert(\"Hello world!\");</code>\n              </pre>\n            }\n          />\n\n          <hr />\n\n          <h4>\n            {pgettext(\"markup help\", \"Code block with syntax highlighting\")}\n          </h4>\n          <ExampleFormatting\n            markup={\"```python\\nprint\" + '(\"Hello world!\");' + \"\\n```\"}\n            result={\n              <pre>\n                <code className=\"hljs language-python\">\n                  <span className=\"hljs-built_in\">print</span>(\"Hello world!\");\n                </code>\n              </pre>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Code block (BBCode)\")}</h4>\n          <ExampleFormatting\n            markup={\"[code]\\nalert\" + '(\"Hello world!\");' + \"\\n[/code]\"}\n            result={\n              <pre>\n                <code className=\"hljs\">alert(\"Hello world!\");</code>\n              </pre>\n            }\n          />\n\n          <hr />\n\n          <h4>\n            {pgettext(\n              \"markup help\",\n              \"Code block with syntax highlighting (BBCode)\"\n            )}\n          </h4>\n          <ExampleFormatting\n            markup={\n              '[code=\"python\"]\\nprint' + '(\"Hello world!\");' + \"\\n[/code]\"\n            }\n            result={\n              <pre>\n                <code className=\"hljs language-python\">\n                  <span className=\"hljs-built_in\">print</span>(\"Hello world!\");\n                </code>\n              </pre>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Horizontal rule\")}</h4>\n          <ExampleFormatting\n            markup={\"Lorem ipsum\\n- - -\\nDolor met\"}\n            result={\n              <div>\n                <p>Lorem ipsum</p>\n                <hr />\n                <p>Dolor met</p>\n              </div>\n            }\n          />\n\n          <hr />\n\n          <h4>{pgettext(\"markup help\", \"Horizontal rule (BBCode)\")}</h4>\n          <ExampleFormatting\n            markup={\"Lorem ipsum\\n[hr]\\nDolor met\"}\n            result={\n              <div>\n                <p>Lorem ipsum</p>\n                <hr />\n                <p>Dolor met</p>\n              </div>\n            }\n          />\n        </div>\n        <div className=\"modal-footer\">\n          <button\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            {pgettext(\"modal\", \"Close\")}\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction ExampleFormatting({ markup, result }) {\n  return (\n    <div className=\"formatting-help-item\">\n      <div className=\"formatting-help-item-markup\">\n        <pre>\n          <code>{markup}</code>\n        </pre>\n      </div>\n      <div className=\"formatting-help-item-preview\">\n        <article className=\"misago-markup\">{result}</article>\n      </div>\n    </div>\n  )\n}\n\nclass ExampleFormattingSpoiler extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      reveal: false,\n    }\n  }\n\n  render() {\n    return (\n      <aside\n        className={\n          this.state.reveal ? \"spoiler-block revealed\" : \"spoiler-block\"\n        }\n      >\n        <blockquote className=\"spoiler-body\">\n          <p>{this.props.children}</p>\n        </blockquote>\n        {!this.state.reveal && (\n          <div className=\"spoiler-overlay\">\n            <button\n              className=\"spoiler-reveal\"\n              type=\"button\"\n              onClick={() => {\n                this.setState({ reveal: true })\n              }}\n            >\n              {gettext(\"Reveal spoiler\")}\n            </button>\n          </div>\n        )}\n      </aside>\n    )\n  }\n}\n","const URL_PATTERN = new RegExp(\n  \"^(https?:\\\\/\\\\/)?((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*(\\\\?[;&a-z\\\\d%_.~+=-]*)?(\\\\#[-a-z\\\\d_]*)?$\",\n  \"i\"\n)\n\nexport default function (str) {\n  return URL_PATTERN.test($.trim(str))\n}\n","import React from \"react\"\nimport modal from \"../../services/modal\"\nimport isUrl from \"../../utils/is-url\"\nimport FormGroup from \"../form-group\"\nimport { replaceSelection } from \"./operations\"\n\nclass MarkupImageModal extends React.Component {\n  constructor(props) {\n    super(props)\n\n    const text = props.selection.text.trim()\n    const textUrl = isUrl(text)\n\n    this.state = {\n      error: null,\n      text: textUrl ? \"\" : text,\n      url: textUrl ? text : \"\",\n    }\n  }\n\n  handleSubmit = (ev) => {\n    ev.preventDefault()\n\n    const { selection, update } = this.props\n    const text = this.state.text.trim()\n    const url = this.state.url.trim()\n\n    if (url.length === 0) {\n      this.setState({ error: gettext(\"This field is required.\") })\n      return false\n    }\n\n    if (!isUrl(url)) {\n      this.setState({ error: gettext(\"Enter a valid address.\") })\n      return false\n    }\n\n    if (text.length > 0) {\n      replaceSelection(selection, update, \"![\" + text + \"](\" + url + \")\")\n    } else {\n      replaceSelection(selection, update, \"!(\" + url + \")\")\n    }\n\n    modal.hide()\n\n    return false\n  }\n\n  render() {\n    return (\n      <div className=\"modal-dialog\" role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              aria-label={pgettext(\"modal\", \"Close\")}\n              className=\"close\"\n              data-dismiss=\"modal\"\n              type=\"button\"\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">\n              {pgettext(\"markup editor\", \"Image\")}\n            </h4>\n          </div>\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"modal-body\">\n              <FormGroup\n                for=\"markup_link_url\"\n                label={pgettext(\"markup editor\", \"Image description\")}\n                helpText={pgettext(\n                  \"markup editor\",\n                  \"Optional but recommended . Will be displayed instead of image when it fails to load.\"\n                )}\n              >\n                <input\n                  id=\"markup_link_text\"\n                  className=\"form-control\"\n                  type=\"text\"\n                  value={this.state.text}\n                  onChange={(event) =>\n                    this.setState({ text: event.target.value })\n                  }\n                />\n              </FormGroup>\n              <FormGroup\n                for=\"markup_link_url\"\n                label={pgettext(\"markup editor\", \"Image address\")}\n                validation={!!this.state.error ? [this.state.error] : undefined}\n              >\n                <input\n                  id=\"markup_link_url\"\n                  className=\"form-control\"\n                  type=\"text\"\n                  value={this.state.url}\n                  onChange={(event) =>\n                    this.setState({ url: event.target.value })\n                  }\n                />\n              </FormGroup>\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn btn-default\"\n                data-dismiss=\"modal\"\n                type=\"button\"\n              >\n                {gettext(\"Cancel\")}\n              </button>\n              <button className=\"btn btn-primary\">\n                {pgettext(\"markup editor\", \"Insert image\")}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default MarkupImageModal\n","import React from \"react\"\nimport modal from \"../../services/modal\"\nimport isUrl from \"../../utils/is-url\"\nimport FormGroup from \"../form-group\"\nimport { replaceSelection } from \"./operations\"\n\nclass MarkupLinkModal extends React.Component {\n  constructor(props) {\n    super(props)\n\n    const text = props.selection.text.trim()\n    const textUrl = isUrl(text)\n\n    this.state = {\n      error: null,\n      text: textUrl ? \"\" : text,\n      url: textUrl ? text : \"\",\n    }\n  }\n\n  handleSubmit = (ev) => {\n    ev.preventDefault()\n\n    const { selection, update } = this.props\n    const text = this.state.text.trim()\n    const url = this.state.url.trim()\n\n    if (url.length === 0) {\n      this.setState({ error: gettext(\"This field is required.\") })\n      return false\n    }\n\n    if (!isUrl(url)) {\n      this.setState({ error: gettext(\"Enter a valid address.\") })\n      return false\n    }\n\n    if (text.length > 0) {\n      replaceSelection(selection, update, \"[\" + text + \"](\" + url + \")\")\n    } else {\n      replaceSelection(selection, update, \"<\" + url + \">\")\n    }\n\n    modal.hide()\n\n    return false\n  }\n\n  render() {\n    return (\n      <div className=\"modal-dialog\" role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              aria-label={pgettext(\"modal\", \"Close\")}\n              className=\"close\"\n              data-dismiss=\"modal\"\n              type=\"button\"\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{pgettext(\"markup editor\", \"Link\")}</h4>\n          </div>\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"modal-body\">\n              <FormGroup\n                for=\"markup_link_url\"\n                label={pgettext(\"markup editor\", \"Link text\")}\n                helpText={pgettext(\n                  \"markup editor\",\n                  \"Optional. Will be displayed instead of link's address.\"\n                )}\n              >\n                <input\n                  id=\"markup_link_text\"\n                  className=\"form-control\"\n                  type=\"text\"\n                  value={this.state.text}\n                  onChange={(event) =>\n                    this.setState({ text: event.target.value })\n                  }\n                />\n              </FormGroup>\n              <FormGroup\n                for=\"markup_link_url\"\n                label={pgettext(\"markup editor\", \"Link address\")}\n                validation={!!this.state.error ? [this.state.error] : undefined}\n              >\n                <input\n                  id=\"markup_link_url\"\n                  className=\"form-control\"\n                  type=\"text\"\n                  value={this.state.url}\n                  onChange={(event) =>\n                    this.setState({ url: event.target.value })\n                  }\n                />\n              </FormGroup>\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn btn-default\"\n                data-dismiss=\"modal\"\n                type=\"button\"\n              >\n                {gettext(\"Cancel\")}\n              </button>\n              <button className=\"btn btn-primary\">\n                {pgettext(\"markup editor\", \"Insert link\")}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default MarkupLinkModal\n","import React from \"react\"\nimport modal from \"../../services/modal\"\nimport FormGroup from \"../form-group\"\nimport { replaceSelection } from \"./operations\"\n\nclass MarkupQuoteModal extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      error: null,\n      author: \"\",\n      text: props.selection.text,\n    }\n  }\n\n  handleSubmit = (ev) => {\n    ev.preventDefault()\n\n    const { selection, update } = this.props\n    const author = this.state.author.trim()\n    const text = this.state.text.trim()\n\n    if (text.length === 0) {\n      this.setState({ error: gettext(\"This field is required.\") })\n      return false\n    }\n\n    const prefix = selection.prefix.trim().length ? \"\\n\\n\" : \"\"\n\n    if (author) {\n      replaceSelection(\n        selection,\n        update,\n        prefix + '[quote=\"' + author + '\"]\\n' + text + \"\\n[/quote]\\n\\n\"\n      )\n    } else {\n      replaceSelection(\n        selection,\n        update,\n        prefix + \"[quote]\\n\" + text + \"\\n[/quote]\\n\\n\"\n      )\n    }\n\n    modal.hide()\n\n    return false\n  }\n\n  render() {\n    return (\n      <div className=\"modal-dialog modal-lg\" role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              aria-label={pgettext(\"modal\", \"Close\")}\n              className=\"close\"\n              data-dismiss=\"modal\"\n              type=\"button\"\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">\n              {pgettext(\"markup editor\", \"Quote\")}\n            </h4>\n          </div>\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"modal-body\">\n              <FormGroup\n                for=\"markup_quote_author\"\n                label={pgettext(\"markup editor\", \"Quote's author or source\")}\n                helpText={pgettext(\n                  \"markup editor\",\n                  'Optional. If it\\'s username, put \"@\" before it (\"@JohnDoe\").'\n                )}\n              >\n                <input\n                  id=\"markup_quote_author\"\n                  className=\"form-control\"\n                  type=\"text\"\n                  value={this.state.author}\n                  onChange={(event) =>\n                    this.setState({ author: event.target.value })\n                  }\n                />\n              </FormGroup>\n              <FormGroup\n                for=\"markup_quote_text\"\n                label={pgettext(\"markup editor\", \"Quoted text\")}\n                validation={!!this.state.error ? [this.state.error] : undefined}\n              >\n                <textarea\n                  id=\"markup_quote_text\"\n                  className=\"form-control\"\n                  rows=\"8\"\n                  value={this.state.text}\n                  onChange={(event) =>\n                    this.setState({ text: event.target.value })\n                  }\n                />\n              </FormGroup>\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn btn-default\"\n                data-dismiss=\"modal\"\n                type=\"button\"\n              >\n                {gettext(\"Cancel\")}\n              </button>\n              <button className=\"btn btn-primary\">\n                {pgettext(\"markup editor\", \"Insert quote\")}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default MarkupQuoteModal\n","import React from \"react\"\n\nconst MarkupEditorButton = ({ disabled, icon, title, onClick }) => (\n  <button\n    className=\"btn btn-markup-editor\"\n    title={title}\n    type=\"button\"\n    disabled={disabled}\n    onClick={onClick}\n  >\n    <span className=\"material-icon\">{icon}</span>\n  </button>\n)\n\nexport default MarkupEditorButton\n","import moment from \"moment\"\nimport misago from \"../../\"\nimport ajax from \"../../services/ajax\"\nimport snackbar from \"../../services/snackbar\"\nimport formatFilesize from \"../../utils/file-size\"\n\nconst ID_LEN = 32\n\nconst uploadFile = (file, setState) => {\n  const maxSize = misago.get(\"user\").acl.max_attachment_size * 1024\n\n  if (file.size > maxSize) {\n    snackbar.error(\n      interpolate(\n        pgettext(\n          \"markup editor\",\n          \"File %(filename)s is bigger than %(limit)s.\"\n        ),\n        { filename: file.name, limit: formatFilesize(maxSize) },\n        true\n      )\n    )\n\n    return\n  }\n\n  let upload = {\n    id: null,\n    key: getRandomString(ID_LEN),\n    error: null,\n    uploaded_on: null,\n    progress: 0,\n    filename: file.name,\n    filetype: null,\n    is_image: false,\n    size: file.size,\n    url: null,\n    uploader_name: null,\n  }\n\n  setState(({ attachments }) => {\n    return { attachments: [upload].concat(attachments) }\n  })\n\n  const refreshState = () => {\n    setState(({ attachments }) => {\n      return { attachments: attachments.concat() }\n    })\n  }\n\n  const data = new FormData()\n  data.append(\"upload\", file)\n\n  ajax\n    .upload(misago.get(\"ATTACHMENTS_API\"), data, (progress) => {\n      upload.progress = progress\n      refreshState()\n    })\n    .then(\n      (data) => {\n        Object.assign(upload, data, { uploaded_on: moment(data.uploaded_on) })\n        refreshState()\n      },\n      (rejection) => {\n        if (rejection.status === 400 || rejection.status === 413) {\n          upload.error = rejection.detail\n          snackbar.error(rejection.detail)\n          refreshState()\n        } else {\n          snackbar.apiError(rejection)\n        }\n      }\n    )\n}\n\nconst ALPHA = \"12345678990abcdefghijklmnopqrstuvwxyz\"\nconst ALPHA_LEN = ALPHA.length\n\nconst getRandomString = (len) => {\n  const chars = []\n  for (let i = 0; i < len; i++) {\n    const index = Math.floor(Math.random() * ALPHA_LEN)\n    chars.push(ALPHA[index])\n  }\n  return chars.join(\"\")\n}\n\nexport default uploadFile\n","import React from \"react\"\nimport misago from \"../../\"\nimport modal from \"../../services/modal\"\nimport MarkupCodeModal from \"./MarkupCodeModal\"\nimport MarkupFormattingHelpModal from \"./MarkupFormattingHelpModal\"\nimport MarkupImageModal from \"./MarkupImageModal\"\nimport MarkupLinkModal from \"./MarkupLinkModal\"\nimport MarkupQuoteModal from \"./MarkupQuoteModal\"\nimport MarkupEditorButton from \"./MarkupEditorButton\"\nimport { getSelection, replaceSelection, wrapSelection } from \"./operations\"\nimport uploadFile from \"./uploadFile\"\n\nconst MarkupEditorToolbar = ({\n  disabled,\n  element,\n  update,\n  updateAttachments,\n}) => {\n  const actions = [\n    {\n      name: pgettext(\"markup editor\", \"Strong\"),\n      icon: \"format_bold\",\n      onClick: () => {\n        wrapSelection(\n          getSelection(element),\n          update,\n          \"**\",\n          \"**\",\n          pgettext(\"example markup\", \"Strong text\")\n        )\n      },\n    },\n    {\n      name: pgettext(\"markup editor\", \"Emphasis\"),\n      icon: \"format_italic\",\n      onClick: () => {\n        wrapSelection(\n          getSelection(element),\n          update,\n          \"*\",\n          \"*\",\n          pgettext(\"example markup\", \"Text with emphasis\")\n        )\n      },\n    },\n    {\n      name: pgettext(\"markup editor\", \"Strikethrough\"),\n      icon: \"format_strikethrough\",\n      onClick: () => {\n        wrapSelection(\n          getSelection(element),\n          update,\n          \"~~\",\n          \"~~\",\n          pgettext(\"example markup\", \"Text with strikethrough\")\n        )\n      },\n    },\n    {\n      name: pgettext(\"markup editor\", \"Horizontal ruler\"),\n      icon: \"remove\",\n      onClick: () => {\n        replaceSelection(getSelection(element), update, \"\\n\\n- - -\\n\\n\")\n      },\n    },\n    {\n      name: pgettext(\"markup editor\", \"Link\"),\n      icon: \"insert_link\",\n      onClick: () => {\n        const selection = getSelection(element)\n        modal.show(\n          <MarkupLinkModal\n            selection={selection}\n            element={element}\n            update={update}\n          />\n        )\n      },\n    },\n    {\n      name: pgettext(\"markup editor\", \"Image\"),\n      icon: \"insert_photo\",\n      onClick: () => {\n        const selection = getSelection(element)\n        modal.show(\n          <MarkupImageModal\n            selection={selection}\n            element={element}\n            update={update}\n          />\n        )\n      },\n    },\n    {\n      name: pgettext(\"markup editor\", \"Quote\"),\n      icon: \"format_quote\",\n      onClick: () => {\n        const selection = getSelection(element)\n        modal.show(\n          <MarkupQuoteModal\n            selection={selection}\n            element={element}\n            update={update}\n          />\n        )\n      },\n    },\n    {\n      name: pgettext(\"markup editor\", \"Spoiler\"),\n      icon: \"visibility_off\",\n      onClick: () => {\n        insertSpoiler(element, update)\n      },\n    },\n    {\n      name: pgettext(\"markup editor\", \"Code\"),\n      icon: \"code\",\n      onClick: () => {\n        const selection = getSelection(element)\n        modal.show(\n          <MarkupCodeModal\n            selection={selection}\n            element={element}\n            update={update}\n          />\n        )\n      },\n    },\n  ]\n\n  if (misago.get(\"user\").acl.max_attachment_size) {\n    actions.push({\n      name: pgettext(\"markup editor\", \"Upload file\"),\n      icon: \"file_upload\",\n      onClick: () => uploadFiles(updateAttachments),\n    })\n  }\n\n  return (\n    <div className=\"markup-editor-toolbar\">\n      <div className=\"markup-editor-toolbar-left\">\n        {actions.map(({ name, icon, onClick }) => (\n          <MarkupEditorButton\n            key={icon}\n            title={name}\n            icon={icon}\n            disabled={disabled || !element}\n            onClick={onClick}\n          />\n        ))}\n      </div>\n      <div className=\"markup-editor-toolbar-right\">\n        <div className=\"markup-editor-controls-dropdown\">\n          <button\n            type=\"button\"\n            className=\"btn btn-markup-editor dropdown-toggle\"\n            data-toggle=\"dropdown\"\n            aria-haspopup=\"true\"\n            aria-expanded=\"false\"\n            disabled={disabled || !element}\n          >\n            <span className=\"material-icon\">more_vert</span>\n          </button>\n          <ul className=\"dropdown-menu dropdown-menu-right stick-to-bottom\">\n            {actions.map(({ name, icon, onClick }) => (\n              <li key={icon}>\n                <button\n                  type=\"button\"\n                  className=\"btn-link\"\n                  disabled={disabled || !element}\n                  onClick={onClick}\n                >\n                  <span className=\"material-icon\">{icon}</span>\n                  {name}\n                </button>\n              </li>\n            ))}\n          </ul>\n        </div>\n        <MarkupEditorButton\n          title={pgettext(\"markup editor\", \"Formatting help\")}\n          icon=\"help_outline\"\n          onClick={() => {\n            modal.show(<MarkupFormattingHelpModal />)\n          }}\n        />\n      </div>\n    </div>\n  )\n}\n\nconst insertSpoiler = (element, update) => {\n  const selection = getSelection(element)\n  const prefix = selection.prefix.trim().length ? \"\\n\\n\" : \"\"\n\n  wrapSelection(\n    selection,\n    update,\n    prefix + \"[spoiler]\\n\",\n    \"\\n[/spoiler]\\n\\n\",\n    pgettext(\"markup editor\", \"Spoiler text\")\n  )\n}\n\nconst uploadFiles = (setState) => {\n  const input = document.createElement(\"input\")\n  input.type = \"file\"\n  input.multiple = \"multiple\"\n\n  input.addEventListener(\"change\", function () {\n    for (let i = 0; i < input.files.length; i++) {\n      uploadFile(input.files[i], setState)\n    }\n  })\n\n  input.click()\n}\n\nexport default MarkupEditorToolbar\n","import React from \"react\"\nimport classnames from \"classnames\"\n\nimport misago from \"../../\"\nimport ajax from \"../../services/ajax\"\nimport snackbar from \"../../services/snackbar\"\nimport MisagoMarkup from \"../misago-markup\"\nimport MarkupEditorAttachments from \"./MarkupEditorAttachments\"\nimport MarkupEditorFooter from \"./MarkupEditorFooter\"\nimport MarkupEditorToolbar from \"./MarkupEditorToolbar\"\nimport uploadFile from \"./uploadFile\"\n\nclass MarkupEditor extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      element: null,\n      focused: false,\n      loading: false,\n      preview: false,\n      parsed: null,\n    }\n  }\n\n  showPreview = () => {\n    if (this.state.loading) return\n\n    this.setState({ loading: true, preview: true, element: null })\n\n    ajax.post(misago.get(\"PARSE_MARKUP_API\"), { post: this.props.value }).then(\n      (data) => {\n        this.setState({ loading: false, parsed: data.parsed })\n      },\n      (rejection) => {\n        if (rejection.status === 400) {\n          snackbar.error(rejection.detail)\n        } else {\n          snackbar.apiError(rejection)\n        }\n\n        this.setState({ loading: false, preview: false })\n      }\n    )\n  }\n\n  closePreview = () => {\n    this.setState({ loading: false, preview: false })\n  }\n\n  onDrop = (event) => {\n    event.preventDefault()\n    event.stopPropagation()\n\n    if (!event.dataTransfer.files) return\n\n    const { onAttachmentsChange: setState } = this.props\n\n    if (misago.get(\"user\").acl.max_attachment_size) {\n      for (let i = 0; i < event.dataTransfer.files.length; i++) {\n        const file = event.dataTransfer.files[i]\n        uploadFile(file, setState)\n      }\n    }\n  }\n\n  onPaste = (event) => {\n    const { onAttachmentsChange: setState } = this.props\n\n    const files = []\n    for (let i = 0; i < event.clipboardData.items.length; i++) {\n      const item = event.clipboardData.items[i]\n      if (item.kind === \"file\") {\n        files.push(item.getAsFile())\n      }\n    }\n\n    if (files.length) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      if (misago.get(\"user\").acl.max_attachment_size) {\n        for (let i = 0; i < files.length; i++) {\n          uploadFile(files[i], setState)\n        }\n      }\n    }\n  }\n\n  render = () => (\n    <div\n      className={classnames(\"markup-editor\", {\n        \"markup-editor-focused\": this.state.focused && !this.state.preview,\n      })}\n    >\n      <MarkupEditorToolbar\n        disabled={this.props.disabled || this.state.preview}\n        element={this.state.element}\n        update={(value) => this.props.onChange({ target: { value } })}\n        updateAttachments={this.props.onAttachmentsChange}\n      />\n      {this.state.preview ? (\n        <div className=\"markup-editor-preview\">\n          {this.state.loading ? (\n            <div className=\"markup-editor-preview-loading\">\n              <div className=\"ui-preview\">\n                <span className=\"ui-preview-text\" style={{ width: \"240px\" }} />\n              </div>\n            </div>\n          ) : (\n            <MisagoMarkup\n              className=\"markup-editor-preview-contents\"\n              markup={this.state.parsed}\n            />\n          )}\n        </div>\n      ) : (\n        <textarea\n          className=\"markup-editor-textarea form-control\"\n          placeholder={this.props.placeholder}\n          value={this.props.value}\n          disabled={this.props.disabled || this.state.loading}\n          rows={6}\n          ref={(element) => {\n            if (element && this.state.element !== element) {\n              this.setState({ element })\n              setMentions(this.props, element)\n            }\n          }}\n          onChange={this.props.onChange}\n          onDrop={this.onDrop}\n          onFocus={() => this.setState({ focused: true })}\n          onPaste={this.onPaste}\n          onBlur={() => this.setState({ focused: false })}\n        />\n      )}\n      {this.props.attachments.length > 0 && (\n        <MarkupEditorAttachments\n          attachments={this.props.attachments}\n          disabled={this.props.disabled || this.state.preview}\n          element={this.state.element}\n          setState={this.props.onAttachmentsChange}\n          update={(value) => this.props.onChange({ target: { value } })}\n        />\n      )}\n      <MarkupEditorFooter\n        preview={this.state.preview}\n        canProtect={this.props.canProtect}\n        isProtected={this.props.isProtected}\n        disabled={this.props.disabled}\n        empty={\n          this.props.value.trim().length <\n            misago.get(\"SETTINGS\").post_length_min || this.state.loading\n        }\n        enableProtection={this.props.enableProtection}\n        disableProtection={this.props.disableProtection}\n        showPreview={this.showPreview}\n        closePreview={this.closePreview}\n        submitText={this.props.submitText}\n      />\n    </div>\n  )\n}\n\nfunction setMentions(props, element) {\n  $(element).atwho({\n    at: \"@\",\n    displayTpl: '<li><img src=\"${avatar}\" alt=\"\">${username}</li>',\n    insertTpl: \"@${username}\",\n    searchKey: \"username\",\n    callbacks: {\n      remoteFilter: function (query, callback) {\n        $.getJSON(misago.get(\"MENTION_API\"), { q: query }, callback)\n      },\n    },\n  })\n\n  $(element).on(\"inserted.atwho\", (event, _storage, source, controller) => {\n    const { query } = controller\n    const username = source.target.innerText.trim()\n    const prefix = event.target.value.substr(0, query.headPos)\n    const suffix = event.target.value.substr(query.endPos)\n\n    event.target.value = prefix + username + suffix\n    props.onChange(event)\n\n    const caret = query.headPos + username.length\n    event.target.setSelectionRange(caret, caret)\n    event.target.focus()\n  })\n}\n\nexport default MarkupEditor\n","import MarkupEditor from \"./MarkupEditor\"\n\nexport default MarkupEditor\n","import React from \"react\"\nimport classnames from \"classnames\"\n\nconst CLASS_ACTIVE = \"posting-active\"\nconst CLASS_DEFAULT = \"posting-default\"\nconst CLASS_MINIMIZED = \"posting-minimized\"\nconst CLASS_FULLSCREEN = \"posting-fullscreen\"\n\nclass PostingDialog extends React.Component {\n  componentDidMount() {\n    document.body.classList.add(CLASS_ACTIVE, CLASS_DEFAULT)\n  }\n\n  componentWillUnmount() {\n    document.body.classList.remove(\n      CLASS_ACTIVE,\n      CLASS_DEFAULT,\n      CLASS_MINIMIZED,\n      CLASS_FULLSCREEN\n    )\n  }\n\n  componentWillReceiveProps({ fullscreen, minimized }) {\n    if (minimized) {\n      document.body.classList.remove(CLASS_DEFAULT, CLASS_FULLSCREEN)\n      document.body.classList.add(CLASS_MINIMIZED)\n    } else {\n      if (fullscreen) {\n        document.body.classList.remove(CLASS_DEFAULT, CLASS_MINIMIZED)\n        document.body.classList.add(CLASS_FULLSCREEN)\n      } else {\n        document.body.classList.remove(CLASS_FULLSCREEN, CLASS_MINIMIZED)\n        document.body.classList.add(CLASS_DEFAULT)\n      }\n    }\n  }\n\n  render() {\n    const { children, fullscreen, minimized } = this.props\n\n    return (\n      <div\n        className={classnames(\"posting-dialog\", {\n          \"posting-dialog-minimized\": minimized,\n          \"posting-dialog-fullscreen\": fullscreen && !minimized,\n        })}\n      >\n        <div className=\"posting-dialog-container\">{children}</div>\n      </div>\n    )\n  }\n}\n\nexport default PostingDialog\n","import React from \"react\"\n\nconst PostingDialogBody = ({ children }) => (\n  <div className=\"posting-dialog-body\">{children}</div>\n)\n\nexport default PostingDialogBody\n","import React from \"react\"\n\nconst PostingDialogError = ({ close, message }) => (\n  <div className=\"posting-dialog-error\">\n    <div className=\"posting-dialog-error-icon\">\n      <span className=\"material-icon\">error_outlined</span>\n    </div>\n    <div className=\"posting-dialog-error-detail\">\n      <p>{message}</p>\n      <button type=\"button\" className=\"btn btn-default\" onClick={close}>\n        {pgettext(\"modal\", \"Close\")}\n      </button>\n    </div>\n  </div>\n)\n\nexport default PostingDialogError\n","import React from \"react\"\n\nconst PostingDialogHeader = ({\n  children,\n  close,\n  fullscreen,\n  minimize,\n  minimized,\n  fullscreenEnter,\n  fullscreenExit,\n  open,\n}) => (\n  <div className=\"posting-dialog-header\">\n    <div className=\"posting-dialog-caption\">{children}</div>\n    {minimized ? (\n      <button\n        className=\"btn btn-posting-dialog\"\n        title={pgettext(\"dialog\", \"Open\")}\n        type=\"button\"\n        onClick={open}\n      >\n        <span className=\"material-icon\">expand_less</span>\n      </button>\n    ) : (\n      <button\n        className=\"btn btn-posting-dialog\"\n        title={pgettext(\"dialog\", \"Minimize\")}\n        type=\"button\"\n        onClick={minimize}\n      >\n        <span className=\"material-icon\">expand_more</span>\n      </button>\n    )}\n    {fullscreen ? (\n      <button\n        className=\"btn btn-posting-dialog hidden-xs\"\n        title={pgettext(\"dialog\", \"Exit the fullscreen mode\")}\n        type=\"button\"\n        onClick={fullscreenExit}\n      >\n        <span className=\"material-icon\">fullscreen_exit</span>\n      </button>\n    ) : (\n      <button\n        className=\"btn btn-posting-dialog hidden-xs\"\n        title={pgettext(\"dialog\", \"Enter the fullscreen mode\")}\n        type=\"button\"\n        onClick={fullscreenEnter}\n      >\n        <span className=\"material-icon\">fullscreen</span>\n      </button>\n    )}\n    <button\n      className=\"btn btn-posting-dialog\"\n      title={pgettext(\"dialog\", \"Cancel\")}\n      type=\"button\"\n      onClick={close}\n    >\n      <span className=\"material-icon\">close</span>\n    </button>\n  </div>\n)\n\nexport default PostingDialogHeader\n","import React from \"react\"\n\nexport default function PostingThreadOptions({\n  isClosed,\n  isHidden,\n  isPinned,\n  disabled,\n  options,\n  close,\n  open,\n  hide,\n  unhide,\n  pinGlobally,\n  pinLocally,\n  unpin,\n}) {\n  const icons = getIcons(isClosed, isHidden, isPinned)\n\n  return (\n    <div className=\"dropdown\">\n      <button\n        className=\"btn btn-default btn-outline btn-icon\"\n        title={pgettext(\"post thread\", \"Options\")}\n        aria-expanded=\"true\"\n        aria-haspopup=\"true\"\n        data-toggle=\"dropdown\"\n        type=\"button\"\n        disabled={disabled}\n      >\n        {icons.length > 0 ? (\n          <span className=\"btn-icons-family\">\n            {icons.map((icon) => (\n              <span key={icon} className=\"material-icon\">\n                {icon}\n              </span>\n            ))}\n          </span>\n        ) : (\n          <span className=\"material-icon\">more_horiz</span>\n        )}\n      </button>\n      <ul className=\"dropdown-menu dropdown-menu-right stick-to-bottom\">\n        {options.pin === 2 && isPinned !== 2 && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              onClick={pinGlobally}\n              type=\"button\"\n              disabled={disabled}\n            >\n              <span className=\"material-icon\">bookmark</span>\n              {pgettext(\"post thread\", \"Pinned globally\")}\n            </button>\n          </li>\n        )}\n        {options.pin >= isPinned && isPinned !== 1 && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              onClick={pinLocally}\n              type=\"button\"\n              disabled={disabled}\n            >\n              <span className=\"material-icon\">bookmark_outline</span>\n              {pgettext(\"post thread\", \"Pinned locally\")}\n            </button>\n          </li>\n        )}\n        {options.pin >= isPinned && isPinned !== 0 && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              onClick={unpin}\n              type=\"button\"\n              disabled={disabled}\n            >\n              <span className=\"material-icon\">radio_button_unchecked</span>\n              {pgettext(\"post thread\", \"Not pinned\")}\n            </button>\n          </li>\n        )}\n        {options.close && !!isClosed && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              onClick={open}\n              type=\"button\"\n              disabled={disabled}\n            >\n              <span className=\"material-icon\">lock_outline</span>\n              {pgettext(\"post thread\", \"Open\")}\n            </button>\n          </li>\n        )}\n        {options.close && !isClosed && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              onClick={close}\n              type=\"button\"\n              disabled={disabled}\n            >\n              <span className=\"material-icon\">lock</span>\n              {pgettext(\"post thread\", \"Closed\")}\n            </button>\n          </li>\n        )}\n        {options.hide && !!isHidden && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              onClick={unhide}\n              type=\"button\"\n              disabled={disabled}\n            >\n              <span className=\"material-icon\">visibility</span>\n              {pgettext(\"post thread\", \"Visible\")}\n            </button>\n          </li>\n        )}\n        {options.hide && !isHidden && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              onClick={hide}\n              type=\"button\"\n              disabled={disabled}\n            >\n              <span className=\"material-icon\">visibility_off</span>\n              {pgettext(\"post thread\", \"Hidden\")}\n            </button>\n          </li>\n        )}\n      </ul>\n    </div>\n  )\n}\n\nfunction getIcons(closed, hidden, pinned) {\n  const icons = []\n  if (pinned === 2) icons.push(\"bookmark\")\n  if (pinned === 1) icons.push(\"bookmark_outline\")\n  if (closed) icons.push(\"lock\")\n  if (hidden) icons.push(\"visibility_off\")\n  return icons\n}\n","import React from \"react\"\nimport CategorySelect from \"misago/components/category-select\"\nimport Form from \"misago/components/form\"\nimport * as attachments from \"./utils/attachments\"\nimport { getPostValidators, getTitleValidators } from \"./utils/validators\"\nimport ajax from \"misago/services/ajax\"\nimport posting from \"misago/services/posting\"\nimport snackbar from \"misago/services/snackbar\"\nimport MarkupEditor from \"../MarkupEditor\"\nimport { Toolbar, ToolbarItem, ToolbarSection } from \"../Toolbar\"\nimport PostingDialog from \"./PostingDialog\"\nimport PostingDialogBody from \"./PostingDialogBody\"\nimport PostingDialogError from \"./PostingDialogError\"\nimport PostingDialogHeader from \"./PostingDialogHeader\"\nimport PostingThreadOptions from \"./PostingThreadOptions\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isReady: false,\n      isLoading: false,\n\n      error: null,\n\n      minimized: false,\n      fullscreen: false,\n\n      options: null,\n\n      title: \"\",\n      category: props.category || null,\n      categories: [],\n      post: \"\",\n      attachments: [],\n      close: false,\n      hide: false,\n      pin: 0,\n\n      validators: {\n        title: getTitleValidators(),\n        post: getPostValidators(),\n      },\n      errors: {},\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(this.props.config).then(this.loadSuccess, this.loadError)\n  }\n\n  loadSuccess = (data) => {\n    let category = null\n    let options = null\n\n    // hydrate categories, extract posting options\n    const categories = data.map((item) => {\n      // pick first category that allows posting and if it may, override it with initial one\n      if (\n        item.post !== false &&\n        (!category || item.id == this.state.category)\n      ) {\n        category = item.id\n        options = item.post\n      }\n\n      return Object.assign(item, {\n        disabled: item.post === false,\n        label: item.name,\n        value: item.id,\n      })\n    })\n\n    this.setState({\n      isReady: true,\n      options,\n\n      categories,\n      category,\n    })\n  }\n\n  loadError = (rejection) => {\n    this.setState({\n      error: rejection.detail,\n    })\n  }\n\n  onCancel = () => {\n    const cancel = window.confirm(\n      pgettext(\"post thread\", \"Are you sure you want to discard thread?\")\n    )\n    if (cancel) {\n      this.minimize()\n      posting.close()\n    }\n  }\n\n  onTitleChange = (event) => {\n    this.changeValue(\"title\", event.target.value)\n  }\n\n  onCategoryChange = (event) => {\n    const category = this.state.categories.find((item) => {\n      return event.target.value == item.value\n    })\n\n    // if selected pin is greater than allowed, reduce it\n    let pin = this.state.pin\n    if (category.post.pin && category.post.pin < pin) {\n      pin = category.post.pin\n    }\n\n    this.setState({\n      category: category.id,\n      categoryOptions: category.post,\n\n      pin,\n    })\n  }\n\n  onPostChange = (event) => {\n    this.changeValue(\"post\", event.target.value)\n  }\n\n  onAttachmentsChange = (attachments) => {\n    this.setState(attachments)\n  }\n\n  onClose = () => {\n    this.changeValue(\"close\", true)\n  }\n\n  onOpen = () => {\n    this.changeValue(\"close\", false)\n  }\n\n  onPinGlobally = () => {\n    this.changeValue(\"pin\", 2)\n  }\n\n  onPinLocally = () => {\n    this.changeValue(\"pin\", 1)\n  }\n\n  onUnpin = () => {\n    this.changeValue(\"pin\", 0)\n  }\n\n  onHide = () => {\n    this.changeValue(\"hide\", true)\n  }\n\n  onUnhide = () => {\n    this.changeValue(\"hide\", false)\n  }\n\n  close = () => {\n    this.minimize()\n    posting.close()\n  }\n\n  minimize = () => {\n    this.setState({ fullscreen: false, minimized: true })\n  }\n\n  open = () => {\n    this.setState({ minimized: false })\n    if (this.state.fullscreen) {\n    }\n  }\n\n  fullscreenEnter = () => {\n    this.setState({ fullscreen: true, minimized: false })\n  }\n\n  fullscreenExit = () => {\n    this.setState({ fullscreen: false, minimized: false })\n  }\n\n  clean() {\n    if (!this.state.title.trim().length) {\n      snackbar.error(gettext(\"You have to enter thread title.\"))\n      return false\n    }\n\n    if (!this.state.post.trim().length) {\n      snackbar.error(gettext(\"You have to enter a message.\"))\n      return false\n    }\n\n    const errors = this.validate()\n\n    if (errors.title) {\n      snackbar.error(errors.title[0])\n      return false\n    }\n\n    if (errors.post) {\n      snackbar.error(errors.post[0])\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    return ajax.post(this.props.submit, {\n      title: this.state.title,\n      category: this.state.category,\n      post: this.state.post,\n      attachments: attachments.clean(this.state.attachments),\n      close: this.state.close,\n      hide: this.state.hide,\n      pin: this.state.pin,\n    })\n  }\n\n  handleSuccess(success) {\n    snackbar.success(pgettext(\"post thread\", \"Your thread has been posted.\"))\n    window.location = success.url\n\n    // keep form loading\n    this.setState({\n      isLoading: true,\n    })\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      const errors = [].concat(\n        rejection.non_field_errors || [],\n        rejection.category || [],\n        rejection.title || [],\n        rejection.post || [],\n        rejection.attachments || []\n      )\n\n      snackbar.error(errors[0])\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    const dialogProps = {\n      minimized: this.state.minimized,\n      minimize: this.minimize,\n      open: this.open,\n\n      fullscreen: this.state.fullscreen,\n      fullscreenEnter: this.fullscreenEnter,\n      fullscreenExit: this.fullscreenExit,\n\n      close: this.onCancel,\n    }\n\n    if (this.state.error) {\n      return (\n        <PostingDialogStart {...dialogProps}>\n          <PostingDialogError message={this.state.error} close={this.close} />\n        </PostingDialogStart>\n      )\n    }\n\n    if (!this.state.isReady) {\n      return (\n        <PostingDialogStart {...dialogProps}>\n          <div className=\"posting-loading ui-preview\">\n            <Toolbar className=\"posting-dialog-toolbar\">\n              <ToolbarSection className=\"posting-dialog-thread-title\" auto>\n                <ToolbarItem auto>\n                  <input className=\"form-control\" disabled={true} type=\"text\" />\n                </ToolbarItem>\n              </ToolbarSection>\n              <ToolbarSection className=\"posting-dialog-category-select\" auto>\n                <ToolbarItem>\n                  <input className=\"form-control\" disabled={true} type=\"text\" />\n                </ToolbarItem>\n              </ToolbarSection>\n            </Toolbar>\n            <MarkupEditor\n              attachments={[]}\n              value={\"\"}\n              submitText={pgettext(\"post thread submit\", \"Post thread\")}\n              disabled={true}\n              onAttachmentsChange={() => {}}\n              onChange={() => {}}\n            />\n          </div>\n        </PostingDialogStart>\n      )\n    }\n\n    const showOptions = !!(\n      this.state.options.close ||\n      this.state.options.hide ||\n      this.state.options.pin\n    )\n\n    return (\n      <PostingDialogStart {...dialogProps}>\n        <form className=\"posting-dialog-form\" onSubmit={this.handleSubmit}>\n          <Toolbar className=\"posting-dialog-toolbar\">\n            <ToolbarSection className=\"posting-dialog-thread-title\" auto>\n              <ToolbarItem auto>\n                <input\n                  className=\"form-control\"\n                  disabled={this.state.isLoading}\n                  onChange={this.onTitleChange}\n                  placeholder={pgettext(\"post thread\", \"Thread title\")}\n                  type=\"text\"\n                  value={this.state.title}\n                />\n              </ToolbarItem>\n            </ToolbarSection>\n            <ToolbarSection className=\"posting-dialog-category-select\" auto>\n              <ToolbarItem>\n                <CategorySelect\n                  choices={this.state.categories}\n                  disabled={this.state.isLoading}\n                  onChange={this.onCategoryChange}\n                  value={this.state.category}\n                />\n              </ToolbarItem>\n              {showOptions && (\n                <ToolbarItem shrink>\n                  <PostingThreadOptions\n                    isClosed={this.state.close}\n                    isHidden={this.state.hide}\n                    isPinned={this.state.pin}\n                    disabled={this.state.isLoading}\n                    options={this.state.options}\n                    close={this.onClose}\n                    open={this.onOpen}\n                    hide={this.onHide}\n                    unhide={this.onUnhide}\n                    pinGlobally={this.onPinGlobally}\n                    pinLocally={this.onPinLocally}\n                    unpin={this.onUnpin}\n                  />\n                </ToolbarItem>\n              )}\n            </ToolbarSection>\n          </Toolbar>\n          <MarkupEditor\n            attachments={this.state.attachments}\n            value={this.state.post}\n            submitText={pgettext(\"post thread submit\", \"Start thread\")}\n            disabled={this.state.isLoading}\n            onAttachmentsChange={this.onAttachmentsChange}\n            onChange={this.onPostChange}\n          />\n        </form>\n      </PostingDialogStart>\n    )\n  }\n}\n\nconst PostingDialogStart = ({\n  children,\n  close,\n  minimized,\n  minimize,\n  open,\n  fullscreen,\n  fullscreenEnter,\n  fullscreenExit,\n}) => (\n  <PostingDialog fullscreen={fullscreen} minimized={minimized}>\n    <PostingDialogHeader\n      fullscreen={fullscreen}\n      fullscreenEnter={fullscreenEnter}\n      fullscreenExit={fullscreenExit}\n      minimized={minimized}\n      minimize={minimize}\n      open={open}\n      close={close}\n    >\n      {pgettext(\"post thread\", \"Start new thread\")}\n    </PostingDialogHeader>\n    <PostingDialogBody>{children}</PostingDialogBody>\n  </PostingDialog>\n)\n","export default function (usernames) {\n  const normalisedNames = usernames\n    .split(\",\")\n    .map((i) => i.trim().toLowerCase())\n  const removedBlanks = normalisedNames.filter((i) => i.length > 0)\n  const removedDuplicates = removedBlanks.filter((name, pos) => {\n    return removedBlanks.indexOf(name) == pos\n  })\n\n  return removedDuplicates\n}\n","import React from \"react\"\nimport Form from \"misago/components/form\"\nimport * as attachments from \"./utils/attachments\"\nimport cleanUsernames from \"./utils/usernames\"\nimport { getPostValidators, getTitleValidators } from \"./utils/validators\"\nimport ajax from \"misago/services/ajax\"\nimport posting from \"misago/services/posting\"\nimport snackbar from \"misago/services/snackbar\"\nimport MarkupEditor from \"../MarkupEditor\"\nimport { Toolbar, ToolbarItem, ToolbarSection } from \"../Toolbar\"\nimport PostingDialog from \"./PostingDialog\"\nimport PostingDialogBody from \"./PostingDialogBody\"\nimport PostingDialogHeader from \"./PostingDialogHeader\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    const to = (props.to || []).map((user) => user.username).join(\", \")\n\n    this.state = {\n      isLoading: false,\n\n      error: null,\n\n      minimized: false,\n      fullscreen: false,\n\n      to: to,\n      title: \"\",\n      post: \"\",\n      attachments: [],\n\n      validators: {\n        title: getTitleValidators(),\n        post: getPostValidators(),\n      },\n      errors: {},\n    }\n  }\n\n  onCancel = () => {\n    const cancel = window.confirm(\n      pgettext(\n        \"post thread\",\n        \"Are you sure you want to discard private thread?\"\n      )\n    )\n    if (cancel) {\n      this.close()\n    }\n  }\n\n  onToChange = (event) => {\n    this.changeValue(\"to\", event.target.value)\n  }\n\n  onTitleChange = (event) => {\n    this.changeValue(\"title\", event.target.value)\n  }\n\n  onPostChange = (event) => {\n    this.changeValue(\"post\", event.target.value)\n  }\n\n  onAttachmentsChange = (attachments) => {\n    this.setState(attachments)\n  }\n\n  clean() {\n    if (!cleanUsernames(this.state.to).length) {\n      snackbar.error(gettext(\"You have to enter at least one recipient.\"))\n      return false\n    }\n\n    if (!this.state.title.trim().length) {\n      snackbar.error(gettext(\"You have to enter thread title.\"))\n      return false\n    }\n\n    if (!this.state.post.trim().length) {\n      snackbar.error(gettext(\"You have to enter a message.\"))\n      return false\n    }\n\n    const errors = this.validate()\n\n    if (errors.title) {\n      snackbar.error(errors.title[0])\n      return false\n    }\n\n    if (errors.post) {\n      snackbar.error(errors.post[0])\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    return ajax.post(this.props.submit, {\n      to: cleanUsernames(this.state.to),\n      title: this.state.title,\n      post: this.state.post,\n      attachments: attachments.clean(this.state.attachments),\n    })\n  }\n\n  handleSuccess(success) {\n    snackbar.success(pgettext(\"post thread\", \"Your thread has been posted.\"))\n    window.location = success.url\n\n    // keep form loading\n    this.setState({\n      isLoading: true,\n    })\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      const errors = [].concat(\n        rejection.non_field_errors || [],\n        rejection.to || [],\n        rejection.title || [],\n        rejection.post || [],\n        rejection.attachments || []\n      )\n\n      snackbar.error(errors[0])\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  close = () => {\n    this.minimize()\n    posting.close()\n  }\n\n  minimize = () => {\n    this.setState({ fullscreen: false, minimized: true })\n  }\n\n  open = () => {\n    this.setState({ minimized: false })\n    if (this.state.fullscreen) {\n    }\n  }\n\n  fullscreenEnter = () => {\n    this.setState({ fullscreen: true, minimized: false })\n  }\n\n  fullscreenExit = () => {\n    this.setState({ fullscreen: false, minimized: false })\n  }\n\n  render() {\n    const dialogProps = {\n      minimized: this.state.minimized,\n      minimize: this.minimize,\n      open: this.open,\n\n      fullscreen: this.state.fullscreen,\n      fullscreenEnter: this.fullscreenEnter,\n      fullscreenExit: this.fullscreenExit,\n\n      close: this.onCancel,\n    }\n\n    return (\n      <PostingDialogStartPrivate {...dialogProps}>\n        <form className=\"posting-dialog-form\" onSubmit={this.handleSubmit}>\n          <Toolbar className=\"posting-dialog-toolbar\">\n            <ToolbarSection className=\"posting-dialog-thread-recipients\" auto>\n              <ToolbarItem auto>\n                <input\n                  className=\"form-control\"\n                  disabled={this.state.isLoading}\n                  onChange={this.onToChange}\n                  placeholder={pgettext(\n                    \"post thread\",\n                    \"Recipients, eg.: Danny, Lisa, Alice\"\n                  )}\n                  type=\"text\"\n                  value={this.state.to}\n                />\n              </ToolbarItem>\n            </ToolbarSection>\n            <ToolbarSection className=\"posting-dialog-thread-title\" auto>\n              <ToolbarItem auto>\n                <input\n                  className=\"form-control\"\n                  disabled={this.state.isLoading}\n                  onChange={this.onTitleChange}\n                  placeholder={pgettext(\"post thread\", \"Thread title\")}\n                  type=\"text\"\n                  value={this.state.title}\n                />\n              </ToolbarItem>\n            </ToolbarSection>\n          </Toolbar>\n          <MarkupEditor\n            attachments={this.state.attachments}\n            value={this.state.post}\n            submitText={pgettext(\"post thread submit\", \"Start thread\")}\n            disabled={this.state.isLoading}\n            onAttachmentsChange={this.onAttachmentsChange}\n            onChange={this.onPostChange}\n          />\n        </form>\n      </PostingDialogStartPrivate>\n    )\n  }\n}\n\nconst PostingDialogStartPrivate = ({\n  children,\n  close,\n  minimized,\n  minimize,\n  open,\n  fullscreen,\n  fullscreenEnter,\n  fullscreenExit,\n}) => (\n  <PostingDialog fullscreen={fullscreen} minimized={minimized}>\n    <PostingDialogHeader\n      fullscreen={fullscreen}\n      fullscreenEnter={fullscreenEnter}\n      fullscreenExit={fullscreenExit}\n      minimized={minimized}\n      minimize={minimize}\n      open={open}\n      close={close}\n    >\n      {pgettext(\"post thread\", \"Start private thread\")}\n    </PostingDialogHeader>\n    <PostingDialogBody>{children}</PostingDialogBody>\n  </PostingDialog>\n)\n","import React from \"react\"\nimport Form from \"misago/components/form\"\nimport * as attachments from \"./utils/attachments\"\nimport { getPostValidators } from \"./utils/validators\"\nimport ajax from \"misago/services/ajax\"\nimport posting from \"misago/services/posting\"\nimport snackbar from \"misago/services/snackbar\"\nimport MarkupEditor from \"../MarkupEditor\"\nimport PostingDialog from \"./PostingDialog\"\nimport PostingDialogBody from \"./PostingDialogBody\"\nimport PostingDialogError from \"./PostingDialogError\"\nimport PostingDialogHeader from \"./PostingDialogHeader\"\nimport { clearGlobalState, setGlobalState } from \"./globalState\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isReady: false,\n      isLoading: false,\n\n      error: null,\n\n      minimized: false,\n      fullscreen: false,\n\n      post: this.props.default || \"\",\n      attachments: [],\n\n      validators: {\n        post: getPostValidators(),\n      },\n      errors: {},\n    }\n  }\n\n  componentDidMount() {\n    ajax\n      .get(this.props.config, this.props.context || null)\n      .then(this.loadSuccess, this.loadError)\n\n    setGlobalState(false, this.onQuote)\n  }\n\n  componentWillUnmount() {\n    clearGlobalState()\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const context = this.props.context\n    const newContext = nextProps.context\n\n    if (context && newContext && context.reply === newContext.reply) return\n\n    ajax\n      .get(nextProps.config, nextProps.context || null)\n      .then(this.appendData, snackbar.apiError)\n  }\n\n  loadSuccess = (data) => {\n    this.setState({\n      isReady: true,\n\n      post: data.post\n        ? '[quote=\"@' + data.poster + '\"]\\n' + data.post + \"\\n[/quote]\"\n        : this.state.post,\n    })\n  }\n\n  loadError = (rejection) => {\n    this.setState({\n      error: rejection.detail,\n    })\n  }\n\n  appendData = (data) => {\n    const newPost = data.post\n      ? '[quote=\"@' + data.poster + '\"]\\n' + data.post + \"\\n[/quote]\\n\\n\"\n      : \"\"\n\n    this.setState((prevState, props) => {\n      if (prevState.post.length > 0) {\n        return {\n          post: prevState.post + \"\\n\\n\" + newPost,\n        }\n      }\n\n      return {\n        post: newPost,\n      }\n    })\n\n    this.open()\n  }\n\n  onCancel = () => {\n    const cancel = window.confirm(\n      pgettext(\"post reply\", \"Are you sure you want to discard your reply?\")\n    )\n    if (cancel) {\n      this.close()\n    }\n  }\n\n  onPostChange = (event) => {\n    this.changeValue(\"post\", event.target.value)\n  }\n\n  onAttachmentsChange = (attachments) => {\n    this.setState(attachments)\n  }\n\n  onQuote = (quote) => {\n    this.setState(({ post }) => {\n      if (post.length > 0) {\n        return { post: post.trim() + \"\\n\\n\" + quote }\n      }\n\n      return { post: quote }\n    })\n\n    this.open()\n  }\n\n  clean() {\n    if (!this.state.post.trim().length) {\n      snackbar.error(gettext(\"You have to enter a message.\"))\n      return false\n    }\n\n    const errors = this.validate()\n\n    if (errors.post) {\n      snackbar.error(errors.post[0])\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    setGlobalState(true, this.onQuote)\n\n    return ajax.post(this.props.submit, {\n      post: this.state.post,\n      attachments: attachments.clean(this.state.attachments),\n    })\n  }\n\n  handleSuccess(success) {\n    snackbar.success(pgettext(\"post reply\", \"Your reply has been posted.\"))\n    window.location = success.url.index\n\n    // keep form loading\n    this.setState({\n      isLoading: true,\n    })\n\n    setGlobalState(false, this.onQuote)\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      const errors = [].concat(\n        rejection.non_field_errors || [],\n        rejection.post || [],\n        rejection.attachments || []\n      )\n\n      snackbar.error(errors[0])\n    } else {\n      snackbar.apiError(rejection)\n    }\n\n    setGlobalState(false, this.onQuote)\n  }\n\n  close = () => {\n    this.minimize()\n    posting.close()\n  }\n\n  minimize = () => {\n    this.setState({ fullscreen: false, minimized: true })\n  }\n\n  open = () => {\n    this.setState({ minimized: false })\n    if (this.state.fullscreen) {\n    }\n  }\n\n  fullscreenEnter = () => {\n    this.setState({ fullscreen: true, minimized: false })\n  }\n\n  fullscreenExit = () => {\n    this.setState({ fullscreen: false, minimized: false })\n  }\n\n  render() {\n    const dialogProps = {\n      thread: this.props.thread,\n\n      minimized: this.state.minimized,\n      minimize: this.minimize,\n      open: this.open,\n\n      fullscreen: this.state.fullscreen,\n      fullscreenEnter: this.fullscreenEnter,\n      fullscreenExit: this.fullscreenExit,\n\n      close: this.onCancel,\n    }\n\n    if (this.state.error) {\n      return (\n        <PostingDialogReply {...dialogProps}>\n          <PostingDialogError message={this.state.error} close={this.close} />\n        </PostingDialogReply>\n      )\n    }\n\n    if (!this.state.isReady) {\n      return (\n        <PostingDialogReply {...dialogProps}>\n          <div className=\"posting-loading ui-preview\">\n            <MarkupEditor\n              attachments={[]}\n              value={\"\"}\n              submitText={pgettext(\"post reply submit\", \"Post reply\")}\n              disabled={true}\n              onAttachmentsChange={() => {}}\n              onChange={() => {}}\n            />\n          </div>\n        </PostingDialogReply>\n      )\n    }\n\n    return (\n      <PostingDialogReply {...dialogProps}>\n        <form\n          className=\"posting-dialog-form\"\n          method=\"POST\"\n          onSubmit={this.handleSubmit}\n        >\n          <MarkupEditor\n            attachments={this.state.attachments}\n            value={this.state.post}\n            submitText={pgettext(\"post reply submit\", \"Post reply\")}\n            disabled={this.state.isLoading}\n            onAttachmentsChange={this.onAttachmentsChange}\n            onChange={this.onPostChange}\n          />\n        </form>\n      </PostingDialogReply>\n    )\n  }\n}\n\nconst PostingDialogReply = ({\n  children,\n  close,\n  minimized,\n  minimize,\n  open,\n  fullscreen,\n  fullscreenEnter,\n  fullscreenExit,\n  thread,\n}) => (\n  <PostingDialog fullscreen={fullscreen} minimized={minimized}>\n    <PostingDialogHeader\n      fullscreen={fullscreen}\n      fullscreenEnter={fullscreenEnter}\n      fullscreenExit={fullscreenExit}\n      minimized={minimized}\n      minimize={minimize}\n      open={open}\n      close={close}\n    >\n      {interpolate(\n        pgettext(\"post reply\", \"Reply to: %(thread)s\"),\n        { thread: thread.title },\n        true\n      )}\n    </PostingDialogHeader>\n    <PostingDialogBody>{children}</PostingDialogBody>\n  </PostingDialog>\n)\n","import React from \"react\"\nimport Form from \"misago/components/form\"\nimport * as attachments from \"./utils/attachments\"\nimport { getPostValidators } from \"./utils/validators\"\nimport ajax from \"misago/services/ajax\"\nimport posting from \"misago/services/posting\"\nimport snackbar from \"misago/services/snackbar\"\nimport MarkupEditor from \"../MarkupEditor\"\nimport PostingDialog from \"./PostingDialog\"\nimport PostingDialogBody from \"./PostingDialogBody\"\nimport PostingDialogError from \"./PostingDialogError\"\nimport PostingDialogHeader from \"./PostingDialogHeader\"\nimport { clearGlobalState, setGlobalState } from \"./globalState\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isReady: false,\n      isLoading: false,\n\n      error: false,\n\n      minimized: false,\n      fullscreen: false,\n\n      post: \"\",\n      attachments: [],\n      protect: false,\n\n      canProtect: false,\n\n      validators: {\n        post: getPostValidators(),\n      },\n      errors: {},\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(this.props.config).then(this.loadSuccess, this.loadError)\n\n    setGlobalState(false, this.onQuote)\n  }\n\n  componentWillUnmount() {\n    clearGlobalState()\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const context = this.props.context\n    const newContext = nextProps.context\n\n    if (context && newContext && context.reply === newContext.reply) return\n\n    ajax\n      .get(nextProps.config, nextProps.context || null)\n      .then(this.appendData, snackbar.apiError)\n  }\n\n  loadSuccess = (data) => {\n    this.setState({\n      isReady: true,\n\n      post: data.post,\n      attachments: attachments.hydrate(data.attachments),\n      protect: data.is_protected,\n\n      canProtect: data.can_protect,\n    })\n  }\n\n  loadError = (rejection) => {\n    this.setState({\n      error: rejection.detail,\n    })\n  }\n\n  appendData = (data) => {\n    const newPost = data.post\n      ? '[quote=\"@' + data.poster + '\"]\\n' + data.post + \"\\n[/quote]\\n\\n\"\n      : \"\"\n\n    this.setState((prevState, props) => {\n      if (prevState.post.length > 0) {\n        return {\n          post: prevState.post + \"\\n\\n\" + newPost,\n        }\n      }\n\n      return {\n        post: newPost,\n      }\n    })\n\n    this.open()\n  }\n\n  onCancel = () => {\n    const cancel = window.confirm(\n      gettext(\"Are you sure you want to discard changes?\")\n    )\n    if (cancel) {\n      this.close()\n    }\n  }\n\n  onProtect = () => {\n    this.setState({\n      protect: true,\n    })\n  }\n\n  onUnprotect = () => {\n    this.setState({\n      protect: false,\n    })\n  }\n\n  onPostChange = (event) => {\n    this.changeValue(\"post\", event.target.value)\n  }\n\n  onAttachmentsChange = (attachments) => {\n    this.setState(attachments)\n  }\n\n  onQuote = (quote) => {\n    this.setState(({ post }) => {\n      if (post.length > 0) {\n        return { post: post.trim() + \"\\n\\n\" + quote }\n      }\n\n      return { post: quote }\n    })\n\n    this.open()\n  }\n\n  clean() {\n    if (!this.state.post.trim().length) {\n      snackbar.error(gettext(\"You have to enter a message.\"))\n      return false\n    }\n\n    const errors = this.validate()\n\n    if (errors.post) {\n      snackbar.error(errors.post[0])\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    setGlobalState(true, this.onQuote)\n\n    return ajax.put(this.props.submit, {\n      post: this.state.post,\n      attachments: attachments.clean(this.state.attachments),\n      protect: this.state.protect,\n    })\n  }\n\n  handleSuccess(success) {\n    snackbar.success(gettext(\"Reply has been edited.\"))\n    window.location = success.url.index\n\n    // keep form loading\n    this.setState({\n      isLoading: true,\n    })\n\n    setGlobalState(false, this.onQuote)\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      const errors = [].concat(\n        rejection.non_field_errors || [],\n        rejection.category || [],\n        rejection.title || [],\n        rejection.post || [],\n        rejection.attachments || []\n      )\n\n      snackbar.error(errors[0])\n    } else {\n      snackbar.apiError(rejection)\n    }\n\n    setGlobalState(false, this.onQuote)\n  }\n\n  close = () => {\n    this.minimize()\n    posting.close()\n  }\n\n  minimize = () => {\n    this.setState({ fullscreen: false, minimized: true })\n  }\n\n  open = () => {\n    this.setState({ minimized: false })\n    if (this.state.fullscreen) {\n    }\n  }\n\n  fullscreenEnter = () => {\n    this.setState({ fullscreen: true, minimized: false })\n  }\n\n  fullscreenExit = () => {\n    this.setState({ fullscreen: false, minimized: false })\n  }\n\n  render() {\n    const dialogProps = {\n      post: this.props.post,\n\n      minimized: this.state.minimized,\n      minimize: this.minimize,\n      open: this.open,\n\n      fullscreen: this.state.fullscreen,\n      fullscreenEnter: this.fullscreenEnter,\n      fullscreenExit: this.fullscreenExit,\n\n      close: this.onCancel,\n    }\n\n    if (this.state.error) {\n      return (\n        <PostingDialogEditReply {...dialogProps}>\n          <PostingDialogError message={this.state.error} close={this.close} />\n        </PostingDialogEditReply>\n      )\n    }\n\n    if (!this.state.isReady) {\n      return (\n        <PostingDialogEditReply {...dialogProps}>\n          <div className=\"posting-loading ui-preview\">\n            <MarkupEditor\n              attachments={[]}\n              value={\"\"}\n              submitText={pgettext(\"edit reply submit\", \"Edit reply\")}\n              disabled={true}\n              onAttachmentsChange={() => {}}\n              onChange={() => {}}\n            />\n          </div>\n        </PostingDialogEditReply>\n      )\n    }\n\n    return (\n      <PostingDialogEditReply {...dialogProps}>\n        <form\n          className=\"posting-dialog-form\"\n          method=\"POST\"\n          onSubmit={this.handleSubmit}\n        >\n          <MarkupEditor\n            attachments={this.state.attachments}\n            canProtect={this.state.canProtect}\n            isProtected={this.state.protect}\n            enableProtection={() => this.setState({ protect: true })}\n            disableProtection={() => this.setState({ protect: false })}\n            value={this.state.post}\n            submitText={pgettext(\"edit reply submit\", \"Edit reply\")}\n            disabled={this.state.isLoading}\n            onAttachmentsChange={this.onAttachmentsChange}\n            onChange={this.onPostChange}\n          />\n        </form>\n      </PostingDialogEditReply>\n    )\n  }\n}\n\nconst PostingDialogEditReply = ({\n  children,\n  close,\n  minimized,\n  minimize,\n  open,\n  fullscreen,\n  fullscreenEnter,\n  fullscreenExit,\n  post,\n}) => (\n  <PostingDialog fullscreen={fullscreen} minimized={minimized}>\n    <PostingDialogHeader\n      fullscreen={fullscreen}\n      fullscreenEnter={fullscreenEnter}\n      fullscreenExit={fullscreenExit}\n      minimized={minimized}\n      minimize={minimize}\n      open={open}\n      close={close}\n    >\n      {interpolate(\n        pgettext(\"edit reply\", \"Edit reply by %(poster)s from %(date)s\"),\n        {\n          poster: post.poster ? post.poster.username : post.poster_name,\n          date: post.posted_on.fromNow(),\n        },\n        true\n      )}\n    </PostingDialogHeader>\n    <PostingDialogBody>{children}</PostingDialogBody>\n  </PostingDialog>\n)\n","import React from \"react\"\nimport PostingQuoteSelection from \"./PostingQuoteSelection\"\nimport getQuoteMarkup from \"./getQuoteMarkup\"\nimport { clearGlobalState, getGlobalState, setGlobalState } from \"./globalState\"\nimport Start from \"./start\"\nimport StartPrivate from \"./start-private\"\nimport Reply from \"./reply\"\nimport Edit from \"./edit\"\n\nexport default function (props) {\n  switch (props.mode) {\n    case \"START\":\n      return <Start {...props} />\n\n    case \"START_PRIVATE\":\n      return <StartPrivate {...props} />\n\n    case \"REPLY\":\n      return <Reply {...props} />\n\n    case \"EDIT\":\n      return <Edit {...props} />\n\n    default:\n      return null\n  }\n}\n\nexport {\n  PostingQuoteSelection,\n  clearGlobalState,\n  getGlobalState,\n  getQuoteMarkup,\n  setGlobalState,\n}\n","import { maxLength, minLength } from \"misago/utils/validators\"\nimport misago from \"misago\"\n\nexport function getTitleValidators() {\n  return [getTitleLengthMin(), getTitleLengthMax()]\n}\n\nexport function getPostValidators() {\n  if (misago.get(\"SETTINGS\").post_length_max) {\n    return [validatePostLengthMin(), validatePostLengthMax()]\n  } else {\n    return [validatePostLengthMin()]\n  }\n}\n\nexport function getTitleLengthMin() {\n  return minLength(\n    misago.get(\"SETTINGS\").thread_title_length_min,\n    (limitValue, length) => {\n      const message = ngettext(\n        \"Thread title should be at least %(limit_value)s character long (it has %(show_value)s).\",\n        \"Thread title should be at least %(limit_value)s characters long (it has %(show_value)s).\",\n        limitValue\n      )\n\n      return interpolate(\n        message,\n        {\n          limit_value: limitValue,\n          show_value: length,\n        },\n        true\n      )\n    }\n  )\n}\n\nexport function getTitleLengthMax() {\n  return maxLength(\n    misago.get(\"SETTINGS\").thread_title_length_max,\n    (limitValue, length) => {\n      const message = ngettext(\n        \"Thread title cannot be longer than %(limit_value)s character (it has %(show_value)s).\",\n        \"Thread title cannot be longer than %(limit_value)s characters (it has %(show_value)s).\",\n        limitValue\n      )\n\n      return interpolate(\n        message,\n        {\n          limit_value: limitValue,\n          show_value: length,\n        },\n        true\n      )\n    }\n  )\n}\n\nexport function validatePostLengthMin() {\n  return minLength(\n    misago.get(\"SETTINGS\").post_length_min,\n    (limitValue, length) => {\n      const message = ngettext(\n        \"Posted message should be at least %(limit_value)s character long (it has %(show_value)s).\",\n        \"Posted message should be at least %(limit_value)s characters long (it has %(show_value)s).\",\n        limitValue\n      )\n\n      return interpolate(\n        message,\n        {\n          limit_value: limitValue,\n          show_value: length,\n        },\n        true\n      )\n    }\n  )\n}\n\nexport function validatePostLengthMax() {\n  return maxLength(\n    misago.get(\"SETTINGS\").post_length_max || 1000000,\n    (limitValue, length) => {\n      const message = ngettext(\n        \"Posted message cannot be longer than %(limit_value)s character (it has %(show_value)s).\",\n        \"Posted message cannot be longer than %(limit_value)s characters (it has %(show_value)s).\",\n        limitValue\n      )\n\n      return interpolate(\n        message,\n        {\n          limit_value: limitValue,\n          show_value: length,\n        },\n        true\n      )\n    }\n  )\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  getChoice() {\n    let choice = null\n    this.props.choices.map((item) => {\n      if (item.value === this.props.value) {\n        choice = item\n      }\n    })\n    return choice\n  }\n\n  getIcon() {\n    return this.getChoice().icon\n  }\n\n  getLabel() {\n    return this.getChoice().label\n  }\n\n  change = (value) => {\n    return () => {\n      this.props.onChange({\n        target: {\n          value: value,\n        },\n      })\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"btn-group btn-select-group\">\n        <button\n          type=\"button\"\n          className=\"btn btn-select dropdown-toggle\"\n          id={this.props.id || null}\n          data-toggle=\"dropdown\"\n          aria-haspopup=\"true\"\n          aria-expanded=\"false\"\n          aria-describedby={this.props[\"aria-describedby\"] || null}\n          disabled={this.props.disabled || false}\n        >\n          <Icon icon={this.getIcon()} />\n          {this.getLabel()}\n        </button>\n        <ul className=\"dropdown-menu\">\n          {this.props.choices.map((item, i) => {\n            return (\n              <li key={i}>\n                <button\n                  type=\"button\"\n                  className=\"btn-link\"\n                  onClick={this.change(item.value)}\n                >\n                  <Icon icon={item.icon} />\n                  {item.label}\n                </button>\n              </li>\n            )\n          })}\n        </ul>\n      </div>\n    )\n  }\n}\n\nexport function Icon({ icon }) {\n  if (!icon) return null\n\n  return <span className=\"material-icon\">{icon}</span>\n}\n","import React from \"react\"\nimport misago from \"misago/index\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport StartSocialAuth from \"misago/components/StartSocialAuth\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport showBannedPage from \"misago/utils/banned-page\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n      showActivation: false,\n\n      username: \"\",\n      password: \"\",\n\n      validators: {\n        username: [],\n        password: [],\n      },\n    }\n  }\n\n  clean() {\n    if (!this.isValid()) {\n      snackbar.error(gettext(\"Fill out both fields.\"))\n      return false\n    } else {\n      return true\n    }\n  }\n\n  send() {\n    return ajax.post(misago.get(\"AUTH_API\"), {\n      username: this.state.username,\n      password: this.state.password,\n    })\n  }\n\n  handleSuccess() {\n    let form = $(\"#hidden-login-form\")\n\n    form.append('<input type=\"text\" name=\"username\" />')\n    form.append('<input type=\"password\" name=\"password\" />')\n\n    // fill out form with user credentials and submit it, this will tell\n    // Misago to redirect user back to right page, and will trigger browser's\n    // key ring feature\n    form.find('input[type=\"hidden\"]').val(ajax.getCsrfToken())\n    form.find('input[name=\"redirect_to\"]').val(window.location.pathname)\n    form.find('input[name=\"username\"]').val(this.state.username)\n    form.find('input[name=\"password\"]').val(this.state.password)\n    form.submit()\n\n    // keep form loading\n    this.setState({\n      isLoading: true,\n    })\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      if (rejection.code === \"inactive_admin\") {\n        snackbar.info(rejection.detail)\n      } else if (rejection.code === \"inactive_user\") {\n        snackbar.info(rejection.detail)\n        this.setState({\n          showActivation: true,\n        })\n      } else if (rejection.code === \"banned\") {\n        showBannedPage(rejection.detail)\n        modal.hide()\n      } else {\n        snackbar.error(rejection.detail)\n      }\n    } else if (rejection.status === 403 && rejection.ban) {\n      showBannedPage(rejection.ban)\n      modal.hide()\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  getActivationButton() {\n    if (!this.state.showActivation) return null\n\n    return (\n      <a\n        className=\"btn btn-success btn-block\"\n        href={misago.get(\"REQUEST_ACTIVATION_URL\")}\n      >\n        {gettext(\"Activate account\")}\n      </a>\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"modal-dialog modal-sm modal-sign-in\" role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              aria-label={pgettext(\"modal\", \"Close\")}\n              className=\"close\"\n              data-dismiss=\"modal\"\n              type=\"button\"\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Sign in\")}</h4>\n          </div>\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"modal-body\">\n              <StartSocialAuth\n                buttonLabel={gettext(\"Sign in with %(site)s\")}\n                formLabel={gettext(\"Or use your forum account:\")}\n                labelClassName=\"text-center\"\n              />\n\n              <div className=\"form-group\">\n                <div className=\"control-input\">\n                  <input\n                    className=\"form-control input-lg\"\n                    disabled={this.state.isLoading}\n                    id=\"id_username\"\n                    onChange={this.bindInput(\"username\")}\n                    placeholder={gettext(\"Username or e-mail\")}\n                    type=\"text\"\n                    value={this.state.username}\n                  />\n                </div>\n              </div>\n\n              <div className=\"form-group\">\n                <div className=\"control-input\">\n                  <input\n                    className=\"form-control input-lg\"\n                    disabled={this.state.isLoading}\n                    id=\"id_password\"\n                    onChange={this.bindInput(\"password\")}\n                    placeholder={gettext(\"Password\")}\n                    type=\"password\"\n                    value={this.state.password}\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"modal-footer\">\n              {this.getActivationButton()}\n              <Button\n                className=\"btn-primary btn-block\"\n                loading={this.state.isLoading}\n              >\n                {gettext(\"Sign in\")}\n              </Button>\n              <a\n                className=\"btn btn-default btn-block\"\n                href={misago.get(\"FORGOTTEN_PASSWORD_URL\")}\n              >\n                {gettext(\"Forgot password?\")}\n              </a>\n            </div>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  getClass() {\n    return getStatusClassName(this.props.status)\n  }\n\n  render() {\n    return <span className={this.getClass()}>{this.props.children}</span>\n  }\n}\n\nexport class StatusIcon extends React.Component {\n  getIcon() {\n    if (this.props.status.is_banned) {\n      return \"remove_circle_outline\"\n    } else if (this.props.status.is_hidden) {\n      return \"help_outline\"\n    } else if (this.props.status.is_online_hidden) {\n      return \"label\"\n    } else if (this.props.status.is_offline_hidden) {\n      return \"label_outline\"\n    } else if (this.props.status.is_online) {\n      return \"lens\"\n    } else if (this.props.status.is_offline) {\n      return \"panorama_fish_eye\"\n    }\n  }\n\n  render() {\n    return <span className=\"material-icon status-icon\">{this.getIcon()}</span>\n  }\n}\n\nexport class StatusLabel extends React.Component {\n  getHelp() {\n    return getStatusDescription(this.props.user, this.props.status)\n  }\n\n  getLabel() {\n    if (this.props.status.is_banned) {\n      return gettext(\"Banned\")\n    } else if (this.props.status.is_hidden) {\n      return gettext(\"Hidden\")\n    } else if (this.props.status.is_online_hidden) {\n      return gettext(\"Online (hidden)\")\n    } else if (this.props.status.is_offline_hidden) {\n      return gettext(\"Offline (hidden)\")\n    } else if (this.props.status.is_online) {\n      return gettext(\"Online\")\n    } else if (this.props.status.is_offline) {\n      return gettext(\"Offline\")\n    }\n  }\n\n  render() {\n    return (\n      <span\n        className={this.props.className || \"status-label\"}\n        title={this.getHelp()}\n      >\n        {this.getLabel()}\n      </span>\n    )\n  }\n}\n\nexport function getStatusClassName(status) {\n  let className = \"\"\n  if (status.is_banned) {\n    className = \"banned\"\n  } else if (status.is_hidden) {\n    className = \"offline\"\n  } else if (status.is_online_hidden) {\n    className = \"online\"\n  } else if (status.is_offline_hidden) {\n    className = \"offline\"\n  } else if (status.is_online) {\n    className = \"online\"\n  } else if (status.is_offline) {\n    className = \"offline\"\n  }\n\n  return \"user-status user-\" + className\n}\n\nexport function getStatusDescription(user, status) {\n  if (status.is_banned) {\n    if (status.banned_until) {\n      return interpolate(\n        gettext(\"%(username)s is banned until %(ban_expires)s\"),\n        {\n          username: user.username,\n          ban_expires: status.banned_until.format(\"LL, LT\"),\n        },\n        true\n      )\n    } else {\n      return interpolate(\n        gettext(\"%(username)s is banned\"),\n        {\n          username: user.username,\n        },\n        true\n      )\n    }\n  } else if (status.is_hidden) {\n    return interpolate(\n      gettext(\"%(username)s is hiding presence\"),\n      {\n        username: user.username,\n      },\n      true\n    )\n  } else if (status.is_online_hidden) {\n    return interpolate(\n      gettext(\"%(username)s is online (hidden)\"),\n      {\n        username: user.username,\n      },\n      true\n    )\n  } else if (status.is_offline_hidden) {\n    return interpolate(\n      gettext(\"%(username)s was last seen %(last_click)s (hidden)\"),\n      {\n        username: user.username,\n        last_click: status.last_click.fromNow(),\n      },\n      true\n    )\n  } else if (status.is_online) {\n    return interpolate(\n      gettext(\"%(username)s is online\"),\n      {\n        username: user.username,\n      },\n      true\n    )\n  } else if (status.is_offline) {\n    return interpolate(\n      gettext(\"%(username)s was last seen %(last_click)s\"),\n      {\n        username: user.username,\n        last_click: status.last_click.fromNow(),\n      },\n      true\n    )\n  }\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  getEmptyMessage() {\n    if (this.props.emptyMessage) {\n      return this.props.emptyMessage\n    } else {\n      return gettext(\"No name changes have been recorded for your account.\")\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"username-history ui-ready\">\n        <ul className=\"list-group\">\n          <li className=\"list-group-item empty-message\">\n            {this.getEmptyMessage()}\n          </li>\n        </ul>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\n\nexport default class extends React.Component {\n  renderUserAvatar() {\n    if (this.props.change.changed_by) {\n      return (\n        <a\n          href={this.props.change.changed_by.url}\n          className=\"user-avatar-wrapper\"\n        >\n          <Avatar user={this.props.change.changed_by} size=\"100\" />\n        </a>\n      )\n    } else {\n      return (\n        <span className=\"user-avatar-wrapper\">\n          <Avatar size=\"100\" />\n        </span>\n      )\n    }\n  }\n\n  renderUsername() {\n    if (this.props.change.changed_by) {\n      return (\n        <a href={this.props.change.changed_by.url} className=\"item-title\">\n          {this.props.change.changed_by.username}\n        </a>\n      )\n    } else {\n      return (\n        <span className=\"item-title\">\n          {this.props.change.changed_by_username}\n        </span>\n      )\n    }\n  }\n\n  render() {\n    return (\n      <li className=\"list-group-item\" key={this.props.change.id}>\n        <div className=\"change-avatar\">{this.renderUserAvatar()}</div>\n        <div className=\"change-author\">{this.renderUsername()}</div>\n        <div className=\"change\">\n          <span className=\"old-username\">{this.props.change.old_username}</span>\n          <span className=\"material-icon\">arrow_forward</span>\n          <span className=\"new-username\">{this.props.change.new_username}</span>\n        </div>\n        <div className=\"change-date\">\n          <abbr title={this.props.change.changed_on.format(\"LLL\")}>\n            {this.props.change.changed_on.fromNow()}\n          </abbr>\n        </div>\n      </li>\n    )\n  }\n}\n","import React from \"react\"\nimport Change from \"misago/components/username-history/change\"\n\nexport default class extends React.Component {\n  render() {\n    return (\n      <div className=\"username-history ui-ready\">\n        <ul className=\"list-group\">\n          {this.props.changes.map((change) => {\n            return <Change change={change} key={change.id} />\n          })}\n        </ul>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport * as random from \"misago/utils/random\"\n\nexport default class extends React.Component {\n  shouldComponentUpdate() {\n    return false\n  }\n\n  getClassName() {\n    if (this.props.hiddenOnMobile) {\n      return \"list-group-item hidden-xs hidden-sm\"\n    } else {\n      return \"list-group-item\"\n    }\n  }\n\n  render() {\n    return (\n      <li className={this.getClassName()}>\n        <div className=\"change-avatar\">\n          <span className=\"user-avatar\">\n            <Avatar size=\"100\" />\n          </span>\n        </div>\n        <div className=\"change-author\">\n          <span\n            className=\"ui-preview-text\"\n            style={{ width: random.int(30, 100) + \"px\" }}\n          >\n            &nbsp;\n          </span>\n        </div>\n        <div className=\"change\">\n          <span\n            className=\"ui-preview-text\"\n            style={{ width: random.int(30, 70) + \"px\" }}\n          >\n            &nbsp;\n          </span>\n          <span className=\"material-icon\">arrow_forward</span>\n          <span\n            className=\"ui-preview-text\"\n            style={{ width: random.int(30, 70) + \"px\" }}\n          >\n            &nbsp;\n          </span>\n        </div>\n        <div className=\"change-date\">\n          <span\n            className=\"ui-preview-text\"\n            style={{ width: random.int(80, 140) + \"px\" }}\n          >\n            &nbsp;\n          </span>\n        </div>\n      </li>\n    )\n  }\n}\n","import React from \"react\"\nimport ChangePreview from \"misago/components/username-history/change-preview\"\n\nexport default class extends React.Component {\n  shouldComponentUpdate() {\n    return false\n  }\n\n  render() {\n    return (\n      <div className=\"username-history ui-preview\">\n        <ul className=\"list-group\">\n          {[0, 1, 2].map((i) => {\n            return <ChangePreview hiddenOnMobile={i > 0} key={i} />\n          })}\n        </ul>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport ListEmpty from \"misago/components/username-history/list-empty\"\nimport ListReady from \"misago/components/username-history/list-ready\"\nimport ListPreview from \"misago/components/username-history/list-preview\"\n\nexport default class extends React.Component {\n  render() {\n    if (this.props.isLoaded) {\n      if (this.props.changes.length) {\n        return <ListReady changes={this.props.changes} />\n      } else {\n        return <ListEmpty emptyMessage={this.props.emptyMessage} />\n      }\n    } else {\n      return <ListPreview />\n    }\n  }\n}\n","import React from \"react\"\nimport UserStatus, { StatusLabel } from \"misago/components/user-status\"\n\nexport default function ({ showStatus, user }) {\n  return (\n    <ul className=\"list-unstyled\">\n      <Status showStatus={showStatus} user={user} />\n      <JoinDate user={user} />\n      <li className=\"user-stat-divider\" />\n      <Posts user={user} />\n      <Threads user={user} />\n      <Followers user={user} />\n    </ul>\n  )\n}\n\nexport function Status({ showStatus, user }) {\n  if (!showStatus) return null\n\n  return (\n    <li className=\"user-stat-status\">\n      <UserStatus status={user.status}>\n        <StatusLabel status={user.status} user={user} />\n      </UserStatus>\n    </li>\n  )\n}\n\nexport function JoinDate({ user }) {\n  const { joined_on } = user\n\n  let title = interpolate(\n    gettext(\"Joined on %(joined_on)s\"),\n    {\n      joined_on: joined_on.format(\"LL, LT\"),\n    },\n    true\n  )\n\n  let message = interpolate(\n    gettext(\"Joined %(joined_on)s\"),\n    {\n      joined_on: joined_on.fromNow(),\n    },\n    true\n  )\n\n  return (\n    <li className=\"user-stat-join-date\">\n      <abbr title={title}>{message}</abbr>\n    </li>\n  )\n}\n\nexport function Posts({ user }) {\n  const className = getStatClassName(\"user-stat-posts\", user.posts)\n  const message = ngettext(\"%(posts)s post\", \"%(posts)s posts\", user.posts)\n\n  return (\n    <li className={className}>\n      {interpolate(\n        message,\n        {\n          posts: user.posts,\n        },\n        true\n      )}\n    </li>\n  )\n}\n\nexport function Threads({ user }) {\n  const className = getStatClassName(\"user-stat-threads\", user.threads)\n  const message = ngettext(\n    \"%(threads)s thread\",\n    \"%(threads)s threads\",\n    user.threads\n  )\n\n  return (\n    <li className={className}>\n      {interpolate(\n        message,\n        {\n          threads: user.threads,\n        },\n        true\n      )}\n    </li>\n  )\n}\n\nexport function Followers({ user }) {\n  const className = getStatClassName(\"user-stat-followers\", user.followers)\n  const message = ngettext(\n    \"%(followers)s follower\",\n    \"%(followers)s followers\",\n    user.followers\n  )\n\n  return (\n    <li className={className}>\n      {interpolate(\n        message,\n        {\n          followers: user.followers,\n        },\n        true\n      )}\n    </li>\n  )\n}\n\nexport function getStatClassName(className, stat) {\n  if (stat === 0) {\n    return className + \" user-stat-empty\"\n  }\n  return className\n}\n","import React from \"react\"\n\nexport default function ({ rank, title }) {\n  let userTitle = title || rank.title || rank.name\n\n  let className = \"user-title\"\n  if (rank.css_class) {\n    className += \" user-title-\" + rank.css_class\n  }\n\n  if (rank.is_tab) {\n    return (\n      <a className={className} href={rank.url}>\n        {userTitle}\n      </a>\n    )\n  }\n\n  return <span className={className}>{userTitle}</span>\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport Stats from \"./stats\"\nimport UserTitle from \"./user-title\"\n\nexport default function ({ showStatus, user }) {\n  const { rank } = user\n\n  let className = \"panel user-card\"\n  if (rank.css_class) {\n    className += \" user-card-\" + rank.css_class\n  }\n\n  return (\n    <div className={className}>\n      <div className=\"panel-body\">\n        <div className=\"row\">\n          <div className=\"col-xs-3 user-card-left\">\n            <div className=\"user-card-small-avatar\">\n              <a href={user.url}>\n                <Avatar size=\"50\" size2x=\"80\" user={user} />\n              </a>\n            </div>\n          </div>\n          <div className=\"col-xs-9 col-sm-12 user-card-body\">\n            <div className=\"user-card-avatar\">\n              <a href={user.url}>\n                <Avatar size=\"150\" size2x=\"200\" user={user} />\n              </a>\n            </div>\n\n            <div className=\"user-card-username\">\n              <a href={user.url}>{user.username}</a>\n            </div>\n            <div className=\"user-card-title\">\n              <UserTitle rank={rank} title={user.title} />\n            </div>\n\n            <div className=\"user-card-stats\">\n              <Stats showStatus={showStatus} user={user} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport * as random from \"misago/utils/random\"\n\nexport default class extends React.Component {\n  shouldComponentUpdate() {\n    return false\n  }\n\n  render() {\n    return (\n      <div className=\"panel user-card user-card-preview\">\n        <div className=\"panel-body\">\n          <div className=\"row\">\n            <div className=\"col-xs-3 user-card-left\">\n              <div className=\"user-card-small-avatar\">\n                <span>\n                  <Avatar size=\"50\" size2x=\"80\" />\n                </span>\n              </div>\n            </div>\n            <div className=\"col-xs-9 col-sm-12 user-card-body\">\n              <div className=\"user-card-avatar\">\n                <span>\n                  <Avatar size=\"150\" size2x=\"200\" />\n                </span>\n              </div>\n\n              <div className=\"user-card-username\">\n                <span\n                  className=\"ui-preview-text\"\n                  style={{ width: random.int(60, 150) + \"px\" }}\n                >\n                  &nbsp;\n                </span>\n              </div>\n              <div className=\"user-card-title\">\n                <span\n                  className=\"ui-preview-text\"\n                  style={{ width: random.int(60, 150) + \"px\" }}\n                >\n                  &nbsp;\n                </span>\n              </div>\n\n              <div className=\"user-card-stats\">\n                <ul className=\"list-unstyled\">\n                  <li>\n                    <span\n                      className=\"ui-preview-text\"\n                      style={{ width: random.int(30, 70) + \"px\" }}\n                    >\n                      &nbsp;\n                    </span>\n                  </li>\n                  <li>\n                    <span\n                      className=\"ui-preview-text\"\n                      style={{ width: random.int(30, 70) + \"px\" }}\n                    >\n                      &nbsp;\n                    </span>\n                  </li>\n                  <li className=\"user-stat-divider\" />\n                  <li>\n                    <span\n                      className=\"ui-preview-text\"\n                      style={{ width: random.int(30, 70) + \"px\" }}\n                    >\n                      &nbsp;\n                    </span>\n                  </li>\n                  <li>\n                    <span\n                      className=\"ui-preview-text\"\n                      style={{ width: random.int(30, 70) + \"px\" }}\n                    >\n                      &nbsp;\n                    </span>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Card from \"./card\"\n\nexport default function ({ colClassName, cols }) {\n  const list = Array.apply(null, { length: cols }).map(Number.call, Number)\n\n  return (\n    <div className=\"users-cards-list ui-preview\">\n      <div className=\"row\">\n        {list.map((i) => {\n          let className = colClassName\n          if (i !== 0) className += \" hidden-xs\"\n          if (i === 3) className += \" hidden-sm\"\n\n          return (\n            <div className={className} key={i}>\n              <Card />\n            </div>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Card from \"./card\"\nimport Preview from \"./preview\"\n\nexport default function ({ cols, isReady, showStatus, users }) {\n  let colClassName = \"col-xs-12 col-sm-4\"\n  if (cols === 4) {\n    colClassName += \" col-md-3\"\n  }\n\n  if (!isReady) {\n    return <Preview colClassName={colClassName} cols={cols} />\n  }\n\n  return (\n    <div className=\"users-cards-list ui-ready\">\n      <div className=\"row\">\n        {users.map((user) => {\n          return (\n            <div className={colClassName} key={user.id}>\n              <Card showStatus={showStatus} user={user} />\n            </div>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      dropdown: false,\n    }\n  }\n\n  toggleNav = () => {\n    this.setState({\n      dropdown: !this.state.dropdown,\n    })\n  }\n\n  hideNav = () => {\n    this.setState({\n      dropdown: false,\n    })\n  }\n\n  getCompactNavClassName() {\n    if (this.state.dropdown) {\n      return \"compact-nav open\"\n    } else {\n      return \"compact-nav\"\n    }\n  }\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  getClassName() {\n    if (this.props.value) {\n      return \"btn btn-yes-no btn-yes-no-on\"\n    } else {\n      return \"btn btn-yes-no btn-yes-no-off\"\n    }\n  }\n\n  getIcon() {\n    if (!!this.props.value) {\n      return this.props.iconOn || \"check_box\"\n    } else {\n      return this.props.iconOff || \"check_box_outline_blank\"\n    }\n  }\n\n  getLabel() {\n    if (!!this.props.value) {\n      return this.props.labelOn || gettext(\"yes\")\n    } else {\n      return this.props.labelOff || gettext(\"no\")\n    }\n  }\n\n  toggle = () => {\n    this.props.onChange({\n      target: {\n        value: !this.props.value,\n      },\n    })\n  }\n\n  render() {\n    return (\n      <button\n        type=\"button\"\n        onClick={this.toggle}\n        className={this.getClassName()}\n        id={this.props.id || null}\n        aria-describedby={this.props[\"aria-describedby\"] || null}\n        disabled={this.props.disabled || false}\n      >\n        <span className=\"material-icon\">{this.getIcon()}</span>\n        <span className=\"btn-text\">{this.getLabel()}</span>\n      </button>\n    )\n  }\n}\n","class OrderedList {\n  constructor(items) {\n    this.isOrdered = false\n    this._items = items || []\n  }\n\n  add(key, item, order) {\n    this._items.push({\n      key: key,\n      item: item,\n\n      after: order ? order.after || null : null,\n      before: order ? order.before || null : null,\n    })\n  }\n\n  get(key, value) {\n    for (var i = 0; i < this._items.length; i++) {\n      if (this._items[i].key === key) {\n        return this._items[i].item\n      }\n    }\n\n    return value\n  }\n\n  has(key) {\n    return this.get(key) !== undefined\n  }\n\n  values() {\n    var values = []\n    for (var i = 0; i < this._items.length; i++) {\n      values.push(this._items[i].item)\n    }\n    return values\n  }\n\n  order(values_only) {\n    if (!this.isOrdered) {\n      this._items = this._order(this._items)\n      this.isOrdered = true\n    }\n\n    if (values_only || typeof values_only === \"undefined\") {\n      return this.values()\n    } else {\n      return this._items\n    }\n  }\n\n  orderedValues() {\n    return this.order(true)\n  }\n\n  _order(unordered) {\n    // Index of unordered items\n    var index = []\n    unordered.forEach(function (item) {\n      index.push(item.key)\n    })\n\n    // Ordered items\n    var ordered = []\n    var ordering = []\n\n    // First pass: register items that\n    // don't specify their order\n    unordered.forEach(function (item) {\n      if (!item.after && !item.before) {\n        ordered.push(item)\n        ordering.push(item.key)\n      }\n    })\n\n    // Second pass: register items that\n    // specify their before to \"_end\"\n    unordered.forEach(function (item) {\n      if (item.before === \"_end\") {\n        ordered.push(item)\n        ordering.push(item.key)\n      }\n    })\n\n    // Third pass: keep iterating items\n    // until we hit iterations limit or finish\n    // ordering list\n    function insertItem(item) {\n      var insertAt = -1\n      if (ordering.indexOf(item.key) === -1) {\n        if (item.after) {\n          insertAt = ordering.indexOf(item.after)\n          if (insertAt !== -1) {\n            insertAt += 1\n          }\n        } else if (item.before) {\n          insertAt = ordering.indexOf(item.before)\n        }\n\n        if (insertAt !== -1) {\n          ordered.splice(insertAt, 0, item)\n          ordering.splice(insertAt, 0, item.key)\n        }\n      }\n    }\n\n    var iterations = 200\n    while (iterations > 0 && index.length !== ordering.length) {\n      iterations -= 1\n      unordered.forEach(insertItem)\n    }\n\n    return ordered\n  }\n}\n\nexport default OrderedList\n","import \"bootstrap/js/transition\"\nimport \"bootstrap/js/affix\"\nimport \"bootstrap/js/modal\"\nimport \"bootstrap/js/dropdown\"\nimport \"at-js\"\nimport \"cropit\"\nimport \"waypoints\"\nimport \"jquery-caret\"\nimport OrderedList from \"misago/utils/ordered-list\"\nimport \"misago/style/index.less\"\n\nexport class Misago {\n  constructor() {\n    this._initializers = []\n    this._context = {}\n  }\n\n  addInitializer(initializer) {\n    this._initializers.push({\n      key: initializer.name,\n\n      item: initializer.initializer,\n\n      after: initializer.after,\n      before: initializer.before,\n    })\n  }\n\n  init(context) {\n    this._context = context\n\n    var initOrder = new OrderedList(this._initializers).orderedValues()\n    initOrder.forEach((initializer) => {\n      initializer(this)\n    })\n  }\n\n  // context accessors\n  has(key) {\n    return !!this._context[key]\n  }\n\n  get(key, fallback) {\n    if (this.has(key)) {\n      return this._context[key]\n    } else {\n      return fallback || undefined\n    }\n  }\n\n  pop(key) {\n    if (this.has(key)) {\n      let value = this._context[key]\n      this._context[key] = null\n      return value\n    } else {\n      return undefined\n    }\n  }\n}\n\n// create  singleton\nvar misago = new Misago()\n\n// expose it globally\nwindow.misago = misago\n\n// and export it for tests and stuff\nexport default misago\n","import misago from \"misago/index\"\nimport ajax from \"misago/services/ajax\"\n\nexport default function initializer() {\n  ajax.init(misago.get(\"CSRF_COOKIE_NAME\"))\n}\n\nmisago.addInitializer({\n  name: \"ajax\",\n  initializer: initializer,\n})\n","import misago from \"misago/index\"\nimport { patch } from \"misago/reducers/auth\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nconst AUTH_SYNC_RATE = 45 // sync user with backend every 45 seconds\n\nexport default function initializer(context) {\n  if (context.get(\"isAuthenticated\")) {\n    window.setInterval(function () {\n      ajax.get(context.get(\"AUTH_API\")).then(\n        function (data) {\n          store.dispatch(patch(data))\n        },\n        function (rejection) {\n          snackbar.apiError(rejection)\n        }\n      )\n    }, AUTH_SYNC_RATE * 1000)\n  }\n}\n\nmisago.addInitializer({\n  name: \"auth-sync\",\n  initializer: initializer,\n  after: \"auth\",\n})\n","import misago from \"misago/index\"\nimport auth from \"misago/services/auth\"\nimport modal from \"misago/services/modal\"\nimport store from \"misago/services/store\"\nimport storage from \"misago/services/local-storage\"\n\nexport default function initializer() {\n  auth.init(store, storage, modal)\n}\n\nmisago.addInitializer({\n  name: \"auth\",\n  initializer: initializer,\n  after: \"store\",\n})\n","import misago from \"misago/index\"\nimport ajax from \"misago/services/ajax\"\nimport captcha from \"misago/services/captcha\"\nimport include from \"misago/services/include\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default function initializer(context) {\n  captcha.init(context, ajax, include, snackbar)\n}\n\nmisago.addInitializer({\n  name: \"captcha\",\n  initializer: initializer,\n})\n","import React from \"react\"\nimport ajax from \"misago/services/ajax\"\n\nexport default class AcceptAgreement extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = { submiting: false }\n  }\n\n  handleDecline = () => {\n    if (this.state.submiting) return\n\n    const confirmation = window.confirm(\n      gettext(\n        \"Declining will result in immediate deactivation and deletion of your account. This action is not reversible.\"\n      )\n    )\n    if (!confirmation) return\n\n    this.setState({ submiting: true })\n\n    ajax.post(this.props.api, { accept: false }).then(() => {\n      window.location.reload(true)\n    })\n  }\n\n  handleAccept = () => {\n    if (this.state.submiting) return\n\n    this.setState({ submiting: true })\n\n    ajax.post(this.props.api, { accept: true }).then(() => {\n      window.location.reload(true)\n    })\n  }\n\n  render() {\n    return (\n      <div>\n        <button\n          className=\"btn btn-default\"\n          disabled={this.state.submiting}\n          type=\"buton\"\n          onClick={this.handleDecline}\n        >\n          {gettext(\"Decline\")}\n        </button>\n        <button\n          className=\"btn btn-primary\"\n          disabled={this.state.submiting}\n          type=\"buton\"\n          onClick={this.handleAccept}\n        >\n          {gettext(\"Accept and continue\")}\n        </button>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport misago from \"misago/index\"\nimport AcceptAgreement from \"misago/components/accept-agreement\"\nimport mount from \"misago/utils/mount-component\"\n\nexport default function initializer(context) {\n  if (document.getElementById(\"required-agreement-mount\")) {\n    mount(\n      <AcceptAgreement api={context.get(\"REQUIRED_AGREEMENT_API\")} />,\n      \"required-agreement-mount\",\n      false\n    )\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:accept-agreement\",\n  initializer: initializer,\n  after: \"store\",\n})\n","import React from \"react\"\n\nexport default class extends React.Component {\n  refresh() {\n    window.location.reload()\n  }\n\n  getMessage() {\n    if (this.props.signedIn) {\n      return interpolate(\n        gettext(\n          \"You have signed in as %(username)s. Please refresh the page before continuing.\"\n        ),\n        { username: this.props.signedIn.username },\n        true\n      )\n    } else if (this.props.signedOut) {\n      return interpolate(\n        gettext(\n          \"%(username)s, you have been signed out. Please refresh the page before continuing.\"\n        ),\n        { username: this.props.user.username },\n        true\n      )\n    }\n  }\n\n  render() {\n    let className = \"auth-message\"\n    if (this.props.signedIn || this.props.signedOut) {\n      className += \" show\"\n    }\n\n    return (\n      <div className={className}>\n        <div className=\"container\">\n          <p className=\"lead\">{this.getMessage()}</p>\n          <p>\n            <button\n              className=\"btn btn-default\"\n              type=\"button\"\n              onClick={this.refresh}\n            >\n              {gettext(\"Reload page\")}\n            </button>\n            <span className=\"hidden-xs hidden-sm\">\n              {\" \" + gettext(\"or press F5 key.\")}\n            </span>\n          </p>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport function select(state) {\n  return {\n    user: state.auth.user,\n    signedIn: state.auth.signedIn,\n    signedOut: state.auth.signedOut,\n  }\n}\n","import { connect } from \"react-redux\"\nimport misago from \"misago/index\"\nimport AuthMessage, { select } from \"misago/components/auth-message\"\nimport mount from \"misago/utils/mount-component\"\n\nexport default function initializer() {\n  mount(connect(select)(AuthMessage), \"auth-message-mount\")\n}\n\nmisago.addInitializer({\n  name: \"component:auth-message\",\n  initializer: initializer,\n  after: \"store\",\n})\n","import misago from \"misago/index\"\nimport showBannedPage from \"misago/utils/banned-page\"\n\nexport default function initializer(context) {\n  if (context.has(\"BAN_MESSAGE\")) {\n    showBannedPage(context.get(\"BAN_MESSAGE\"), false)\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:banmed-page\",\n  initializer: initializer,\n  after: \"store\",\n})\n","import React from \"react\"\n\nexport default function (props) {\n  return (\n    <div className=\"categories-list\">\n      <ul className=\"list-group\">\n        <li className=\"list-group-item empty-message\">\n          <p className=\"lead\">\n            {gettext(\n              \"No categories exist or you don't have permission to see them.\"\n            )}\n          </p>\n        </li>\n      </ul>\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport default function ({ category }) {\n  if (!category.description) return null\n\n  return (\n    <div\n      className=\"category-description\"\n      dangerouslySetInnerHTML={{\n        __html: category.description.html,\n      }}\n    />\n  )\n}\n","import React from \"react\"\n\nexport default function ({ category }) {\n  return (\n    <div className={getClassName(category)} title={getTitle(category)}>\n      <span className=\"material-icon\">{getIcon(category)}</span>\n    </div>\n  )\n}\n\nexport function getClassName(category) {\n  if (category.is_read) {\n    return \"read-status item-read\"\n  }\n\n  return \"read-status item-new\"\n}\n\nexport function getTitle(category) {\n  if (category.is_closed) {\n    if (category.is_read) {\n      return gettext(\"This category has no new posts. (closed)\")\n    }\n\n    return gettext(\"This category has new posts. (closed)\")\n  }\n\n  if (category.is_read) {\n    return gettext(\"This category has no new posts.\")\n  }\n\n  return gettext(\"This category has new posts.\")\n}\n\nexport function getIcon(category) {\n  if (category.is_closed) {\n    if (category.is_read) {\n      return \"lock_outline\"\n    }\n\n    return \"lock\"\n  }\n\n  if (category.is_read) {\n    return \"chat_bubble_outline\"\n  }\n\n  return \"chat_bubble\"\n}\n","import React from \"react\"\nimport Description from \"./description\"\nimport Icon from \"./icon\"\n\nexport default function ({ category }) {\n  return (\n    <div className=\"col-xs-12 col-sm-6 col-md-6 category-main\">\n      <div className=\"media\">\n        <div className=\"media-left\">\n          <Icon category={category} />\n        </div>\n        <div className=\"media-body\">\n          <h4 className=\"media-heading\">\n            <a href={category.url.index}>{category.name}</a>\n          </h4>\n          <Description category={category} />\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\n\nexport default function ({ category }) {\n  return (\n    <div className=\"col-xs-12 col-sm-6 col-md-4 category-last-thread\">\n      <LastThread category={category} />\n      <Empty category={category} />\n      <Private category={category} />\n      <Protected category={category} />\n    </div>\n  )\n}\n\nexport function LastThread({ category }) {\n  if (!category.acl.can_browse) return null\n  if (!category.acl.can_see_all_threads) return null\n  if (!category.last_thread_title) return null\n\n  return (\n    <div className=\"media\">\n      <div className=\"media-left hidden-xs\">\n        <LastPosterAvatar category={category} />\n      </div>\n      <div className=\"media-body\">\n        <div className=\"media-heading\">\n          <a\n            className=\"item-title thread-title\"\n            href={category.url.last_thread_new}\n            title={category.last_thread_title}\n          >\n            {category.last_thread_title}\n          </a>\n        </div>\n        <ul className=\"list-inline\">\n          <li className=\"category-last-thread-poster\">\n            <LastPosterName category={category} />\n          </li>\n          <li className=\"divider\">&#8212;</li>\n          <li className=\"category-last-thread-date\">\n            <a href={category.url.last_post}>\n              {category.last_post_on.fromNow()}\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  )\n}\n\nexport function LastPosterAvatar({ category }) {\n  if (category.last_poster) {\n    return (\n      <a\n        className=\"last-poster-avatar\"\n        href={category.last_poster.url}\n        title={category.last_poster_name}\n      >\n        <Avatar\n          className=\"media-object\"\n          size={40}\n          user={category.last_poster}\n        />\n      </a>\n    )\n  }\n\n  return (\n    <span className=\"last-poster-avatar\" title={category.last_poster_name}>\n      <Avatar className=\"media-object\" size={40} />\n    </span>\n  )\n}\n\nexport function LastPosterName({ category }) {\n  if (category.last_poster) {\n    return (\n      <a className=\"item-title\" href={category.last_poster.url}>\n        {category.last_poster_name}\n      </a>\n    )\n  }\n\n  return <span className=\"item-title\">{category.last_poster_name}</span>\n}\n\nexport function Empty({ category }) {\n  if (!category.acl.can_browse) return null\n  if (!category.acl.can_see_all_threads) return null\n  if (category.last_thread_title) return null\n\n  return (\n    <Message\n      message={gettext(\n        \"This category is empty. No threads were posted within it so far.\"\n      )}\n    />\n  )\n}\n\nexport function Private({ category }) {\n  if (!category.acl.can_browse) return null\n  if (category.acl.can_see_all_threads) return null\n\n  return (\n    <Message\n      message={gettext(\n        \"This category is private. You can see only your own threads within it.\"\n      )}\n    />\n  )\n}\n\nexport function Protected({ category }) {\n  if (category.acl.can_browse) return null\n\n  return (\n    <Message\n      message={gettext(\n        \"This category is protected. You can't browse its contents.\"\n      )}\n    />\n  )\n}\n\nexport function Message({ message }) {\n  return (\n    <div className=\"media category-thread-message\">\n      <div className=\"media-left\">\n        <span className=\"material-icon\">info_outline</span>\n      </div>\n      <div className=\"media-body\">\n        <p>{message}</p>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\n\nexport default function ({ category }) {\n  return (\n    <div className=\"col-md-2 hidden-xs hidden-sm\">\n      <ul className=\"list-unstyled category-stats\">\n        <Threads threads={category.threads} />\n        <Posts posts={category.posts} />\n      </ul>\n    </div>\n  )\n}\n\nexport function Threads({ threads }) {\n  const message = ngettext(\"%(threads)s thread\", \"%(threads)s threads\", threads)\n\n  return (\n    <li className=\"category-stat-threads\">\n      {interpolate(\n        message,\n        {\n          threads: threads,\n        },\n        true\n      )}\n    </li>\n  )\n}\n\nexport function Posts({ posts }) {\n  const message = ngettext(\"%(posts)s post\", \"%(posts)s posts\", posts)\n\n  return (\n    <li className=\"category-stat-posts\">\n      {interpolate(\n        message,\n        {\n          posts: posts,\n        },\n        true\n      )}\n    </li>\n  )\n}\n","import React from \"react\"\n\nexport default function ({ category }) {\n  let className = \"btn btn-default btn-block btn-sm btn-subcategory\"\n  if (!category.is_read) {\n    className += \" btn-subcategory-new\"\n  }\n\n  return (\n    <div className=\"col-xs-12 col-sm-4 col-md-3\">\n      <a className={className} href={category.url.index}>\n        <span className=\"material-icon\">{getIcon(category)}</span>\n        <span className=\"icon-text\">{category.name}</span>\n      </a>\n    </div>\n  )\n}\n\nexport function getIcon(category) {\n  if (category.is_closed) {\n    if (category.is_read) {\n      return \"lock_outline\"\n    }\n\n    return \"lock\"\n  }\n\n  if (category.is_read) {\n    return \"chat_bubble_outline\"\n  }\n\n  return \"chat_bubble\"\n}\n","import React from \"react\"\nimport ListItem from \"./list-item\"\n\nexport default function ({ category, isFirst }) {\n  if (isFirst) return null\n  if (category.subcategories.length === 0) return null\n\n  return (\n    <div className=\"row subcategories-list\">\n      {category.subcategories.map((category) => {\n        return <ListItem category={category} key={category.id} />\n      })}\n    </div>\n  )\n}\n","import React from \"react\"\nimport Main from \"./main\"\nimport LastThread from \"./last-thread\"\nimport Stats from \"./stats\"\nimport Subcategories from \"./subcategories\"\n\nexport default function ({ category, isFirst }) {\n  let className = \"list-group-item\"\n\n  if (category.description) {\n    className += \" list-group-category-has-description\"\n  } else {\n    className += \" list-group-category-no-description\"\n  }\n\n  if (isFirst) {\n    className += \" list-group-item-first\"\n  }\n  if (category.css_class) {\n    className += \" list-group-category-has-flavor\"\n    className += \" list-group-item-category-\" + category.css_class\n  }\n\n  return (\n    <li className={className}>\n      <div className=\"row\">\n        <Main category={category} />\n        <Stats category={category} />\n        <LastThread category={category} />\n      </div>\n      <Subcategories category={category} isFirst={isFirst} />\n    </li>\n  )\n}\n","import React from \"react\"\nimport ListItem from \"./list-item\"\n\nexport default function ({ category }) {\n  let className = \"list-group list-group-category\"\n  if (category.css_class) {\n    className += \" list-group-category-has-flavor\"\n    className += \" list-group-category-\" + category.css_class\n  }\n\n  return (\n    <ul className={className}>\n      <ListItem category={category} isFirst={true} />\n      {category.subcategories.map((category) => {\n        return (\n          <ListItem category={category} isFirst={false} key={category.id} />\n        )\n      })}\n    </ul>\n  )\n}\n","import React from \"react\"\nimport Category from \"./category\"\n\nexport default function ({ categories }) {\n  return (\n    <div className=\"categories-list\">\n      {categories.map((category) => {\n        return <Category category={category} key={category.id} />\n      })}\n    </div>\n  )\n}\n","import moment from \"moment\"\nimport React from \"react\"\nimport Blankslate from \"./blankslate\"\nimport CategoriesList from \"./categories-list\"\nimport misago from \"misago/index\"\nimport polls from \"misago/services/polls\"\n\nconst hydrate = function (category) {\n  return Object.assign({}, category, {\n    last_post_on: category.last_post_on ? moment(category.last_post_on) : null,\n    subcategories: category.subcategories.map(hydrate),\n  })\n}\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      categories: misago.get(\"CATEGORIES\").map(hydrate),\n    }\n\n    this.startPolling(misago.get(\"CATEGORIES_API\"))\n  }\n\n  startPolling(api) {\n    polls.start({\n      poll: \"categories\",\n      url: api,\n      frequency: 180 * 1000,\n      update: this.update,\n    })\n  }\n\n  update = (data) => {\n    this.setState({\n      categories: data.map(hydrate),\n    })\n  }\n\n  render() {\n    const { categories } = this.state\n\n    if (categories.length === 0) {\n      return <Blankslate />\n    }\n\n    return <CategoriesList categories={categories} />\n  }\n}\n\nexport function select(store) {\n  return {\n    tick: store.tick.tick,\n  }\n}\n","import { connect } from \"react-redux\"\nimport Categories, { select } from \"misago/components/categories\"\nimport misago from \"misago/index\"\nimport mount from \"misago/utils/mount-component\"\n\nexport default function initializer() {\n  if (document.getElementById(\"categories-mount\")) {\n    mount(connect(select)(Categories), \"categories-mount\")\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:categories\",\n  initializer: initializer,\n  after: \"store\",\n})\n","import React from \"react\"\nimport { Link } from \"react-router\"\nimport Li from \"misago/components/li\"\n\nexport function SideNav(props) {\n  return (\n    <div className=\"list-group nav-side\">\n      {props.options.map((option) => {\n        return (\n          <Link\n            to={props.baseUrl + option.component + \"/\"}\n            className=\"list-group-item\"\n            activeClassName=\"active\"\n            key={option.component}\n          >\n            <span className=\"material-icon\">{option.icon}</span>\n            {option.name}\n          </Link>\n        )\n      })}\n    </div>\n  )\n}\n\nexport function CompactNav(props) {\n  return (\n    <ul className={props.className || \"dropdown-menu\"} role=\"menu\">\n      {props.options.map((option) => {\n        return (\n          <Li\n            path={props.baseUrl + option.component + \"/\"}\n            key={option.component}\n          >\n            <Link\n              to={props.baseUrl + option.component + \"/\"}\n              onClick={props.hideNav}\n            >\n              <span className=\"material-icon hidden-sm\">{option.icon}</span>\n              {option.name}\n            </Link>\n          </Li>\n        )\n      })}\n    </ul>\n  )\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport ajax from \"misago/services/ajax\"\nimport title from \"misago/services/page-title\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport misago from \"misago\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n      password: \"\",\n    }\n  }\n\n  componentDidMount() {\n    title.set({\n      title: gettext(\"Delete account\"),\n      parent: gettext(\"Change your options\"),\n    })\n  }\n\n  onPasswordChange = (event) => {\n    this.setState({ password: event.target.value })\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault()\n\n    const { isLoading, password } = this.state\n    const { user } = this.props\n\n    if (password.length == 0) {\n      snackbar.error(\n        gettext(\"Enter your password to confirm account deletion.\")\n      )\n      return false\n    }\n\n    if (isLoading) return false\n    this.setState({ isLoading: true })\n\n    ajax.post(user.api.delete, { password }).then(\n      (success) => {\n        window.location.href = misago.get(\"MISAGO_PATH\")\n      },\n      (rejection) => {\n        this.setState({ isLoading: false })\n        if (rejection.password) {\n          snackbar.error(rejection.password[0])\n        } else {\n          snackbar.apiError(rejection)\n        }\n      }\n    )\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"panel panel-danger panel-form\">\n          <div className=\"panel-heading\">\n            <h3 className=\"panel-title\">{gettext(\"Delete account\")}</h3>\n          </div>\n          <div className=\"panel-body\">\n            <p className=\"lead\">\n              {gettext(\n                \"You are going to delete your account. This action is nonreversible, and will result in following data being deleted:\"\n              )}\n            </p>\n\n            <p>\n              -{\" \"}\n              {gettext(\n                \"Stored IP addresses associated with content that you have posted will be deleted.\"\n              )}\n            </p>\n            <p>\n              -{\" \"}\n              {gettext(\n                \"Your username will become available for other user to rename to or for new user to register their account with.\"\n              )}\n            </p>\n            <p>\n              -{\" \"}\n              {gettext(\n                \"Your e-mail will become available for use in new account registration.\"\n              )}\n            </p>\n\n            <hr />\n\n            <p>\n              {gettext(\n                \"All your posted content will NOT be deleted, but username associated with it will be changed to one shared by all deleted accounts.\"\n              )}\n            </p>\n          </div>\n          <div className=\"panel-footer\">\n            <div className=\"input-group\">\n              <input\n                className=\"form-control\"\n                disabled={this.state.isLoading}\n                name=\"password-confirmation\"\n                type=\"password\"\n                placeholder={gettext(\n                  \"Enter your password to confirm account deletion.\"\n                )}\n                value={this.state.password}\n                onChange={this.onPasswordChange}\n              />\n              <span className=\"input-group-btn\">\n                <Button className=\"btn-danger\" loading={this.state.isLoading}>\n                  {gettext(\"Delete my account\")}\n                </Button>\n              </span>\n            </div>\n          </div>\n        </div>\n      </form>\n    )\n  }\n}\n","import React from \"react\"\nimport Form from \"misago/components/edit-details\"\nimport title from \"misago/services/page-title\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends React.Component {\n  componentDidMount() {\n    title.set({\n      title: gettext(\"Edit details\"),\n      parent: gettext(\"Change your options\"),\n    })\n  }\n\n  onSuccess = () => {\n    snackbar.info(gettext(\"Your details have been updated.\"))\n  }\n\n  render() {\n    return (\n      <Form api={this.props.user.api.edit_details} onSuccess={this.onSuccess} />\n    )\n  }\n}\n","import React from \"react\"\nimport moment from \"moment\"\nimport Button from \"misago/components/button\"\nimport ajax from \"misago/services/ajax\"\nimport title from \"misago/services/page-title\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class DownloadData extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n      isSubmiting: false,\n      downloads: [],\n    }\n  }\n\n  componentDidMount() {\n    title.set({\n      title: gettext(\"Download your data\"),\n      parent: gettext(\"Change your options\"),\n    })\n\n    this.handleLoadDownloads()\n  }\n\n  handleLoadDownloads = () => {\n    ajax.get(this.props.user.api.data_downloads).then(\n      (data) => {\n        this.setState({\n          isLoading: false,\n          downloads: data,\n        })\n      },\n      (rejection) => {\n        snackbar.apiError(rejection)\n      }\n    )\n  }\n\n  handleRequestDataDownload = () => {\n    this.setState({ isSubmiting: true })\n    ajax.post(this.props.user.api.request_data_download).then(\n      () => {\n        this.handleLoadDownloads()\n        snackbar.success(\n          gettext(\"Your request for data download has been registered.\")\n        )\n        this.setState({ isSubmiting: false })\n      },\n      (rejection) => {\n        snackbar.apiError(rejection)\n        this.setState({ isSubmiting: false })\n      }\n    )\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"panel panel-default panel-form\">\n          <div className=\"panel-heading\">\n            <h3 className=\"panel-title\">{gettext(\"Download your data\")}</h3>\n          </div>\n          <div className=\"panel-body\">\n            <p>\n              {gettext(\n                'To download your data from the site, click the \"Request data download\" button. Depending on amount of data to be archived and number of users wanting to download their data at same time it may take up to few days for your download to be prepared. An e-mail with notification will be sent to you when your data is ready to be downloaded.'\n              )}\n            </p>\n\n            <p>\n              {gettext(\n                \"The download will only be available for limited amount of time, after which it will be deleted from the site and marked as expired.\"\n              )}\n            </p>\n          </div>\n          <table className=\"table\">\n            <thead>\n              <tr>\n                <th>{gettext(\"Requested on\")}</th>\n                <th className=\"col-md-4\">{gettext(\"Download\")}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.downloads.map((item) => {\n                return (\n                  <tr key={item.id}>\n                    <td style={rowStyle}>\n                      {moment(item.requested_on).fromNow()}\n                    </td>\n                    <td>\n                      <DownloadButton\n                        exportFile={item.file}\n                        status={item.status}\n                      />\n                    </td>\n                  </tr>\n                )\n              })}\n              {this.state.downloads.length == 0 ? (\n                <tr>\n                  <td colSpan=\"2\">{gettext(\"You have no data downloads.\")}</td>\n                </tr>\n              ) : null}\n            </tbody>\n          </table>\n          <div className=\"panel-footer text-right\">\n            <Button\n              className=\"btn-primary\"\n              loading={this.state.isSubmiting}\n              type=\"button\"\n              onClick={this.handleRequestDataDownload}\n            >\n              {gettext(\"Request data download\")}\n            </Button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst rowStyle = {\n  verticalAlign: \"middle\",\n}\n\nconst STATUS_PENDING = 0\nconst STATUS_PROCESSING = 1\n\nconst DownloadButton = ({ exportFile, status }) => {\n  if (status === STATUS_PENDING || status === STATUS_PROCESSING) {\n    return (\n      <Button\n        className=\"btn-info btn-sm btn-block\"\n        disabled={true}\n        type=\"button\"\n      >\n        {gettext(\"Download is being prepared\")}\n      </Button>\n    )\n  }\n\n  if (exportFile) {\n    return (\n      <a className=\"btn btn-success btn-sm btn-block\" href={exportFile}>\n        {gettext(\"Download your data\")}\n      </a>\n    )\n  }\n\n  return (\n    <Button\n      className=\"btn-default btn-sm btn-block\"\n      disabled={true}\n      type=\"button\"\n    >\n      {gettext(\"Download is expired\")}\n    </Button>\n  )\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport Select from \"misago/components/select\"\nimport YesNoSwitch from \"misago/components/yes-no-switch\"\nimport { patch } from \"misago/reducers/auth\"\nimport ajax from \"misago/services/ajax\"\nimport title from \"misago/services/page-title\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      is_hiding_presence: props.user.is_hiding_presence,\n      limits_private_thread_invites_to:\n        props.user.limits_private_thread_invites_to,\n      subscribe_to_started_threads: props.user.subscribe_to_started_threads,\n      subscribe_to_replied_threads: props.user.subscribe_to_replied_threads,\n\n      errors: {},\n    }\n\n    this.privateThreadInvitesChoices = [\n      {\n        value: 0,\n        icon: \"help_outline\",\n        label: gettext(\"Everybody\"),\n      },\n      {\n        value: 1,\n        icon: \"done_all\",\n        label: gettext(\"Users I follow\"),\n      },\n      {\n        value: 2,\n        icon: \"highlight_off\",\n        label: gettext(\"Nobody\"),\n      },\n    ]\n\n    this.subscribeToChoices = [\n      {\n        value: 0,\n        icon: \"star_border\",\n        label: gettext(\"No\"),\n      },\n      {\n        value: 1,\n        icon: \"star_half\",\n        label: gettext(\"Notify\"),\n      },\n      {\n        value: 2,\n        icon: \"star\",\n        label: gettext(\"Notify with e-mail\"),\n      },\n    ]\n  }\n\n  send() {\n    return ajax.post(this.props.user.api.options, {\n      is_hiding_presence: this.state.is_hiding_presence,\n      limits_private_thread_invites_to:\n        this.state.limits_private_thread_invites_to,\n      subscribe_to_started_threads: this.state.subscribe_to_started_threads,\n      subscribe_to_replied_threads: this.state.subscribe_to_replied_threads,\n    })\n  }\n\n  handleSuccess() {\n    store.dispatch(\n      patch({\n        is_hiding_presence: this.state.is_hiding_presence,\n        limits_private_thread_invites_to:\n          this.state.limits_private_thread_invites_to,\n        subscribe_to_started_threads: this.state.subscribe_to_started_threads,\n        subscribe_to_replied_threads: this.state.subscribe_to_replied_threads,\n      })\n    )\n    snackbar.success(gettext(\"Your forum options have been changed.\"))\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      snackbar.error(gettext(\"Please reload page and try again.\"))\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  componentDidMount() {\n    title.set({\n      title: gettext(\"Forum options\"),\n      parent: gettext(\"Change your options\"),\n    })\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"panel panel-default panel-form\">\n          <div className=\"panel-heading\">\n            <h3 className=\"panel-title\">{gettext(\"Change forum options\")}</h3>\n          </div>\n          <div className=\"panel-body\">\n            <fieldset>\n              <legend>{gettext(\"Privacy settings\")}</legend>\n\n              <FormGroup\n                label={gettext(\"Hide my presence\")}\n                helpText={gettext(\n                  \"If you hide your presence, only members with permission to see hidden users will see when you are online.\"\n                )}\n                for=\"id_is_hiding_presence\"\n              >\n                <YesNoSwitch\n                  id=\"id_is_hiding_presence\"\n                  disabled={this.state.isLoading}\n                  iconOn=\"visibility_off\"\n                  iconOff=\"visibility\"\n                  labelOn={gettext(\"Hide my presence from other users\")}\n                  labelOff={gettext(\"Show my presence to other users\")}\n                  onChange={this.bindInput(\"is_hiding_presence\")}\n                  value={this.state.is_hiding_presence}\n                />\n              </FormGroup>\n\n              <FormGroup\n                label={gettext(\"Private thread invitations\")}\n                for=\"id_limits_private_thread_invites_to\"\n              >\n                <Select\n                  id=\"id_limits_private_thread_invites_to\"\n                  disabled={this.state.isLoading}\n                  onChange={this.bindInput(\"limits_private_thread_invites_to\")}\n                  value={this.state.limits_private_thread_invites_to}\n                  choices={this.privateThreadInvitesChoices}\n                />\n              </FormGroup>\n            </fieldset>\n\n            <fieldset>\n              <legend>{gettext(\"Automatic subscriptions\")}</legend>\n\n              <FormGroup\n                label={gettext(\"Threads I start\")}\n                for=\"id_subscribe_to_started_threads\"\n              >\n                <Select\n                  id=\"id_subscribe_to_started_threads\"\n                  disabled={this.state.isLoading}\n                  onChange={this.bindInput(\"subscribe_to_started_threads\")}\n                  value={this.state.subscribe_to_started_threads}\n                  choices={this.subscribeToChoices}\n                />\n              </FormGroup>\n\n              <FormGroup\n                label={gettext(\"Threads I reply to\")}\n                for=\"id_subscribe_to_replied_threads\"\n              >\n                <Select\n                  id=\"id_subscribe_to_replied_threads\"\n                  disabled={this.state.isLoading}\n                  onChange={this.bindInput(\"subscribe_to_replied_threads\")}\n                  value={this.state.subscribe_to_replied_threads}\n                  choices={this.subscribeToChoices}\n                />\n              </FormGroup>\n            </fieldset>\n          </div>\n          <div className=\"panel-footer\">\n            <Button className=\"btn-primary\" loading={this.state.isLoading}>\n              {gettext(\"Save changes\")}\n            </Button>\n          </div>\n        </div>\n      </form>\n    )\n  }\n}\n","import React from \"react\"\nimport PanelLoader from \"misago/components/panel-loader\"\n\nexport default function () {\n  return (\n    <div className=\"panel panel-default panel-form\">\n      <div className=\"panel-heading\">\n        <h3 className=\"panel-title\">{gettext(\"Change username\")}</h3>\n      </div>\n      <PanelLoader />\n    </div>\n  )\n}\n","import React from \"react\"\nimport PanelMessage from \"misago/components/panel-message\"\n\nexport default class extends React.Component {\n  getHelpText() {\n    if (this.props.options.next_on) {\n      return interpolate(\n        gettext(\"You will be able to change your username %(next_change)s.\"),\n        { next_change: this.props.options.next_on.fromNow() },\n        true\n      )\n    } else {\n      return gettext(\"You have used up available name changes.\")\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"panel panel-default panel-form\">\n        <div className=\"panel-heading\">\n          <h3 className=\"panel-title\">{gettext(\"Change username\")}</h3>\n        </div>\n        <PanelMessage\n          helpText={this.getHelpText()}\n          message={gettext(\"You can't change your username at the moment.\")}\n        />\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport * as validators from \"misago/utils/validators\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      username: \"\",\n\n      validators: {\n        username: [\n          validators.usernameContent(),\n          validators.usernameMinLength(props.options.length_min),\n          validators.usernameMaxLength(props.options.length_max),\n        ],\n      },\n\n      isLoading: false,\n    }\n  }\n\n  getHelpText() {\n    let phrases = []\n\n    if (this.props.options.changes_left > 0) {\n      let message = ngettext(\n        \"You can change your username %(changes_left)s more time.\",\n        \"You can change your username %(changes_left)s more times.\",\n        this.props.options.changes_left\n      )\n\n      phrases.push(\n        interpolate(\n          message,\n          {\n            changes_left: this.props.options.changes_left,\n          },\n          true\n        )\n      )\n    }\n\n    if (this.props.user.acl.name_changes_expire > 0) {\n      let message = ngettext(\n        \"Used changes become available again after %(name_changes_expire)s day.\",\n        \"Used changes become available again after %(name_changes_expire)s days.\",\n        this.props.user.acl.name_changes_expire\n      )\n\n      phrases.push(\n        interpolate(\n          message,\n          {\n            name_changes_expire: this.props.user.acl.name_changes_expire,\n          },\n          true\n        )\n      )\n    }\n\n    return phrases.length ? phrases.join(\" \") : null\n  }\n\n  clean() {\n    let errors = this.validate()\n    if (errors.username) {\n      snackbar.error(errors.username[0])\n      return false\n    }\n    if (this.state.username.trim() === this.props.user.username) {\n      snackbar.info(gettext(\"Your new username is same as current one.\"))\n      return false\n    } else {\n      return true\n    }\n  }\n\n  send() {\n    return ajax.post(this.props.user.api.username, {\n      username: this.state.username,\n    })\n  }\n\n  handleSuccess(success) {\n    this.setState({\n      username: \"\",\n    })\n\n    this.props.complete(success.username, success.slug, success.options)\n  }\n\n  handleError(rejection) {\n    snackbar.apiError(rejection)\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"panel panel-default panel-form\">\n          <div className=\"panel-heading\">\n            <h3 className=\"panel-title\">{gettext(\"Change username\")}</h3>\n          </div>\n          <div className=\"panel-body\">\n            <FormGroup\n              label={gettext(\"New username\")}\n              for=\"id_username\"\n              helpText={this.getHelpText()}\n            >\n              <input\n                type=\"text\"\n                id=\"id_username\"\n                className=\"form-control\"\n                disabled={this.state.isLoading}\n                onChange={this.bindInput(\"username\")}\n                value={this.state.username}\n              />\n            </FormGroup>\n          </div>\n          <div className=\"panel-footer\">\n            <Button className=\"btn-primary\" loading={this.state.isLoading}>\n              {gettext(\"Change username\")}\n            </Button>\n          </div>\n        </div>\n      </form>\n    )\n  }\n}\n","import moment from \"moment\"\nimport React from \"react\"\nimport FormLoading from \"misago/components/options/change-username/form-loading\"\nimport FormLocked from \"misago/components/options/change-username/form-locked\"\nimport Form from \"misago/components/options/change-username/form\"\nimport UsernameHistory from \"misago/components/username-history/root\"\nimport misago from \"misago/index\"\nimport { hydrate, addNameChange } from \"misago/reducers/username-history\"\nimport { updateUsername } from \"misago/reducers/users\"\nimport ajax from \"misago/services/ajax\"\nimport title from \"misago/services/page-title\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoaded: false,\n      options: null,\n    }\n  }\n\n  componentDidMount() {\n    title.set({\n      title: gettext(\"Change username\"),\n      parent: gettext(\"Change your options\"),\n    })\n\n    Promise.all([\n      ajax.get(this.props.user.api.username),\n      ajax.get(misago.get(\"USERNAME_CHANGES_API\"), {\n        user: this.props.user.id,\n      }),\n    ]).then((data) => {\n      store.dispatch(hydrate(data[1].results))\n\n      this.setState({\n        isLoaded: true,\n        options: {\n          changes_left: data[0].changes_left,\n          length_min: data[0].length_min,\n          length_max: data[0].length_max,\n          next_on: data[0].next_on ? moment(data[0].next_on) : null,\n        },\n      })\n    })\n  }\n\n  onComplete = (username, slug, options) => {\n    this.setState({\n      options,\n    })\n\n    store.dispatch(\n      addNameChange({ username, slug }, this.props.user, this.props.user)\n    )\n    store.dispatch(updateUsername(this.props.user, username, slug))\n\n    snackbar.success(gettext(\"Your username has been changed successfully.\"))\n  }\n\n  getChangeForm() {\n    if (!this.state.isLoaded) {\n      return <FormLoading />\n    }\n\n    if (this.state.options.changes_left === 0) {\n      return <FormLocked options={this.state.options} />\n    }\n\n    return (\n      <Form\n        complete={this.onComplete}\n        options={this.state.options}\n        user={this.props.user}\n      />\n    )\n  }\n\n  render() {\n    return (\n      <div>\n        {this.getChangeForm()}\n        <UsernameHistory\n          changes={this.props[\"username-history\"]}\n          isLoaded={this.state.isLoaded}\n        />\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport * as validators from \"misago/utils/validators\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      new_email: \"\",\n      password: \"\",\n\n      validators: {\n        new_email: [validators.email()],\n        password: [],\n      },\n\n      isLoading: false,\n    }\n  }\n\n  clean() {\n    let errors = this.validate()\n    let lengths = [\n      this.state.new_email.trim().length,\n      this.state.password.trim().length,\n    ]\n\n    if (lengths.indexOf(0) !== -1) {\n      snackbar.error(gettext(\"Fill out all fields.\"))\n      return false\n    }\n\n    if (errors.new_email) {\n      snackbar.error(errors.new_email[0])\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    return ajax.post(this.props.user.api.change_email, {\n      new_email: this.state.new_email,\n      password: this.state.password,\n    })\n  }\n\n  handleSuccess(response) {\n    this.setState({\n      new_email: \"\",\n      password: \"\",\n    })\n\n    snackbar.success(response.detail)\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      if (rejection.new_email) {\n        snackbar.error(rejection.new_email)\n      } else {\n        snackbar.error(rejection.password)\n      }\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <input type=\"type\" style={{ display: \"none\" }} />\n        <input type=\"password\" style={{ display: \"none\" }} />\n        <div className=\"panel panel-default panel-form\">\n          <div className=\"panel-heading\">\n            <h3 className=\"panel-title\">{gettext(\"Change e-mail address\")}</h3>\n          </div>\n          <div className=\"panel-body\">\n            <FormGroup label={gettext(\"New e-mail\")} for=\"id_new_email\">\n              <input\n                type=\"text\"\n                id=\"id_new_email\"\n                className=\"form-control\"\n                disabled={this.state.isLoading}\n                onChange={this.bindInput(\"new_email\")}\n                value={this.state.new_email}\n              />\n            </FormGroup>\n\n            <hr />\n\n            <FormGroup\n              label={gettext(\"Your current password\")}\n              for=\"id_confirm_email\"\n            >\n              <input\n                type=\"password\"\n                id=\"id_confirm_email\"\n                className=\"form-control\"\n                disabled={this.state.isLoading}\n                onChange={this.bindInput(\"password\")}\n                value={this.state.password}\n              />\n            </FormGroup>\n          </div>\n          <div className=\"panel-footer\">\n            <Button className=\"btn-primary\" loading={this.state.isLoading}>\n              {gettext(\"Change e-mail\")}\n            </Button>\n          </div>\n        </div>\n      </form>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      new_password: \"\",\n      repeat_password: \"\",\n      password: \"\",\n\n      validators: {\n        new_password: [],\n        repeat_password: [],\n        password: [],\n      },\n\n      isLoading: false,\n    }\n  }\n\n  clean() {\n    let errors = this.validate()\n    let lengths = [\n      this.state.new_password.trim().length,\n      this.state.repeat_password.trim().length,\n      this.state.password.trim().length,\n    ]\n\n    if (lengths.indexOf(0) !== -1) {\n      snackbar.error(gettext(\"Fill out all fields.\"))\n      return false\n    }\n\n    if (errors.new_password) {\n      snackbar.error(errors.new_password[0])\n      return false\n    }\n\n    if (this.state.new_password !== this.state.repeat_password) {\n      snackbar.error(gettext(\"New passwords are different.\"))\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    return ajax.post(this.props.user.api.change_password, {\n      new_password: this.state.new_password,\n      password: this.state.password,\n    })\n  }\n\n  handleSuccess(response) {\n    this.setState({\n      new_password: \"\",\n      repeat_password: \"\",\n      password: \"\",\n    })\n\n    snackbar.success(response.detail)\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      if (rejection.new_password) {\n        snackbar.error(rejection.new_password)\n      } else {\n        snackbar.error(rejection.password)\n      }\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <input type=\"type\" style={{ display: \"none\" }} />\n        <input type=\"password\" style={{ display: \"none\" }} />\n        <div className=\"panel panel-default panel-form\">\n          <div className=\"panel-heading\">\n            <h3 className=\"panel-title\">{gettext(\"Change password\")}</h3>\n          </div>\n          <div className=\"panel-body\">\n            <FormGroup label={gettext(\"New password\")} for=\"id_new_password\">\n              <input\n                type=\"password\"\n                id=\"id_new_password\"\n                className=\"form-control\"\n                disabled={this.state.isLoading}\n                onChange={this.bindInput(\"new_password\")}\n                value={this.state.new_password}\n              />\n            </FormGroup>\n\n            <FormGroup\n              label={gettext(\"Repeat password\")}\n              for=\"id_repeat_password\"\n            >\n              <input\n                type=\"password\"\n                id=\"id_repeat_password\"\n                className=\"form-control\"\n                disabled={this.state.isLoading}\n                onChange={this.bindInput(\"repeat_password\")}\n                value={this.state.repeat_password}\n              />\n            </FormGroup>\n\n            <hr />\n\n            <FormGroup\n              label={gettext(\"Your current password\")}\n              for=\"id_confirm_password\"\n            >\n              <input\n                type=\"password\"\n                id=\"id_confirm_password\"\n                className=\"form-control\"\n                disabled={this.state.isLoading}\n                onChange={this.bindInput(\"password\")}\n                value={this.state.password}\n              />\n            </FormGroup>\n          </div>\n          <div className=\"panel-footer\">\n            <Button className=\"btn-primary\" loading={this.state.isLoading}>\n              {gettext(\"Change password\")}\n            </Button>\n          </div>\n        </div>\n      </form>\n    )\n  }\n}\n","import React from \"react\"\nimport misago from \"misago/index\"\n\nconst UnusablePasswordMessage = () => {\n  return (\n    <div className=\"panel panel-default panel-form\">\n      <div className=\"panel-heading\">\n        <h3 className=\"panel-title\">{gettext(\"Change email or password\")}</h3>\n      </div>\n      <div className=\"panel-body panel-message-body\">\n        <div className=\"message-icon\">\n          <span className=\"material-icon\">info_outline</span>\n        </div>\n        <div className=\"message-body\">\n          <p className=\"lead\">\n            {gettext(\n              \"You need to set a password for your account to be able to change your username or email.\"\n            )}\n          </p>\n          <p className=\"help-block\">\n            <a\n              className=\"btn btn-primary\"\n              href={misago.get(\"FORGOTTEN_PASSWORD_URL\")}\n            >\n              {gettext(\"Set password\")}\n            </a>\n          </p>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default UnusablePasswordMessage\n","import React from \"react\"\nimport ChangeEmail from \"misago/components/options/sign-in-credentials/change-email\"\nimport ChangePassword from \"misago/components/options/sign-in-credentials/change-password\"\nimport misago from \"misago/index\"\nimport title from \"misago/services/page-title\"\nimport UnusablePasswordMessage from \"./UnusablePasswordMessage\"\n\nexport default class extends React.Component {\n  componentDidMount() {\n    title.set({\n      title: gettext(\"Change email or password\"),\n      parent: gettext(\"Change your options\"),\n    })\n  }\n\n  render() {\n    if (!this.props.user.has_usable_password) {\n      return <UnusablePasswordMessage />\n    }\n\n    return (\n      <div>\n        <ChangeEmail user={this.props.user} />\n        <ChangePassword user={this.props.user} />\n\n        <p className=\"message-line\">\n          <span className=\"material-icon\">warning</span>\n          <a href={misago.get(\"FORGOTTEN_PASSWORD_URL\")}>\n            {gettext(\"Change forgotten password\")}\n          </a>\n        </p>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport { connect } from \"react-redux\"\nimport { SideNav, CompactNav } from \"misago/components/options/navs\"\nimport DeleteAccount from \"misago/components/options/delete-account\"\nimport EditDetails from \"misago/components/options/edit-details\"\nimport DownloadData from \"misago/components/options/download-data\"\nimport ChangeForumOptions from \"misago/components/options/forum-options\"\nimport ChangeUsername from \"misago/components/options/change-username/root\"\nimport ChangeSignInCredentials from \"misago/components/options/sign-in-credentials/root\"\nimport WithDropdown from \"misago/components/with-dropdown\"\nimport misago from \"misago/index\"\nimport { FlexRow, FlexRowCol, FlexRowSection } from \"../FlexRow\"\nimport PageContainer from \"../PageContainer\"\nimport {\n  PageHeader,\n  PageHeaderBanner,\n  PageHeaderContainer,\n} from \"../PageHeader\"\n\nexport default class extends WithDropdown {\n  render() {\n    const page = misago.get(\"USER_OPTIONS\").filter((page) => {\n      const url = misago.get(\"USERCP_URL\") + page.component + \"/\"\n      return this.props.location.pathname.substr(0, url.length) === url\n    })[0]\n\n    return (\n      <div className=\"page page-options\">\n        <PageHeaderContainer>\n          <PageHeader styleName=\"options\">\n            <PageHeaderBanner styleName=\"options\">\n              <FlexRow>\n                <FlexRowSection auto>\n                  <FlexRowCol auto>\n                    <h1>{gettext(\"Change your options\")}</h1>\n                  </FlexRowCol>\n                  <FlexRowCol className=\"hidden-xs hidden-md hidden-lg\" shrink>\n                    <div className=\"dropdown\">\n                      <button\n                        type=\"button\"\n                        className=\"btn btn-default btn-outline btn-icon dropdown-toggle\"\n                        title={gettext(\"Menu\")}\n                        data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\"\n                        aria-expanded=\"false\"\n                      >\n                        <span className=\"material-icon\">menu</span>\n                      </button>\n                      <CompactNav\n                        className=\"dropdown-menu dropdown-menu-right\"\n                        baseUrl={misago.get(\"USERCP_URL\")}\n                        options={misago.get(\"USER_OPTIONS\")}\n                      />\n                    </div>\n                  </FlexRowCol>\n                </FlexRowSection>\n                <FlexRowSection className=\"hidden-sm hidden-md hidden-lg\">\n                  <FlexRowCol>\n                    <div className=\"dropdown\">\n                      <button\n                        type=\"button\"\n                        className=\"btn btn-default btn-outline btn-block dropdown-toggle\"\n                        data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\"\n                        aria-expanded=\"false\"\n                      >\n                        <span className=\"material-icon\">{page.icon}</span>\n                        {page.name}\n                      </button>\n                      <CompactNav\n                        className=\"dropdown-menu\"\n                        baseUrl={misago.get(\"USERCP_URL\")}\n                        options={misago.get(\"USER_OPTIONS\")}\n                      />\n                    </div>\n                  </FlexRowCol>\n                </FlexRowSection>\n              </FlexRow>\n            </PageHeaderBanner>\n          </PageHeader>\n        </PageHeaderContainer>\n        <PageContainer>\n          <div className=\"row\">\n            <div className=\"col-md-3 hidden-xs hidden-sm\">\n              <SideNav\n                baseUrl={misago.get(\"USERCP_URL\")}\n                options={misago.get(\"USER_OPTIONS\")}\n              />\n            </div>\n            <div className=\"col-md-9\">{this.props.children}</div>\n          </div>\n        </PageContainer>\n      </div>\n    )\n  }\n}\n\nexport function select(store) {\n  return {\n    tick: store.tick.tick,\n    user: store.auth.user,\n    \"username-history\": store[\"username-history\"],\n  }\n}\n\nexport function paths() {\n  const paths = [\n    {\n      path: misago.get(\"USERCP_URL\") + \"forum-options/\",\n      component: connect(select)(ChangeForumOptions),\n    },\n    {\n      path: misago.get(\"USERCP_URL\") + \"edit-details/\",\n      component: connect(select)(EditDetails),\n    },\n  ]\n\n  const delegateAuth = misago.get(\"SETTINGS\").DELEGATE_AUTH\n  if (!delegateAuth) {\n    paths.push({\n      path: misago.get(\"USERCP_URL\") + \"change-username/\",\n      component: connect(select)(ChangeUsername),\n    })\n    paths.push({\n      path: misago.get(\"USERCP_URL\") + \"sign-in-credentials/\",\n      component: connect(select)(ChangeSignInCredentials),\n    })\n  }\n\n  if (misago.get(\"ENABLE_DOWNLOAD_OWN_DATA\")) {\n    paths.push({\n      path: misago.get(\"USERCP_URL\") + \"download-data/\",\n      component: connect(select)(DownloadData),\n    })\n  }\n\n  if (!delegateAuth && misago.get(\"ENABLE_DELETE_OWN_ACCOUNT\")) {\n    paths.push({\n      path: misago.get(\"USERCP_URL\") + \"delete-account/\",\n      component: connect(select)(DeleteAccount),\n    })\n  }\n\n  return paths\n}\n","import Options, { paths } from \"misago/components/options/root\"\nimport misago from \"misago/index\"\nimport mount from \"misago/utils/routed-component\"\n\nexport default function initializer(context) {\n  if (context.has(\"USER_OPTIONS\")) {\n    mount({\n      root: misago.get(\"USERCP_URL\"),\n      component: Options,\n      paths: paths(),\n    })\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:options\",\n  initializer: initializer,\n  after: \"store\",\n})\n","import moment from \"moment\"\nimport React from \"react\"\nimport PanelLoader from \"misago/components/panel-loader\"\nimport PanelMessage from \"misago/components/panel-message\"\nimport misago from \"misago/index\"\nimport polls from \"misago/services/polls\"\nimport title from \"misago/services/page-title\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    if (misago.has(\"PROFILE_BAN\")) {\n      this.initWithPreloadedData(misago.pop(\"PROFILE_BAN\"))\n    } else {\n      this.initWithoutPreloadedData()\n    }\n\n    this.startPolling(props.profile.api.ban)\n  }\n\n  initWithPreloadedData(ban) {\n    if (ban.expires_on) {\n      ban.expires_on = moment(ban.expires_on)\n    }\n\n    this.state = {\n      isLoaded: true,\n      ban,\n    }\n  }\n\n  initWithoutPreloadedData() {\n    this.state = {\n      isLoaded: false,\n    }\n  }\n\n  startPolling(api) {\n    polls.start({\n      poll: \"ban-details\",\n      url: api,\n      frequency: 90 * 1000,\n      update: this.update,\n      error: this.error,\n    })\n  }\n\n  update = (ban) => {\n    if (ban.expires_on) {\n      ban.expires_on = moment(ban.expires_on)\n    }\n\n    this.setState({\n      isLoaded: true,\n      error: null,\n\n      ban,\n    })\n  }\n\n  error = (error) => {\n    this.setState({\n      isLoaded: true,\n      error: error.detail,\n      ban: null,\n    })\n  }\n\n  componentDidMount() {\n    title.set({\n      title: gettext(\"Ban details\"),\n      parent: this.props.profile.username,\n    })\n  }\n\n  componentWillUnmount() {\n    polls.stop(\"ban-details\")\n  }\n\n  getUserMessage() {\n    if (this.state.ban.user_message) {\n      return (\n        <div className=\"panel-body ban-message ban-user-message\">\n          <h4>{gettext(\"User-shown ban message\")}</h4>\n          <div\n            className=\"lead\"\n            dangerouslySetInnerHTML={{\n              __html: this.state.ban.user_message.html,\n            }}\n          />\n        </div>\n      )\n    } else {\n      return null\n    }\n  }\n\n  getStaffMessage() {\n    if (this.state.ban.staff_message) {\n      return (\n        <div className=\"panel-body ban-message ban-staff-message\">\n          <h4>{gettext(\"Team-shown ban message\")}</h4>\n          <div\n            className=\"lead\"\n            dangerouslySetInnerHTML={{\n              __html: this.state.ban.staff_message.html,\n            }}\n          />\n        </div>\n      )\n    } else {\n      return null\n    }\n  }\n\n  getExpirationMessage() {\n    if (this.state.ban.expires_on) {\n      if (this.state.ban.expires_on.isAfter(moment())) {\n        let title = interpolate(\n          gettext(\"This ban expires on %(expires_on)s.\"),\n          {\n            expires_on: this.state.ban.expires_on.format(\"LL, LT\"),\n          },\n          true\n        )\n\n        let message = interpolate(\n          gettext(\"This ban expires %(expires_on)s.\"),\n          {\n            expires_on: this.state.ban.expires_on.fromNow(),\n          },\n          true\n        )\n\n        return <abbr title={title}>{message}</abbr>\n      } else {\n        return gettext(\"This ban has expired.\")\n      }\n    } else {\n      return interpolate(\n        gettext(\"%(username)s's ban is permanent.\"),\n        {\n          username: this.props.profile.username,\n        },\n        true\n      )\n    }\n  }\n\n  getPanelBody() {\n    if (this.state.ban) {\n      if (Object.keys(this.state.ban).length) {\n        return (\n          <div>\n            {this.getUserMessage()}\n            {this.getStaffMessage()}\n\n            <div className=\"panel-body ban-expires\">\n              <h4>{gettext(\"Ban expiration\")}</h4>\n              <p className=\"lead\">{this.getExpirationMessage()}</p>\n            </div>\n          </div>\n        )\n      } else {\n        return (\n          <div>\n            <PanelMessage\n              message={gettext(\"No ban is active at the moment.\")}\n            />\n          </div>\n        )\n      }\n    } else if (this.state.error) {\n      return (\n        <div>\n          <PanelMessage icon=\"error_outline\" message={this.state.error} />\n        </div>\n      )\n    } else {\n      return (\n        <div>\n          <PanelLoader />\n        </div>\n      )\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"profile-ban-details\">\n        <div className=\"panel panel-default\">\n          <div className=\"panel-heading\">\n            <h3 className=\"panel-title\">{gettext(\"Ban details\")}</h3>\n          </div>\n\n          {this.getPanelBody()}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Form from \"misago/components/edit-details\"\n\nexport default function ({ api, display, onCancel, onSuccess }) {\n  if (!display) return null\n\n  return <Form api={api} onCancel={onCancel} onSuccess={onSuccess} />\n}\n","import React from \"react\"\n\nexport default function ({ isAuthenticated, profile }) {\n  let message = null\n  if (isAuthenticated) {\n    message = gettext(\"You are not sharing any details with others.\")\n  } else {\n    message = interpolate(\n      gettext(\"%(username)s is not sharing any details with others.\"),\n      {\n        username: profile.username,\n      },\n      true\n    )\n  }\n\n  return (\n    <div className=\"panel panel-default\">\n      <div className=\"panel-body text-center lead\">{message}</div>\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport default function ({ html, text, url }) {\n  if (html) {\n    return (\n      <div\n        className=\"form-control-static col-md-9\"\n        dangerouslySetInnerHTML={{ __html: html }}\n      />\n    )\n  }\n\n  return (\n    <div className=\"form-control-static col-md-9\">\n      <SafeValue text={text} url={url} />\n    </div>\n  )\n}\n\nexport function SafeValue({ text, url }) {\n  if (url) {\n    return (\n      <p>\n        <a href={url} target=\"_blank\" rel=\"nofollow\">\n          {text || url}\n        </a>\n      </p>\n    )\n  }\n\n  if (text) {\n    return <p>{text}</p>\n  }\n\n  return null\n}\n","import React from \"react\"\nimport FieldValue from \"./field-value\"\n\nexport default function (props) {\n  return (\n    <div className=\"form-group\">\n      <strong className=\"control-label col-md-3\">{props.name}:</strong>\n      <FieldValue {...props} />\n    </div>\n  )\n}\n","import React from \"react\"\nimport Field from \"./field\"\n\nexport default function ({ fields, name }) {\n  return (\n    <div className=\"panel panel-default panel-profile-details-group\">\n      <div className=\"panel-heading\">\n        <h3 className=\"panel-title\">{name}</h3>\n      </div>\n      <div className=\"panel-body\">\n        <div className=\"form-horizontal\">\n          {fields.map(({ fieldname, html, name, text, url }) => {\n            return (\n              <Field\n                key={fieldname}\n                name={name}\n                html={html}\n                text={text}\n                url={url}\n              />\n            )\n          })}\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport EmptyMessage from \"./empty-message\"\nimport Group from \"./group\"\nimport Loader from \"misago/components/loader\"\n\nexport default function ({\n  display,\n  groups,\n  isAuthenticated,\n  loading,\n  profile,\n}) {\n  if (!display) return null\n\n  if (loading) {\n    return <Loader />\n  }\n\n  if (!groups.length) {\n    return <EmptyMessage isAuthenticated={isAuthenticated} profile={profile} />\n  }\n\n  return (\n    <div>\n      {groups.map((group, i) => {\n        return <Group fields={group.fields} key={i} name={group.name} />\n      })}\n    </div>\n  )\n}\n","import React from \"react\"\nimport { Toolbar, ToolbarItem, ToolbarSection } from \"../../Toolbar\"\n\nconst ProfileDetailsHeader = ({ onEdit, showEditButton }) => (\n  <Toolbar>\n    <ToolbarSection auto>\n      <ToolbarItem auto>\n        <h3>{gettext(\"Details\")}</h3>\n      </ToolbarItem>\n    </ToolbarSection>\n    {showEditButton && (\n      <ToolbarSection>\n        <ToolbarItem>\n          <button\n            className=\"btn btn-default btn-outline btn-block\"\n            onClick={onEdit}\n            type=\"button\"\n          >\n            {gettext(\"Edit\")}\n          </button>\n        </ToolbarItem>\n      </ToolbarSection>\n    )}\n  </Toolbar>\n)\n\nexport default ProfileDetailsHeader\n","import React from \"react\"\nimport { load } from \"misago/reducers/profile-details\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends React.Component {\n  componentDidMount() {\n    const { data, dispatch, user } = this.props\n    if (data && data.id === user.id) return\n\n    ajax.get(this.props.user.api.details).then(\n      (data) => {\n        dispatch(load(data))\n      },\n      (rejection) => {\n        snackbar.apiError(rejection)\n      }\n    )\n  }\n\n  render() {\n    return this.props.children\n  }\n}\n","import React from \"react\"\nimport Form from \"./form\"\nimport GroupsList from \"./groups-list\"\nimport Header from \"./header\"\nimport ProfileDetailsData from \"misago/data/profile-details\"\nimport { load as loadDetails } from \"misago/reducers/profile-details\"\nimport title from \"misago/services/page-title\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      editing: false,\n    }\n  }\n\n  componentDidMount() {\n    title.set({\n      title: gettext(\"Details\"),\n      parent: this.props.profile.username,\n    })\n  }\n\n  onCancel = () => {\n    this.setState({ editing: false })\n  }\n\n  onEdit = () => {\n    this.setState({ editing: true })\n  }\n\n  onSuccess = (newDetails) => {\n    const { dispatch, isAuthenticated, profile } = this.props\n\n    let message = null\n    if (isAuthenticated) {\n      message = gettext(\"Your details have been updated.\")\n    } else {\n      message = interpolate(\n        gettext(\"%(username)s's details have been updated.\"),\n        {\n          username: profile.username,\n        },\n        true\n      )\n    }\n\n    snackbar.info(message)\n    dispatch(loadDetails(newDetails))\n    this.setState({ editing: false })\n  }\n\n  render() {\n    const { dispatch, isAuthenticated, profile, profileDetails } = this.props\n    const loading = profileDetails.id !== profile.id\n\n    return (\n      <ProfileDetailsData\n        data={profileDetails}\n        dispatch={dispatch}\n        user={profile}\n      >\n        <div className=\"profile-details\">\n          <Header\n            onEdit={this.onEdit}\n            showEditButton={!!profileDetails.edit && !this.state.editing}\n          />\n          <GroupsList\n            display={!this.state.editing}\n            groups={profileDetails.groups}\n            isAuthenticated={isAuthenticated}\n            loading={loading}\n            profile={profile}\n          />\n          <Form\n            api={profile.api.edit_details}\n            dispatch={dispatch}\n            display={this.state.editing}\n            onCancel={this.onCancel}\n            onSuccess={this.onSuccess}\n          />\n        </div>\n      </ProfileDetailsData>\n    )\n  }\n}\n","import React from \"react\"\nimport PostFeed from \"misago/components/post-feed\"\nimport Button from \"misago/components/button\"\nimport * as posts from \"misago/reducers/posts\"\nimport title from \"misago/services/page-title\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport { Toolbar, ToolbarItem, ToolbarSection } from \"../../Toolbar\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n    }\n  }\n\n  loadItems(start = 0) {\n    ajax\n      .get(this.props.api, {\n        start: start || 0,\n      })\n      .then(\n        (data) => {\n          if (start === 0) {\n            store.dispatch(posts.load(data))\n          } else {\n            store.dispatch(posts.append(data))\n          }\n\n          this.setState({\n            isLoading: false,\n          })\n        },\n        (rejection) => {\n          this.setState({\n            isLoading: false,\n          })\n\n          snackbar.apiError(rejection)\n        }\n      )\n  }\n\n  loadMore = () => {\n    this.setState({\n      isLoading: true,\n    })\n\n    this.loadItems(this.props.posts.next)\n  }\n\n  componentDidMount() {\n    title.set({\n      title: this.props.title,\n      parent: this.props.profile.username,\n    })\n\n    this.loadItems()\n  }\n\n  render() {\n    return (\n      <div className=\"profile-feed\">\n        <Toolbar>\n          <ToolbarSection auto>\n            <ToolbarItem auto>\n              <h3>{this.props.header}</h3>\n            </ToolbarItem>\n          </ToolbarSection>\n        </Toolbar>\n        <Feed\n          isLoading={this.state.isLoading}\n          loadMore={this.loadMore}\n          {...this.props}\n        />\n      </div>\n    )\n  }\n}\n\nexport function Feed(props) {\n  if (props.posts.isLoaded && !props.posts.results.length) {\n    return <p className=\"lead\">{props.emptyMessage}</p>\n  }\n\n  return (\n    <div>\n      <PostFeed\n        isReady={props.posts.isLoaded}\n        posts={props.posts.results}\n        poster={props.profile}\n      />\n      <LoadMoreButton\n        isLoading={props.isLoading}\n        loadMore={props.loadMore}\n        next={props.posts.next}\n      />\n    </div>\n  )\n}\n\nexport function LoadMoreButton(props) {\n  if (!props.next) return null\n\n  return (\n    <div className=\"pager-more\">\n      <Button\n        className=\"btn btn-default btn-outline\"\n        loading={props.isLoading}\n        onClick={props.loadMore}\n      >\n        {gettext(\"Show older activity\")}\n      </Button>\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  getClassName() {\n    if (this.props.className) {\n      return \"form-search \" + this.props.className\n    } else {\n      return \"form-search\"\n    }\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()}>\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          value={this.props.value}\n          onChange={this.props.onChange}\n          placeholder={this.props.placeholder || gettext(\"Search...\")}\n        />\n        <span className=\"material-icon\">search</span>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Search from \"misago/components/quick-search\"\nimport UsersList from \"misago/components/users-list\"\nimport misago from \"misago/index\"\nimport { hydrate, append } from \"misago/reducers/users\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport title from \"misago/services/page-title\"\nimport { Toolbar, ToolbarItem, ToolbarSection } from \"../Toolbar\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.setSpecialProps()\n\n    if (misago.has(this.PRELOADED_DATA_KEY)) {\n      this.initWithPreloadedData(misago.pop(this.PRELOADED_DATA_KEY))\n    } else {\n      this.initWithoutPreloadedData()\n    }\n  }\n\n  setSpecialProps() {\n    this.PRELOADED_DATA_KEY = \"PROFILE_FOLLOWERS\"\n    this.TITLE = gettext(\"Followers\")\n    this.API_FILTER = \"followers\"\n  }\n\n  initWithPreloadedData(data) {\n    this.state = {\n      isLoaded: true,\n      isBusy: false,\n\n      search: \"\",\n\n      count: data.count,\n      more: data.more,\n\n      page: data.page,\n      pages: data.pages,\n    }\n\n    store.dispatch(hydrate(data.results))\n  }\n\n  initWithoutPreloadedData() {\n    this.state = {\n      isLoaded: false,\n      isBusy: false,\n\n      search: \"\",\n\n      count: 0,\n      more: 0,\n\n      page: 1,\n      pages: 1,\n    }\n\n    this.loadUsers()\n  }\n\n  loadUsers(page = 1, search = null) {\n    const apiUrl = this.props.profile.api[this.API_FILTER]\n\n    ajax\n      .get(\n        apiUrl,\n        {\n          search: search,\n          page: page || 1,\n        },\n        \"user-\" + this.API_FILTER\n      )\n      .then(\n        (data) => {\n          if (page === 1) {\n            store.dispatch(hydrate(data.results))\n          } else {\n            store.dispatch(append(data.results))\n          }\n\n          this.setState({\n            isLoaded: true,\n            isBusy: false,\n\n            count: data.count,\n            more: data.more,\n\n            page: data.page,\n            pages: data.pages,\n          })\n        },\n        (rejection) => {\n          snackbar.apiError(rejection)\n        }\n      )\n  }\n\n  componentDidMount() {\n    title.set({\n      title: this.TITLE,\n      parent: this.props.profile.username,\n    })\n  }\n\n  loadMore = () => {\n    this.setState({\n      isBusy: true,\n    })\n\n    this.loadUsers(this.state.page + 1, this.state.search)\n  }\n\n  search = (ev) => {\n    this.setState({\n      isLoaded: false,\n      isBusy: true,\n\n      search: ev.target.value,\n\n      count: 0,\n      more: 0,\n\n      page: 1,\n      pages: 1,\n    })\n\n    this.loadUsers(1, ev.target.value)\n  }\n\n  getLabel() {\n    if (!this.state.isLoaded) {\n      return gettext(\"Loading...\")\n    } else if (this.state.search) {\n      let message = ngettext(\n        \"Found %(users)s user.\",\n        \"Found %(users)s users.\",\n        this.state.count\n      )\n\n      return interpolate(\n        message,\n        {\n          users: this.state.count,\n        },\n        true\n      )\n    } else if (this.props.profile.id === this.props.user.id) {\n      let message = ngettext(\n        \"You have %(users)s follower.\",\n        \"You have %(users)s followers.\",\n        this.state.count\n      )\n\n      return interpolate(\n        message,\n        {\n          users: this.state.count,\n        },\n        true\n      )\n    } else {\n      let message = ngettext(\n        \"%(username)s has %(users)s follower.\",\n        \"%(username)s has %(users)s followers.\",\n        this.state.count\n      )\n\n      return interpolate(\n        message,\n        {\n          username: this.props.profile.username,\n          users: this.state.count,\n        },\n        true\n      )\n    }\n  }\n\n  getEmptyMessage() {\n    if (this.state.search) {\n      return gettext(\"Search returned no users matching specified criteria.\")\n    } else if (this.props.user.id === this.props.profile.id) {\n      return gettext(\"You have no followers.\")\n    } else {\n      return interpolate(\n        gettext(\"%(username)s has no followers.\"),\n        {\n          username: this.props.profile.username,\n        },\n        true\n      )\n    }\n  }\n\n  getMoreButton() {\n    if (!this.state.more) return null\n\n    return (\n      <div className=\"pager-more\">\n        <Button\n          className=\"btn btn-default btn-outline\"\n          loading={this.state.isBusy}\n          onClick={this.loadMore}\n        >\n          {interpolate(\n            gettext(\"Show more (%(more)s)\"),\n            {\n              more: this.state.more,\n            },\n            true\n          )}\n        </Button>\n      </div>\n    )\n  }\n\n  getListBody() {\n    if (this.state.isLoaded && this.state.count === 0) {\n      return <p className=\"lead\">{this.getEmptyMessage()}</p>\n    }\n\n    return (\n      <div>\n        <UsersList\n          cols={3}\n          isReady={this.state.isLoaded}\n          users={this.props.users}\n        />\n\n        {this.getMoreButton()}\n      </div>\n    )\n  }\n\n  getClassName() {\n    return \"profile-\" + this.API_FILTER\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()}>\n        <Toolbar>\n          <ToolbarSection auto>\n            <ToolbarItem auto>\n              <h3>{this.getLabel()}</h3>\n            </ToolbarItem>\n          </ToolbarSection>\n          <ToolbarSection>\n            <ToolbarItem>\n              <Search\n                value={this.state.search}\n                onChange={this.search}\n                placeholder={gettext(\"Search users...\")}\n              />\n            </ToolbarItem>\n          </ToolbarSection>\n        </Toolbar>\n\n        {this.getListBody()}\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Search from \"misago/components/quick-search\"\nimport UsernameHistory from \"misago/components/username-history/root\"\nimport misago from \"misago/index\"\nimport { hydrate, append } from \"misago/reducers/username-history\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport title from \"misago/services/page-title\"\nimport { Toolbar, ToolbarItem, ToolbarSection } from \"../Toolbar\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    if (misago.has(\"PROFILE_NAME_HISTORY\")) {\n      this.initWithPreloadedData(misago.pop(\"PROFILE_NAME_HISTORY\"))\n    } else {\n      this.initWithoutPreloadedData()\n    }\n  }\n\n  initWithPreloadedData(data) {\n    this.state = {\n      isLoaded: true,\n      isBusy: false,\n\n      search: \"\",\n\n      count: data.count,\n      more: data.more,\n\n      page: data.page,\n      pages: data.pages,\n    }\n\n    store.dispatch(hydrate(data.results))\n  }\n\n  initWithoutPreloadedData() {\n    this.state = {\n      isLoaded: false,\n      isBusy: false,\n\n      search: \"\",\n\n      count: 0,\n      more: 0,\n\n      page: 1,\n      pages: 1,\n    }\n\n    this.loadChanges()\n  }\n\n  loadChanges(page = 1, search = null) {\n    ajax\n      .get(\n        misago.get(\"USERNAME_CHANGES_API\"),\n        {\n          user: this.props.profile.id,\n          search: search,\n          page: page || 1,\n        },\n        \"search-username-history\"\n      )\n      .then(\n        (data) => {\n          if (page === 1) {\n            store.dispatch(hydrate(data.results))\n          } else {\n            store.dispatch(append(data.results))\n          }\n\n          this.setState({\n            isLoaded: true,\n            isBusy: false,\n\n            count: data.count,\n            more: data.more,\n\n            page: data.page,\n            pages: data.pages,\n          })\n        },\n        (rejection) => {\n          snackbar.apiError(rejection)\n        }\n      )\n  }\n\n  componentDidMount() {\n    title.set({\n      title: gettext(\"Username history\"),\n      parent: this.props.profile.username,\n    })\n  }\n\n  loadMore = () => {\n    this.setState({\n      isBusy: true,\n    })\n\n    this.loadChanges(this.state.page + 1, this.state.search)\n  }\n\n  search = (ev) => {\n    this.setState({\n      isLoaded: false,\n      isBusy: true,\n\n      search: ev.target.value,\n\n      count: 0,\n      more: 0,\n\n      page: 1,\n      pages: 1,\n    })\n\n    this.loadChanges(1, ev.target.value)\n  }\n\n  getLabel() {\n    if (!this.state.isLoaded) {\n      return gettext(\"Loading...\")\n    } else if (this.state.search) {\n      let message = ngettext(\n        \"Found %(changes)s username change.\",\n        \"Found %(changes)s username changes.\",\n        this.state.count\n      )\n\n      return interpolate(\n        message,\n        {\n          changes: this.state.count,\n        },\n        true\n      )\n    } else if (this.props.profile.id === this.props.user.id) {\n      let message = ngettext(\n        \"Your username was changed %(changes)s time.\",\n        \"Your username was changed %(changes)s times.\",\n        this.state.count\n      )\n\n      return interpolate(\n        message,\n        {\n          changes: this.state.count,\n        },\n        true\n      )\n    } else {\n      let message = ngettext(\n        \"%(username)s's username was changed %(changes)s time.\",\n        \"%(username)s's username was changed %(changes)s times.\",\n        this.state.count\n      )\n\n      return interpolate(\n        message,\n        {\n          username: this.props.profile.username,\n          changes: this.state.count,\n        },\n        true\n      )\n    }\n  }\n\n  getEmptyMessage() {\n    if (this.state.search) {\n      return gettext(\n        \"Search returned no username changes matching specified criteria.\"\n      )\n    } else if (this.props.user.id === this.props.profile.id) {\n      return gettext(\"No name changes have been recorded for your account.\")\n    } else {\n      return interpolate(\n        gettext(\"%(username)s's username was never changed.\"),\n        {\n          username: this.props.profile.username,\n        },\n        true\n      )\n    }\n  }\n\n  getMoreButton() {\n    if (!this.state.more) return null\n\n    return (\n      <div className=\"pager-more\">\n        <Button\n          className=\"btn btn-default btn-outline\"\n          loading={this.state.isBusy}\n          onClick={this.loadMore}\n        >\n          {interpolate(\n            gettext(\"Show older (%(more)s)\"),\n            {\n              more: this.state.more,\n            },\n            true\n          )}\n        </Button>\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"profile-username-history\">\n        <Toolbar>\n          <ToolbarSection auto>\n            <ToolbarItem auto>\n              <h3>{this.getLabel()}</h3>\n            </ToolbarItem>\n          </ToolbarSection>\n          <ToolbarSection>\n            <ToolbarItem>\n              <Search\n                value={this.state.search}\n                onChange={this.search}\n                placeholder={gettext(\"Search history...\")}\n              />\n            </ToolbarItem>\n          </ToolbarSection>\n        </Toolbar>\n\n        <UsernameHistory\n          isLoaded={this.state.isLoaded}\n          emptyMessage={this.getEmptyMessage()}\n          changes={this.props[\"username-history\"]}\n        />\n\n        {this.getMoreButton()}\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport { patch } from \"misago/reducers/profile\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n    }\n  }\n\n  getClassName() {\n    if (this.props.profile.is_followed) {\n      return this.props.className + \" btn-default btn-following\"\n    } else {\n      return this.props.className + \" btn-default btn-follow\"\n    }\n  }\n\n  getIcon() {\n    if (this.props.profile.is_followed) {\n      return \"favorite\"\n    } else {\n      return \"favorite_border\"\n    }\n  }\n\n  getLabel() {\n    if (this.props.profile.is_followed) {\n      return gettext(\"Following\")\n    } else {\n      return gettext(\"Follow\")\n    }\n  }\n\n  action = () => {\n    this.setState({\n      isLoading: true,\n    })\n\n    if (this.props.profile.is_followed) {\n      store.dispatch(\n        patch({\n          is_followed: false,\n          followers: this.props.profile.followers - 1,\n        })\n      )\n    } else {\n      store.dispatch(\n        patch({\n          is_followed: true,\n          followers: this.props.profile.followers + 1,\n        })\n      )\n    }\n\n    ajax.post(this.props.profile.api.follow).then(\n      (data) => {\n        this.setState({\n          isLoading: false,\n        })\n\n        store.dispatch(patch(data))\n      },\n      (rejection) => {\n        this.setState({\n          isLoading: false,\n        })\n        snackbar.apiError(rejection)\n      }\n    )\n  }\n\n  render() {\n    return (\n      <Button\n        className={this.getClassName()}\n        disabled={this.state.isLoading}\n        onClick={this.action}\n      >\n        <span className=\"material-icon\">{this.getIcon()}</span>\n        {this.getLabel()}\n      </Button>\n    )\n  }\n}\n","import React from \"react\"\nimport posting from \"misago/services/posting\"\nimport misago from \"misago\"\n\nexport default class extends React.Component {\n  onClick = () => {\n    posting.open({\n      mode: \"START_PRIVATE\",\n      submit: misago.get(\"PRIVATE_THREADS_API\"),\n\n      to: [this.props.profile],\n    })\n  }\n\n  render() {\n    const canMessage = this.props.user.acl.can_start_private_threads\n    const isProfileOwner = this.props.user.id === this.props.profile.id\n\n    if (!canMessage || isProfileOwner) return null\n\n    return (\n      <button\n        className={this.props.className}\n        onClick={this.onClick}\n        type=\"button\"\n      >\n        <span className=\"material-icon\">comment</span>\n        {gettext(\"Message\")}\n      </button>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport Loader from \"misago/components/modal-loader\"\nimport YesNoSwitch from \"misago/components/yes-no-switch\"\nimport ModalMessage from \"misago/components/modal-message\"\nimport { updateAvatar } from \"misago/reducers/users\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoaded: false,\n      isLoading: false,\n      error: null,\n\n      is_avatar_locked: \"\",\n      avatar_lock_user_message: \"\",\n      avatar_lock_staff_message: \"\",\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(this.props.profile.api.moderate_avatar).then(\n      (options) => {\n        this.setState({\n          isLoaded: true,\n\n          is_avatar_locked: options.is_avatar_locked,\n          avatar_lock_user_message: options.avatar_lock_user_message || \"\",\n          avatar_lock_staff_message: options.avatar_lock_staff_message || \"\",\n        })\n      },\n      (rejection) => {\n        this.setState({\n          isLoaded: true,\n          error: rejection.detail,\n        })\n      }\n    )\n  }\n\n  clean() {\n    if (this.isValid()) {\n      return true\n    } else {\n      snackbar.error(this.validate().username[0])\n      return false\n    }\n  }\n\n  send() {\n    return ajax.post(this.props.profile.api.moderate_avatar, {\n      is_avatar_locked: this.state.is_avatar_locked,\n      avatar_lock_user_message: this.state.avatar_lock_user_message,\n      avatar_lock_staff_message: this.state.avatar_lock_staff_message,\n    })\n  }\n\n  handleSuccess(apiResponse) {\n    store.dispatch(updateAvatar(this.props.profile, apiResponse.avatar_hash))\n    snackbar.success(gettext(\"Avatar controls have been changed.\"))\n  }\n\n  getFormBody() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"modal-body\">\n          <FormGroup\n            label={gettext(\"Lock avatar\")}\n            helpText={gettext(\n              \"Locking user avatar will prohibit user from changing his avatar and will reset his/her avatar to default one.\"\n            )}\n            for=\"id_is_avatar_locked\"\n          >\n            <YesNoSwitch\n              id=\"id_is_avatar_locked\"\n              disabled={this.state.isLoading}\n              iconOn=\"lock_outline\"\n              iconOff=\"lock_open\"\n              labelOn={gettext(\"Disallow user from changing avatar\")}\n              labelOff={gettext(\"Allow user to change avatar\")}\n              onChange={this.bindInput(\"is_avatar_locked\")}\n              value={this.state.is_avatar_locked}\n            />\n          </FormGroup>\n\n          <FormGroup\n            label={gettext(\"User message\")}\n            helpText={gettext(\n              \"Optional message for user explaining why he/she is prohibited form changing avatar.\"\n            )}\n            for=\"id_avatar_lock_user_message\"\n          >\n            <textarea\n              id=\"id_avatar_lock_user_message\"\n              className=\"form-control\"\n              rows=\"4\"\n              disabled={this.state.isLoading}\n              onChange={this.bindInput(\"avatar_lock_user_message\")}\n              value={this.state.avatar_lock_user_message}\n            />\n          </FormGroup>\n\n          <FormGroup\n            label={gettext(\"Staff message\")}\n            helpText={gettext(\n              \"Optional message for forum team members explaining why user is prohibited form changing avatar.\"\n            )}\n            for=\"id_avatar_lock_staff_message\"\n          >\n            <textarea\n              id=\"id_avatar_lock_staff_message\"\n              className=\"form-control\"\n              rows=\"4\"\n              disabled={this.state.isLoading}\n              onChange={this.bindInput(\"avatar_lock_staff_message\")}\n              value={this.state.avatar_lock_staff_message}\n            />\n          </FormGroup>\n        </div>\n        <div className=\"modal-footer\">\n          <button\n            type=\"button\"\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n          >\n            {gettext(\"Close\")}\n          </button>\n          <Button className=\"btn-primary\" loading={this.state.isLoading}>\n            {gettext(\"Save changes\")}\n          </Button>\n        </div>\n      </form>\n    )\n  }\n\n  getModalBody() {\n    if (this.state.error) {\n      return (\n        <ModalMessage icon=\"remove_circle_outline\" message={this.state.error} />\n      )\n    } else if (this.state.isLoaded) {\n      return this.getFormBody()\n    } else {\n      return <Loader />\n    }\n  }\n\n  getClassName() {\n    if (this.state.error) {\n      return \"modal-dialog modal-message modal-avatar-controls\"\n    } else {\n      return \"modal-dialog modal-avatar-controls\"\n    }\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()} role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"modal\"\n              aria-label={pgettext(\"modal\", \"Close\")}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Avatar controls\")}</h4>\n          </div>\n          {this.getModalBody()}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport Loader from \"misago/components/modal-loader\"\nimport ModalMessage from \"misago/components/modal-message\"\nimport { addNameChange } from \"misago/reducers/username-history\"\nimport { updateUsername } from \"misago/reducers/users\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport * as validators from \"misago/utils/validators\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoaded: false,\n      isLoading: false,\n      error: null,\n\n      username: \"\",\n      validators: {\n        username: [validators.usernameContent()],\n      },\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(this.props.profile.api.moderate_username).then(\n      () => {\n        this.setState({\n          isLoaded: true,\n        })\n      },\n      (rejection) => {\n        this.setState({\n          isLoaded: true,\n          error: rejection.detail,\n        })\n      }\n    )\n  }\n\n  clean() {\n    if (this.isValid()) {\n      return true\n    } else {\n      snackbar.error(this.validate().username[0])\n      return false\n    }\n  }\n\n  send() {\n    return ajax.post(this.props.profile.api.moderate_username, {\n      username: this.state.username,\n    })\n  }\n\n  handleSuccess(apiResponse) {\n    this.setState({\n      username: \"\",\n    })\n\n    store.dispatch(\n      addNameChange(apiResponse, this.props.profile, this.props.user)\n    )\n    store.dispatch(\n      updateUsername(this.props.profile, apiResponse.username, apiResponse.slug)\n    )\n\n    snackbar.success(gettext(\"Username has been changed.\"))\n  }\n\n  getFormBody() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"modal-body\">\n          <FormGroup label={gettext(\"New username\")} for=\"id_username\">\n            <input\n              type=\"text\"\n              id=\"id_username\"\n              className=\"form-control\"\n              disabled={this.state.isLoading}\n              onChange={this.bindInput(\"username\")}\n              value={this.state.username}\n            />\n          </FormGroup>\n        </div>\n        <div className=\"modal-footer\">\n          <button\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n            disabled={this.state.isLoading}\n            type=\"button\"\n          >\n            {gettext(\"Cancel\")}\n          </button>\n          <Button className=\"btn-primary\" loading={this.state.isLoading}>\n            {gettext(\"Change username\")}\n          </Button>\n        </div>\n      </form>\n    )\n  }\n\n  getModalBody() {\n    if (this.state.error) {\n      return (\n        <ModalMessage icon=\"remove_circle_outline\" message={this.state.error} />\n      )\n    } else if (this.state.isLoaded) {\n      return this.getFormBody()\n    } else {\n      return <Loader />\n    }\n  }\n\n  getClassName() {\n    if (this.state.error) {\n      return \"modal-dialog modal-message modal-rename-user\"\n    } else {\n      return \"modal-dialog modal-rename-user\"\n    }\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()} role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"modal\"\n              aria-label={pgettext(\"modal\", \"Close\")}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Change username\")}</h4>\n          </div>\n          {this.getModalBody()}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport Loader from \"misago/components/modal-loader\"\nimport ModalMessage from \"misago/components/modal-message\"\nimport YesNoSwitch from \"misago/components/yes-no-switch\"\nimport misago from \"misago/index\"\nimport ajax from \"misago/services/ajax\"\nimport polls from \"misago/services/polls\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoaded: false,\n      isLoading: false,\n      isDeleted: false,\n      error: null,\n\n      countdown: 5,\n      confirm: false,\n\n      with_content: false,\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(this.props.profile.api.delete).then(\n      () => {\n        this.setState({\n          isLoaded: true,\n        })\n\n        this.countdown()\n      },\n      (rejection) => {\n        this.setState({\n          isLoaded: true,\n          error: rejection.detail,\n        })\n      }\n    )\n  }\n\n  countdown = () => {\n    window.setTimeout(() => {\n      if (this.state.countdown > 1) {\n        this.setState({\n          countdown: this.state.countdown - 1,\n        })\n        this.countdown()\n      } else if (!this.state.confirm) {\n        this.setState({\n          confirm: true,\n        })\n      }\n    }, 1000)\n  }\n\n  send() {\n    return ajax.post(this.props.profile.api.delete, {\n      with_content: this.state.with_content,\n    })\n  }\n\n  handleSuccess() {\n    polls.stop(\"user-profile\")\n\n    if (this.state.with_content) {\n      this.setState({\n        isDeleted: interpolate(\n          gettext(\n            \"%(username)s's account, threads, posts and other content has been deleted.\"\n          ),\n          {\n            username: this.props.profile.username,\n          },\n          true\n        ),\n      })\n    } else {\n      this.setState({\n        isDeleted: interpolate(\n          gettext(\n            \"%(username)s's account has been deleted and other content has been hidden.\"\n          ),\n          {\n            username: this.props.profile.username,\n          },\n          true\n        ),\n      })\n    }\n  }\n\n  getButtonLabel() {\n    if (this.state.confirm) {\n      return interpolate(\n        gettext(\"Delete %(username)s\"),\n        {\n          username: this.props.profile.username,\n        },\n        true\n      )\n    } else {\n      return interpolate(\n        gettext(\"Please wait... (%(countdown)ss)\"),\n        {\n          countdown: this.state.countdown,\n        },\n        true\n      )\n    }\n  }\n\n  getForm() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"modal-body\">\n          <FormGroup label={gettext(\"User content\")} for=\"id_with_content\">\n            <YesNoSwitch\n              id=\"id_with_content\"\n              disabled={this.state.isLoading}\n              labelOn={gettext(\"Delete together with user's account\")}\n              labelOff={gettext(\"Hide after deleting user's account\")}\n              onChange={this.bindInput(\"with_content\")}\n              value={this.state.with_content}\n            />\n          </FormGroup>\n        </div>\n        <div className=\"modal-footer\">\n          <button\n            type=\"button\"\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n          >\n            {gettext(\"Cancel\")}\n          </button>\n\n          <Button\n            className=\"btn-danger\"\n            loading={this.state.isLoading}\n            disabled={!this.state.confirm}\n          >\n            {this.getButtonLabel()}\n          </Button>\n        </div>\n      </form>\n    )\n  }\n\n  getDeletedBody() {\n    return (\n      <div className=\"modal-body\">\n        <div className=\"message-icon\">\n          <span className=\"material-icon\">info_outline</span>\n        </div>\n        <div className=\"message-body\">\n          <p className=\"lead\">{this.state.isDeleted}</p>\n          <p>\n            <a href={misago.get(\"USERS_LIST_URL\")}>\n              {gettext(\"Return to users list\")}\n            </a>\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  getModalBody() {\n    if (this.state.error) {\n      return (\n        <ModalMessage icon=\"remove_circle_outline\" message={this.state.error} />\n      )\n    } else if (this.state.isLoaded) {\n      if (this.state.isDeleted) {\n        return this.getDeletedBody()\n      } else {\n        return this.getForm()\n      }\n    } else {\n      return <Loader />\n    }\n  }\n\n  getClassName() {\n    if (this.state.error || this.state.isDeleted) {\n      return \"modal-dialog modal-message modal-delete-account\"\n    } else {\n      return \"modal-dialog modal-delete-account\"\n    }\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()} role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"modal\"\n              aria-label={pgettext(\"modal\", \"Close\")}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Delete user account\")}</h4>\n          </div>\n          {this.getModalBody()}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport { connect } from \"react-redux\"\nimport AvatarControls from \"misago/components/profile/moderation/avatar-controls\"\nimport ChangeUsername from \"misago/components/profile/moderation/change-username\"\nimport DeleteAccount from \"misago/components/profile/moderation/delete-account\"\nimport modal from \"misago/services/modal\"\n\nlet select = function (store) {\n  return {\n    tick: store.tick,\n    user: store.auth,\n    profile: store.profile,\n  }\n}\n\nexport default class extends React.Component {\n  showAvatarDialog = () => {\n    modal.show(connect(select)(AvatarControls))\n  }\n\n  showRenameDialog = () => {\n    modal.show(connect(select)(ChangeUsername))\n  }\n\n  showDeleteDialog = () => {\n    modal.show(connect(select)(DeleteAccount))\n  }\n\n  render() {\n    const { moderation } = this.props\n\n    return (\n      <ul className=\"dropdown-menu dropdown-menu-right\" role=\"menu\">\n        {!!moderation.avatar && (\n          <li>\n            <button\n              type=\"button\"\n              className=\"btn btn-link\"\n              onClick={this.showAvatarDialog}\n            >\n              <span className=\"material-icon\">portrait</span>\n              {gettext(\"Avatar controls\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.rename && (\n          <li>\n            <button\n              type=\"button\"\n              className=\"btn btn-link\"\n              onClick={this.showRenameDialog}\n            >\n              <span className=\"material-icon\">credit_card</span>\n              {gettext(\"Change username\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.delete && (\n          <li>\n            <button\n              type=\"button\"\n              className=\"btn btn-link\"\n              onClick={this.showDeleteDialog}\n            >\n              <span className=\"material-icon\">clear</span>\n              {gettext(\"Delete account\")}\n            </button>\n          </li>\n        )}\n      </ul>\n    )\n  }\n}\n","import React from \"react\"\nimport Status, { StatusIcon, StatusLabel } from \"../user-status\"\n\nconst ProfileDataList = ({ profile }) => (\n  <ul className=\"profile-data-list\">\n    {profile.is_active === false && (\n      <li className=\"user-account-disabled\">\n        <abbr\n          title={gettext(\n            \"This user's account has been disabled by administrator.\"\n          )}\n        >\n          {gettext(\"Account disabled\")}\n        </abbr>\n      </li>\n    )}\n    <li className=\"user-status-display\">\n      <Status user={profile} status={profile.status}>\n        <StatusIcon user={profile} status={profile.status} />\n        <StatusLabel\n          user={profile}\n          status={profile.status}\n          className=\"status-label\"\n        />\n      </Status>\n    </li>\n    {profile.rank.is_tab ? (\n      <li className=\"user-rank\">\n        <a href={profile.rank.url} className=\"item-title\">\n          {profile.rank.name}\n        </a>\n      </li>\n    ) : (\n      <li className=\"user-rank\">\n        <span className=\"item-title\">{profile.rank.name}</span>\n      </li>\n    )}\n    {(profile.title || profile.rank.title) && (\n      <li className=\"user-title\">{profile.title || profile.rank.title}</li>\n    )}\n    <li className=\"user-joined-on\">\n      <abbr\n        title={interpolate(\n          gettext(\"Joined on %(joined_on)s\"),\n          {\n            joined_on: profile.joined_on.format(\"LL, LT\"),\n          },\n          true\n        )}\n      >\n        {interpolate(\n          gettext(\"Joined %(joined_on)s\"),\n          {\n            joined_on: profile.joined_on.fromNow(),\n          },\n          true\n        )}\n      </abbr>\n    </li>\n    {profile.email && (\n      <li className=\"user-email\">\n        <a href={\"mailto:\" + profile.email} className=\"item-title\">\n          {profile.email}\n        </a>\n      </li>\n    )}\n  </ul>\n)\n\nexport default ProfileDataList\n","import React from \"react\"\nimport Avatar from \"../avatar\"\nimport { FlexRow, FlexRowCol, FlexRowSection } from \"../FlexRow\"\nimport {\n  PageHeader,\n  PageHeaderBanner,\n  PageHeaderContainer,\n  PageHeaderDetails,\n} from \"../PageHeader\"\nimport FollowButton from \"./follow-button\"\nimport MessageButton from \"./message-button\"\nimport ModerationOptions from \"./moderation/nav\"\nimport ProfileDataList from \"./ProfileDataList\"\n\nconst ProfileHeader = ({ profile, user, moderation, message, follow }) => (\n  <PageHeaderContainer>\n    <PageHeader\n      styleName={\n        profile.rank.css_class ? \"rank-\" + profile.rank.css_class : \"profile\"\n      }\n    >\n      <PageHeaderBanner\n        styleName={\n          profile.rank.css_class ? \"rank-\" + profile.rank.css_class : \"profile\"\n        }\n      >\n        <div className=\"profile-page-header\">\n          <div className=\"profile-page-header-avatar\">\n            <Avatar\n              className=\"user-avatar hidden-sm hidden-md hidden-lg\"\n              user={profile}\n              size={200}\n              size2x={400}\n            />\n            <Avatar\n              className=\"user-avatar hidden-xs hidden-md hidden-lg\"\n              user={profile}\n              size={64}\n              size2x={128}\n            />\n            <Avatar\n              className=\"user-avatar hidden-xs hidden-sm\"\n              user={profile}\n              size={128}\n              size2x={256}\n            />\n          </div>\n          <h1>{profile.username}</h1>\n        </div>\n      </PageHeaderBanner>\n      <PageHeaderDetails className=\"profile-page-header-details\">\n        <FlexRow>\n          <FlexRowSection auto>\n            <FlexRowCol>\n              <ProfileDataList profile={profile} />\n            </FlexRowCol>\n          </FlexRowSection>\n          {message && (\n            <FlexRowSection>\n              <FlexRowCol>\n                <MessageButton\n                  className=\"btn btn-default btn-block btn-outline\"\n                  profile={profile}\n                  user={user}\n                />\n              </FlexRowCol>\n              {moderation.available && !follow && (\n                <FlexRowCol shrink>\n                  <div className=\"dropdown\">\n                    <ProfileModerationButton />\n                    <ModerationOptions\n                      profile={profile}\n                      moderation={moderation}\n                    />\n                  </div>\n                </FlexRowCol>\n              )}\n            </FlexRowSection>\n          )}\n          {follow && (\n            <FlexRowSection>\n              <FlexRowCol>\n                <FollowButton\n                  className=\"btn btn-block btn-outline\"\n                  profile={profile}\n                />\n              </FlexRowCol>\n              {moderation.available && (\n                <FlexRowCol shrink>\n                  <div className=\"dropdown\">\n                    <ProfileModerationButton />\n                    <ModerationOptions\n                      profile={profile}\n                      moderation={moderation}\n                    />\n                  </div>\n                </FlexRowCol>\n              )}\n            </FlexRowSection>\n          )}\n          {moderation.available && !follow && !message && (\n            <FlexRowSection>\n              <FlexRowCol className=\"hidden-xs\" shrink>\n                <div className=\"dropdown\">\n                  <ProfileModerationButton />\n                  <ModerationOptions\n                    profile={profile}\n                    moderation={moderation}\n                  />\n                </div>\n              </FlexRowCol>\n              <FlexRowCol className=\"hidden-sm hidden-md hidden-lg\">\n                <div className=\"dropdown\">\n                  <button\n                    className=\"btn btn-default btn-block btn-outline dropdown-toggle\"\n                    type=\"button\"\n                    data-toggle=\"dropdown\"\n                    aria-haspopup=\"true\"\n                    aria-expanded=\"false\"\n                  >\n                    <span className=\"material-icon\">settings</span>\n                    {gettext(\"Options\")}\n                  </button>\n                  <ModerationOptions\n                    profile={profile}\n                    moderation={moderation}\n                  />\n                </div>\n              </FlexRowCol>\n            </FlexRowSection>\n          )}\n        </FlexRow>\n      </PageHeaderDetails>\n    </PageHeader>\n  </PageHeaderContainer>\n)\n\nconst ProfileModerationButton = () => (\n  <button\n    className=\"btn btn-default btn-icon btn-outline dropdown-toggle\"\n    type=\"button\"\n    title={gettext(\"Options\")}\n    data-toggle=\"dropdown\"\n    aria-haspopup=\"true\"\n    aria-expanded=\"false\"\n  >\n    <span className=\"material-icon\">settings</span>\n  </button>\n)\n\nexport default ProfileHeader\n","import React from \"react\"\nimport { Link } from \"react-router\"\nimport Li from \"misago/components/li\"\n\nconst ProfileNav = ({ baseUrl, page, pages }) => (\n  <div className=\"nav-container\">\n    <div className=\"dropdown hidden-sm hidden-md hidden-lg\">\n      <button\n        className=\"btn btn-default btn-block btn-outline dropdown-toggle\"\n        type=\"button\"\n        data-toggle=\"dropdown\"\n        aria-haspopup=\"true\"\n        aria-expanded=\"false\"\n      >\n        <span className=\"material-icon\">{page.icon}</span>\n        {page.name}\n      </button>\n      <ul className=\"dropdown-menu stick-to-bottom\">\n        {pages.map((page) => (\n          <li key={page.component}>\n            <Link to={baseUrl + page.component + \"/\"}>\n              <span className=\"material-icon\">{page.icon}</span>\n              {page.name}\n            </Link>\n          </li>\n        ))}\n      </ul>\n    </div>\n    <ul className=\"nav nav-pills hidden-xs\" role=\"menu\">\n      {pages.map((page) => (\n        <Li path={baseUrl + page.component + \"/\"} key={page.component}>\n          <Link to={baseUrl + page.component + \"/\"}>\n            <span className=\"material-icon\">{page.icon}</span>\n            {page.name}\n          </Link>\n        </Li>\n      ))}\n    </ul>\n  </div>\n)\n\nexport default ProfileNav\n","import React from \"react\"\nimport { connect } from \"react-redux\"\nimport BanDetails from \"./ban-details\"\nimport Details from \"./details\"\nimport { Posts, Threads } from \"./feed\"\nimport Followers from \"./followers\"\nimport Follows from \"./follows\"\nimport UsernameHistory from \"./username-history\"\nimport WithDropdown from \"misago/components/with-dropdown\"\nimport misago from \"misago\"\nimport { hydrate } from \"misago/reducers/profile\"\nimport polls from \"misago/services/polls\"\nimport store from \"misago/services/store\"\nimport PageContainer from \"../PageContainer\"\nimport ProfileHeader from \"./ProfileHeader\"\nimport ProfileNav from \"./ProfileNav\"\n\nexport default class extends WithDropdown {\n  constructor(props) {\n    super(props)\n\n    this.startPolling(props.profile.api.index)\n  }\n\n  startPolling(api) {\n    polls.start({\n      poll: \"user-profile\",\n      url: api,\n      frequency: 90 * 1000,\n      update: this.update,\n    })\n  }\n\n  update = (data) => {\n    store.dispatch(hydrate(data))\n  }\n\n  render() {\n    const baseUrl = misago.get(\"PROFILE\").url\n    const pages = misago.get(\"PROFILE_PAGES\")\n    const page = pages.filter((page) => {\n      const url = baseUrl + page.component + \"/\"\n      return this.props.location.pathname === url\n    })[0]\n    const { profile, user } = this.props\n    const moderation = getModeration(profile, user)\n    const message =\n      !!user.acl.can_start_private_threads && profile.id !== user.id\n    const follow = !!profile.acl.can_follow && profile.id !== user.id\n\n    return (\n      <div className=\"page page-user-profile\">\n        <ProfileHeader\n          profile={this.props.profile}\n          user={this.props.user}\n          moderation={moderation}\n          message={message}\n          follow={follow}\n        />\n        <PageContainer>\n          <ProfileNav baseUrl={baseUrl} page={page} pages={pages} />\n\n          {this.props.children}\n        </PageContainer>\n      </div>\n    )\n  }\n}\n\nconst getModeration = (profile, user) => {\n  const moderation = {\n    available: false,\n    rename: false,\n    avatar: false,\n    delete: false,\n  }\n\n  if (user.is_anonymous) return moderation\n\n  moderation.rename = profile.acl.can_rename\n  moderation.avatar = profile.acl.can_moderate_avatar\n  moderation.delete = profile.acl.can_delete\n  moderation.available = !!(\n    moderation.rename ||\n    moderation.avatar ||\n    moderation.delete\n  )\n\n  return moderation\n}\n\nexport function select(store) {\n  return {\n    isAuthenticated: store.auth.user.id === store.profile.id,\n\n    tick: store.tick.tick,\n    user: store.auth.user,\n    users: store.users,\n    posts: store.posts,\n    profile: store.profile,\n    profileDetails: store[\"profile-details\"],\n    \"username-history\": store[\"username-history\"],\n  }\n}\n\nconst COMPONENTS = {\n  posts: Posts,\n  threads: Threads,\n  followers: Followers,\n  follows: Follows,\n  details: Details,\n  \"username-history\": UsernameHistory,\n  \"ban-details\": BanDetails,\n}\n\nexport function paths() {\n  let paths = []\n  misago.get(\"PROFILE_PAGES\").forEach(function (item) {\n    paths.push(\n      Object.assign({}, item, {\n        path: misago.get(\"PROFILE\").url + item.component + \"/\",\n        component: connect(select)(COMPONENTS[item.component]),\n      })\n    )\n  })\n\n  return paths\n}\n","import React from \"react\"\nimport Route from \"./route\"\n\nexport function Threads(props) {\n  let emptyMessage = null\n  if (props.user.id === props.profile.id) {\n    emptyMessage = gettext(\"You have no started threads.\")\n  } else {\n    emptyMessage = interpolate(\n      gettext(\"%(username)s started no threads.\"),\n      {\n        username: props.profile.username,\n      },\n      true\n    )\n  }\n\n  let header = null\n  if (!props.posts.isLoaded) {\n    header = gettext(\"Loading...\")\n  } else if (props.profile.id === props.user.id) {\n    const message = ngettext(\n      \"You have started %(threads)s thread.\",\n      \"You have started %(threads)s threads.\",\n      props.profile.threads\n    )\n\n    header = interpolate(\n      message,\n      {\n        threads: props.profile.threads,\n      },\n      true\n    )\n  } else {\n    const message = ngettext(\n      \"%(username)s has started %(threads)s thread.\",\n      \"%(username)s has started %(threads)s threads.\",\n      props.profile.threads\n    )\n\n    header = interpolate(\n      message,\n      {\n        username: props.profile.username,\n        threads: props.profile.threads,\n      },\n      true\n    )\n  }\n\n  return (\n    <Route\n      api={props.profile.api.threads}\n      emptyMessage={emptyMessage}\n      header={header}\n      title={gettext(\"Threads\")}\n      {...props}\n    />\n  )\n}\n\nexport function Posts(props) {\n  let emptyMessage = null\n  if (props.user.id === props.profile.id) {\n    emptyMessage = gettext(\"You have posted no messages.\")\n  } else {\n    emptyMessage = interpolate(\n      gettext(\"%(username)s posted no messages.\"),\n      {\n        username: props.profile.username,\n      },\n      true\n    )\n  }\n\n  let header = null\n  if (!props.posts.isLoaded) {\n    header = gettext(\"Loading...\")\n  } else if (props.profile.id === props.user.id) {\n    const message = ngettext(\n      \"You have posted %(posts)s message.\",\n      \"You have posted %(posts)s messages.\",\n      props.profile.posts\n    )\n\n    header = interpolate(\n      message,\n      {\n        posts: props.profile.posts,\n      },\n      true\n    )\n  } else {\n    const message = ngettext(\n      \"%(username)s has posted %(posts)s message.\",\n      \"%(username)s has posted %(posts)s messages.\",\n      props.profile.posts\n    )\n\n    header = interpolate(\n      message,\n      {\n        username: props.profile.username,\n        posts: props.profile.posts,\n      },\n      true\n    )\n  }\n\n  return (\n    <Route\n      api={props.profile.api.posts}\n      emptyMessage={emptyMessage}\n      header={header}\n      title={gettext(\"Posts\")}\n      {...props}\n    />\n  )\n}\n","import React from \"react\"\nimport Followers from \"misago/components/profile/followers\"\n\nexport default class extends Followers {\n  setSpecialProps() {\n    this.PRELOADED_DATA_KEY = \"PROFILE_FOLLOWS\"\n    this.TITLE = gettext(\"Follows\")\n    this.API_FILTER = \"follows\"\n  }\n\n  getLabel() {\n    if (!this.state.isLoaded) {\n      return gettext(\"Loading...\")\n    } else if (this.state.search) {\n      let message = ngettext(\n        \"Found %(users)s user.\",\n        \"Found %(users)s users.\",\n        this.state.count\n      )\n\n      return interpolate(\n        message,\n        {\n          users: this.state.count,\n        },\n        true\n      )\n    } else if (this.props.profile.id === this.props.user.id) {\n      let message = ngettext(\n        \"You are following %(users)s user.\",\n        \"You are following %(users)s users.\",\n        this.state.count\n      )\n\n      return interpolate(\n        message,\n        {\n          users: this.state.count,\n        },\n        true\n      )\n    } else {\n      let message = ngettext(\n        \"%(username)s is following %(users)s user.\",\n        \"%(username)s is following %(users)s users.\",\n        this.state.count\n      )\n\n      return interpolate(\n        message,\n        {\n          username: this.props.profile.username,\n          users: this.state.count,\n        },\n        true\n      )\n    }\n  }\n\n  getEmptyMessage() {\n    if (this.state.search) {\n      return gettext(\"Search returned no users matching specified criteria.\")\n    } else if (this.props.user.id === this.props.profile.id) {\n      return gettext(\"You are not following any users.\")\n    } else {\n      return interpolate(\n        gettext(\"%(username)s is not following any users.\"),\n        {\n          username: this.props.profile.username,\n        },\n        true\n      )\n    }\n  }\n}\n","import { connect } from \"react-redux\"\nimport Profile, { paths, select } from \"misago/components/profile/root\"\nimport misago from \"misago/index\"\nimport mount from \"misago/utils/routed-component\"\n\nexport default function initializer(context) {\n  if (context.has(\"PROFILE\") && context.has(\"PROFILE_PAGES\")) {\n    mount({\n      root: misago.get(\"PROFILE\").url,\n      component: connect(select)(Profile),\n      paths: paths(),\n    })\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:profile\",\n  initializer: initializer,\n  after: \"reducer:profile-hydrate\",\n})\n","import React from \"react\"\nimport misago from \"misago/index\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport * as validators from \"misago/utils/validators\"\nimport showBannedPage from \"misago/utils/banned-page\"\n\nexport class RequestLinkForm extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      email: \"\",\n\n      validators: {\n        email: [validators.email()],\n      },\n    }\n  }\n\n  clean() {\n    if (this.isValid()) {\n      return true\n    } else {\n      snackbar.error(gettext(\"Enter a valid email address.\"))\n      return false\n    }\n  }\n\n  send() {\n    return ajax.post(misago.get(\"SEND_ACTIVATION_API\"), {\n      email: this.state.email,\n    })\n  }\n\n  handleSuccess(apiResponse) {\n    this.props.callback(apiResponse)\n  }\n\n  handleError(rejection) {\n    if ([\"already_active\", \"inactive_admin\"].indexOf(rejection.code) > -1) {\n      snackbar.info(rejection.detail)\n    } else if (rejection.status === 403 && rejection.ban) {\n      showBannedPage(rejection.ban)\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"well well-form well-form-request-activation-link\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"form-group\">\n            <div className=\"control-input\">\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                placeholder={gettext(\"Your e-mail address\")}\n                disabled={this.state.isLoading}\n                onChange={this.bindInput(\"email\")}\n                value={this.state.email}\n              />\n            </div>\n          </div>\n\n          <Button\n            className=\"btn-primary btn-block\"\n            loading={this.state.isLoading}\n          >\n            {gettext(\"Send link\")}\n          </Button>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport class LinkSent extends React.Component {\n  getMessage() {\n    return interpolate(\n      gettext(\"Activation link was sent to %(email)s\"),\n      {\n        email: this.props.user.email,\n      },\n      true\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"well well-form well-form-request-activation-link well-done\">\n        <div className=\"done-message\">\n          <div className=\"message-icon\">\n            <span className=\"material-icon\">check</span>\n          </div>\n          <div className=\"message-body\">\n            <p>{this.getMessage()}</p>\n          </div>\n          <button\n            className=\"btn btn-primary btn-block\"\n            type=\"button\"\n            onClick={this.props.callback}\n          >\n            {gettext(\"Request another link\")}\n          </button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      complete: false,\n    }\n  }\n\n  complete = (apiResponse) => {\n    this.setState({\n      complete: apiResponse,\n    })\n  }\n\n  reset = () => {\n    this.setState({\n      complete: false,\n    })\n  }\n\n  render() {\n    if (this.state.complete) {\n      return <LinkSent user={this.state.complete} callback={this.reset} />\n    } else {\n      return <RequestLinkForm callback={this.complete} />\n    }\n  }\n}\n","import misago from \"misago/index\"\nimport RequestActivationLink from \"misago/components/request-activation-link\"\nimport mount from \"misago/utils/mount-component\"\n\nexport default function initializer() {\n  if (document.getElementById(\"request-activation-link-mount\")) {\n    mount(RequestActivationLink, \"request-activation-link-mount\", false)\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:request-activation-link\",\n  initializer: initializer,\n  after: \"store\",\n})\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport misago from \"misago/index\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport * as validators from \"misago/utils/validators\"\nimport showBannedPage from \"misago/utils/banned-page\"\n\nexport class RequestResetForm extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      email: \"\",\n\n      validators: {\n        email: [validators.email()],\n      },\n    }\n  }\n\n  clean() {\n    if (this.isValid()) {\n      return true\n    } else {\n      snackbar.error(gettext(\"Enter a valid email address.\"))\n      return false\n    }\n  }\n\n  send() {\n    return ajax.post(misago.get(\"SEND_PASSWORD_RESET_API\"), {\n      email: this.state.email,\n    })\n  }\n\n  handleSuccess(apiResponse) {\n    this.props.callback(apiResponse)\n  }\n\n  handleError(rejection) {\n    if ([\"inactive_user\", \"inactive_admin\"].indexOf(rejection.code) > -1) {\n      this.props.showInactivePage(rejection)\n    } else if (rejection.status === 403 && rejection.ban) {\n      showBannedPage(rejection.ban)\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"well well-form well-form-request-password-reset\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"form-group\">\n            <div className=\"control-input\">\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                placeholder={gettext(\"Your e-mail address\")}\n                disabled={this.state.isLoading}\n                onChange={this.bindInput(\"email\")}\n                value={this.state.email}\n              />\n            </div>\n          </div>\n\n          <Button\n            className=\"btn-primary btn-block\"\n            loading={this.state.isLoading}\n          >\n            {gettext(\"Send link\")}\n          </Button>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport class LinkSent extends React.Component {\n  getMessage() {\n    return interpolate(\n      gettext(\"Reset password link was sent to %(email)s\"),\n      {\n        email: this.props.user.email,\n      },\n      true\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"well well-form well-form-request-password-reset well-done\">\n        <div className=\"done-message\">\n          <div className=\"message-icon\">\n            <span className=\"material-icon\">check</span>\n          </div>\n          <div className=\"message-body\">\n            <p>{this.getMessage()}</p>\n          </div>\n          <button\n            type=\"button\"\n            className=\"btn btn-primary btn-block\"\n            onClick={this.props.callback}\n          >\n            {gettext(\"Request another link\")}\n          </button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport class AccountInactivePage extends React.Component {\n  getActivateButton() {\n    if (this.props.activation === \"inactive_user\") {\n      return (\n        <p>\n          <a href={misago.get(\"REQUEST_ACTIVATION_URL\")}>\n            {gettext(\"Activate your account.\")}\n          </a>\n        </p>\n      )\n    } else {\n      return null\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"page page-message page-message-info page-forgotten-password-inactive\">\n        <div className=\"container\">\n          <div className=\"message-panel\">\n            <div className=\"message-icon\">\n              <span className=\"material-icon\">info_outline</span>\n            </div>\n\n            <div className=\"message-body\">\n              <p className=\"lead\">{gettext(\"Your account is inactive.\")}</p>\n              <p>{this.props.message}</p>\n              {this.getActivateButton()}\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      complete: false,\n    }\n  }\n\n  complete = (apiResponse) => {\n    this.setState({\n      complete: apiResponse,\n    })\n  }\n\n  reset = () => {\n    this.setState({\n      complete: false,\n    })\n  }\n\n  showInactivePage(apiResponse) {\n    ReactDOM.render(\n      <AccountInactivePage\n        activation={apiResponse.code}\n        message={apiResponse.detail}\n      />,\n      document.getElementById(\"page-mount\")\n    )\n  }\n\n  render() {\n    if (this.state.complete) {\n      return <LinkSent callback={this.reset} user={this.state.complete} />\n    }\n\n    return (\n      <RequestResetForm\n        callback={this.complete}\n        showInactivePage={this.showInactivePage}\n      />\n    )\n  }\n}\n","import misago from \"misago/index\"\nimport RequestPasswordReset from \"misago/components/request-password-reset\"\nimport mount from \"misago/utils/mount-component\"\n\nexport default function initializer() {\n  if (document.getElementById(\"request-password-reset-mount\")) {\n    mount(RequestPasswordReset, \"request-password-reset-mount\", false)\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:request-password-reset\",\n  initializer: initializer,\n  after: \"store\",\n})\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport misago from \"misago/index\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport SignInModal from \"misago/components/sign-in.js\"\nimport ajax from \"misago/services/ajax\"\nimport auth from \"misago/services/auth\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport showBannedPage from \"misago/utils/banned-page\"\n\nexport class ResetPasswordForm extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      password: \"\",\n    }\n  }\n\n  clean() {\n    if (this.state.password.trim().length) {\n      return true\n    } else {\n      snackbar.error(gettext(\"Enter new password.\"))\n      return false\n    }\n  }\n\n  send() {\n    return ajax.post(misago.get(\"CHANGE_PASSWORD_API\"), {\n      password: this.state.password,\n    })\n  }\n\n  handleSuccess(apiResponse) {\n    this.props.callback(apiResponse)\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 403 && rejection.ban) {\n      showBannedPage(rejection.ban)\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"well well-form well-form-reset-password\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"form-group\">\n            <div className=\"control-input\">\n              <input\n                type=\"password\"\n                className=\"form-control\"\n                placeholder={gettext(\"Enter new password\")}\n                disabled={this.state.isLoading}\n                onChange={this.bindInput(\"password\")}\n                value={this.state.password}\n              />\n            </div>\n          </div>\n\n          <Button\n            className=\"btn-primary btn-block\"\n            loading={this.state.isLoading}\n          >\n            {gettext(\"Change password\")}\n          </Button>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport class PasswordChangedPage extends React.Component {\n  getMessage() {\n    return interpolate(\n      gettext(\"%(username)s, your password has been changed successfully.\"),\n      {\n        username: this.props.user.username,\n      },\n      true\n    )\n  }\n\n  showSignIn() {\n    modal.show(SignInModal)\n  }\n\n  render() {\n    return (\n      <div className=\"page page-message page-message-success page-forgotten-password-changed\">\n        <div className=\"container\">\n          <div className=\"message-panel\">\n            <div className=\"message-icon\">\n              <span className=\"material-icon\">check</span>\n            </div>\n\n            <div className=\"message-body\">\n              <p className=\"lead\">{this.getMessage()}</p>\n              <p>\n                {gettext(\n                  \"You will have to sign in using new password before continuing.\"\n                )}\n              </p>\n              <p>\n                <button\n                  type=\"button\"\n                  className=\"btn btn-primary\"\n                  onClick={this.showSignIn}\n                >\n                  {gettext(\"Sign in\")}\n                </button>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default class extends React.Component {\n  complete = (apiResponse) => {\n    auth.softSignOut()\n\n    // nuke \"redirect_to\" field so we don't end\n    // coming back to error page after sign in\n    $('#hidden-login-form input[name=\"redirect_to\"]').remove()\n\n    ReactDOM.render(\n      <PasswordChangedPage user={apiResponse} />,\n      document.getElementById(\"page-mount\")\n    )\n  }\n\n  render() {\n    return <ResetPasswordForm callback={this.complete} />\n  }\n}\n","import misago from \"misago\"\nimport ResetPasswordForm from \"misago/components/reset-password-form\"\nimport mount from \"misago/utils/mount-component\"\n\nexport default function initializer() {\n  if (document.getElementById(\"reset-password-form-mount\")) {\n    mount(ResetPasswordForm, \"reset-password-form-mount\", false)\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:reset-password-form\",\n  initializer: initializer,\n  after: \"store\",\n})\n","import React from \"react\"\nimport misago from \"misago\"\nimport Form from \"misago/components/form\"\nimport { load as updatePosts } from \"misago/reducers/posts\"\nimport { update as updateSearch } from \"misago/reducers/search\"\nimport { hydrate as updateUsers } from \"misago/reducers/users\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport { FlexRow, FlexRowCol, FlexRowSection } from \"../FlexRow\"\nimport {\n  PageHeader,\n  PageHeaderContainer,\n  PageHeaderBanner,\n  PageHeaderDetails,\n} from \"../PageHeader\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n      query: props.search.query,\n    }\n  }\n\n  componentDidMount() {\n    if (this.state.query.length) {\n      this.handleSubmit()\n    }\n  }\n\n  onQueryChange = (event) => {\n    this.changeValue(\"query\", event.target.value)\n  }\n\n  clean() {\n    if (!this.state.query.trim().length) {\n      snackbar.error(gettext(\"You have to enter search query.\"))\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    store.dispatch(\n      updateSearch({\n        isLoading: true,\n      })\n    )\n\n    const query = this.state.query.trim()\n\n    let url = window.location.href\n    const urlQuery = url.indexOf(\"?q=\")\n    if (urlQuery > 0) {\n      url = url.substring(0, urlQuery + 3)\n    }\n    window.history.pushState({}, \"\", url + encodeURIComponent(query))\n\n    return ajax.get(misago.get(\"SEARCH_API\"), { q: query })\n  }\n\n  handleSuccess(providers) {\n    store.dispatch(\n      updateSearch({\n        query: this.state.query.trim(),\n        isLoading: false,\n        providers,\n      })\n    )\n\n    providers.forEach((provider) => {\n      if (provider.id === \"users\") {\n        store.dispatch(updateUsers(provider.results.results))\n      } else if (provider.id === \"threads\") {\n        store.dispatch(updatePosts(provider.results))\n      }\n    })\n  }\n\n  handleError(rejection) {\n    snackbar.apiError(rejection)\n\n    store.dispatch(\n      updateSearch({\n        isLoading: false,\n      })\n    )\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <PageHeaderContainer>\n          <PageHeader styleName=\"site-search\">\n            <PageHeaderBanner styleName=\"site-search\">\n              <h1>{gettext(\"Search\")}</h1>\n            </PageHeaderBanner>\n            <PageHeaderDetails className=\"page-header-search-form\">\n              <FlexRow>\n                <FlexRowSection auto>\n                  <FlexRowCol>\n                    <input\n                      className=\"form-control\"\n                      disabled={this.state.isLoading}\n                      type=\"text\"\n                      value={this.state.query}\n                      placeholder={gettext(\"Search\")}\n                      onChange={this.onQueryChange}\n                    />\n                  </FlexRowCol>\n                  <FlexRowCol shrink>\n                    <button\n                      className=\"btn btn-secondary btn-icon btn-outline\"\n                      disabled={this.state.isLoading}\n                    >\n                      <span className=\"material-icon\">search</span>\n                    </button>\n                  </FlexRowCol>\n                </FlexRowSection>\n              </FlexRow>\n            </PageHeaderDetails>\n          </PageHeader>\n        </PageHeaderContainer>\n      </form>\n    )\n  }\n}\n","import React from \"react\"\nimport { Link } from \"react-router\"\n\nexport default function (props) {\n  return (\n    <div className=\"list-group nav-side\">\n      {props.providers.map((provider) => {\n        return (\n          <Link\n            activeClassName=\"active\"\n            className=\"list-group-item\"\n            key={provider.id}\n            to={provider.url}\n          >\n            <span className=\"material-icon\">{provider.icon}</span>\n            {provider.name}\n            <Badge results={provider.results} />\n          </Link>\n        )\n      })}\n    </div>\n  )\n}\n\nexport function Badge(props) {\n  if (!props.results) return null\n\n  let count = props.results.count\n  if (count > 1000000) {\n    count = Math.ceil(count / 1000000) + \"KK\"\n  } else if (count > 1000) {\n    count = Math.ceil(count / 1000) + \"K\"\n  }\n\n  return <span className=\"badge\">{count}</span>\n}\n","import React from \"react\"\nimport PageContainer from \"../PageContainer\"\nimport SearchForm from \"./form\"\nimport SideNav from \"./sidenav\"\n\nexport default function (props) {\n  return (\n    <div className=\"page page-search\">\n      <SearchForm provider={props.provider} search={props.search} />\n      <PageContainer>\n        <div className=\"row\">\n          <div className=\"col-md-3\">\n            <SideNav providers={props.search.providers} />\n          </div>\n          <div className=\"col-md-9\">\n            {props.children}\n            <SearchTime provider={props.provider} search={props.search} />\n          </div>\n        </div>\n      </PageContainer>\n    </div>\n  )\n}\n\nexport function SearchTime(props) {\n  let time = null\n  props.search.providers.forEach((p) => {\n    if (p.id === props.provider.id) {\n      time = p.time\n    }\n  })\n\n  if (time === null) return null\n\n  const copy = gettext(\"Search took %(time)s s to complete\")\n\n  return (\n    <footer className=\"search-footer\">\n      <p>{interpolate(copy, { time }, true)}</p>\n    </footer>\n  )\n}\n","import React from \"react\"\nimport PostFeed from \"misago/components/post-feed\"\nimport Button from \"misago/components/button\"\nimport MisagoMarkup from \"misago/components/misago-markup\"\nimport {\n  update as updatePosts,\n  append as appendPosts,\n} from \"misago/reducers/posts\"\nimport { updateProvider } from \"misago/reducers/search\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default function (props) {\n  return (\n    <div>\n      <PostFeed isReady={true} posts={props.results} />\n      <LoadMore {...props} />\n    </div>\n  )\n}\n\nexport class LoadMore extends React.Component {\n  onClick = () => {\n    store.dispatch(\n      updatePosts({\n        isBusy: true,\n      })\n    )\n\n    ajax\n      .get(this.props.provider.api, {\n        q: this.props.query,\n        page: this.props.next,\n      })\n      .then(\n        (providers) => {\n          providers.forEach((provider) => {\n            if (provider.id !== \"threads\") return\n            store.dispatch(appendPosts(provider.results))\n            store.dispatch(updateProvider(provider))\n          })\n\n          store.dispatch(\n            updatePosts({\n              isBusy: false,\n            })\n          )\n        },\n        (rejection) => {\n          snackbar.apiError(rejection)\n\n          store.dispatch(\n            updatePosts({\n              isBusy: false,\n            })\n          )\n        }\n      )\n  }\n\n  render() {\n    if (!this.props.more) return null\n\n    return (\n      <div className=\"pager-more\">\n        <Button\n          className=\"btn btn-default btn-outline\"\n          loading={this.props.isBusy}\n          onClick={this.onClick}\n        >\n          {gettext(\"Show more\")}\n        </Button>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport SearchPage from \"../page\"\nimport Results from \"./results\"\n\nexport default function (props) {\n  return (\n    <SearchPage provider={props.route.provider} search={props.search}>\n      <Blankslate\n        loading={props.search.isLoading}\n        query={props.search.query}\n        posts={props.posts}\n      >\n        <Results\n          provider={props.route.provider}\n          query={props.search.query}\n          {...props.posts}\n        />\n      </Blankslate>\n    </SearchPage>\n  )\n}\n\nexport function Blankslate({ children, loading, posts, query }) {\n  if (posts && posts.count) return children\n\n  if (query.length) {\n    return (\n      <p className=\"lead\">\n        {loading\n          ? gettext(\"Loading results...\")\n          : gettext(\"No threads matching search query have been found.\")}\n      </p>\n    )\n  }\n\n  return (\n    <p className=\"lead\">\n      {gettext(\"Enter at least two characters to search threads.\")}\n    </p>\n  )\n}\n","import React from \"react\"\nimport SearchPage from \"../page\"\nimport UsersList from \"misago/components/users-list\"\n\nexport default function (props) {\n  return (\n    <SearchPage provider={props.route.provider} search={props.search}>\n      <Blankslate\n        loading={props.search.isLoading}\n        query={props.search.query}\n        users={props.users}\n      >\n        <UsersList\n          cols={3}\n          isReady={!props.search.isLoading}\n          users={props.users}\n        />\n      </Blankslate>\n    </SearchPage>\n  )\n}\n\nexport function Blankslate({ children, loading, query, users }) {\n  if (users.length) return children\n\n  if (query.length) {\n    return (\n      <p className=\"lead\">\n        {loading\n          ? gettext(\"Loading results...\")\n          : gettext(\"No users matching search query have been found.\")}\n      </p>\n    )\n  }\n\n  return (\n    <p className=\"lead\">\n      {gettext(\"Enter at least two characters to search users.\")}\n    </p>\n  )\n}\n","import { connect } from \"react-redux\"\nimport SearchThreads from \"./threads\"\nimport SearchUsers from \"./users\"\n\nconst components = {\n  threads: SearchThreads,\n  users: SearchUsers,\n}\n\nexport function select(store) {\n  return {\n    posts: store.posts,\n    search: store.search,\n    tick: store.tick.tick,\n    user: store.auth.user,\n    users: store.users,\n  }\n}\n\nexport default function (providers) {\n  return providers.map((provider) => {\n    return {\n      path: provider.url,\n      component: connect(select)(components[provider.id]),\n      provider: provider,\n    }\n  })\n}\n","import paths from \"misago/components/search\"\nimport misago from \"misago\"\nimport mount from \"misago/utils/routed-component\"\n\nexport default function initializer(context) {\n  if (context.get(\"CURRENT_LINK\") === \"misago:search\") {\n    mount({\n      paths: paths(misago.get(\"SEARCH_PROVIDERS\")),\n    })\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:search\",\n  initializer: initializer,\n  after: \"store\",\n})\n","import React from \"react\"\n\nconst TYPES_CLASSES = {\n  info: \"alert-info\",\n  success: \"alert-success\",\n  warning: \"alert-warning\",\n  error: \"alert-danger\",\n}\n\nexport class Snackbar extends React.Component {\n  getSnackbarClass() {\n    let snackbarClass = \"alerts-snackbar\"\n    if (this.props.isVisible) {\n      snackbarClass += \" in\"\n    } else {\n      snackbarClass += \" out\"\n    }\n    return snackbarClass\n  }\n\n  render() {\n    return (\n      <div className={this.getSnackbarClass()}>\n        <p className={\"alert \" + TYPES_CLASSES[this.props.type]}>\n          {this.props.message}\n        </p>\n      </div>\n    )\n  }\n}\n\nexport function select(state) {\n  return state.snackbar\n}\n","import { connect } from \"react-redux\"\nimport misago from \"misago/index\"\nimport { Snackbar, select } from \"misago/components/snackbar\"\nimport mount from \"misago/utils/mount-component\"\n\nexport default function initializer() {\n  mount(connect(select)(Snackbar), \"snackbar-mount\")\n}\n\nmisago.addInitializer({\n  name: \"component:snackbar\",\n  initializer: initializer,\n  after: \"snackbar\",\n})\n","import React from \"react\"\nimport {\n  PageHeader,\n  PageHeaderBanner,\n  PageHeaderContainer,\n} from \"../PageHeader\"\n\nconst Header = ({ backendName }) => {\n  const pageTitleTpl = gettext(\"Sign in with %(backend)s\")\n  const pageTitle = interpolate(pageTitleTpl, { backend: backendName }, true)\n\n  return (\n    <PageHeaderContainer>\n      <PageHeader styleName=\"social-auth\">\n        <PageHeaderBanner styleName=\"social-auth\">\n          <h1>{pageTitle}</h1>\n        </PageHeaderBanner>\n      </PageHeader>\n    </PageHeaderContainer>\n  )\n}\n\nexport default Header\n","import React from \"react\"\nimport misago from \"misago\"\nimport RegisterLegalFootnote from \"misago/components/RegisterLegalFootnote\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport * as validators from \"misago/utils/validators\"\nimport PageContainer from \"../PageContainer\"\nimport Header from \"./header\"\n\nexport default class Register extends Form {\n  constructor(props) {\n    super(props)\n\n    const formValidators = {\n      email: [validators.email()],\n      username: [validators.usernameContent()],\n    }\n\n    if (!!misago.get(\"TERMS_OF_SERVICE_ID\")) {\n      formValidators.termsOfService = [validators.requiredTermsOfService()]\n    }\n\n    if (!!misago.get(\"PRIVACY_POLICY_ID\")) {\n      formValidators.privacyPolicy = [validators.requiredPrivacyPolicy()]\n    }\n\n    this.state = {\n      email: props.email || \"\",\n      emailProtected: !!props.email,\n      username: props.username || \"\",\n\n      termsOfService: null,\n      privacyPolicy: null,\n\n      validators: formValidators,\n      errors: {},\n\n      isLoading: false,\n    }\n  }\n\n  clean() {\n    let errors = this.validate()\n    let lengths = [\n      this.state.email.trim().length,\n      this.state.username.trim().length,\n    ]\n\n    if (lengths.indexOf(0) !== -1) {\n      snackbar.error(gettext(\"Fill out all fields.\"))\n      return false\n    }\n\n    const { validators } = this.state\n\n    const checkTermsOfService = !!misago.get(\"TERMS_OF_SERVICE_ID\")\n    if (checkTermsOfService && this.state.termsOfService === null) {\n      snackbar.error(validators.termsOfService[0](null))\n      return false\n    }\n\n    const checkPrivacyPolicy = !!misago.get(\"PRIVACY_POLICY_ID\")\n    if (checkPrivacyPolicy && this.state.privacyPolicy === null) {\n      snackbar.error(validators.privacyPolicy[0](null))\n      snackbar.error(gettext(\"You need to accept the privacy policy.\"))\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    return ajax.post(this.props.url, {\n      email: this.state.email,\n      username: this.state.username,\n      terms_of_service: this.state.termsOfService,\n      privacy_policy: this.state.privacyPolicy,\n    })\n  }\n\n  handleSuccess(response) {\n    const { onRegistrationComplete } = this.props\n    onRegistrationComplete(response)\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 200) {\n      // We've entered \"errored\" state because response is HTML instead of exptected JSON\n      const { onRegistrationComplete } = this.props\n      const { username } = this.state\n      onRegistrationComplete({ activation: \"active\", step: \"done\", username })\n    } else if (rejection.status === 400) {\n      const stateUpdate = { errors: rejection }\n      if (rejection.email) {\n        stateUpdate.emailProtected = false\n      }\n      this.setState(stateUpdate)\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  handlePrivacyPolicyChange = (event) => {\n    const value = event.target.value\n    this.handleToggleAgreement(\"privacyPolicy\", value)\n  }\n\n  handleTermsOfServiceChange = (event) => {\n    const value = event.target.value\n    this.handleToggleAgreement(\"termsOfService\", value)\n  }\n\n  handleToggleAgreement = (agreement, value) => {\n    this.setState((prevState, props) => {\n      if (prevState[agreement] === null) {\n        const errors = { ...prevState.errors, [agreement]: null }\n        return { errors, [agreement]: value }\n      }\n\n      const validator = this.state.validators[agreement][0]\n      const errors = { ...prevState.errors, [agreement]: [validator(null)] }\n      return { errors, [agreement]: null }\n    })\n  }\n\n  render() {\n    const { backend_name } = this.props\n    const { email, emailProtected, username, isLoading } = this.state\n\n    let emailHelpText = null\n    if (emailProtected) {\n      const emailHelpTextTpl = gettext(\n        \"Your e-mail address has been verified by %(backend)s.\"\n      )\n      emailHelpText = interpolate(\n        emailHelpTextTpl,\n        { backend: backend_name },\n        true\n      )\n    }\n\n    return (\n      <div className=\"page page-social-auth page-social-auth-register\">\n        <Header backendName={backend_name} />\n        <PageContainer>\n          <div className=\"row\">\n            <div className=\"col-md-6 col-md-offset-3\">\n              <form onSubmit={this.handleSubmit}>\n                <div className=\"panel panel-default panel-form\">\n                  <div className=\"panel-heading\">\n                    <h3 className=\"panel-title\">\n                      {gettext(\"Complete your details\")}\n                    </h3>\n                  </div>\n                  <div className=\"panel-body\">\n                    <FormGroup\n                      for=\"id_username\"\n                      label={gettext(\"Username\")}\n                      validation={this.state.errors.username}\n                    >\n                      <input\n                        type=\"text\"\n                        id=\"id_username\"\n                        className=\"form-control\"\n                        disabled={isLoading}\n                        onChange={this.bindInput(\"username\")}\n                        value={username}\n                      />\n                    </FormGroup>\n                    <FormGroup\n                      for=\"id_email\"\n                      label={gettext(\"E-mail address\")}\n                      helpText={emailHelpText}\n                      validation={\n                        emailProtected ? null : this.state.errors.email\n                      }\n                    >\n                      <input\n                        type=\"email\"\n                        id=\"id_email\"\n                        className=\"form-control\"\n                        disabled={isLoading || emailProtected}\n                        onChange={this.bindInput(\"email\")}\n                        value={email}\n                      />\n                    </FormGroup>\n                    <RegisterLegalFootnote\n                      errors={this.state.errors}\n                      privacyPolicy={this.state.privacyPolicy}\n                      termsOfService={this.state.termsOfService}\n                      onPrivacyPolicyChange={this.handlePrivacyPolicyChange}\n                      onTermsOfServiceChange={this.handleTermsOfServiceChange}\n                    />\n                  </div>\n                  <div className=\"panel-footer\">\n                    <Button\n                      className=\"btn-primary\"\n                      loading={this.state.isLoading}\n                    >\n                      {gettext(\"Sign in\")}\n                    </Button>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </div>\n        </PageContainer>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport misago from \"misago\"\nimport PageContainer from \"../PageContainer\"\nimport Header from \"./header\"\n\nconst Complete = ({ activation, backend_name, username }) => {\n  let icon = \"\"\n  let message = \"\"\n  if (activation === \"user\") {\n    message = gettext(\n      \"%(username)s, your account has been created but you need to activate it before you will be able to sign in.\"\n    )\n  } else if (activation === \"admin\") {\n    message = gettext(\n      \"%(username)s, your account has been created but board administrator will have to activate it before you will be able to sign in.\"\n    )\n  } else {\n    message = gettext(\n      \"%(username)s, your account has been created and you have been signed in to it.\"\n    )\n  }\n\n  if (activation === \"active\") {\n    icon = \"check\"\n  } else {\n    icon = \"info_outline\"\n  }\n\n  return (\n    <div className=\"page page-social-auth page-social-auth-register\">\n      <Header backendName={backend_name} />\n      <PageContainer>\n        <div className=\"row\">\n          <div className=\"col-md-6 col-md-offset-3\">\n            <div className=\"panel panel-default panel-form\">\n              <div className=\"panel-heading\">\n                <h3 className=\"panel-title\">\n                  {gettext(\"Registration completed!\")}\n                </h3>\n              </div>\n              <div className=\"panel-body panel-message-body\">\n                <div className=\"message-icon\">\n                  <span className=\"material-icon\">{icon}</span>\n                </div>\n                <div className=\"message-body\">\n                  <p className=\"lead\">\n                    {interpolate(message, { username }, true)}\n                  </p>\n                  <p className=\"help-block\">\n                    <a\n                      className=\"btn btn-default\"\n                      href={misago.get(\"MISAGO_PATH\")}\n                    >\n                      {gettext(\"Return to forum index\")}\n                    </a>\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </PageContainer>\n    </div>\n  )\n}\n\nexport default Complete\n","import React from \"react\"\nimport Register from \"./register\"\nimport Complete from \"./complete\"\n\nexport default class SocialAuth extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      step: props.step,\n\n      activation: props.activation || \"\",\n      email: props.email || \"\",\n      username: props.username || \"\",\n    }\n  }\n\n  handleRegistrationComplete = ({ activation, email, step, username }) => {\n    this.setState({ activation, email, step, username })\n  }\n\n  render() {\n    const { backend_name, url } = this.props\n    const { activation, email, step, username } = this.state\n\n    if (step === \"register\") {\n      return (\n        <Register\n          backend_name={backend_name}\n          email={email}\n          url={url}\n          username={username}\n          onRegistrationComplete={this.handleRegistrationComplete}\n        />\n      )\n    }\n\n    return (\n      <Complete\n        activation={activation}\n        backend_name={backend_name}\n        email={email}\n        url={url}\n        username={username}\n      />\n    )\n  }\n}\n","import React from \"react\"\nimport SocialAuth from \"misago/components/social-auth\"\nimport misago from \"misago\"\nimport mount from \"misago/utils/mount-component\"\n\nexport default function initializer(context) {\n  if (context.get(\"CURRENT_LINK\") === \"misago:social-complete\") {\n    const props = context.get(\"SOCIAL_AUTH_FORM\")\n    mount(<SocialAuth {...props} />, \"page-mount\")\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:social-auth\",\n  initializer: initializer,\n  after: \"store\",\n})\n","import React from \"react\"\nimport Form from \"./form\"\nimport FormGroup from \"misago/components/form-group\"\nimport * as participants from \"misago/reducers/participants\"\nimport { updateAcl } from \"misago/reducers/thread\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      username: \"\",\n    }\n  }\n\n  onUsernameChange = (event) => {\n    this.changeValue(\"username\", event.target.value)\n  }\n\n  clean() {\n    if (!this.state.username.trim().length) {\n      snackbar.error(gettext(\"You have to enter user name.\"))\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    return ajax.patch(this.props.thread.api.index, [\n      { op: \"add\", path: \"participants\", value: this.state.username },\n      { op: \"add\", path: \"acl\", value: 1 },\n    ])\n  }\n\n  handleSuccess(data) {\n    store.dispatch(updateAcl(data))\n    store.dispatch(participants.replace(data.participants))\n\n    snackbar.success(gettext(\"New participant has been added to thread.\"))\n\n    modal.hide()\n  }\n\n  render() {\n    return (\n      <div className=\"modal-dialog modal-sm\" role=\"document\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"modal-content\">\n            <ModalHeader />\n            <div className=\"modal-body\">\n              <FormGroup for=\"id_username\" label={gettext(\"User to add\")}>\n                <input\n                  id=\"id_username\"\n                  className=\"form-control\"\n                  disabled={this.state.isLoading}\n                  onChange={this.onUsernameChange}\n                  type=\"text\"\n                  value={this.state.username}\n                />\n              </FormGroup>\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn btn-block btn-primary\"\n                disabled={this.state.isLoading}\n              >\n                {gettext(\"Add participant\")}\n              </button>\n              <button\n                className=\"btn btn-block btn-default\"\n                data-dismiss=\"modal\"\n                disabled={this.state.isLoading}\n                type=\"button\"\n              >\n                {gettext(\"Cancel\")}\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport function ModalHeader(props) {\n  return (\n    <div className=\"modal-header\">\n      <button\n        aria-label={pgettext(\"modal\", \"Close\")}\n        className=\"close\"\n        data-dismiss=\"modal\"\n        type=\"button\"\n      >\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n      <h4 className=\"modal-title\">{gettext(\"Add participant\")}</h4>\n    </div>\n  )\n}\n","import React from \"react\"\nimport AddParticipantModal from \"misago/components/add-participant\"\nimport modal from \"misago/services/modal\"\n\nexport default class extends React.Component {\n  onClick = () => {\n    modal.show(<AddParticipantModal thread={this.props.thread} />)\n  }\n\n  render() {\n    if (!this.props.thread.acl.can_add_participants) return null\n\n    return (\n      <div className=\"col-xs-12 col-sm-3\">\n        <button\n          className=\"btn btn-default btn-block\"\n          onClick={this.onClick}\n          type=\"button\"\n        >\n          <span className=\"material-icon\">person_add</span>\n          {gettext(\"Add participant\")}\n        </button>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport { changeOwner } from \"./actions\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.isUser = props.participant.id === props.user.id\n  }\n\n  onClick = () => {\n    let confirmed = false\n    if (this.isUser) {\n      confirmed = window.confirm(\n        gettext(\"Are you sure you want to take over this thread?\")\n      )\n    } else {\n      const message = gettext(\n        \"Are you sure you want to change thread owner to %(user)s?\"\n      )\n      confirmed = window.confirm(\n        interpolate(\n          message,\n          {\n            user: this.props.participant.username,\n          },\n          true\n        )\n      )\n    }\n\n    if (!confirmed) return\n\n    changeOwner(this.props.thread, this.props.participant)\n  }\n\n  render() {\n    if (this.props.participant.is_owner) return null\n    if (!this.props.thread.acl.can_change_owner) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          {gettext(\"Make owner\")}\n        </button>\n      </li>\n    )\n  }\n}\n","import * as participants from \"misago/reducers/participants\"\nimport { updateAcl } from \"misago/reducers/thread\"\nimport misago from \"misago\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport function leave(thread, participant) {\n  ajax\n    .patch(thread.api.index, [\n      { op: \"remove\", path: \"participants\", value: participant.id },\n    ])\n    .then(\n      () => {\n        snackbar.success(gettext(\"You have left this thread.\"))\n        window.setTimeout(() => {\n          window.location = misago.get(\"PRIVATE_THREADS_URL\")\n        }, 3 * 1000)\n      },\n      (rejection) => {\n        snackbar.apiError(rejection)\n      }\n    )\n}\n\nexport function remove(thread, participant) {\n  ajax\n    .patch(thread.api.index, [\n      { op: \"remove\", path: \"participants\", value: participant.id },\n      { op: \"add\", path: \"acl\", value: 1 },\n    ])\n    .then(\n      (data) => {\n        store.dispatch(updateAcl(data))\n        store.dispatch(participants.replace(data.participants))\n\n        const message = gettext(\"%(user)s has been removed from this thread.\")\n        snackbar.success(\n          interpolate(\n            message,\n            {\n              user: participant.username,\n            },\n            true\n          )\n        )\n      },\n      (rejection) => {\n        snackbar.apiError(rejection)\n      }\n    )\n}\n\nexport function changeOwner(thread, participant) {\n  ajax\n    .patch(thread.api.index, [\n      { op: \"replace\", path: \"owner\", value: participant.id },\n      { op: \"add\", path: \"acl\", value: 1 },\n    ])\n    .then(\n      (data) => {\n        store.dispatch(updateAcl(data))\n        store.dispatch(participants.replace(data.participants))\n\n        const message = gettext(\"%(user)s has been made new thread owner.\")\n        snackbar.success(\n          interpolate(\n            message,\n            {\n              user: participant.username,\n            },\n            true\n          )\n        )\n      },\n      (rejection) => {\n        snackbar.apiError(rejection)\n      }\n    )\n}\n","import React from \"react\"\nimport { remove, leave } from \"./actions\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.isUser = props.participant.id === props.user.id\n  }\n\n  onClick = () => {\n    let confirmed = false\n    if (this.isUser) {\n      confirmed = window.confirm(\n        gettext(\"Are you sure you want to leave this thread?\")\n      )\n    } else {\n      const message = gettext(\n        \"Are you sure you want to remove %(user)s from this thread?\"\n      )\n      confirmed = window.confirm(\n        interpolate(\n          message,\n          {\n            user: this.props.participant.username,\n          },\n          true\n        )\n      )\n    }\n\n    if (!confirmed) return\n\n    if (this.isUser) {\n      leave(this.props.thread, this.props.participant)\n    } else {\n      remove(this.props.thread, this.props.participant)\n    }\n  }\n\n  render() {\n    const isModerator = this.props.user.acl.can_moderate_private_threads\n\n    if (!(this.props.userIsOwner || this.isUser || isModerator)) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          {this.isUser ? gettext(\"Leave thread\") : gettext(\"Remove\")}\n        </button>\n      </li>\n    )\n  }\n}\n","import React from \"react\"\nimport MakeOwner from \"./make-owner\"\nimport Remove from \"./remove\"\nimport Avatar from \"misago/components/avatar\"\n\nexport default function (props) {\n  const participant = props.participant\n\n  let className = \"btn btn-default\"\n  if (participant.is_owner) {\n    className = \"btn btn-primary\"\n  }\n  className += \" btn-user btn-block\"\n\n  return (\n    <div className=\"col-xs-12 col-sm-3 col-md-2 participant-card\">\n      <div className=\"dropdown\">\n        <button\n          aria-haspopup=\"true\"\n          aria-expanded=\"false\"\n          className={className}\n          data-toggle=\"dropdown\"\n          type=\"button\"\n        >\n          <Avatar size=\"34\" user={participant} />\n          <span className=\"btn-text\">{participant.username}</span>\n        </button>\n        <ul className=\"dropdown-menu stick-to-bottom\">\n          <UserStatus isOwner={participant.is_owner} />\n          <li className=\"dropdown-header\" />\n          <li>\n            <a href={participant.url}>{gettext(\"See profile\")}</a>\n          </li>\n          <li role=\"separator\" className=\"divider\" />\n          <MakeOwner {...props} />\n          <Remove {...props} />\n        </ul>\n      </div>\n    </div>\n  )\n}\n\nexport function UserStatus({ isOwner }) {\n  if (!isOwner) return null\n\n  return (\n    <li className=\"dropdown-header dropdown-header-owner\">\n      <span className=\"material-icon\">start</span>\n      <span className=\"icon-text\">{gettext(\"Thread owner\")}</span>\n    </li>\n  )\n}\n","import React from \"react\"\nimport Card from \"./card\"\n\nexport default function ({ participants, thread, user, userIsOwner }) {\n  return (\n    <div className=\"participants-cards\">\n      <div className=\"row\">\n        {participants.map((participant) => {\n          return (\n            <Card\n              key={participant.id}\n              participant={participant}\n              thread={thread}\n              user={user}\n              userIsOwner={userIsOwner}\n            />\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport AddParticipant from \"./add-participant\"\nimport CardsList from \"./cards-list\"\nimport * as utils from \"./utils\"\n\nexport default function (props) {\n  if (!props.participants.length) return null\n\n  return (\n    <div className=\"panel panel-default panel-participants\">\n      <div className=\"panel-body\">\n        <CardsList\n          userIsOwner={getUserIsOwner(props.user, props.participants)}\n          {...props}\n        />\n        <div className=\"row\">\n          <AddParticipant thread={props.thread} />\n          <div className=\"col-xs-12 col-sm-9\">\n            <p>{utils.getParticipantsCopy(props.participants)}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport function getUserIsOwner(user, participants) {\n  return participants[0].id === user.id\n}\n","export function getParticipantsCopy(participants) {\n  const count = participants.length\n  const message = ngettext(\n    \"This thread has %(users)s participant.\",\n    \"This thread has %(users)s participants.\",\n    count\n  )\n\n  return interpolate(\n    message,\n    {\n      users: count,\n    },\n    true\n  )\n}\n","import React from \"react\"\n\nexport default function (props) {\n  return (\n    <div className=\"poll-choices-bars\">\n      {props.poll.choices.map((choice) => {\n        return (\n          <PollChoice choice={choice} key={choice.hash} poll={props.poll} />\n        )\n      })}\n    </div>\n  )\n}\n\nexport function PollChoice(props) {\n  let proc = 0\n  if (props.choice.votes && props.poll.votes) {\n    proc = Math.ceil((props.choice.votes * 100) / props.poll.votes)\n  }\n\n  return (\n    <dl className=\"dl-horizontal\">\n      <dt>{props.choice.label}</dt>\n      <dd>\n        <div className=\"progress\">\n          <div\n            className=\"progress-bar\"\n            role=\"progressbar\"\n            aria-valuenow={proc}\n            aria-valuemin=\"0\"\n            aria-valuemax=\"100\"\n            style={{ width: proc + \"%\" }}\n          >\n            <span className=\"sr-only\">\n              {getVotesLabel(props.votes, props.proc)}\n            </span>\n          </div>\n        </div>\n        <ul className=\"list-unstyled list-inline poll-chart\">\n          <ChoiceVotes proc={proc} votes={props.choice.votes} />\n          <UserChoice selected={props.choice.selected} />\n        </ul>\n      </dd>\n    </dl>\n  )\n}\n\nexport function ChoiceVotes(props) {\n  return (\n    <li className=\"poll-chart-votes\">\n      {getVotesLabel(props.votes, props.proc)}\n    </li>\n  )\n}\n\nexport function getVotesLabel(votes, proc) {\n  const message = npgettext(\n    \"thread poll\",\n    \"%(votes)s vote, %(proc)s% of total.\",\n    \"%(votes)s votes, %(proc)s% of total.\",\n    votes\n  )\n\n  return interpolate(\n    message,\n    {\n      votes: votes,\n      proc: proc,\n    },\n    true\n  )\n}\n\nexport function UserChoice(props) {\n  if (!props.selected) return null\n\n  return (\n    <li className=\"poll-chart-selected\">\n      <span className=\"material-icon\">check_box</span>\n      {pgettext(\"thread poll\", \"You've voted on this choice.\")}\n    </li>\n  )\n}\n","import React from \"react\"\nimport moment from \"moment\"\nimport Message from \"misago/components/modal-message\"\nimport Loader from \"misago/components/modal-loader\"\nimport ajax from \"misago/services/ajax\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: true,\n      error: null,\n      data: [],\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(this.props.poll.api.votes).then(\n      (data) => {\n        const hydratedData = data.map((choice) => {\n          return Object.assign({}, choice, {\n            voters: choice.voters.map((voter) => {\n              return Object.assign({}, voter, {\n                voted_on: moment(voter.voted_on),\n              })\n            }),\n          })\n        })\n\n        this.setState({\n          isLoading: false,\n          data: hydratedData,\n        })\n      },\n      (rejection) => {\n        this.setState({\n          isLoading: false,\n          error: rejection.detail,\n        })\n      }\n    )\n  }\n\n  render() {\n    return (\n      <div\n        className={\n          \"modal-dialog\" + (this.state.error ? \" modal-message\" : \" modal-sm\")\n        }\n        role=\"document\"\n      >\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"modal\"\n              aria-label={pgettext(\"modal\", \"Close\")}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">\n              {pgettext(\"thread poll\", \"Poll votes\")}\n            </h4>\n          </div>\n\n          <ModalBody\n            data={this.state.data}\n            error={this.state.error}\n            isLoading={this.state.isLoading}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport function ModalBody(props) {\n  if (props.isLoading) {\n    return <Loader />\n  } else if (props.error) {\n    return <Message icon=\"error_outline\" message={props.error} />\n  }\n\n  return <ChoicesList data={props.data} />\n}\n\nexport function ChoicesList(props) {\n  return (\n    <div className=\"modal-body modal-poll-votes\">\n      <ul className=\"list-unstyled votes-details\">\n        {props.data.map((choice) => {\n          return <ChoiceDetails key={choice.hash} {...choice} />\n        })}\n      </ul>\n    </div>\n  )\n}\n\nexport function ChoiceDetails(props) {\n  return (\n    <li>\n      <h4>{props.label}</h4>\n      <VotesCount votes={props.votes} />\n      <VotesList voters={props.voters} />\n      <hr />\n    </li>\n  )\n}\n\nexport function VotesCount(props) {\n  const message = npgettext(\n    \"thread poll\",\n    \"%(votes)s user has voted for this choice.\",\n    \"%(votes)s users have voted for this choice.\",\n    props.votes\n  )\n\n  const label = interpolate(\n    message,\n    {\n      votes: props.votes,\n    },\n    true\n  )\n\n  return <p>{label}</p>\n}\n\nexport function VotesList(props) {\n  if (!props.voters.length) return null\n\n  return (\n    <ul className=\"list-unstyled\">\n      {props.voters.map((user) => {\n        return <Voter key={user.username} {...user} />\n      })}\n    </ul>\n  )\n}\n\nexport function Voter(props) {\n  if (props.url) {\n    return (\n      <li>\n        <a className=\"item-title\" href={props.url}>\n          {props.username}\n        </a>{\" \"}\n        <VoteDate voted_on={props.voted_on} />\n      </li>\n    )\n  }\n\n  return (\n    <li>\n      <strong>{props.username}</strong> <VoteDate voted_on={props.voted_on} />\n    </li>\n  )\n}\n\nexport function VoteDate(props) {\n  return (\n    <abbr className=\"text-muted\" title={props.voted_on.format(\"LLL\")}>\n      {props.voted_on.fromNow()}\n    </abbr>\n  )\n}\n","import React from \"react\"\nimport Modal from \"./modal\"\nimport * as poll from \"misago/reducers/poll\"\nimport * as thread from \"misago/reducers/thread\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport posting from \"misago/services/posting\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default function (props) {\n  const { isPollOver, poll, showVoting, thread } = props\n\n  if (!isVisible(isPollOver, poll.acl, poll)) return null\n\n  const controls = []\n\n  const canVote = poll.acl.can_vote\n  const canChangeVote = !poll.hasSelectedChoices || poll.allow_revotes\n\n  if (canVote && canChangeVote) controls.push(0)\n  if (poll.is_public || poll.acl.can_see_votes) controls.push(1)\n  if (poll.acl.can_edit) controls.push(2)\n  if (poll.acl.can_delete) controls.push(3)\n\n  return (\n    <div className=\"row poll-options\">\n      <ChangeVote\n        controls={controls}\n        isPollOver={isPollOver}\n        poll={poll}\n        showVoting={showVoting}\n      />\n      <SeeVotes controls={controls} poll={poll} />\n      <Edit\n        controls={controls}\n        poll={poll}\n        thread={thread}\n        onClick={props.edit}\n      />\n      <Delete controls={controls} poll={poll} />\n    </div>\n  )\n}\n\nexport function isVisible(isPollOver, acl, poll) {\n  return (\n    poll.is_public ||\n    acl.can_delete ||\n    acl.can_edit ||\n    acl.can_see_votes ||\n    (acl.can_vote &&\n      !isPollOver &&\n      (!poll.hasSelectedChoices || poll.allow_revotes))\n  )\n}\n\nexport function getClassName(controls, control) {\n  let className = \"col-xs-6\"\n\n  if (controls.length === 1) {\n    className = \"col-xs-12\"\n  }\n\n  if (controls.length === 3 && controls[0] === control) {\n    className = \"col-xs-12\"\n  }\n\n  return className + \" col-sm-3 col-md-2\"\n}\n\nexport function ChangeVote(props) {\n  const canVote = props.poll.acl.can_vote\n  const canChangeVote =\n    !props.poll.hasSelectedChoices || props.poll.allow_revotes\n\n  if (!(canVote && canChangeVote)) return null\n\n  return (\n    <div className={getClassName(props.controls, 0)}>\n      <button\n        className=\"btn btn-default btn-block btn-sm\"\n        disabled={props.poll.isBusy}\n        onClick={props.showVoting}\n        type=\"button\"\n      >\n        {pgettext(\"thread poll\", \"Vote\")}\n      </button>\n    </div>\n  )\n}\n\nexport class SeeVotes extends React.Component {\n  onClick = () => {\n    modal.show(<Modal poll={this.props.poll} />)\n  }\n\n  render() {\n    const seeVotes =\n      this.props.poll.is_public || this.props.poll.acl.can_see_votes\n    if (!seeVotes) return null\n\n    return (\n      <div className={getClassName(this.props.controls, 1)}>\n        <button\n          className=\"btn btn-default btn-block btn-sm\"\n          disabled={this.props.poll.isBusy}\n          onClick={this.onClick}\n          type=\"button\"\n        >\n          {pgettext(\"thread poll\", \"See votes\")}\n        </button>\n      </div>\n    )\n  }\n}\n\nexport function Edit(props) {\n  if (!props.poll.acl.can_edit) return null\n\n  return (\n    <div className={getClassName(props.controls, 2)}>\n      <button\n        className=\"btn btn-default btn-block btn-sm\"\n        disabled={props.poll.isBusy}\n        onClick={props.onClick}\n        type=\"button\"\n      >\n        {pgettext(\"thread poll\", \"Edit\")}\n      </button>\n    </div>\n  )\n}\n\nexport class Delete extends React.Component {\n  onClick = () => {\n    const deletePoll = window.confirm(\n      pgettext(\n        \"thread poll\",\n        \"Are you sure you want to delete this poll? This action is not reversible.\"\n      )\n    )\n    if (!deletePoll) return false\n\n    store.dispatch(poll.busy())\n\n    ajax\n      .delete(this.props.poll.api.index)\n      .then(this.handleSuccess, this.handleError)\n  }\n\n  handleSuccess = (newThreadAcl) => {\n    snackbar.success(pgettext(\"thread poll\", \"Poll has been deleted\"))\n    store.dispatch(poll.remove())\n    store.dispatch(thread.updateAcl(newThreadAcl))\n  }\n\n  handleError = (rejection) => {\n    snackbar.apiError(rejection)\n    store.dispatch(poll.release())\n  }\n\n  render() {\n    if (!this.props.poll.acl.can_delete) return null\n\n    return (\n      <div className={getClassName(this.props.controls, 3)}>\n        <button\n          className=\"btn btn-default btn-block btn-sm\"\n          disabled={this.props.poll.isBusy}\n          onClick={this.onClick}\n          type=\"button\"\n        >\n          {pgettext(\"thread poll\", \"Delete\")}\n        </button>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport escapeHtml from \"misago/utils/escape-html\"\n\nconst DATE_ABBR = '<abbr title=\"%(absolute)s\">%(relative)s</abbr>'\nconst USER_SPAN = '<span class=\"item-title\">%(user)s</span>'\nconst USER_URL = '<a href=\"%(url)s\" class=\"item-title\">%(user)s</a>'\n\nexport default function (props) {\n  return (\n    <ul className=\"list-unstyled list-inline poll-details\">\n      <PollVotes votes={props.poll.votes} />\n      <PollLength poll={props.poll} />\n      <PollIsPublic poll={props.poll} />\n      <PollCreation poll={props.poll} />\n    </ul>\n  )\n}\n\nexport function PollCreation(props) {\n  const message = interpolate(\n    escapeHtml(pgettext(\"thread poll\", \"Started by %(poster)s %(posted_on)s.\")),\n    {\n      poster: getPoster(props.poll),\n      posted_on: getPostedOn(props.poll),\n    },\n    true\n  )\n\n  return (\n    <li\n      className=\"poll-info-creation\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n\nexport function getPoster(poll) {\n  if (poll.url.poster) {\n    return interpolate(\n      USER_URL,\n      {\n        url: escapeHtml(poll.url.poster),\n        user: escapeHtml(poll.poster_name),\n      },\n      true\n    )\n  }\n\n  return interpolate(\n    USER_SPAN,\n    {\n      user: escapeHtml(poll.poster_name),\n    },\n    true\n  )\n}\n\nexport function getPostedOn(poll) {\n  return interpolate(\n    DATE_ABBR,\n    {\n      absolute: escapeHtml(poll.posted_on.format(\"LLL\")),\n      relative: escapeHtml(poll.posted_on.fromNow()),\n    },\n    true\n  )\n}\n\nexport function PollLength(props) {\n  if (!props.poll.length) {\n    return null\n  }\n\n  const message = interpolate(\n    escapeHtml(pgettext(\"thread poll\", \"Voting ends %(ends_on)s.\")),\n    {\n      ends_on: getEndsOn(props.poll),\n    },\n    true\n  )\n\n  return (\n    <li\n      className=\"poll-info-ends-on\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n\nexport function getEndsOn(poll) {\n  return interpolate(\n    DATE_ABBR,\n    {\n      absolute: escapeHtml(poll.endsOn.format(\"LLL\")),\n      relative: escapeHtml(poll.endsOn.fromNow()),\n    },\n    true\n  )\n}\n\nexport function PollVotes(props) {\n  const message = npgettext(\n    \"thread poll\",\n    \"%(votes)s vote.\",\n    \"%(votes)s votes.\",\n    props.votes\n  )\n  const label = interpolate(\n    message,\n    {\n      votes: props.votes,\n    },\n    true\n  )\n\n  return <li className=\"poll-info-votes\">{label}</li>\n}\n\nexport function PollIsPublic(props) {\n  if (!props.poll.is_public) {\n    return null\n  }\n\n  return (\n    <li className=\"poll-info-public\">\n      {pgettext(\"thread poll\", \"Voting is public.\")}\n    </li>\n  )\n}\n","import React from \"react\"\nimport Chart from \"./chart\"\nimport Options from \"./options\"\nimport PollInfo from \"../info\"\n\nexport default function (props) {\n  return (\n    <div className=\"panel panel-default panel-poll\">\n      <div className=\"panel-body\">\n        <h2>{props.poll.question}</h2>\n        <PollInfo poll={props.poll} />\n        <Chart poll={props.poll} />\n        <Options\n          isPollOver={props.isPollOver}\n          poll={props.poll}\n          showVoting={props.showVoting}\n          thread={props.thread}\n        />\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport escapeHtml from \"misago/utils/escape-html\"\n\nconst DATE_ABBR = '<abbr title=\"%(absolute)s\">%(relative)s</abbr>'\nconst USER_SPAN = '<span class=\"item-title\">%(user)s</span>'\nconst USER_URL = '<a href=\"%(url)s\" class=\"item-title\">%(user)s</a>'\n\nexport default function (props) {\n  return (\n    <ul className=\"list-unstyled list-inline poll-help\">\n      <PollChoicesLeft choicesLeft={props.choicesLeft} />\n      <PollAllowRevote poll={props.poll} />\n    </ul>\n  )\n}\n\nexport function PollChoicesLeft({ choicesLeft }) {\n  if (choicesLeft === 0) {\n    return (\n      <li className=\"poll-help-choices-left\">\n        {pgettext(\"thread poll\", \"You can't select any more choices.\")}\n      </li>\n    )\n  }\n\n  const message = npgettext(\n    \"thread poll\",\n    \"You can select %(choices)s more choice.\",\n    \"You can select %(choices)s more choices.\",\n    choicesLeft\n  )\n\n  const label = interpolate(\n    message,\n    {\n      choices: choicesLeft,\n    },\n    true\n  )\n\n  return <li className=\"poll-help-choices-left\">{label}</li>\n}\n\nexport function PollAllowRevote(props) {\n  if (props.poll.allow_revotes) {\n    return (\n      <li className=\"poll-help-allow-revotes\">\n        {pgettext(\"thread poll\", \"You can change your vote later.\")}\n      </li>\n    )\n  }\n\n  return (\n    <li className=\"poll-help-no-revotes\">\n      {pgettext(\"thread poll\", \"Votes are final.\")}\n    </li>\n  )\n}\n","import React from \"react\"\n\nexport default function (props) {\n  return (\n    <ul className=\"list-unstyled poll-select-choices\">\n      {props.choices.map((choice) => {\n        return (\n          <ChoiceSelect\n            choice={choice}\n            key={choice.hash}\n            toggleChoice={props.toggleChoice}\n          />\n        )\n      })}\n    </ul>\n  )\n}\n\nexport class ChoiceSelect extends React.Component {\n  onClick = () => {\n    this.props.toggleChoice(this.props.choice.hash)\n  }\n\n  render() {\n    return (\n      <li className=\"poll-select-choice\">\n        <button\n          className={this.props.choice.selected ? \"btn btn-selected\" : \"btn\"}\n          onClick={this.onClick}\n          type=\"button\"\n        >\n          <span className=\"material-icon\">\n            {this.props.choice.selected\n              ? \"check_box\"\n              : \"check_box_outline_blank\"}\n          </span>\n          <strong>{this.props.choice.label}</strong>\n        </button>\n      </li>\n    )\n  }\n}\n","export function getChoiceFromHash(choices, hash) {\n  for (const i in choices) {\n    const choice = choices[i]\n    if (choice.hash === hash) {\n      return choice\n    }\n  }\n\n  return null\n}\n\nexport function getChoicesLeft(poll, choices) {\n  let selection = []\n  for (const i in choices) {\n    const choice = choices[i]\n    if (choice.selected) {\n      selection.push(choice)\n    }\n  }\n\n  return poll.allowed_choices - selection.length\n}\n","import React from \"react\"\nimport ChoicesHelp from \"./help\"\nimport ChoicesSelect from \"./select\"\nimport { getChoicesLeft, getChoiceFromHash } from \"./utils\"\nimport PollInfo from \"../info\"\nimport { Delete, Edit, getClassName } from \"../results/options\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport * as poll from \"misago/reducers/poll\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      choices: props.poll.choices,\n      choicesLeft: getChoicesLeft(props.poll, props.poll.choices),\n    }\n  }\n\n  toggleChoice = (hash) => {\n    const choice = getChoiceFromHash(this.state.choices, hash)\n\n    let choices = null\n    if (!choice.selected) {\n      choices = this.selectChoice(choice, hash)\n    } else {\n      choices = this.deselectChoice(choice, hash)\n    }\n\n    this.setState({\n      choices,\n      choicesLeft: getChoicesLeft(this.props.poll, choices),\n    })\n  }\n\n  selectChoice = (choice, hash) => {\n    const choicesLeft = getChoicesLeft(this.props.poll, this.state.choices)\n\n    if (!choicesLeft) {\n      for (const i in this.state.choices.slice()) {\n        const item = this.state.choices[i]\n        if (item.selected && item.hash != hash) {\n          item.selected = false\n          break\n        }\n      }\n    }\n\n    return this.state.choices.map((choice) => {\n      return Object.assign({}, choice, {\n        selected: choice.hash == hash ? true : choice.selected,\n      })\n    })\n  }\n\n  deselectChoice = (choice, hash) => {\n    return this.state.choices.map((choice) => {\n      return Object.assign({}, choice, {\n        selected: choice.hash == hash ? false : choice.selected,\n      })\n    })\n  }\n\n  clean() {\n    if (this.state.choicesLeft === this.props.poll.allowed_choices) {\n      snackbar.error(gettext(\"You need to select at least one choice\"))\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    let data = []\n    for (const i in this.state.choices.slice()) {\n      const item = this.state.choices[i]\n      if (item.selected) {\n        data.push(item.hash)\n      }\n    }\n\n    return ajax.post(this.props.poll.api.votes, data)\n  }\n\n  handleSuccess(data) {\n    store.dispatch(poll.replace(data))\n    snackbar.success(gettext(\"Your vote has been saved.\"))\n\n    this.props.showResults()\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      snackbar.error(rejection.detail)\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    const controls = []\n\n    if (this.props.poll.acl.can_vote) controls.push(0)\n    if (this.props.poll.is_public || this.props.poll.acl.can_see_votes)\n      controls.push(1)\n    if (this.props.poll.acl.can_edit) controls.push(2)\n    if (this.props.poll.acl.can_delete) controls.push(3)\n\n    return (\n      <div className=\"panel panel-default panel-poll\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"panel-body\">\n            <h2>{this.props.poll.question}</h2>\n            <PollInfo poll={this.props.poll} />\n            <ChoicesSelect\n              choices={this.state.choices}\n              toggleChoice={this.toggleChoice}\n            />\n            <ChoicesHelp\n              choicesLeft={this.state.choicesLeft}\n              poll={this.props.poll}\n            />\n          </div>\n          <div className=\"panel-footer\">\n            <div className=\"row\">\n              <div className={getClassName(controls, 0)}>\n                <Button\n                  className=\"btn-primary btn-block btn-sm\"\n                  loading={this.state.isLoading}\n                >\n                  {gettext(\"Save your vote\")}\n                </Button>\n              </div>\n              <div className={getClassName(controls, 1)}>\n                <button\n                  className=\"btn btn-default btn-block btn-sm\"\n                  disabled={this.state.isLoading}\n                  onClick={this.props.showResults}\n                  type=\"button\"\n                >\n                  {gettext(\"See results\")}\n                </button>\n              </div>\n              <Edit\n                controls={controls}\n                poll={this.props.poll}\n                thread={this.props.thread}\n                onClick={this.props.edit}\n              />\n              <Delete controls={controls} poll={this.props.poll} />\n            </div>\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport moment from \"moment\"\nimport Results from \"./results\"\nimport Voting from \"./voting\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    let showResults = true\n    if (props.user.id && !props.poll.hasSelectedChoices) {\n      showResults = false\n    }\n\n    this.state = {\n      showResults,\n    }\n  }\n\n  showResults = () => {\n    this.setState({\n      showResults: true,\n    })\n  }\n\n  showVoting = () => {\n    this.setState({\n      showResults: false,\n    })\n  }\n\n  render() {\n    if (!this.props.thread.poll) return null\n\n    const isPollOver = getIsPollOver(this.props.poll)\n\n    if (\n      !isPollOver &&\n      this.props.poll.acl.can_vote &&\n      !this.state.showResults\n    ) {\n      return <Voting showResults={this.showResults} {...this.props} />\n    } else {\n      return (\n        <Results\n          isPollOver={isPollOver}\n          showVoting={this.showVoting}\n          {...this.props}\n        />\n      )\n    }\n  }\n}\n\nexport function getIsPollOver(poll) {\n  if (poll.length) {\n    return moment().isAfter(poll.endsOn)\n  }\n  return false\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  onAdd = () => {\n    let choices = this.props.choices.slice()\n    choices.push({\n      hash: generateRandomHash(),\n      label: \"\",\n    })\n\n    this.props.setChoices(choices)\n  }\n\n  onChange = (hash, label) => {\n    const choices = this.props.choices.map((choice) => {\n      if (choice.hash === hash) {\n        choice.label = label\n      }\n\n      return choice\n    })\n    this.props.setChoices(choices)\n  }\n\n  onDelete = (hash) => {\n    const choices = this.props.choices.filter((choice) => {\n      return choice.hash !== hash\n    })\n    this.props.setChoices(choices)\n  }\n\n  render() {\n    return (\n      <div className=\"poll-choices-control\">\n        <ul className=\"list-group\">\n          {this.props.choices.map((choice) => {\n            return (\n              <PollChoice\n                canDelete={this.props.choices.length > 2}\n                choice={choice}\n                disabled={this.props.disabled}\n                key={choice.hash}\n                onChange={this.onChange}\n                onDelete={this.onDelete}\n              />\n            )\n          })}\n        </ul>\n        <button\n          className=\"btn btn-default btn-sm\"\n          disabled={this.props.disabled}\n          onClick={this.onAdd}\n          type=\"button\"\n        >\n          {pgettext(\"thread poll\", \"Add choice\")}\n        </button>\n      </div>\n    )\n  }\n}\n\nexport class PollChoice extends React.Component {\n  onChange = (event) => {\n    this.props.onChange(this.props.choice.hash, event.target.value)\n  }\n\n  onDelete = () => {\n    const deleteItem = window.confirm(\n      pgettext(\"thread poll\", \"Are you sure you want to remove this choice?\")\n    )\n    if (deleteItem) {\n      this.props.onDelete(this.props.choice.hash)\n    }\n  }\n\n  render() {\n    return (\n      <li className=\"list-group-item\">\n        <button\n          className=\"btn\"\n          disabled={!this.props.canDelete || this.props.disabled}\n          onClick={this.onDelete}\n          title={pgettext(\"thread poll\", \"Remove this choice\")}\n          type=\"button\"\n        >\n          <span className=\"material-icon\">close</span>\n        </button>\n        <input\n          disabled={this.props.disabled}\n          maxLength=\"255\"\n          placeholder={pgettext(\"thread poll\", \"Poll choice\")}\n          type=\"text\"\n          onChange={this.onChange}\n          value={this.props.choice.label}\n        />\n      </li>\n    )\n  }\n}\n\nexport function generateRandomHash() {\n  let randomHash = \"\"\n  while (randomHash.length != 12) {\n    randomHash = Math.random()\n      .toString(36)\n      .replace(/[^a-zA-Z0-9]+/g, \"\")\n      .substr(1, 12)\n  }\n  return randomHash\n}\n","import React from \"react\"\nimport ChoicesControl from \"./choices-control\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport YesNoSwitch from \"misago/components/yes-no-switch\"\nimport * as poll from \"misago/reducers/poll\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    const poll = props.poll.id\n      ? props.poll\n      : {\n          question: \"\",\n          choices: [\n            {\n              hash: \"choice-10000\",\n              label: \"\",\n            },\n            {\n              hash: \"choice-20000\",\n              label: \"\",\n            },\n          ],\n          length: 0,\n          allowed_choices: 1,\n          allow_revotes: 0,\n          is_public: 0,\n        }\n\n    this.state = {\n      isLoading: false,\n      isEdit: !!poll.id,\n\n      question: poll.question,\n      choices: poll.choices,\n      length: poll.length,\n      allowed_choices: poll.allowed_choices,\n      allow_revotes: poll.allow_revotes,\n      is_public: poll.is_public,\n\n      validators: {\n        question: [],\n        choices: [],\n        length: [],\n        allowed_choices: [],\n      },\n\n      errors: {},\n    }\n  }\n\n  setChoices = (choices) => {\n    const errors = Object.assign({}, errors, { choices: null })\n\n    this.setState({\n      choices,\n      errors,\n    })\n  }\n\n  onCancel = () => {\n    let cancel = false\n\n    if (!!this.props.poll) {\n      cancel = window.confirm(\n        pgettext(\"thread poll\", \"Are you sure you want to discard changes?\")\n      )\n    } else {\n      cancel = window.confirm(\n        pgettext(\"thread poll\", \"Are you sure you want to discard new poll?\")\n      )\n    }\n\n    if (cancel) {\n      this.props.close()\n    }\n  }\n\n  send() {\n    const data = {\n      question: this.state.question,\n      choices: this.state.choices,\n      length: this.state.length,\n      allowed_choices: this.state.allowed_choices,\n      allow_revotes: this.state.allow_revotes,\n      is_public: this.state.is_public,\n    }\n\n    if (this.state.isEdit) {\n      return ajax.put(this.props.poll.api.index, data)\n    }\n\n    return ajax.post(this.props.thread.api.poll, data)\n  }\n\n  handleSuccess(data) {\n    store.dispatch(poll.replace(data))\n\n    if (this.state.isEdit) {\n      snackbar.success(pgettext(\"thread poll\", \"Poll has been edited.\"))\n    } else {\n      snackbar.success(pgettext(\"thread poll\", \"Poll has been posted.\"))\n    }\n\n    this.props.close()\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      if (rejection.non_field_errors) {\n        rejection.allowed_choices = rejection.non_field_errors\n      }\n\n      this.setState({\n        errors: Object.assign({}, rejection),\n      })\n\n      snackbar.error(gettext(\"Form contains errors.\"))\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"poll-form\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"panel panel-default panel-form\">\n            <div className=\"panel-heading\">\n              <h3 className=\"panel-title\">\n                {this.state.isEdit\n                  ? pgettext(\"thread poll\", \"Edit poll\")\n                  : pgettext(\"thread poll\", \"Add poll\")}\n              </h3>\n            </div>\n            <div className=\"panel-body\">\n              <fieldset>\n                <legend>\n                  {pgettext(\"thread poll\", \"Question and choices\")}\n                </legend>\n\n                <FormGroup\n                  label={pgettext(\"thread poll\", \"Poll question\")}\n                  for=\"id_questions\"\n                  validation={this.state.errors.question}\n                >\n                  <input\n                    className=\"form-control\"\n                    disabled={this.state.isLoading}\n                    id=\"id_questions\"\n                    onChange={this.bindInput(\"question\")}\n                    type=\"text\"\n                    maxLength=\"255\"\n                    value={this.state.question}\n                  />\n                </FormGroup>\n\n                <FormGroup\n                  label={pgettext(\"thread poll\", \"Available choices\")}\n                  validation={this.state.errors.choices}\n                >\n                  <ChoicesControl\n                    choices={this.state.choices}\n                    disabled={this.state.isLoading}\n                    setChoices={this.setChoices}\n                  />\n                </FormGroup>\n              </fieldset>\n\n              <fieldset>\n                <legend>{pgettext(\"thread poll\", \"Voting\")}</legend>\n\n                <div className=\"row\">\n                  <div className=\"col-xs-12 col-sm-6\">\n                    <FormGroup\n                      label={pgettext(\"thread poll\", \"Poll length\")}\n                      helpText={pgettext(\n                        \"thread poll\",\n                        \"Enter number of days for which voting in this poll should be possible or zero to run this poll indefinitely.\"\n                      )}\n                      for=\"id_length\"\n                      validation={this.state.errors.length}\n                    >\n                      <input\n                        className=\"form-control\"\n                        disabled={this.state.isLoading}\n                        id=\"id_length\"\n                        onChange={this.bindInput(\"length\")}\n                        type=\"text\"\n                        value={this.state.length}\n                      />\n                    </FormGroup>\n                  </div>\n                  <div className=\"col-xs-12 col-sm-6\">\n                    <FormGroup\n                      label={pgettext(\"thread poll\", \"Allowed choices\")}\n                      for=\"id_allowed_choices\"\n                      validation={this.state.errors.allowed_choices}\n                    >\n                      <input\n                        className=\"form-control\"\n                        disabled={this.state.isLoading}\n                        id=\"id_allowed_choices\"\n                        onChange={this.bindInput(\"allowed_choices\")}\n                        type=\"text\"\n                        maxLength=\"255\"\n                        value={this.state.allowed_choices}\n                      />\n                    </FormGroup>\n                  </div>\n                </div>\n\n                <div className=\"row\">\n                  <PollPublicSwitch\n                    bindInput={this.bindInput}\n                    disabled={this.state.isLoading}\n                    isEdit={this.state.isEdit}\n                    value={this.state.is_public}\n                  />\n                  <div className=\"col-xs-12 col-sm-6\">\n                    <FormGroup\n                      label={pgettext(\"thread poll\", \"Allow vote changes\")}\n                      for=\"id_allow_revotes\"\n                    >\n                      <YesNoSwitch\n                        id=\"id_allow_revotes\"\n                        disabled={this.state.isLoading}\n                        iconOn=\"check\"\n                        iconOff=\"close\"\n                        labelOn={pgettext(\n                          \"thread poll\",\n                          \"Allow participants to change their vote\"\n                        )}\n                        labelOff={pgettext(\n                          \"thread poll\",\n                          \"Don't allow participants to change their vote\"\n                        )}\n                        onChange={this.bindInput(\"allow_revotes\")}\n                        value={this.state.allow_revotes}\n                      />\n                    </FormGroup>\n                  </div>\n                </div>\n              </fieldset>\n            </div>\n            <div className=\"panel-footer text-right\">\n              <button\n                className=\"btn btn-default\"\n                disabled={this.state.isLoading}\n                onClick={this.onCancel}\n                type=\"button\"\n              >\n                {pgettext(\"thread poll\", \"Cancel\")}\n              </button>{\" \"}\n              <Button className=\"btn-primary\" loading={this.state.isLoading}>\n                {this.state.isEdit\n                  ? pgettext(\"thread poll\", \"Save changes\")\n                  : pgettext(\"thread poll\", \"Post poll\")}\n              </Button>\n            </div>\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport function PollPublicSwitch(props) {\n  if (props.isEdit) return null\n\n  return (\n    <div className=\"col-xs-12 col-sm-6\">\n      <FormGroup\n        label={pgettext(\"thread poll\", \"Make voting public\")}\n        helpText={pgettext(\n          \"thread poll\",\n          \"Making voting public will allow everyone to access detailed list of votes, showing which users voted for which choices and at which times. This option can't be changed after poll's creation. Moderators may see voting details for all polls.\"\n        )}\n        for=\"id_is_public\"\n      >\n        <YesNoSwitch\n          id=\"id_is_public\"\n          disabled={props.disabled}\n          iconOn=\"visibility\"\n          iconOff=\"visibility_off\"\n          labelOn={pgettext(\"thread poll\", \"Votes are public\")}\n          labelOff={pgettext(\"thread poll\", \"Votes are hidden\")}\n          onChange={props.bindInput(\"is_public\")}\n          value={props.value}\n        />\n      </FormGroup>\n    </div>\n  )\n}\n","import React from \"react\"\n\nconst ICON = {\n  changed_title: \"edit\",\n\n  pinned_globally: \"bookmark\",\n  pinned_locally: \"bookmark_border\",\n  unpinned: \"panorama_fish_eye\",\n\n  moved: \"arrow_forward\",\n  merged: \"call_merge\",\n\n  approved: \"done\",\n\n  opened: \"lock_open\",\n  closed: \"lock_outline\",\n\n  unhid: \"visibility\",\n  hid: \"visibility_off\",\n\n  changed_owner: \"grade\",\n  tookover: \"grade\",\n\n  added_participant: \"person_add\",\n\n  owner_left: \"person_outline\",\n  participant_left: \"person_outline\",\n  removed_participant: \"remove_circle_outline\",\n}\n\nconst EventIcon = (props) => (\n  <span className=\"event-icon-bg\">\n    <span className=\"material-icon\">{ICON[props.post.event_type]}</span>\n  </span>\n)\n\nexport default EventIcon\n","import React from \"react\"\nimport moment from \"moment\"\nimport * as post from \"misago/reducers/post\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default function (props) {\n  if (isVisible(props.post.acl)) {\n    return (\n      <li className=\"event-controls\">\n        <Hide {...props} />\n        <Unhide {...props} />\n        <Delete {...props} />\n      </li>\n    )\n  } else {\n    return null\n  }\n}\n\nexport function isVisible(acl) {\n  return acl.can_hide\n}\n\nexport class Hide extends React.Component {\n  onClick = () => {\n    store.dispatch(\n      post.patch(this.props.post, {\n        is_hidden: true,\n        hidden_on: moment(),\n        hidden_by_name: this.props.user.username,\n        url: Object.assign(this.props.post.url, {\n          hidden_by: this.props.user.url,\n        }),\n      })\n    )\n\n    const op = { op: \"replace\", path: \"is-hidden\", value: true }\n\n    ajax.patch(this.props.post.api.index, [op]).then(\n      (patch) => {\n        store.dispatch(post.patch(this.props.post, patch))\n      },\n      (rejection) => {\n        if (rejection.status === 400) {\n          snackbar.error(rejection.detail[0])\n        } else {\n          snackbar.apiError(rejection)\n        }\n\n        store.dispatch(\n          post.patch(this.props.post, {\n            is_hidden: false,\n          })\n        )\n      }\n    )\n  }\n\n  render() {\n    if (!this.props.post.is_hidden) {\n      return (\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          {gettext(\"Hide\")}\n        </button>\n      )\n    } else {\n      return null\n    }\n  }\n}\n\nexport class Unhide extends React.Component {\n  onClick = () => {\n    store.dispatch(\n      post.patch(this.props.post, {\n        is_hidden: false,\n      })\n    )\n\n    const op = { op: \"replace\", path: \"is-hidden\", value: false }\n\n    ajax.patch(this.props.post.api.index, [op]).then(\n      (patch) => {\n        store.dispatch(post.patch(this.props.post, patch))\n      },\n      (rejection) => {\n        if (rejection.status === 400) {\n          snackbar.error(rejection.detail[0])\n        } else {\n          snackbar.apiError(rejection)\n        }\n\n        store.dispatch(\n          post.patch(this.props.post, {\n            is_hidden: true,\n          })\n        )\n      }\n    )\n  }\n\n  render() {\n    if (this.props.post.is_hidden) {\n      return (\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          {gettext(\"Unhide\")}\n        </button>\n      )\n    } else {\n      return null\n    }\n  }\n}\n\nexport class Delete extends React.Component {\n  onClick = () => {\n    const decision = window.confirm(\n      gettext(\n        \"Are you sure you wish to delete this event? This action is not reversible!\"\n      )\n    )\n    if (decision) {\n      this.delete()\n    }\n  }\n\n  delete = () => {\n    store.dispatch(\n      post.patch(this.props.post, {\n        isDeleted: true,\n      })\n    )\n\n    ajax.delete(this.props.post.api.index).then(\n      () => {\n        snackbar.success(gettext(\"Event has been deleted.\"))\n      },\n      (rejection) => {\n        if (rejection.status === 400) {\n          snackbar.error(rejection.detail[0])\n        } else {\n          snackbar.apiError(rejection)\n        }\n\n        store.dispatch(\n          post.patch(this.props.post, {\n            isDeleted: false,\n          })\n        )\n      }\n    )\n  }\n\n  render() {\n    return (\n      <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n        {gettext(\"Delete\")}\n      </button>\n    )\n  }\n}\n","import React from \"react\"\nimport escapeHtml from \"misago/utils/escape-html\"\nimport Controls from \"./controls\"\n\nconst DATE_ABBR = '<abbr title=\"%(absolute)s\">%(relative)s</abbr>'\nconst DATE_URL = '<a href=\"%(url)s\" title=\"%(absolute)s\">%(relative)s</a>'\nconst USER_SPAN = '<span class=\"item-title\">%(user)s</span>'\nconst USER_URL = '<a href=\"%(url)s\" class=\"item-title\">%(user)s</a>'\n\nexport default function (props) {\n  return (\n    <ul className=\"list-inline event-info\">\n      <Hidden {...props} />\n      <Poster {...props} />\n      <Controls {...props} />\n    </ul>\n  )\n}\n\nexport function Hidden(props) {\n  if (props.post.is_hidden) {\n    let user = null\n    if (props.post.url.hidden_by) {\n      user = interpolate(\n        USER_URL,\n        {\n          url: escapeHtml(props.post.url.hidden_by),\n          user: escapeHtml(props.post.hidden_by_name),\n        },\n        true\n      )\n    } else {\n      user = interpolate(\n        USER_SPAN,\n        {\n          user: escapeHtml(props.post.hidden_by_name),\n        },\n        true\n      )\n    }\n\n    const date = interpolate(\n      DATE_ABBR,\n      {\n        absolute: escapeHtml(props.post.hidden_on.format(\"LLL\")),\n        relative: escapeHtml(props.post.hidden_on.fromNow()),\n      },\n      true\n    )\n\n    const message = interpolate(\n      escapeHtml(gettext(\"Hidden by %(event_by)s %(event_on)s.\")),\n      {\n        event_by: user,\n        event_on: date,\n      },\n      true\n    )\n\n    return (\n      <li\n        className=\"event-hidden-message\"\n        dangerouslySetInnerHTML={{ __html: message }}\n      />\n    )\n  } else {\n    return null\n  }\n}\n\nexport function Poster(props) {\n  let user = null\n  if (props.post.poster) {\n    user = interpolate(\n      USER_URL,\n      {\n        url: escapeHtml(props.post.poster.url),\n        user: escapeHtml(props.post.poster_name),\n      },\n      true\n    )\n  } else {\n    user = interpolate(\n      USER_SPAN,\n      {\n        user: escapeHtml(props.post.poster_name),\n      },\n      true\n    )\n  }\n\n  const date = interpolate(\n    DATE_URL,\n    {\n      url: escapeHtml(props.post.url.index),\n      absolute: escapeHtml(props.post.posted_on.format(\"LLL\")),\n      relative: escapeHtml(props.post.posted_on.fromNow()),\n    },\n    true\n  )\n\n  const message = interpolate(\n    escapeHtml(gettext(\"By %(event_by)s %(event_on)s.\")),\n    {\n      event_by: user,\n      event_on: date,\n    },\n    true\n  )\n\n  return (\n    <li\n      className=\"event-posters\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n","import React from \"react\"\nimport escapeHtml from \"misago/utils/escape-html\"\n\nconst MESSAGE = {\n  pinned_globally: gettext(\"Thread has been pinned globally.\"),\n  pinned_locally: gettext(\"Thread has been pinned locally.\"),\n  unpinned: gettext(\"Thread has been unpinned.\"),\n\n  approved: gettext(\"Thread has been approved.\"),\n\n  opened: gettext(\"Thread has been opened.\"),\n  closed: gettext(\"Thread has been closed.\"),\n\n  unhid: gettext(\"Thread has been revealed.\"),\n  hid: gettext(\"Thread has been made hidden.\"),\n\n  tookover: gettext(\"Took thread over.\"),\n\n  owner_left: gettext(\"Owner has left thread. This thread is now closed.\"),\n  participant_left: gettext(\"Participant has left thread.\"),\n}\n\nconst ITEM_LINK = '<a href=\"%(url)s\" class=\"item-title\">%(name)s</a>'\nconst ITEM_SPAN = '<span class=\"item-title\">%(name)s</span>'\n\nexport default function (props) {\n  if (MESSAGE[props.post.event_type]) {\n    return <p className=\"event-message\">{MESSAGE[props.post.event_type]}</p>\n  } else if (props.post.event_type === \"changed_title\") {\n    return <ChangedTitle {...props} />\n  } else if (props.post.event_type === \"moved\") {\n    return <Moved {...props} />\n  } else if (props.post.event_type === \"merged\") {\n    return <Merged {...props} />\n  } else if (props.post.event_type === \"changed_owner\") {\n    return <ChangedOwner {...props} />\n  } else if (props.post.event_type === \"added_participant\") {\n    return <AddedParticipant {...props} />\n  } else if (props.post.event_type === \"removed_participant\") {\n    return <RemovedParticipant {...props} />\n  } else {\n    return null\n  }\n}\n\nexport function ChangedTitle(props) {\n  const msgstring = escapeHtml(\n    gettext(\"Thread title has been changed from %(old_title)s.\")\n  )\n  const oldTitle = interpolate(\n    ITEM_SPAN,\n    {\n      name: escapeHtml(props.post.event_context.old_title),\n    },\n    true\n  )\n  const message = interpolate(\n    msgstring,\n    {\n      old_title: oldTitle,\n    },\n    true\n  )\n\n  return (\n    <p\n      className=\"event-message\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n\nexport function Moved(props) {\n  const msgstring = escapeHtml(\n    gettext(\"Thread has been moved from %(from_category)s.\")\n  )\n  const fromCategory = interpolate(\n    ITEM_LINK,\n    {\n      url: escapeHtml(props.post.event_context.from_category.url),\n      name: escapeHtml(props.post.event_context.from_category.name),\n    },\n    true\n  )\n\n  const message = interpolate(\n    msgstring,\n    {\n      from_category: fromCategory,\n    },\n    true\n  )\n\n  return (\n    <p\n      className=\"event-message\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n\nexport function Merged(props) {\n  const msgstring = escapeHtml(\n    gettext(\"The %(merged_thread)s thread has been merged into this thread.\")\n  )\n  const mergedThread = interpolate(\n    ITEM_SPAN,\n    {\n      name: escapeHtml(props.post.event_context.merged_thread),\n    },\n    true\n  )\n\n  const message = interpolate(\n    msgstring,\n    {\n      merged_thread: mergedThread,\n    },\n    true\n  )\n\n  return (\n    <p\n      className=\"event-message\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n\nexport function ChangedOwner(props) {\n  const msgstring = escapeHtml(gettext(\"Changed thread owner to %(user)s.\"))\n  const newOwner = interpolate(\n    ITEM_LINK,\n    {\n      url: escapeHtml(props.post.event_context.user.url),\n      name: escapeHtml(props.post.event_context.user.username),\n    },\n    true\n  )\n\n  const message = interpolate(\n    msgstring,\n    {\n      user: newOwner,\n    },\n    true\n  )\n\n  return (\n    <p\n      className=\"event-message\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n\nexport function AddedParticipant(props) {\n  const msgstring = escapeHtml(gettext(\"Added %(user)s to thread.\"))\n  const newOwner = interpolate(\n    ITEM_LINK,\n    {\n      url: escapeHtml(props.post.event_context.user.url),\n      name: escapeHtml(props.post.event_context.user.username),\n    },\n    true\n  )\n\n  const message = interpolate(\n    msgstring,\n    {\n      user: newOwner,\n    },\n    true\n  )\n\n  return (\n    <p\n      className=\"event-message\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n\nexport function RemovedParticipant(props) {\n  const msgstring = escapeHtml(gettext(\"Removed %(user)s from thread.\"))\n  const newOwner = interpolate(\n    ITEM_LINK,\n    {\n      url: escapeHtml(props.post.event_context.user.url),\n      name: escapeHtml(props.post.event_context.user.username),\n    },\n    true\n  )\n\n  const message = interpolate(\n    msgstring,\n    {\n      user: newOwner,\n    },\n    true\n  )\n\n  return (\n    <p\n      className=\"event-message\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n","import React from \"react\"\n\nexport default function ({ post }) {\n  if (post.is_read) return null\n\n  return (\n    <div className=\"event-label\">\n      <span className=\"label label-unread\">{gettext(\"New event\")}</span>\n    </div>\n  )\n}\n","import React from \"react\"\nimport * as post from \"misago/reducers/post\"\nimport * as thread from \"misago/reducers/thread\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends React.Component {\n  /*\n  Super naive and de-facto placeholder implementation for reading posts on scroll\n  */\n  componentDidMount() {\n    if (this.props.post.is_read) return // don't register read tracker\n\n    $(this.element).waypoint({\n      handler: (direction) => {\n        if (direction !== \"down\" || this.props.post.is_read) return\n\n        // after 1500ms run flag post as read logic\n        window.setTimeout(() => {\n          // check if post's bottom edge is still in viewport\n          const boundingClientRect = this.element.getBoundingClientRect()\n          const offsetBottom =\n            boundingClientRect.height + boundingClientRect.top\n          const clientHeight = document.documentElement.clientHeight\n\n          if (offsetBottom < 5) return // scrolled past the post\n          if (offsetBottom > clientHeight) return // scrolled back up\n\n          // mark post as read\n          store.dispatch(\n            post.patch(this.props.post, {\n              is_read: true,\n            })\n          )\n\n          // call API to let it know we have unread post\n          ajax.post(this.props.post.api.read).then(\n            (data) => {\n              store.dispatch(\n                thread.update(this.props.thread, {\n                  is_read: data.thread_is_read,\n                })\n              )\n            },\n            (rejection) => {\n              snackbar.apiError(rejection)\n            }\n          )\n        }, 1000)\n      },\n      offset: \"bottom-in-view\",\n    })\n  }\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        ref={(node) => {\n          if (node) this.element = node\n        }}\n      >\n        {this.props.children}\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Icon from \"./icon\"\nimport Info from \"./info\"\nimport Message from \"./message\"\nimport UnreadLabel from \"./unread-label\"\nimport Waypoint from \"../waypoint\"\n\nexport default function (props) {\n  let className = \"event\"\n  if (props.post.isDeleted) {\n    className = \"hide\"\n  } else if (props.post.is_hidden) {\n    className = \"event post-hidden\"\n  }\n\n  return (\n    <li id={\"post-\" + props.post.id} className={className}>\n      <UnreadLabel post={props.post} />\n      <div className=\"event-body\">\n        <div className=\"event-icon\">\n          <Icon {...props} />\n        </div>\n        <Waypoint className=\"event-content\" post={props.post}>\n          <Message {...props} />\n          <Info {...props} />\n        </Waypoint>\n      </div>\n    </li>\n  )\n}\n","import React from \"react\"\nimport misago from \"misago\"\nimport escapeHtml from \"misago/utils/escape-html\"\nimport formatFilesize from \"misago/utils/file-size\"\n\nconst DATE_ABBR = '<abbr title=\"%(absolute)s\">%(relative)s</abbr>'\nconst USER_SPAN = '<span class=\"item-title\">%(user)s</span>'\nconst USER_URL = '<a href=\"%(url)s\" class=\"item-title\">%(user)s</a>'\n\nexport default function (props) {\n  return (\n    <div className=\"col-xs-12 col-md-6\">\n      <AttachmentPreview {...props} />\n      <div className=\"post-attachment\">\n        <a\n          href={props.attachment.url.index}\n          className=\"attachment-name item-title\"\n          target=\"_blank\"\n        >\n          {props.attachment.filename}\n        </a>\n        <AttachmentDetails {...props} />\n      </div>\n    </div>\n  )\n}\n\nexport function AttachmentPreview(props) {\n  if (props.attachment.is_image) {\n    return (\n      <div className=\"post-attachment-preview\">\n        <AttachmentThumbnail {...props} />\n      </div>\n    )\n  } else {\n    return (\n      <div className=\"post-attachment-preview\">\n        <AttachmentIcon {...props} />\n      </div>\n    )\n  }\n}\n\nexport function AttachmentIcon(props) {\n  return (\n    <a href={props.attachment.url.index} className=\"material-icon\">\n      insert_drive_file\n    </a>\n  )\n}\n\nexport function AttachmentThumbnail(props) {\n  const url = props.attachment.url.thumb || props.attachment.url.index\n  return (\n    <a\n      className=\"post-thumbnail\"\n      href={props.attachment.url.index}\n      target=\"_blank\"\n      style={{ backgroundImage: 'url(\"' + escapeHtml(url) + '\")' }}\n    />\n  )\n}\n\nexport function AttachmentDetails(props) {\n  let user = null\n  if (props.attachment.url.uploader) {\n    user = interpolate(\n      USER_URL,\n      {\n        url: escapeHtml(props.attachment.url.uploader),\n        user: escapeHtml(props.attachment.uploader_name),\n      },\n      true\n    )\n  } else {\n    user = interpolate(\n      USER_SPAN,\n      {\n        user: escapeHtml(props.attachment.uploader_name),\n      },\n      true\n    )\n  }\n\n  const date = interpolate(\n    DATE_ABBR,\n    {\n      absolute: escapeHtml(props.attachment.uploaded_on.format(\"LLL\")),\n      relative: escapeHtml(props.attachment.uploaded_on.fromNow()),\n    },\n    true\n  )\n\n  const message = interpolate(\n    escapeHtml(\n      gettext(\n        \"%(filetype)s, %(size)s, uploaded by %(uploader)s %(uploaded_on)s.\"\n      )\n    ),\n    {\n      filetype: props.attachment.filetype,\n      size: formatFilesize(props.attachment.size),\n      uploader: user,\n      uploaded_on: date,\n    },\n    true\n  )\n\n  return (\n    <p\n      className=\"post-attachment-description\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n","import React from \"react\"\nimport batch from \"misago/utils/batch\"\nimport Attachment from \"./attachment\"\n\nexport default function (props) {\n  if (!isVisible(props.post)) {\n    return null\n  }\n\n  return (\n    <div className=\"post-attachments\">\n      {batch(props.post.attachments, 2).map((row) => {\n        const key = row\n          .map((a) => {\n            return a ? a.id : 0\n          })\n          .join(\"_\")\n        return <Row key={key} row={row} />\n      })}\n    </div>\n  )\n}\n\nexport function isVisible(post) {\n  return (!post.is_hidden || post.acl.can_see_hidden) && post.attachments\n}\n\nexport function Row(props) {\n  return (\n    <div className=\"row\">\n      {props.row.map((attachment) => {\n        return (\n          <Attachment\n            attachment={attachment}\n            key={attachment ? attachment.id : 0}\n          />\n        )\n      })}\n    </div>\n  )\n}\n","import React from \"react\"\nimport Waypoint from \"../waypoint\"\nimport MisagoMarkup from \"misago/components/misago-markup\"\nimport escapeHtml from \"misago/utils/escape-html\"\n\nconst HIDDEN_BY_URL = '<a href=\"%(url)s\" class=\"item-title\">%(user)s</a>'\nconst HIDDEN_BY_SPAN = '<span class=\"item-title\">%(user)s</span>'\nconst HIDDEN_ON =\n  '<abbr class=\"last-title\" title=\"%(absolute)s\">%(relative)s</abbr>'\n\nexport default function (props) {\n  if (props.post.is_hidden && !props.post.acl.can_see_hidden) {\n    return <Hidden {...props} />\n  } else if (props.post.content) {\n    return <Default {...props} />\n  } else {\n    return <Invalid {...props} />\n  }\n}\n\nexport function Default({ post }) {\n  const poster = \"@\" + (post.poster ? post.poster.username : post.poster_name)\n\n  return (\n    <Waypoint className=\"post-body\" post={post}>\n      <MisagoMarkup author={poster} markup={post.content} />\n    </Waypoint>\n  )\n}\n\nexport function Hidden(props) {\n  let user = null\n  if (props.post.hidden_by) {\n    user = interpolate(\n      HIDDEN_BY_URL,\n      {\n        url: escapeHtml(props.post.url.hidden_by),\n        user: escapeHtml(props.post.hidden_by_name),\n      },\n      true\n    )\n  } else {\n    user = interpolate(\n      HIDDEN_BY_SPAN,\n      {\n        user: escapeHtml(props.post.hidden_by_name),\n      },\n      true\n    )\n  }\n\n  const date = interpolate(\n    HIDDEN_ON,\n    {\n      absolute: escapeHtml(props.post.hidden_on.format(\"LLL\")),\n      relative: escapeHtml(props.post.hidden_on.fromNow()),\n    },\n    true\n  )\n\n  const message = interpolate(\n    escapeHtml(gettext(\"Hidden by %(hidden_by)s %(hidden_on)s.\")),\n    {\n      hidden_by: user,\n      hidden_on: date,\n    },\n    true\n  )\n\n  return (\n    <Waypoint className=\"post-body post-body-hidden\" post={props.post}>\n      <p className=\"lead\">\n        {gettext(\"This post is hidden. You cannot see its contents.\")}\n      </p>\n      <p className=\"text-muted\" dangerouslySetInnerHTML={{ __html: message }} />\n    </Waypoint>\n  )\n}\n\nexport function Invalid(props) {\n  return (\n    <Waypoint className=\"post-body post-body-invalid\" post={props.post}>\n      <p className=\"lead\">\n        {gettext(\"This post's contents cannot be displayed.\")}\n      </p>\n      <p className=\"text-muted\">\n        {gettext(\"This error is caused by invalid post content manipulation.\")}\n      </p>\n    </Waypoint>\n  )\n}\n","import React from \"react\"\n\nexport function FlagBestAnswer({ post, thread, user }) {\n  if (!(isVisible(post) && post.id === thread.best_answer)) {\n    return null\n  }\n\n  let message = null\n  if (user.id && thread.best_answer_marked_by === user.id) {\n    message = interpolate(\n      gettext(\"Marked as best answer by you %(marked_on)s.\"),\n      {\n        marked_on: thread.best_answer_marked_on.fromNow(),\n      },\n      true\n    )\n  } else {\n    message = interpolate(\n      gettext(\"Marked as best answer by %(marked_by)s %(marked_on)s.\"),\n      {\n        marked_by: thread.best_answer_marked_by_name,\n        marked_on: thread.best_answer_marked_on.fromNow(),\n      },\n      true\n    )\n  }\n\n  return (\n    <div className=\"post-status-message post-status-best-answer\">\n      <span className=\"material-icon\">check_box</span>\n      <p>{message}</p>\n    </div>\n  )\n}\n\nexport function FlagHidden(props) {\n  if (!(isVisible(props.post) && props.post.is_hidden)) {\n    return null\n  }\n\n  return (\n    <div className=\"post-status-message post-status-hidden\">\n      <span className=\"material-icon\">visibility_off</span>\n      <p>\n        {gettext(\n          \"This post is hidden. Only users with permission may see its contents.\"\n        )}\n      </p>\n    </div>\n  )\n}\n\nexport function FlagUnapproved(props) {\n  if (!(isVisible(props.post) && props.post.is_unapproved)) {\n    return null\n  }\n\n  return (\n    <div className=\"post-status-message post-status-unapproved\">\n      <span className=\"material-icon\">remove_circle_outline</span>\n      <p>\n        {gettext(\n          \"This post is unapproved. Only users with permission to approve posts and its author may see its contents.\"\n        )}\n      </p>\n    </div>\n  )\n}\n\nexport function FlagProtected(props) {\n  if (!(isVisible(props.post) && props.post.is_protected)) {\n    return null\n  }\n\n  return (\n    <div className=\"post-status-message post-status-protected visible-xs-block\">\n      <span className=\"material-icon\">lock_outline</span>\n      <p>{gettext(\"This post is protected. Only moderators may change it.\")}</p>\n    </div>\n  )\n}\n\nexport function isVisible(post) {\n  return !post.is_hidden || post.acl.can_see_hidden\n}\n","import moment from \"moment\"\nimport * as thread from \"misago/reducers/thread\"\nimport * as post from \"misago/reducers/post\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport function approve(props) {\n  store.dispatch(\n    post.patch(props.post, {\n      is_unapproved: false,\n    })\n  )\n\n  const ops = [{ op: \"replace\", path: \"is-unapproved\", value: false }]\n\n  const previousState = {\n    is_unapproved: props.post.is_unapproved,\n  }\n\n  patch(props, ops, previousState)\n}\n\nexport function protect(props) {\n  store.dispatch(\n    post.patch(props.post, {\n      is_protected: true,\n    })\n  )\n\n  const ops = [{ op: \"replace\", path: \"is-protected\", value: true }]\n\n  const previousState = {\n    is_protected: props.post.is_protected,\n  }\n\n  patch(props, ops, previousState)\n}\n\nexport function unprotect(props) {\n  store.dispatch(\n    post.patch(props.post, {\n      is_protected: false,\n    })\n  )\n\n  const ops = [{ op: \"replace\", path: \"is-protected\", value: false }]\n\n  const previousState = {\n    is_protected: props.post.is_protected,\n  }\n\n  patch(props, ops, previousState)\n}\n\nexport function hide(props) {\n  store.dispatch(\n    post.patch(props.post, {\n      is_hidden: true,\n      hidden_on: moment(),\n      hidden_by_name: props.user.username,\n      url: Object.assign(props.post.url, {\n        hidden_by: props.user.url,\n      }),\n    })\n  )\n\n  const ops = [{ op: \"replace\", path: \"is-hidden\", value: true }]\n\n  const previousState = {\n    is_hidden: props.post.is_hidden,\n    hidden_on: props.post.hidden_on,\n    hidden_by_name: props.post.hidden_by_name,\n    url: props.post.url,\n  }\n\n  patch(props, ops, previousState)\n}\n\nexport function unhide(props) {\n  store.dispatch(\n    post.patch(props.post, {\n      is_hidden: false,\n    })\n  )\n\n  const ops = [{ op: \"replace\", path: \"is-hidden\", value: false }]\n\n  const previousState = {\n    is_hidden: props.post.is_hidden,\n  }\n\n  patch(props, ops, previousState)\n}\n\nexport function like(props) {\n  const lastLikes = props.post.last_likes || []\n  const concatedLikes = [props.user].concat(lastLikes)\n  const finalLikes =\n    concatedLikes.length > 3 ? concatedLikes.slice(0, -1) : concatedLikes\n\n  store.dispatch(\n    post.patch(props.post, {\n      is_liked: true,\n      likes: props.post.likes + 1,\n      last_likes: finalLikes,\n    })\n  )\n\n  const ops = [{ op: \"replace\", path: \"is-liked\", value: true }]\n\n  const previousState = {\n    is_liked: props.post.is_liked,\n    likes: props.post.likes,\n    last_likes: props.post.last_likes,\n  }\n\n  patch(props, ops, previousState)\n}\n\nexport function unlike(props) {\n  store.dispatch(\n    post.patch(props.post, {\n      is_liked: false,\n      likes: props.post.likes - 1,\n      last_likes: props.post.last_likes.filter((user) => {\n        return !user.id || user.id !== props.user.id\n      }),\n    })\n  )\n\n  const ops = [{ op: \"replace\", path: \"is-liked\", value: false }]\n\n  const previousState = {\n    is_liked: props.post.is_liked,\n    likes: props.post.likes,\n    last_likes: props.post.last_likes,\n  }\n\n  patch(props, ops, previousState)\n}\n\nexport function patch(props, ops, previousState) {\n  ajax.patch(props.post.api.index, ops).then(\n    (newState) => {\n      store.dispatch(post.patch(props.post, newState))\n    },\n    (rejection) => {\n      if (rejection.status === 400) {\n        snackbar.error(rejection.detail[0])\n      } else {\n        snackbar.apiError(rejection)\n      }\n\n      store.dispatch(post.patch(props.post, previousState))\n    }\n  )\n}\n\nexport function remove(props) {\n  let confirmed = window.confirm(\n    gettext(\n      \"Are you sure you want to delete this post? This action is not reversible!\"\n    )\n  )\n  if (!confirmed) {\n    return\n  }\n\n  store.dispatch(\n    post.patch(props.post, {\n      isDeleted: true,\n    })\n  )\n\n  ajax.delete(props.post.api.index).then(\n    () => {\n      snackbar.success(gettext(\"Post has been deleted.\"))\n    },\n    (rejection) => {\n      if (rejection.status === 400) {\n        snackbar.error(rejection.detail)\n      } else {\n        snackbar.apiError(rejection)\n      }\n\n      store.dispatch(\n        post.patch(props.post, {\n          isDeleted: false,\n        })\n      )\n    }\n  )\n}\n\nexport function markAsBestAnswer(props) {\n  const { post, user } = props\n\n  store.dispatch(\n    thread.update({\n      best_answer: post.id,\n      best_answer_is_protected: post.is_protected,\n      best_answer_marked_on: moment(),\n      best_answer_marked_by: user.id,\n      best_answer_marked_by_name: user.username,\n      best_answer_marked_by_slug: user.slug,\n    })\n  )\n\n  const ops = [\n    { op: \"replace\", path: \"best-answer\", value: post.id },\n    { op: \"add\", path: \"acl\", value: true },\n  ]\n\n  const previousState = {\n    best_answer: props.thread.best_answer,\n    best_answer_is_protected: props.thread.best_answer_is_protected,\n    best_answer_marked_on: props.thread.best_answer_marked_on,\n    best_answer_marked_by: props.thread.best_answer_marked_by,\n    best_answer_marked_by_name: props.thread.best_answer_marked_by_name,\n    best_answer_marked_by_slug: props.thread.best_answer_marked_by_slug,\n  }\n\n  patchThread(props, ops, previousState)\n}\n\nexport function unmarkBestAnswer(props) {\n  const { post } = props\n\n  store.dispatch(\n    thread.update({\n      best_answer: null,\n      best_answer_is_protected: false,\n      best_answer_marked_on: null,\n      best_answer_marked_by: null,\n      best_answer_marked_by_name: null,\n      best_answer_marked_by_slug: null,\n    })\n  )\n\n  const ops = [\n    { op: \"remove\", path: \"best-answer\", value: post.id },\n    { op: \"add\", path: \"acl\", value: true },\n  ]\n\n  const previousState = {\n    best_answer: props.thread.best_answer,\n    best_answer_is_protected: props.thread.best_answer_is_protected,\n    best_answer_marked_on: props.thread.best_answer_marked_on,\n    best_answer_marked_by: props.thread.best_answer_marked_by,\n    best_answer_marked_by_name: props.thread.best_answer_marked_by_name,\n    best_answer_marked_by_slug: props.thread.best_answer_marked_by_slug,\n  }\n\n  patchThread(props, ops, previousState)\n}\n\nexport function patchThread(props, ops, previousState) {\n  ajax.patch(props.thread.api.index, ops).then(\n    (newState) => {\n      if (newState.best_answer_marked_on) {\n        newState.best_answer_marked_on = moment(newState.best_answer_marked_on)\n      }\n      store.dispatch(thread.update(newState))\n    },\n    (rejection) => {\n      if (rejection.status === 400) {\n        snackbar.error(rejection.detail[0])\n      } else {\n        snackbar.apiError(rejection)\n      }\n\n      store.dispatch(thread.update(previousState))\n    }\n  )\n}\n","import React from \"react\"\nimport moment from \"moment\"\nimport Avatar from \"misago/components/avatar\"\nimport Message from \"misago/components/modal-message\"\nimport Loader from \"misago/components/modal-loader\"\nimport ajax from \"misago/services/ajax\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isReady: false,\n\n      error: null,\n      likes: [],\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(this.props.post.api.likes).then(\n      (data) => {\n        this.setState({\n          isReady: true,\n          likes: data.map(hydrateLike),\n        })\n      },\n      (rejection) => {\n        this.setState({\n          isReady: true,\n          error: rejection.detail,\n        })\n      }\n    )\n  }\n\n  render() {\n    if (this.state.error) {\n      return (\n        <ModalDialog className=\"modal-message\">\n          <Message message={this.state.error} />\n        </ModalDialog>\n      )\n    } else if (this.state.isReady) {\n      if (this.state.likes.length) {\n        return (\n          <ModalDialog className=\"modal-sm\" likes={this.state.likes}>\n            <LikesList likes={this.state.likes} />\n          </ModalDialog>\n        )\n      }\n\n      return (\n        <ModalDialog className=\"modal-message\">\n          <Message message={gettext(\"No users have liked this post.\")} />\n        </ModalDialog>\n      )\n    }\n\n    return (\n      <ModalDialog className=\"modal-sm\">\n        <Loader />\n      </ModalDialog>\n    )\n  }\n}\n\nexport function hydrateLike(data) {\n  return Object.assign({}, data, {\n    liked_on: moment(data.liked_on),\n  })\n}\n\nexport function ModalDialog({ className, children, likes }) {\n  let title = gettext(\"Post Likes\")\n  if (likes) {\n    const likesCount = likes.length\n    const message = ngettext(\"%(likes)s like\", \"%(likes)s likes\", likesCount)\n\n    title = interpolate(message, { likes: likesCount }, true)\n  }\n\n  return (\n    <div className={\"modal-dialog \" + (className || \"\")} role=\"document\">\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <button\n            aria-label={pgettext(\"modal\", \"Close\")}\n            className=\"close\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n          <h4 className=\"modal-title\">{title}</h4>\n        </div>\n        {children}\n      </div>\n    </div>\n  )\n}\n\nexport function LikesList(props) {\n  return (\n    <div className=\"modal-body modal-post-likers\">\n      <ul className=\"media-list\">\n        {props.likes.map((like) => {\n          return <LikeDetails key={like.id} {...like} />\n        })}\n      </ul>\n    </div>\n  )\n}\n\nexport function LikeDetails(props) {\n  if (props.url) {\n    const user = {\n      id: props.liker_id,\n      avatars: props.avatars,\n    }\n\n    return (\n      <li className=\"media\">\n        <div className=\"media-left\">\n          <a className=\"user-avatar\" href={props.url}>\n            <Avatar size=\"50\" user={user} />\n          </a>\n        </div>\n        <div className=\"media-body\">\n          <a className=\"item-title\" href={props.url}>\n            {props.username}\n          </a>{\" \"}\n          <LikeDate likedOn={props.liked_on} />\n        </div>\n      </li>\n    )\n  }\n\n  return (\n    <li className=\"media\">\n      <div className=\"media-left\">\n        <span className=\"user-avatar\">\n          <Avatar size=\"50\" />\n        </span>\n      </div>\n      <div className=\"media-body\">\n        <strong>{props.username}</strong> <LikeDate likedOn={props.liked_on} />\n      </div>\n    </li>\n  )\n}\n\nexport function LikeDate(props) {\n  return (\n    <span className=\"text-muted\" title={props.likedOn.format(\"LLL\")}>\n      {props.likedOn.fromNow()}\n    </span>\n  )\n}\n","import React from \"react\"\nimport * as actions from \"./controls/actions\"\nimport LikesModal from \"misago/components/post-likes\"\nimport modal from \"misago/services/modal\"\nimport posting from \"misago/services/posting\"\n\nexport default function (props) {\n  if (!isVisible(props.post)) return null\n\n  return (\n    <div className=\"post-footer\">\n      <MarkAsBestAnswer {...props} />\n      <MarkAsBestAnswerCompact {...props} />\n      <Like {...props} />\n      <Likes\n        lastLikes={props.post.last_likes}\n        likes={props.post.likes}\n        {...props}\n      />\n      <LikesCompact likes={props.post.likes} {...props} />\n      <Reply {...props} />\n      <Edit {...props} />\n    </div>\n  )\n}\n\nexport function isVisible(post) {\n  return (\n    (!post.is_hidden || post.acl.can_see_hidden) &&\n    (post.acl.can_reply ||\n      post.acl.can_edit ||\n      (post.acl.can_see_likes && (post.last_likes || []).length) ||\n      post.acl.can_like)\n  )\n}\n\nexport class MarkAsBestAnswer extends React.Component {\n  onClick = () => {\n    actions.markAsBestAnswer(this.props)\n  }\n\n  render() {\n    const { post, thread } = this.props\n\n    if (!thread.acl.can_mark_best_answer) return null\n    if (!post.acl.can_mark_as_best_answer) return null\n    if (thread.best_answer && !thread.acl.can_change_best_answer) return null\n\n    return (\n      <button\n        className=\"hidden-xs btn btn-default btn-sm pull-left\"\n        disabled={this.props.post.isBusy || post.id === thread.best_answer}\n        onClick={this.onClick}\n        type=\"button\"\n      >\n        <span className=\"material-icon\">check_box</span>\n        {gettext(\"Best answer\")}\n      </button>\n    )\n  }\n}\n\nexport class MarkAsBestAnswerCompact extends React.Component {\n  onClick = () => {\n    actions.markAsBestAnswer(this.props)\n  }\n\n  render() {\n    const { post, thread } = this.props\n\n    if (!thread.acl.can_mark_best_answer) return null\n    if (!post.acl.can_mark_as_best_answer) return null\n    if (thread.best_answer && !thread.acl.can_change_best_answer) return null\n\n    return (\n      <button\n        className=\"visible-xs-inline-block btn btn-default btn-sm pull-left\"\n        disabled={this.props.post.isBusy || post.id === thread.best_answer}\n        onClick={this.onClick}\n        type=\"button\"\n      >\n        <span className=\"material-icon\">check_box</span>\n      </button>\n    )\n  }\n}\n\nexport class Like extends React.Component {\n  onClick = () => {\n    if (this.props.post.is_liked) {\n      actions.unlike(this.props)\n    } else {\n      actions.like(this.props)\n    }\n  }\n\n  render() {\n    if (!this.props.post.acl.can_like) return null\n\n    let className = \"btn btn-default btn-sm pull-left\"\n    if (this.props.post.is_liked) {\n      className = \"btn btn-success btn-sm pull-left\"\n    }\n\n    return (\n      <button\n        className={className}\n        disabled={this.props.post.isBusy}\n        onClick={this.onClick}\n        type=\"button\"\n      >\n        {this.props.post.is_liked ? gettext(\"Liked\") : gettext(\"Like\")}\n      </button>\n    )\n  }\n}\n\nexport class Likes extends React.Component {\n  onClick = () => {\n    modal.show(<LikesModal post={this.props.post} />)\n  }\n\n  render() {\n    const hasLikes = (this.props.post.last_likes || []).length > 0\n    if (!this.props.post.acl.can_see_likes || !hasLikes) return null\n\n    if (this.props.post.acl.can_see_likes === 2) {\n      return (\n        <button\n          className=\"btn btn-link btn-sm pull-left hidden-xs\"\n          onClick={this.onClick}\n          type=\"button\"\n        >\n          {getLikesMessage(this.props.likes, this.props.lastLikes)}\n        </button>\n      )\n    }\n\n    return (\n      <p className=\"pull-left hidden-xs\">\n        {getLikesMessage(this.props.likes, this.props.lastLikes)}\n      </p>\n    )\n  }\n}\n\nexport class LikesCompact extends Likes {\n  render() {\n    const hasLikes = (this.props.post.last_likes || []).length > 0\n    if (!this.props.post.acl.can_see_likes || !hasLikes) return null\n\n    if (this.props.post.acl.can_see_likes === 2) {\n      return (\n        <button\n          className=\"btn btn-link btn-sm likes-compact pull-left visible-xs-block\"\n          onClick={this.onClick}\n          type=\"button\"\n        >\n          <span className=\"material-icon\">favorite</span>\n          {this.props.likes}\n        </button>\n      )\n    }\n\n    return (\n      <p className=\"likes-compact pull-left visible-xs-block\">\n        <span className=\"material-icon\">favorite</span>\n        {this.props.likes}\n      </p>\n    )\n  }\n}\n\nexport function getLikesMessage(likes, users) {\n  const usernames = users.slice(0, 3).map((u) => u.username)\n\n  if (usernames.length == 1) {\n    return interpolate(\n      gettext(\"%(user)s likes this.\"),\n      {\n        user: usernames[0],\n      },\n      true\n    )\n  }\n\n  const hiddenLikes = likes - usernames.length\n\n  const otherUsers = usernames.slice(0, -1).join(\", \")\n  const lastUser = usernames.slice(-1)[0]\n\n  const usernamesList = interpolate(\n    gettext(\"%(users)s and %(last_user)s\"),\n    {\n      users: otherUsers,\n      last_user: lastUser,\n    },\n    true\n  )\n\n  if (hiddenLikes === 0) {\n    return interpolate(\n      gettext(\"%(users)s like this.\"),\n      {\n        users: usernamesList,\n      },\n      true\n    )\n  }\n\n  const message = ngettext(\n    \"%(users)s and %(likes)s other user like this.\",\n    \"%(users)s and %(likes)s other users like this.\",\n    hiddenLikes\n  )\n\n  return interpolate(\n    message,\n    {\n      users: usernames.join(\", \"),\n      likes: hiddenLikes,\n    },\n    true\n  )\n}\n\nexport class Reply extends React.Component {\n  onClick = () => {\n    posting.open({\n      mode: \"REPLY\",\n\n      thread: this.props.thread,\n      config: this.props.thread.api.editor,\n      submit: this.props.thread.api.posts.index,\n\n      context: {\n        reply: this.props.post.id,\n      },\n    })\n  }\n\n  render() {\n    if (this.props.post.acl.can_reply) {\n      return (\n        <button\n          className=\"btn btn-primary btn-sm pull-right\"\n          type=\"button\"\n          onClick={this.onClick}\n        >\n          {gettext(\"Reply\")}\n        </button>\n      )\n    } else {\n      return null\n    }\n  }\n}\n\nexport class Edit extends React.Component {\n  onClick = () => {\n    posting.open({\n      mode: \"EDIT\",\n\n      thread: this.props.thread,\n      post: this.props.post,\n      config: this.props.post.api.editor,\n      submit: this.props.post.api.index,\n    })\n  }\n\n  render() {\n    if (this.props.post.acl.can_edit) {\n      return (\n        <button\n          className=\"hidden-xs btn btn-default btn-sm pull-right\"\n          type=\"button\"\n          onClick={this.onClick}\n        >\n          {gettext(\"Edit\")}\n        </button>\n      )\n    } else {\n      return null\n    }\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport * as post from \"misago/reducers/post\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      url: \"\",\n\n      validators: {\n        url: [],\n      },\n      errors: {},\n    }\n  }\n\n  clean() {\n    if (!this.state.url.trim().length) {\n      snackbar.error(gettext(\"You have to enter link to the other thread.\"))\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    return ajax.post(this.props.thread.api.posts.move, {\n      new_thread: this.state.url,\n      posts: [this.props.post.id],\n    })\n  }\n\n  handleSuccess(success) {\n    store.dispatch(\n      post.patch(this.props.post, {\n        isDeleted: true,\n      })\n    )\n\n    modal.hide()\n\n    snackbar.success(gettext(\"Selected post was moved to the other thread.\"))\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      snackbar.error(rejection.detail)\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  onUrlChange = (event) => {\n    this.changeValue(\"url\", event.target.value)\n  }\n\n  render() {\n    return (\n      <div className=\"modal-dialog\" role=\"document\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"modal-content\">\n            <ModalHeader />\n            <div className=\"modal-body\">\n              <FormGroup\n                for=\"id_url\"\n                label={gettext(\"Link to thread you want to move post to\")}\n              >\n                <input\n                  className=\"form-control\"\n                  disabled={this.state.isLoading}\n                  id=\"id_url\"\n                  onChange={this.onUrlChange}\n                  value={this.state.url}\n                />\n              </FormGroup>\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn btn-primary\"\n                disabled={this.state.isLoading}\n              >\n                {gettext(\"Move post\")}\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport function ModalHeader(props) {\n  return (\n    <div className=\"modal-header\">\n      <button\n        aria-label={pgettext(\"modal\", \"Close\")}\n        className=\"close\"\n        data-dismiss=\"modal\"\n        type=\"button\"\n      >\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n      <h4 className=\"modal-title\">{gettext(\"Move post\")}</h4>\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport default function (props) {\n  return (\n    <div className=\"modal-body post-changelog-diff\">\n      <ul className=\"list-unstyled\">\n        {props.diff.map((item, i) => {\n          return <DiffItem item={item} key={i} />\n        })}\n      </ul>\n    </div>\n  )\n}\n\nexport function DiffItem(props) {\n  if (props.item[0] === \"?\") return null\n\n  return (\n    <li className={getItemClassName(props.item)}>{cleanItem(props.item)}</li>\n  )\n}\n\nexport function getItemClassName(item) {\n  let className = \"diff-item\"\n  if (item[0] === \"-\") {\n    className += \" diff-item-sub\"\n  } else if (item[0] === \"+\") {\n    className += \" diff-item-add\"\n  }\n  return className\n}\n\nexport function cleanItem(item) {\n  return item.substr(2)\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\n\nexport default class extends React.Component {\n  onClick = () => {\n    this.props.revertEdit(this.props.edit.id)\n  }\n\n  render() {\n    if (!this.props.canRevert) return null\n\n    return (\n      <div className=\"modal-footer visible-xs-block\">\n        <Button\n          className=\"btn-default btn-sm btn-block\"\n          disabled={this.props.disabled}\n          onClick={this.onClick}\n          title={gettext(\"Revert post to state from before this edit.\")}\n        >\n          {gettext(\"Revert\")}\n        </Button>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport escapeHtml from \"misago/utils/escape-html\"\n\nconst DATE_ABBR = '<abbr title=\"%(absolute)s\">%(relative)s</abbr>'\nconst USER_SPAN = '<span class=\"item-title\">%(user)s</span>'\nconst USER_URL = '<a href=\"%(url)s\" class=\"item-title\">%(user)s</a>'\n\nexport default class extends React.Component {\n  goLast = () => {\n    this.props.goToEdit()\n  }\n\n  goForward = () => {\n    this.props.goToEdit(this.props.edit.next)\n  }\n\n  goBack = () => {\n    this.props.goToEdit(this.props.edit.previous)\n  }\n\n  revertEdit = () => {\n    this.props.revertEdit(this.props.edit.id)\n  }\n\n  render() {\n    return (\n      <div className=\"modal-toolbar post-changelog-toolbar\">\n        <div className=\"row\">\n          <div className=\"col-xs-12 col-sm-4\">\n            <div className=\"row\">\n              <div className=\"col-xs-4\">\n                <GoBackBtn\n                  disabled={this.props.disabled}\n                  edit={this.props.edit}\n                  onClick={this.goBack}\n                />\n              </div>\n              <div className=\"col-xs-4\">\n                <GoForwardBtn\n                  disabled={this.props.disabled}\n                  edit={this.props.edit}\n                  onClick={this.goForward}\n                />\n              </div>\n              <div className=\"col-xs-4\">\n                <GoLastBtn\n                  disabled={this.props.disabled}\n                  edit={this.props.edit}\n                  onClick={this.goLast}\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"col-xs-12 col-sm-5 xs-margin-top-half post-change-label\">\n            <Label edit={this.props.edit} />\n          </div>\n          <RevertBtn\n            canRevert={this.props.canRevert}\n            disabled={this.props.disabled}\n            onClick={this.revertEdit}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport function GoBackBtn(props) {\n  return (\n    <Button\n      className=\"btn-default btn-block btn-icon btn-sm\"\n      disabled={props.disabled || !props.edit.previous}\n      onClick={props.onClick}\n      title={gettext(\"See previous change\")}\n    >\n      <span className=\"material-icon\">chevron_left</span>\n    </Button>\n  )\n}\n\nexport function GoForwardBtn(props) {\n  return (\n    <Button\n      className=\"btn-default btn-block btn-icon btn-sm\"\n      disabled={props.disabled || !props.edit.next}\n      onClick={props.onClick}\n      title={gettext(\"See next change\")}\n    >\n      <span className=\"material-icon\">chevron_right</span>\n    </Button>\n  )\n}\n\nexport function GoLastBtn(props) {\n  return (\n    <Button\n      className=\"btn-default btn-block btn-icon btn-sm\"\n      disabled={props.disabled || !props.edit.next}\n      onClick={props.onClick}\n      title={gettext(\"See previous change\")}\n    >\n      <span className=\"material-icon\">last_page</span>\n    </Button>\n  )\n}\n\nexport function RevertBtn(props) {\n  if (!props.canRevert) return null\n\n  return (\n    <div className=\"col-sm-3 hidden-xs\">\n      <Button\n        className=\"btn-default btn-sm btn-block\"\n        disabled={props.disabled}\n        onClick={props.onClick}\n        title={gettext(\"Revert post to state from before this edit.\")}\n      >\n        {gettext(\"Revert\")}\n      </Button>\n    </div>\n  )\n}\n\nexport function Label(props) {\n  let user = null\n  if (props.edit.url.editor) {\n    user = interpolate(\n      USER_URL,\n      {\n        url: escapeHtml(props.edit.url.editor),\n        user: escapeHtml(props.edit.editor_name),\n      },\n      true\n    )\n  } else {\n    user = interpolate(\n      USER_SPAN,\n      {\n        user: escapeHtml(props.edit.editor_name),\n      },\n      true\n    )\n  }\n\n  const date = interpolate(\n    DATE_ABBR,\n    {\n      absolute: escapeHtml(props.edit.edited_on.format(\"LLL\")),\n      relative: escapeHtml(props.edit.edited_on.fromNow()),\n    },\n    true\n  )\n\n  const message = interpolate(\n    escapeHtml(gettext(\"By %(edited_by)s %(edited_on)s.\")),\n    {\n      edited_by: user,\n      edited_on: date,\n    },\n    true\n  )\n\n  return <p dangerouslySetInnerHTML={{ __html: message }} />\n}\n","import moment from \"moment\"\n\nexport function hydrateEdit(json) {\n  return Object.assign({}, json, {\n    edited_on: moment(json.edited_on),\n  })\n}\n","import React from \"react\"\nimport Diff from \"./diff\"\nimport Footer from \"./footer\"\nimport Toolbar from \"./toolbar\"\nimport { hydrateEdit } from \"./utils\"\nimport Message from \"misago/components/modal-message\"\nimport Loader from \"misago/components/modal-loader\"\nimport * as post from \"misago/reducers/post\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isReady: false,\n      isBusy: true,\n\n      canRevert: props.post.acl.can_edit,\n\n      error: null,\n      edit: null,\n    }\n  }\n\n  componentDidMount() {\n    this.goToEdit()\n  }\n\n  goToEdit = (edit = null) => {\n    this.setState({\n      isBusy: true,\n    })\n\n    let url = this.props.post.api.edits\n    if (edit !== null) {\n      url += \"?edit=\" + edit\n    }\n\n    ajax.get(url).then(\n      (data) => {\n        this.setState({\n          isReady: true,\n          isBusy: false,\n          edit: hydrateEdit(data),\n        })\n      },\n      (rejection) => {\n        this.setState({\n          isReady: true,\n          isBusy: false,\n          error: rejection.detail,\n        })\n      }\n    )\n  }\n\n  revertEdit = (edit) => {\n    if (this.state.isBusy) return\n\n    const confirmation = window.confirm(\n      gettext(\n        \"Are you sure you with to revert this post to the state from before this edit?\"\n      )\n    )\n    if (!confirmation) return\n\n    this.setState({\n      isBusy: true,\n    })\n\n    const url = this.props.post.api.edits + \"?edit=\" + edit\n    ajax.post(url).then(\n      (data) => {\n        const hydratedPost = post.hydrate(data)\n        store.dispatch(post.patch(data, hydratedPost))\n\n        snackbar.success(gettext(\"Post has been reverted to previous state.\"))\n        modal.hide()\n      },\n      (rejection) => {\n        snackbar.apiError(rejection)\n\n        this.setState({\n          isBusy: false,\n        })\n      }\n    )\n  }\n\n  render() {\n    if (this.state.error) {\n      return (\n        <ModalDialog className=\"modal-dialog modal-message\">\n          <Message message={this.state.error} />\n        </ModalDialog>\n      )\n    } else if (this.state.isReady) {\n      return (\n        <ModalDialog>\n          <Toolbar\n            canRevert={this.state.canRevert}\n            disabled={this.state.isBusy}\n            edit={this.state.edit}\n            goToEdit={this.goToEdit}\n            revertEdit={this.revertEdit}\n          />\n          <Diff diff={this.state.edit.diff} />\n          <Footer\n            canRevert={this.state.canRevert}\n            disabled={this.state.isBusy}\n            edit={this.state.edit}\n            revertEdit={this.revertEdit}\n          />\n        </ModalDialog>\n      )\n    }\n\n    return (\n      <ModalDialog>\n        <Loader />\n      </ModalDialog>\n    )\n  }\n}\n\nexport function ModalDialog(props) {\n  return (\n    <div className={props.className || \"modal-dialog\"} role=\"document\">\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <button\n            aria-label={pgettext(\"modal\", \"Close\")}\n            className=\"close\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n          <h4 className=\"modal-title\">{gettext(\"Post edits history\")}</h4>\n        </div>\n        {props.children}\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport CategorySelect from \"misago/components/category-select\"\nimport ModalLoader from \"misago/components/modal-loader\"\nimport Select from \"misago/components/select\"\nimport * as post from \"misago/reducers/post\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport * as validators from \"misago/utils/validators\"\n\nexport default function (props) {\n  return <PostingConfig {...props} Form={ModerationForm} />\n}\n\nexport class PostingConfig extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoaded: false,\n      isError: false,\n\n      categories: [],\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(misago.get(\"THREAD_EDITOR_API\")).then(\n      (data) => {\n        // hydrate categories, extract posting options\n        const categories = data.map((item) => {\n          return Object.assign(item, {\n            disabled: item.post === false,\n            label: item.name,\n            value: item.id,\n            post: item.post,\n          })\n        })\n\n        this.setState({\n          isLoaded: true,\n          categories,\n        })\n      },\n      (rejection) => {\n        this.setState({\n          isError: rejection.detail,\n        })\n      }\n    )\n  }\n\n  render() {\n    if (this.state.isError) {\n      return <Error message={this.state.isError} />\n    } else if (this.state.isLoaded) {\n      return (\n        <ModerationForm {...this.props} categories={this.state.categories} />\n      )\n    } else {\n      return <Loader />\n    }\n  }\n}\n\nexport class ModerationForm extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      title: \"\",\n      category: null,\n      categories: props.categories,\n      weight: 0,\n      is_hidden: 0,\n      is_closed: false,\n\n      validators: {\n        title: [validators.required()],\n      },\n\n      errors: {},\n    }\n\n    this.isHiddenChoices = [\n      {\n        value: 0,\n        icon: \"visibility\",\n        label: gettext(\"No\"),\n      },\n      {\n        value: 1,\n        icon: \"visibility_off\",\n        label: gettext(\"Yes\"),\n      },\n    ]\n\n    this.isClosedChoices = [\n      {\n        value: false,\n        icon: \"lock_outline\",\n        label: gettext(\"No\"),\n      },\n      {\n        value: true,\n        icon: \"lock\",\n        label: gettext(\"Yes\"),\n      },\n    ]\n\n    this.acl = {}\n    this.props.categories.forEach((category) => {\n      if (category.post) {\n        if (!this.state.category) {\n          this.state.category = category.id\n        }\n\n        this.acl[category.id] = {\n          can_pin_threads: category.post.pin,\n          can_close_threads: category.post.close,\n          can_hide_threads: category.post.hide,\n        }\n      }\n    })\n  }\n\n  clean() {\n    if (this.isValid()) {\n      return true\n    } else {\n      snackbar.error(gettext(\"Form contains errors.\"))\n      this.setState({\n        errors: this.validate(),\n      })\n      return false\n    }\n  }\n\n  send() {\n    return ajax.post(this.props.thread.api.posts.split, {\n      title: this.state.title,\n      category: this.state.category,\n      weight: this.state.weight,\n      is_hidden: this.state.is_hidden,\n      is_closed: this.state.is_closed,\n      posts: [this.props.post.id],\n    })\n  }\n\n  handleSuccess(apiResponse) {\n    store.dispatch(\n      post.patch(this.props.post, {\n        isDeleted: true,\n      })\n    )\n\n    modal.hide()\n\n    snackbar.success(gettext(\"Selected post was split into new thread.\"))\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      this.setState({\n        errors: Object.assign({}, this.state.errors, rejection),\n      })\n      snackbar.error(gettext(\"Form contains errors.\"))\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  onCategoryChange = (ev) => {\n    const categoryId = ev.target.value\n    const newState = {\n      category: categoryId,\n    }\n\n    if (this.acl[categoryId].can_pin_threads < newState.weight) {\n      newState.weight = 0\n    }\n\n    if (!this.acl[categoryId].can_hide_threads) {\n      newState.is_hidden = 0\n    }\n\n    if (!this.acl[categoryId].can_close_threads) {\n      newState.is_closed = false\n    }\n\n    this.setState(newState)\n  }\n\n  getWeightChoices() {\n    const choices = [\n      {\n        value: 0,\n        icon: \"remove\",\n        label: gettext(\"Not pinned\"),\n      },\n      {\n        value: 1,\n        icon: \"bookmark_border\",\n        label: gettext(\"Pinned locally\"),\n      },\n    ]\n\n    if (this.acl[this.state.category].can_pin_threads == 2) {\n      choices.push({\n        value: 2,\n        icon: \"bookmark\",\n        label: gettext(\"Pinned globally\"),\n      })\n    }\n\n    return choices\n  }\n\n  renderWeightField() {\n    if (this.acl[this.state.category].can_pin_threads) {\n      return (\n        <FormGroup\n          label={gettext(\"Thread weight\")}\n          for=\"id_weight\"\n          labelClass=\"col-sm-4\"\n          controlClass=\"col-sm-8\"\n        >\n          <Select\n            id=\"id_weight\"\n            onChange={this.bindInput(\"weight\")}\n            value={this.state.weight}\n            choices={this.getWeightChoices()}\n          />\n        </FormGroup>\n      )\n    } else {\n      return null\n    }\n  }\n\n  renderHiddenField() {\n    if (this.acl[this.state.category].can_hide_threads) {\n      return (\n        <FormGroup\n          label={gettext(\"Hide thread\")}\n          for=\"id_is_hidden\"\n          labelClass=\"col-sm-4\"\n          controlClass=\"col-sm-8\"\n        >\n          <Select\n            id=\"id_is_closed\"\n            onChange={this.bindInput(\"is_hidden\")}\n            value={this.state.is_hidden}\n            choices={this.isHiddenChoices}\n          />\n        </FormGroup>\n      )\n    } else {\n      return null\n    }\n  }\n\n  renderClosedField() {\n    if (this.acl[this.state.category].can_close_threads) {\n      return (\n        <FormGroup\n          label={gettext(\"Close thread\")}\n          for=\"id_is_closed\"\n          labelClass=\"col-sm-4\"\n          controlClass=\"col-sm-8\"\n        >\n          <Select\n            id=\"id_is_closed\"\n            onChange={this.bindInput(\"is_closed\")}\n            value={this.state.is_closed}\n            choices={this.isClosedChoices}\n          />\n        </FormGroup>\n      )\n    } else {\n      return null\n    }\n  }\n\n  render() {\n    return (\n      <Modal className=\"modal-dialog\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"modal-body\">\n            <FormGroup\n              label={gettext(\"Thread title\")}\n              for=\"id_title\"\n              labelClass=\"col-sm-4\"\n              controlClass=\"col-sm-8\"\n              validation={this.state.errors.title}\n            >\n              <input\n                id=\"id_title\"\n                className=\"form-control\"\n                type=\"text\"\n                onChange={this.bindInput(\"title\")}\n                value={this.state.title}\n              />\n            </FormGroup>\n            <div className=\"clearfix\" />\n\n            <FormGroup\n              label={gettext(\"Category\")}\n              for=\"id_category\"\n              labelClass=\"col-sm-4\"\n              controlClass=\"col-sm-8\"\n              validation={this.state.errors.category}\n            >\n              <CategorySelect\n                id=\"id_category\"\n                onChange={this.onCategoryChange}\n                value={this.state.category}\n                choices={this.state.categories}\n              />\n            </FormGroup>\n            <div className=\"clearfix\" />\n\n            {this.renderWeightField()}\n            {this.renderHiddenField()}\n            {this.renderClosedField()}\n          </div>\n          <div className=\"modal-footer\">\n            <Button className=\"btn-primary\" loading={this.state.isLoading}>\n              {gettext(\"Split post\")}\n            </Button>\n          </div>\n        </form>\n      </Modal>\n    )\n  }\n}\n\nexport function Loader() {\n  return (\n    <Modal className=\"modal-dialog\">\n      <ModalLoader />\n    </Modal>\n  )\n}\n\nexport function Error(props) {\n  return (\n    <Modal className=\"modal-dialog modal-message\">\n      <div className=\"message-icon\">\n        <span className=\"material-icon\">info_outline</span>\n      </div>\n      <div className=\"message-body\">\n        <p className=\"lead\">\n          {gettext(\"You can't move this post at the moment.\")}\n        </p>\n        <p>{props.message}</p>\n      </div>\n    </Modal>\n  )\n}\n\nexport function Modal(props) {\n  return (\n    <div className={props.className} role=\"document\">\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <button\n            aria-label={pgettext(\"modal\", \"Close\")}\n            className=\"close\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n          <h4 className=\"modal-title\">\n            {gettext(\"Split post into new thread\")}\n          </h4>\n        </div>\n        {props.children}\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport modal from \"misago/services/modal\"\nimport posting from \"misago/services/posting\"\nimport * as moderation from \"./actions\"\nimport MoveModal from \"./move\"\nimport PostChangelog from \"misago/components/post-changelog\"\nimport SplitModal from \"./split\"\n\nexport default function (props) {\n  return (\n    <ul className=\"dropdown-menu dropdown-menu-right stick-to-bottom\">\n      <Permalink {...props} />\n      <Edit {...props} />\n      <MarkAsBestAnswer {...props} />\n      <UnmarkMarkBestAnswer {...props} />\n      <PostEdits {...props} />\n      <Approve {...props} />\n      <Move {...props} />\n      <Split {...props} />\n      <Protect {...props} />\n      <Unprotect {...props} />\n      <Hide {...props} />\n      <Unhide {...props} />\n      <Delete {...props} />\n    </ul>\n  )\n}\n\nexport class Permalink extends React.Component {\n  onClick = () => {\n    let permaUrl = window.location.protocol + \"//\"\n    permaUrl += window.location.host\n    permaUrl += this.props.post.url.index\n\n    prompt(gettext(\"Permament link to this post:\"), permaUrl)\n  }\n\n  render() {\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">link</span>\n          {gettext(\"Permament link\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Edit extends React.Component {\n  onClick = () => {\n    posting.open({\n      mode: \"EDIT\",\n\n      thread: this.props.thread,\n      post: this.props.post,\n      config: this.props.post.api.editor,\n      submit: this.props.post.api.index,\n    })\n  }\n\n  render() {\n    if (!this.props.post.acl.can_edit) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">edit</span>\n          {gettext(\"Edit\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class MarkAsBestAnswer extends React.Component {\n  onClick = () => {\n    moderation.markAsBestAnswer(this.props)\n  }\n\n  render() {\n    const { post, thread } = this.props\n\n    if (!thread.acl.can_mark_best_answer) return null\n    if (!post.acl.can_mark_as_best_answer) return null\n    if (post.id === thread.best_answer) return null\n    if (thread.best_answer && !thread.acl.can_change_best_answer) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">check_box</span>\n          {gettext(\"Mark as best answer\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class UnmarkMarkBestAnswer extends React.Component {\n  onClick = () => {\n    moderation.unmarkBestAnswer(this.props)\n  }\n\n  render() {\n    const { post, thread } = this.props\n\n    if (post.id !== thread.best_answer) return null\n    if (!thread.acl.can_unmark_best_answer) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">check_box_outline_blank</span>\n          {gettext(\"Unmark best answer\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class PostEdits extends React.Component {\n  onClick = () => {\n    modal.show(<PostChangelog post={this.props.post} />)\n  }\n\n  render() {\n    const isHidden =\n      this.props.post.is_hidden && !this.props.post.acl.can_see_hidden\n    const isUnedited = this.props.post.edits === 0\n    if (isHidden || isUnedited) return null\n\n    const message = ngettext(\n      \"This post was edited %(edits)s time.\",\n      \"This post was edited %(edits)s times.\",\n      this.props.post.edits\n    )\n\n    const title = interpolate(\n      message,\n      {\n        edits: this.props.post.edits,\n      },\n      true\n    )\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">edit</span>\n          {gettext(\"Changes history\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Approve extends React.Component {\n  onClick = () => {\n    moderation.approve(this.props)\n  }\n\n  render() {\n    if (!this.props.post.acl.can_approve) return null\n    if (!this.props.post.is_unapproved) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">done</span>\n          {gettext(\"Approve\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Move extends React.Component {\n  onClick = () => {\n    modal.show(<MoveModal {...this.props} />)\n  }\n\n  render() {\n    if (!this.props.post.acl.can_move) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">arrow_forward</span>\n          {gettext(\"Move\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Split extends React.Component {\n  onClick = () => {\n    modal.show(<SplitModal {...this.props} />)\n  }\n\n  render() {\n    if (!this.props.post.acl.can_move) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">call_split</span>\n          {gettext(\"Split\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Protect extends React.Component {\n  onClick = () => {\n    moderation.protect(this.props)\n  }\n\n  render() {\n    if (!this.props.post.acl.can_protect) return null\n    if (this.props.post.is_protected) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">lock_outline</span>\n          {gettext(\"Protect\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Unprotect extends React.Component {\n  onClick = () => {\n    moderation.unprotect(this.props)\n  }\n\n  render() {\n    if (!this.props.post.acl.can_protect) return null\n    if (!this.props.post.is_protected) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">lock_open</span>\n          {gettext(\"Remove protection\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Hide extends React.Component {\n  onClick = () => {\n    moderation.hide(this.props)\n  }\n\n  render() {\n    const { post, thread } = this.props\n\n    if (post.id === thread.best_answer) return null\n    if (!post.acl.can_hide) return null\n    if (post.is_hidden) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">visibility_off</span>\n          {gettext(\"Hide\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Unhide extends React.Component {\n  onClick = () => {\n    moderation.unhide(this.props)\n  }\n\n  render() {\n    if (!this.props.post.acl.can_unhide) return null\n    if (!this.props.post.is_hidden) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">visibility</span>\n          {gettext(\"Unhide\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Delete extends React.Component {\n  onClick = () => {\n    moderation.remove(this.props)\n  }\n\n  render() {\n    const { post, thread } = this.props\n\n    if (post.id === thread.best_answer) return null\n    if (!post.acl.can_delete) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">clear</span>\n          {gettext(\"Delete\")}\n        </button>\n      </li>\n    )\n  }\n}\n","import React from \"react\"\nimport Dropdown from \"./dropdown\"\n\nexport default function (props) {\n  return (\n    <div className=\"pull-right dropdown\">\n      <button\n        aria-expanded=\"true\"\n        aria-haspopup=\"true\"\n        className=\"btn btn-default btn-icon dropdown-toggle\"\n        data-toggle=\"dropdown\"\n        type=\"button\"\n      >\n        <span className=\"material-icon\">expand_more</span>\n      </button>\n      <Dropdown {...props} />\n    </div>\n  )\n}\n","import React from \"react\"\nimport * as posts from \"misago/reducers/posts\"\nimport store from \"misago/services/store\"\n\nexport default class extends React.Component {\n  onClick = () => {\n    if (this.props.post.isSelected) {\n      store.dispatch(posts.deselect(this.props.post))\n    } else {\n      store.dispatch(posts.select(this.props.post))\n    }\n  }\n\n  render() {\n    if (\n      !(this.props.thread.acl.can_merge_posts || isVisible(this.props.post.acl))\n    ) {\n      return null\n    }\n\n    return (\n      <div className=\"pull-right\">\n        <button\n          className=\"btn btn-default btn-icon\"\n          onClick={this.onClick}\n          type=\"button\"\n        >\n          <span className=\"material-icon\">\n            {this.props.post.isSelected\n              ? \"check_box\"\n              : \"check_box_outline_blank\"}\n          </span>\n        </button>\n      </div>\n    )\n  }\n}\n\nexport function isVisible(acl) {\n  return (\n    acl.can_approve ||\n    acl.can_hide ||\n    acl.can_protect ||\n    acl.can_unhide ||\n    acl.can_delete ||\n    acl.can_move\n  )\n}\n","import React from \"react\"\nimport Controls from \"./controls\"\nimport Select from \"./select\"\nimport {\n  StatusIcon,\n  getStatusClassName,\n  getStatusDescription,\n} from \"misago/components/user-status\"\nimport PostChangelog from \"misago/components/post-changelog\"\nimport modal from \"misago/services/modal\"\n\nexport default function (props) {\n  return (\n    <div className=\"post-heading\">\n      <UnreadLabel {...props} />\n      <UnreadCompact {...props} />\n      <PostedOn {...props} />\n      <PostedOnCompact {...props} />\n      <PostEdits {...props} />\n      <PostEditsCompacts {...props} />\n      <ProtectedLabel {...props} />\n      <Select {...props} />\n      <Controls {...props} />\n    </div>\n  )\n}\n\nexport function UnreadLabel(props) {\n  if (props.post.is_read) return null\n\n  return (\n    <span className=\"label label-unread hidden-xs\">{gettext(\"New post\")}</span>\n  )\n}\n\nexport function UnreadCompact(props) {\n  if (props.post.is_read) return null\n\n  return (\n    <span className=\"label label-unread visible-xs-inline-block\">\n      {gettext(\"New\")}\n    </span>\n  )\n}\n\nexport function PostedOn(props) {\n  const tooltip = interpolate(\n    gettext(\"posted %(posted_on)s\"),\n    {\n      posted_on: props.post.posted_on.format(\"LL, LT\"),\n    },\n    true\n  )\n\n  return (\n    <a\n      href={props.post.url.index}\n      className=\"btn btn-link posted-on hidden-xs\"\n      title={tooltip}\n    >\n      {props.post.posted_on.fromNow()}\n    </a>\n  )\n}\n\nexport function PostedOnCompact(props) {\n  return (\n    <a\n      href={props.post.url.index}\n      className=\"btn btn-link posted-on visible-xs-inline-block\"\n    >\n      {props.post.posted_on.fromNow()}\n    </a>\n  )\n}\n\nexport class PostEdits extends React.Component {\n  onClick = () => {\n    modal.show(<PostChangelog post={this.props.post} />)\n  }\n\n  render() {\n    const isHidden =\n      this.props.post.is_hidden && !this.props.post.acl.can_see_hidden\n    const isUnedited = this.props.post.edits === 0\n    if (isHidden || isUnedited) return null\n\n    const tooltip = ngettext(\n      \"This post was edited %(edits)s time.\",\n      \"This post was edited %(edits)s times.\",\n      this.props.post.edits\n    )\n\n    const title = interpolate(\n      tooltip,\n      {\n        edits: this.props.post.edits,\n      },\n      true\n    )\n\n    const label = ngettext(\n      \"edited %(edits)s time\",\n      \"edited %(edits)s times\",\n      this.props.post.edits\n    )\n\n    return (\n      <button\n        className=\"btn btn-link btn-see-edits hidden-xs\"\n        onClick={this.onClick}\n        title={title}\n        type=\"button\"\n      >\n        {interpolate(\n          label,\n          {\n            edits: this.props.post.edits,\n          },\n          true\n        )}\n      </button>\n    )\n  }\n}\n\nexport class PostEditsCompacts extends PostEdits {\n  render() {\n    const isHidden =\n      this.props.post.is_hidden && !this.props.post.acl.can_see_hidden\n    const isUnedited = this.props.post.edits === 0\n    if (isHidden || isUnedited) return null\n\n    const label = ngettext(\n      \"%(edits)s edit\",\n      \"%(edits)s edits\",\n      this.props.post.edits\n    )\n\n    return (\n      <button\n        className=\"btn btn-link btn-see-edits visible-xs-inline-block\"\n        onClick={this.onClick}\n        type=\"button\"\n      >\n        {interpolate(\n          label,\n          {\n            edits: this.props.post.edits,\n          },\n          true\n        )}\n      </button>\n    )\n  }\n}\n\nexport function ProtectedLabel(props) {\n  const postAuthor = props.post.poster && props.post.poster.id === props.user.id\n  const hasAcl = props.post.acl.can_protect\n  const isVisible =\n    props.user.id && props.post.is_protected && (postAuthor || hasAcl)\n\n  if (!isVisible) {\n    return null\n  }\n\n  return (\n    <span\n      className=\"label label-protected hidden-xs\"\n      title={gettext(\"This post is protected and may not be edited.\")}\n    >\n      <span className=\"material-icon\">lock_outline</span>\n      {gettext(\"protected\")}\n    </span>\n  )\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport Controls from \"misago/components/posts-list/post/controls\"\nimport Select from \"misago/components/posts-list/post/select\"\n\nexport default function ({ post, thread }) {\n  return (\n    <div className=\"post-side post-side-anonymous\">\n      <Select post={post} thread={thread} />\n      <Controls post={post} thread={thread} />\n      <div className=\"media\">\n        <div className=\"media-left\">\n          <span>\n            <Avatar className=\"poster-avatar\" size={100} />\n          </span>\n        </div>\n        <div className=\"media-body\">\n          <span className=\"media-heading item-title\">{post.poster_name}</span>\n\n          <span className=\"user-title user-title-anonymous\">\n            {gettext(\"Removed user\")}\n          </span>\n        </div>\n      </div>\n    </div>\n  )\n}\n","export default function ({ title, rank }) {\n  return rank.is_tab || !!title || !!rank.title\n}\n","import React from \"react\"\nimport hasVisibleTitle from \"./has-visible-title\"\n\nexport default function ({ poster }) {\n  const message = ngettext(\"%(posts)s post\", \"%(posts)s posts\", poster.posts)\n\n  let className = \"user-postcount\"\n  if (hasVisibleTitle(poster)) {\n    className += \" hidden-xs hidden-sm\"\n  }\n\n  return (\n    <span className={className}>\n      {interpolate(\n        message,\n        {\n          posts: poster.posts,\n        },\n        true\n      )}\n    </span>\n  )\n}\n","import React from \"react\"\nimport UserStatus, { StatusLabel } from \"misago/components/user-status\"\nimport hasVisibleTitle from \"./has-visible-title\"\n\nexport default function ({ poster }) {\n  let className = \"hidden-xs\"\n  if (hasVisibleTitle(poster)) {\n    className += \" hidden-sm\"\n  }\n\n  return (\n    <span className={className}>\n      <UserStatus status={poster.status}>\n        <StatusLabel status={poster.status} user={poster} />\n      </UserStatus>\n    </span>\n  )\n}\n","import React from \"react\"\n\nexport default function ({ rank, title }) {\n  let userTitle = title || rank.title\n  if (!userTitle && rank.is_tab) {\n    userTitle = rank.name\n  }\n\n  if (!userTitle) return null\n\n  let className = \"user-title\"\n  if (rank.css_class) {\n    className += \" user-title-\" + rank.css_class\n  }\n\n  if (rank.is_tab) {\n    return (\n      <div className={className}>\n        <a href={rank.url}>{userTitle}</a>\n      </div>\n    )\n  }\n\n  return <div className={className}>{userTitle}</div>\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport Controls from \"misago/components/posts-list/post/controls\"\nimport Select from \"misago/components/posts-list/post/select\"\nimport UserStatus, { StatusIcon } from \"misago/components/user-status\"\nimport UserPostcount from \"./user-postcount\"\nimport UserStatusLabel from \"./user-status\"\nimport UserTitle from \"./user-title\"\n\nexport default function ({ post, thread }) {\n  const { poster } = post\n\n  return (\n    <div className=\"post-side post-side-registered\">\n      <Select post={post} thread={thread} />\n      <Controls post={post} thread={thread} />\n      <div className=\"media\">\n        <div className=\"media-left\">\n          <a href={poster.url}>\n            <Avatar className=\"poster-avatar\" size={100} user={poster} />\n          </a>\n        </div>\n        <div className=\"media-body\">\n          <div className=\"media-heading\">\n            <a className=\"item-title\" href={poster.url}>\n              {poster.username}\n            </a>\n            <UserStatus status={poster.status}>\n              <StatusIcon status={poster.status} />\n            </UserStatus>\n          </div>\n\n          <UserTitle rank={poster.rank} title={poster.title} />\n\n          <UserStatusLabel poster={poster} />\n          <UserPostcount poster={poster} />\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Anonymous from \"./anonymous\"\nimport Registered from \"./registered\"\n\nexport default function (props) {\n  if (props.post.poster) {\n    return <Registered {...props} />\n  }\n\n  return <Anonymous {...props} />\n}\n","import React from \"react\"\nimport Attachments from \"./attachments\"\nimport Body from \"./body\"\nimport {\n  FlagBestAnswer,\n  FlagHidden,\n  FlagUnapproved,\n  FlagProtected,\n} from \"./flags\"\nimport Footer from \"./footer\"\nimport Header from \"./header\"\nimport PostSide from \"./post-side\"\n\nexport default function (props) {\n  let className = \"post\"\n  if (props.post.isDeleted) {\n    className = \"hide\"\n  } else if (props.post.is_hidden && !props.post.acl.can_see_hidden) {\n    className = \"post post-hidden\"\n  }\n\n  if (props.post.poster && props.post.poster.rank.css_class) {\n    className += \" post-\" + props.post.poster.rank.css_class\n  }\n\n  if (!props.post.is_read) {\n    className += \" post-new\"\n  }\n\n  return (\n    <li id={\"post-\" + props.post.id} className={className}>\n      <div className=\"panel panel-default panel-post\">\n        <div className=\"panel-body\">\n          <PostSide {...props} />\n          <div className=\"panel-content\">\n            <Header {...props} />\n            <FlagBestAnswer {...props} />\n            <FlagUnapproved {...props} />\n            <FlagProtected {...props} />\n            <FlagHidden {...props} />\n            <Body {...props} />\n            <Attachments {...props} />\n            <Footer {...props} />\n          </div>\n        </div>\n      </div>\n    </li>\n  )\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport * as random from \"misago/utils/random\"\n\nconst PostPreview = () => (\n  <li className=\"post\">\n    <div className=\"panel panel-default panel-post\">\n      <div className=\"panel-body\">\n        <div className=\"post-side post-side-registered\">\n          <div className=\"media\">\n            <div className=\"media-left\">\n              <span>\n                <Avatar className=\"poster-avatar\" size=\"100\" />\n              </span>\n            </div>\n            <div className=\"media-body\">\n              <span className=\"media-heading item-title\">\n                <span className=\"ui-preview-text\" style={{ width: \"80px\" }}>\n                  &nbsp;\n                </span>\n              </span>\n              <span className=\"user-title user-title-anonymous\">\n                <span className=\"ui-preview-text\" style={{ width: \"60px\" }}>\n                  &nbsp;\n                </span>\n              </span>\n            </div>\n          </div>\n        </div>\n        <div className=\"panel-content\">\n          <div className=\"post-body\">\n            <article className=\"misago-markup\">\n              <p className=\"ui-preview-text\" style={{ width: \"100%\" }}>\n                &nbsp;\n              </p>\n              <p className=\"ui-preview-text\" style={{ width: \"70%\" }}>\n                &nbsp;\n              </p>\n              <p\n                className=\"ui-preview-text hidden-xs hidden-sm\"\n                style={{ width: \"85%\" }}\n              >\n                &nbsp;\n              </p>\n            </article>\n          </div>\n        </div>\n      </div>\n    </div>\n  </li>\n)\n\nexport default PostPreview\n","import React from \"react\"\nimport Event from \"./event\"\nimport Post from \"./post\"\nimport PostPreview from \"./post/preview\"\n\nexport default function (props) {\n  if (!props.posts.isLoaded) {\n    return (\n      <ul className=\"posts-list ui-preview\">\n        <PostPreview />\n      </ul>\n    )\n  }\n\n  return (\n    <ul className=\"posts-list ui-ready\">\n      {props.posts.results.map((post) => {\n        return <ListItem key={post.id} post={post} {...props} />\n      })}\n    </ul>\n  )\n}\n\nexport function ListItem(props) {\n  if (props.post.is_event) {\n    return <Event {...props} />\n  }\n\n  return <Post {...props} />\n}\n","import React from \"react\"\nimport Avatar from \"./avatar\"\n\nconst ThreadStarterCard = ({ thread }) => (\n  <div className=\"thread-user-card\">\n    <div className=\"thread-user-card-media\">\n      {thread.starter ? (\n        <a href={thread.url.starter}>\n          <Avatar size={40} user={thread.starter} />\n        </a>\n      ) : (\n        <Avatar size={40} />\n      )}\n    </div>\n    <div className=\"thread-user-card-body\">\n      <div className=\"thread-user-card-header\">\n        {thread.starter ? (\n          <a\n            className=\"item-title\"\n            href={thread.url.starter}\n            title={gettext(\"Thread author\")}\n          >\n            {thread.starter.username}\n          </a>\n        ) : (\n          <span className=\"item-title\" title={gettext(\"Thread author\")}>\n            {thread.starter_name}\n          </span>\n        )}\n      </div>\n      <div>\n        <span\n          className=\"text-muted\"\n          title={interpolate(\n            gettext(\"Started on: %(timestamp)s\"),\n            {\n              timestamp: thread.started_on.format(\"LLL\"),\n            },\n            true\n          )}\n        >\n          {thread.started_on.fromNow()}\n        </span>\n      </div>\n    </div>\n  </div>\n)\n\nexport default ThreadStarterCard\n","import React from \"react\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport { getTitleValidators } from \"misago/components/posting/utils/validators\"\nimport * as thread from \"misago/reducers/thread\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      title: props.thread.title,\n\n      validators: {\n        title: getTitleValidators(),\n      },\n      errors: {},\n    }\n  }\n\n  clean() {\n    if (!this.state.title.trim().length) {\n      snackbar.error(gettext(\"You have to enter thread title.\"))\n      return false\n    }\n\n    const errors = this.validate()\n\n    if (errors.title) {\n      snackbar.error(errors.title[0])\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    // freeze thread\n    store.dispatch(thread.busy())\n\n    return ajax.patch(this.props.thread.api.index, [\n      { op: \"replace\", path: \"title\", value: this.state.title },\n    ])\n  }\n\n  handleSuccess = (data) => {\n    this.handleSuccessUnmounted(data)\n\n    // keep form loading\n    this.setState({\n      isLoading: true,\n    })\n\n    modal.hide()\n  }\n\n  handleSuccessUnmounted = (data) => {\n    store.dispatch(thread.release())\n    store.dispatch(thread.update(data))\n  }\n\n  handleError = (rejection) => {\n    store.dispatch(thread.release())\n\n    if (rejection.status === 400) {\n      snackbar.error(rejection.detail[0])\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  onChange = (event) => {\n    this.changeValue(\"title\", event.target.value)\n  }\n\n  render() {\n    return (\n      <div className=\"modal-dialog modal-lg\" role=\"document\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"modal-content\">\n            <ModalHeader />\n            <div className=\"modal-body\">\n              <FormGroup for=\"id_modal_title\" label={gettext(\"Thread title\")}>\n                <input\n                  className=\"form-control\"\n                  disabled={this.state.isLoading || this.props.thread.isBusy}\n                  id=\"id_modal_title\"\n                  onChange={this.onChange}\n                  value={this.state.title}\n                />\n              </FormGroup>\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn btn-default\"\n                data-dismiss=\"modal\"\n                disabled={this.state.isLoading}\n                type=\"button\"\n              >\n                {gettext(\"Cancel\")}\n              </button>\n              <button\n                className=\"btn btn-primary\"\n                disabled={this.state.isLoading || this.props.thread.isBusy}\n              >\n                {gettext(\"Change title\")}\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport function ModalHeader(props) {\n  return (\n    <div className=\"modal-header\">\n      <button\n        aria-label={pgettext(\"modal\", \"Close\")}\n        className=\"close\"\n        data-dismiss=\"modal\"\n        type=\"button\"\n      >\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n      <h4 className=\"modal-title\">{gettext(\"Change title\")}</h4>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport MergeConflict from \"misago/components/merge-conflict\"\nimport * as thread from \"misago/reducers/thread\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      url: \"\",\n\n      validators: {\n        url: [],\n      },\n      errors: {},\n    }\n  }\n\n  clean() {\n    if (!this.state.url.trim().length) {\n      snackbar.error(gettext(\"You have to enter link to the other thread.\"))\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    // freeze thread\n    store.dispatch(thread.busy())\n\n    return ajax.post(this.props.thread.api.merge, {\n      other_thread: this.state.url,\n    })\n  }\n\n  handleSuccess = (success) => {\n    this.handleSuccessUnmounted(success)\n\n    // keep form loading\n    this.setState({\n      isLoading: true,\n    })\n  }\n\n  handleSuccessUnmounted = (success) => {\n    snackbar.success(gettext(\"Thread has been merged with other one.\"))\n    window.location = success.url\n  }\n\n  handleError = (rejection) => {\n    store.dispatch(thread.release())\n\n    if (rejection.status === 400) {\n      if (rejection.best_answers || rejection.polls) {\n        modal.show(\n          <MergeConflict\n            api={this.props.thread.api.merge}\n            bestAnswers={rejection.best_answers}\n            data={{ other_thread: this.state.url }}\n            polls={rejection.polls}\n            onError={this.handleError}\n            onSuccess={this.handleSuccessUnmounted}\n          />\n        )\n      } else if (rejection.best_answer) {\n        snackbar.error(rejection.best_answer[0])\n      } else if (rejection.poll) {\n        snackbar.error(rejection.poll[0])\n      } else {\n        snackbar.error(rejection.detail)\n      }\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  onUrlChange = (event) => {\n    this.changeValue(\"url\", event.target.value)\n  }\n\n  render() {\n    return (\n      <div className=\"modal-dialog\" role=\"document\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"modal-content\">\n            <ModalHeader />\n            <div className=\"modal-body\">\n              <FormGroup\n                for=\"id_url\"\n                label={gettext(\"Link to thread you want to merge with\")}\n                help_text={gettext(\n                  \"Merge will delete current thread and move its contents to the thread specified here.\"\n                )}\n              >\n                <input\n                  className=\"form-control\"\n                  disabled={this.state.isLoading || this.props.thread.isBusy}\n                  id=\"id_url\"\n                  onChange={this.onUrlChange}\n                  value={this.state.url}\n                />\n              </FormGroup>\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn btn-default\"\n                data-dismiss=\"modal\"\n                disabled={this.state.isLoading}\n                type=\"button\"\n              >\n                {gettext(\"Cancel\")}\n              </button>\n              <button\n                className=\"btn btn-primary\"\n                disabled={this.state.isLoading || this.props.thread.isBusy}\n              >\n                {gettext(\"Merge thread\")}\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport function ModalHeader(props) {\n  return (\n    <div className=\"modal-header\">\n      <button\n        aria-label={pgettext(\"modal\", \"Close\")}\n        className=\"close\"\n        data-dismiss=\"modal\"\n        type=\"button\"\n      >\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n      <h4 className=\"modal-title\">{gettext(\"Merge thread\")}</h4>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport CategorySelect from \"misago/components/category-select\"\nimport ModalLoader from \"misago/components/modal-loader\"\nimport * as posts from \"misago/reducers/posts\"\nimport * as thread from \"misago/reducers/thread\"\nimport misago from \"misago\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isReady: false,\n      isLoading: false,\n      isError: false,\n\n      category: null,\n      categories: [],\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(misago.get(\"THREAD_EDITOR_API\")).then(\n      (data) => {\n        let category = null\n\n        // hydrate categories, extract posting options\n        const categories = data.map((item) => {\n          // pick first category that allows posting and if it may, override it with initial one\n          if (item.post !== false && !category) {\n            category = item.id\n          }\n\n          return Object.assign(item, {\n            disabled: item.post === false,\n            label: item.name,\n            value: item.id,\n          })\n        })\n\n        this.setState({\n          isReady: true,\n\n          category,\n          categories,\n        })\n      },\n      (rejection) => {\n        this.setState({\n          isError: rejection.detail,\n        })\n      }\n    )\n  }\n\n  send() {\n    // freeze thread\n    store.dispatch(thread.busy())\n\n    return ajax.patch(this.props.thread.api.index, [\n      { op: \"replace\", path: \"category\", value: this.state.category },\n    ])\n  }\n\n  handleSuccess() {\n    // refresh thread and displayed posts\n    ajax\n      .get(this.props.thread.api.posts.index, { page: this.props.posts.page })\n      .then(\n        (data) => {\n          store.dispatch(thread.replace(data))\n          store.dispatch(posts.load(data.post_set))\n          store.dispatch(thread.release())\n\n          snackbar.success(gettext(\"Thread has been moved.\"))\n          modal.hide()\n        },\n        (rejection) => {\n          store.dispatch(thread.release())\n          snackbar.apiError(rejection)\n        }\n      )\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      snackbar.error(rejection.detail[0])\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  onCategoryChange = (event) => {\n    this.changeValue(\"category\", event.target.value)\n  }\n\n  render() {\n    if (this.state.isReady) {\n      return (\n        <div className=\"modal-dialog\" role=\"document\">\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"modal-content\">\n              <ModalHeader />\n              <div className=\"modal-body\">\n                <FormGroup for=\"id_category\" label={gettext(\"New category\")}>\n                  <CategorySelect\n                    choices={this.state.categories}\n                    disabled={this.state.isLoading || this.props.thread.isBusy}\n                    id=\"id_category\"\n                    onChange={this.onCategoryChange}\n                    value={this.state.category}\n                  />\n                </FormGroup>\n              </div>\n              <div className=\"modal-footer\">\n                <button\n                  className=\"btn btn-default\"\n                  data-dismiss=\"modal\"\n                  disabled={this.state.isLoading}\n                  type=\"button\"\n                >\n                  {gettext(\"Cancel\")}\n                </button>\n                <button\n                  className=\"btn btn-primary\"\n                  disabled={this.state.isLoading || this.props.thread.isBusy}\n                >\n                  {gettext(\"Move thread\")}\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n      )\n    } else if (this.state.isError) {\n      return <ModalMessage message={this.state.isError} />\n    } else {\n      return <ModalLoading />\n    }\n  }\n}\n\nexport function ModalHeader(props) {\n  return (\n    <div className=\"modal-header\">\n      <button\n        aria-label={pgettext(\"modal\", \"Close\")}\n        className=\"close\"\n        data-dismiss=\"modal\"\n        type=\"button\"\n      >\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n      <h4 className=\"modal-title\">{gettext(\"Move thread\")}</h4>\n    </div>\n  )\n}\n\nexport function ModalLoading(props) {\n  return (\n    <div className=\"modal-dialog\" role=\"document\">\n      <div className=\"modal-content\">\n        <ModalHeader />\n        <ModalLoader />\n      </div>\n    </div>\n  )\n}\n\nexport function ModalMessage(props) {\n  return (\n    <div className=\"modal-dialog modal-message\" role=\"document\">\n      <div className=\"modal-content\">\n        <ModalHeader />\n        <div className=\"message-icon\">\n          <span className=\"material-icon\">info_outline</span>\n        </div>\n        <div className=\"message-body\">\n          <p className=\"lead\">\n            {gettext(\"You can't move this thread at the moment.\")}\n          </p>\n          <p>{props.message}</p>\n          <button\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            {gettext(\"Ok\")}\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport * as thread from \"misago/reducers/thread\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport ThreadChangeTitleModal from \"./ThreadChangeTitleModal\"\nimport MergeModal from \"./merge\"\nimport MoveModal from \"./move\"\n\nexport default class extends React.Component {\n  callApi = (ops, successMessage) => {\n    store.dispatch(thread.busy())\n\n    // by the chance update thread acl too\n    ops.push({ op: \"add\", path: \"acl\", value: true })\n\n    ajax.patch(this.props.thread.api.index, ops).then(\n      (data) => {\n        store.dispatch(thread.update(data))\n        store.dispatch(thread.release())\n        snackbar.success(successMessage)\n      },\n      (rejection) => {\n        store.dispatch(thread.release())\n        if (rejection.status === 400) {\n          snackbar.error(rejection.detail[0])\n        } else {\n          snackbar.apiError(rejection)\n        }\n      }\n    )\n  }\n\n  changeTitle = () => {\n    modal.show(<ThreadChangeTitleModal thread={this.props.thread} />)\n  }\n\n  pinGlobally = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"weight\",\n          value: 2,\n        },\n      ],\n      gettext(\"Thread has been pinned globally.\")\n    )\n  }\n\n  pinLocally = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"weight\",\n          value: 1,\n        },\n      ],\n      gettext(\"Thread has been pinned locally.\")\n    )\n  }\n\n  unpin = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"weight\",\n          value: 0,\n        },\n      ],\n      gettext(\"Thread has been unpinned.\")\n    )\n  }\n\n  approve = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-unapproved\",\n          value: false,\n        },\n      ],\n      gettext(\"Thread has been approved.\")\n    )\n  }\n\n  open = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-closed\",\n          value: false,\n        },\n      ],\n      gettext(\"Thread has been opened.\")\n    )\n  }\n\n  close = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-closed\",\n          value: true,\n        },\n      ],\n      gettext(\"Thread has been closed.\")\n    )\n  }\n\n  unhide = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-hidden\",\n          value: false,\n        },\n      ],\n      gettext(\"Thread has been made visible.\")\n    )\n  }\n\n  hide = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-hidden\",\n          value: true,\n        },\n      ],\n      gettext(\"Thread has been made hidden.\")\n    )\n  }\n\n  move = () => {\n    modal.show(\n      <MoveModal posts={this.props.posts} thread={this.props.thread} />\n    )\n  }\n\n  merge = () => {\n    modal.show(<MergeModal thread={this.props.thread} />)\n  }\n\n  delete = () => {\n    if (\n      !window.confirm(gettext(\"Are you sure you want to delete this thread?\"))\n    ) {\n      return\n    }\n\n    store.dispatch(thread.busy())\n\n    ajax.delete(this.props.thread.api.index).then(\n      (data) => {\n        snackbar.success(gettext(\"Thread has been deleted.\"))\n        window.location = this.props.thread.category.url.index\n      },\n      (rejection) => {\n        store.dispatch(thread.release())\n        snackbar.apiError(rejection)\n      }\n    )\n  }\n\n  render() {\n    const { moderation } = this.props\n\n    return (\n      <ul className=\"dropdown-menu dropdown-menu-right stick-to-bottom\">\n        {!!moderation.edit && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              onClick={this.changeTitle}\n              type=\"button\"\n            >\n              <span className=\"material-icon\">edit</span>\n              {gettext(\"Change title\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.pinGlobally && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              onClick={this.pinGlobally}\n              type=\"button\"\n            >\n              <span className=\"material-icon\">bookmark</span>\n              {gettext(\"Pin globally\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.pinLocally && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              onClick={this.pinLocally}\n              type=\"button\"\n            >\n              <span className=\"material-icon\">bookmark_border</span>\n              {gettext(\"Pin locally\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.unpin && (\n          <li>\n            <button className=\"btn btn-link\" onClick={this.unpin} type=\"button\">\n              <span className=\"material-icon\">panorama_fish_eye</span>\n              {gettext(\"Unpin\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.move && (\n          <li>\n            <button className=\"btn btn-link\" onClick={this.move} type=\"button\">\n              <span className=\"material-icon\">arrow_forward</span>\n              {gettext(\"Move\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.merge && (\n          <li>\n            <button className=\"btn btn-link\" onClick={this.merge} type=\"button\">\n              <span className=\"material-icon\">call_merge</span>\n              {gettext(\"Merge\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.approve && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              onClick={this.approve}\n              type=\"button\"\n            >\n              <span className=\"material-icon\">done</span>\n              {gettext(\"Approve\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.open && (\n          <li>\n            <button className=\"btn btn-link\" onClick={this.open} type=\"button\">\n              <span className=\"material-icon\">lock_open</span>\n              {gettext(\"Open\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.close && (\n          <li>\n            <button className=\"btn btn-link\" onClick={this.close} type=\"button\">\n              <span className=\"material-icon\">lock_outline</span>\n              {gettext(\"Close\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.unhide && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              onClick={this.unhide}\n              type=\"button\"\n            >\n              <span className=\"material-icon\">visibility</span>\n              {gettext(\"Unhide\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.hide && (\n          <li>\n            <button className=\"btn btn-link\" onClick={this.hide} type=\"button\">\n              <span className=\"material-icon\">visibility_off</span>\n              {gettext(\"Hide\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.delete && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              onClick={this.delete}\n              type=\"button\"\n            >\n              <span className=\"material-icon\">clear</span>\n              {gettext(\"Delete\")}\n            </button>\n          </li>\n        )}\n      </ul>\n    )\n  }\n}\n","import ThreadModerationOptions from \"./controls\"\n\nexport default ThreadModerationOptions\n","import React from \"react\"\nimport ThreadModerationOptions from \"./moderation/thread\"\n\nconst ThreadModeration = ({ thread, posts, moderation }) => (\n  <div className=\"dropdown\">\n    <button\n      type=\"button\"\n      className=\"btn btn-default btn-outline btn-icon dropdown-toggle\"\n      title={gettext(\"Thread options\")}\n      data-toggle=\"dropdown\"\n      aria-haspopup=\"true\"\n      aria-expanded=\"false\"\n      disabled={thread.isBusy}\n    >\n      <span className=\"material-icon\">settings</span>\n    </button>\n    <ThreadModerationOptions\n      thread={thread}\n      posts={posts}\n      moderation={moderation}\n    />\n  </div>\n)\n\nexport default ThreadModeration\n","import classnames from \"classnames\"\nimport React from \"react\"\nimport * as actions from \"../../reducers/thread\"\nimport ajax from \"../../services/ajax\"\nimport snackbar from \"../../services/snackbar\"\nimport store from \"../../services/store\"\n\nconst ThreadSubscriptionButton = ({ stickToBottom, thread }) => (\n  <div className=\"dropdown\">\n    <button\n      className=\"btn btn-default btn-outline btn-block\"\n      aria-expanded=\"true\"\n      aria-haspopup=\"true\"\n      data-toggle=\"dropdown\"\n      type=\"button\"\n    >\n      <span className=\"material-icon\">{getIcon(thread.subscription)}</span>\n      {getLabel(thread.subscription)}\n    </button>\n    <ul\n      className={classnames(\"dropdown-menu dropdown-menu-right\", {\n        \"stick-to-bottom\": stickToBottom,\n      })}\n    >\n      <li>\n        <button className=\"btn btn-link\" onClick={() => unsubscribe(thread)}>\n          <span className=\"material-icon\">star_border</span>\n          {gettext(\"Unsubscribe\")}\n        </button>\n      </li>\n      <li>\n        <button className=\"btn btn-link\" onClick={() => alert(thread)}>\n          <span className=\"material-icon\">star_half</span>\n          {gettext(\"Subscribe\")}\n        </button>\n      </li>\n      <li>\n        <button className=\"btn btn-link\" onClick={() => email(thread)}>\n          <span className=\"material-icon\">star</span>\n          {gettext(\"Subscribe with e-mail\")}\n        </button>\n      </li>\n    </ul>\n  </div>\n)\n\nfunction getIcon(subscription) {\n  if (subscription === true) return \"star\"\n  if (subscription === false) return \"star_half\"\n\n  return \"star_border\"\n}\n\nfunction getLabel(subscription) {\n  if (subscription === true) return gettext(\"E-mail\")\n  if (subscription === false) return gettext(\"Enabled\")\n\n  return gettext(\"Disabled\")\n}\n\nfunction alert(thread) {\n  if (thread.subscription !== false) {\n    update(thread, false, \"notify\")\n  }\n}\n\nfunction email(thread) {\n  if (thread.subscription !== true) {\n    update(thread, true, \"email\")\n  }\n}\n\nfunction unsubscribe(thread) {\n  if (thread.subscription !== null) {\n    update(thread, null, \"unsubscribe\")\n  }\n}\n\nfunction update(thread, newState, value) {\n  const oldState = {\n    subscription: thread.subscription,\n  }\n\n  store.dispatch(\n    actions.update({\n      subscription: newState,\n    })\n  )\n\n  ajax\n    .patch(thread.api.index, [\n      { op: \"replace\", path: \"subscription\", value: value },\n    ])\n    .then(\n      (finalState) => {\n        store.dispatch(actions.update(finalState))\n      },\n      (rejection) => {\n        if (rejection.status === 400) {\n          snackbar.error(rejection.detail[0])\n        } else {\n          snackbar.apiError(rejection)\n        }\n\n        store.dispatch(actions.update(oldState))\n      }\n    )\n}\n\nexport default ThreadSubscriptionButton\n","import classnames from \"classnames\"\nimport React from \"react\"\n\nconst Breadcrumbs = ({ children, className }) => (\n  <ul className={classnames(\"breadcrumbs\", className)}>{children}</ul>\n)\n\nexport default Breadcrumbs\n","import classnames from \"classnames\"\nimport React from \"react\"\n\nconst BreadcrumbsCategory = ({ category, className }) => (\n  <li className={classnames(\"breadcrumbs-item\", className)}>\n    <a href={category.url.index}>\n      <span\n        className=\"material-icon\"\n        style={{ color: category.color || \"inherit\" }}\n      >\n        label\n      </span>\n      {!!category.short_name && (\n        <span\n          className=\"breadcrumbs-item-name hidden-sm hidden-md hidden-lg\"\n          title={category.name}\n        >\n          {category.short_name}\n        </span>\n      )}\n      {!!category.short_name && (\n        <span className=\"breadcrumbs-item-name hidden-xs\">{category.name}</span>\n      )}\n      {!category.short_name && (\n        <span className=\"breadcrumbs-item-name\">{category.name}</span>\n      )}\n    </a>\n  </li>\n)\n\nexport default BreadcrumbsCategory\n","import classnames from \"classnames\"\nimport React from \"react\"\n\nconst BreadcrumbsRootCategory = ({ category, className }) => (\n  <li className={classnames(\"breadcrumbs-item\", className)}>\n    <a href={category.url.index}>\n      <span className=\"material-icon\">chevron_right</span>\n      <span className=\"breadcrumbs-item-name\">\n        {category.special_role === \"root_category\"\n          ? gettext(\"Threads\")\n          : gettext(\"Private threads\")}\n      </span>\n    </a>\n  </li>\n)\n\nexport default BreadcrumbsRootCategory\n","import React from \"react\"\nimport {\n  Breadcrumbs,\n  BreadcrumbsCategory,\n  BreadcrumbsRootCategory,\n} from \"../../Breadcrumbs\"\n\nconst ThreadHeaderBreadcrumbs = ({ breadcrumbs }) => (\n  <Breadcrumbs>\n    {breadcrumbs.map((category) =>\n      category.special_role ? (\n        <BreadcrumbsRootCategory key={category.id} category={category} />\n      ) : (\n        <BreadcrumbsCategory key={category.id} category={category} />\n      )\n    )}\n  </Breadcrumbs>\n)\n\nexport default ThreadHeaderBreadcrumbs\n","import React from \"react\"\nimport { FlexRow, FlexRowCol, FlexRowSection } from \"../../FlexRow\"\nimport ThreadFlags from \"../../ThreadFlags\"\nimport ThreadReplies from \"../../ThreadReplies\"\nimport ThreadStarterCard from \"../../ThreadStarterCard\"\nimport {\n  PageHeader,\n  PageHeaderBanner,\n  PageHeaderContainer,\n  PageHeaderDetails,\n} from \"../../PageHeader\"\nimport ThreadModeration from \"../ThreadModeration\"\nimport ThreadSubscriptionButton from \"../ThreadSubscriptionButton\"\nimport ThreadHeaderBreadcrumbs from \"./ThreadHeaderBreadcrumbs\"\n\nconst ThreadHeader = ({ styleName, thread, posts, user, moderation }) => (\n  <PageHeaderContainer>\n    <PageHeader styleName={styleName}>\n      <PageHeaderBanner styleName={styleName}>\n        <ThreadHeaderBreadcrumbs breadcrumbs={thread.path} />\n        <h1>{thread.title}</h1>\n      </PageHeaderBanner>\n      <PageHeaderDetails className=\"page-header-thread-details\">\n        <FlexRow>\n          <FlexRowSection auto>\n            <FlexRowCol shrink>\n              <ThreadStarterCard thread={thread} />\n            </FlexRowCol>\n            <FlexRowCol auto />\n            {thread.replies > 0 && (\n              <FlexRowCol shrink>\n                <ThreadReplies thread={thread} />\n              </FlexRowCol>\n            )}\n            {hasFlags(thread) && (\n              <FlexRowCol shrink>\n                <ThreadFlags thread={thread} />\n              </FlexRowCol>\n            )}\n          </FlexRowSection>\n          {user.is_authenticated && (\n            <FlexRowSection>\n              <FlexRowCol>\n                <ThreadSubscriptionButton thread={thread} />\n              </FlexRowCol>\n              {moderation.enabled && (\n                <FlexRowCol shrink>\n                  <ThreadModeration\n                    thread={thread}\n                    posts={posts}\n                    moderation={moderation}\n                  />\n                </FlexRowCol>\n              )}\n            </FlexRowSection>\n          )}\n        </FlexRow>\n      </PageHeaderDetails>\n    </PageHeader>\n  </PageHeaderContainer>\n)\n\nconst hasFlags = (thread) => {\n  return (\n    thread.is_closed ||\n    thread.is_hidden ||\n    thread.is_unapproved ||\n    thread.weight > 0 ||\n    thread.best_answer ||\n    thread.has_poll ||\n    thread.has_unapproved_posts\n  )\n}\n\nexport default ThreadHeader\n","import ThreadHeader from \"./ThreadHeader\"\n\nexport default ThreadHeader\n","import React from \"react\"\nimport { Link } from \"react-router\"\n\nconst ThreadPagination = ({ baseUrl, posts }) => (\n  <div className=\"misago-pagination\">\n    {posts.isLoaded && posts.first ? (\n      <Link\n        className=\"btn btn-default btn-outline btn-icon\"\n        to={baseUrl}\n        title={gettext(\"Go to first page\")}\n      >\n        <span className=\"material-icon\">first_page</span>\n      </Link>\n    ) : (\n      <button\n        className=\"btn btn-default btn-outline btn-icon\"\n        title={gettext(\"Go to first page\")}\n        type=\"button\"\n        disabled\n      >\n        <span className=\"material-icon\">first_page</span>\n      </button>\n    )}\n    {posts.isLoaded && posts.previous ? (\n      <Link\n        className=\"btn btn-default btn-outline btn-icon\"\n        to={baseUrl + (posts.previous > 1 ? posts.previous + \"/\" : \"\")}\n        title={gettext(\"Go to previous page\")}\n      >\n        <span className=\"material-icon\">chevron_left</span>\n      </Link>\n    ) : (\n      <button\n        className=\"btn btn-default btn-outline btn-icon\"\n        title={gettext(\"Go to previous page\")}\n        type=\"button\"\n        disabled\n      >\n        <span className=\"material-icon\">chevron_left</span>\n      </button>\n    )}\n    {posts.isLoaded && posts.next ? (\n      <Link\n        className=\"btn btn-default btn-outline btn-icon\"\n        to={baseUrl + posts.next + \"/\"}\n        title={gettext(\"Go to next page\")}\n      >\n        <span className=\"material-icon\">chevron_right</span>\n      </Link>\n    ) : (\n      <button\n        className=\"btn btn-default btn-outline btn-icon\"\n        title={gettext(\"Go to next page\")}\n        type=\"button\"\n        disabled\n      >\n        <span className=\"material-icon\">chevron_right</span>\n      </button>\n    )}\n    {posts.isLoaded && posts.last ? (\n      <Link\n        className=\"btn btn-default btn-outline btn-icon\"\n        to={baseUrl + posts.last + \"/\"}\n        title={gettext(\"Go to last page\")}\n      >\n        <span className=\"material-icon\">last_page</span>\n      </Link>\n    ) : (\n      <button\n        className=\"btn btn-default btn-outline btn-icon\"\n        title={gettext(\"Go to last page\")}\n        type=\"button\"\n        disabled\n      >\n        <span className=\"material-icon\">last_page</span>\n      </button>\n    )}\n  </div>\n)\n\nexport default ThreadPagination\n","import React from \"react\"\n\nconst ThreadPostsLeft = ({ posts }) => {\n  if (posts.more) {\n    return (\n      <p>\n        {interpolate(\n          ngettext(\n            \"There is %(more)s more post in this thread.\",\n            \"There are %(more)s more posts in this thread.\",\n            posts.more\n          ),\n          { more: posts.more },\n          true\n        )}\n      </p>\n    )\n  }\n\n  return <p>{gettext(\"There are no more posts in this thread.\")}</p>\n}\n\nexport default ThreadPostsLeft\n","import React from \"react\"\n\nexport default function ({ errors, posts }) {\n  return (\n    <div className=\"modal-dialog\" role=\"document\">\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <button\n            aria-label={pgettext(\"modal\", \"Close\")}\n            className=\"close\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n          <h4 className=\"modal-title\">{gettext(\"Moderation\")}</h4>\n        </div>\n        <div className=\"modal-body\">\n          <p className=\"lead\">\n            {gettext(\"One or more posts could not be changed:\")}\n          </p>\n\n          <ul className=\"list-unstyled list-errored-items\">\n            {errors.map((post) => {\n              return (\n                <PostErrors\n                  errors={post.detail}\n                  key={post.id}\n                  post={posts[post.id]}\n                />\n              )\n            })}\n          </ul>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport function PostErrors({ errors, post }) {\n  const heading = interpolate(\n    gettext(\"%(username)s on %(posted_on)s\"),\n    {\n      posted_on: post.posted_on.format(\"LL, LT\"),\n      username: post.poster_name,\n    },\n    true\n  )\n\n  return (\n    <li>\n      <h5>{heading}:</h5>\n      {errors.map((error, i) => {\n        return <p key={i}>{error}</p>\n      })}\n    </li>\n  )\n}\n","import moment from \"moment\"\nimport React from \"react\"\nimport * as post from \"misago/reducers/post\"\nimport * as posts from \"misago/reducers/posts\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport ErrorsList from \"./errors-list\"\n\nexport function approve(props) {\n  const { selection } = props\n\n  const ops = [{ op: \"replace\", path: \"is-unapproved\", value: false }]\n\n  const newState = selection.map((post) => {\n    return {\n      id: post.id,\n      is_unapproved: false,\n    }\n  })\n\n  const previousState = selection.map((post) => {\n    return {\n      id: post.id,\n      is_unapproved: post.is_unapproved,\n    }\n  })\n\n  patch(props, ops, newState, previousState)\n}\n\nexport function protect(props) {\n  const { selection } = props\n\n  const ops = [{ op: \"replace\", path: \"is-protected\", value: true }]\n\n  const newState = selection.map((post) => {\n    return {\n      id: post.id,\n      is_protected: true,\n    }\n  })\n\n  const previousState = selection.map((post) => {\n    return {\n      id: post.id,\n      is_protected: post.is_protected,\n    }\n  })\n\n  patch(props, ops, newState, previousState)\n}\n\nexport function unprotect(props) {\n  const { selection } = props\n\n  const ops = [{ op: \"replace\", path: \"is-protected\", value: false }]\n\n  const newState = selection.map((post) => {\n    return {\n      id: post.id,\n      is_protected: false,\n    }\n  })\n\n  const previousState = selection.map((post) => {\n    return {\n      id: post.id,\n      is_protected: post.is_protected,\n    }\n  })\n\n  patch(props, ops, newState, previousState)\n}\n\nexport function hide(props) {\n  const { selection } = props\n\n  const ops = [{ op: \"replace\", path: \"is-hidden\", value: true }]\n\n  const newState = selection.map((post) => {\n    return {\n      id: post.id,\n      is_hidden: true,\n      hidden_on: moment(),\n      hidden_by_name: props.user.username,\n      url: Object.assign(post.url, {\n        hidden_by: props.user.url,\n      }),\n    }\n  })\n\n  const previousState = selection.map((post) => {\n    return {\n      id: post.id,\n      is_hidden: post.is_hidden,\n      hidden_on: post.hidden_on,\n      hidden_by_name: post.hidden_by_name,\n      url: post.url,\n    }\n  })\n\n  patch(props, ops, newState, previousState)\n}\n\nexport function unhide(props) {\n  const { selection } = props\n\n  const ops = [{ op: \"replace\", path: \"is-hidden\", value: false }]\n\n  const newState = selection.map((post) => {\n    return {\n      id: post.id,\n      is_hidden: false,\n      hidden_on: moment(),\n      hidden_by_name: props.user.username,\n      url: Object.assign(post.url, {\n        hidden_by: props.user.url,\n      }),\n    }\n  })\n\n  const previousState = selection.map((post) => {\n    return {\n      id: post.id,\n      is_hidden: post.is_hidden,\n      hidden_on: post.hidden_on,\n      hidden_by_name: post.hidden_by_name,\n      url: post.url,\n    }\n  })\n\n  patch(props, ops, newState, previousState)\n}\n\nexport function patch(props, ops, newState, previousState) {\n  const { selection, thread } = props\n\n  // patch selected items\n  newState.forEach((item) => {\n    post.patch(item, item)\n  })\n\n  // deselect all the things\n  store.dispatch(posts.deselectAll())\n\n  // call ajax\n  const data = {\n    ops,\n\n    ids: selection.map((post) => {\n      return post.id\n    }),\n  }\n\n  ajax.patch(thread.api.posts.index, data).then(\n    (data) => {\n      data.forEach((item) => {\n        store.dispatch(post.patch(item, item))\n      })\n    },\n    (rejection) => {\n      if (rejection.status !== 400) {\n        // rollback all\n        previousState.forEach((item) => {\n          store.dispatch(post.patch(item, item))\n        })\n        return snackbar.apiError(rejection)\n      }\n\n      let errors = []\n      let rollback = []\n\n      rejection.forEach((item) => {\n        if (item.detail) {\n          errors.push(item)\n          rollback.push(item.id)\n        } else {\n          store.dispatch(post.patch(item, item))\n        }\n\n        previousState.forEach((item) => {\n          if (rollback.indexOf(item) !== -1) {\n            store.dispatch(post.patch(item, item))\n          }\n        })\n      })\n\n      let posts = {}\n      selection.forEach((item) => {\n        posts[item.id] = item\n      })\n\n      modal.show(<ErrorsList errors={errors} posts={posts} />)\n    }\n  )\n}\n\nexport function merge(props) {\n  let confirmed = window.confirm(\n    gettext(\n      \"Are you sure you want to merge selected posts? This action is not reversible!\"\n    )\n  )\n  if (!confirmed) {\n    return\n  }\n\n  props.selection.slice(1).map((selection) => {\n    store.dispatch(\n      post.patch(selection, {\n        isDeleted: true,\n      })\n    )\n  })\n\n  ajax\n    .post(props.thread.api.posts.merge, {\n      posts: props.selection.map((post) => post.id),\n    })\n    .then(\n      (data) => {\n        store.dispatch(post.patch(data, post.hydrate(data)))\n      },\n      (rejection) => {\n        if (rejection.status === 400) {\n          snackbar.error(rejection.detail)\n        } else {\n          snackbar.apiError(rejection)\n        }\n\n        props.selection.slice(1).map((selection) => {\n          store.dispatch(\n            post.patch(selection, {\n              isDeleted: false,\n            })\n          )\n        })\n      }\n    )\n\n  store.dispatch(posts.deselectAll())\n}\n\nexport function remove(props) {\n  let confirmed = window.confirm(\n    gettext(\n      \"Are you sure you want to delete selected posts? This action is not reversible!\"\n    )\n  )\n  if (!confirmed) {\n    return\n  }\n\n  props.selection.map((selection) => {\n    store.dispatch(\n      post.patch(selection, {\n        isDeleted: true,\n      })\n    )\n  })\n\n  const ids = props.selection.map((post) => {\n    return post.id\n  })\n\n  ajax.delete(props.thread.api.posts.index, ids).then(\n    () => {\n      return\n    },\n    (rejection) => {\n      if (rejection.status === 400) {\n        snackbar.error(rejection.detail)\n      } else {\n        snackbar.apiError(rejection)\n      }\n\n      props.selection.map((selection) => {\n        store.dispatch(\n          post.patch(selection, {\n            isDeleted: false,\n          })\n        )\n      })\n    }\n  )\n\n  store.dispatch(posts.deselectAll())\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport * as post from \"misago/reducers/post\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      url: \"\",\n\n      validators: {\n        url: [],\n      },\n      errors: {},\n    }\n  }\n\n  clean() {\n    if (!this.state.url.trim().length) {\n      snackbar.error(gettext(\"You have to enter link to the other thread.\"))\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    return ajax.post(this.props.thread.api.posts.move, {\n      new_thread: this.state.url,\n      posts: this.props.selection.map((post) => post.id),\n    })\n  }\n\n  handleSuccess(success) {\n    this.props.selection.forEach((selection) => {\n      store.dispatch(\n        post.patch(selection, {\n          isDeleted: true,\n        })\n      )\n    })\n\n    modal.hide()\n\n    snackbar.success(gettext(\"Selected posts were moved to the other thread.\"))\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      snackbar.error(rejection.detail)\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  onUrlChange = (event) => {\n    this.changeValue(\"url\", event.target.value)\n  }\n\n  render() {\n    return (\n      <div className=\"modal-dialog\" role=\"document\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"modal-content\">\n            <ModalHeader />\n            <div className=\"modal-body\">\n              <FormGroup\n                for=\"id_url\"\n                label={gettext(\"Link to thread you want to move posts to\")}\n              >\n                <input\n                  className=\"form-control\"\n                  disabled={this.state.isLoading}\n                  id=\"id_url\"\n                  onChange={this.onUrlChange}\n                  value={this.state.url}\n                />\n              </FormGroup>\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn btn-default\"\n                data-dismiss=\"modal\"\n                disabled={this.state.isLoading}\n                type=\"button\"\n              >\n                {gettext(\"Cancel\")}\n              </button>\n              <button\n                className=\"btn btn-primary\"\n                disabled={this.state.isLoading}\n              >\n                {gettext(\"Move posts\")}\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport function ModalHeader(props) {\n  return (\n    <div className=\"modal-header\">\n      <button\n        aria-label={pgettext(\"modal\", \"Close\")}\n        className=\"close\"\n        data-dismiss=\"modal\"\n        type=\"button\"\n      >\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n      <h4 className=\"modal-title\">{gettext(\"Move posts\")}</h4>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport CategorySelect from \"misago/components/category-select\"\nimport ModalLoader from \"misago/components/modal-loader\"\nimport Select from \"misago/components/select\"\nimport * as post from \"misago/reducers/post\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport * as validators from \"misago/utils/validators\"\nimport ErrorsModal from \"./errors-list\"\n\nexport default function (props) {\n  return <PostingConfig {...props} Form={ModerationForm} />\n}\n\nexport class PostingConfig extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoaded: false,\n      isError: false,\n\n      categories: [],\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(misago.get(\"THREAD_EDITOR_API\")).then(\n      (data) => {\n        // hydrate categories, extract posting options\n        const categories = data.map((item) => {\n          return Object.assign(item, {\n            disabled: item.post === false,\n            label: item.name,\n            value: item.id,\n            post: item.post,\n          })\n        })\n\n        this.setState({\n          isLoaded: true,\n          categories,\n        })\n      },\n      (rejection) => {\n        this.setState({\n          isError: rejection.detail,\n        })\n      }\n    )\n  }\n\n  render() {\n    if (this.state.isError) {\n      return <Error message={this.state.isError} />\n    } else if (this.state.isLoaded) {\n      return (\n        <ModerationForm {...this.props} categories={this.state.categories} />\n      )\n    } else {\n      return <Loader />\n    }\n  }\n}\n\nexport class ModerationForm extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      title: \"\",\n      category: null,\n      categories: props.categories,\n      weight: 0,\n      is_hidden: 0,\n      is_closed: false,\n\n      validators: {\n        title: [validators.required()],\n      },\n\n      errors: {},\n    }\n\n    this.isHiddenChoices = [\n      {\n        value: 0,\n        icon: \"visibility\",\n        label: gettext(\"No\"),\n      },\n      {\n        value: 1,\n        icon: \"visibility_off\",\n        label: gettext(\"Yes\"),\n      },\n    ]\n\n    this.isClosedChoices = [\n      {\n        value: false,\n        icon: \"lock_outline\",\n        label: gettext(\"No\"),\n      },\n      {\n        value: true,\n        icon: \"lock\",\n        label: gettext(\"Yes\"),\n      },\n    ]\n\n    this.acl = {}\n    this.props.categories.forEach((category) => {\n      if (category.post) {\n        if (!this.state.category) {\n          this.state.category = category.id\n        }\n\n        this.acl[category.id] = {\n          can_pin_threads: category.post.pin,\n          can_close_threads: category.post.close,\n          can_hide_threads: category.post.hide,\n        }\n      }\n    })\n  }\n\n  clean() {\n    if (this.isValid()) {\n      return true\n    } else {\n      snackbar.error(gettext(\"Form contains errors.\"))\n      this.setState({\n        errors: this.validate(),\n      })\n      return false\n    }\n  }\n\n  send() {\n    return ajax.post(this.props.thread.api.posts.split, {\n      title: this.state.title,\n      category: this.state.category,\n      weight: this.state.weight,\n      is_hidden: this.state.is_hidden,\n      is_closed: this.state.is_closed,\n      posts: this.props.selection.map((post) => post.id),\n    })\n  }\n\n  handleSuccess(apiResponse) {\n    this.props.selection.forEach((selection) => {\n      store.dispatch(\n        post.patch(selection, {\n          isDeleted: true,\n        })\n      )\n    })\n\n    modal.hide()\n\n    snackbar.success(gettext(\"Selected posts were split into new thread.\"))\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      this.setState({\n        errors: Object.assign({}, this.state.errors, rejection),\n      })\n      snackbar.error(gettext(\"Form contains errors.\"))\n    } else if (rejection.status === 403 && Array.isArray(rejection)) {\n      modal.show(<ErrorsModal errors={rejection} />)\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  onCategoryChange = (ev) => {\n    const categoryId = ev.target.value\n    const newState = {\n      category: categoryId,\n    }\n\n    if (this.acl[categoryId].can_pin_threads < newState.weight) {\n      newState.weight = 0\n    }\n\n    if (!this.acl[categoryId].can_hide_threads) {\n      newState.is_hidden = 0\n    }\n\n    if (!this.acl[categoryId].can_close_threads) {\n      newState.is_closed = false\n    }\n\n    this.setState(newState)\n  }\n\n  getWeightChoices() {\n    const choices = [\n      {\n        value: 0,\n        icon: \"remove\",\n        label: gettext(\"Not pinned\"),\n      },\n      {\n        value: 1,\n        icon: \"bookmark_border\",\n        label: gettext(\"Pinned locally\"),\n      },\n    ]\n\n    if (this.acl[this.state.category].can_pin_threads == 2) {\n      choices.push({\n        value: 2,\n        icon: \"bookmark\",\n        label: gettext(\"Pinned globally\"),\n      })\n    }\n\n    return choices\n  }\n\n  renderWeightField() {\n    if (this.acl[this.state.category].can_pin_threads) {\n      return (\n        <FormGroup\n          label={gettext(\"Thread weight\")}\n          for=\"id_weight\"\n          labelClass=\"col-sm-4\"\n          controlClass=\"col-sm-8\"\n        >\n          <Select\n            id=\"id_weight\"\n            onChange={this.bindInput(\"weight\")}\n            value={this.state.weight}\n            choices={this.getWeightChoices()}\n          />\n        </FormGroup>\n      )\n    } else {\n      return null\n    }\n  }\n\n  renderHiddenField() {\n    if (this.acl[this.state.category].can_hide_threads) {\n      return (\n        <FormGroup\n          label={gettext(\"Hide thread\")}\n          for=\"id_is_hidden\"\n          labelClass=\"col-sm-4\"\n          controlClass=\"col-sm-8\"\n        >\n          <Select\n            id=\"id_is_closed\"\n            onChange={this.bindInput(\"is_hidden\")}\n            value={this.state.is_hidden}\n            choices={this.isHiddenChoices}\n          />\n        </FormGroup>\n      )\n    } else {\n      return null\n    }\n  }\n\n  renderClosedField() {\n    if (this.acl[this.state.category].can_close_threads) {\n      return (\n        <FormGroup\n          label={gettext(\"Close thread\")}\n          for=\"id_is_closed\"\n          labelClass=\"col-sm-4\"\n          controlClass=\"col-sm-8\"\n        >\n          <Select\n            id=\"id_is_closed\"\n            onChange={this.bindInput(\"is_closed\")}\n            value={this.state.is_closed}\n            choices={this.isClosedChoices}\n          />\n        </FormGroup>\n      )\n    } else {\n      return null\n    }\n  }\n\n  render() {\n    return (\n      <Modal className=\"modal-dialog\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"modal-body\">\n            <FormGroup\n              label={gettext(\"Thread title\")}\n              for=\"id_title\"\n              labelClass=\"col-sm-4\"\n              controlClass=\"col-sm-8\"\n              validation={this.state.errors.title}\n            >\n              <input\n                id=\"id_title\"\n                className=\"form-control\"\n                type=\"text\"\n                onChange={this.bindInput(\"title\")}\n                value={this.state.title}\n              />\n            </FormGroup>\n            <div className=\"clearfix\" />\n\n            <FormGroup\n              label={gettext(\"Category\")}\n              for=\"id_category\"\n              labelClass=\"col-sm-4\"\n              controlClass=\"col-sm-8\"\n              validation={this.state.errors.category}\n            >\n              <CategorySelect\n                id=\"id_category\"\n                onChange={this.onCategoryChange}\n                value={this.state.category}\n                choices={this.state.categories}\n              />\n            </FormGroup>\n            <div className=\"clearfix\" />\n\n            {this.renderWeightField()}\n            {this.renderHiddenField()}\n            {this.renderClosedField()}\n          </div>\n          <div className=\"modal-footer\">\n            <button\n              className=\"btn btn-default\"\n              data-dismiss=\"modal\"\n              disabled={this.state.isLoading}\n              type=\"button\"\n            >\n              {gettext(\"Cancel\")}\n            </button>\n            <Button className=\"btn-primary\" loading={this.state.isLoading}>\n              {gettext(\"Split posts\")}\n            </Button>\n          </div>\n        </form>\n      </Modal>\n    )\n  }\n}\n\nexport function Loader() {\n  return (\n    <Modal className=\"modal-dialog\">\n      <ModalLoader />\n    </Modal>\n  )\n}\n\nexport function Error(props) {\n  return (\n    <Modal className=\"modal-dialog modal-message\">\n      <div className=\"message-icon\">\n        <span className=\"material-icon\">info_outline</span>\n      </div>\n      <div className=\"message-body\">\n        <p className=\"lead\">\n          {gettext(\"You can't move selected posts at the moment.\")}\n        </p>\n        <p>{props.message}</p>\n        <button className=\"btn btn-default\" data-dismiss=\"modal\" type=\"button\">\n          {gettext(\"Ok\")}\n        </button>\n      </div>\n    </Modal>\n  )\n}\n\nexport function Modal(props) {\n  return (\n    <div className={props.className} role=\"document\">\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <button\n            aria-label={pgettext(\"modal\", \"Close\")}\n            className=\"close\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n          <h4 className=\"modal-title\">\n            {gettext(\"Split posts into new thread\")}\n          </h4>\n        </div>\n        {props.children}\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport modal from \"misago/services/modal\"\nimport * as moderation from \"./actions\"\nimport MoveModal from \"./move\"\nimport SplitModal from \"./split\"\n\nexport default function (props) {\n  return (\n    <ul className=\"dropdown-menu dropdown-menu-right stick-to-bottom\">\n      <Approve {...props} />\n      <Merge {...props} />\n      <Move {...props} />\n      <Split {...props} />\n      <Protect {...props} />\n      <Unprotect {...props} />\n      <Unhide {...props} />\n      <Hide {...props} />\n      <Delete {...props} />\n    </ul>\n  )\n}\n\nexport class Approve extends React.Component {\n  onClick = () => {\n    moderation.approve(this.props)\n  }\n\n  render() {\n    const isVisible = this.props.selection.find((post) => {\n      return post.acl.can_approve && post.is_unapproved\n    })\n\n    if (!isVisible) return null\n\n    return (\n      <li>\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">done</span>\n          {gettext(\"Approve\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Merge extends React.Component {\n  onClick = () => {\n    moderation.merge(this.props)\n  }\n\n  render() {\n    const isVisible =\n      this.props.selection.length > 1 &&\n      this.props.selection.find((post) => {\n        return post.acl.can_merge\n      })\n\n    if (!isVisible) return null\n\n    return (\n      <li>\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">call_merge</span>\n          {gettext(\"Merge\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Move extends React.Component {\n  onClick = () => {\n    modal.show(<MoveModal {...this.props} />)\n  }\n\n  render() {\n    const isVisible = this.props.selection.find((post) => {\n      return post.acl.can_move\n    })\n\n    if (!isVisible) return null\n\n    return (\n      <li>\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">arrow_forward</span>\n          {gettext(\"Move\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Split extends React.Component {\n  onClick = () => {\n    modal.show(<SplitModal {...this.props} />)\n  }\n\n  render() {\n    const isVisible = this.props.selection.find((post) => {\n      return post.acl.can_move\n    })\n\n    if (!isVisible) return null\n\n    return (\n      <li>\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">call_split</span>\n          {gettext(\"Split\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Protect extends React.Component {\n  onClick = () => {\n    moderation.protect(this.props)\n  }\n\n  render() {\n    const isVisible = this.props.selection.find((post) => {\n      return !post.is_protected && post.acl.can_protect\n    })\n\n    if (!isVisible) return null\n\n    return (\n      <li>\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">lock_outline</span>\n          {gettext(\"Protect\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Unprotect extends React.Component {\n  onClick = () => {\n    moderation.unprotect(this.props)\n  }\n\n  render() {\n    const isVisible = this.props.selection.find((post) => {\n      return post.is_protected && post.acl.can_protect\n    })\n\n    if (!isVisible) return null\n\n    return (\n      <li>\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">lock_open</span>\n          {gettext(\"Unprotect\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Hide extends React.Component {\n  onClick = () => {\n    moderation.hide(this.props)\n  }\n\n  render() {\n    const isVisible = this.props.selection.find((post) => {\n      return post.acl.can_hide && !post.is_hidden\n    })\n\n    if (!isVisible) return null\n\n    return (\n      <li>\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">visibility_off</span>\n          {gettext(\"Hide\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Unhide extends React.Component {\n  onClick = () => {\n    moderation.unhide(this.props)\n  }\n\n  render() {\n    const isVisible = this.props.selection.find((post) => {\n      return post.acl.can_unhide && post.is_hidden\n    })\n\n    if (!isVisible) return null\n\n    return (\n      <li>\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">visibility</span>\n          {gettext(\"Unhide\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Delete extends React.Component {\n  onClick = () => {\n    moderation.remove(this.props)\n  }\n\n  render() {\n    const isVisible = this.props.selection.find((post) => {\n      return post.acl.can_delete\n    })\n\n    if (!isVisible) return null\n\n    return (\n      <li>\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">clear</span>\n          {gettext(\"Delete\")}\n        </button>\n      </li>\n    )\n  }\n}\n","import React from \"react\"\nimport { ThreadPostsModerationOptions } from \"./moderation/posts\"\n\nconst ThreadPostsModeration = ({ thread, user, selection, dropup }) => (\n  <div className={dropup ? \"dropup\" : \"dropdown\"}>\n    <button\n      type=\"button\"\n      className=\"btn btn-default btn-outline btn-icon dropdown-toggle\"\n      title={gettext(\"Posts options\")}\n      data-toggle=\"dropdown\"\n      aria-haspopup=\"true\"\n      aria-expanded=\"false\"\n      disabled={selection.length === 0}\n    >\n      <span className=\"material-icon\">settings</span>\n    </button>\n    <ThreadPostsModerationOptions\n      thread={thread}\n      user={user}\n      selection={selection}\n    />\n  </div>\n)\n\nexport default ThreadPostsModeration\n","import React from \"react\"\n\nconst ThreadReplyButton = ({ onClick }) => (\n  <button\n    className=\"btn btn-primary btn-outline btn-block\"\n    type=\"button\"\n    onClick={onClick}\n  >\n    <span className=\"material-icon\">chat</span>\n    {gettext(\"Reply\")}\n  </button>\n)\n\nexport default ThreadReplyButton\n","import React from \"react\"\nimport { Toolbar, ToolbarItem, ToolbarSection, ToolbarSpacer } from \"../Toolbar\"\nimport ThreadPagination from \"./ThreadPagination\"\nimport ThreadPostsLeft from \"./ThreadPostsLeft\"\nimport ThreadPostsModeration from \"./ThreadPostsModeration\"\nimport ThreadReplyButton from \"./ThreadReplyButton\"\nimport ThreadSubscriptionButton from \"./ThreadSubscriptionButton\"\n\nconst ThreadToolbarBottom = ({\n  thread,\n  posts,\n  user,\n  selection,\n  moderation,\n  onReply,\n}) => (\n  <Toolbar>\n    <ToolbarSection>\n      <ToolbarItem>\n        <ThreadPagination baseUrl={thread.url.index} posts={posts} />\n      </ToolbarItem>\n      {moderation.enabled && (\n        <ToolbarItem className=\"hidden-sm hidden-md hidden-lg\" shrink>\n          <ThreadPostsModeration\n            thread={thread}\n            user={user}\n            selection={selection}\n            dropup\n          />\n        </ToolbarItem>\n      )}\n    </ToolbarSection>\n    <ToolbarSection className=\"hidden-xs hidden-sm\" auto>\n      <ToolbarItem>\n        <ThreadPostsLeft posts={posts} />\n      </ToolbarItem>\n    </ToolbarSection>\n    <ToolbarSpacer className=\"hidden-md hidden-lg\" />\n    {user.is_authenticated && (\n      <ToolbarSection>\n        <ToolbarItem>\n          <ThreadSubscriptionButton thread={thread} />\n        </ToolbarItem>\n        {thread.acl.can_reply && (\n          <ToolbarItem>\n            <ThreadReplyButton onClick={onReply} />\n          </ToolbarItem>\n        )}\n        {moderation.enabled && (\n          <ToolbarItem className=\"hidden-xs\" shrink>\n            <ThreadPostsModeration\n              thread={thread}\n              user={user}\n              selection={selection}\n              dropup\n            />\n          </ToolbarItem>\n        )}\n      </ToolbarSection>\n    )}\n  </Toolbar>\n)\n\nexport default ThreadToolbarBottom\n","import classnames from \"classnames\"\nimport React from \"react\"\n\nconst ThreadPollButton = ({ compact, disabled, onClick }) => (\n  <button\n    className={classnames(\"btn btn-default btn-outline\", {\n      \"btn-block\": !compact,\n      \"btn-icon\": compact,\n    })}\n    type=\"button\"\n    title={compact ? gettext(\"Add poll\") : null}\n    disabled={disabled}\n    onClick={onClick}\n  >\n    <span className=\"material-icon\">poll</span>\n    {!compact && gettext(\"Add poll\")}\n  </button>\n)\n\nexport default ThreadPollButton\n","import React from \"react\"\n\nconst ThreadShortcutsButton = ({ user, thread }) => (\n  <div className=\"dropdown\">\n    <button\n      className=\"btn btn-default btn-outline btn-icon\"\n      title={gettext(\"Shortcuts\")}\n      aria-expanded=\"true\"\n      aria-haspopup=\"true\"\n      data-toggle=\"dropdown\"\n      type=\"button\"\n    >\n      <span className=\"material-icon\">bookmark</span>\n    </button>\n    <ul className=\"dropdown-menu\">\n      {user.is_authenticated && thread.is_new && (\n        <li>\n          <a className=\"btn btn-link\" href={thread.url.new_post}>\n            <span className=\"material-icon\">comment</span>\n            {gettext(\"Go to new post\")}\n          </a>\n        </li>\n      )}\n      {thread.best_answer && (\n        <li>\n          <a className=\"btn btn-link\" href={thread.url.best_answer}>\n            <span className=\"material-icon\">check_circle</span>\n            {gettext(\"Go to best answer\")}\n          </a>\n        </li>\n      )}\n      {thread.has_unapproved_posts && thread.acl.can_approve && (\n        <li>\n          <a className=\"btn btn-link\" href={thread.url.unapproved_post}>\n            <span className=\"material-icon\">visibility</span>\n            {gettext(\"Go to unapproved post\")}\n          </a>\n        </li>\n      )}\n      <li>\n        <a className=\"btn btn-link\" href={thread.url.last_post}>\n          <span className=\"material-icon\">reply</span>\n          {gettext(\"Go to last post\")}\n        </a>\n      </li>\n    </ul>\n  </div>\n)\n\nexport default ThreadShortcutsButton\n","import React from \"react\"\nimport { Toolbar, ToolbarItem, ToolbarSection, ToolbarSpacer } from \"../Toolbar\"\nimport ThreadPagination from \"./ThreadPagination\"\nimport ThreadPollButton from \"./ThreadPollButton\"\nimport ThreadPostsModeration from \"./ThreadPostsModeration\"\nimport ThreadReplyButton from \"./ThreadReplyButton\"\nimport ThreadShortcutsButton from \"./ThreadShortcutsButton\"\n\nconst ThreadToolbarTop = ({\n  thread,\n  posts,\n  user,\n  pollDisabled,\n  selection,\n  moderation,\n  onPoll,\n  onReply,\n}) => (\n  <Toolbar>\n    <ToolbarSection className=\"hidden-xs\">\n      <ToolbarItem>\n        <ThreadShortcutsButton thread={thread} user={user} />\n      </ToolbarItem>\n      <ToolbarItem className=\"hidden-xs hidden-sm\">\n        <ThreadPagination baseUrl={thread.url.index} posts={posts} />\n      </ToolbarItem>\n    </ToolbarSection>\n    <ToolbarSpacer />\n    {thread.acl.can_start_poll && !thread.poll && (\n      <ToolbarSection className=\"hidden-xs\">\n        <ToolbarItem>\n          <ThreadPollButton disabled={pollDisabled} onClick={onPoll} />\n        </ToolbarItem>\n      </ToolbarSection>\n    )}\n    {thread.acl.can_reply ? (\n      <ToolbarSection>\n        <ToolbarItem className=\"hidden-sm hidden-md hidden-lg\" shrink>\n          <ThreadShortcutsButton thread={thread} user={user} />\n        </ToolbarItem>\n        <ToolbarItem>\n          <ThreadReplyButton onClick={onReply} />\n        </ToolbarItem>\n        {thread.acl.can_start_poll && !thread.poll && (\n          <ToolbarItem className=\"hidden-sm hidden-md hidden-lg\" shrink>\n            <ThreadPollButton\n              disabled={pollDisabled}\n              onClick={onPoll}\n              compact\n            />\n          </ToolbarItem>\n        )}\n        {moderation.enabled && (\n          <ToolbarItem className=\"hidden-xs\" shrink>\n            <ThreadPostsModeration\n              thread={thread}\n              user={user}\n              selection={selection}\n            />\n          </ToolbarItem>\n        )}\n      </ToolbarSection>\n    ) : (\n      <ToolbarSection>\n        <ToolbarItem className=\"hidden-sm hidden-md hidden-lg\" shrink>\n          <ThreadShortcutsButton thread={thread} user={user} />\n        </ToolbarItem>\n        {thread.acl.can_start_poll && !thread.poll && (\n          <ToolbarItem>\n            <ThreadPollButton disabled={pollDisabled} onClick={onPoll} />\n          </ToolbarItem>\n        )}\n        {moderation.enabled && (\n          <ToolbarItem shrink>\n            <ThreadPostsModeration\n              thread={thread}\n              user={user}\n              selection={selection}\n            />\n          </ToolbarItem>\n        )}\n      </ToolbarSection>\n    )}\n  </Toolbar>\n)\n\nexport default ThreadToolbarTop\n","import React from \"react\"\nimport Participants from \"misago/components/participants\"\nimport { Poll, PollForm } from \"misago/components/poll\"\nimport PostsList from \"misago/components/posts-list\"\nimport * as participants from \"misago/reducers/participants\"\nimport * as poll from \"misago/reducers/poll\"\nimport * as posts from \"misago/reducers/posts\"\nimport * as thread from \"misago/reducers/thread\"\nimport ajax from \"misago/services/ajax\"\nimport polls from \"misago/services/polls\"\nimport snackbar from \"misago/services/snackbar\"\nimport posting from \"misago/services/posting\"\nimport store from \"misago/services/store\"\nimport title from \"misago/services/page-title\"\nimport { PostingQuoteSelection } from \"../posting\"\nimport PageContainer from \"../PageContainer\"\nimport ThreadHeader from \"./ThreadHeader\"\nimport ThreadToolbarBottom from \"./ThreadToolbarBottom\"\nimport ThreadToolbarTop from \"./ThreadToolbarTop\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      editPoll: false,\n    }\n  }\n\n  componentDidMount() {\n    if (this.shouldFetchData()) {\n      this.fetchData()\n      this.setPageTitle()\n    }\n\n    this.startPollingApi()\n  }\n\n  componentDidUpdate() {\n    if (this.shouldFetchData()) {\n      this.fetchData()\n      this.startPollingApi()\n      this.setPageTitle()\n    }\n  }\n\n  componentWillUnmount() {\n    this.stopPollingApi()\n  }\n\n  shouldFetchData() {\n    if (this.props.posts.isLoaded) {\n      const page = (this.props.params.page || 1) * 1\n      return page != this.props.posts.page\n    } else {\n      return false\n    }\n  }\n\n  fetchData() {\n    store.dispatch(posts.unload())\n\n    ajax\n      .get(\n        this.props.thread.api.posts.index,\n        {\n          page: this.props.params.page || 1,\n        },\n        \"posts\"\n      )\n      .then(\n        (data) => {\n          this.update(data)\n        },\n        (rejection) => {\n          snackbar.apiError(rejection)\n        }\n      )\n  }\n\n  startPollingApi() {\n    polls.start({\n      poll: \"thread-posts\",\n\n      url: this.props.thread.api.posts.index,\n      data: {\n        page: this.props.params.page || 1,\n      },\n      update: this.update,\n\n      frequency: 120 * 1000,\n      delayed: true,\n    })\n  }\n\n  stopPollingApi() {\n    polls.stop(\"thread-posts\")\n  }\n\n  setPageTitle() {\n    title.set({\n      title: this.props.thread.title,\n      parent: this.props.thread.category.name,\n      page: (this.props.params.page || 1) * 1,\n    })\n  }\n\n  update = (data) => {\n    store.dispatch(thread.replace(data))\n    store.dispatch(posts.load(data.post_set))\n\n    if (data.participants) {\n      store.dispatch(participants.replace(data.participants))\n    }\n\n    if (data.poll) {\n      store.dispatch(poll.replace(data.poll))\n    }\n\n    this.setPageTitle()\n  }\n\n  openPollForm = () => {\n    this.setState({ editPoll: true })\n  }\n\n  closePollForm = () => {\n    this.setState({ editPoll: false })\n  }\n\n  openReplyForm = () => {\n    posting.open({\n      mode: \"REPLY\",\n\n      thread: this.props.thread,\n      config: this.props.thread.api.editor,\n      submit: this.props.thread.api.posts.index,\n    })\n  }\n\n  render() {\n    const category = this.props.thread.category\n\n    let className = \"page page-thread\"\n    if (category.css_class) {\n      className += \" page-thread-\" + category.css_class\n    }\n\n    const styleName =\n      category.special_role === \"private_threads\"\n        ? \"private-threads\"\n        : category.css_class || \"category-threads\"\n\n    const threadModeration = getThreadModeration(\n      this.props.thread,\n      this.props.user\n    )\n\n    const postsModeration = getPostsModeration(\n      this.props.posts.results,\n      this.props.user\n    )\n    const selection = this.props.posts.results.filter((post) => post.isSelected)\n\n    return (\n      <div className={className}>\n        <ThreadHeader\n          styleName={styleName}\n          thread={this.props.thread}\n          posts={this.props.posts}\n          user={this.props.user}\n          moderation={threadModeration}\n        />\n        <PageContainer>\n          <Participants\n            participants={this.props.participants}\n            thread={this.props.thread}\n            user={this.props.user}\n          />\n          <ThreadToolbarTop\n            thread={this.props.thread}\n            posts={this.props.posts}\n            user={this.props.user}\n            selection={selection}\n            moderation={postsModeration}\n            pollDisabled={this.state.editPoll}\n            onPoll={this.openPollForm}\n            onReply={this.openReplyForm}\n          />\n          {this.state.editPoll ? (\n            <PollForm\n              poll={this.props.poll}\n              thread={this.props.thread}\n              close={this.closePollForm}\n            />\n          ) : (\n            <Poll\n              poll={this.props.poll}\n              thread={this.props.thread}\n              user={this.props.user}\n              edit={this.openPollForm}\n            />\n          )}\n          {this.props.thread.acl.can_reply ? (\n            <PostingQuoteSelection\n              posting={{\n                mode: \"REPLY\",\n\n                thread: this.props.thread,\n                config: this.props.thread.api.editor,\n                submit: this.props.thread.api.posts.index,\n              }}\n            >\n              <PostsList {...this.props} />\n            </PostingQuoteSelection>\n          ) : (\n            <PostsList {...this.props} />\n          )}\n          <ThreadToolbarBottom\n            thread={this.props.thread}\n            posts={this.props.posts}\n            user={this.props.user}\n            selection={selection}\n            moderation={postsModeration}\n            onReply={this.openReplyForm}\n          />\n        </PageContainer>\n      </div>\n    )\n  }\n}\n\nconst getThreadModeration = (thread, user) => {\n  const moderation = {\n    enabled: false,\n    edit: false,\n    approve: false,\n    close: false,\n    open: false,\n    hide: false,\n    unhide: false,\n    move: false,\n    merge: false,\n    pinGlobally: false,\n    pinLocally: false,\n    unpin: false,\n    delete: false,\n  }\n\n  if (!user.is_authenticated) return moderation\n\n  moderation.edit = thread.acl.can_edit\n  moderation.approve = thread.acl.can_approve && thread.is_unapproved\n  moderation.close = thread.acl.can_close && !thread.is_closed\n  moderation.open = thread.acl.can_close && thread.is_closed\n  moderation.hide = thread.acl.can_hide && !thread.is_hidden\n  moderation.unhide = thread.acl.can_unhide && thread.is_hidden\n  moderation.move = thread.acl.can_move\n  moderation.merge = thread.acl.can_merge\n  moderation.pinGlobally = thread.acl.can_pin_globally && thread.weight < 2\n  moderation.pinLocally = thread.acl.can_pin && thread.weight !== 1\n  moderation.unpin =\n    (thread.acl.can_pin && thread.weight === 1) ||\n    (thread.acl.can_pin_globally && thread.weight === 2)\n  moderation.delete = thread.acl.can_delete\n\n  moderation.enabled =\n    moderation.edit ||\n    moderation.approve ||\n    moderation.close ||\n    moderation.open ||\n    moderation.hide ||\n    moderation.unhide ||\n    moderation.move ||\n    moderation.merge ||\n    moderation.pinGlobally ||\n    moderation.pinLocally ||\n    moderation.unpin ||\n    moderation.delete\n\n  return moderation\n}\n\nconst getPostsModeration = (posts, user) => {\n  const moderation = {\n    enabled: false,\n    approve: false,\n    move: false,\n    merge: false,\n    protect: false,\n    hide: false,\n    delete: false,\n  }\n\n  if (!user.is_authenticated) return moderation\n\n  posts.forEach((post) => {\n    if (!post.is_event) {\n      if (post.acl.can_approve && post.is_unapproved) {\n        moderation.approve = true\n      }\n      if (post.acl.can_move) moderation.move = true\n      if (post.acl.can_merge) moderation.merge = true\n      if (post.acl.can_protect || post.acl.can_unprotect) {\n        moderation.protect = true\n      }\n      if (post.acl.can_hide || post.acl.can_unhide) {\n        moderation.hide = true\n      }\n      if (post.acl.can_delete) moderation.delete = true\n\n      if (\n        moderation.approve ||\n        moderation.move ||\n        moderation.merge ||\n        moderation.protect ||\n        moderation.hide ||\n        moderation.delete\n      ) {\n        moderation.enabled = true\n      }\n    }\n  })\n\n  return moderation\n}\n","import { connect } from \"react-redux\"\nimport Route from \"misago/components/thread/route\"\nimport misago from \"misago/index\"\n\nexport function select(store) {\n  return {\n    participants: store.participants,\n    poll: store.poll,\n    posts: store.posts,\n    thread: store.thread,\n    tick: store.tick.tick,\n    user: store.auth.user,\n  }\n}\n\nexport function paths() {\n  const thread = misago.get(\"THREAD\")\n  const basePath = thread.url.index.replace(\n    thread.slug + \"-\" + thread.pk,\n    \":slug\"\n  )\n  return [\n    {\n      path: basePath,\n      component: connect(select)(Route),\n    },\n    {\n      path: basePath + \":page/\",\n      component: connect(select)(Route),\n    },\n  ]\n}\n","import { paths } from \"misago/components/thread/root\"\nimport misago from \"misago/index\"\nimport mount from \"misago/utils/routed-component\"\n\nexport default function initializer(context) {\n  if (context.has(\"THREAD\") && context.has(\"POSTS\")) {\n    mount({\n      paths: paths(),\n    })\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:thread\",\n  initializer: initializer,\n  after: \"store\",\n})\n","export function compareLastPostAge(a, b) {\n  if (a.last_post > b.last_post) {\n    return -1\n  } else if (a.last_post < b.last_post) {\n    return 1\n  } else {\n    return 0\n  }\n}\n\nexport function compareGlobalWeight(a, b) {\n  if (a.weight === 2 && a.weight > b.weight) {\n    return -1\n  } else if (b.weight === 2 && a.weight < b.weight) {\n    return 1\n  } else {\n    return compareLastPostAge(a, b)\n  }\n}\n\nexport function compareWeight(a, b) {\n  if (a.weight > b.weight) {\n    return -1\n  } else if (a.weight < b.weight) {\n    return 1\n  } else {\n    return compareLastPostAge(a, b)\n  }\n}\n","import React from \"react\"\nimport { Link } from \"react-router\"\n\nconst ThreadsCategoryPicker = ({\n  allItems,\n  parentUrl,\n  category,\n  categories,\n  list,\n}) => (\n  <div className=\"dropdown threads-category-picker\">\n    <button\n      type=\"button\"\n      className=\"btn btn-default btn-outline dropdown-toggle btn-block text-ellipsis\"\n      data-toggle=\"dropdown\"\n      aria-haspopup=\"true\"\n      aria-expanded=\"false\"\n    >\n      {category && (\n        <span\n          className=\"material-icon\"\n          style={{ color: category.color || \"inherit\" }}\n        >\n          label\n        </span>\n      )}\n      {category && category.short_name && (\n        <span className={category.short_name && \"hidden-md hidden-lg\"}>\n          {category.short_name}\n        </span>\n      )}\n      {category ? (\n        <span className={category.short_name && \"hidden-xs hidden-sm\"}>\n          {category.name}\n        </span>\n      ) : (\n        allItems\n      )}\n    </button>\n    <ul className=\"dropdown-menu\">\n      <li>\n        <Link to={parentUrl + list.path}>{allItems}</Link>\n      </li>\n      <li role=\"separator\" className=\"divider\" />\n      {categories.map((choice) => (\n        <li key={choice.id}>\n          <Link to={choice.url.index + list.path}>\n            <span\n              className=\"material-icon\"\n              style={{ color: choice.color || \"inherit\" }}\n            >\n              label\n            </span>\n            {choice.name}\n          </Link>\n        </li>\n      ))}\n    </ul>\n  </div>\n)\n\nexport default ThreadsCategoryPicker\n","import React from \"react\"\nimport { Link } from \"react-router\"\n\nconst ThreadsListPicker = ({ baseUrl, list, lists }) => (\n  <div className=\"dropdown threads-list-picker\">\n    <button\n      type=\"button\"\n      className=\"btn btn-default btn-outline dropdown-toggle btn-block\"\n      data-toggle=\"dropdown\"\n      aria-haspopup=\"true\"\n      aria-expanded=\"false\"\n    >\n      {list.longName}\n    </button>\n    <ul className=\"dropdown-menu stick-to-bottom\">\n      {lists.map((choice) => (\n        <li key={choice.type}>\n          <Link to={baseUrl + choice.path}>{choice.longName}</Link>\n        </li>\n      ))}\n    </ul>\n  </div>\n)\n\nexport default ThreadsListPicker\n","import React from \"react\"\n\nexport default class extends React.Component {\n  render() {\n    return (\n      <div className=\"modal-dialog\" role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              aria-label={pgettext(\"modal\", \"Close\")}\n              className=\"close\"\n              data-dismiss=\"modal\"\n              type=\"button\"\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Threads moderation\")}</h4>\n          </div>\n          <div className=\"modal-body\">\n            <p className=\"lead\">\n              {gettext(\"One or more threads could not be deleted:\")}\n            </p>\n\n            <ul className=\"list-unstyled list-errored-items\">\n              {this.props.errors.map((item) => {\n                return (\n                  <ThreadErrors\n                    errors={item.errors}\n                    key={item.thread.id}\n                    thread={item.thread}\n                  />\n                )\n              })}\n            </ul>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport function ThreadErrors({ errors, thread }) {\n  return (\n    <li>\n      <h5>{thread.title}</h5>\n      {errors.map((message, i) => {\n        return <p>{message}</p>\n      })}\n    </li>\n  )\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport CategorySelect from \"misago/components/category-select\"\nimport Select from \"misago/components/select\"\nimport misago from \"misago/index\"\nimport { filterThreads } from \"misago/reducers/threads\"\nimport * as select from \"misago/reducers/selection\"\nimport ErrorsModal from \"misago/components/threads/moderation/errors-list\"\nimport MergeConflict from \"misago/components/merge-conflict\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport * as validators from \"misago/utils/validators\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      title: \"\",\n      category: null,\n      weight: 0,\n      is_hidden: 0,\n      is_closed: false,\n\n      validators: {\n        title: [validators.required()],\n      },\n\n      errors: {},\n    }\n\n    this.acl = {}\n    for (const i in props.user.acl.categories) {\n      if (!props.user.acl.categories.hasOwnProperty(i)) {\n        continue\n      }\n\n      const acl = props.user.acl.categories[i]\n      this.acl[acl.id] = acl\n    }\n\n    this.categoryChoices = []\n    props.categories.forEach((category) => {\n      if (category.level > 0) {\n        const acl = this.acl[category.id]\n        const disabled =\n          !acl.can_start_threads ||\n          (category.is_closed && !acl.can_close_threads)\n\n        this.categoryChoices.push({\n          value: category.id,\n          disabled: disabled,\n          level: category.level - 1,\n          label: category.name,\n        })\n\n        if (!disabled && !this.state.category) {\n          this.state.category = category.id\n        }\n      }\n    })\n\n    this.isHiddenChoices = [\n      {\n        value: 0,\n        icon: \"visibility\",\n        label: gettext(\"No\"),\n      },\n      {\n        value: 1,\n        icon: \"visibility_off\",\n        label: gettext(\"Yes\"),\n      },\n    ]\n\n    this.isClosedChoices = [\n      {\n        value: false,\n        icon: \"lock_outline\",\n        label: gettext(\"No\"),\n      },\n      {\n        value: true,\n        icon: \"lock\",\n        label: gettext(\"Yes\"),\n      },\n    ]\n  }\n\n  clean() {\n    if (this.isValid()) {\n      return true\n    } else {\n      snackbar.error(gettext(\"Form contains errors.\"))\n      this.setState({\n        errors: this.validate(),\n      })\n      return false\n    }\n  }\n\n  send() {\n    return ajax.post(misago.get(\"MERGE_THREADS_API\"), this.getFormdata())\n  }\n\n  getFormdata = () => {\n    return {\n      threads: this.props.threads.map((thread) => thread.id),\n      title: this.state.title,\n      category: this.state.category,\n      weight: this.state.weight,\n      is_hidden: this.state.is_hidden,\n      is_closed: this.state.is_closed,\n    }\n  }\n\n  handleSuccess = (apiResponse) => {\n    // unfreeze and remove merged threads\n    this.props.threads.forEach((thread) => {\n      this.props.freezeThread(thread.id)\n      this.props.deleteThread(thread)\n    })\n\n    // deselect all threads\n    store.dispatch(select.none())\n\n    // append merged thread, filter threads\n    this.props.addThreads([apiResponse])\n    store.dispatch(\n      filterThreads(this.props.route.category, this.props.categoriesMap)\n    )\n\n    // hide modal\n    modal.hide()\n  }\n\n  handleError = (rejection) => {\n    if (rejection.status === 400) {\n      if (rejection.best_answers || rejection.polls) {\n        modal.show(\n          <MergeConflict\n            api={misago.get(\"MERGE_THREADS_API\")}\n            bestAnswers={rejection.best_answers}\n            data={this.getFormdata()}\n            polls={rejection.polls}\n            onError={this.handleError}\n            onSuccess={this.handleSuccess}\n          />\n        )\n      } else {\n        this.setState({\n          errors: Object.assign({}, this.state.errors, rejection),\n        })\n        snackbar.error(gettext(\"Form contains errors.\"))\n      }\n    } else if (rejection.status === 403 && Array.isArray(rejection)) {\n      modal.show(<ErrorsModal errors={rejection} />)\n    } else if (rejection.best_answer) {\n      snackbar.error(rejection.best_answer[0])\n    } else if (rejection.poll) {\n      snackbar.error(rejection.poll[0])\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  onCategoryChange = (ev) => {\n    const categoryId = ev.target.value\n    const newState = {\n      category: categoryId,\n    }\n\n    if (this.acl[categoryId].can_pin_threads < newState.weight) {\n      newState.weight = 0\n    }\n\n    if (!this.acl[categoryId].can_hide_threads) {\n      newState.is_hidden = 0\n    }\n\n    if (!this.acl[categoryId].can_close_threads) {\n      newState.is_closed = false\n    }\n\n    this.setState(newState)\n  }\n\n  getWeightChoices() {\n    const choices = [\n      {\n        value: 0,\n        icon: \"remove\",\n        label: gettext(\"Not pinned\"),\n      },\n      {\n        value: 1,\n        icon: \"bookmark_border\",\n        label: gettext(\"Pinned locally\"),\n      },\n    ]\n\n    if (this.acl[this.state.category].can_pin_threads == 2) {\n      choices.push({\n        value: 2,\n        icon: \"bookmark\",\n        label: gettext(\"Pinned globally\"),\n      })\n    }\n\n    return choices\n  }\n\n  renderWeightField() {\n    if (this.acl[this.state.category].can_pin_threads) {\n      return (\n        <FormGroup label={gettext(\"Thread weight\")} for=\"id_weight\">\n          <Select\n            id=\"id_weight\"\n            onChange={this.bindInput(\"weight\")}\n            value={this.state.weight}\n            choices={this.getWeightChoices()}\n          />\n        </FormGroup>\n      )\n    } else {\n      return null\n    }\n  }\n\n  renderHiddenField() {\n    if (this.acl[this.state.category].can_hide_threads) {\n      return (\n        <FormGroup label={gettext(\"Hide thread\")} for=\"id_is_hidden\">\n          <Select\n            id=\"id_is_closed\"\n            onChange={this.bindInput(\"is_hidden\")}\n            value={this.state.is_hidden}\n            choices={this.isHiddenChoices}\n          />\n        </FormGroup>\n      )\n    } else {\n      return null\n    }\n  }\n\n  renderClosedField() {\n    if (this.acl[this.state.category].can_close_threads) {\n      return (\n        <FormGroup label={gettext(\"Close thread\")} for=\"id_is_closed\">\n          <Select\n            id=\"id_is_closed\"\n            onChange={this.bindInput(\"is_closed\")}\n            value={this.state.is_closed}\n            choices={this.isClosedChoices}\n          />\n        </FormGroup>\n      )\n    } else {\n      return null\n    }\n  }\n\n  renderForm() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"modal-body\">\n          <FormGroup\n            label={gettext(\"Thread title\")}\n            for=\"id_title\"\n            validation={this.state.errors.title}\n          >\n            <input\n              id=\"id_title\"\n              className=\"form-control\"\n              type=\"text\"\n              onChange={this.bindInput(\"title\")}\n              value={this.state.title}\n            />\n          </FormGroup>\n          <div className=\"clearfix\" />\n\n          <FormGroup\n            label={gettext(\"Category\")}\n            for=\"id_category\"\n            validation={this.state.errors.category}\n          >\n            <CategorySelect\n              id=\"id_category\"\n              onChange={this.onCategoryChange}\n              value={this.state.category}\n              choices={this.categoryChoices}\n            />\n          </FormGroup>\n          <div className=\"clearfix\" />\n\n          {this.renderWeightField()}\n          {this.renderHiddenField()}\n          {this.renderClosedField()}\n        </div>\n        <div className=\"modal-footer\">\n          <button\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n            disabled={this.state.isLoading}\n            type=\"button\"\n          >\n            {gettext(\"Cancel\")}\n          </button>\n          <Button className=\"btn-primary\" loading={this.state.isLoading}>\n            {gettext(\"Merge threads\")}\n          </Button>\n        </div>\n      </form>\n    )\n  }\n\n  renderCantMergeMessage() {\n    return (\n      <div className=\"modal-body\">\n        <div className=\"message-icon\">\n          <span className=\"material-icon\">info_outline</span>\n        </div>\n        <div className=\"message-body\">\n          <p className=\"lead\">\n            {gettext(\n              \"You can't move threads because there are no categories you are allowed to move them to.\"\n            )}\n          </p>\n          <p>\n            {gettext(\n              \"You need permission to start threads in category to be able to merge threads to it.\"\n            )}\n          </p>\n          <button\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            {gettext(\"Ok\")}\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  getClassName() {\n    if (!this.state.category) {\n      return \"modal-dialog modal-message\"\n    } else {\n      return \"modal-dialog\"\n    }\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()} role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"modal\"\n              aria-label={pgettext(\"modal\", \"Close\")}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Merge threads\")}</h4>\n          </div>\n          {this.state.category\n            ? this.renderForm()\n            : this.renderCantMergeMessage()}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport CategorySelect from \"misago/components/category-select\"\nimport * as select from \"misago/reducers/selection\"\nimport { filterThreads } from \"misago/reducers/threads\"\nimport modal from \"misago/services/modal\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      category: null,\n    }\n\n    const acls = {}\n    for (const i in props.user.acl.categories) {\n      if (!props.user.acl.categories.hasOwnProperty(i)) {\n        continue\n      }\n\n      const acl = props.user.acl.categories[i]\n      acls[acl.id] = acl\n    }\n\n    this.categoryChoices = []\n    props.categories.forEach((category) => {\n      if (category.level > 0) {\n        const acl = acls[category.id]\n        const disabled =\n          !acl.can_start_threads ||\n          (category.is_closed && !acl.can_close_threads)\n\n        this.categoryChoices.push({\n          value: category.id,\n          disabled: disabled,\n          level: category.level - 1,\n          label: category.name,\n        })\n\n        if (!disabled && !this.state.category) {\n          this.state.category = category.id\n        }\n      }\n    })\n  }\n\n  handleSubmit = (event) => {\n    // we don't reload page on submissions\n    event.preventDefault()\n\n    modal.hide()\n\n    const onSuccess = () => {\n      store.dispatch(\n        filterThreads(this.props.route.category, this.props.categoriesMap)\n      )\n\n      // deselect threads moved outside of visible scope\n      const storeState = store.getState()\n      const leftThreads = storeState.threads.map((thread) => thread.id)\n      store.dispatch(\n        select.all(\n          storeState.selection.filter((thread) => {\n            return leftThreads.indexOf(thread) !== -1\n          })\n        )\n      )\n    }\n\n    this.props.callApi(\n      [\n        { op: \"replace\", path: \"category\", value: this.state.category },\n        { op: \"replace\", path: \"flatten-categories\", value: null },\n        { op: \"add\", path: \"acl\", value: true },\n      ],\n      gettext(\"Selected threads were moved.\"),\n      onSuccess\n    )\n  }\n\n  getClassName() {\n    if (!this.state.category) {\n      return \"modal-dialog modal-message\"\n    } else {\n      return \"modal-dialog\"\n    }\n  }\n\n  renderForm() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"modal-body\">\n          <FormGroup label={gettext(\"New category\")} for=\"id_new_category\">\n            <CategorySelect\n              id=\"id_new_category\"\n              onChange={this.bindInput(\"category\")}\n              value={this.state.category}\n              choices={this.categoryChoices}\n            />\n          </FormGroup>\n        </div>\n        <div className=\"modal-footer\">\n          <button\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n            disabled={this.state.isLoading}\n            type=\"button\"\n          >\n            {gettext(\"Cancel\")}\n          </button>\n          <button className=\"btn btn-primary\">{gettext(\"Move threads\")}</button>\n        </div>\n      </form>\n    )\n  }\n\n  renderCantMoveMessage() {\n    return (\n      <div className=\"modal-body\">\n        <div className=\"message-icon\">\n          <span className=\"material-icon\">info_outline</span>\n        </div>\n        <div className=\"message-body\">\n          <p className=\"lead\">\n            {gettext(\n              \"You can't move threads because there are no categories you are allowed to move them to.\"\n            )}\n          </p>\n          <p>\n            {gettext(\n              \"You need permission to start threads in category to be able to move threads to it.\"\n            )}\n          </p>\n          <button\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            {gettext(\"Ok\")}\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()} role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"modal\"\n              aria-label={pgettext(\"modal\", \"Close\")}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Move threads\")}</h4>\n          </div>\n          {this.state.category\n            ? this.renderForm()\n            : this.renderCantMoveMessage()}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport ErrorsModal from \"misago/components/threads/moderation/errors-list\"\nimport MergeThreads from \"misago/components/threads/moderation/merge\"\nimport MoveThreads from \"misago/components/threads/moderation/move\"\nimport * as select from \"misago/reducers/selection\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends React.Component {\n  callApi = (ops, successMessage, onSuccess = null) => {\n    // freeze threads\n    this.props.threads.forEach((thread) => {\n      this.props.freezeThread(thread.id)\n    })\n\n    // list ids\n    const ids = this.props.threads.map((thread) => {\n      return thread.id\n    })\n\n    // always return current acl\n    ops.push({ op: \"add\", path: \"acl\", value: true })\n\n    ajax.patch(this.props.api, { ids, ops }).then(\n      (data) => {\n        // unfreeze\n        this.props.threads.forEach((thread) => {\n          this.props.freezeThread(thread.id)\n        })\n\n        // update threads\n        data.forEach((thread) => {\n          this.props.updateThread(thread)\n        })\n\n        // show success message and call callback\n        snackbar.success(successMessage)\n        if (onSuccess) {\n          onSuccess()\n        }\n      },\n      (rejection) => {\n        // unfreeze\n        this.props.threads.forEach((thread) => {\n          this.props.freezeThread(thread.id)\n        })\n\n        // escape on non-400 error\n        if (rejection.status !== 400) {\n          return snackbar.apiError(rejection)\n        }\n\n        // build errors list\n        let errors = []\n        let threadsMap = {}\n\n        this.props.threads.forEach((thread) => {\n          threadsMap[thread.id] = thread\n        })\n\n        rejection.forEach(({ id, detail }) => {\n          if (typeof threadsMap[id] !== \"undefined\") {\n            errors.push({\n              errors: detail,\n              thread: threadsMap[id],\n            })\n          }\n        })\n\n        modal.show(<ErrorsModal errors={errors} />)\n      }\n    )\n  }\n\n  pinGlobally = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"weight\",\n          value: 2,\n        },\n      ],\n      gettext(\"Selected threads were pinned globally.\")\n    )\n  }\n\n  pinLocally = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"weight\",\n          value: 1,\n        },\n      ],\n      gettext(\"Selected threads were pinned locally.\")\n    )\n  }\n\n  unpin = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"weight\",\n          value: 0,\n        },\n      ],\n      gettext(\"Selected threads were unpinned.\")\n    )\n  }\n\n  approve = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-unapproved\",\n          value: false,\n        },\n      ],\n      gettext(\"Selected threads were approved.\")\n    )\n  }\n\n  open = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-closed\",\n          value: false,\n        },\n      ],\n      gettext(\"Selected threads were opened.\")\n    )\n  }\n\n  close = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-closed\",\n          value: true,\n        },\n      ],\n      gettext(\"Selected threads were closed.\")\n    )\n  }\n\n  unhide = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-hidden\",\n          value: false,\n        },\n      ],\n      gettext(\"Selected threads were unhidden.\")\n    )\n  }\n\n  hide = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-hidden\",\n          value: true,\n        },\n      ],\n      gettext(\"Selected threads were hidden.\")\n    )\n  }\n\n  move = () => {\n    modal.show(\n      <MoveThreads\n        callApi={this.callApi}\n        categories={this.props.categories}\n        categoriesMap={this.props.categoriesMap}\n        route={this.props.route}\n        user={this.props.user}\n      />\n    )\n  }\n\n  merge = () => {\n    const errors = []\n    this.props.threads.forEach((thread) => {\n      if (!thread.acl.can_merge) {\n        errors.append({\n          id: thread.id,\n          title: thread.title,\n          errors: [\n            gettext(\n              \"You don't have permission to merge this thread with others.\"\n            ),\n          ],\n        })\n      }\n    })\n\n    if (this.props.threads.length < 2) {\n      snackbar.info(\n        gettext(\"You have to select at least two threads to merge.\")\n      )\n    } else if (errors.length) {\n      modal.show(<ErrorsModal errors={errors} />)\n      return\n    } else {\n      modal.show(<MergeThreads {...this.props} />)\n    }\n  }\n\n  delete = () => {\n    if (\n      !window.confirm(\n        gettext(\"Are you sure you want to delete selected threads?\")\n      )\n    ) {\n      return\n    }\n\n    this.props.threads.map((thread) => {\n      this.props.freezeThread(thread.id)\n    })\n\n    const ids = this.props.threads.map((thread) => {\n      return thread.id\n    })\n\n    ajax.delete(this.props.api, ids).then(\n      () => {\n        this.props.threads.map((thread) => {\n          this.props.freezeThread(thread.id)\n          this.props.deleteThread(thread)\n        })\n\n        snackbar.success(gettext(\"Selected threads were deleted.\"))\n      },\n      (rejection) => {\n        if (rejection.status === 400) {\n          const failedThreads = rejection.map((thread) => {\n            return thread.id\n          })\n\n          this.props.threads.map((thread) => {\n            this.props.freezeThread(thread.id)\n            if (failedThreads.indexOf(thread.id) === -1) {\n              this.props.deleteThread(thread)\n            }\n          })\n\n          modal.show(<ErrorsModal errors={rejection} />)\n        } else {\n          snackbar.apiError(rejection)\n        }\n      }\n    )\n  }\n\n  render() {\n    const { moderation, threads } = this.props\n    const noSelection = this.props.selection.length == 0\n\n    return (\n      <ul className=\"dropdown-menu dropdown-menu-right stick-to-bottom\">\n        <li>\n          <button\n            className=\"btn btn-link\"\n            type=\"button\"\n            onClick={() => store.dispatch(select.all(threads.map((t) => t.id)))}\n          >\n            <span className=\"material-icon\">check_box</span>\n            {gettext(\"Select all\")}\n          </button>\n        </li>\n        <li>\n          <button\n            className=\"btn btn-link\"\n            type=\"button\"\n            disabled={noSelection}\n            onClick={() => store.dispatch(select.none())}\n          >\n            <span className=\"material-icon\">check_box_outline_blank</span>\n            {gettext(\"Select none\")}\n          </button>\n        </li>\n        <li role=\"separator\" className=\"divider\" />\n        {!!moderation.can_pin_globally && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              type=\"button\"\n              disabled={noSelection}\n              onClick={this.pinGlobally}\n            >\n              <span className=\"material-icon\">bookmark</span>\n              {gettext(\"Pin threads globally\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.can_pin && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              type=\"button\"\n              disabled={noSelection}\n              onClick={this.pinLocally}\n            >\n              <span className=\"material-icon\">bookmark_border</span>\n              {gettext(\"Pin threads locally\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.can_pin && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              type=\"button\"\n              disabled={noSelection}\n              onClick={this.unpin}\n            >\n              <span className=\"material-icon\">panorama_fish_eye</span>\n              {gettext(\"Unpin threads\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.can_move && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              type=\"button\"\n              disabled={noSelection}\n              onClick={this.move}\n            >\n              <span className=\"material-icon\">arrow_forward</span>\n              {gettext(\"Move threads\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.can_merge && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              type=\"button\"\n              disabled={noSelection}\n              onClick={this.merge}\n            >\n              <span className=\"material-icon\">call_merge</span>\n              {gettext(\"Merge threads\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.can_approve && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              type=\"button\"\n              disabled={noSelection}\n              onClick={this.approve}\n            >\n              <span className=\"material-icon\">done</span>\n              {gettext(\"Approve threads\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.can_close && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              type=\"button\"\n              disabled={noSelection}\n              onClick={this.open}\n            >\n              <span className=\"material-icon\">lock_open</span>\n              {gettext(\"Open threads\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.can_close && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              type=\"button\"\n              disabled={noSelection}\n              onClick={this.close}\n            >\n              <span className=\"material-icon\">lock_outline</span>\n              {gettext(\"Close threads\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.can_unhide && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              type=\"button\"\n              disabled={noSelection}\n              onClick={this.unhide}\n            >\n              <span className=\"material-icon\">visibility</span>\n              {gettext(\"Unhide threads\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.can_hide && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              type=\"button\"\n              disabled={noSelection}\n              onClick={this.hide}\n            >\n              <span className=\"material-icon\">visibility_off</span>\n              {gettext(\"Hide threads\")}\n            </button>\n          </li>\n        )}\n        {!!moderation.can_delete && (\n          <li>\n            <button\n              className=\"btn btn-link\"\n              type=\"button\"\n              disabled={noSelection}\n              onClick={this.delete}\n            >\n              <span className=\"material-icon\">clear</span>\n              {gettext(\"Delete threads\")}\n            </button>\n          </li>\n        )}\n      </ul>\n    )\n  }\n}\n","import React from \"react\"\nimport ModerationControls from \"./moderation/controls\"\n\nconst ThreadsToolbarModeration = ({\n  api,\n  categoriesMap,\n  categories,\n  threads,\n  addThreads,\n  freezeThread,\n  updateThread,\n  deleteThread,\n  selection,\n  moderation,\n  route,\n  user,\n  disabled,\n}) => (\n  <div className=\"dropdown threads-moderation\">\n    <button\n      type=\"button\"\n      className=\"btn btn-default btn-outline btn-icon dropdown-toggle\"\n      title={gettext(\"Moderation\")}\n      data-toggle=\"dropdown\"\n      aria-haspopup=\"true\"\n      aria-expanded=\"false\"\n      disabled={disabled}\n    >\n      <span className=\"material-icon\">settings</span>\n    </button>\n    <ModerationControls\n      api={api}\n      categories={categories}\n      categoriesMap={categoriesMap}\n      threads={threads}\n      addThreads={addThreads}\n      freezeThread={freezeThread}\n      updateThread={updateThread}\n      deleteThread={deleteThread}\n      selection={selection}\n      moderation={moderation}\n      route={route}\n      user={user}\n      disabled={disabled}\n    />\n  </div>\n)\n\nexport default ThreadsToolbarModeration\n","import React from \"react\"\nimport posting from \"../../services/posting\"\nimport Button from \"../button\"\nimport { Toolbar, ToolbarItem, ToolbarSection, ToolbarSpacer } from \"../Toolbar\"\nimport ThreadsCategoryPicker from \"./ThreadsCategoryPicker\"\nimport ThreadsListPicker from \"./ThreadsListPicker\"\nimport ThreadsToolbarModeration from \"./ThreadsToolbarModeration\"\n\nconst ThreadsToolbar = ({\n  api,\n  baseUrl,\n  category,\n  categories,\n  categoriesMap,\n  topCategory,\n  topCategories,\n  subCategory,\n  subCategories,\n  list,\n  lists,\n  threads,\n  addThreads,\n  startThread,\n  freezeThread,\n  updateThread,\n  deleteThread,\n  selection,\n  moderation,\n  route,\n  user,\n  disabled,\n}) => (\n  <Toolbar>\n    {topCategories.length > 0 && (\n      <ToolbarSection>\n        <ToolbarItem>\n          <ThreadsCategoryPicker\n            allItems={gettext(\"All categories\")}\n            parentUrl={list.path}\n            category={topCategory}\n            categories={topCategories}\n            list={list}\n          />\n        </ToolbarItem>\n        {topCategory && subCategories.length > 0 && (\n          <ToolbarItem>\n            <ThreadsCategoryPicker\n              allItems={gettext(\"All subcategories\")}\n              parentUrl={topCategory.url.index}\n              category={subCategory}\n              categories={subCategories}\n              list={list}\n            />\n          </ToolbarItem>\n        )}\n      </ToolbarSection>\n    )}\n    {lists.length > 1 && (\n      <ToolbarSection className=\"hidden-xs\">\n        <ToolbarItem>\n          <ThreadsListPicker baseUrl={baseUrl} list={list} lists={lists} />\n        </ToolbarItem>\n      </ToolbarSection>\n    )}\n    <ToolbarSpacer />\n    {!!user.id && (\n      <ToolbarSection>\n        <ToolbarItem>\n          <Button\n            className=\"btn-primary btn-outline btn-block\"\n            disabled={disabled}\n            onClick={() => {\n              posting.open(\n                startThread || {\n                  mode: \"START\",\n\n                  config: misago.get(\"THREAD_EDITOR_API\"),\n                  submit: misago.get(\"THREADS_API\"),\n\n                  category: category.id,\n                }\n              )\n            }}\n          >\n            <span className=\"material-icon\">chat</span>\n            {gettext(\"Start thread\")}\n          </Button>\n        </ToolbarItem>\n        {!!moderation.allow && (\n          <ToolbarItem shrink>\n            <ThreadsToolbarModeration\n              api={api}\n              categories={categories}\n              categoriesMap={categoriesMap}\n              threads={threads.filter(\n                (thread) => selection.indexOf(thread.id) !== -1\n              )}\n              addThreads={addThreads}\n              freezeThread={freezeThread}\n              updateThread={updateThread}\n              deleteThread={deleteThread}\n              selection={selection}\n              moderation={moderation}\n              route={route}\n              user={user}\n              disabled={disabled}\n            />\n          </ToolbarItem>\n        )}\n      </ToolbarSection>\n    )}\n  </Toolbar>\n)\n\nexport default ThreadsToolbar\n","import React from \"react\"\nimport PageContainer from \"../PageContainer\"\nimport ThreadsToolbar from \"./ThreadsToolbar\"\n\nexport default class extends React.Component {\n  render() {\n    const { root } = this.props\n    const { category, categories, categoriesMap } = this.props.route\n    const topCategory = getTopCategory(root, category, categoriesMap)\n\n    return (\n      <PageContainer>\n        <ThreadsToolbar\n          api={this.props.api}\n          baseUrl={category.url.index}\n          category={category}\n          categories={categories}\n          categoriesMap={categoriesMap}\n          topCategory={topCategory}\n          topCategories={categories.filter((cat) => cat.parent === root.id)}\n          subCategories={\n            !!topCategory\n              ? categories.filter((cat) => cat.parent === topCategory.id)\n              : []\n          }\n          subCategory={category.level === 2 ? category : null}\n          subcategories={this.props.subcategories}\n          list={this.props.route.list}\n          lists={this.props.route.lists}\n          threads={this.props.threads}\n          addThreads={this.props.addThreads}\n          startThread={this.props.startThread}\n          freezeThread={this.props.freezeThread}\n          deleteThread={this.props.deleteThread}\n          updateThread={this.props.updateThread}\n          selection={this.props.selection}\n          moderation={this.props.moderation}\n          route={this.props.route}\n          user={this.props.user}\n          disabled={\n            !this.props.isLoaded ||\n            this.props.isBusy ||\n            this.props.busyThreads.length\n          }\n        />\n        {this.props.children}\n      </PageContainer>\n    )\n  }\n}\n\nconst getTopCategory = (root, category, categoriesMap) => {\n  if (!category.parent) return null\n  if (category.parent === root.id) return category\n  return categoriesMap[category.parent]\n}\n","import misago from \"misago/index\"\n\nexport function getPageTitle(route) {\n  if (route.category.level) {\n    if (route.list.path) {\n      return {\n        title: route.list.longName,\n        parent: route.category.name,\n      }\n    } else {\n      return {\n        title: route.category.name,\n      }\n    }\n  } else if (misago.get(\"THREADS_ON_INDEX\")) {\n    if (route.list.path) {\n      return {\n        title: route.list.longName,\n      }\n    } else {\n      return null\n    }\n  } else {\n    if (route.list.path) {\n      return {\n        title: route.list.longName,\n        parent: gettext(\"Threads\"),\n      }\n    } else {\n      return {\n        title: gettext(\"Threads\"),\n      }\n    }\n  }\n}\n\nexport function getTitle(route) {\n  if (route.category.level) {\n    return route.category.name\n  } else if (misago.get(\"THREADS_ON_INDEX\")) {\n    if (misago.get(\"SETTINGS\").index_header) {\n      return misago.get(\"SETTINGS\").index_header\n    } else {\n      return misago.get(\"SETTINGS\").forum_name\n    }\n  } else {\n    return gettext(\"Threads\")\n  }\n}\n\nexport function isThreadChanged(current, fromDb) {\n  return (\n    [\n      current.title === fromDb.title,\n      current.weight === fromDb.weight,\n      current.category === fromDb.category,\n      current.last_post === fromDb.last_post,\n      current.last_poster_name === fromDb.last_poster_name,\n    ].indexOf(false) >= 0\n  )\n}\n\nexport function diffThreads(current, fromDb) {\n  let currentMap = {}\n  current.forEach(function (thread) {\n    currentMap[thread.id] = thread\n  })\n\n  return fromDb.filter(function (thread) {\n    if (currentMap[thread.id]) {\n      return isThreadChanged(currentMap[thread.id], thread)\n    } else {\n      return true\n    }\n  })\n}\n\nexport function getModerationActions(threads) {\n  let moderation = {\n    allow: false,\n\n    can_approve: 0,\n    can_close: 0,\n    can_delete: 0,\n    can_hide: 0,\n    can_merge: 0,\n    can_move: 0,\n    can_pin: 0,\n    can_pin_globally: 0,\n    can_unhide: 0,\n  }\n\n  threads.forEach(function (thread) {\n    if (\n      thread.is_unapproved &&\n      thread.acl.can_approve > moderation.can_approve\n    ) {\n      moderation.can_approve = thread.acl.can_approve\n    }\n\n    if (thread.acl.can_close > moderation.can_close) {\n      moderation.can_close = thread.acl.can_close\n    }\n\n    if (thread.acl.can_delete > moderation.can_delete) {\n      moderation.can_delete = thread.acl.can_delete\n    }\n\n    if (thread.acl.can_hide > moderation.can_hide) {\n      moderation.can_hide = thread.acl.can_hide\n    }\n\n    if (thread.acl.can_merge > moderation.can_merge) {\n      moderation.can_merge = thread.acl.can_merge\n    }\n\n    if (thread.acl.can_move > moderation.can_move) {\n      moderation.can_move = thread.acl.can_move\n    }\n\n    if (thread.acl.can_pin > moderation.can_pin) {\n      moderation.can_pin = thread.acl.can_pin\n    }\n\n    if (thread.acl.can_pin_globally > moderation.can_pin_globally) {\n      moderation.can_pin_globally = thread.acl.can_pin_globally\n    }\n\n    if (thread.is_hidden && thread.acl.can_unhide > moderation.can_unhide) {\n      moderation.can_unhide = thread.acl.can_unhide\n    }\n\n    moderation.allow =\n      moderation.can_approve ||\n      moderation.can_close ||\n      moderation.can_delete ||\n      moderation.can_hide ||\n      moderation.can_merge ||\n      moderation.can_move ||\n      moderation.can_pin ||\n      moderation.can_pin_globally ||\n      moderation.can_unhide\n  })\n\n  return moderation\n}\n","import React from \"react\"\n\nconst ThreadsListEmpty = ({ category, list, message }) => {\n  if (list.type === \"all\") {\n    if (message) {\n      return (\n        <li className=\"list-group-item empty-message\">\n          <p className=\"lead\">{message}</p>\n          <p>{gettext(\"Why not start one yourself?\")}</p>\n        </li>\n      )\n    }\n\n    return (\n      <li className=\"list-group-item empty-message\">\n        <p className=\"lead\">\n          {category.special_role\n            ? gettext(\"There are no threads on this forum... yet!\")\n            : gettext(\"There are no threads in this category.\")}\n        </p>\n        <p>{gettext(\"Why not start one yourself?\")}</p>\n      </li>\n    )\n  }\n\n  return (\n    <li className=\"list-group-item empty-message\">\n      <p className=\"lead\">\n        {gettext(\"No threads matching specified criteria were found.\")}\n      </p>\n    </li>\n  )\n}\n\nexport default ThreadsListEmpty\n","import React from \"react\"\n\nconst ThreadsListItemActivity = ({ thread }) => (\n  <a\n    href={thread.url.last_post}\n    className=\"threads-list-item-last-activity\"\n    title={interpolate(\n      gettext(\"Last activity: %(timestamp)s\"),\n      {\n        timestamp: thread.last_post_on.format(\"LLL\"),\n      },\n      true\n    )}\n  >\n    {thread.last_post_on.fromNow(true)}\n  </a>\n)\n\nexport default ThreadsListItemActivity\n","import React from \"react\"\n\nconst ThreadsListItemCategory = ({ parent, category }) => (\n  <span>\n    {parent && (\n      <a\n        href={parent.url.index}\n        className={getClassName(parent) + \" threads-list-item-parent-category\"}\n        style={parent.color ? { \"--label-color\": parent.color } : null}\n        title={!!parent.short_name ? parent.name : null}\n      >\n        {parent.short_name || parent.name}\n      </a>\n    )}\n    <a\n      href={category.url.index}\n      className={getClassName(category)}\n      style={category.color ? { \"--label-color\": category.color } : null}\n      title={!!category.short_name ? category.name : null}\n    >\n      {category.short_name || category.name}\n    </a>\n  </span>\n)\n\nconst getClassName = (category) => {\n  let className = \"threads-list-item-category threads-list-category-label\"\n\n  if (category.color) {\n    className += \" threads-list-category-label-color\"\n  }\n\n  return className\n}\n\nexport default ThreadsListItemCategory\n","import React from \"react\"\nimport * as select from \"../../reducers/selection\"\nimport store from \"../../services/store\"\n\nconst ThreadsListItemCheckbox = ({ checked, disabled, thread }) => (\n  <button\n    className=\"btn btn-default btn-icon\"\n    type=\"button\"\n    disabled={disabled}\n    onClick={() => store.dispatch(select.item(thread.id))}\n  >\n    <span className=\"material-icon\">\n      {checked ? \"check_box\" : \"check_box_outline_blank\"}\n    </span>\n  </button>\n)\n\nexport default ThreadsListItemCheckbox\n","import React from \"react\"\n\nconst ThreadsListItemIcon = ({ thread }) => {\n  let className = \"threads-list-icon\"\n  if (!thread.is_read) className += \" threads-list-icon-new\"\n\n  return (\n    <a\n      title={thread.is_read ? gettext(\"No new posts\") : gettext(\"New posts\")}\n      href={thread.is_read ? thread.url.last_post : thread.url.new_post}\n      className={className}\n    >\n      <span className=\"material-icon\">\n        {thread.is_read ? \"chat_bubble_outline\" : \"chat_bubble\"}\n      </span>\n    </a>\n  )\n}\n\nexport default ThreadsListItemIcon\n","import React from \"react\"\nimport Avatar from \"../avatar\"\n\nconst ThreadsListItemLastPoster = ({ thread }) =>\n  !!thread.last_poster ? (\n    <a\n      href={thread.url.last_poster}\n      className=\"threads-list-item-last-poster\"\n      title={interpolate(\n        gettext(\"Last post by: %(poster)s\"),\n        { poster: thread.last_poster.username },\n        true\n      )}\n    >\n      <Avatar size={32} user={thread.last_poster} />\n    </a>\n  ) : (\n    <span\n      className=\"threads-list-item-last-poster\"\n      title={interpolate(\n        gettext(\"Last post by: %(poster)s\"),\n        { poster: thread.last_poster_name },\n        true\n      )}\n    >\n      <Avatar size={32} />\n    </span>\n  )\n\nexport default ThreadsListItemLastPoster\n","import React from \"react\"\nimport { patch } from \"../../reducers/threads\"\nimport ajax from \"../../services/ajax\"\nimport snackbar from \"../../services/snackbar\"\nimport store from \"../../services/store\"\n\nconst SUBSCRIPTION = {\n  unsubscribe: null,\n  notify: false,\n  email: true,\n}\n\nclass ThreadsListItemSubscriptionOptions extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      loading: false,\n    }\n  }\n\n  update = (value) => {\n    const { thread } = this.props\n\n    this.setState({ loading: true })\n    store.dispatch(patch(thread, { subscription: SUBSCRIPTION[value] }))\n\n    ajax\n      .patch(thread.api.index, [{ op: \"replace\", path: \"subscription\", value }])\n      .then(\n        () => {},\n        (rejection) => {\n          store.dispatch(\n            patch(thread, {\n              subscription: SUBSCRIPTION[thread.subscription],\n            })\n          )\n          snackbar.apiError(rejection)\n        }\n      )\n      .then(() => this.setState({ loading: false }))\n  }\n\n  render = () => {\n    const { loading } = this.state\n    const { disabled, thread } = this.props\n\n    return (\n      <ul className=\"dropdown-menu dropdown-menu-right\">\n        <li>\n          <button\n            className=\"btn-link\"\n            disabled={disabled || loading || thread.subscription === null}\n            onClick={() => this.update(\"unsubscribe\")}\n          >\n            <span className=\"material-icon\">star_border</span>\n            {gettext(\"Unsubscribe\")}\n          </button>\n        </li>\n        <li>\n          <button\n            className=\"btn-link\"\n            disabled={disabled || loading || thread.subscription === false}\n            onClick={() => this.update(\"notify\")}\n          >\n            <span className=\"material-icon\">star_half</span>\n            {gettext(\"Subscribe with alert\")}\n          </button>\n        </li>\n        <li>\n          <button\n            className=\"btn-link\"\n            disabled={disabled || loading || thread.subscription === true}\n            onClick={() => this.update(\"email\")}\n          >\n            <span className=\"material-icon\">star</span>\n            {gettext(\"Subscribe with e-mail\")}\n          </button>\n        </li>\n      </ul>\n    )\n  }\n}\n\nexport default ThreadsListItemSubscriptionOptions\n","import React from \"react\"\nimport ThreadsListItemSubscriptionOptions from \"./ThreadsListItemSubscriptionOptions\"\n\nconst ThreadsListItemSubscription = ({ disabled, thread }) => (\n  <div className=\"dropdown\">\n    <button\n      className=\"btn btn-default btn-icon\"\n      type=\"button\"\n      title={getSubscriptionTitle(thread.subscription)}\n      disabled={disabled}\n      data-toggle=\"dropdown\"\n      aria-haspopup=\"true\"\n      aria-expanded=\"false\"\n    >\n      <span className=\"material-icon\">\n        {getSubscriptionIcon(thread.subscription)}\n      </span>\n    </button>\n    <ThreadsListItemSubscriptionOptions disabled={disabled} thread={thread} />\n  </div>\n)\n\nconst getSubscriptionTitle = (subscription) => {\n  if (subscription === true) return gettext(\"Subscribed to e-mails\")\n  if (subscription === false) return gettext(\"Subscribed to alerts\")\n  return gettext(\"Not subscribed\")\n}\n\nconst getSubscriptionIcon = (subscription) => {\n  if (subscription === true) return \"star\"\n  if (subscription === false) return \"star_half\"\n  return \"star_border\"\n}\n\nexport default ThreadsListItemSubscription\n","import React from \"react\"\nimport ThreadFlags from \"../ThreadFlags\"\nimport ThreadReplies from \"../ThreadReplies\"\nimport ThreadsListItemActivity from \"./ThreadsListItemActivity\"\nimport ThreadsListItemCategory from \"./ThreadsListItemCategory\"\nimport ThreadsListItemCheckbox from \"./ThreadsListItemCheckbox\"\nimport ThreadsListItemIcon from \"./ThreadsListItemIcon\"\nimport ThreadsListItemLastPoster from \"./ThreadsListItemLastPoster\"\nimport ThreadsListItemSubscription from \"./ThreadsListItemSubscription\"\n\nconst ThreadsListItem = ({\n  activeCategory,\n  categories,\n  showOptions,\n  showSubscription,\n  thread,\n  isBusy,\n  isSelected,\n}) => {\n  let parent = null\n  let category = null\n\n  if (activeCategory.id !== thread.category) {\n    category = categories[thread.category]\n\n    if (\n      category.parent &&\n      category.parent !== activeCategory.id &&\n      categories[category.parent] &&\n      !categories[category.parent].special_role\n    ) {\n      parent = categories[category.parent]\n    }\n  }\n\n  const hasFlags =\n    thread.is_closed ||\n    thread.is_hidden ||\n    thread.is_unapproved ||\n    thread.weight > 0 ||\n    thread.best_answer ||\n    thread.has_poll ||\n    thread.has_unapproved_posts\n\n  const isNew = showOptions ? thread.is_new : false\n\n  return (\n    <li\n      className={\n        \"list-group-item threads-list-item\" +\n        (isBusy ? \" threads-list-item-is-busy\" : \"\")\n      }\n    >\n      <div className=\"threads-list-item-top-row\">\n        {showOptions && (\n          <div className=\"threads-list-item-col-icon\">\n            <ThreadsListItemIcon thread={thread} />\n          </div>\n        )}\n        <div className=\"threads-list-item-col-title\">\n          <a href={thread.url.index} className=\"threads-list-item-title\">\n            {thread.title}\n          </a>\n          <a\n            href={isNew ? thread.url.new_post : thread.url.index}\n            className={\n              \"threads-list-item-title-sm\" +\n              (isNew ? \" threads-list-item-title-new\" : \"\")\n            }\n          >\n            {thread.title}\n          </a>\n        </div>\n        {showOptions && thread.moderation.length > 0 && (\n          <div className=\"threads-list-item-col-checkbox-sm\">\n            <ThreadsListItemCheckbox\n              checked={isSelected}\n              disabled={isBusy}\n              thread={thread}\n            />\n          </div>\n        )}\n      </div>\n      <div className=\"threads-list-item-bottom-row\">\n        {hasFlags && (\n          <div className=\"threads-list-item-col-flags\">\n            <ThreadFlags thread={thread} />\n          </div>\n        )}\n        {!!category && (\n          <div className=\"threads-list-item-col-category\">\n            <ThreadsListItemCategory parent={parent} category={category} />\n          </div>\n        )}\n        <div className=\"threads-list-item-col-spacer-xs\" />\n        <div className=\"threads-list-item-col-replies\">\n          <ThreadReplies thread={thread} />\n        </div>\n        <div className=\"threads-list-item-col-last-poster\">\n          <ThreadsListItemLastPoster thread={thread} />\n        </div>\n        <div className=\"threads-list-item-col-last-activity\">\n          <ThreadsListItemActivity thread={thread} />\n        </div>\n        {showOptions && showSubscription && (\n          <div className=\"threads-list-item-col-subscription\">\n            <ThreadsListItemSubscription disabled={isBusy} thread={thread} />\n          </div>\n        )}\n        {showOptions && thread.moderation.length > 0 && (\n          <div className=\"threads-list-item-col-checkbox\">\n            <ThreadsListItemCheckbox\n              checked={isSelected}\n              disabled={isBusy}\n              thread={thread}\n            />\n          </div>\n        )}\n      </div>\n    </li>\n  )\n}\n\nexport default ThreadsListItem\n","import React from \"react\"\n\nconst UIPreviewText = ({ width }) => (\n  <span className=\"ui-preview-text\" style={{ width: width + \"px\" }}>\n    &nbsp;\n  </span>\n)\n\nexport default UIPreviewText\n","import React from \"react\"\nimport Avatar from \"../avatar\"\nimport { UIPreviewText } from \"../UIPreview\"\n\nconst ThreadsListLoader = ({ showOptions }) => (\n  <div className=\"threads-list threads-list-loader\">\n    <ul className=\"list-group\">\n      <li className=\"list-group-item threads-list-item\">\n        <div className=\"threads-list-item-top-row\">\n          {showOptions && (\n            <div className=\"threads-list-item-col-icon\">\n              <span className=\"threads-list-icon ui-preview-img\"></span>\n            </div>\n          )}\n          <div className=\"threads-list-item-col-title\">\n            <span className=\"threads-list-item-title\">\n              <UIPreviewText width=\"90\" /> <UIPreviewText width=\"40\" />{\" \"}\n              <UIPreviewText width=\"120\" />\n            </span>\n            <span className=\"threads-list-item-title-sm\">\n              <UIPreviewText width=\"90\" /> <UIPreviewText width=\"40\" />{\" \"}\n              <UIPreviewText width=\"120\" />\n            </span>\n          </div>\n        </div>\n        <div className=\"threads-list-item-bottom-row\">\n          <div className=\"threads-list-item-col-category\">\n            <UIPreviewText width=\"70\" />\n          </div>\n          <div className=\"threads-list-item-col-replies\">\n            <UIPreviewText width=\"50\" />\n          </div>\n          <div className=\"threads-list-item-col-last-poster\">\n            <span className=\"threads-list-item-last-poster\">\n              <Avatar size={32} />\n            </span>\n          </div>\n          <div className=\"threads-list-item-col-last-activity\">\n            <span className=\"threads-list-item-last-activity\">\n              <UIPreviewText width=\"50\" />\n            </span>\n          </div>\n        </div>\n      </li>\n      <li className=\"list-group-item threads-list-item\">\n        <div className=\"threads-list-item-top-row\">\n          {showOptions && (\n            <div className=\"threads-list-item-col-icon\">\n              <span className=\"threads-list-icon ui-preview-img\"></span>\n            </div>\n          )}\n          <div className=\"threads-list-item-col-title\">\n            <span className=\"threads-list-item-title\">\n              <UIPreviewText width=\"120\" /> <UIPreviewText width=\"30\" />{\" \"}\n              <UIPreviewText width=\"60\" />\n            </span>\n            <span className=\"threads-list-item-title-sm\">\n              <UIPreviewText width=\"120\" /> <UIPreviewText width=\"30\" />{\" \"}\n              <UIPreviewText width=\"60\" />\n            </span>\n          </div>\n        </div>\n        <div className=\"threads-list-item-bottom-row\">\n          <div className=\"threads-list-item-col-category\">\n            <UIPreviewText width=\"55\" />\n          </div>\n          <div className=\"threads-list-item-col-replies\">\n            <UIPreviewText width=\"60\" />\n          </div>\n          <div className=\"threads-list-item-col-last-poster\">\n            <span className=\"threads-list-item-last-poster\">\n              <Avatar size={32} />\n            </span>\n          </div>\n          <div className=\"threads-list-item-col-last-activity\">\n            <span className=\"threads-list-item-last-activity\">\n              <UIPreviewText width=\"70\" />\n            </span>\n          </div>\n        </div>\n      </li>\n      <li className=\"list-group-item threads-list-item\">\n        <div className=\"threads-list-item-top-row\">\n          {showOptions && (\n            <div className=\"threads-list-item-col-icon\">\n              <span className=\"threads-list-icon ui-preview-img\"></span>\n            </div>\n          )}\n          <div className=\"threads-list-item-col-title\">\n            <span className=\"threads-list-item-title\">\n              <UIPreviewText width=\"40\" /> <UIPreviewText width=\"120\" />{\" \"}\n              <UIPreviewText width=\"80\" />\n            </span>\n            <span className=\"threads-list-item-title-sm\">\n              <UIPreviewText width=\"40\" /> <UIPreviewText width=\"120\" />{\" \"}\n              <UIPreviewText width=\"80\" />\n            </span>\n          </div>\n        </div>\n        <div className=\"threads-list-item-bottom-row\">\n          <div className=\"threads-list-item-col-category\">\n            <UIPreviewText width=\"75\" />\n          </div>\n          <div className=\"threads-list-item-col-replies\">\n            <UIPreviewText width=\"40\" />\n          </div>\n          <div className=\"threads-list-item-col-last-poster\">\n            <span className=\"threads-list-item-last-poster\">\n              <Avatar size={32} />\n            </span>\n          </div>\n          <div className=\"threads-list-item-col-last-activity\">\n            <span className=\"threads-list-item-last-activity\">\n              <UIPreviewText width=\"60\" />\n            </span>\n          </div>\n        </div>\n      </li>\n    </ul>\n  </div>\n)\n\nexport default ThreadsListLoader\n","import React from \"react\"\n\nconst ThreadsListUpdatePrompt = ({ threads, onClick }) => (\n  <li className=\"list-group-item threads-list-update-prompt\">\n    <button\n      type=\"button\"\n      className=\"btn btn-block threads-list-update-prompt-btn\"\n      onClick={onClick}\n    >\n      <span className=\"material-icon\">cached</span>\n      <span className=\"threads-list-update-prompt-message\">\n        {interpolate(\n          ngettext(\n            \"There is %(threads)s new or updated thread. Click here to show it.\",\n            \"There are %(threads)s new or updated threads. Click here to show them.\",\n            threads\n          ),\n          { threads },\n          true\n        )}\n      </span>\n    </button>\n  </li>\n)\n\nexport default ThreadsListUpdatePrompt\n","import ThreadsList from \"./ThreadsList\"\n\nexport default ThreadsList\n","import React from \"react\"\nimport ThreadsListEmpty from \"./ThreadsListEmpty\"\nimport ThreadsListItem from \"./ThreadsListItem\"\nimport ThreadsListLoader from \"./ThreadsListLoader\"\nimport ThreadsListUpdatePrompt from \"./ThreadsListUpdatePrompt\"\n\nconst ThreadsList = ({\n  list,\n  categories,\n  category,\n  threads,\n  busyThreads,\n  selection,\n  isLoaded,\n  showOptions,\n  updatedThreads,\n  applyUpdate,\n  emptyMessage,\n}) => {\n  if (!isLoaded) {\n    return <ThreadsListLoader showOptions={showOptions} />\n  }\n\n  return (\n    <div className=\"threads-list\">\n      {threads.length > 0 ? (\n        <ul className=\"list-group\">\n          {updatedThreads > 0 && (\n            <ThreadsListUpdatePrompt\n              threads={updatedThreads}\n              onClick={applyUpdate}\n            />\n          )}\n          {threads.map((thread) => (\n            <ThreadsListItem\n              key={thread.id}\n              activeCategory={category}\n              categories={categories}\n              thread={thread}\n              showOptions={showOptions}\n              showSubscription={showOptions && list.type === \"subscribed\"}\n              isBusy={busyThreads.indexOf(thread.id) >= 0}\n              isSelected={selection.indexOf(thread.id) >= 0}\n            />\n          ))}\n        </ul>\n      ) : (\n        <ul className=\"list-group\">\n          {updatedThreads > 0 && (\n            <ThreadsListUpdatePrompt\n              threads={updatedThreads}\n              onClick={applyUpdate}\n            />\n          )}\n          <ThreadsListEmpty\n            category={category}\n            list={list}\n            message={emptyMessage}\n          />\n        </ul>\n      )}\n    </div>\n  )\n}\n\nexport default ThreadsList\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport {\n  compareGlobalWeight,\n  compareWeight,\n} from \"misago/components/threads/compare\"\nimport Container from \"misago/components/threads/container\"\nimport {\n  diffThreads,\n  getModerationActions,\n  getPageTitle,\n  getTitle,\n} from \"misago/components/threads/utils\"\nimport ThreadsList from \"misago/components/ThreadsList\"\nimport WithDropdown from \"misago/components/with-dropdown\"\nimport misago from \"misago/index\"\nimport * as select from \"misago/reducers/selection\"\nimport { append, deleteThread, hydrate, patch } from \"misago/reducers/threads\"\nimport ajax from \"misago/services/ajax\"\nimport polls from \"misago/services/polls\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport title from \"misago/services/page-title\"\nimport * as sets from \"misago/utils/sets\"\nimport {\n  PageHeaderHTMLMessage,\n  PageHeaderMessage,\n  PageHeaderPlain,\n} from \"../PageHeader\"\n\nexport default class extends WithDropdown {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isMounted: true,\n\n      isLoaded: false,\n      isBusy: false,\n\n      diff: {\n        results: [],\n      },\n\n      moderation: [],\n      busyThreads: [],\n\n      dropdown: false,\n      subcategories: [],\n\n      next: 0,\n    }\n\n    let category = this.getCategory()\n\n    if (misago.has(\"THREADS\")) {\n      this.initWithPreloadedData(category, misago.get(\"THREADS\"))\n    } else {\n      this.initWithoutPreloadedData(category)\n    }\n  }\n\n  getCategory() {\n    if (!this.props.route.category.special_role) {\n      return this.props.route.category.id\n    } else {\n      return null\n    }\n  }\n\n  initWithPreloadedData(category, data) {\n    this.state = Object.assign(this.state, {\n      moderation: getModerationActions(data.results),\n      subcategories: data.subcategories,\n      next: data.next,\n    })\n\n    this.startPolling(category)\n  }\n\n  initWithoutPreloadedData(category) {\n    this.loadThreads(category)\n  }\n\n  loadThreads(category, next = 0) {\n    ajax\n      .get(\n        this.props.options.api,\n        {\n          category: category,\n          list: this.props.route.list.type,\n          start: next || 0,\n        },\n        \"threads\"\n      )\n      .then(\n        (data) => {\n          if (!this.state.isMounted) {\n            // user changed route before loading completion\n            return\n          }\n\n          if (next === 0) {\n            store.dispatch(hydrate(data.results))\n          } else {\n            store.dispatch(append(data.results, this.getSorting()))\n          }\n\n          this.setState({\n            isLoaded: true,\n            isBusy: false,\n\n            moderation: getModerationActions(store.getState().threads),\n\n            subcategories: data.subcategories,\n\n            next: data.next,\n          })\n\n          this.startPolling(category)\n        },\n        (rejection) => {\n          snackbar.apiError(rejection)\n        }\n      )\n  }\n\n  startPolling(category) {\n    polls.start({\n      poll: \"threads\",\n      url: this.props.options.api,\n      data: {\n        category: category,\n        list: this.props.route.list.type,\n      },\n      frequency: 120 * 1000,\n      update: this.pollResponse,\n    })\n  }\n\n  componentDidMount() {\n    this.setPageTitle()\n\n    if (misago.has(\"THREADS\")) {\n      // unlike in other components, routes are root components for threads\n      // so we can't dispatch store action from constructor\n      store.dispatch(hydrate(misago.pop(\"THREADS\").results))\n\n      this.setState({\n        isLoaded: true,\n      })\n    }\n\n    store.dispatch(select.none())\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false\n    polls.stop(\"threads\")\n  }\n\n  getTitle() {\n    if (this.props.options.title) {\n      return this.props.options.title\n    }\n\n    return getTitle(this.props.route)\n  }\n\n  setPageTitle() {\n    if (this.props.route.category.level || !misago.get(\"THREADS_ON_INDEX\")) {\n      title.set(getPageTitle(this.props.route))\n    } else if (this.props.options.title) {\n      title.set(this.props.options.title)\n    } else {\n      if (misago.get(\"SETTINGS\").index_title) {\n        document.title = misago.get(\"SETTINGS\").index_title\n      } else {\n        document.title = misago.get(\"SETTINGS\").forum_name\n      }\n    }\n  }\n\n  getSorting() {\n    if (this.props.route.category.level) {\n      return compareWeight\n    } else {\n      return compareGlobalWeight\n    }\n  }\n\n  // AJAX\n\n  loadMore = () => {\n    this.setState({\n      isBusy: true,\n    })\n\n    this.loadThreads(this.getCategory(), this.state.next)\n  }\n\n  pollResponse = (data) => {\n    this.setState({\n      diff: Object.assign({}, data, {\n        results: diffThreads(this.props.threads, data.results),\n      }),\n    })\n  }\n\n  addThreads = (threads) => {\n    store.dispatch(append(threads, this.getSorting()))\n  }\n\n  applyDiff = () => {\n    this.addThreads(this.state.diff.results)\n\n    this.setState(\n      Object.assign({}, this.state.diff, {\n        moderation: getModerationActions(store.getState().threads),\n\n        diff: {\n          results: [],\n        },\n      })\n    )\n  }\n\n  // Thread state utils\n\n  freezeThread = (thread) => {\n    this.setState(function (currentState) {\n      return {\n        busyThreads: sets.toggle(currentState.busyThreads, thread),\n      }\n    })\n  }\n\n  updateThread = (thread) => {\n    store.dispatch(patch(thread, thread, this.getSorting()))\n  }\n\n  deleteThread = (thread) => {\n    store.dispatch(deleteThread(thread))\n  }\n\n  getMoreButton() {\n    if (!this.state.next) return null\n\n    return (\n      <div className=\"pager-more\">\n        <Button\n          className=\"btn btn-default btn-outline\"\n          loading={this.state.isBusy || this.state.busyThreads.length}\n          onClick={this.loadMore}\n        >\n          {gettext(\"Show more\")}\n        </Button>\n      </div>\n    )\n  }\n\n  getClassName() {\n    let className = \"page page-threads\"\n    className += \" page-threads-\" + this.props.route.list.type\n    if (isIndex(this.props)) {\n      className += \" page-threads-index\"\n    }\n    if (this.props.route.category.css_class) {\n      className += \" page-threads-\" + this.props.route.category.css_class\n    }\n    return className\n  }\n\n  render() {\n    const root = this.props.route.categories[0]\n    const { category, list } = this.props.route\n    const specialRole = category.special_role\n\n    return (\n      <div className={this.getClassName()}>\n        {specialRole == \"root_category\" &&\n          misago.get(\"THREADS_ON_INDEX\") &&\n          misago.get(\"SETTINGS\").index_header && (\n            <PageHeaderPlain\n              header={misago.get(\"SETTINGS\").index_header}\n              message={\n                category.description && (\n                  <PageHeaderHTMLMessage message={category.description.html} />\n                )\n              }\n              styleName=\"forum-index\"\n            />\n          )}\n        {specialRole == \"root_category\" && !misago.get(\"THREADS_ON_INDEX\") && (\n          <PageHeaderPlain header={gettext(\"Threads\")} styleName=\"threads\" />\n        )}\n        {specialRole == \"private_threads\" && (\n          <PageHeaderPlain\n            header={this.props.options.title}\n            message={\n              this.props.options.pageLead && (\n                <PageHeaderMessage>\n                  <p>{this.props.options.pageLead}</p>\n                </PageHeaderMessage>\n              )\n            }\n            styleName=\"private-threads\"\n          />\n        )}\n        {!specialRole && (\n          <PageHeaderPlain\n            header={category.name}\n            message={\n              category.description && (\n                <PageHeaderHTMLMessage message={category.description.html} />\n              )\n            }\n            styleName={category.css_class || \"category-threads\"}\n          />\n        )}\n        <Container\n          api={this.props.options.api}\n          root={root}\n          route={this.props.route}\n          user={this.props.user}\n          pageLead={this.props.options.pageLead}\n          threads={this.props.threads}\n          threadsCount={this.state.count}\n          moderation={this.state.moderation}\n          selection={this.props.selection}\n          busyThreads={this.state.busyThreads}\n          addThreads={this.addThreads}\n          startThread={this.props.options.startThread}\n          freezeThread={this.freezeThread}\n          deleteThread={this.deleteThread}\n          updateThread={this.updateThread}\n          isLoaded={this.state.isLoaded}\n          isBusy={this.state.isBusy}\n        >\n          <ThreadsList\n            category={category}\n            categories={this.props.route.categoriesMap}\n            list={list}\n            selection={this.props.selection}\n            threads={this.props.threads}\n            updatedThreads={this.state.diff.results.length}\n            applyUpdate={this.applyDiff}\n            showOptions={!!this.props.user.id}\n            isLoaded={this.state.isLoaded}\n            busyThreads={this.state.busyThreads}\n            emptyMessage={this.props.options.emptyMessage}\n          />\n          {this.getMoreButton()}\n        </Container>\n      </div>\n    )\n  }\n}\n\nfunction isIndex(props) {\n  if (props.route.category.level || !misago.get(\"THREADS_ON_INDEX\"))\n    return false\n  if (props.options.title) return false\n\n  return true\n}\n","import { connect } from \"react-redux\"\nimport Route from \"misago/components/threads/route\"\nimport misago from \"misago/index\"\n\nexport function getSelect(options) {\n  return function (store) {\n    return {\n      options: options,\n      selection: store.selection,\n      threads: store.threads,\n      tick: store.tick.tick,\n      user: store.auth.user,\n    }\n  }\n}\n\nexport function getLists(user) {\n  let lists = [\n    {\n      type: \"all\",\n      path: \"\",\n      name: gettext(\"All\"),\n      longName: gettext(\"All threads\"),\n    },\n  ]\n\n  if (user.id) {\n    lists.push({\n      type: \"my\",\n      path: \"my/\",\n      name: gettext(\"My\"),\n      longName: gettext(\"My threads\"),\n    })\n    lists.push({\n      type: \"new\",\n      path: \"new/\",\n      name: gettext(\"New\"),\n      longName: gettext(\"New threads\"),\n    })\n    lists.push({\n      type: \"unread\",\n      path: \"unread/\",\n      name: gettext(\"Unread\"),\n      longName: gettext(\"Unread threads\"),\n    })\n    lists.push({\n      type: \"subscribed\",\n      path: \"subscribed/\",\n      name: gettext(\"Subscribed\"),\n      longName: gettext(\"Subscribed threads\"),\n    })\n\n    if (user.acl.can_see_unapproved_content_lists) {\n      lists.push({\n        type: \"unapproved\",\n        path: \"unapproved/\",\n        name: gettext(\"Unapproved\"),\n        longName: gettext(\"Unapproved content\"),\n      })\n    }\n  }\n\n  return lists\n}\n\nexport function paths(user, mode) {\n  let lists = getLists(user)\n  let routes = []\n  let categoriesMap = {}\n\n  misago.get(\"CATEGORIES\").forEach(function (category) {\n    lists.forEach(function (list) {\n      categoriesMap[category.id] = category\n\n      routes.push({\n        path: category.url.index + list.path,\n        component: connect(getSelect(mode))(Route),\n\n        categories: misago.get(\"CATEGORIES\"),\n        categoriesMap,\n        category,\n\n        lists,\n        list,\n      })\n    })\n  })\n\n  return routes\n}\n","import { paths } from \"misago/components/threads/root\"\nimport misago from \"misago/index\"\nimport mount from \"misago/utils/routed-component\"\n\nconst PRIVATE_THREADS_LIST = \"misago:private-threads\"\n\nexport default function initializer(context) {\n  if (context.has(\"THREADS\") && context.has(\"CATEGORIES\")) {\n    mount({\n      paths: paths(context.get(\"user\"), getListOptions(context)),\n    })\n  }\n}\n\nexport function getListOptions(context) {\n  const currentLink = context.get(\"CURRENT_LINK\")\n  if (\n    currentLink.substr(0, PRIVATE_THREADS_LIST.length) === PRIVATE_THREADS_LIST\n  ) {\n    return {\n      api: context.get(\"PRIVATE_THREADS_API\"),\n      startThread: {\n        mode: \"START_PRIVATE\",\n        submit: misago.get(\"PRIVATE_THREADS_API\"),\n      },\n      title: gettext(\"Private threads\"),\n      pageLead: gettext(\n        \"Private threads are threads which only those that started them and those they have invited may see and participate in.\"\n      ),\n      emptyMessage: gettext(\"You aren't participating in any private threads.\"),\n    }\n  }\n\n  return {\n    api: context.get(\"THREADS_API\"),\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:threads\",\n  initializer: initializer,\n  after: \"store\",\n})\n","const MAX_RESULTS = 5\n\nexport default function (data) {\n  const filtered = data.filter((section) => {\n    return section.results.count > 0\n  })\n\n  return filtered.map((section) => {\n    return Object.assign({}, section, {\n      count: section.results.count,\n      results: section.results.results.slice(0, MAX_RESULTS),\n    })\n  })\n}\n","export const HEADER = \"HEADER\"\nexport const RESULT = \"RESULT\"\nexport const FOOTER = \"FOOTER\"\n","import React from \"react\"\n\nexport default function ({ value, onChange }) {\n  return (\n    <input\n      aria-haspopup=\"true\"\n      aria-expanded=\"false\"\n      aria-controls=\"dropdown-menu dropdown-search-results\"\n      autoComplete=\"off\"\n      className=\"form-control\"\n      value={value}\n      onChange={onChange}\n      placeholder={gettext(\"Search\")}\n      role=\"combobox\"\n      type=\"text\"\n    />\n  )\n}\n","import React from \"react\"\nimport Input from \"./input\"\n\nexport default function ({ children, onChange, query }) {\n  return (\n    <ul className=\"dropdown-menu dropdown-search-results\" role=\"menu\">\n      <li className=\"form-group\">\n        <Input value={query} onChange={onChange} />\n      </li>\n      {children}\n    </ul>\n  )\n}\n","import React from \"react\"\n\nexport default function () {\n  return (\n    <li className=\"dropdown-search-message\">\n      {gettext(\"Search returned no results.\")}\n    </li>\n  )\n}\n","import React from \"react\"\nimport Loader from \"misago/components/loader\"\n\nexport default function ({ message }) {\n  return (\n    <li className=\"dropdown-search-loader\">\n      <Loader />\n    </li>\n  )\n}\n","import React from \"react\"\n\nexport default function ({ provider, query }) {\n  const url = provider.url + \"?q=\" + encodeURI(query)\n  const label = ngettext(\n    'See full \"%(provider)s\" results page with %(count)s result.',\n    'See full \"%(provider)s\" results page with %(count)s results.',\n    provider.count\n  )\n\n  return (\n    <li className=\"dropdown-search-footer\">\n      <a href={url}>\n        {interpolate(\n          label,\n          {\n            count: provider.count,\n            provider: provider.name,\n          },\n          true\n        )}\n      </a>\n    </li>\n  )\n}\n","import React from \"react\"\n\nexport default function ({ provider }) {\n  return <li className=\"dropdown-search-header\">{provider.name}</li>\n}\n","import moment from \"moment\"\nimport React from \"react\"\n\nexport default function ({ result }) {\n  const { poster, thread } = result\n  const footer = gettext(\n    \"Posted by %(poster)s on %(posted_on)s in %(category)s.\"\n  )\n\n  return (\n    <li>\n      <a href={result.url.index} className=\"dropdown-search-thread\">\n        <h5>{thread.title}</h5>\n        <small className=\"dropdown-search-post-content\">\n          {$(result.content).text()}\n        </small>\n        <small className=\"dropdown-search-post-footer\">\n          {interpolate(\n            footer,\n            {\n              category: result.category.name,\n              posted_on: moment(result.posted_on).format(\"LL\"),\n              poster: result.poster_name,\n            },\n            true\n          )}\n        </small>\n      </a>\n    </li>\n  )\n}\n","import moment from \"moment\"\nimport React from \"react\"\nimport Avatar from \"misago/components/avatar\"\n\nexport default function ({ result }) {\n  const { rank } = result\n\n  const detail = gettext(\"%(title)s, joined on %(joined_on)s\")\n  const title = result.title || rank.title || rank.name\n\n  return (\n    <li>\n      <a href={result.url} className=\"dropdown-search-user\">\n        <div className=\"media\">\n          <div className=\"media-left\">\n            <Avatar size={38} user={result} />\n          </div>\n          <div className=\"media-body\">\n            <h5 className=\"media-heading\">{result.username}</h5>\n            <small>\n              {interpolate(\n                detail,\n                {\n                  title,\n                  joined_on: moment(result.joined_on).format(\"LL\"),\n                },\n                true\n              )}\n            </small>\n          </div>\n        </div>\n      </a>\n    </li>\n  )\n}\n","import React from \"react\"\nimport Thread from \"./thread\"\nimport User from \"./user\"\n\nexport default function ({ provider, result }) {\n  if (provider.id === \"threads\") {\n    return <Thread result={result} />\n  }\n\n  return <User result={result} />\n}\n","import React from \"react\"\nimport { HEADER, FOOTER } from \"../constants\"\nimport Footer from \"./footer\"\nimport Header from \"./header\"\nimport Result from \"./result\"\n\nexport default function ({ provider, result, type, query }) {\n  if (type === HEADER) {\n    return <Header provider={provider} />\n  } else if (type === FOOTER) {\n    return <Footer provider={provider} query={query} />\n  }\n\n  return <Result provider={provider} result={result} />\n}\n","import { HEADER, RESULT, FOOTER } from \"./constants\"\n\nexport default function (results) {\n  const flatlist = []\n  flattenProviders(results, flatlist)\n  return flatlist\n}\n\nfunction flattenProviders(results, flatlist) {\n  const arrayLength = results.length\n  for (var i = 0; i < arrayLength; i++) {\n    const provider = results[i]\n\n    flatlist.push({\n      provider,\n      type: HEADER,\n    })\n\n    flattenProvider(provider, flatlist)\n  }\n}\n\nfunction flattenProvider(provider, flatlist) {\n  const arrayLength = provider.results.length\n  for (var i = 0; i < arrayLength; i++) {\n    const result = provider.results[i]\n    flatlist.push({\n      provider,\n      result,\n      type: RESULT,\n    })\n  }\n\n  flatlist.push({\n    provider,\n    type: FOOTER,\n  })\n}\n","import React from \"react\"\nimport { RESULT } from \"./constants\"\nimport DropdownMenu from \"./dropdown-menu\"\nimport Empty from \"./empty\"\nimport Loader from \"./loader\"\nimport Result from \"./result\"\nimport flattenResults from \"./flatten-results\"\n\nexport default function ({ isLoading, onChange, results, query }) {\n  if (!query.trim().length) {\n    return <DropdownMenu onChange={onChange} query={query} />\n  }\n\n  if (results.length) {\n    const flatResults = flattenResults(results)\n\n    return (\n      <DropdownMenu onChange={onChange} query={query}>\n        {flatResults.map((props) => {\n          const { type, provider, result } = props\n\n          if (type === RESULT) {\n            return (\n              <Result\n                key={[provider.id, type, result.id].join(\"_\")}\n                {...props}\n              />\n            )\n          }\n\n          return (\n            <Result\n              key={[provider.id, type].join(\"_\")}\n              query={query}\n              {...props}\n            />\n          )\n        })}\n      </DropdownMenu>\n    )\n  } else if (isLoading) {\n    return (\n      <DropdownMenu onChange={onChange} query={query}>\n        <Loader />\n      </DropdownMenu>\n    )\n  }\n\n  return (\n    <DropdownMenu onChange={onChange} query={query}>\n      <Empty />\n    </DropdownMenu>\n  )\n}\n","import React from \"react\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport misago from \"misago\"\nimport cleanResults from \"./clean-results\"\nimport Dropdown from \"./dropdown\"\n\nexport default class extends React.Component {\n  constructor() {\n    super()\n\n    this.state = {\n      isLoading: false,\n      isOpen: false,\n      query: \"\",\n      results: [],\n    }\n\n    this.intervalId = null\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"mousedown\", this.onDocumentMouseDown)\n    document.addEventListener(\"keydown\", this.onEscape)\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"mousedown\", this.onDocumentMouseDown)\n    document.removeEventListener(\"keydown\", this.onEscape)\n  }\n\n  onToggle = (ev) => {\n    this.setState((prevState, props) => {\n      if (!prevState.isOpen) {\n        window.setTimeout(() => {\n          this.container.querySelector(\"input\").focus()\n        }, 100)\n      }\n\n      return { isOpen: !prevState.isOpen }\n    })\n  }\n\n  onDocumentMouseDown = (ev) => {\n    let closeResults = true\n    let node = ev.target\n\n    while (node !== null && node !== document) {\n      if (node === this.container) {\n        closeResults = false\n        return\n      }\n\n      node = node.parentNode\n    }\n\n    if (closeResults) {\n      this.setState({ isOpen: false })\n    }\n  }\n\n  onEscape = (ev) => {\n    if (ev.key === \"Escape\") {\n      this.setState({ isOpen: false })\n    }\n  }\n\n  onChange = (ev) => {\n    const query = ev.target.value\n\n    this.setState({ query })\n    this.loadResults(query.trim())\n  }\n\n  loadResults(query) {\n    if (!query.length) return\n\n    const delay = 300 + Math.random() * 300\n\n    if (this.intervalId) {\n      window.clearTimeout(this.intervalId)\n    }\n\n    this.setState({ isLoading: true })\n\n    this.intervalId = window.setTimeout(() => {\n      ajax.get(misago.get(\"SEARCH_API\"), { q: query }).then(\n        (data) => {\n          this.setState({\n            intervalId: null,\n            isLoading: false,\n            results: cleanResults(data),\n          })\n        },\n        (rejection) => {\n          snackbar.apiError(rejection)\n\n          this.setState({\n            intervalId: null,\n            isLoading: false,\n            results: [],\n          })\n        }\n      )\n    }, delay)\n  }\n\n  render() {\n    let className = \"navbar-search dropdown\"\n    if (this.state.isOpen) className += \" open\"\n\n    return (\n      <div\n        className={className}\n        ref={(container) => (this.container = container)}\n      >\n        <a\n          aria-haspopup=\"true\"\n          aria-expanded=\"false\"\n          className=\"navbar-icon\"\n          data-toggle=\"dropdown\"\n          href={misago.get(\"SEARCH_URL\")}\n          onClick={this.onToggle}\n        >\n          <i className=\"material-icon\">search</i>\n        </a>\n        <Dropdown\n          isLoading={this.state.isLoading}\n          onChange={this.onChange}\n          results={this.state.results}\n          query={this.state.query}\n        />\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport zxcvbn from \"misago/services/zxcvbn\"\n\nexport const STYLES = [\n  \"progress-bar-danger\",\n  \"progress-bar-warning\",\n  \"progress-bar-warning\",\n  \"progress-bar-primary\",\n  \"progress-bar-success\",\n]\n\nexport const LABELS = [\n  gettext(\"Entered password is very weak.\"),\n  gettext(\"Entered password is weak.\"),\n  gettext(\"Entered password is average.\"),\n  gettext(\"Entered password is strong.\"),\n  gettext(\"Entered password is very strong.\"),\n]\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this._score = 0\n    this._password = null\n    this._inputs = []\n\n    this.state = {\n      loaded: false,\n    }\n  }\n\n  componentDidMount() {\n    zxcvbn.load().then(() => {\n      this.setState({ loaded: true })\n    })\n  }\n\n  getScore(password, inputs) {\n    let cacheStale = false\n\n    if (password !== this._password) {\n      cacheStale = true\n    }\n\n    if (inputs.length !== this._inputs.length) {\n      cacheStale = true\n    } else {\n      inputs.map((value, i) => {\n        if (value.trim() !== this._inputs[i]) {\n          cacheStale = true\n        }\n      })\n    }\n\n    if (cacheStale) {\n      this._score = zxcvbn.scorePassword(password, inputs)\n      this._password = password\n      this._inputs = inputs.map(function (value) {\n        return value.trim()\n      })\n    }\n\n    return this._score\n  }\n\n  render() {\n    if (!this.state.loaded) return null\n\n    let score = this.getScore(this.props.password, this.props.inputs)\n\n    return (\n      <div className=\"help-block password-strength\">\n        <div className=\"progress\">\n          <div\n            className={\"progress-bar \" + STYLES[score]}\n            style={{ width: 20 + 20 * score + \"%\" }}\n            role=\"progress-bar\"\n            aria-valuenow={score}\n            aria-valuemin=\"0\"\n            aria-valuemax=\"4\"\n          >\n            <span className=\"sr-only\">{LABELS[score]}</span>\n          </div>\n        </div>\n        <p className=\"text-small\">{LABELS[score]}</p>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport PasswordStrength from \"misago/components/password-strength\"\nimport RegisterLegalFootnote from \"misago/components/RegisterLegalFootnote\"\nimport StartSocialAuth from \"misago/components/StartSocialAuth\"\nimport misago from \"misago\"\nimport ajax from \"misago/services/ajax\"\nimport auth from \"misago/services/auth\"\nimport captcha from \"misago/services/captcha\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport showBannedPage from \"misago/utils/banned-page\"\nimport * as validators from \"misago/utils/validators\"\n\nexport class RegisterForm extends Form {\n  constructor(props) {\n    super(props)\n\n    const { username, password } = this.props.criteria\n\n    let passwordMinLength = 0\n    password.forEach((item) => {\n      if (item.name === \"MinimumLengthValidator\") {\n        passwordMinLength = item.min_length\n      }\n    })\n\n    const formValidators = {\n      username: [\n        validators.usernameContent(),\n        validators.usernameMinLength(username.min_length),\n        validators.usernameMaxLength(username.max_length),\n      ],\n      email: [validators.email()],\n      password: [validators.passwordMinLength(passwordMinLength)],\n      captcha: captcha.validator(),\n    }\n\n    if (!!misago.get(\"TERMS_OF_SERVICE_ID\")) {\n      formValidators.termsOfService = [validators.requiredTermsOfService()]\n    }\n\n    if (!!misago.get(\"PRIVACY_POLICY_ID\")) {\n      formValidators.privacyPolicy = [validators.requiredPrivacyPolicy()]\n    }\n\n    this.state = {\n      isLoading: false,\n\n      username: \"\",\n      email: \"\",\n      password: \"\",\n      captcha: \"\",\n\n      termsOfService: null,\n      privacyPolicy: null,\n\n      validators: formValidators,\n      errors: {},\n    }\n  }\n\n  clean() {\n    if (this.isValid()) {\n      return true\n    } else {\n      snackbar.error(gettext(\"Form contains errors.\"))\n      this.setState({\n        errors: this.validate(),\n      })\n      return false\n    }\n  }\n\n  send() {\n    return ajax.post(misago.get(\"USERS_API\"), {\n      username: this.state.username,\n      email: this.state.email,\n      password: this.state.password,\n      captcha: this.state.captcha,\n      terms_of_service: this.state.termsOfService,\n      privacy_policy: this.state.privacyPolicy,\n    })\n  }\n\n  handleSuccess(apiResponse) {\n    this.props.callback(apiResponse)\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      this.setState({\n        errors: Object.assign({}, this.state.errors, rejection),\n      })\n\n      if (rejection.__all__ && rejection.__all__.length > 0) {\n        snackbar.error(rejection.__all__[0])\n      } else {\n        snackbar.error(gettext(\"Form contains errors.\"))\n      }\n    } else if (rejection.status === 403 && rejection.ban) {\n      showBannedPage(rejection.ban)\n      modal.hide()\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  handlePrivacyPolicyChange = (event) => {\n    const value = event.target.value\n    this.handleToggleAgreement(\"privacyPolicy\", value)\n  }\n\n  handleTermsOfServiceChange = (event) => {\n    const value = event.target.value\n    this.handleToggleAgreement(\"termsOfService\", value)\n  }\n\n  handleToggleAgreement = (agreement, value) => {\n    this.setState((prevState, props) => {\n      if (prevState[agreement] === null) {\n        const errors = { ...prevState.errors, [agreement]: null }\n        return { errors, [agreement]: value }\n      }\n\n      const validator = this.state.validators[agreement][0]\n      const errors = { ...prevState.errors, [agreement]: [validator(null)] }\n      return { errors, [agreement]: null }\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"modal-dialog modal-register\" role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"modal\"\n              aria-label={pgettext(\"modal\", \"Close\")}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Register\")}</h4>\n          </div>\n          <form onSubmit={this.handleSubmit}>\n            <input type=\"type\" style={{ display: \"none\" }} />\n            <input type=\"password\" style={{ display: \"none\" }} />\n            <div className=\"modal-body\">\n              <StartSocialAuth\n                buttonClassName=\"col-xs-12 col-sm-6\"\n                buttonLabel={gettext(\"Join with %(site)s\")}\n                formLabel={gettext(\"Or create forum account:\")}\n              />\n\n              <FormGroup\n                label={gettext(\"Username\")}\n                for=\"id_username\"\n                validation={this.state.errors.username}\n              >\n                <input\n                  type=\"text\"\n                  id=\"id_username\"\n                  className=\"form-control\"\n                  aria-describedby=\"id_username_status\"\n                  disabled={this.state.isLoading}\n                  onChange={this.bindInput(\"username\")}\n                  value={this.state.username}\n                />\n              </FormGroup>\n\n              <FormGroup\n                label={gettext(\"E-mail\")}\n                for=\"id_email\"\n                validation={this.state.errors.email}\n              >\n                <input\n                  type=\"text\"\n                  id=\"id_email\"\n                  className=\"form-control\"\n                  aria-describedby=\"id_email_status\"\n                  disabled={this.state.isLoading}\n                  onChange={this.bindInput(\"email\")}\n                  value={this.state.email}\n                />\n              </FormGroup>\n\n              <FormGroup\n                label={gettext(\"Password\")}\n                for=\"id_password\"\n                validation={this.state.errors.password}\n                extra={\n                  <PasswordStrength\n                    password={this.state.password}\n                    inputs={[this.state.username, this.state.email]}\n                  />\n                }\n              >\n                <input\n                  type=\"password\"\n                  id=\"id_password\"\n                  className=\"form-control\"\n                  aria-describedby=\"id_password_status\"\n                  disabled={this.state.isLoading}\n                  onChange={this.bindInput(\"password\")}\n                  value={this.state.password}\n                />\n              </FormGroup>\n\n              {captcha.component({\n                form: this,\n              })}\n\n              <RegisterLegalFootnote\n                errors={this.state.errors}\n                privacyPolicy={this.state.privacyPolicy}\n                termsOfService={this.state.termsOfService}\n                onPrivacyPolicyChange={this.handlePrivacyPolicyChange}\n                onTermsOfServiceChange={this.handleTermsOfServiceChange}\n              />\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn btn-default\"\n                data-dismiss=\"modal\"\n                disabled={this.state.isLoading}\n                type=\"button\"\n              >\n                {gettext(\"Cancel\")}\n              </button>\n              <Button className=\"btn-primary\" loading={this.state.isLoading}>\n                {gettext(\"Register account\")}\n              </Button>\n            </div>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport class RegisterComplete extends React.Component {\n  getLead() {\n    if (this.props.activation === \"user\") {\n      return gettext(\n        \"%(username)s, your account has been created but you need to activate it before you will be able to sign in.\"\n      )\n    } else if (this.props.activation === \"admin\") {\n      return gettext(\n        \"%(username)s, your account has been created but board administrator will have to activate it before you will be able to sign in.\"\n      )\n    }\n  }\n\n  getSubscript() {\n    if (this.props.activation === \"user\") {\n      return gettext(\n        \"We have sent an e-mail to %(email)s with link that you have to click to activate your account.\"\n      )\n    } else if (this.props.activation === \"admin\") {\n      return gettext(\n        \"We will send an e-mail to %(email)s when this takes place.\"\n      )\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className=\"modal-dialog modal-message modal-register\"\n        role=\"document\"\n      >\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"modal\"\n              aria-label={pgettext(\"modal\", \"Close\")}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Registration complete\")}</h4>\n          </div>\n          <div className=\"modal-body\">\n            <div className=\"message-icon\">\n              <span className=\"material-icon\">info_outline</span>\n            </div>\n            <div className=\"message-body\">\n              <p className=\"lead\">\n                {interpolate(\n                  this.getLead(),\n                  { username: this.props.username },\n                  true\n                )}\n              </p>\n              <p>\n                {interpolate(\n                  this.getSubscript(),\n                  { email: this.props.email },\n                  true\n                )}\n              </p>\n              <button\n                className=\"btn btn-default\"\n                data-dismiss=\"modal\"\n                type=\"button\"\n              >\n                {gettext(\"Ok\")}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      complete: false,\n    }\n  }\n\n  completeRegistration = (apiResponse) => {\n    if (apiResponse.activation === \"active\") {\n      modal.hide()\n      auth.signIn(apiResponse)\n    } else {\n      this.setState({\n        complete: apiResponse,\n      })\n    }\n  }\n\n  render() {\n    if (this.state.complete) {\n      return (\n        <RegisterComplete\n          activation={this.state.complete.activation}\n          email={this.state.complete.email}\n          username={this.state.complete.username}\n        />\n      )\n    }\n\n    return <RegisterForm callback={this.completeRegistration} {...this.props} />\n  }\n}\n","import React from \"react\"\nimport Loader from \"misago/components/loader\"\nimport RegisterForm from \"misago/components/register.js\"\nimport ajax from \"misago/services/ajax\"\nimport captcha from \"misago/services/captcha\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n      isLoaded: false,\n\n      criteria: null,\n    }\n  }\n\n  showRegisterForm = () => {\n    if (misago.get(\"SETTINGS\").account_activation === \"closed\") {\n      snackbar.info(gettext(\"New registrations are currently disabled.\"))\n    } else if (this.state.isLoaded) {\n      modal.show(<RegisterForm criteria={this.state.criteria} />)\n    } else {\n      this.setState({ isLoading: true })\n\n      Promise.all([\n        captcha.load(),\n        ajax.get(misago.get(\"AUTH_CRITERIA_API\")),\n      ]).then(\n        (result) => {\n          this.setState({\n            isLoading: false,\n            isLoaded: true,\n            criteria: result[1],\n          })\n\n          modal.show(<RegisterForm criteria={result[1]} />)\n        },\n        () => {\n          this.setState({ isLoading: false })\n\n          snackbar.error(\n            gettext(\"Registration is currently unavailable due to an error.\")\n          )\n        }\n      )\n    }\n  }\n\n  getClassName() {\n    return this.props.className + (this.state.isLoading ? \" btn-loading\" : \"\")\n  }\n\n  render() {\n    return (\n      <button\n        className={\"btn \" + this.getClassName()}\n        disabled={this.state.isLoading}\n        onClick={this.showRegisterForm}\n        type=\"button\"\n      >\n        {gettext(\"Register\")}\n        {this.state.isLoading ? <Loader /> : null}\n      </button>\n    )\n  }\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport NavbarSearch from \"misago/components/navbar-search\"\nimport RegisterButton from \"misago/components/register-button\"\nimport SignInModal from \"misago/components/sign-in.js\"\nimport misago from \"misago\"\nimport dropdown from \"misago/services/mobile-navbar-dropdown\"\nimport modal from \"misago/services/modal\"\n\nexport class GuestMenu extends React.Component {\n  showSignInModal() {\n    modal.show(SignInModal)\n  }\n\n  render() {\n    const delegateAuth = misago.get(\"SETTINGS\").DELEGATE_AUTH\n\n    return (\n      <ul\n        className=\"dropdown-menu user-dropdown dropdown-menu-right\"\n        role=\"menu\"\n      >\n        <li className=\"guest-preview\">\n          <h4>{gettext(\"You are browsing as guest.\")}</h4>\n          <p>\n            {gettext(\n              \"Sign in or register to start and participate in discussions.\"\n            )}\n          </p>\n          {delegateAuth ? (\n            <div className=\"row\">\n              <div className=\"col-xs-12\">\n                <a\n                  className=\"btn btn-default btn-sign-in btn-block\"\n                  href={misago.get(\"SETTINGS\").LOGIN_URL}\n                >\n                  {gettext(\"Sign in\")}\n                </a>\n              </div>\n            </div>\n          ) : (\n            <div className=\"row\">\n              <div className=\"col-xs-6\">\n                <button\n                  className=\"btn btn-default btn-sign-in btn-block\"\n                  onClick={this.showSignInModal}\n                  type=\"button\"\n                >\n                  {gettext(\"Sign in\")}\n                </button>\n              </div>\n              <div className=\"col-xs-6\">\n                <RegisterButton className=\"btn-primary btn-register btn-block\">\n                  {gettext(\"Register\")}\n                </RegisterButton>\n              </div>\n            </div>\n          )}\n        </li>\n      </ul>\n    )\n  }\n}\n\nexport class GuestNav extends GuestMenu {\n  render() {\n    if (misago.get(\"SETTINGS\").DELEGATE_AUTH) {\n      return (\n        <div className=\"nav nav-guest\">\n          <a\n            className=\"btn navbar-btn btn-default btn-sign-in\"\n            href={misago.get(\"SETTINGS\").LOGIN_URL}\n          >\n            {gettext(\"Sign in\")}\n          </a>\n          <div className=\"navbar-left\">\n            <NavbarSearch />\n          </div>\n        </div>\n      )\n    }\n\n    return (\n      <div className=\"nav nav-guest\">\n        <button\n          className=\"btn navbar-btn btn-default btn-sign-in\"\n          onClick={this.showSignInModal}\n          type=\"button\"\n        >\n          {gettext(\"Sign in\")}\n        </button>\n        <RegisterButton className=\"navbar-btn btn-primary btn-register\">\n          {gettext(\"Register\")}\n        </RegisterButton>\n        <div className=\"navbar-left\">\n          <NavbarSearch />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport class CompactGuestNav extends React.Component {\n  showGuestMenu() {\n    dropdown.show(GuestMenu)\n  }\n\n  render() {\n    return (\n      <button type=\"button\" onClick={this.showGuestMenu}>\n        <Avatar size=\"64\" />\n      </button>\n    )\n  }\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport Button from \"misago/components/button\"\nimport Loader from \"misago/components/loader\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n    }\n  }\n\n  callApi(avatarType) {\n    if (this.state.isLoading) {\n      return false\n    }\n\n    this.setState({\n      isLoading: true,\n    })\n\n    ajax\n      .post(this.props.user.api.avatar, {\n        avatar: avatarType,\n      })\n      .then(\n        (response) => {\n          this.setState({\n            isLoading: false,\n          })\n\n          snackbar.success(response.detail)\n          this.props.onComplete(response)\n        },\n        (rejection) => {\n          if (rejection.status === 400) {\n            snackbar.error(rejection.detail)\n            this.setState({\n              isLoading: false,\n            })\n          } else {\n            this.props.showError(rejection)\n          }\n        }\n      )\n  }\n\n  setGravatar = () => {\n    this.callApi(\"gravatar\")\n  }\n\n  setGenerated = () => {\n    this.callApi(\"generated\")\n  }\n\n  getGravatarButton() {\n    if (this.props.options.gravatar) {\n      return (\n        <Button\n          onClick={this.setGravatar}\n          disabled={this.state.isLoading}\n          className=\"btn-default btn-block btn-avatar-gravatar\"\n        >\n          {gettext(\"Download my Gravatar\")}\n        </Button>\n      )\n    } else {\n      return null\n    }\n  }\n\n  getCropButton() {\n    if (!this.props.options.crop_src) return null\n\n    return (\n      <Button\n        className=\"btn-default btn-block btn-avatar-crop\"\n        disabled={this.state.isLoading}\n        onClick={this.props.showCrop}\n      >\n        {gettext(\"Re-crop uploaded image\")}\n      </Button>\n    )\n  }\n\n  getUploadButton() {\n    if (!this.props.options.upload) return null\n\n    return (\n      <Button\n        className=\"btn-default btn-block btn-avatar-upload\"\n        disabled={this.state.isLoading}\n        onClick={this.props.showUpload}\n      >\n        {gettext(\"Upload new image\")}\n      </Button>\n    )\n  }\n\n  getGalleryButton() {\n    if (!this.props.options.galleries) return null\n\n    return (\n      <Button\n        className=\"btn-default btn-block btn-avatar-gallery\"\n        disabled={this.state.isLoading}\n        onClick={this.props.showGallery}\n      >\n        {gettext(\"Pick avatar from gallery\")}\n      </Button>\n    )\n  }\n\n  getAvatarPreview() {\n    let userPeview = {\n      id: this.props.user.id,\n      avatars: this.props.options.avatars,\n    }\n\n    if (this.state.isLoading) {\n      return (\n        <div className=\"avatar-preview preview-loading\">\n          <Avatar size=\"200\" user={userPeview} />\n          <Loader />\n        </div>\n      )\n    }\n\n    return (\n      <div className=\"avatar-preview\">\n        <Avatar size=\"200\" user={userPeview} />\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"modal-body modal-avatar-index\">\n        <div className=\"row\">\n          <div className=\"col-md-5\">{this.getAvatarPreview()}</div>\n          <div className=\"col-md-7\">\n            {this.getGravatarButton()}\n\n            <Button\n              onClick={this.setGenerated}\n              disabled={this.state.isLoading}\n              className=\"btn-default btn-block btn-avatar-generate\"\n            >\n              {gettext(\"Generate my individual avatar\")}\n            </Button>\n\n            {this.getCropButton()}\n            {this.getUploadButton()}\n            {this.getGalleryButton()}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport Button from \"misago/components/button\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n      deviceRatio: 1,\n    }\n  }\n\n  getAvatarSize() {\n    if (this.props.upload) {\n      return this.props.options.crop_tmp.size\n    } else {\n      return this.props.options.crop_src.size\n    }\n  }\n\n  getImagePath() {\n    if (this.props.upload) {\n      return this.props.dataUrl\n    } else {\n      return this.props.options.crop_src.url\n    }\n  }\n\n  componentDidMount() {\n    let cropit = $(\".crop-form\")\n    let cropperWidth = this.getAvatarSize()\n\n    const initialWidth = cropit.width()\n    while (initialWidth < cropperWidth) {\n      cropperWidth = cropperWidth / 2\n    }\n\n    const deviceRatio = this.getAvatarSize() / cropperWidth\n\n    cropit.width(cropperWidth)\n\n    cropit.cropit({\n      width: cropperWidth,\n      height: cropperWidth,\n      exportZoom: deviceRatio,\n      imageState: {\n        src: this.getImagePath(),\n      },\n      onImageLoaded: () => {\n        if (this.props.upload) {\n          // center uploaded image\n          let zoomLevel = cropit.cropit(\"zoom\")\n          let imageSize = cropit.cropit(\"imageSize\")\n\n          // is it wider than taller?\n          if (imageSize.width > imageSize.height) {\n            let displayedWidth = imageSize.width * zoomLevel\n            let offsetX = (displayedWidth - this.getAvatarSize()) / -2\n\n            cropit.cropit(\"offset\", {\n              x: offsetX,\n              y: 0,\n            })\n          } else if (imageSize.width < imageSize.height) {\n            let displayedHeight = imageSize.height * zoomLevel\n            let offsetY = (displayedHeight - this.getAvatarSize()) / -2\n\n            cropit.cropit(\"offset\", {\n              x: 0,\n              y: offsetY,\n            })\n          } else {\n            cropit.cropit(\"offset\", {\n              x: 0,\n              y: 0,\n            })\n          }\n        } else {\n          // use preserved crop\n          let crop = this.props.options.crop_src.crop\n\n          if (crop) {\n            cropit.cropit(\"zoom\", crop.zoom)\n            cropit.cropit(\"offset\", {\n              x: crop.x,\n              y: crop.y,\n            })\n          }\n        }\n      },\n    })\n  }\n\n  componentWillUnmount() {\n    $(\".crop-form\").cropit(\"disable\")\n  }\n\n  cropAvatar = () => {\n    if (this.state.isLoading) {\n      return false\n    }\n\n    this.setState({\n      isLoading: true,\n    })\n\n    let avatarType = this.props.upload ? \"crop_tmp\" : \"crop_src\"\n    let cropit = $(\".crop-form\")\n\n    const deviceRatio = cropit.cropit(\"exportZoom\")\n    const cropitOffset = cropit.cropit(\"offset\")\n\n    ajax\n      .post(this.props.user.api.avatar, {\n        avatar: avatarType,\n        crop: {\n          offset: {\n            x: cropitOffset.x * deviceRatio,\n            y: cropitOffset.y * deviceRatio,\n          },\n          zoom: cropit.cropit(\"zoom\") * deviceRatio,\n        },\n      })\n      .then(\n        (data) => {\n          this.props.onComplete(data)\n          snackbar.success(data.detail)\n        },\n        (rejection) => {\n          if (rejection.status === 400) {\n            snackbar.error(rejection.detail)\n            this.setState({\n              isLoading: false,\n            })\n          } else {\n            this.props.showError(rejection)\n          }\n        }\n      )\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"modal-body modal-avatar-crop\">\n          <div className=\"crop-form\">\n            <div className=\"cropit-preview\" />\n            <input type=\"range\" className=\"cropit-image-zoom-input\" />\n          </div>\n        </div>\n        <div className=\"modal-footer\">\n          <div className=\"col-md-6 col-md-offset-3\">\n            <Button\n              onClick={this.cropAvatar}\n              loading={this.state.isLoading}\n              className=\"btn-primary btn-block\"\n            >\n              {this.props.upload\n                ? gettext(\"Set avatar\")\n                : gettext(\"Crop image\")}\n            </Button>\n\n            <Button\n              onClick={this.props.showIndex}\n              disabled={this.state.isLoading}\n              className=\"btn-default btn-block\"\n            >\n              {gettext(\"Cancel\")}\n            </Button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport AvatarCrop from \"misago/components/change-avatar/crop\"\nimport Button from \"misago/components/button\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport fileSize from \"misago/utils/file-size\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      image: null,\n      preview: null,\n      progress: 0,\n      uploaded: null,\n      dataUrl: null,\n    }\n  }\n\n  validateFile(image) {\n    if (image.size > this.props.options.upload.limit) {\n      return interpolate(\n        gettext(\"Selected file is too big. (%(filesize)s)\"),\n        {\n          filesize: fileSize(image.size),\n        },\n        true\n      )\n    }\n\n    let invalidTypeMsg = gettext(\"Selected file type is not supported.\")\n    if (\n      this.props.options.upload.allowed_mime_types.indexOf(image.type) === -1\n    ) {\n      return invalidTypeMsg\n    }\n\n    let extensionFound = false\n    let loweredFilename = image.name.toLowerCase()\n    this.props.options.upload.allowed_extensions.map(function (extension) {\n      if (loweredFilename.substr(extension.length * -1) === extension) {\n        extensionFound = true\n      }\n    })\n\n    if (!extensionFound) {\n      return invalidTypeMsg\n    }\n\n    return false\n  }\n\n  pickFile = () => {\n    document.getElementById(\"avatar-hidden-upload\").click()\n  }\n\n  uploadFile = () => {\n    let image = document.getElementById(\"avatar-hidden-upload\").files[0]\n    if (!image) return\n\n    let validationError = this.validateFile(image)\n    if (validationError) {\n      snackbar.error(validationError)\n      return\n    }\n\n    this.setState({\n      image,\n      preview: URL.createObjectURL(image),\n      progress: 0,\n    })\n\n    let data = new FormData()\n    data.append(\"avatar\", \"upload\")\n    data.append(\"image\", image)\n\n    ajax\n      .upload(this.props.user.api.avatar, data, (progress) => {\n        this.setState({\n          progress,\n        })\n      })\n      .then(\n        (data) => {\n          this.setState({\n            options: data,\n            uploaded: data.detail,\n          })\n\n          snackbar.info(\n            gettext(\"Your image has been uploaded and you may now crop it.\")\n          )\n        },\n        (rejection) => {\n          if (rejection.status === 400 || rejection.status === 413) {\n            snackbar.error(rejection.detail)\n            this.setState({\n              isLoading: false,\n              image: null,\n              progress: 0,\n            })\n          } else {\n            this.props.showError(rejection)\n          }\n        }\n      )\n  }\n\n  getUploadRequirements(options) {\n    let extensions = options.allowed_extensions.map(function (extension) {\n      return extension.substr(1)\n    })\n\n    return interpolate(\n      gettext(\"%(files)s files smaller than %(limit)s\"),\n      {\n        files: extensions.join(\", \"),\n        limit: fileSize(options.limit),\n      },\n      true\n    )\n  }\n\n  getUploadButton() {\n    return (\n      <div className=\"modal-body modal-avatar-upload\">\n        <Button className=\"btn-pick-file\" onClick={this.pickFile}>\n          <div className=\"material-icon\">input</div>\n          {gettext(\"Select file\")}\n        </Button>\n        <p className=\"text-muted\">\n          {this.getUploadRequirements(this.props.options.upload)}\n        </p>\n      </div>\n    )\n  }\n\n  getUploadProgressLabel() {\n    return interpolate(\n      gettext(\"%(progress)s % complete\"),\n      {\n        progress: this.state.progress,\n      },\n      true\n    )\n  }\n\n  getUploadProgress() {\n    return (\n      <div className=\"modal-body modal-avatar-upload\">\n        <div className=\"upload-progress\">\n          <img src={this.state.preview} />\n\n          <div className=\"progress\">\n            <div\n              className=\"progress-bar\"\n              role=\"progressbar\"\n              aria-valuenow=\"{this.state.progress}\"\n              aria-valuemin=\"0\"\n              aria-valuemax=\"100\"\n              style={{ width: this.state.progress + \"%\" }}\n            >\n              <span className=\"sr-only\">{this.getUploadProgressLabel()}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  renderUpload() {\n    return (\n      <div>\n        <input\n          type=\"file\"\n          id=\"avatar-hidden-upload\"\n          className=\"hidden-file-upload\"\n          onChange={this.uploadFile}\n        />\n        {this.state.image ? this.getUploadProgress() : this.getUploadButton()}\n        <div className=\"modal-footer\">\n          <div className=\"col-md-6 col-md-offset-3\">\n            <Button\n              onClick={this.props.showIndex}\n              disabled={!!this.state.image}\n              className=\"btn-default btn-block\"\n            >\n              {gettext(\"Cancel\")}\n            </Button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  renderCrop() {\n    return (\n      <AvatarCrop\n        options={this.state.options}\n        user={this.props.user}\n        upload={this.state.uploaded}\n        dataUrl={this.state.preview}\n        onComplete={this.props.onComplete}\n        showError={this.props.showError}\n        showIndex={this.props.showIndex}\n      />\n    )\n  }\n\n  render() {\n    if (this.state.uploaded) return this.renderCrop()\n\n    return this.renderUpload()\n  }\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport Button from \"misago/components/button\"\nimport misago from \"misago/index\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport batch from \"misago/utils/batch\"\n\nexport class GalleryItem extends React.Component {\n  select = () => {\n    this.props.select(this.props.id)\n  }\n\n  getClassName() {\n    if (this.props.selection === this.props.id) {\n      if (this.props.disabled) {\n        return \"btn btn-avatar btn-disabled avatar-selected\"\n      } else {\n        return \"btn btn-avatar avatar-selected\"\n      }\n    } else if (this.props.disabled) {\n      return \"btn btn-avatar btn-disabled\"\n    } else {\n      return \"btn btn-avatar\"\n    }\n  }\n\n  render() {\n    return (\n      <button\n        type=\"button\"\n        className={this.getClassName()}\n        disabled={this.props.disabled}\n        onClick={this.select}\n      >\n        <img src={this.props.url} />\n      </button>\n    )\n  }\n}\n\nexport class Gallery extends React.Component {\n  render() {\n    return (\n      <div className=\"avatars-gallery\">\n        <h3>{this.props.name}</h3>\n\n        <div className=\"avatars-gallery-images\">\n          {batch(this.props.images, 4, null).map((row, i) => {\n            return (\n              <div className=\"row\" key={i}>\n                {row.map((item, i) => {\n                  return (\n                    <div className=\"col-xs-3\" key={i}>\n                      {item ? (\n                        <GalleryItem\n                          disabled={this.props.disabled}\n                          select={this.props.select}\n                          selection={this.props.selection}\n                          {...item}\n                        />\n                      ) : (\n                        <div className=\"blank-avatar\" />\n                      )}\n                    </div>\n                  )\n                })}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      selection: null,\n      isLoading: false,\n    }\n  }\n\n  select = (image) => {\n    this.setState({\n      selection: image,\n    })\n  }\n\n  save = () => {\n    if (this.state.isLoading) {\n      return false\n    }\n\n    this.setState({\n      isLoading: true,\n    })\n\n    ajax\n      .post(this.props.user.api.avatar, {\n        avatar: \"galleries\",\n        image: this.state.selection,\n      })\n      .then(\n        (response) => {\n          this.setState({\n            isLoading: false,\n          })\n\n          snackbar.success(response.detail)\n          this.props.onComplete(response)\n          this.props.showIndex()\n        },\n        (rejection) => {\n          if (rejection.status === 400) {\n            snackbar.error(rejection.detail)\n            this.setState({\n              isLoading: false,\n            })\n          } else {\n            this.props.showError(rejection)\n          }\n        }\n      )\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"modal-body modal-avatar-gallery\">\n          {this.props.options.galleries.map((item, i) => {\n            return (\n              <Gallery\n                name={item.name}\n                images={item.images}\n                selection={this.state.selection}\n                disabled={this.state.isLoading}\n                select={this.select}\n                key={i}\n              />\n            )\n          })}\n        </div>\n        <div className=\"modal-footer\">\n          <div className=\"row\">\n            <div className=\"col-md-6 col-md-offset-3\">\n              <Button\n                onClick={this.save}\n                loading={this.state.isLoading}\n                disabled={!this.state.selection}\n                className=\"btn-primary btn-block\"\n              >\n                {this.state.selection\n                  ? gettext(\"Save choice\")\n                  : gettext(\"Select avatar\")}\n              </Button>\n\n              <Button\n                onClick={this.props.showIndex}\n                disabled={this.state.isLoading}\n                className=\"btn-default btn-block\"\n              >\n                {gettext(\"Cancel\")}\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport AvatarIndex from \"misago/components/change-avatar/index\"\nimport AvatarCrop from \"misago/components/change-avatar/crop\"\nimport AvatarUpload from \"misago/components/change-avatar/upload\"\nimport AvatarGallery from \"misago/components/change-avatar/gallery\"\nimport Loader from \"misago/components/modal-loader\"\nimport { updateAvatar } from \"misago/reducers/users\"\nimport ajax from \"misago/services/ajax\"\nimport store from \"misago/services/store\"\n\nexport class ChangeAvatarError extends React.Component {\n  getErrorReason() {\n    if (this.props.reason) {\n      return <p dangerouslySetInnerHTML={{ __html: this.props.reason }} />\n    } else {\n      return null\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"modal-body\">\n        <div className=\"message-icon\">\n          <span className=\"material-icon\">remove_circle_outline</span>\n        </div>\n        <div className=\"message-body\">\n          <p className=\"lead\">{this.props.message}</p>\n          {this.getErrorReason()}\n          <button\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            {gettext(\"Ok\")}\n          </button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default class extends React.Component {\n  componentDidMount() {\n    ajax.get(this.props.user.api.avatar).then(\n      (options) => {\n        this.setState({\n          component: AvatarIndex,\n          options: options,\n          error: null,\n        })\n      },\n      (rejection) => {\n        this.showError(rejection)\n      }\n    )\n  }\n\n  showError = (error) => {\n    this.setState({\n      error,\n    })\n  }\n\n  showIndex = () => {\n    this.setState({\n      component: AvatarIndex,\n    })\n  }\n\n  showUpload = () => {\n    this.setState({\n      component: AvatarUpload,\n    })\n  }\n\n  showCrop = () => {\n    this.setState({\n      component: AvatarCrop,\n    })\n  }\n\n  showGallery = () => {\n    this.setState({\n      component: AvatarGallery,\n    })\n  }\n\n  completeFlow = (options) => {\n    store.dispatch(updateAvatar(this.props.user, options.avatars))\n\n    this.setState({\n      component: AvatarIndex,\n      options,\n    })\n  }\n\n  getBody() {\n    if (this.state) {\n      if (this.state.error) {\n        return (\n          <ChangeAvatarError\n            message={this.state.error.detail}\n            reason={this.state.error.reason}\n          />\n        )\n      } else {\n        return (\n          <this.state.component\n            options={this.state.options}\n            user={this.props.user}\n            onComplete={this.completeFlow}\n            showError={this.showError}\n            showIndex={this.showIndex}\n            showCrop={this.showCrop}\n            showUpload={this.showUpload}\n            showGallery={this.showGallery}\n          />\n        )\n      }\n    } else {\n      return <Loader />\n    }\n  }\n\n  getClassName() {\n    if (this.state && this.state.error) {\n      return \"modal-dialog modal-message modal-change-avatar\"\n    } else {\n      return \"modal-dialog modal-change-avatar\"\n    }\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()} role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"modal\"\n              aria-label={pgettext(\"modal\", \"Close\")}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Change your avatar\")}</h4>\n          </div>\n\n          {this.getBody()}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport function select(state) {\n  return {\n    user: state.auth.user,\n  }\n}\n","import React from \"react\"\nimport { connect } from \"react-redux\"\nimport Avatar from \"misago/components/avatar\"\nimport ChangeAvatarModal, { select } from \"misago/components/change-avatar/root\"\nimport NavbarSearch from \"misago/components/navbar-search\"\nimport misago from \"misago\"\nimport dropdown from \"misago/services/mobile-navbar-dropdown\"\nimport modal from \"misago/services/modal\"\n\nexport class UserMenu extends React.Component {\n  changeAvatar() {\n    modal.show(connect(select)(ChangeAvatarModal))\n  }\n\n  render() {\n    const { user } = this.props\n\n    return (\n      <ul\n        className=\"dropdown-menu user-dropdown dropdown-menu-right\"\n        role=\"menu\"\n      >\n        <li className=\"dropdown-header\">\n          <strong>{user.username}</strong>\n          <div className=\"row user-stats\">\n            <div className=\"col-sm-3\">\n              <span className=\"material-icon\">message</span>\n              {user.posts}\n            </div>\n            <div className=\"col-sm-3\">\n              <span className=\"material-icon\">forum</span>\n              {user.threads}\n            </div>\n            <div className=\"col-sm-3\">\n              <span className=\"material-icon\">favorite</span>\n              {user.followers}\n            </div>\n            <div className=\"col-sm-3\">\n              <span className=\"material-icon\">favorite_outline</span>\n              {user.following}\n            </div>\n          </div>\n        </li>\n        <li className=\"divider\" />\n        <li>\n          <a href={user.url}>\n            <span className=\"material-icon\">account_circle</span>\n            {gettext(\"See your profile\")}\n          </a>\n        </li>\n        <li>\n          <a href={misago.get(\"USERCP_URL\")}>\n            <span className=\"material-icon\">done_all</span>\n            {gettext(\"Change options\")}\n          </a>\n        </li>\n        <li>\n          <button\n            className=\"btn-link\"\n            onClick={this.changeAvatar}\n            type=\"button\"\n          >\n            <span className=\"material-icon\">portrait</span>\n            {gettext(\"Change avatar\")}\n          </button>\n        </li>\n        {!!user.acl.can_use_private_threads && (\n          <li>\n            <a href={misago.get(\"PRIVATE_THREADS_URL\")}>\n              <span className=\"material-icon\">message</span>\n              {gettext(\"Private threads\")}\n              <PrivateThreadsBadge user={user} />\n            </a>\n          </li>\n        )}\n        <li className=\"divider\" />\n        <li className=\"dropdown-buttons\">\n          <button\n            className=\"btn btn-default btn-block\"\n            onClick={() =>\n              document.getElementById(\"hidden-logout-form\").submit()\n            }\n            type=\"button\"\n          >\n            {gettext(\"Log out\")}\n          </button>\n        </li>\n      </ul>\n    )\n  }\n}\n\nexport function PrivateThreadsBadge({ user }) {\n  if (!user.unread_private_threads) return null\n\n  return <span className=\"badge\">{user.unread_private_threads}</span>\n}\n\nexport function UserNav({ user }) {\n  return (\n    <ul className=\"ul nav navbar-nav nav-user\">\n      <li>\n        <NavbarSearch />\n      </li>\n      <UserPrivateThreadsLink user={user} />\n      <li className=\"dropdown\">\n        <a\n          aria-haspopup=\"true\"\n          aria-expanded=\"false\"\n          className=\"dropdown-toggle\"\n          data-toggle=\"dropdown\"\n          href={user.url}\n          role=\"button\"\n        >\n          <Avatar user={user} size=\"64\" />\n        </a>\n        <UserMenu user={user} />\n      </li>\n    </ul>\n  )\n}\n\nexport function UserPrivateThreadsLink({ user }) {\n  if (!user.acl.can_use_private_threads) return null\n\n  let title = null\n  if (user.unread_private_threads) {\n    title = gettext(\"You have unread private threads!\")\n  } else {\n    title = gettext(\"Private threads\")\n  }\n\n  return (\n    <li>\n      <a\n        className=\"navbar-icon\"\n        href={misago.get(\"PRIVATE_THREADS_URL\")}\n        title={title}\n      >\n        <span className=\"material-icon\">message</span>\n        {user.unread_private_threads > 0 && (\n          <span className=\"badge\">{user.unread_private_threads}</span>\n        )}\n      </a>\n    </li>\n  )\n}\n\nexport function selectUserMenu(state) {\n  return {\n    user: state.auth.user,\n  }\n}\n\nexport class CompactUserNav extends React.Component {\n  showUserMenu() {\n    dropdown.showConnected(\"user-menu\", connect(selectUserMenu)(UserMenu))\n  }\n\n  render() {\n    return (\n      <button type=\"button\" onClick={this.showUserMenu}>\n        <Avatar user={this.props.user} size=\"50\" />\n      </button>\n    )\n  }\n}\n","import React from \"react\"\nimport { GuestNav, CompactGuestNav } from \"./guest-nav\"\nimport { UserNav, CompactUserNav } from \"./user-nav\"\n\nexport class UserMenu extends React.Component {\n  render() {\n    if (this.props.isAuthenticated) {\n      return <UserNav user={this.props.user} />\n    } else {\n      return <GuestNav />\n    }\n  }\n}\n\nexport class CompactUserMenu extends React.Component {\n  render() {\n    if (this.props.isAuthenticated) {\n      return <CompactUserNav user={this.props.user} />\n    } else {\n      return <CompactGuestNav />\n    }\n  }\n}\n\nexport function select(state) {\n  return state.auth\n}\n","import { connect } from \"react-redux\"\nimport misago from \"misago/index\"\nimport {\n  UserMenu,\n  CompactUserMenu,\n  select,\n} from \"misago/components/user-menu/root\"\nimport mount from \"misago/utils/mount-component\"\n\nexport default function initializer() {\n  mount(connect(select)(UserMenu), \"user-menu-mount\")\n  mount(connect(select)(CompactUserMenu), \"user-menu-compact-mount\")\n}\n\nmisago.addInitializer({\n  name: \"component:user-menu\",\n  initializer: initializer,\n  after: \"store\",\n})\n","import React from \"react\"\nimport { Link } from \"react-router\"\nimport Li from \"misago/components/li\"\n\nconst UsersNav = ({ baseUrl, page, pages }) => (\n  <div className=\"nav-container\">\n    <div className=\"dropdown hidden-sm hidden-md hidden-lg\">\n      <button\n        className=\"btn btn-default btn-block btn-outline dropdown-toggle\"\n        type=\"button\"\n        data-toggle=\"dropdown\"\n        aria-haspopup=\"true\"\n        aria-expanded=\"false\"\n      >\n        <span className=\"material-icon\">menu</span>\n        {page.name}\n      </button>\n      <ul className=\"dropdown-menu stick-to-bottom\">\n        {pages.map((page) => {\n          const url = getPageUrl(baseUrl, page)\n          return (\n            <li key={url}>\n              <Link to={url}>{page.name}</Link>\n            </li>\n          )\n        })}\n      </ul>\n    </div>\n    <ul className=\"nav nav-pills hidden-xs\" role=\"menu\">\n      {pages.map((page) => {\n        const url = getPageUrl(baseUrl, page)\n        return (\n          <Li path={url} key={url}>\n            <Link to={url}>{page.name}</Link>\n          </Li>\n        )\n      })}\n    </ul>\n  </div>\n)\n\nconst getPageUrl = (baseUrl, page) => {\n  let url = baseUrl\n  if (page.component === \"rank\") {\n    url += page.slug\n  } else {\n    url += page.component\n  }\n  return url + \"/\"\n}\n\nexport default UsersNav\n","import React from \"react\"\nimport PageContainer from \"../../PageContainer\"\nimport UsersNav from \"../UsersNav\"\n\nexport default class extends React.Component {\n  getEmptyMessage() {\n    return interpolate(\n      gettext(\n        \"No users have posted any new messages during last %(days)s days.\"\n      ),\n      { days: this.props.trackedPeriod },\n      true\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"active-posters-list\">\n        <PageContainer>\n          <UsersNav\n            baseUrl={misago.get(\"USERS_LIST_URL\")}\n            page={this.props.page}\n            pages={misago.get(\"USERS_LISTS\")}\n          />\n          <p className=\"lead\">{this.getEmptyMessage()}</p>\n        </PageContainer>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport * as random from \"misago/utils/random\"\n\nexport default class extends React.Component {\n  shouldComponentUpdate() {\n    return false\n  }\n\n  getClassName() {\n    if (this.props.hiddenOnMobile) {\n      return \"list-group-item hidden-xs hidden-sm\"\n    } else {\n      return \"list-group-item\"\n    }\n  }\n\n  render() {\n    return (\n      <li className={this.getClassName()}>\n        <div className=\"rank-user-avatar\">\n          <span>\n            <Avatar size=\"50\" />\n          </span>\n        </div>\n\n        <div className=\"rank-user\">\n          <div className=\"user-name\">\n            <span className=\"item-title\">\n              <span\n                className=\"ui-preview-text\"\n                style={{ width: random.int(30, 80) + \"px\" }}\n              >\n                &nbsp;\n              </span>\n            </span>\n          </div>\n\n          <div className=\"user-details\">\n            <span className=\"user-status\">\n              <span className=\"status-icon ui-preview-text\">&nbsp;</span>\n              <span\n                className=\"status-label ui-preview-text hidden-xs hidden-sm\"\n                style={{ width: random.int(30, 50) + \"px\" }}\n              >\n                &nbsp;\n              </span>\n            </span>\n            <span className=\"rank-name\">\n              <span\n                className=\"ui-preview-text\"\n                style={{ width: random.int(30, 50) + \"px\" }}\n              >\n                &nbsp;\n              </span>\n            </span>\n            <span className=\"user-title hidden-xs hidden-sm\">\n              <span\n                className=\"ui-preview-text\"\n                style={{ width: random.int(30, 50) + \"px\" }}\n              >\n                &nbsp;\n              </span>\n            </span>\n          </div>\n          <div className=\"user-compact-stats visible-xs-block\">\n            <span className=\"rank-position\">\n              <strong>\n                <span\n                  className=\"ui-preview-text\"\n                  style={{ width: random.int(20, 30) + \"px\" }}\n                >\n                  &nbsp;\n                </span>\n              </strong>\n              <small>{gettext(\"Rank\")}</small>\n            </span>\n            <span className=\"rank-posts-counted\">\n              <strong>\n                <span\n                  className=\"ui-preview-text\"\n                  style={{ width: random.int(20, 30) + \"px\" }}\n                >\n                  &nbsp;\n                </span>\n              </strong>\n              <small>{gettext(\"Ranked posts\")}</small>\n            </span>\n          </div>\n        </div>\n\n        <div className=\"rank-position hidden-xs\">\n          <strong>\n            <span\n              className=\"ui-preview-text\"\n              style={{ width: random.int(20, 30) + \"px\" }}\n            >\n              &nbsp;\n            </span>\n          </strong>\n          <small>{gettext(\"Rank\")}</small>\n        </div>\n\n        <div className=\"rank-posts-counted hidden-xs\">\n          <strong>\n            <span\n              className=\"ui-preview-text\"\n              style={{ width: random.int(20, 30) + \"px\" }}\n            >\n              &nbsp;\n            </span>\n          </strong>\n          <small>{gettext(\"Ranked posts\")}</small>\n        </div>\n\n        <div className=\"rank-posts-total hidden-xs\">\n          <strong>\n            <span\n              className=\"ui-preview-text\"\n              style={{ width: random.int(20, 30) + \"px\" }}\n            >\n              &nbsp;\n            </span>\n          </strong>\n          <small>{gettext(\"Total posts\")}</small>\n        </div>\n      </li>\n    )\n  }\n}\n","import React from \"react\"\nimport ItemPreview from \"misago/components/users/active-posters/list-item-preview\"\nimport * as random from \"misago/utils/random\"\nimport PageContainer from \"../../PageContainer\"\nimport UsersNav from \"../UsersNav\"\n\nexport default class extends React.Component {\n  shouldComponentUpdate() {\n    return false\n  }\n\n  render() {\n    return (\n      <div className=\"active-posters-list\">\n        <PageContainer>\n          <UsersNav\n            baseUrl={misago.get(\"USERS_LIST_URL\")}\n            page={this.props.page}\n            pages={misago.get(\"USERS_LISTS\")}\n          />\n          <p className=\"lead ui-preview\">\n            <span\n              className=\"ui-preview-text\"\n              style={{ width: random.int(50, 220) + \"px\" }}\n            >\n              &nbsp;\n            </span>\n          </p>\n\n          <div className=\"active-posters ui-preview\">\n            <ul className=\"list-group\">\n              {[0, 1, 2].map((i) => {\n                return <ItemPreview hiddenOnMobile={i > 0} key={i} />\n              })}\n            </ul>\n          </div>\n        </PageContainer>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport { Link } from \"react-router\"\nimport Avatar from \"misago/components/avatar\"\nimport Status, { StatusIcon, StatusLabel } from \"misago/components/user-status\"\nimport misago from \"misago/index\"\nimport * as random from \"misago/utils/random\"\n\nexport default class extends React.Component {\n  getClassName() {\n    if (this.props.rank.css_class) {\n      return \"list-group-item list-group-rank-\" + this.props.rank.css_class\n    } else {\n      return \"list-group-item\"\n    }\n  }\n\n  getUserStatus() {\n    if (this.props.user.status) {\n      return (\n        <Status user={this.props.user} status={this.props.user.status}>\n          <StatusIcon user={this.props.user} status={this.props.user.status} />\n          <StatusLabel\n            user={this.props.user}\n            status={this.props.user.status}\n            className=\"status-label hidden-xs hidden-sm\"\n          />\n        </Status>\n      )\n    }\n\n    return (\n      <span className=\"user-status\">\n        <span className=\"status-icon ui-preview-text\">&nbsp;</span>\n        <span\n          className=\"status-label ui-preview-text hidden-xs hidden-sm\"\n          style={{ width: random.int(30, 50) + \"px\" }}\n        >\n          &nbsp;\n        </span>\n      </span>\n    )\n  }\n\n  getRankName() {\n    if (!this.props.rank.is_tab) {\n      return (\n        <span className=\"rank-name item-title\">{this.props.rank.name}</span>\n      )\n    }\n\n    let rankUrl = misago.get(\"USERS_LIST_URL\") + this.props.rank.slug + \"/\"\n    return (\n      <Link to={rankUrl} className=\"rank-name item-title\">\n        {this.props.rank.name}\n      </Link>\n    )\n  }\n\n  getUserTitle() {\n    if (!this.props.user.title) return null\n\n    return (\n      <span className=\"user-title hidden-xs hidden-sm\">\n        {this.props.user.title}\n      </span>\n    )\n  }\n\n  render() {\n    return (\n      <li className={this.getClassName()}>\n        <div className=\"rank-user-avatar\">\n          <a href={this.props.user.url}>\n            <Avatar user={this.props.user} size={50} size2x={64} />\n          </a>\n        </div>\n\n        <div className=\"rank-user\">\n          <div className=\"user-name\">\n            <a href={this.props.user.url} className=\"item-title\">\n              {this.props.user.username}\n            </a>\n          </div>\n          <div className=\"user-details\">\n            {this.getUserStatus()}\n            {this.getRankName()}\n            {this.getUserTitle()}\n          </div>\n          <div className=\"user-compact-stats visible-xs-block\">\n            <span className=\"rank-position\">\n              <strong>#{this.props.counter}</strong>\n              <small>{gettext(\"Rank\")}</small>\n            </span>\n\n            <span className=\"rank-posts-counted\">\n              <strong>{this.props.user.meta.score}</strong>\n              <small>{gettext(\"Ranked posts\")}</small>\n            </span>\n          </div>\n        </div>\n\n        <div className=\"rank-position hidden-xs\">\n          <strong>#{this.props.counter}</strong>\n          <small>{gettext(\"Rank\")}</small>\n        </div>\n\n        <div className=\"rank-posts-counted hidden-xs\">\n          <strong>{this.props.user.meta.score}</strong>\n          <small>{gettext(\"Ranked posts\")}</small>\n        </div>\n\n        <div className=\"rank-posts-total hidden-xs\">\n          <strong>{this.props.user.posts}</strong>\n          <small>{gettext(\"Total posts\")}</small>\n        </div>\n      </li>\n    )\n  }\n}\n","import React from \"react\"\nimport ListItem from \"misago/components/users/active-posters/list-item\"\nimport PageContainer from \"../../PageContainer\"\nimport UsersNav from \"../UsersNav\"\n\nexport default class extends React.Component {\n  getLeadMessage() {\n    let message = ngettext(\n      \"%(posters)s top poster from last %(days)s days.\",\n      \"%(posters)s top posters from last %(days)s days.\",\n      this.props.count\n    )\n\n    return interpolate(\n      message,\n      {\n        posters: this.props.count,\n        days: this.props.trackedPeriod,\n      },\n      true\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"active-posters-list\">\n        <PageContainer>\n          <UsersNav\n            baseUrl={misago.get(\"USERS_LIST_URL\")}\n            page={this.props.page}\n            pages={misago.get(\"USERS_LISTS\")}\n          />\n          <p className=\"lead\">{this.getLeadMessage()}</p>\n\n          <div className=\"active-posters ui-ready\">\n            <ul className=\"list-group\">\n              {this.props.users.map((user, i) => {\n                return (\n                  <ListItem\n                    user={user}\n                    rank={user.rank}\n                    counter={i + 1}\n                    key={user.id}\n                  />\n                )\n              })}\n            </ul>\n          </div>\n        </PageContainer>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport ListEmpty from \"misago/components/users/active-posters/list-empty\"\nimport ListPreview from \"misago/components/users/active-posters/list-preview\"\nimport ListReady from \"misago/components/users/active-posters/list-ready\"\nimport misago from \"misago/index\"\nimport { hydrate } from \"misago/reducers/users\"\nimport polls from \"misago/services/polls\"\nimport store from \"misago/services/store\"\nimport title from \"misago/services/page-title\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    if (misago.has(\"USERS\")) {\n      this.initWithPreloadedData(misago.pop(\"USERS\"))\n    } else {\n      this.initWithoutPreloadedData()\n    }\n\n    this.startPolling()\n  }\n\n  initWithPreloadedData(data) {\n    this.state = {\n      isLoaded: true,\n\n      trackedPeriod: data.tracked_period,\n      count: data.count,\n    }\n\n    store.dispatch(hydrate(data.results))\n  }\n\n  initWithoutPreloadedData() {\n    this.state = {\n      isLoaded: false,\n    }\n  }\n\n  startPolling() {\n    polls.start({\n      poll: \"active-posters\",\n      url: misago.get(\"USERS_API\"),\n      data: {\n        list: \"active\",\n      },\n      frequency: 90 * 1000,\n      update: this.update,\n    })\n  }\n\n  update = (data) => {\n    store.dispatch(hydrate(data.results))\n\n    this.setState({\n      isLoaded: true,\n\n      trackedPeriod: data.tracked_period,\n      count: data.count,\n    })\n  }\n\n  componentDidMount() {\n    title.set({\n      title: this.props.route.extra.name,\n      parent: gettext(\"Users\"),\n    })\n  }\n\n  componentWillUnmount() {\n    polls.stop(\"active-posters\")\n  }\n\n  render() {\n    const page = { name: this.props.route.extra.name }\n\n    if (this.state.isLoaded) {\n      if (this.state.count > 0) {\n        return (\n          <ListReady\n            page={page}\n            users={this.props.users}\n            trackedPeriod={this.state.trackedPeriod}\n            count={this.state.count}\n          />\n        )\n      } else {\n        return (\n          <ListEmpty page={page} trackedPeriod={this.state.trackedPeriod} />\n        )\n      }\n    } else {\n      return <ListPreview page={page} />\n    }\n  }\n}\n","import React from \"react\"\nimport stringCount from \"misago/utils/string-count\"\n\nexport default class extends React.Component {\n  getClassName() {\n    if (this.props.copy && this.props.copy.length) {\n      if (\n        stringCount(this.props.copy, \"<p\") === 1 &&\n        this.props.copy.indexOf(\"<br\") === -1\n      ) {\n        return \"page-lead lead\"\n      }\n    }\n\n    return \"page-lead\"\n  }\n\n  render() {\n    if (this.props.copy && this.props.copy.length) {\n      return (\n        <div\n          className={this.getClassName()}\n          dangerouslySetInnerHTML={{\n            __html: this.props.copy,\n          }}\n        />\n      )\n    } else {\n      return null\n    }\n  }\n}\n","export default function (string, subString) {\n  string = (string + \"\").toLowerCase()\n  subString = (subString + \"\").toLowerCase()\n\n  if (subString.length <= 0) return 0\n\n  let n = 0\n  let pos = 0\n  let step = subString.length\n\n  while (true) {\n    pos = string.indexOf(subString, pos)\n    if (pos >= 0) {\n      n += 1\n      pos += step\n    } else {\n      break\n    }\n  }\n\n  return n\n}\n","import React from \"react\"\nimport UsersList from \"../../users-list\"\n\nconst RankUsersList = ({ users }) => (\n  <UsersList cols={4} isReady={true} showStatus={true} users={users} />\n)\n\nexport default RankUsersList\n","import React from \"react\"\nimport UsersList from \"misago/components/users-list\"\n\nclass RankUsersListLoader extends React.Component {\n  shouldComponentUpdate() {\n    return false\n  }\n\n  render = () => <UsersList cols={4} isReady={false} />\n}\n\nexport default RankUsersListLoader\n","import React from \"react\"\n\nconst RankUsersLeft = ({ users }) => {\n  if (users.more) {\n    return (\n      <p>\n        {interpolate(\n          ngettext(\n            \"There is %(more)s more member with this role.\",\n            \"There are %(more)s more members with this role.\",\n            users.more\n          ),\n          { more: users.more },\n          true\n        )}\n      </p>\n    )\n  }\n\n  return <p>{gettext(\"There are no more members with this role.\")}</p>\n}\n\nexport default RankUsersLeft\n","import React from \"react\"\nimport { Link } from \"react-router\"\n\nconst RankUsersPagination = ({ baseUrl, users }) => (\n  <div className=\"misago-pagination\">\n    {users.isLoaded && users.first ? (\n      <Link\n        className=\"btn btn-default btn-outline btn-icon\"\n        to={baseUrl}\n        title={gettext(\"Go to first page\")}\n      >\n        <span className=\"material-icon\">first_page</span>\n      </Link>\n    ) : (\n      <button\n        className=\"btn btn-default btn-outline btn-icon\"\n        title={gettext(\"Go to first page\")}\n        type=\"button\"\n        disabled\n      >\n        <span className=\"material-icon\">first_page</span>\n      </button>\n    )}\n    {users.isLoaded && users.previous ? (\n      <Link\n        className=\"btn btn-default btn-outline btn-icon\"\n        to={baseUrl + (users.previous > 1 ? users.previous + \"/\" : \"\")}\n        title={gettext(\"Go to previous page\")}\n      >\n        <span className=\"material-icon\">chevron_left</span>\n      </Link>\n    ) : (\n      <button\n        className=\"btn btn-default btn-outline btn-icon\"\n        title={gettext(\"Go to previous page\")}\n        type=\"button\"\n        disabled\n      >\n        <span className=\"material-icon\">chevron_left</span>\n      </button>\n    )}\n    {users.isLoaded && users.next ? (\n      <Link\n        className=\"btn btn-default btn-outline btn-icon\"\n        to={baseUrl + users.next + \"/\"}\n        title={gettext(\"Go to next page\")}\n      >\n        <span className=\"material-icon\">chevron_right</span>\n      </Link>\n    ) : (\n      <button\n        className=\"btn btn-default btn-outline btn-icon\"\n        title={gettext(\"Go to next page\")}\n        type=\"button\"\n        disabled\n      >\n        <span className=\"material-icon\">chevron_right</span>\n      </button>\n    )}\n    {users.isLoaded && users.last ? (\n      <Link\n        className=\"btn btn-default btn-outline btn-icon\"\n        to={baseUrl + users.last + \"/\"}\n        title={gettext(\"Go to last page\")}\n      >\n        <span className=\"material-icon\">last_page</span>\n      </Link>\n    ) : (\n      <button\n        className=\"btn btn-default btn-outline btn-icon\"\n        title={gettext(\"Go to last page\")}\n        type=\"button\"\n        disabled\n      >\n        <span className=\"material-icon\">last_page</span>\n      </button>\n    )}\n  </div>\n)\n\nexport default RankUsersPagination\n","import React from \"react\"\nimport { Toolbar, ToolbarItem, ToolbarSection } from \"../../Toolbar\"\nimport RankUsersLeft from \"./RankUsersLeft\"\nimport RankUsersPagination from \"./RankUsersPagination\"\n\nconst RankUsersToolbar = ({ baseUrl, users }) => (\n  <Toolbar>\n    <ToolbarSection>\n      <ToolbarItem>\n        <RankUsersPagination baseUrl={baseUrl} users={users} />\n      </ToolbarItem>\n    </ToolbarSection>\n    <ToolbarSection auto>\n      <ToolbarItem>\n        <RankUsersLeft users={users} />\n      </ToolbarItem>\n    </ToolbarSection>\n  </Toolbar>\n)\n\nexport default RankUsersToolbar\n","import React from \"react\"\nimport PageLead from \"misago/components/page-lead\"\nimport misago from \"misago/index\"\nimport { hydrate } from \"misago/reducers/users\"\nimport polls from \"misago/services/polls\"\nimport store from \"misago/services/store\"\nimport title from \"misago/services/page-title\"\nimport PageContainer from \"../../PageContainer\"\nimport RankUsersList from \"./RankUsersList\"\nimport RankUsersListLoader from \"./RankUsersListLoader\"\nimport RankUsersToolbar from \"./RankUsersToolbar\"\nimport UsersNav from \"../UsersNav\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    if (misago.has(\"USERS\")) {\n      this.initWithPreloadedData(misago.pop(\"USERS\"))\n    } else {\n      this.initWithoutPreloadedData()\n    }\n\n    this.startPolling(props.params.page || 1)\n  }\n\n  initWithPreloadedData(data) {\n    this.state = Object.assign(data, {\n      isLoaded: true,\n    })\n    store.dispatch(hydrate(data.results))\n  }\n\n  initWithoutPreloadedData() {\n    this.state = {\n      isLoaded: false,\n    }\n  }\n\n  startPolling(page) {\n    polls.start({\n      poll: \"rank-users\",\n      url: misago.get(\"USERS_API\"),\n      data: {\n        rank: this.props.route.rank.id,\n        page: page,\n      },\n      frequency: 90 * 1000,\n      update: this.update,\n    })\n  }\n\n  update = (data) => {\n    store.dispatch(hydrate(data.results))\n\n    data.isLoaded = true\n    this.setState(data)\n  }\n\n  componentDidMount() {\n    title.set({\n      title: this.props.route.rank.name,\n      page: this.props.params.page || null,\n      parent: gettext(\"Users\"),\n    })\n  }\n\n  componentWillUnmount() {\n    polls.stop(\"rank-users\")\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.params.page !== nextProps.params.page) {\n      title.set({\n        title: this.props.route.rank.name,\n        page: nextProps.params.page || null,\n        parent: gettext(\"Users\"),\n      })\n\n      this.setState({\n        isLoaded: false,\n      })\n\n      polls.stop(\"rank-users\")\n      this.startPolling(nextProps.params.page)\n    }\n  }\n\n  getClassName() {\n    if (this.props.route.rank.css_class) {\n      return \"rank-users-list rank-users-\" + this.props.route.rank.css_class\n    } else {\n      return \"rank-users-list\"\n    }\n  }\n\n  getRankDescription() {\n    if (this.props.route.rank.description) {\n      return (\n        <div className=\"rank-description\">\n          <PageLead copy={this.props.route.rank.description.html} />\n        </div>\n      )\n    } else {\n      return null\n    }\n  }\n\n  getComponent() {\n    if (this.state.isLoaded) {\n      if (this.state.count > 0) {\n        return <RankUsersList users={this.props.users} />\n      } else {\n        return (\n          <p className=\"lead\">\n            {gettext(\"There are no users with this rank at the moment.\")}\n          </p>\n        )\n      }\n    } else {\n      return <RankUsersListLoader />\n    }\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()}>\n        <PageContainer>\n          <UsersNav\n            baseUrl={misago.get(\"USERS_LIST_URL\")}\n            page={{ name: this.props.route.rank.name }}\n            pages={misago.get(\"USERS_LISTS\")}\n          />\n          {this.getRankDescription()}\n          {this.getComponent()}\n          <RankUsersToolbar\n            baseUrl={\n              misago.get(\"USERS_LIST_URL\") + this.props.route.rank.slug + \"/\"\n            }\n            users={this.state}\n          />\n        </PageContainer>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport { connect } from \"react-redux\"\nimport ActivePosters from \"misago/components/users/active-posters/root\"\nimport Rank from \"misago/components/users/rank/root\"\nimport WithDropdown from \"misago/components/with-dropdown\"\nimport misago from \"misago/index\"\nimport {\n  PageHeader,\n  PageHeaderBanner,\n  PageHeaderContainer,\n} from \"../PageHeader\"\n\nexport default class extends WithDropdown {\n  render() {\n    return (\n      <div className=\"page page-users-lists\">\n        <PageHeaderContainer>\n          <PageHeader styleName=\"users-lists\">\n            <PageHeaderBanner styleName=\"users-lists\">\n              <h1>{gettext(\"Users\")}</h1>\n            </PageHeaderBanner>\n          </PageHeader>\n        </PageHeaderContainer>\n        {this.props.children}\n      </div>\n    )\n  }\n}\n\nexport function select(store) {\n  return {\n    tick: store.tick.tick,\n    user: store.auth.user,\n    users: store.users,\n  }\n}\n\nexport function paths() {\n  let paths = []\n\n  misago.get(\"USERS_LISTS\").forEach(function (item) {\n    if (item.component === \"rank\") {\n      paths.push({\n        path: misago.get(\"USERS_LIST_URL\") + item.slug + \"/:page/\",\n        component: connect(select)(Rank),\n        rank: item,\n      })\n      paths.push({\n        path: misago.get(\"USERS_LIST_URL\") + item.slug + \"/\",\n        component: connect(select)(Rank),\n        rank: item,\n      })\n    } else if (item.component === \"active-posters\") {\n      paths.push({\n        path: misago.get(\"USERS_LIST_URL\") + item.component + \"/\",\n        component: connect(select)(ActivePosters),\n        extra: {\n          name: item.name,\n        },\n      })\n    }\n  })\n\n  return paths\n}\n","import Users, { paths } from \"misago/components/users/root\"\nimport misago from \"misago/index\"\nimport mount from \"misago/utils/routed-component\"\n\nexport default function initializer(context) {\n  if (context.has(\"USERS_LISTS\")) {\n    mount({\n      root: misago.get(\"USERS_LIST_URL\"),\n      component: Users,\n      paths: paths(),\n    })\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:users\",\n  initializer: initializer,\n  after: \"store\",\n})\n","import misago from \"misago/index\"\nimport include from \"misago/services/include\"\n\nexport default function initializer(context) {\n  include.init(context.get(\"STATIC_URL\"))\n}\n\nmisago.addInitializer({\n  name: \"include\",\n  initializer: initializer,\n})\n","import misago from \"misago/index\"\nimport storage from \"misago/services/local-storage\"\n\nexport default function initializer() {\n  storage.init(\"misago_\")\n}\n\nmisago.addInitializer({\n  name: \"local-storage\",\n  initializer: initializer,\n})\n","import misago from \"misago/index\"\nimport dropdown from \"misago/services/mobile-navbar-dropdown\"\n\nexport default function initializer() {\n  let element = document.getElementById(\"mobile-navbar-dropdown-mount\")\n  if (element) {\n    dropdown.init(element)\n  }\n}\n\nmisago.addInitializer({\n  name: \"dropdown\",\n  initializer: initializer,\n  before: \"store\",\n})\n","import misago from \"misago/index\"\nimport modal from \"misago/services/modal\"\n\nexport default function initializer() {\n  let element = document.getElementById(\"modal-mount\")\n  if (element) {\n    modal.init(element)\n  }\n}\n\nmisago.addInitializer({\n  name: \"modal\",\n  initializer: initializer,\n  before: \"store\",\n})\n","import moment from \"moment\"\nimport misago from \"misago/index\"\n\nexport default function initializer() {\n  moment.locale($(\"html\").attr(\"lang\"))\n}\n\nmisago.addInitializer({\n  name: \"moment\",\n  initializer: initializer,\n})\n","import misago from \"misago/index\"\nimport title from \"misago/services/page-title\"\n\nexport default function initializer(context) {\n  title.init(\n    context.get(\"SETTINGS\").forum_index_title,\n    context.get(\"SETTINGS\").forum_name\n  )\n}\n\nmisago.addInitializer({\n  name: \"page-title\",\n  initializer: initializer,\n})\n","import misago from \"misago/index\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport polls from \"misago/services/polls\"\n\nexport default function initializer() {\n  polls.init(ajax, snackbar)\n}\n\nmisago.addInitializer({\n  name: \"polls\",\n  initializer: initializer,\n})\n","import misago from \"misago/index\"\nimport ajax from \"misago/services/ajax\"\nimport posting from \"misago/services/posting\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default function initializer() {\n  posting.init(ajax, snackbar, document.getElementById(\"posting-mount\"))\n}\n\nmisago.addInitializer({\n  name: \"posting\",\n  initializer: initializer,\n})\n","import misago from \"misago/index\"\nimport reducer, { initialState } from \"misago/reducers/auth\"\nimport store from \"misago/services/store\"\n\nexport default function initializer(context) {\n  store.addReducer(\n    \"auth\",\n    reducer,\n    Object.assign(\n      {\n        isAuthenticated: context.get(\"isAuthenticated\"),\n        isAnonymous: !context.get(\"isAuthenticated\"),\n\n        user: context.get(\"user\"),\n      },\n      initialState\n    )\n  )\n}\n\nmisago.addInitializer({\n  name: \"reducer:auth\",\n  initializer: initializer,\n  before: \"store\",\n})\n","import misago from \"misago/index\"\nimport reducer from \"misago/reducers/participants\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  let initialState = null\n  if (misago.has(\"THREAD\")) {\n    initialState = misago.get(\"THREAD\").participants\n  }\n\n  store.addReducer(\"participants\", reducer, initialState || [])\n}\n\nmisago.addInitializer({\n  name: \"reducer:participants\",\n  initializer: initializer,\n  before: \"store\",\n})\n","import misago from \"misago/index\"\nimport reducer, { hydrate } from \"misago/reducers/poll\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  let initialState = null\n  if (misago.has(\"THREAD\") && misago.get(\"THREAD\").poll) {\n    initialState = hydrate(misago.get(\"THREAD\").poll)\n  } else {\n    initialState = {}\n  }\n\n  store.addReducer(\"poll\", reducer, initialState)\n}\n\nmisago.addInitializer({\n  name: \"reducer:poll\",\n  initializer: initializer,\n  before: \"store\",\n})\n","import misago from \"misago/index\"\nimport reducer, { hydrate } from \"misago/reducers/posts\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  let initialState = null\n  if (misago.has(\"POSTS\")) {\n    initialState = hydrate(misago.get(\"POSTS\"))\n  } else {\n    initialState = {\n      isLoaded: false,\n      isBusy: false,\n    }\n  }\n\n  store.addReducer(\"posts\", reducer, initialState)\n}\n\nmisago.addInitializer({\n  name: \"reducer:posts\",\n  initializer: initializer,\n  before: \"store\",\n})\n","import misago from \"misago/index\"\nimport reducer from \"misago/reducers/profile-details\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  let initialState = null\n  if (misago.has(\"PROFILE_DETAILS\")) {\n    initialState = misago.get(\"PROFILE_DETAILS\")\n  }\n\n  store.addReducer(\"profile-details\", reducer, initialState || {})\n}\n\nmisago.addInitializer({\n  name: \"reducer:profile-details\",\n  initializer: initializer,\n  before: \"store\",\n})\n","import misago from \"misago/index\"\nimport { hydrate } from \"misago/reducers/profile\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  if (misago.has(\"PROFILE\")) {\n    store.dispatch(hydrate(misago.get(\"PROFILE\")))\n  }\n}\n\nmisago.addInitializer({\n  name: \"reducer:profile-hydrate\",\n  initializer: initializer,\n  after: \"store\",\n})\n","import misago from \"misago/index\"\nimport reducer from \"misago/reducers/profile\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  store.addReducer(\"profile\", reducer, {})\n}\n\nmisago.addInitializer({\n  name: \"reducer:profile\",\n  initializer: initializer,\n  before: \"store\",\n})\n","import misago from \"misago\"\nimport reducer, { initialState } from \"misago/reducers/search\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  store.addReducer(\n    \"search\",\n    reducer,\n    Object.assign({}, initialState, {\n      providers: misago.get(\"SEARCH_PROVIDERS\") || [],\n      query: misago.get(\"SEARCH_QUERY\") || \"\",\n    })\n  )\n}\n\nmisago.addInitializer({\n  name: \"reducer:search\",\n  initializer: initializer,\n  before: \"store\",\n})\n","import misago from \"misago/index\"\nimport reducer from \"misago/reducers/selection\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  store.addReducer(\"selection\", reducer, [])\n}\n\nmisago.addInitializer({\n  name: \"reducer:selection\",\n  initializer: initializer,\n  before: \"store\",\n})\n","import misago from \"misago/index\"\nimport reducer, { initialState } from \"misago/reducers/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  store.addReducer(\"snackbar\", reducer, initialState)\n}\n\nmisago.addInitializer({\n  name: \"reducer:snackbar\",\n  initializer: initializer,\n  before: \"store\",\n})\n","import misago from \"misago/index\"\nimport reducer, { hydrate } from \"misago/reducers/thread\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  let initialState = null\n  if (misago.has(\"THREAD\")) {\n    initialState = hydrate(misago.get(\"THREAD\"))\n  } else {\n    initialState = {\n      isBusy: false,\n    }\n  }\n\n  store.addReducer(\"thread\", reducer, initialState)\n}\n\nmisago.addInitializer({\n  name: \"reducer:thread\",\n  initializer: initializer,\n  before: \"store\",\n})\n","import misago from \"misago/index\"\nimport reducer from \"misago/reducers/threads\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  store.addReducer(\"threads\", reducer, [])\n}\n\nmisago.addInitializer({\n  name: \"reducer:threads\",\n  initializer: initializer,\n  before: \"store\",\n})\n","import misago from \"misago/index\"\nimport reducer, { initialState } from \"misago/reducers/tick\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  store.addReducer(\"tick\", reducer, initialState)\n}\n\nmisago.addInitializer({\n  name: \"reducer:tick\",\n  initializer: initializer,\n  before: \"store\",\n})\n","import misago from \"misago/index\"\nimport reducer from \"misago/reducers/username-history\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  store.addReducer(\"username-history\", reducer, [])\n}\n\nmisago.addInitializer({\n  name: \"reducer:username-history\",\n  initializer: initializer,\n  before: \"store\",\n})\n","import misago from \"misago/index\"\nimport reducer from \"misago/reducers/users\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  store.addReducer(\"users\", reducer, [])\n}\n\nmisago.addInitializer({\n  name: \"reducer:users\",\n  initializer: initializer,\n  before: \"store\",\n})\n","import misago from \"misago/index\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  snackbar.init(store)\n}\n\nmisago.addInitializer({\n  name: \"snackbar\",\n  initializer: initializer,\n  after: \"store\",\n})\n","import misago from \"misago/index\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  store.init()\n}\n\nmisago.addInitializer({\n  name: \"store\",\n  initializer: initializer,\n  before: \"_end\",\n})\n","import misago from \"misago/index\"\nimport { doTick } from \"misago/reducers/tick\"\nimport store from \"misago/services/store\"\n\nconst TICK_PERIOD = 50 * 1000 //do the tick every 50s\n\nexport default function initializer() {\n  window.setInterval(function () {\n    store.dispatch(doTick())\n  }, TICK_PERIOD)\n}\n\nmisago.addInitializer({\n  name: \"tick-start\",\n  initializer: initializer,\n  after: \"store\",\n})\n","import misago from \"misago/index\"\nimport include from \"misago/services/include\"\nimport zxcvbn from \"misago/services/zxcvbn\"\n\nexport default function initializer() {\n  zxcvbn.init(include)\n}\n\nmisago.addInitializer({\n  name: \"zxcvbn\",\n  initializer: initializer,\n})\n","import { UPDATE_AVATAR, UPDATE_USERNAME } from \"misago/reducers/users\"\n\nexport var initialState = {\n  signedIn: false,\n  signedOut: false,\n}\n\nexport const PATCH_USER = \"PATCH_USER\"\nexport const SIGN_IN = \"SIGN_IN\"\nexport const SIGN_OUT = \"SIGN_OUT\"\n\nexport function patch(patch) {\n  return {\n    type: PATCH_USER,\n    patch,\n  }\n}\n\nexport function signIn(user) {\n  return {\n    type: SIGN_IN,\n    user,\n  }\n}\n\nexport function signOut(soft = false) {\n  return {\n    type: SIGN_OUT,\n    soft,\n  }\n}\n\nexport default function auth(state = initialState, action = null) {\n  switch (action.type) {\n    case PATCH_USER:\n      let newState = Object.assign({}, state)\n      newState.user = Object.assign({}, state.user, action.patch)\n      return newState\n\n    case SIGN_IN:\n      return Object.assign({}, state, {\n        signedIn: action.user,\n      })\n\n    case SIGN_OUT:\n      return Object.assign({}, state, {\n        isAuthenticated: false,\n        isAnonymous: true,\n        signedOut: !action.soft,\n      })\n\n    case UPDATE_AVATAR:\n      if (state.isAuthenticated && state.user.id === action.userId) {\n        let newState = Object.assign({}, state)\n        newState.user = Object.assign({}, state.user, {\n          avatars: action.avatars,\n        })\n        return newState\n      }\n      return state\n\n    case UPDATE_USERNAME:\n      if (state.isAuthenticated && state.user.id === action.userId) {\n        let newState = Object.assign({}, state)\n        newState.user = Object.assign({}, state.user, {\n          username: action.username,\n          slug: action.slug,\n        })\n        return newState\n      }\n      return state\n\n    default:\n      return state\n  }\n}\n","export const REPLACE_PARTICIPANTS = \"REPLACE_PARTICIPANTS\"\n\nexport function replace(newState) {\n  return {\n    type: REPLACE_PARTICIPANTS,\n    state: newState,\n  }\n}\n\nexport default function participants(state = [], action = null) {\n  switch (action.type) {\n    case REPLACE_PARTICIPANTS:\n      return action.state\n\n    default:\n      return state\n  }\n}\n","import moment from \"moment\"\n\nexport const BUSY_POLL = \"BUSY_POLL\"\nexport const RELEASE_POLL = \"RELEASE_POLL\"\nexport const REMOVE_POLL = \"REMOVE_POLL\"\nexport const REPLACE_POLL = \"REPLACE_POLL\"\nexport const UPDATE_POLL = \"UPDATE_POLL\"\n\nexport function hydrate(json) {\n  let hasSelectedChoices = false\n  for (const i in json.choices) {\n    const choice = json.choices[i]\n    if (choice.selected) {\n      hasSelectedChoices = true\n      break\n    }\n  }\n\n  return Object.assign({}, json, {\n    posted_on: moment(json.posted_on),\n\n    hasSelectedChoices,\n    endsOn: json.length\n      ? moment(json.posted_on).add(json.length, \"days\")\n      : null,\n\n    isBusy: false,\n  })\n}\n\nexport function busy() {\n  return {\n    type: BUSY_POLL,\n  }\n}\n\nexport function release() {\n  return {\n    type: RELEASE_POLL,\n  }\n}\n\nexport function replace(newState, hydrated = false) {\n  return {\n    type: REPLACE_POLL,\n    state: hydrated ? newState : hydrate(newState),\n  }\n}\n\nexport function update(data) {\n  return {\n    type: UPDATE_POLL,\n    data,\n  }\n}\n\nexport function remove() {\n  return {\n    type: REMOVE_POLL,\n  }\n}\n\nexport default function poll(state = {}, action = null) {\n  switch (action.type) {\n    case BUSY_POLL:\n      return Object.assign({}, state, { isBusy: true })\n\n    case RELEASE_POLL:\n      return Object.assign({}, state, { isBusy: false })\n\n    case REMOVE_POLL:\n      return {\n        isBusy: false,\n      }\n\n    case REPLACE_POLL:\n      return action.state\n\n    case UPDATE_POLL:\n      return Object.assign({}, state, action.data)\n\n    default:\n      return state\n  }\n}\n","import moment from \"moment\"\nimport { hydrateUser } from \"./users\"\n\nexport const PATCH_POST = \"PATCH_POST\"\n\nexport function hydrate(json) {\n  return Object.assign({}, json, {\n    posted_on: moment(json.posted_on),\n    updated_on: moment(json.updated_on),\n    hidden_on: moment(json.hidden_on),\n\n    attachments: json.attachments\n      ? json.attachments.map(hydrateAttachment)\n      : null,\n    poster: json.poster ? hydrateUser(json.poster) : null,\n\n    isSelected: false,\n    isBusy: false,\n    isDeleted: false,\n  })\n}\n\nexport function hydrateAttachment(json) {\n  return Object.assign({}, json, {\n    uploaded_on: moment(json.uploaded_on),\n  })\n}\n\nexport function patch(post, patch) {\n  return {\n    type: PATCH_POST,\n    post,\n    patch,\n  }\n}\n\nexport default function post(state = {}, action = null) {\n  switch (action.type) {\n    case PATCH_POST:\n      if (state.id == action.post.id) {\n        return Object.assign({}, state, action.patch)\n      }\n      return state\n\n    default:\n      return state\n  }\n}\n","import postReducer, {\n  PATCH_POST,\n  hydrate as hydratePost,\n} from \"misago/reducers/post\"\n\nexport const APPEND_POSTS = \"APPEND_POSTS\"\nexport const SELECT_POST = \"SELECT_POST\"\nexport const DESELECT_POST = \"DESELECT_POST\"\nexport const DESELECT_POSTS = \"DESELECT_POSTS\"\nexport const LOAD_POSTS = \"LOAD_POSTS\"\nexport const UNLOAD_POSTS = \"UNLOAD_POSTS\"\nexport const UPDATE_POSTS = \"UPDATE_POSTS\"\n\nexport function select(post) {\n  return {\n    type: SELECT_POST,\n    post,\n  }\n}\n\nexport function deselect(post) {\n  return {\n    type: DESELECT_POST,\n    post,\n  }\n}\n\nexport function deselectAll() {\n  return {\n    type: DESELECT_POSTS,\n  }\n}\n\nexport function hydrate(json) {\n  return Object.assign({}, json, {\n    results: json.results.map(hydratePost),\n    isLoaded: true,\n    isBusy: false,\n    isSelected: false,\n  })\n}\n\nexport function load(newState, hydrated = false) {\n  return {\n    type: LOAD_POSTS,\n    state: hydrated ? newState : hydrate(newState),\n  }\n}\n\nexport function append(newState, hydrated = false) {\n  return {\n    type: APPEND_POSTS,\n    state: hydrated ? newState : hydrate(newState),\n  }\n}\n\nexport function unload() {\n  return {\n    type: UNLOAD_POSTS,\n  }\n}\n\nexport function update(newState) {\n  return {\n    type: UPDATE_POSTS,\n    update: newState,\n  }\n}\n\nexport default function posts(state = {}, action = null) {\n  switch (action.type) {\n    case SELECT_POST:\n      const selectedPosts = state.results.map((post) => {\n        if (post.id == action.post.id) {\n          return Object.assign({}, post, {\n            isSelected: true,\n          })\n        } else {\n          return post\n        }\n      })\n\n      return Object.assign({}, state, {\n        results: selectedPosts,\n      })\n\n    case DESELECT_POST:\n      const deseletedPosts = state.results.map((post) => {\n        if (post.id == action.post.id) {\n          return Object.assign({}, post, {\n            isSelected: false,\n          })\n        } else {\n          return post\n        }\n      })\n\n      return Object.assign({}, state, {\n        results: deseletedPosts,\n      })\n\n    case DESELECT_POSTS:\n      const deseletedAllPosts = state.results.map((post) => {\n        return Object.assign({}, post, {\n          isSelected: false,\n        })\n      })\n\n      return Object.assign({}, state, {\n        results: deseletedAllPosts,\n      })\n\n    case APPEND_POSTS:\n      let results = state.results.slice()\n      const resultsIds = state.results.map((post) => {\n        return post.id\n      })\n\n      action.state.results.map((post) => {\n        if (resultsIds.indexOf(post.id) === -1) {\n          results.push(post)\n        }\n      })\n\n      return Object.assign({}, action.state, {\n        results,\n      })\n\n    case LOAD_POSTS:\n      return action.state\n\n    case UNLOAD_POSTS:\n      return Object.assign({}, state, {\n        isLoaded: false,\n      })\n\n    case UPDATE_POSTS:\n      return Object.assign({}, state, action.update)\n\n    case PATCH_POST:\n      const reducedPosts = state.results.map((post) => {\n        return postReducer(post, action)\n      })\n\n      return Object.assign({}, state, {\n        results: reducedPosts,\n      })\n\n    default:\n      return state\n  }\n}\n","export const LOAD_DETAILS = \"LOAD_DETAILS\"\n\nexport function load(newState) {\n  return {\n    type: LOAD_DETAILS,\n\n    newState,\n  }\n}\n\nexport default function details(state = {}, action = null) {\n  switch (action.type) {\n    case LOAD_DETAILS:\n      return action.newState\n\n    default:\n      return state\n  }\n}\n","import moment from \"moment\"\nimport {\n  UPDATE_AVATAR,\n  UPDATE_USERNAME,\n  hydrateStatus,\n} from \"misago/reducers/users\"\n\nexport const HYDRATE_PROFILE = \"HYDRATE_PROFILE\"\nexport const PATCH_PROFILE = \"PATCH_PROFILE\"\n\nexport function hydrate(profile) {\n  return {\n    type: HYDRATE_PROFILE,\n    profile,\n  }\n}\n\nexport function patch(patch) {\n  return {\n    type: PATCH_PROFILE,\n    patch,\n  }\n}\n\nexport default function auth(state = {}, action = null) {\n  switch (action.type) {\n    case HYDRATE_PROFILE:\n      return Object.assign({}, action.profile, {\n        joined_on: moment(action.profile.joined_on),\n        status: hydrateStatus(action.profile.status),\n      })\n\n    case PATCH_PROFILE:\n      return Object.assign({}, state, action.patch)\n\n    case UPDATE_AVATAR:\n      if (state.id === action.userId) {\n        return Object.assign({}, state, {\n          avatars: action.avatars,\n        })\n      }\n      return state\n\n    case UPDATE_USERNAME:\n      if (state.id === action.userId) {\n        return Object.assign({}, state, {\n          username: action.username,\n          slug: action.slug,\n        })\n      }\n      return state\n\n    default:\n      return state\n  }\n}\n","export const REPLACE_SEARCH = \"REPLACE_SEARCH\"\nexport const UPDATE_SEARCH = \"UPDATE_SEARCH\"\nexport const UPDATE_SEARCH_PROVIDER = \"UPDATE_SEARCH_PROVIDER\"\n\nexport const initialState = {\n  isLoading: false,\n  query: \"\",\n  providers: [],\n}\n\nexport function replace(newState) {\n  return {\n    type: REPLACE_SEARCH,\n    state: {\n      isLoading: false,\n      providers: newState,\n    },\n  }\n}\n\nexport function update(newState) {\n  return {\n    type: UPDATE_SEARCH,\n    update: newState,\n  }\n}\n\nexport function updateProvider(provider) {\n  return {\n    type: UPDATE_SEARCH_PROVIDER,\n    provider: provider,\n  }\n}\n\nexport default function participants(state = {}, action = null) {\n  switch (action.type) {\n    case REPLACE_SEARCH:\n      return action.state\n\n    case UPDATE_SEARCH:\n      return Object.assign({}, state, action.update)\n\n    case UPDATE_SEARCH_PROVIDER:\n      return Object.assign({}, state, {\n        providers: state.providers.map((provider) => {\n          if (provider.id === action.provider.id) {\n            return action.provider\n          } else {\n            return provider\n          }\n        }),\n      })\n\n    default:\n      return state\n  }\n}\n","import { toggle } from \"misago/utils/sets\"\n\nexport const SELECT_ALL = \"SELECT_ALL\"\nexport const SELECT_NONE = \"SELECT_NONE\"\nexport const SELECT_ITEM = \"SELECT_ITEM\"\n\nexport function all(itemsIds) {\n  return {\n    type: SELECT_ALL,\n    items: itemsIds,\n  }\n}\n\nexport function none() {\n  return {\n    type: SELECT_NONE,\n  }\n}\n\nexport function item(itemId) {\n  return {\n    type: SELECT_ITEM,\n    item: itemId,\n  }\n}\n\nexport default function selection(state = [], action = null) {\n  switch (action.type) {\n    case SELECT_ALL:\n      return action.items\n\n    case SELECT_NONE:\n      return []\n\n    case SELECT_ITEM:\n      return toggle(state, action.item)\n\n    default:\n      return state\n  }\n}\n","export var initialState = {\n  type: \"info\",\n  message: \"\",\n  isVisible: false,\n}\n\nexport const SHOW_SNACKBAR = \"SHOW_SNACKBAR\"\nexport const HIDE_SNACKBAR = \"HIDE_SNACKBAR\"\n\nexport function showSnackbar(message, type) {\n  return {\n    type: SHOW_SNACKBAR,\n    message,\n    messageType: type,\n  }\n}\n\nexport function hideSnackbar() {\n  return {\n    type: HIDE_SNACKBAR,\n  }\n}\n\nexport default function snackbar(state = initialState, action = null) {\n  if (action.type === SHOW_SNACKBAR) {\n    return {\n      type: action.messageType,\n      message: action.message,\n      isVisible: true,\n    }\n  } else if (action.type === HIDE_SNACKBAR) {\n    return Object.assign({}, state, {\n      isVisible: false,\n    })\n  } else {\n    return state\n  }\n}\n","import moment from \"moment\"\nimport { REMOVE_POLL, REPLACE_POLL } from \"./poll\"\n\nexport const BUSY_THREAD = \"BUSY_THREAD\"\nexport const RELEASE_THREAD = \"RELEASE_THREAD\"\nexport const REPLACE_THREAD = \"REPLACE_THREAD\"\nexport const UPDATE_THREAD = \"UPDATE_THREAD\"\nexport const UPDATE_THREAD_ACL = \"UPDATE_THREAD_ACL\"\n\nexport function hydrate(json) {\n  return Object.assign({}, json, {\n    started_on: moment(json.started_on),\n    last_post_on: moment(json.last_post_on),\n    best_answer_marked_on: json.best_answer_marked_on\n      ? moment(json.best_answer_marked_on)\n      : null,\n\n    isBusy: false,\n  })\n}\n\nexport function busy() {\n  return {\n    type: BUSY_THREAD,\n  }\n}\n\nexport function release() {\n  return {\n    type: RELEASE_THREAD,\n  }\n}\n\nexport function replace(newState, hydrated = false) {\n  return {\n    type: REPLACE_THREAD,\n    state: hydrated ? newState : hydrate(newState),\n  }\n}\n\nexport function update(data) {\n  return {\n    type: UPDATE_THREAD,\n    data,\n  }\n}\n\nexport function updateAcl(data) {\n  return {\n    type: UPDATE_THREAD_ACL,\n    data,\n  }\n}\n\nexport default function thread(state = {}, action = null) {\n  switch (action.type) {\n    case BUSY_THREAD:\n      return Object.assign({}, state, { isBusy: true })\n\n    case RELEASE_THREAD:\n      return Object.assign({}, state, { isBusy: false })\n\n    case REMOVE_POLL:\n      return Object.assign({}, state, { poll: null })\n\n    case REPLACE_POLL:\n      return Object.assign({}, state, { poll: action.state })\n\n    case REPLACE_THREAD:\n      return action.state\n\n    case UPDATE_THREAD:\n      return Object.assign({}, state, action.data)\n\n    case UPDATE_THREAD_ACL:\n      const acl = Object.assign({}, state.acl, action.data)\n      return Object.assign({}, state, { acl })\n\n    default:\n      return state\n  }\n}\n","import moment from \"moment\"\nimport concatUnique from \"misago/utils/concat-unique\"\n\nexport const APPEND_THREADS = \"APPEND_THREADS\"\nexport const DELETE_THREAD = \"DELETE_THREAD\"\nexport const FILTER_THREADS = \"FILTER_THREADS\"\nexport const HYDRATE_THREADS = \"HYDRATE_THREADS\"\nexport const PATCH_THREAD = \"PATCH_THREAD\"\nexport const SORT_THREADS = \"SORT_THREADS\"\n\nexport const MODERATION_PERMISSIONS = [\n  \"can_announce\",\n  \"can_approve\",\n  \"can_close\",\n  \"can_hide\",\n  \"can_move\",\n  \"can_merge\",\n  \"can_pin\",\n  \"can_review\",\n]\n\nexport function append(items, sorting) {\n  return {\n    type: APPEND_THREADS,\n    items,\n    sorting,\n  }\n}\n\nexport function deleteThread(thread) {\n  return {\n    type: DELETE_THREAD,\n    thread,\n  }\n}\n\nexport function filterThreads(category, categoriesMap) {\n  return {\n    type: FILTER_THREADS,\n    category,\n    categoriesMap,\n  }\n}\n\nexport function hydrate(items) {\n  return {\n    type: HYDRATE_THREADS,\n    items,\n  }\n}\n\nexport function patch(thread, patch, sorting = null) {\n  return {\n    type: PATCH_THREAD,\n    thread,\n    patch,\n    sorting,\n  }\n}\n\nexport function sort(sorting) {\n  return {\n    type: SORT_THREADS,\n    sorting,\n  }\n}\n\nexport function getThreadModerationOptions(thread_acl) {\n  let options = []\n  MODERATION_PERMISSIONS.forEach(function (perm) {\n    if (thread_acl[perm]) {\n      options.push(perm)\n    }\n  })\n  return options\n}\n\nexport function hydrateThread(thread) {\n  return Object.assign({}, thread, {\n    started_on: moment(thread.started_on),\n    last_post_on: moment(thread.last_post_on),\n    moderation: getThreadModerationOptions(thread.acl),\n  })\n}\n\nexport default function thread(state = [], action = null) {\n  switch (action.type) {\n    case APPEND_THREADS:\n      const mergedState = concatUnique(action.items.map(hydrateThread), state)\n      return mergedState.sort(action.sorting)\n\n    case DELETE_THREAD:\n      return state.filter(function (item) {\n        return item.id !== action.thread.id\n      })\n\n    case FILTER_THREADS:\n      return state.filter(function (item) {\n        const itemCategory = action.categoriesMap[item.category]\n        if (\n          itemCategory.lft >= action.category.lft &&\n          itemCategory.rght <= action.category.rght\n        ) {\n          // same or sub category\n          return true\n        } else if (item.weight == 2) {\n          // globally pinned\n          return true\n        } else {\n          // thread moved outside displayed scope, hide it\n          return false\n        }\n      })\n\n    case HYDRATE_THREADS:\n      return action.items.map(hydrateThread)\n\n    case PATCH_THREAD:\n      const patchedState = state.map(function (item) {\n        if (item.id === action.thread.id) {\n          return Object.assign({}, item, action.patch)\n        } else {\n          return item\n        }\n      })\n\n      if (action.sorting) {\n        return patchedState.sort(action.sorting)\n      }\n      return patchedState\n\n    case SORT_THREADS:\n      return state.sort(action.sorting)\n\n    default:\n      return state\n  }\n}\n","export var initialState = {\n  tick: 0,\n}\n\nexport const TICK = \"TICK\"\n\nexport function doTick() {\n  return {\n    type: TICK,\n  }\n}\n\nexport default function tick(state = initialState, action = null) {\n  if (action.type === TICK) {\n    return Object.assign({}, state, {\n      tick: state.tick + 1,\n    })\n  } else {\n    return state\n  }\n}\n","import moment from \"moment\"\nimport { UPDATE_AVATAR, UPDATE_USERNAME } from \"misago/reducers/users\"\nimport concatUnique from \"misago/utils/concat-unique\"\n\nexport const ADD_NAME_CHANGE = \"ADD_NAME_CHANGE\"\nexport const APPEND_HISTORY = \"APPEND_HISTORY\"\nexport const HYDRATE_HISTORY = \"HYDRATE_HISTORY\"\n\nexport function addNameChange(change, user, changedBy) {\n  return {\n    type: ADD_NAME_CHANGE,\n    change,\n    user,\n    changedBy,\n  }\n}\n\nexport function append(items) {\n  return {\n    type: APPEND_HISTORY,\n    items: items,\n  }\n}\n\nexport function hydrate(items) {\n  return {\n    type: HYDRATE_HISTORY,\n    items: items,\n  }\n}\n\nexport function hydrateNamechange(namechange) {\n  return Object.assign({}, namechange, {\n    changed_on: moment(namechange.changed_on),\n  })\n}\n\nexport default function username(state = [], action = null) {\n  switch (action.type) {\n    case ADD_NAME_CHANGE:\n      let newState = state.slice()\n      newState.unshift({\n        id: Math.floor(Date.now() / 1000), // just small hax for getting id\n        changed_by: action.changedBy,\n        changed_by_username: action.changedBy.username,\n        changed_on: moment(),\n        new_username: action.change.username,\n        old_username: action.user.username,\n      })\n      return newState\n\n    case APPEND_HISTORY:\n      return concatUnique(state, action.items.map(hydrateNamechange))\n\n    case HYDRATE_HISTORY:\n      return action.items.map(hydrateNamechange)\n\n    case UPDATE_AVATAR:\n      return state.map(function (item) {\n        item = Object.assign({}, item)\n        if (item.changed_by && item.changed_by.id === action.userId) {\n          item.changed_by = Object.assign({}, item.changed_by, {\n            avatars: action.avatars,\n          })\n        }\n\n        return item\n      })\n\n    case UPDATE_USERNAME:\n      return state.map(function (item) {\n        item = Object.assign({}, item)\n        if (item.changed_by && item.changed_by.id === action.userId) {\n          item.changed_by = Object.assign({}, item.changed_by, {\n            username: action.username,\n            slug: action.slug,\n          })\n        }\n\n        return Object.assign({}, item)\n      })\n\n    default:\n      return state\n  }\n}\n","import moment from \"moment\"\nimport concatUnique from \"misago/utils/concat-unique\"\n\nexport const APPEND_USERS = \"APPEND_USERS\"\nexport const HYDRATE_USERS = \"HYDRATE_USERS\"\nexport const UPDATE_AVATAR = \"UPDATE_AVATAR\"\nexport const UPDATE_USERNAME = \"UPDATE_USERNAME\"\n\nexport function append(items) {\n  return {\n    type: APPEND_USERS,\n    items,\n  }\n}\n\nexport function hydrate(items) {\n  return {\n    type: HYDRATE_USERS,\n    items,\n  }\n}\n\nexport function hydrateStatus(status) {\n  if (status) {\n    return Object.assign({}, status, {\n      last_click: status.last_click ? moment(status.last_click) : null,\n      banned_until: status.banned_until ? moment(status.banned_until) : null,\n    })\n  } else {\n    return null\n  }\n}\n\nexport function hydrateUser(user) {\n  return Object.assign({}, user, {\n    joined_on: moment(user.joined_on),\n    status: hydrateStatus(user.status),\n  })\n}\n\nexport function updateAvatar(user, avatars) {\n  return {\n    type: UPDATE_AVATAR,\n    userId: user.id,\n    avatars,\n  }\n}\n\nexport function updateUsername(user, username, slug) {\n  return {\n    type: UPDATE_USERNAME,\n    userId: user.id,\n    username,\n    slug,\n  }\n}\n\nexport default function user(state = [], action = null) {\n  switch (action.type) {\n    case APPEND_USERS:\n      return concatUnique(state, action.items.map(hydrateUser))\n\n    case HYDRATE_USERS:\n      return action.items.map(hydrateUser)\n\n    case UPDATE_AVATAR:\n      return state.map(function (item) {\n        item = Object.assign({}, item)\n        if (item.id === action.userId) {\n          item.avatars = action.avatars\n        }\n\n        return item\n      })\n\n    default:\n      return state\n  }\n}\n","export class Ajax {\n  constructor() {\n    this._cookieName = null\n    this._csrfToken = null\n    this._locks = {}\n  }\n\n  init(cookieName) {\n    this._cookieName = cookieName\n  }\n\n  getCsrfToken() {\n    if (document.cookie.indexOf(this._cookieName) !== -1) {\n      let cookieRegex = new RegExp(this._cookieName + \"=([^;]*)\")\n      let cookie = document.cookie.match(cookieRegex)[0]\n      return cookie ? cookie.split(\"=\")[1] : null\n    } else {\n      return null\n    }\n  }\n\n  request(method, url, data) {\n    let self = this\n    return new Promise(function (resolve, reject) {\n      let xhr = {\n        url: url,\n        method: method,\n        headers: {\n          \"X-CSRFToken\": self.getCsrfToken(),\n        },\n\n        data: data ? JSON.stringify(data) : null,\n        contentType: \"application/json; charset=utf-8\",\n        dataType: \"json\",\n\n        success: function (data) {\n          resolve(data)\n        },\n\n        error: function (jqXHR) {\n          let rejection = jqXHR.responseJSON || {}\n\n          rejection.status = jqXHR.status\n\n          if (rejection.status === 0) {\n            rejection.detail = gettext(\"Lost connection with application.\")\n          }\n\n          if (rejection.status === 404) {\n            if (!rejection.detail || rejection.detail === \"NOT FOUND\") {\n              rejection.detail = gettext(\"Action link is invalid.\")\n            }\n          }\n\n          if (rejection.status === 500 && !rejection.detail) {\n            rejection.detail = gettext(\"Unknown error has occured.\")\n          }\n\n          rejection.statusText = jqXHR.statusText\n\n          reject(rejection)\n        },\n      }\n\n      $.ajax(xhr)\n    })\n  }\n\n  get(url, params, lock) {\n    if (params) {\n      url += \"?\" + $.param(params)\n    }\n\n    if (lock) {\n      let self = this\n\n      // update url in existing lock?\n      if (this._locks[lock]) {\n        this._locks[lock].url = url\n      }\n\n      // immediately dereference promise handlers without doing anything\n      // we are already waiting for existing response to resolve\n      if (this._locks[lock] && this._locks[lock].waiter) {\n        return {\n          then: function () {\n            return\n          },\n        }\n\n        // return promise that will begin when original one resolves\n      } else if (this._locks[lock] && this._locks[lock].wait) {\n        this._locks[lock].waiter = true\n\n        return new Promise(function (resolve, reject) {\n          let wait = function (url) {\n            // keep waiting on promise\n            if (self._locks[lock].wait) {\n              window.setTimeout(function () {\n                wait(url)\n              }, 300)\n\n              // poll for new url\n            } else if (self._locks[lock].url !== url) {\n              wait(self._locks[lock].url)\n\n              // ajax backend for response\n            } else {\n              self._locks[lock].waiter = false\n              self.request(\"GET\", self._locks[lock].url).then(\n                function (data) {\n                  if (self._locks[lock].url === url) {\n                    resolve(data)\n                  } else {\n                    self._locks[lock].waiter = true\n                    wait(self._locks[lock].url)\n                  }\n                },\n                function (rejection) {\n                  if (self._locks[lock].url === url) {\n                    reject(rejection)\n                  } else {\n                    self._locks[lock].waiter = true\n                    wait(self._locks[lock].url)\n                  }\n                }\n              )\n            }\n          }\n\n          window.setTimeout(function () {\n            wait(url)\n          }, 300)\n        })\n\n        // setup new lock without waiter\n      } else {\n        this._locks[lock] = {\n          url,\n          wait: true,\n          waiter: false,\n        }\n\n        return new Promise(function (resolve, reject) {\n          self.request(\"GET\", url).then(\n            function (data) {\n              self._locks[lock].wait = false\n              if (self._locks[lock].url === url) {\n                resolve(data)\n              }\n            },\n            function (rejection) {\n              self._locks[lock].wait = false\n              if (self._locks[lock].url === url) {\n                reject(rejection)\n              }\n            }\n          )\n        })\n      }\n    } else {\n      return this.request(\"GET\", url)\n    }\n  }\n\n  post(url, data) {\n    return this.request(\"POST\", url, data)\n  }\n\n  patch(url, data) {\n    return this.request(\"PATCH\", url, data)\n  }\n\n  put(url, data) {\n    return this.request(\"PUT\", url, data)\n  }\n\n  delete(url, data) {\n    return this.request(\"DELETE\", url, data)\n  }\n\n  upload(url, data, progress) {\n    let self = this\n    return new Promise(function (resolve, reject) {\n      let xhr = {\n        url: url,\n        method: \"POST\",\n        headers: {\n          \"X-CSRFToken\": self.getCsrfToken(),\n        },\n\n        data: data,\n        contentType: false,\n        processData: false,\n\n        xhr: function () {\n          let xhr = new window.XMLHttpRequest()\n          xhr.upload.addEventListener(\n            \"progress\",\n            function (evt) {\n              if (evt.lengthComputable) {\n                progress(Math.round((evt.loaded / evt.total) * 100))\n              }\n            },\n            false\n          )\n          return xhr\n        },\n\n        success: function (response) {\n          resolve(response)\n        },\n\n        error: function (jqXHR) {\n          let rejection = jqXHR.responseJSON || {}\n\n          rejection.status = jqXHR.status\n\n          if (rejection.status === 0) {\n            rejection.detail = gettext(\"Lost connection with application.\")\n          }\n\n          if (rejection.status === 413 && !rejection.detail) {\n            rejection.detail = gettext(\n              \"Upload was rejected by server as too large.\"\n            )\n          }\n\n          if (rejection.status === 404) {\n            if (!rejection.detail || rejection.detail === \"NOT FOUND\") {\n              rejection.detail = gettext(\"Action link is invalid.\")\n            }\n          }\n\n          if (rejection.status === 500 && !rejection.detail) {\n            rejection.detail = gettext(\"Unknown error has occured.\")\n          }\n\n          rejection.statusText = jqXHR.statusText\n\n          reject(rejection)\n        },\n      }\n\n      $.ajax(xhr)\n    })\n  }\n}\n\nexport default new Ajax()\n","import { signIn, signOut } from \"misago/reducers/auth\"\n\nexport class Auth {\n  init(store, local, modal) {\n    this._store = store\n    this._local = local\n    this._modal = modal\n\n    // tell other tabs what auth state is because we are most current with it\n    this.syncSession()\n\n    // listen for other tabs to tell us that state changed\n    this.watchState()\n  }\n\n  syncSession() {\n    const state = this._store.getState().auth\n    if (state.isAuthenticated) {\n      this._local.set(\"auth\", {\n        isAuthenticated: true,\n        username: state.user.username,\n      })\n    } else {\n      this._local.set(\"auth\", {\n        isAuthenticated: false,\n      })\n    }\n  }\n\n  watchState() {\n    const state = this._store.getState().auth\n    this._local.watch(\"auth\", (newState) => {\n      if (newState.isAuthenticated) {\n        this._store.dispatch(\n          signIn({\n            username: newState.username,\n          })\n        )\n      } else if (state.isAuthenticated) {\n        // check if we are authenticated in this tab\n        // because some browser plugins prune local store\n        // aggressively, forcing erroneous message to display here\n        // tracking bug #955\n        this._store.dispatch(signOut())\n      }\n    })\n    this._modal.hide()\n  }\n\n  signIn(user) {\n    this._store.dispatch(signIn(user))\n    this._local.set(\"auth\", {\n      isAuthenticated: true,\n      username: user.username,\n    })\n    this._modal.hide()\n  }\n\n  signOut() {\n    this._store.dispatch(signOut())\n    this._local.set(\"auth\", {\n      isAuthenticated: false,\n    })\n    this._modal.hide()\n  }\n\n  softSignOut() {\n    this._store.dispatch(signOut(true))\n    this._local.set(\"auth\", {\n      isAuthenticated: false,\n    })\n    this._modal.hide()\n  }\n}\n\nexport default new Auth()\n","/* global grecaptcha */\nimport React from \"react\"\nimport FormGroup from \"misago/components/form-group\"\n\nexport class BaseCaptcha {\n  init(context, ajax, include, snackbar) {\n    this._context = context\n    this._ajax = ajax\n    this._include = include\n    this._snackbar = snackbar\n  }\n}\n\nexport class NoCaptcha extends BaseCaptcha {\n  load() {\n    return new Promise(function (resolve) {\n      // immediately resolve as we don't have anything to validate\n      resolve()\n    })\n  }\n\n  validator() {\n    return null\n  }\n\n  component() {\n    return null\n  }\n}\n\nexport class QACaptcha extends BaseCaptcha {\n  load() {\n    var self = this\n    return new Promise((resolve, reject) => {\n      self._ajax.get(self._context.get(\"CAPTCHA_API\")).then(\n        function (data) {\n          self.question = data.question\n          self.helpText = data.help_text\n          resolve()\n        },\n        function () {\n          self._snackbar.error(gettext(\"Failed to load CAPTCHA.\"))\n          reject()\n        }\n      )\n    })\n  }\n\n  validator() {\n    return []\n  }\n\n  component(kwargs) {\n    return (\n      <FormGroup\n        label={this.question}\n        for=\"id_captcha\"\n        labelClass={kwargs.labelClass || \"\"}\n        controlClass={kwargs.controlClass || \"\"}\n        validation={kwargs.form.state.errors.captcha}\n        helpText={this.helpText || null}\n      >\n        <input\n          aria-describedby=\"id_captcha_status\"\n          className=\"form-control\"\n          disabled={kwargs.form.state.isLoading}\n          id=\"id_captcha\"\n          onChange={kwargs.form.bindInput(\"captcha\")}\n          type=\"text\"\n          value={kwargs.form.state.captcha}\n        />\n      </FormGroup>\n    )\n  }\n}\n\nexport class ReCaptchaComponent extends React.Component {\n  componentDidMount() {\n    grecaptcha.render(\"recaptcha\", {\n      sitekey: this.props.siteKey,\n      callback: (response) => {\n        // fire fakey event to binding\n        this.props.binding({\n          target: {\n            value: response,\n          },\n        })\n      },\n    })\n  }\n\n  render() {\n    return <div id=\"recaptcha\" />\n  }\n}\n\nexport class ReCaptcha extends BaseCaptcha {\n  load() {\n    this._include.include(\"https://www.google.com/recaptcha/api.js\", true)\n\n    return new Promise(function (resolve) {\n      var wait = function () {\n        if (typeof grecaptcha === \"undefined\") {\n          window.setTimeout(function () {\n            wait()\n          }, 200)\n        } else {\n          resolve()\n        }\n      }\n      wait()\n    })\n  }\n\n  validator() {\n    return []\n  }\n\n  component(kwargs) {\n    return (\n      <FormGroup\n        label={gettext(\"Please solve the quick test\")}\n        for=\"id_captcha\"\n        labelClass={kwargs.labelClass || \"\"}\n        controlClass={kwargs.controlClass || \"\"}\n        validation={kwargs.form.state.errors.captcha}\n        helpText={gettext(\n          \"This test helps us prevent automated spam registrations on our site.\"\n        )}\n      >\n        <ReCaptchaComponent\n          binding={kwargs.form.bindInput(\"captcha\")}\n          siteKey={this._context.get(\"SETTINGS\").recaptcha_site_key}\n        />\n      </FormGroup>\n    )\n  }\n}\n\nexport class Captcha {\n  init(context, ajax, include, snackbar) {\n    switch (context.get(\"SETTINGS\").captcha_type) {\n      case \"no\":\n        this._captcha = new NoCaptcha()\n        break\n\n      case \"qa\":\n        this._captcha = new QACaptcha()\n        break\n\n      case \"re\":\n        this._captcha = new ReCaptcha()\n        break\n    }\n\n    this._captcha.init(context, ajax, include, snackbar)\n  }\n\n  // accessors for underlying strategy\n\n  load() {\n    return this._captcha.load()\n  }\n\n  validator() {\n    return this._captcha.validator()\n  }\n\n  component(kwargs) {\n    return this._captcha.component(kwargs)\n  }\n}\n\nexport default new Captcha()\n","export class Include {\n  init(staticUrl) {\n    this._staticUrl = staticUrl\n    this._included = []\n  }\n\n  include(script, remote = false) {\n    if (this._included.indexOf(script) === -1) {\n      this._included.push(script)\n      this._include(script, remote)\n    }\n  }\n\n  _include(script, remote) {\n    $.ajax({\n      url: (!remote ? this._staticUrl : \"\") + script,\n      cache: true,\n      dataType: \"script\",\n    })\n  }\n}\n\nexport default new Include()\n","let storage = window.localStorage\n\nexport class LocalStorage {\n  init(prefix) {\n    this._prefix = prefix\n    this._watchers = []\n\n    window.addEventListener(\"storage\", (e) => {\n      let newValueJson = JSON.parse(e.newValue)\n      this._watchers.forEach(function (watcher) {\n        if (watcher.key === e.key && e.oldValue !== e.newValue) {\n          watcher.callback(newValueJson)\n        }\n      })\n    })\n  }\n\n  set(key, value) {\n    storage.setItem(this._prefix + key, JSON.stringify(value))\n  }\n\n  get(key) {\n    let itemString = storage.getItem(this._prefix + key)\n    if (itemString) {\n      return JSON.parse(itemString)\n    } else {\n      return null\n    }\n  }\n\n  watch(key, callback) {\n    this._watchers.push({\n      key: this._prefix + key,\n      callback: callback,\n    })\n  }\n}\n\nexport default new LocalStorage()\n","import mount from \"misago/utils/mount-component\"\n\nexport class MobileNavbarDropdown {\n  init(element) {\n    this._element = element\n    this._component = null\n  }\n\n  show(component) {\n    if (this._component === component) {\n      this.hide()\n    } else {\n      this._component = component\n      mount(component, this._element.id)\n      $(this._element).addClass(\"open\")\n    }\n  }\n\n  showConnected(name, component) {\n    if (this._component === name) {\n      this.hide()\n    } else {\n      this._component = name\n      mount(component, this._element.id, true)\n      $(this._element).addClass(\"open\")\n    }\n  }\n\n  hide() {\n    $(this._element).removeClass(\"open\")\n    this._component = null\n  }\n}\n\nexport default new MobileNavbarDropdown()\n","import ReactDOM from \"react-dom\"\nimport mount from \"misago/utils/mount-component\"\n\nexport class Modal {\n  init(element) {\n    this._element = element\n\n    this._modal = $(element).modal({ show: false })\n\n    this._modal.on(\"hidden.bs.modal\", () => {\n      ReactDOM.unmountComponentAtNode(this._element)\n    })\n  }\n\n  show(component) {\n    mount(component, this._element.id)\n    this._modal.modal(\"show\")\n  }\n\n  hide() {\n    this._modal.modal(\"hide\")\n  }\n}\n\nexport default new Modal()\n","export class PageTitle {\n  init(indexTitle, forumName) {\n    this._indexTitle = indexTitle\n    this._forumName = forumName\n  }\n\n  set(title) {\n    if (!title) {\n      document.title = this._indexTitle || this._forumName\n      return\n    }\n\n    if (typeof title === \"string\") {\n      title = { title: title }\n    }\n\n    let finalTitle = title.title\n\n    if (title.page > 1) {\n      const pageLabel = interpolate(\n        gettext(\"page: %(page)s\"),\n        {\n          page: title.page,\n        },\n        true\n      )\n\n      finalTitle += \" (\" + pageLabel + \")\"\n    }\n\n    if (title.parent) {\n      finalTitle += \" | \" + title.parent\n    }\n\n    document.title = finalTitle + \" | \" + this._forumName\n  }\n}\n\nexport default new PageTitle()\n","export class Polls {\n  init(ajax, snackbar) {\n    this._ajax = ajax\n    this._snackbar = snackbar\n\n    this._polls = {}\n  }\n\n  start(kwargs) {\n    this.stop(kwargs.poll)\n\n    const poolServer = () => {\n      this._polls[kwargs.poll] = kwargs\n\n      this._ajax.get(kwargs.url, kwargs.data || null).then(\n        (data) => {\n          if (!this._polls[kwargs.poll]._stopped) {\n            kwargs.update(data)\n\n            this._polls[kwargs.poll].timeout = window.setTimeout(\n              poolServer,\n              kwargs.frequency\n            )\n          }\n        },\n        (rejection) => {\n          if (!this._polls[kwargs.poll]._stopped) {\n            if (kwargs.error) {\n              kwargs.error(rejection)\n            } else {\n              this._snackbar.apiError(rejection)\n            }\n          }\n        }\n      )\n    }\n\n    if (kwargs.delayed) {\n      this._polls[kwargs.poll] = {\n        timeout: window.setTimeout(poolServer, kwargs.frequency),\n      }\n    } else {\n      poolServer()\n    }\n  }\n\n  stop(pollId) {\n    if (this._polls[pollId]) {\n      window.clearTimeout(this._polls[pollId].timeout)\n      this._polls[pollId]._stopped = true\n    }\n  }\n}\n\nexport default new Polls()\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport PostingComponent from \"misago/components/posting\"\nimport mount from \"misago/utils/mount-component\"\n\nexport class Posting {\n  init(ajax, snackbar, mount) {\n    this._ajax = ajax\n    this._snackbar = snackbar\n    this._mount = mount\n\n    this._mode = null\n    this._spacer = document.getElementById(\"posting-spacer\")\n    this._observer = new ResizeObserver((entries) => {\n      this._spacer.style.height = entries[0].contentRect.height + \"px\"\n    })\n\n    this._isOpen = false\n    this._isClosing = false\n  }\n\n  isOpen() {\n    return this._isOpen\n  }\n\n  open(props) {\n    if (this._isOpen === false) {\n      this._mode = props.mode\n      this._isOpen = props.submit\n      this._realOpen(props)\n    } else if (this._isOpen !== props.submit) {\n      let message = gettext(\n        \"You are already working on other message. Do you want to discard it?\"\n      )\n\n      const changeForm = window.confirm(message)\n      if (changeForm) {\n        this._mode = props.mode\n        this._isOpen = props.submit\n        this._realOpen(props)\n      }\n    } else if (this._mode == \"REPLY\" && props.mode == \"REPLY\") {\n      this._realOpen(props)\n    }\n  }\n\n  _realOpen(props) {\n    mount(<PostingComponent {...props} />, this._mount.id)\n\n    this._mount.classList.add(\"show\")\n    this._observer.observe(this._mount)\n  }\n\n  close = () => {\n    if (this._isOpen && !this._isClosing) {\n      this._isClosing = true\n      this._mount.classList.remove(\"show\")\n\n      window.setTimeout(() => {\n        ReactDOM.unmountComponentAtNode(this._mount)\n        this._observer.unobserve(this._mount)\n        this._spacer.style.height = \"0px;\"\n        this._isClosing = false\n        this._isOpen = false\n        this._mode = null\n      }, 300)\n    }\n  }\n}\n\nexport default new Posting()\n","import { showSnackbar, hideSnackbar } from \"misago/reducers/snackbar\"\n\nconst HIDE_ANIMATION_LENGTH = 300\nconst MESSAGE_SHOW_LENGTH = 5000\n\nexport class Snackbar {\n  init(store) {\n    this._store = store\n    this._timeout = null\n  }\n\n  alert(message, type) {\n    if (this._timeout) {\n      window.clearTimeout(this._timeout)\n      this._store.dispatch(hideSnackbar())\n\n      this._timeout = window.setTimeout(() => {\n        this._timeout = null\n        this.alert(message, type)\n      }, HIDE_ANIMATION_LENGTH)\n    } else {\n      this._store.dispatch(showSnackbar(message, type))\n      this._timeout = window.setTimeout(() => {\n        this._store.dispatch(hideSnackbar())\n        this._timeout = null\n      }, MESSAGE_SHOW_LENGTH)\n    }\n  }\n\n  // shorthands for message types\n\n  info(message) {\n    this.alert(message, \"info\")\n  }\n\n  success(message) {\n    this.alert(message, \"success\")\n  }\n\n  warning(message) {\n    this.alert(message, \"warning\")\n  }\n\n  error(message) {\n    this.alert(message, \"error\")\n  }\n\n  // shorthand for api errors\n\n  apiError(rejection) {\n    let message = rejection.detail\n\n    if (!message) {\n      if (rejection.status === 404) {\n        message = gettext(\"Action link is invalid.\")\n      } else {\n        message = gettext(\"Unknown error has occured.\")\n      }\n    }\n\n    if (rejection.status === 403 && message === \"Permission denied\") {\n      message = gettext(\"You don't have permission to perform this action.\")\n    }\n\n    this.error(message)\n  }\n}\n\nexport default new Snackbar()\n","import { combineReducers, createStore } from \"redux\"\n\nexport class StoreWrapper {\n  constructor() {\n    this._store = null\n    this._reducers = {}\n    this._initialState = {}\n  }\n\n  addReducer(name, reducer, initialState) {\n    this._reducers[name] = reducer\n    this._initialState[name] = initialState\n  }\n\n  init() {\n    this._store = createStore(\n      combineReducers(this._reducers),\n      this._initialState\n    )\n  }\n\n  getStore() {\n    return this._store\n  }\n\n  // Store API\n\n  getState() {\n    return this._store.getState()\n  }\n\n  dispatch(action) {\n    return this._store.dispatch(action)\n  }\n}\n\nexport default new StoreWrapper()\n","/* global zxcvbn */\nexport class Zxcvbn {\n  init(include) {\n    this._include = include\n    this._isLoaded = false\n  }\n\n  scorePassword(password, inputs) {\n    // 0-4 score, the more the stronger password\n    if (this._isLoaded) {\n      return zxcvbn(password, inputs).score\n    }\n\n    return 0\n  }\n\n  load() {\n    if (!this._isLoaded) {\n      this._include.include(\"misago/js/zxcvbn.js\")\n      return this._loadingPromise()\n    } else {\n      return this._loadedPromise()\n    }\n  }\n\n  _loadingPromise() {\n    const self = this\n\n    return new Promise(function (resolve, reject) {\n      var wait = function (tries = 0) {\n        tries += 1\n        if (tries > 200) {\n          reject()\n        } else if (typeof zxcvbn === \"undefined\") {\n          window.setTimeout(function () {\n            wait(tries)\n          }, 200)\n        } else {\n          self._isLoaded = true\n          resolve()\n        }\n      }\n      wait()\n    })\n  }\n\n  _loadedPromise() {\n    // we have already loaded zxcvbn.js, resolve away!\n    return new Promise(function (resolve) {\n      resolve()\n    })\n  }\n}\n\nexport default new Zxcvbn()\n","import moment from \"moment\"\nimport React from \"react\"\n\nexport default class extends React.Component {\n  getReasonMessage() {\n    if (this.props.message.html) {\n      return (\n        <div\n          className=\"lead\"\n          dangerouslySetInnerHTML={{\n            __html: this.props.message.html,\n          }}\n        />\n      )\n    } else {\n      return <p className=\"lead\">{this.props.message.plain}</p>\n    }\n  }\n\n  getExpirationMessage() {\n    if (this.props.expires) {\n      if (this.props.expires.isAfter(moment())) {\n        let title = interpolate(\n          gettext(\"This ban expires on %(expires_on)s.\"),\n          {\n            expires_on: this.props.expires.format(\"LL, LT\"),\n          },\n          true\n        )\n\n        let message = interpolate(\n          gettext(\"This ban expires %(expires_on)s.\"),\n          {\n            expires_on: this.props.expires.fromNow(),\n          },\n          true\n        )\n\n        return <abbr title={title}>{message}</abbr>\n      } else {\n        return gettext(\"This ban has expired.\")\n      }\n    } else {\n      return gettext(\"This ban is permanent.\")\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"page page-error page-error-banned\">\n        <div className=\"container\">\n          <div className=\"message-panel\">\n            <div className=\"message-icon\">\n              <span className=\"material-icon\">highlight_off</span>\n            </div>\n            <div className=\"message-body\">\n              {this.getReasonMessage()}\n              <p className=\"message-footnote\">{this.getExpirationMessage()}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n","import moment from \"moment\"\nimport React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { Provider, connect } from \"react-redux\"\nimport BannedPage from \"misago/components/banned-page\"\nimport misago from \"misago/index\"\nimport store from \"misago/services/store\"\n\nlet select = function (state) {\n  return state.tick\n}\n\nlet RedrawedBannedPage = connect(select)(BannedPage)\n\nexport default function (ban, changeState) {\n  ReactDOM.render(\n    <Provider store={store.getStore()}>\n      <RedrawedBannedPage\n        message={ban.message}\n        expires={ban.expires_on ? moment(ban.expires_on) : null}\n      />\n    </Provider>,\n\n    document.getElementById(\"page-mount\")\n  )\n\n  if (typeof changeState === \"undefined\" || changeState) {\n    let forumName = misago.get(\"SETTINGS\").forum_name\n    document.title = gettext(\"You are banned\") + \" | \" + forumName\n    window.history.pushState({}, \"\", misago.get(\"BANNED_URL\"))\n  }\n}\n","export default function (list, rowWidth, padding = false) {\n  let rows = []\n  let row = []\n\n  list.forEach(function (element) {\n    row.push(element)\n    if (row.length === rowWidth) {\n      rows.push(row)\n      row = []\n    }\n  })\n\n  // pad row to required length?\n  if (padding !== false && row.length > 0 && row.length < rowWidth) {\n    for (let i = row.length; i < rowWidth; i++) {\n      row.push(padding)\n    }\n  }\n\n  if (row.length) {\n    rows.push(row)\n  }\n\n  return rows\n}\n","export default function (a, b) {\n  let ids = []\n  return a.concat(b).filter(function (item) {\n    if (ids.indexOf(item.id) === -1) {\n      ids.push(item.id)\n      return true\n    } else {\n      return false\n    }\n  })\n}\n","const map = {\n  \"&\": \"&amp;\",\n  \"<\": \"&lt;\",\n  \">\": \"&gt;\",\n  '\"': \"&quot;\",\n  \"'\": \"&#039;\",\n}\n\nexport default function (text) {\n  return text.replace(/[&<>\"']/g, function (m) {\n    return map[m]\n  })\n}\n","export default function (bytes) {\n  if (bytes > 1024 * 1024 * 1024) {\n    return roundSize(bytes / (1024 * 1024 * 1024)) + \" GB\"\n  } else if (bytes > 1024 * 1024) {\n    return roundSize(bytes / (1024 * 1024)) + \" MB\"\n  } else if (bytes > 1024) {\n    return roundSize(bytes / 1024) + \" KB\"\n  } else {\n    return roundSize(bytes) + \" B\"\n  }\n}\n\nexport function roundSize(value) {\n  return value.toFixed(1)\n}\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { Provider } from \"react-redux\"\nimport store from \"misago/services/store\"\n\nexport default function (Component, rootElementId, connected = true) {\n  let rootElement = document.getElementById(rootElementId)\n\n  let finalComponent = Component.props ? Component : <Component />\n\n  if (rootElement) {\n    if (connected) {\n      ReactDOM.render(\n        <Provider store={store.getStore()}>{finalComponent}</Provider>,\n\n        rootElement\n      )\n    } else {\n      ReactDOM.render(finalComponent, rootElement)\n    }\n  }\n}\n","export function int(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min\n}\n\nexport function range(min, max) {\n  let array = new Array(int(min, max))\n  for (let i = 0; i < array.length; i++) {\n    array[i] = i\n  }\n\n  return array\n}\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { Provider } from \"react-redux\"\nimport { Router, browserHistory } from \"react-router\"\nimport store from \"misago/services/store\"\n\nconst rootElement = document.getElementById(\"page-mount\")\n\nexport default function (options) {\n  let routes = {\n    component: options.component || null,\n    childRoutes: [],\n  }\n\n  if (options.root) {\n    routes.childRoutes = [\n      {\n        path: options.root,\n        onEnter: function (nextState, replaceState) {\n          replaceState(null, options.paths[0].path)\n        },\n      },\n    ].concat(options.paths)\n  } else {\n    routes.childRoutes = options.paths\n  }\n\n  ReactDOM.render(\n    <Provider store={store.getStore()}>\n      <Router routes={routes} history={browserHistory} />\n    </Provider>,\n    rootElement\n  )\n}\n","export function push(array, value) {\n  if (array.indexOf(value) === -1) {\n    let copy = array.slice()\n    copy.push(value)\n    return copy\n  } else {\n    return array\n  }\n}\n\nexport function remove(array, value) {\n  if (array.indexOf(value) >= 0) {\n    return array.filter(function (i) {\n      return i !== value\n    })\n  } else {\n    return array\n  }\n}\n\nexport function toggle(array, value) {\n  if (array.indexOf(value) === -1) {\n    let copy = array.slice()\n    copy.push(value)\n    return copy\n  } else {\n    return array.filter(function (i) {\n      return i !== value\n    })\n  }\n}\n","const EMAIL =\n  /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i\nconst USERNAME = new RegExp(\"^[0-9a-z]+$\", \"i\")\n\nexport function required(message) {\n  return function (value) {\n    if (value === false || value === null || $.trim(value).length === 0) {\n      return message || gettext(\"This field is required.\")\n    }\n  }\n}\n\nexport function requiredTermsOfService(message) {\n  const error = gettext(\"You have to accept the terms of service.\")\n  return required(message || error)\n}\n\nexport function requiredPrivacyPolicy(message) {\n  const error = gettext(\"You have to accept the privacy policy.\")\n  return required(message || error)\n}\n\nexport function email(message) {\n  return function (value) {\n    if (!EMAIL.test(value)) {\n      return message || gettext(\"Enter a valid email address.\")\n    }\n  }\n}\n\nexport function minLength(limitValue, message) {\n  return function (value) {\n    var returnMessage = \"\"\n    var length = $.trim(value).length\n\n    if (length < limitValue) {\n      if (message) {\n        returnMessage = message(limitValue, length)\n      } else {\n        returnMessage = ngettext(\n          \"Ensure this value has at least %(limit_value)s character (it has %(show_value)s).\",\n          \"Ensure this value has at least %(limit_value)s characters (it has %(show_value)s).\",\n          limitValue\n        )\n      }\n      return interpolate(\n        returnMessage,\n        {\n          limit_value: limitValue,\n          show_value: length,\n        },\n        true\n      )\n    }\n  }\n}\n\nexport function maxLength(limitValue, message) {\n  return function (value) {\n    var returnMessage = \"\"\n    var length = $.trim(value).length\n\n    if (length > limitValue) {\n      if (message) {\n        returnMessage = message(limitValue, length)\n      } else {\n        returnMessage = ngettext(\n          \"Ensure this value has at most %(limit_value)s character (it has %(show_value)s).\",\n          \"Ensure this value has at most %(limit_value)s characters (it has %(show_value)s).\",\n          limitValue\n        )\n      }\n      return interpolate(\n        returnMessage,\n        {\n          limit_value: limitValue,\n          show_value: length,\n        },\n        true\n      )\n    }\n  }\n}\n\nexport function usernameMinLength(lengthMin) {\n  var message = function (lengthMin) {\n    return ngettext(\n      \"Username must be at least %(limit_value)s character long.\",\n      \"Username must be at least %(limit_value)s characters long.\",\n      lengthMin\n    )\n  }\n  return minLength(lengthMin, message)\n}\n\nexport function usernameMaxLength(lengthMax) {\n  var message = function (lengthMax) {\n    return ngettext(\n      \"Username cannot be longer than %(limit_value)s character.\",\n      \"Username cannot be longer than %(limit_value)s characters.\",\n      lengthMax\n    )\n  }\n  return maxLength(lengthMax, message)\n}\n\nexport function usernameContent() {\n  return function (value) {\n    if (!USERNAME.test($.trim(value))) {\n      return gettext(\n        \"Username can only contain latin alphabet letters and digits.\"\n      )\n    }\n  }\n}\n\nexport function passwordMinLength(limitValue) {\n  return function (value) {\n    const length = value.length\n\n    if (length < limitValue) {\n      const returnMessage = ngettext(\n        \"Valid password must be at least %(limit_value)s character long.\",\n        \"Valid password must be at least %(limit_value)s characters long.\",\n        limitValue\n      )\n\n      return interpolate(\n        returnMessage,\n        {\n          limit_value: limitValue,\n          show_value: length,\n        },\n        true\n      )\n    }\n  }\n}\n","var map = {\n\t\"./af\": 42786,\n\t\"./af.js\": 42786,\n\t\"./ar\": 30867,\n\t\"./ar-dz\": 14130,\n\t\"./ar-dz.js\": 14130,\n\t\"./ar-kw\": 96135,\n\t\"./ar-kw.js\": 96135,\n\t\"./ar-ly\": 56440,\n\t\"./ar-ly.js\": 56440,\n\t\"./ar-ma\": 47702,\n\t\"./ar-ma.js\": 47702,\n\t\"./ar-sa\": 16040,\n\t\"./ar-sa.js\": 16040,\n\t\"./ar-tn\": 37100,\n\t\"./ar-tn.js\": 37100,\n\t\"./ar.js\": 30867,\n\t\"./az\": 31083,\n\t\"./az.js\": 31083,\n\t\"./be\": 9808,\n\t\"./be.js\": 9808,\n\t\"./bg\": 68338,\n\t\"./bg.js\": 68338,\n\t\"./bm\": 67438,\n\t\"./bm.js\": 67438,\n\t\"./bn\": 8905,\n\t\"./bn-bd\": 76225,\n\t\"./bn-bd.js\": 76225,\n\t\"./bn.js\": 8905,\n\t\"./bo\": 11560,\n\t\"./bo.js\": 11560,\n\t\"./br\": 1278,\n\t\"./br.js\": 1278,\n\t\"./bs\": 80622,\n\t\"./bs.js\": 80622,\n\t\"./ca\": 2468,\n\t\"./ca.js\": 2468,\n\t\"./cs\": 5822,\n\t\"./cs.js\": 5822,\n\t\"./cv\": 50877,\n\t\"./cv.js\": 50877,\n\t\"./cy\": 47373,\n\t\"./cy.js\": 47373,\n\t\"./da\": 24780,\n\t\"./da.js\": 24780,\n\t\"./de\": 59740,\n\t\"./de-at\": 60217,\n\t\"./de-at.js\": 60217,\n\t\"./de-ch\": 60894,\n\t\"./de-ch.js\": 60894,\n\t\"./de.js\": 59740,\n\t\"./dv\": 5300,\n\t\"./dv.js\": 5300,\n\t\"./el\": 50837,\n\t\"./el.js\": 50837,\n\t\"./en-au\": 78348,\n\t\"./en-au.js\": 78348,\n\t\"./en-ca\": 77925,\n\t\"./en-ca.js\": 77925,\n\t\"./en-gb\": 22243,\n\t\"./en-gb.js\": 22243,\n\t\"./en-ie\": 46436,\n\t\"./en-ie.js\": 46436,\n\t\"./en-il\": 47207,\n\t\"./en-il.js\": 47207,\n\t\"./en-in\": 44175,\n\t\"./en-in.js\": 44175,\n\t\"./en-nz\": 76319,\n\t\"./en-nz.js\": 76319,\n\t\"./en-sg\": 31662,\n\t\"./en-sg.js\": 31662,\n\t\"./eo\": 92915,\n\t\"./eo.js\": 92915,\n\t\"./es\": 55655,\n\t\"./es-do\": 55251,\n\t\"./es-do.js\": 55251,\n\t\"./es-mx\": 96112,\n\t\"./es-mx.js\": 96112,\n\t\"./es-us\": 71146,\n\t\"./es-us.js\": 71146,\n\t\"./es.js\": 55655,\n\t\"./et\": 5603,\n\t\"./et.js\": 5603,\n\t\"./eu\": 77763,\n\t\"./eu.js\": 77763,\n\t\"./fa\": 76959,\n\t\"./fa.js\": 76959,\n\t\"./fi\": 11897,\n\t\"./fi.js\": 11897,\n\t\"./fil\": 42549,\n\t\"./fil.js\": 42549,\n\t\"./fo\": 94694,\n\t\"./fo.js\": 94694,\n\t\"./fr\": 94470,\n\t\"./fr-ca\": 63049,\n\t\"./fr-ca.js\": 63049,\n\t\"./fr-ch\": 52330,\n\t\"./fr-ch.js\": 52330,\n\t\"./fr.js\": 94470,\n\t\"./fy\": 5044,\n\t\"./fy.js\": 5044,\n\t\"./ga\": 29295,\n\t\"./ga.js\": 29295,\n\t\"./gd\": 2101,\n\t\"./gd.js\": 2101,\n\t\"./gl\": 38794,\n\t\"./gl.js\": 38794,\n\t\"./gom-deva\": 27884,\n\t\"./gom-deva.js\": 27884,\n\t\"./gom-latn\": 23168,\n\t\"./gom-latn.js\": 23168,\n\t\"./gu\": 95349,\n\t\"./gu.js\": 95349,\n\t\"./he\": 24206,\n\t\"./he.js\": 24206,\n\t\"./hi\": 30094,\n\t\"./hi.js\": 30094,\n\t\"./hr\": 30316,\n\t\"./hr.js\": 30316,\n\t\"./hu\": 22138,\n\t\"./hu.js\": 22138,\n\t\"./hy-am\": 11423,\n\t\"./hy-am.js\": 11423,\n\t\"./id\": 29218,\n\t\"./id.js\": 29218,\n\t\"./is\": 90135,\n\t\"./is.js\": 90135,\n\t\"./it\": 90626,\n\t\"./it-ch\": 10150,\n\t\"./it-ch.js\": 10150,\n\t\"./it.js\": 90626,\n\t\"./ja\": 39183,\n\t\"./ja.js\": 39183,\n\t\"./jv\": 24286,\n\t\"./jv.js\": 24286,\n\t\"./ka\": 12105,\n\t\"./ka.js\": 12105,\n\t\"./kk\": 47772,\n\t\"./kk.js\": 47772,\n\t\"./km\": 18758,\n\t\"./km.js\": 18758,\n\t\"./kn\": 79282,\n\t\"./kn.js\": 79282,\n\t\"./ko\": 33730,\n\t\"./ko.js\": 33730,\n\t\"./ku\": 1408,\n\t\"./ku.js\": 1408,\n\t\"./ky\": 33291,\n\t\"./ky.js\": 33291,\n\t\"./lb\": 36841,\n\t\"./lb.js\": 36841,\n\t\"./lo\": 55466,\n\t\"./lo.js\": 55466,\n\t\"./lt\": 57010,\n\t\"./lt.js\": 57010,\n\t\"./lv\": 37595,\n\t\"./lv.js\": 37595,\n\t\"./me\": 39861,\n\t\"./me.js\": 39861,\n\t\"./mi\": 35493,\n\t\"./mi.js\": 35493,\n\t\"./mk\": 95966,\n\t\"./mk.js\": 95966,\n\t\"./ml\": 87341,\n\t\"./ml.js\": 87341,\n\t\"./mn\": 5115,\n\t\"./mn.js\": 5115,\n\t\"./mr\": 10370,\n\t\"./mr.js\": 10370,\n\t\"./ms\": 9847,\n\t\"./ms-my\": 41237,\n\t\"./ms-my.js\": 41237,\n\t\"./ms.js\": 9847,\n\t\"./mt\": 72126,\n\t\"./mt.js\": 72126,\n\t\"./my\": 56165,\n\t\"./my.js\": 56165,\n\t\"./nb\": 64924,\n\t\"./nb.js\": 64924,\n\t\"./ne\": 16744,\n\t\"./ne.js\": 16744,\n\t\"./nl\": 93901,\n\t\"./nl-be\": 59814,\n\t\"./nl-be.js\": 59814,\n\t\"./nl.js\": 93901,\n\t\"./nn\": 83877,\n\t\"./nn.js\": 83877,\n\t\"./oc-lnc\": 92135,\n\t\"./oc-lnc.js\": 92135,\n\t\"./pa-in\": 15858,\n\t\"./pa-in.js\": 15858,\n\t\"./pl\": 64495,\n\t\"./pl.js\": 64495,\n\t\"./pt\": 89520,\n\t\"./pt-br\": 57971,\n\t\"./pt-br.js\": 57971,\n\t\"./pt.js\": 89520,\n\t\"./ro\": 96459,\n\t\"./ro.js\": 96459,\n\t\"./ru\": 21793,\n\t\"./ru.js\": 21793,\n\t\"./sd\": 40950,\n\t\"./sd.js\": 40950,\n\t\"./se\": 10490,\n\t\"./se.js\": 10490,\n\t\"./si\": 90124,\n\t\"./si.js\": 90124,\n\t\"./sk\": 64249,\n\t\"./sk.js\": 64249,\n\t\"./sl\": 14985,\n\t\"./sl.js\": 14985,\n\t\"./sq\": 51104,\n\t\"./sq.js\": 51104,\n\t\"./sr\": 49131,\n\t\"./sr-cyrl\": 79915,\n\t\"./sr-cyrl.js\": 79915,\n\t\"./sr.js\": 49131,\n\t\"./ss\": 85893,\n\t\"./ss.js\": 85893,\n\t\"./sv\": 98760,\n\t\"./sv.js\": 98760,\n\t\"./sw\": 91172,\n\t\"./sw.js\": 91172,\n\t\"./ta\": 27333,\n\t\"./ta.js\": 27333,\n\t\"./te\": 23110,\n\t\"./te.js\": 23110,\n\t\"./tet\": 52095,\n\t\"./tet.js\": 52095,\n\t\"./tg\": 27321,\n\t\"./tg.js\": 27321,\n\t\"./th\": 9041,\n\t\"./th.js\": 9041,\n\t\"./tk\": 19005,\n\t\"./tk.js\": 19005,\n\t\"./tl-ph\": 75768,\n\t\"./tl-ph.js\": 75768,\n\t\"./tlh\": 89444,\n\t\"./tlh.js\": 89444,\n\t\"./tr\": 72397,\n\t\"./tr.js\": 72397,\n\t\"./tzl\": 28254,\n\t\"./tzl.js\": 28254,\n\t\"./tzm\": 51106,\n\t\"./tzm-latn\": 30699,\n\t\"./tzm-latn.js\": 30699,\n\t\"./tzm.js\": 51106,\n\t\"./ug-cn\": 9288,\n\t\"./ug-cn.js\": 9288,\n\t\"./uk\": 67691,\n\t\"./uk.js\": 67691,\n\t\"./ur\": 13795,\n\t\"./ur.js\": 13795,\n\t\"./uz\": 6791,\n\t\"./uz-latn\": 60588,\n\t\"./uz-latn.js\": 60588,\n\t\"./uz.js\": 6791,\n\t\"./vi\": 65666,\n\t\"./vi.js\": 65666,\n\t\"./x-pseudo\": 14378,\n\t\"./x-pseudo.js\": 14378,\n\t\"./yo\": 75805,\n\t\"./yo.js\": 75805,\n\t\"./zh-cn\": 83839,\n\t\"./zh-cn.js\": 83839,\n\t\"./zh-hk\": 55726,\n\t\"./zh-hk.js\": 55726,\n\t\"./zh-mo\": 99807,\n\t\"./zh-mo.js\": 99807,\n\t\"./zh-tw\": 74152,\n\t\"./zh-tw.js\": 74152\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 46700;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"\" + \"hljs\" + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = function(module) {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: function() {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t174: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmisago\"] = self[\"webpackChunkmisago\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(32233); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(58339); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(64109); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(46226); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(93240); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(75147); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(4894); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(29223); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(3026); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(94795); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(95563); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(32488); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(11768); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(61323); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(15049); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(61814); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(95920); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(60630); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(72168); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(47806); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(77031); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(97751); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(76093); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(19764); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(47549); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(22331); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(21513); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(98749); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(98251); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(6720); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(10846); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(18255); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(14113); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(24444); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(1764); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(68351); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(81521); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(19984); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(41229); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(43589); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(24108); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(33934); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(85577); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(83526); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(43060); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(92292); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(33409); })\nvar __webpack_exports__ = __webpack_require__.O(undefined, [736], function() { return __webpack_require__(31341); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","inProgress","dataWebpackPrefix","children","className","classnames","shrink","auto","styleName","message","dangerouslySetInnerHTML","__html","header","LegalAgreement","props","agreement","checked","errors","url","value","onChange","agreementHtml","interpolate","escapeHtml","label","gettext","type","map","error","i","privacyPolicy","termsOfService","onPrivacyPolicyChange","onTermsOfServiceChange","termsOfServiceId","misago","termsOfServiceUrl","privacyPolicyId","privacyPolicyUrl","FormHeader","text","buttonClassName","buttonLabel","formLabel","labelClassName","socialAuth","length","id","name","button_text","button_color","style","color","finalButtonLabel","site","href","thread","weight","title","best_answer","has_poll","is_unapproved","has_unapproved_posts","is_closed","is_hidden","ngettext","replies","Math","round","size","size2x","alt","src","getSrc","user","srcSet","width","height","avatars","avatar","forEach","av","resolveAvatarForSize","Button","React","render","this","disabled","loading","onClick","defaultProps","choices","item","repeat","level","display","helpText","ev","field","fieldname","target","input","rows","fields","for","help_text","validation","Form","constructor","super","setState","state","isLoading","groups","group","f","initial","send","data","Object","assign","ajax","api","handleSuccess","onSuccess","handleError","rejection","status","snackbar","onSubmit","handleSubmit","CancelButton","onCancel","componentDidMount","then","cancel","FormDisplay","isValidated","getClassName","getFeedback","getFeedbackDescription","getHelpText","labelClass","htmlFor","controlClass","extra","validateRequired","required","event","changeValue","newState","formErrors","validateField","preventDefault","clean","promise","success","validate","validators","optional","validatedFields","hasOwnProperty","push","fieldErrors","isValid","requiredError","validationError","isActive","isControlled","path","document","location","pathname","indexOf","activeClassName","BestAnswerSelect","choice","PollSelect","modal","onError","bestAnswer","poll","polls","window","confirm","role","pgettext","bestAnswers","onBestAnswerChange","onPollChange","ytRegExp","RegExp","element","highlightCode","embedYoutubePlayers","_youtube","default","hljs","codeblocks","querySelectorAll","highlightElement","anchors","a","onlyChild","parentNode","childNodes","parseYoutubeUrl","youtubeMovie","swapYoutubePlayer","youtube","video","start","player","$","replaceWith","wrap","cleanedUrl","substr","cleanUrl","match","getVideoIdFromUrl","timebit","split","filter","bits","parseInt","onebox","documentNode","find","click","revealSpoiler","componentDidUpdate","prevProps","prevState","shouldComponentUpdate","nextProps","nextState","markup","author","undefined","ref","node","btn","parent","addClass","PanelMessage","icon","post","content","Default","Invalid","category","tooltip","posted_on","format","index","fromNow","poster_name","rank","userTitle","css_class","is_tab","poster","username","random","isReady","posts","PostingQuoteSelection","range","getQuoteSelection","rect","getBoundingClientRect","posting","globalState","getGlobalState","quote","getQuoteMarkup","focusEditor","setTimeout","onMouseUp","selected","onTouchEnd","position","left","scrollX","top","bottom","scrollY","reply","textarea","querySelector","focus","selectionStart","selectionEnd","container","getSelection","selection","rangeCount","getRangeAt","isRangeContained","isPostContained","isAnyTextSelected","cloneContents","commonAncestorContainer","p","nodeName","dataset","noquote","child","nodeType","Node","TEXT_NODE","textContent","trim","metadata","getQuoteMetadata","convertNodesToMarkup","prefix","suffix","codeBlock","getQuoteCodeBlock","syntax","isNodeInlineCodeBlock","isNodeElementWithQuoteMetadata","getQuoteMetadataFromNode","ELEMENT_NODE","block","isNodeCodeBlock","getNodeCodeBlockMeta","nodes","stack","convertNodeToMarkup","SIMPLE_NODE_MAPPINGS","H1","H2","H3","H4","H5","H6","STRONG","EM","DEL","B","U","I","SUB","SUP","toUpperCase","code","innerText","misagoReply","setGlobalState","clearGlobalState","attachments","attachment","isRemoved","MarkupAttachmentModal","is_image","filename","filetype","formatFilesize","uploaded_on","uploader","uploader_name","wrapSelection","update","def","newValue","caret","setSelectionRange","replaceSelection","end","createRange","moveStart","substring","scroll","scrollTop","progress","thumb","getAttachmentMarkup","key","canProtect","empty","preview","isProtected","submitText","showPreview","closePreview","enableProtection","disableProtection","MarkupCodeModal","LANGUAGES","MarkupFormattingHelpModal","ExampleFormatting","result","ExampleFormattingSpoiler","reveal","URL_PATTERN","str","test","MarkupImageModal","isUrl","textUrl","MarkupLinkModal","MarkupQuoteModal","ALPHA","ALPHA_LEN","getRandomString","len","chars","floor","join","file","maxSize","acl","max_attachment_size","limit","upload","concat","refreshState","FormData","append","moment","detail","updateAttachments","actions","insertSpoiler","createElement","multiple","addEventListener","files","uploadFile","uploadFiles","MarkupEditor","parsed","stopPropagation","dataTransfer","onAttachmentsChange","clipboardData","items","kind","getAsFile","focused","placeholder","atwho","at","displayTpl","insertTpl","searchKey","callbacks","remoteFilter","query","callback","getJSON","q","on","_storage","source","controller","headPos","endPos","setMentions","onDrop","onFocus","onPaste","onBlur","post_length_min","CLASS_ACTIVE","CLASS_DEFAULT","CLASS_MINIMIZED","CLASS_FULLSCREEN","PostingDialog","body","classList","add","componentWillUnmount","remove","componentWillReceiveProps","fullscreen","minimized","close","minimize","fullscreenEnter","fullscreenExit","open","PostingThreadOptions","isClosed","isHidden","isPinned","options","hide","unhide","pinGlobally","pinLocally","unpin","icons","closed","hidden","pinned","getIcons","pin","categories","categoryOptions","getTitleValidators","getPostValidators","config","loadSuccess","loadError","submit","non_field_errors","dialogProps","PostingDialogStart","Toolbar","showOptions","onTitleChange","onCategoryChange","onClose","onOpen","onHide","onUnhide","onPinGlobally","onPinLocally","onUnpin","onPostChange","usernames","removedBlanks","toLowerCase","pos","to","cleanUsernames","PostingDialogStartPrivate","onToChange","newPost","context","onQuote","newContext","appendData","PostingDialogReply","method","protect","is_protected","can_protect","PostingDialogEditReply","date","mode","minLength","thread_title_length_min","limitValue","limit_value","show_value","maxLength","thread_title_length_max","post_length_max","validatePostLengthMin","Icon","getChoice","getIcon","getLabel","change","showActivation","password","form","val","showBannedPage","ban","getActivationButton","bindInput","getClass","is_banned","is_online_hidden","is_offline_hidden","is_online","is_offline","getStatusClassName","StatusIcon","StatusLabel","getHelp","banned_until","ban_expires","last_click","getEmptyMessage","emptyMessage","renderUserAvatar","changed_by","renderUsername","changed_by_username","old_username","new_username","changed_on","changes","hiddenOnMobile","isLoaded","showStatus","Status","JoinDate","Posts","Threads","Followers","joined_on","getStatClassName","threads","followers","stat","colClassName","cols","list","Array","apply","Number","call","users","dropdown","getCompactNavClassName","iconOn","iconOff","labelOn","labelOff","toggle","_initializers","_context","addInitializer","initializer","after","before","init","isOrdered","_items","order","get","has","values","values_only","_order","orderedValues","unordered","ordered","ordering","insertItem","insertAt","splice","iterations","fallback","pop","setInterval","store","patch","AUTH_SYNC_RATE","auth","storage","captcha","include","AcceptAgreement","submiting","accept","reload","handleDecline","handleAccept","getElementById","mount","refresh","getMessage","signedIn","signedOut","select","connect","AuthMessage","description","html","getTitle","is_read","LastThread","Empty","Private","Protected","can_browse","can_see_all_threads","last_thread_title","LastPosterAvatar","last_thread_new","LastPosterName","last_post","last_post_on","last_poster","last_poster_name","Message","isFirst","subcategories","hydrate","startPolling","frequency","tick","Categories","SideNav","option","baseUrl","component","CompactNav","hideNav","delete","onPasswordChange","edit_details","DownloadData","data_downloads","downloads","isSubmiting","request_data_download","handleLoadDownloads","rowStyle","requested_on","DownloadButton","exportFile","colSpan","handleRequestDataDownload","verticalAlign","is_hiding_presence","limits_private_thread_invites_to","subscribe_to_started_threads","subscribe_to_replied_threads","privateThreadInvitesChoices","subscribeToChoices","next_on","next_change","length_min","length_max","phrases","changes_left","name_changes_expire","complete","slug","addNameChange","updateUsername","Promise","all","results","getChangeForm","onComplete","new_email","change_email","response","new_password","repeat_password","change_password","has_usable_password","WithDropdown","page","PageHeader","FlexRow","PageContainer","paths","ChangeForumOptions","EditDetails","delegateAuth","DELEGATE_AUTH","ChangeUsername","ChangeSignInCredentials","DeleteAccount","root","Options","expires_on","initWithPreloadedData","initWithoutPreloadedData","profile","getUserMessage","user_message","getStaffMessage","staff_message","getExpirationMessage","isAfter","getPanelBody","keys","isAuthenticated","SafeValue","rel","onEdit","showEditButton","dispatch","details","load","editing","newDetails","loadDetails","profileDetails","edit","loadItems","next","Feed","loadMore","LoadMoreButton","isBusy","loadUsers","search","count","more","pages","setSpecialProps","PRELOADED_DATA_KEY","TITLE","API_FILTER","apiUrl","getMoreButton","getListBody","loadChanges","is_followed","follow","action","canMessage","can_start_private_threads","isProfileOwner","is_avatar_locked","avatar_lock_user_message","avatar_lock_staff_message","moderate_avatar","apiResponse","updateAvatar","avatar_hash","getFormBody","getModalBody","moderate_username","countdown","isDeleted","with_content","getButtonLabel","getForm","getDeletedBody","AvatarControls","moderation","showAvatarDialog","rename","showRenameDialog","showDeleteDialog","is_active","email","ProfileModerationButton","available","getModeration","can_follow","is_anonymous","can_rename","can_moderate_avatar","can_delete","COMPONENTS","follows","Details","UsernameHistory","BanDetails","Profile","RequestLinkForm","LinkSent","reset","RequestActivationLink","RequestResetForm","showInactivePage","AccountInactivePage","getActivateButton","activation","ReactDOM","RequestPasswordReset","ResetPasswordForm","PasswordChangedPage","showSignIn","SignInModal","updateSearch","urlQuery","history","pushState","encodeURIComponent","providers","provider","updateUsers","updatePosts","onQueryChange","Badge","ceil","SearchTime","time","copy","LoadMore","appendPosts","updateProvider","Blankslate","components","route","TYPES_CLASSES","info","warning","Snackbar","getSnackbarClass","snackbarClass","isVisible","backendName","pageTitleTpl","pageTitle","backend","Register","handleToggleAgreement","validator","formValidators","emailProtected","terms_of_service","privacy_policy","onRegistrationComplete","step","stateUpdate","backend_name","emailHelpText","emailHelpTextTpl","RegisterLegalFootnote","handlePrivacyPolicyChange","handleTermsOfServiceChange","SocialAuth","handleRegistrationComplete","op","updateAcl","participants","ModalHeader","onUsernameChange","can_add_participants","confirmed","isUser","participant","is_owner","can_change_owner","isModerator","can_moderate_private_threads","userIsOwner","UserStatus","isOwner","getUserIsOwner","utils","PollChoice","hash","proc","votes","getVotesLabel","ChoiceVotes","UserChoice","npgettext","hydratedData","voters","voter","voted_on","ModalBody","ChoicesList","ChoiceDetails","VotesCount","VotesList","Voter","VoteDate","isPollOver","showVoting","is_public","can_edit","can_see_votes","can_vote","hasSelectedChoices","allow_revotes","controls","canVote","canChangeVote","ChangeVote","SeeVotes","Edit","Delete","control","newThreadAcl","DATE_ABBR","PollVotes","PollLength","PollIsPublic","PollCreation","getPoster","getPostedOn","absolute","relative","ends_on","getEndsOn","endsOn","question","PollChoicesLeft","choicesLeft","PollAllowRevote","ChoiceSelect","toggleChoice","getChoicesLeft","allowed_choices","getChoiceFromHash","deselectChoice","selectChoice","slice","showResults","getIsPollOver","generateRandomHash","setChoices","canDelete","onDelete","onAdd","randomHash","toString","replace","isEdit","PollPublicSwitch","ICON","changed_title","pinned_globally","pinned_locally","unpinned","moved","merged","approved","opened","unhid","hid","changed_owner","tookover","added_participant","owner_left","participant_left","removed_participant","event_type","can_hide","Hide","Unhide","hidden_on","hidden_by_name","hidden_by","USER_SPAN","USER_URL","Hidden","Poster","event_by","event_on","MESSAGE","ITEM_LINK","ITEM_SPAN","ChangedTitle","Moved","Merged","ChangedOwner","AddedParticipant","RemovedParticipant","msgstring","oldTitle","event_context","old_title","fromCategory","from_category","mergedThread","merged_thread","newOwner","waypoint","handler","direction","boundingClientRect","offsetBottom","clientHeight","documentElement","read","thread_is_read","offset","AttachmentPreview","AttachmentDetails","AttachmentThumbnail","AttachmentIcon","backgroundImage","can_see_hidden","batch","row","Row","FlagBestAnswer","best_answer_marked_by","marked_on","best_answer_marked_on","marked_by","best_answer_marked_by_name","FlagHidden","FlagUnapproved","FlagProtected","ops","previousState","markAsBestAnswer","best_answer_is_protected","best_answer_marked_by_slug","patchThread","likes","hydrateLike","ModalDialog","LikesList","liked_on","likesCount","like","LikeDetails","liker_id","LikeDate","likedOn","can_reply","can_see_likes","last_likes","can_like","MarkAsBestAnswer","MarkAsBestAnswerCompact","Like","Likes","lastLikes","LikesCompact","Reply","can_mark_best_answer","can_mark_as_best_answer","can_change_best_answer","is_liked","concatedLikes","finalLikes","hasLikes","getLikesMessage","u","hiddenLikes","otherUsers","lastUser","usernamesList","last_user","editor","move","new_thread","onUrlChange","diff","DiffItem","getItemClassName","revertEdit","canRevert","goToEdit","previous","GoBackBtn","goBack","GoForwardBtn","goForward","GoLastBtn","goLast","Label","RevertBtn","editor_name","edited_on","edited_by","hydrateEdit","json","edits","hydratedPost","PostingConfig","ModerationForm","isError","Error","Loader","categoryId","can_pin_threads","can_hide_threads","can_close_threads","isHiddenChoices","isClosedChoices","getWeightChoices","renderWeightField","renderHiddenField","renderClosedField","Modal","Permalink","UnmarkMarkBestAnswer","PostEdits","Approve","Move","Split","Protect","Unprotect","permaUrl","protocol","host","prompt","can_unmark_best_answer","isUnedited","can_approve","can_move","can_unhide","isSelected","can_merge_posts","UnreadLabel","UnreadCompact","PostedOn","PostedOnCompact","PostEditsCompacts","ProtectedLabel","postAuthor","hasAcl","hasVisibleTitle","ListItem","is_event","starter","starter_name","timestamp","started_on","handleSuccessUnmounted","best_answers","merge","other_thread","post_set","ModalMessage","ModalLoading","successMessage","ThreadChangeTitleModal","callApi","changeTitle","approve","oldState","subscription","finalState","stickToBottom","unsubscribe","alert","short_name","special_role","breadcrumbs","ThreadReplies","hasFlags","ThreadFlags","is_authenticated","enabled","first","last","PostErrors","heading","ids","rollback","isArray","Merge","can_merge","dropup","onReply","compact","is_new","new_post","unapproved_post","pollDisabled","onPoll","can_start_poll","setPageTitle","editPoll","shouldFetchData","fetchData","startPollingApi","stopPollingApi","params","delayed","threadModeration","getThreadModeration","postsModeration","getPostsModeration","openPollForm","openReplyForm","closePollForm","can_close","can_pin_globally","can_pin","can_unprotect","basePath","pk","Route","compareLastPostAge","b","compareGlobalWeight","compareWeight","allItems","parentUrl","lists","longName","ThreadErrors","freezeThread","deleteThread","addThreads","filterThreads","categoriesMap","getFormdata","categoryChoices","can_start_threads","renderForm","renderCantMergeMessage","storeState","leftThreads","acls","renderCantMoveMessage","updateThread","threadsMap","failedThreads","noSelection","t","topCategory","topCategories","subCategory","subCategories","startThread","allow","getTopCategory","cat","busyThreads","diffThreads","current","fromDb","currentMap","isThreadChanged","getModerationActions","SUBSCRIPTION","notify","ThreadsListItemSubscriptionOptions","getSubscriptionIcon","activeCategory","showSubscription","isNew","updatedThreads","applyUpdate","loadThreads","getCategory","getSorting","currentState","sets","isMounted","pollResponse","index_header","forum_name","getPageTitle","index_title","specialRole","pageLead","threadsCount","applyDiff","can_see_unapproved_content_lists","getLists","routes","PRIVATE_THREADS_LIST","getListOptions","section","HEADER","RESULT","FOOTER","autoComplete","encodeURI","footer","flattenProvider","flatlist","arrayLength","flatResults","flattenProviders","flattenResults","isOpen","closeResults","loadResults","intervalId","onDocumentMouseDown","onEscape","removeEventListener","delay","clearTimeout","cleanResults","onToggle","STYLES","LABELS","_score","_password","_inputs","loaded","zxcvbn","getScore","inputs","cacheStale","score","RegisterForm","criteria","passwordMinLength","min_length","max_length","__all__","StartSocialAuth","RegisterComplete","getLead","getSubscript","completeRegistration","account_activation","showRegisterForm","GuestMenu","showSignInModal","LOGIN_URL","GuestNav","CompactGuestNav","showGuestMenu","avatarType","showError","getGravatarButton","gravatar","setGravatar","getCropButton","crop_src","showCrop","getUploadButton","showUpload","getGalleryButton","galleries","showGallery","getAvatarPreview","userPeview","setGenerated","cropit","deviceRatio","cropitOffset","crop","x","y","zoom","getAvatarSize","crop_tmp","getImagePath","dataUrl","cropperWidth","initialWidth","exportZoom","imageState","onImageLoaded","zoomLevel","imageSize","offsetX","offsetY","cropAvatar","showIndex","image","validateFile","URL","createObjectURL","uploaded","filesize","fileSize","invalidTypeMsg","allowed_mime_types","extensionFound","loweredFilename","allowed_extensions","extension","getUploadRequirements","extensions","pickFile","getUploadProgressLabel","getUploadProgress","renderUpload","renderCrop","GalleryItem","Gallery","images","save","ChangeAvatarError","getErrorReason","reason","AvatarIndex","AvatarUpload","AvatarCrop","AvatarGallery","getBody","completeFlow","UserMenu","changeAvatar","ChangeAvatarModal","following","can_use_private_threads","PrivateThreadsBadge","unread_private_threads","UserNav","UserPrivateThreadsLink","selectUserMenu","CompactUserNav","showUserMenu","CompactUserMenu","getPageUrl","days","trackedPeriod","getUserStatus","getRankName","rankUrl","getUserTitle","counter","meta","getLeadMessage","posters","tracked_period","string","subString","n","stringCount","RankUsersListLoader","getRankDescription","getComponent","Rank","ActivePosters","Users","attr","forum_index_title","reducer","isAnonymous","initialState","doTick","PATCH_USER","SIGN_IN","SIGN_OUT","signIn","signOut","soft","UPDATE_AVATAR","userId","UPDATE_USERNAME","REPLACE_PARTICIPANTS","BUSY_POLL","RELEASE_POLL","REMOVE_POLL","REPLACE_POLL","UPDATE_POLL","busy","release","hydrated","PATCH_POST","updated_on","hydrateAttachment","hydrateUser","APPEND_POSTS","SELECT_POST","DESELECT_POST","DESELECT_POSTS","LOAD_POSTS","UNLOAD_POSTS","UPDATE_POSTS","deselect","deselectAll","hydratePost","unload","selectedPosts","deseletedPosts","deseletedAllPosts","resultsIds","reducedPosts","postReducer","LOAD_DETAILS","HYDRATE_PROFILE","PATCH_PROFILE","hydrateStatus","REPLACE_SEARCH","UPDATE_SEARCH","UPDATE_SEARCH_PROVIDER","SELECT_ALL","SELECT_NONE","SELECT_ITEM","itemsIds","none","itemId","SHOW_SNACKBAR","HIDE_SNACKBAR","showSnackbar","messageType","hideSnackbar","BUSY_THREAD","RELEASE_THREAD","REPLACE_THREAD","UPDATE_THREAD","UPDATE_THREAD_ACL","APPEND_THREADS","DELETE_THREAD","FILTER_THREADS","HYDRATE_THREADS","PATCH_THREAD","SORT_THREADS","MODERATION_PERMISSIONS","sorting","getThreadModerationOptions","thread_acl","perm","hydrateThread","concatUnique","sort","itemCategory","lft","rght","patchedState","TICK","ADD_NAME_CHANGE","APPEND_HISTORY","HYDRATE_HISTORY","changedBy","hydrateNamechange","namechange","unshift","Date","now","APPEND_USERS","HYDRATE_USERS","_cookieName","_csrfToken","_locks","cookieName","getCsrfToken","cookie","cookieRegex","request","self","resolve","reject","xhr","headers","JSON","stringify","contentType","dataType","jqXHR","responseJSON","statusText","lock","param","waiter","wait","put","processData","XMLHttpRequest","evt","lengthComputable","total","local","_store","_local","_modal","syncSession","watchState","getState","set","watch","softSignOut","BaseCaptcha","_ajax","_include","_snackbar","NoCaptcha","QACaptcha","kwargs","ReCaptchaComponent","grecaptcha","sitekey","siteKey","binding","ReCaptcha","recaptcha_site_key","captcha_type","_captcha","staticUrl","_staticUrl","_included","script","remote","cache","localStorage","_prefix","_watchers","e","newValueJson","parse","watcher","oldValue","setItem","itemString","getItem","_element","_component","show","showConnected","removeClass","indexTitle","forumName","_indexTitle","_forumName","finalTitle","_polls","stop","poolServer","_stopped","timeout","apiError","pollId","_isOpen","_isClosing","_mount","_observer","unobserve","_spacer","_mode","ResizeObserver","entries","contentRect","_realOpen","observe","_timeout","_reducers","_initialState","addReducer","createStore","combineReducers","getStore","_isLoaded","scorePassword","_loadedPromise","_loadingPromise","tries","getReasonMessage","plain","expires","RedrawedBannedPage","BannedPage","changeState","rowWidth","padding","m","bytes","roundSize","toFixed","Component","rootElementId","connected","rootElement","finalComponent","int","min","max","childRoutes","onEnter","replaceState","browserHistory","array","EMAIL","USERNAME","requiredTermsOfService","requiredPrivacyPolicy","returnMessage","usernameMinLength","lengthMin","usernameMaxLength","lengthMax","usernameContent","webpackContext","req","webpackContextResolve","__webpack_require__","o","module","exports","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","r","getter","__esModule","d","definition","defineProperty","enumerable","chunkId","reduce","promises","miniCssF","g","globalThis","Function","hmd","create","obj","prop","prototype","l","done","needAttach","scripts","getElementsByTagName","s","getAttribute","charset","nc","setAttribute","onScriptComplete","prev","onerror","onload","doneFns","removeChild","bind","head","appendChild","Symbol","toStringTag","nmd","scriptUrl","importScripts","currentScript","installedChunks","installedChunkData","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}