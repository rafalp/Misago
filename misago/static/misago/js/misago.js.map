{"version":3,"file":"misago.js","mappings":"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","sources":["webpack://misago/webpack/runtime/chunk loaded","webpack://misago/./highlight/highlight.pack.js","webpack://misago/./src/components/RegisterLegalFootnote.js","webpack://misago/./src/components/StartSocialAuth.js","webpack://misago/./src/components/avatar.js","webpack://misago/./src/components/button.js","webpack://misago/./src/components/category-select.js","webpack://misago/./src/components/dropdown-toggle.js","webpack://misago/./src/components/edit-details/blankslate.js","webpack://misago/./src/components/edit-details/loader.js","webpack://misago/./src/components/edit-details/field-input.js","webpack://misago/./src/components/edit-details/fieldset.js","webpack://misago/./src/components/edit-details/form.js","webpack://misago/./src/components/edit-details/index.js","webpack://misago/./src/components/form-group.js","webpack://misago/./src/components/form.js","webpack://misago/./src/components/li.js","webpack://misago/./src/components/loader.js","webpack://misago/./src/components/merge-conflict.js","webpack://misago/./src/services/one-box.js","webpack://misago/./src/components/misago-markup.js","webpack://misago/./src/components/modal-loader.js","webpack://misago/./src/components/modal-message.js","webpack://misago/./src/components/page-lead.js","webpack://misago/./src/utils/string-count.js","webpack://misago/./src/components/panel-loader.js","webpack://misago/./src/components/panel-message.js","webpack://misago/./src/components/poll/results/chart.js","webpack://misago/./src/components/poll/results/modal.js","webpack://misago/./src/components/poll/results/options.js","webpack://misago/./src/components/poll/info.js","webpack://misago/./src/components/poll/results/index.js","webpack://misago/./src/components/poll/voting/help.js","webpack://misago/./src/components/poll/voting/select.js","webpack://misago/./src/components/poll/voting/utils.js","webpack://misago/./src/components/poll/voting/index.js","webpack://misago/./src/components/poll/poll.js","webpack://misago/./src/components/poll/form/choices-control.js","webpack://misago/./src/components/poll/form/index.js","webpack://misago/./src/components/post-feed/post/body.js","webpack://misago/./src/components/post-feed/post/header.js","webpack://misago/./src/components/post-feed/post/post-side/button.js","webpack://misago/./src/components/post-feed/post/post-side/anonymous.js","webpack://misago/./src/components/post-feed/post/post-side/user-title.js","webpack://misago/./src/components/post-feed/post/post-side/registered.js","webpack://misago/./src/components/post-feed/post/post-side/index.js","webpack://misago/./src/components/post-feed/post/index.js","webpack://misago/./src/components/post-feed/preview.js","webpack://misago/./src/components/post-feed/index.js","webpack://misago/./src/components/posting/utils/validators.js","webpack://misago/./src/components/select.js","webpack://misago/./src/components/sign-in.js","webpack://misago/./src/components/user-status.js","webpack://misago/./src/components/username-history/list-empty.js","webpack://misago/./src/components/username-history/change.js","webpack://misago/./src/components/username-history/list-ready.js","webpack://misago/./src/components/username-history/change-preview.js","webpack://misago/./src/components/username-history/list-preview.js","webpack://misago/./src/components/username-history/root.js","webpack://misago/./src/components/users-list/card/stats.js","webpack://misago/./src/components/users-list/card/user-title.js","webpack://misago/./src/components/users-list/card/index.js","webpack://misago/./src/components/users-list/preview/card.js","webpack://misago/./src/components/users-list/preview/index.js","webpack://misago/./src/components/users-list/index.js","webpack://misago/./src/components/with-dropdown.js","webpack://misago/./src/components/yes-no-switch.js","webpack://misago/./src/utils/ordered-list.js","webpack://misago/./src/index.js","webpack://misago/./src/initializers/ajax.js","webpack://misago/./src/initializers/auth-sync.js","webpack://misago/./src/initializers/auth.js","webpack://misago/./src/initializers/captcha.js","webpack://misago/./src/components/accept-agreement.js","webpack://misago/./src/initializers/components/accept-agreement.js","webpack://misago/./src/components/auth-message.js","webpack://misago/./src/initializers/components/auth-message.js","webpack://misago/./src/initializers/components/banned-page.js","webpack://misago/./src/components/categories/blankslate.js","webpack://misago/./src/components/categories/category/list-item/description.js","webpack://misago/./src/components/categories/category/list-item/icon.js","webpack://misago/./src/components/categories/category/list-item/main.js","webpack://misago/./src/components/categories/category/list-item/last-thread.js","webpack://misago/./src/components/categories/category/list-item/stats.js","webpack://misago/./src/components/categories/category/list-item/subcategories/list-item.js","webpack://misago/./src/components/categories/category/list-item/subcategories/index.js","webpack://misago/./src/components/categories/category/list-item/index.js","webpack://misago/./src/components/categories/category/index.js","webpack://misago/./src/components/categories/categories-list.js","webpack://misago/./src/components/categories/index.js","webpack://misago/./src/initializers/components/categories.js","webpack://misago/./src/components/options/navs.js","webpack://misago/./src/components/options/delete-account.js","webpack://misago/./src/components/options/edit-details.js","webpack://misago/./src/components/options/download-data.js","webpack://misago/./src/components/options/forum-options.js","webpack://misago/./src/components/options/change-username/form-loading.js","webpack://misago/./src/components/options/change-username/form-locked.js","webpack://misago/./src/components/options/change-username/form.js","webpack://misago/./src/components/options/change-username/root.js","webpack://misago/./src/components/options/sign-in-credentials/change-email.js","webpack://misago/./src/components/options/sign-in-credentials/change-password.js","webpack://misago/./src/components/options/sign-in-credentials/UnusablePasswordMessage.js","webpack://misago/./src/components/options/sign-in-credentials/root.js","webpack://misago/./src/components/options/root.js","webpack://misago/./src/initializers/components/options.js","webpack://misago/./src/components/profile/ban-details.js","webpack://misago/./src/components/profile/details/form.js","webpack://misago/./src/components/profile/details/empty-message.js","webpack://misago/./src/components/profile/details/field-value.js","webpack://misago/./src/components/profile/details/field.js","webpack://misago/./src/components/profile/details/group.js","webpack://misago/./src/components/profile/details/groups-list.js","webpack://misago/./src/components/profile/details/header.js","webpack://misago/./src/data/profile-details.js","webpack://misago/./src/components/profile/details/index.js","webpack://misago/./src/components/profile/feed/route.js","webpack://misago/./src/components/quick-search.js","webpack://misago/./src/components/profile/followers.js","webpack://misago/./src/components/profile/follows.js","webpack://misago/./src/components/profile/username-history.js","webpack://misago/./src/components/profile/follow-button.js","webpack://misago/./src/components/profile/message-button.js","webpack://misago/./src/components/profile/moderation/avatar-controls.js","webpack://misago/./src/components/profile/moderation/change-username.js","webpack://misago/./src/components/profile/moderation/delete-account.js","webpack://misago/./src/components/profile/moderation/nav.js","webpack://misago/./src/components/profile/navs.js","webpack://misago/./src/components/profile/header.js","webpack://misago/./src/components/profile/root.js","webpack://misago/./src/components/profile/feed/index.js","webpack://misago/./src/initializers/components/profile.js","webpack://misago/./src/components/request-activation-link.js","webpack://misago/./src/initializers/components/request-activation-link.js","webpack://misago/./src/components/request-password-reset.js","webpack://misago/./src/initializers/components/request-password-reset.js","webpack://misago/./src/components/reset-password-form.js","webpack://misago/./src/initializers/components/reset-password-form.js","webpack://misago/./src/components/search/form.js","webpack://misago/./src/components/search/sidenav.js","webpack://misago/./src/components/search/page.js","webpack://misago/./src/components/search/threads/results.js","webpack://misago/./src/components/search/threads/index.js","webpack://misago/./src/components/search/users/index.js","webpack://misago/./src/components/search/index.js","webpack://misago/./src/initializers/components/search.js","webpack://misago/./src/components/snackbar.js","webpack://misago/./src/initializers/components/snackbar.js","webpack://misago/./src/components/social-auth/header.js","webpack://misago/./src/components/social-auth/register.js","webpack://misago/./src/components/social-auth/complete.js","webpack://misago/./src/components/social-auth/index.js","webpack://misago/./src/initializers/components/social-auth.js","webpack://misago/./src/components/add-participant.js","webpack://misago/./src/components/participants/add-participant.js","webpack://misago/./src/components/participants/cards-list/make-owner.js","webpack://misago/./src/components/participants/cards-list/actions.js","webpack://misago/./src/components/participants/cards-list/remove.js","webpack://misago/./src/components/participants/cards-list/card.js","webpack://misago/./src/components/participants/cards-list/index.js","webpack://misago/./src/components/participants/index.js","webpack://misago/./src/components/participants/utils.js","webpack://misago/./src/components/posts-list/event/icon.js","webpack://misago/./src/components/posts-list/event/controls.js","webpack://misago/./src/components/posts-list/event/info.js","webpack://misago/./src/components/posts-list/event/message.js","webpack://misago/./src/components/posts-list/event/unread-label.js","webpack://misago/./src/components/posts-list/waypoint.js","webpack://misago/./src/components/posts-list/event/index.js","webpack://misago/./src/components/posts-list/post/attachments/attachment.js","webpack://misago/./src/components/posts-list/post/attachments/index.js","webpack://misago/./src/components/posts-list/post/body.js","webpack://misago/./src/components/posts-list/post/flags.js","webpack://misago/./src/components/posts-list/post/controls/actions.js","webpack://misago/./src/components/post-likes.js","webpack://misago/./src/components/posts-list/post/footer.js","webpack://misago/./src/components/posts-list/post/controls/move.js","webpack://misago/./src/components/post-changelog/diff.js","webpack://misago/./src/components/post-changelog/footer.js","webpack://misago/./src/components/post-changelog/toolbar.js","webpack://misago/./src/components/post-changelog/utils.js","webpack://misago/./src/components/post-changelog/index.js","webpack://misago/./src/components/posts-list/post/controls/split.js","webpack://misago/./src/components/posts-list/post/controls/dropdown.js","webpack://misago/./src/components/posts-list/post/controls/index.js","webpack://misago/./src/components/posts-list/post/select.js","webpack://misago/./src/components/posts-list/post/header.js","webpack://misago/./src/components/posts-list/post/post-side/has-visible-title.js","webpack://misago/./src/components/posts-list/post/post-side/user-postcount.js","webpack://misago/./src/components/posts-list/post/post-side/user-title.js","webpack://misago/./src/components/posts-list/post/post-side/anonymous.js","webpack://misago/./src/components/posts-list/post/post-side/user-status.js","webpack://misago/./src/components/posts-list/post/post-side/registered.js","webpack://misago/./src/components/posts-list/post/post-side/index.js","webpack://misago/./src/components/posts-list/post/index.js","webpack://misago/./src/components/posts-list/post/preview.js","webpack://misago/./src/components/posts-list/index.js","webpack://misago/./src/components/thread/header/breadcrumbs.js","webpack://misago/./src/components/thread/moderation/thread/merge.js","webpack://misago/./src/components/thread/moderation/thread/move.js","webpack://misago/./src/components/thread/moderation/thread/controls.js","webpack://misago/./src/components/thread/header/stats.js","webpack://misago/./src/components/thread/header/index.js","webpack://misago/./src/components/thread/moderation/thread/is-visible.js","webpack://misago/./src/components/thread/reply-button.js","webpack://misago/./src/components/thread/subscription.js","webpack://misago/./src/components/thread/toolbar-top.js","webpack://misago/./src/components/thread/paginator.js","webpack://misago/./src/components/thread/moderation/posts/errors-list.js","webpack://misago/./src/components/thread/moderation/posts/actions.js","webpack://misago/./src/components/thread/moderation/posts/move.js","webpack://misago/./src/components/thread/moderation/posts/split.js","webpack://misago/./src/components/thread/moderation/posts/dropdown.js","webpack://misago/./src/components/thread/moderation/posts/index.js","webpack://misago/./src/components/thread/toolbar-bottom.js","webpack://misago/./src/components/thread/route.js","webpack://misago/./src/components/thread/root.js","webpack://misago/./src/initializers/components/thread.js","webpack://misago/./src/components/threads/compare.js","webpack://misago/./src/components/threads/category-picker.js","webpack://misago/./src/components/threads/moderation/errors-list.js","webpack://misago/./src/components/threads/moderation/merge.js","webpack://misago/./src/components/threads/moderation/move.js","webpack://misago/./src/components/threads/moderation/controls.js","webpack://misago/./src/components/threads/moderation/selection.js","webpack://misago/./src/components/threads/toolbar.js","webpack://misago/./src/components/threads/container.js","webpack://misago/./src/components/threads/nav.js","webpack://misago/./src/components/threads/header.js","webpack://misago/./src/components/threads/utils.js","webpack://misago/./src/components/ThreadsList/ThreadsListItemActivity.jsx","webpack://misago/./src/components/ThreadsList/ThreadsListItemCategory.jsx","webpack://misago/./src/components/ThreadsList/ThreadsListItemFlags.jsx","webpack://misago/./src/components/ThreadsList/ThreadsListItemIcon.jsx","webpack://misago/./src/components/ThreadsList/ThreadsListItemLastPoster.jsx","webpack://misago/./src/components/ThreadsList/ThreadsListItemReplies.jsx","webpack://misago/./src/components/ThreadsList/ThreadsListItem.jsx","webpack://misago/./src/components/ThreadsList/index.js","webpack://misago/./src/components/ThreadsList/ThreadsList.jsx","webpack://misago/./src/components/threads/list-empty.js","webpack://misago/./src/components/threads/route.js","webpack://misago/./src/initializers/components/threads.js","webpack://misago/./src/components/threads/root.js","webpack://misago/./src/components/navbar-search/clean-results.js","webpack://misago/./src/components/navbar-search/dropdown/constants.js","webpack://misago/./src/components/navbar-search/dropdown/input.js","webpack://misago/./src/components/navbar-search/dropdown/dropdown-menu.js","webpack://misago/./src/components/navbar-search/dropdown/empty.js","webpack://misago/./src/components/navbar-search/dropdown/loader.js","webpack://misago/./src/components/navbar-search/dropdown/result/footer.js","webpack://misago/./src/components/navbar-search/dropdown/result/header.js","webpack://misago/./src/components/navbar-search/dropdown/result/thread.js","webpack://misago/./src/components/navbar-search/dropdown/result/user.js","webpack://misago/./src/components/navbar-search/dropdown/result/result.js","webpack://misago/./src/components/navbar-search/dropdown/result/index.js","webpack://misago/./src/components/navbar-search/dropdown/flatten-results.js","webpack://misago/./src/components/navbar-search/dropdown/index.js","webpack://misago/./src/components/navbar-search/index.js","webpack://misago/./src/components/password-strength.js","webpack://misago/./src/components/register.js","webpack://misago/./src/components/register-button.js","webpack://misago/./src/components/user-menu/guest-nav.js","webpack://misago/./src/components/change-avatar/index.js","webpack://misago/./src/components/change-avatar/crop.js","webpack://misago/./src/components/change-avatar/upload.js","webpack://misago/./src/components/change-avatar/gallery.js","webpack://misago/./src/components/change-avatar/root.js","webpack://misago/./src/components/user-menu/user-nav.js","webpack://misago/./src/components/user-menu/root.js","webpack://misago/./src/initializers/components/user-menu.js","webpack://misago/./src/components/users/nav.js","webpack://misago/./src/components/users/active-posters/list-empty.js","webpack://misago/./src/components/users/active-posters/list-item-preview.js","webpack://misago/./src/components/users/active-posters/list-preview.js","webpack://misago/./src/components/users/active-posters/list-item.js","webpack://misago/./src/components/users/active-posters/list-ready.js","webpack://misago/./src/components/users/active-posters/root.js","webpack://misago/./src/utils/reset-scroll.js","webpack://misago/./src/components/users/rank/pager.js","webpack://misago/./src/components/users/rank/list.js","webpack://misago/./src/components/users/rank/list-loading.js","webpack://misago/./src/components/users/rank/root.js","webpack://misago/./src/components/users/root.js","webpack://misago/./src/initializers/components/users.js","webpack://misago/./src/initializers/include.js","webpack://misago/./src/initializers/local-storage.js","webpack://misago/./src/initializers/mobile-navbar-dropdown.js","webpack://misago/./src/initializers/modal.js","webpack://misago/./src/initializers/moment-locale.js","webpack://misago/./src/initializers/page-title.js","webpack://misago/./src/initializers/polls.js","webpack://misago/./src/initializers/posting.js","webpack://misago/./src/initializers/reducers/auth.js","webpack://misago/./src/initializers/reducers/participants.js","webpack://misago/./src/initializers/reducers/poll.js","webpack://misago/./src/initializers/reducers/posts.js","webpack://misago/./src/initializers/reducers/profile-details.js","webpack://misago/./src/initializers/reducers/profile-hydrate.js","webpack://misago/./src/initializers/reducers/profile.js","webpack://misago/./src/initializers/reducers/search.js","webpack://misago/./src/initializers/reducers/selection.js","webpack://misago/./src/initializers/reducers/snackbar.js","webpack://misago/./src/initializers/reducers/thread.js","webpack://misago/./src/initializers/reducers/threads.js","webpack://misago/./src/initializers/reducers/tick.js","webpack://misago/./src/initializers/reducers/username-history.js","webpack://misago/./src/initializers/reducers/users.js","webpack://misago/./src/initializers/snackbar.js","webpack://misago/./src/initializers/store.js","webpack://misago/./src/initializers/tick-start.js","webpack://misago/./src/initializers/zxcvbn.js","webpack://misago/./src/reducers/auth.js","webpack://misago/./src/reducers/participants.js","webpack://misago/./src/reducers/poll.js","webpack://misago/./src/reducers/post.js","webpack://misago/./src/reducers/posts.js","webpack://misago/./src/reducers/profile-details.js","webpack://misago/./src/reducers/profile.js","webpack://misago/./src/reducers/search.js","webpack://misago/./src/reducers/selection.js","webpack://misago/./src/reducers/snackbar.js","webpack://misago/./src/reducers/thread.js","webpack://misago/./src/reducers/threads.js","webpack://misago/./src/reducers/tick.js","webpack://misago/./src/reducers/username-history.js","webpack://misago/./src/reducers/users.js","webpack://misago/./src/services/ajax.js","webpack://misago/./src/services/auth.js","webpack://misago/./src/services/captcha.js","webpack://misago/./src/services/include.js","webpack://misago/./src/services/local-storage.js","webpack://misago/./src/services/mobile-navbar-dropdown.js","webpack://misago/./src/services/modal.js","webpack://misago/./src/services/page-title.js","webpack://misago/./src/services/polls.js","webpack://misago/./src/components/editor/actions/action.js","webpack://misago/./src/components/editor/actions/code.js","webpack://misago/./src/components/editor/actions/emphasis.js","webpack://misago/./src/components/editor/actions/hr.js","webpack://misago/./src/utils/is-url.js","webpack://misago/./src/components/editor/actions/image.js","webpack://misago/./src/components/editor/actions/link.js","webpack://misago/./src/components/editor/actions/spoiler.js","webpack://misago/./src/components/editor/actions/strikethrough.js","webpack://misago/./src/components/editor/actions/strong.js","webpack://misago/./src/components/editor/actions/quote.js","webpack://misago/./src/components/editor/attachments/attachment/complete.js","webpack://misago/./src/components/editor/attachments/attachment/error.js","webpack://misago/./src/components/editor/attachments/attachment/upload.js","webpack://misago/./src/components/editor/attachments/attachment/index.js","webpack://misago/./src/components/editor/attachments/list.js","webpack://misago/./src/components/editor/attachments/uploader.js","webpack://misago/./src/components/editor/attachments/index.js","webpack://misago/./src/components/editor/attachments/upload-button.js","webpack://misago/./src/components/editor/markup-preview.js","webpack://misago/./src/components/editor/textutils.js","webpack://misago/./src/components/editor/index.js","webpack://misago/./src/components/posting/utils/container.js","webpack://misago/./src/components/posting/utils/loader.js","webpack://misago/./src/components/posting/utils/message.js","webpack://misago/./src/components/posting/utils/options.js","webpack://misago/./src/components/posting/utils/attachments.js","webpack://misago/./src/components/posting/start.js","webpack://misago/./src/components/posting/utils/usernames.js","webpack://misago/./src/components/posting/start-private.js","webpack://misago/./src/components/posting/reply.js","webpack://misago/./src/components/posting/edit.js","webpack://misago/./src/components/posting/index.js","webpack://misago/./src/services/posting.js","webpack://misago/./src/services/snackbar.js","webpack://misago/./src/services/store.js","webpack://misago/./src/services/zxcvbn.js","webpack://misago/./src/components/banned-page.js","webpack://misago/./src/utils/banned-page.js","webpack://misago/./src/utils/batch.js","webpack://misago/./src/utils/concat-unique.js","webpack://misago/./src/utils/escape-html.js","webpack://misago/./src/utils/file-size.js","webpack://misago/./src/utils/mount-component.js","webpack://misago/./src/utils/random.js","webpack://misago/./src/utils/routed-component.js","webpack://misago/./src/utils/sets.js","webpack://misago/./src/utils/validators.js","webpack://misago/./node_modules/moment/locale/ sync ^\\.\\/.*$","webpack://misago/webpack/bootstrap","webpack://misago/webpack/runtime/compat get default export","webpack://misago/webpack/runtime/define property getters","webpack://misago/webpack/runtime/global","webpack://misago/webpack/runtime/harmony module decorator","webpack://misago/webpack/runtime/hasOwnProperty shorthand","webpack://misago/webpack/runtime/make namespace object","webpack://misago/webpack/runtime/node module decorator","webpack://misago/webpack/runtime/jsonp chunk loading","webpack://misago/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","/*! highlight.js v9.9.0 | BSD3 License | git.io/hljslicense */\n!function(e){var n=\"object\"==typeof window&&window||\"object\"==typeof self&&self;\"undefined\"!=typeof undefined?e(exports):n&&(n.hljs=e({}),\"function\"==typeof define&&define.amd&&define([],function(){return n.hljs}))}(function(e){function n(e){return e.replace(/[&<>]/gm,function(e){return I[e]})}function t(e){return e.nodeName.toLowerCase()}function r(e,n){var t=e&&e.exec(n);return t&&0===t.index}function i(e){return k.test(e)}function a(e){var n,t,r,a,o=e.className+\" \";if(o+=e.parentNode?e.parentNode.className:\"\",t=B.exec(o))return R(t[1])?t[1]:\"no-highlight\";for(o=o.split(/\\s+/),n=0,r=o.length;r>n;n++)if(a=o[n],i(a)||R(a))return a}function o(e,n){var t,r={};for(t in e)r[t]=e[t];if(n)for(t in n)r[t]=n[t];return r}function u(e){var n=[];return function r(e,i){for(var a=e.firstChild;a;a=a.nextSibling)3===a.nodeType?i+=a.nodeValue.length:1===a.nodeType&&(n.push({event:\"start\",offset:i,node:a}),i=r(a,i),t(a).match(/br|hr|img|input/)||n.push({event:\"stop\",offset:i,node:a}));return i}(e,0),n}function c(e,r,i){function a(){return e.length&&r.length?e[0].offset!==r[0].offset?e[0].offset<r[0].offset?e:r:\"start\"===r[0].event?e:r:e.length?e:r}function o(e){function r(e){return\" \"+e.nodeName+'=\"'+n(e.value)+'\"'}l+=\"<\"+t(e)+w.map.call(e.attributes,r).join(\"\")+\">\"}function u(e){l+=\"</\"+t(e)+\">\"}function c(e){(\"start\"===e.event?o:u)(e.node)}for(var s=0,l=\"\",f=[];e.length||r.length;){var g=a();if(l+=n(i.substring(s,g[0].offset)),s=g[0].offset,g===e){f.reverse().forEach(u);do c(g.splice(0,1)[0]),g=a();while(g===e&&g.length&&g[0].offset===s);f.reverse().forEach(o)}else\"start\"===g[0].event?f.push(g[0].node):f.pop(),c(g.splice(0,1)[0])}return l+n(i.substr(s))}function s(e){function n(e){return e&&e.source||e}function t(t,r){return new RegExp(n(t),\"m\"+(e.cI?\"i\":\"\")+(r?\"g\":\"\"))}function r(i,a){if(!i.compiled){if(i.compiled=!0,i.k=i.k||i.bK,i.k){var u={},c=function(n,t){e.cI&&(t=t.toLowerCase()),t.split(\" \").forEach(function(e){var t=e.split(\"|\");u[t[0]]=[n,t[1]?Number(t[1]):1]})};\"string\"==typeof i.k?c(\"keyword\",i.k):E(i.k).forEach(function(e){c(e,i.k[e])}),i.k=u}i.lR=t(i.l||/\\w+/,!0),a&&(i.bK&&(i.b=\"\\\\b(\"+i.bK.split(\" \").join(\"|\")+\")\\\\b\"),i.b||(i.b=/\\B|\\b/),i.bR=t(i.b),i.e||i.eW||(i.e=/\\B|\\b/),i.e&&(i.eR=t(i.e)),i.tE=n(i.e)||\"\",i.eW&&a.tE&&(i.tE+=(i.e?\"|\":\"\")+a.tE)),i.i&&(i.iR=t(i.i)),null==i.r&&(i.r=1),i.c||(i.c=[]);var s=[];i.c.forEach(function(e){e.v?e.v.forEach(function(n){s.push(o(e,n))}):s.push(\"self\"===e?i:e)}),i.c=s,i.c.forEach(function(e){r(e,i)}),i.starts&&r(i.starts,a);var l=i.c.map(function(e){return e.bK?\"\\\\.?(\"+e.b+\")\\\\.?\":e.b}).concat([i.tE,i.i]).map(n).filter(Boolean);i.t=l.length?t(l.join(\"|\"),!0):{exec:function(){return null}}}}r(e)}function l(e,t,i,a){function o(e,n){var t,i;for(t=0,i=n.c.length;i>t;t++)if(r(n.c[t].bR,e))return n.c[t]}function u(e,n){if(r(e.eR,n)){for(;e.endsParent&&e.parent;)e=e.parent;return e}return e.eW?u(e.parent,n):void 0}function c(e,n){return!i&&r(n.iR,e)}function g(e,n){var t=N.cI?n[0].toLowerCase():n[0];return e.k.hasOwnProperty(t)&&e.k[t]}function h(e,n,t,r){var i=r?\"\":y.classPrefix,a='<span class=\"'+i,o=t?\"\":C;return a+=e+'\">',a+n+o}function p(){var e,t,r,i;if(!E.k)return n(B);for(i=\"\",t=0,E.lR.lastIndex=0,r=E.lR.exec(B);r;)i+=n(B.substring(t,r.index)),e=g(E,r),e?(M+=e[1],i+=h(e[0],n(r[0]))):i+=n(r[0]),t=E.lR.lastIndex,r=E.lR.exec(B);return i+n(B.substr(t))}function d(){var e=\"string\"==typeof E.sL;if(e&&!x[E.sL])return n(B);var t=e?l(E.sL,B,!0,L[E.sL]):f(B,E.sL.length?E.sL:void 0);return E.r>0&&(M+=t.r),e&&(L[E.sL]=t.top),h(t.language,t.value,!1,!0)}function b(){k+=null!=E.sL?d():p(),B=\"\"}function v(e){k+=e.cN?h(e.cN,\"\",!0):\"\",E=Object.create(e,{parent:{value:E}})}function m(e,n){if(B+=e,null==n)return b(),0;var t=o(n,E);if(t)return t.skip?B+=n:(t.eB&&(B+=n),b(),t.rB||t.eB||(B=n)),v(t,n),t.rB?0:n.length;var r=u(E,n);if(r){var i=E;i.skip?B+=n:(i.rE||i.eE||(B+=n),b(),i.eE&&(B=n));do E.cN&&(k+=C),E.skip||(M+=E.r),E=E.parent;while(E!==r.parent);return r.starts&&v(r.starts,\"\"),i.rE?0:n.length}if(c(n,E))throw new Error('Illegal lexeme \"'+n+'\" for mode \"'+(E.cN||\"<unnamed>\")+'\"');return B+=n,n.length||1}var N=R(e);if(!N)throw new Error('Unknown language: \"'+e+'\"');s(N);var w,E=a||N,L={},k=\"\";for(w=E;w!==N;w=w.parent)w.cN&&(k=h(w.cN,\"\",!0)+k);var B=\"\",M=0;try{for(var I,j,O=0;;){if(E.t.lastIndex=O,I=E.t.exec(t),!I)break;j=m(t.substring(O,I.index),I[0]),O=I.index+j}for(m(t.substr(O)),w=E;w.parent;w=w.parent)w.cN&&(k+=C);return{r:M,value:k,language:e,top:E}}catch(T){if(T.message&&-1!==T.message.indexOf(\"Illegal\"))return{r:0,value:n(t)};throw T}}function f(e,t){t=t||y.languages||E(x);var r={r:0,value:n(e)},i=r;return t.filter(R).forEach(function(n){var t=l(n,e,!1);t.language=n,t.r>i.r&&(i=t),t.r>r.r&&(i=r,r=t)}),i.language&&(r.second_best=i),r}function g(e){return y.tabReplace||y.useBR?e.replace(M,function(e,n){return y.useBR&&\"\\n\"===e?\"<br>\":y.tabReplace?n.replace(/\\t/g,y.tabReplace):void 0}):e}function h(e,n,t){var r=n?L[n]:t,i=[e.trim()];return e.match(/\\bhljs\\b/)||i.push(\"hljs\"),-1===e.indexOf(r)&&i.push(r),i.join(\" \").trim()}function p(e){var n,t,r,o,s,p=a(e);i(p)||(y.useBR?(n=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"div\"),n.innerHTML=e.innerHTML.replace(/\\n/g,\"\").replace(/<br[ \\/]*>/g,\"\\n\")):n=e,s=n.textContent,r=p?l(p,s,!0):f(s),t=u(n),t.length&&(o=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"div\"),o.innerHTML=r.value,r.value=c(t,u(o),s)),r.value=g(r.value),e.innerHTML=r.value,e.className=h(e.className,p,r.language),e.result={language:r.language,re:r.r},r.second_best&&(e.second_best={language:r.second_best.language,re:r.second_best.r}))}function d(e){y=o(y,e)}function b(){if(!b.called){b.called=!0;var e=document.querySelectorAll(\"pre code\");w.forEach.call(e,p)}}function v(){addEventListener(\"DOMContentLoaded\",b,!1),addEventListener(\"load\",b,!1)}function m(n,t){var r=x[n]=t(e);r.aliases&&r.aliases.forEach(function(e){L[e]=n})}function N(){return E(x)}function R(e){return e=(e||\"\").toLowerCase(),x[e]||x[L[e]]}var w=[],E=Object.keys,x={},L={},k=/^(no-?highlight|plain|text)$/i,B=/\\blang(?:uage)?-([\\w-]+)\\b/i,M=/((^(<[^>]+>|\\t|)+|(?:\\n)))/gm,C=\"</span>\",y={classPrefix:\"hljs-\",tabReplace:null,useBR:!1,languages:void 0},I={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\"};return e.highlight=l,e.highlightAuto=f,e.fixMarkup=g,e.highlightBlock=p,e.configure=d,e.initHighlighting=b,e.initHighlightingOnLoad=v,e.registerLanguage=m,e.listLanguages=N,e.getLanguage=R,e.inherit=o,e.IR=\"[a-zA-Z]\\\\w*\",e.UIR=\"[a-zA-Z_]\\\\w*\",e.NR=\"\\\\b\\\\d+(\\\\.\\\\d+)?\",e.CNR=\"(-?)(\\\\b0[xX][a-fA-F0-9]+|(\\\\b\\\\d+(\\\\.\\\\d*)?|\\\\.\\\\d+)([eE][-+]?\\\\d+)?)\",e.BNR=\"\\\\b(0b[01]+)\",e.RSR=\"!|!=|!==|%|%=|&|&&|&=|\\\\*|\\\\*=|\\\\+|\\\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\\\?|\\\\[|\\\\{|\\\\(|\\\\^|\\\\^=|\\\\||\\\\|=|\\\\|\\\\||~\",e.BE={b:\"\\\\\\\\[\\\\s\\\\S]\",r:0},e.ASM={cN:\"string\",b:\"'\",e:\"'\",i:\"\\\\n\",c:[e.BE]},e.QSM={cN:\"string\",b:'\"',e:'\"',i:\"\\\\n\",c:[e.BE]},e.PWM={b:/\\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|like)\\b/},e.C=function(n,t,r){var i=e.inherit({cN:\"comment\",b:n,e:t,c:[]},r||{});return i.c.push(e.PWM),i.c.push({cN:\"doctag\",b:\"(?:TODO|FIXME|NOTE|BUG|XXX):\",r:0}),i},e.CLCM=e.C(\"//\",\"$\"),e.CBCM=e.C(\"/\\\\*\",\"\\\\*/\"),e.HCM=e.C(\"#\",\"$\"),e.NM={cN:\"number\",b:e.NR,r:0},e.CNM={cN:\"number\",b:e.CNR,r:0},e.BNM={cN:\"number\",b:e.BNR,r:0},e.CSSNM={cN:\"number\",b:e.NR+\"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?\",r:0},e.RM={cN:\"regexp\",b:/\\//,e:/\\/[gimuy]*/,i:/\\n/,c:[e.BE,{b:/\\[/,e:/\\]/,r:0,c:[e.BE]}]},e.TM={cN:\"title\",b:e.IR,r:0},e.UTM={cN:\"title\",b:e.UIR,r:0},e.METHOD_GUARD={b:\"\\\\.\\\\s*\"+e.UIR,r:0},e});hljs.registerLanguage(\"xml\",function(s){var e=\"[A-Za-z0-9\\\\._:-]+\",t={eW:!0,i:/</,r:0,c:[{cN:\"attr\",b:e,r:0},{b:/=\\s*/,r:0,c:[{cN:\"string\",endsParent:!0,v:[{b:/\"/,e:/\"/},{b:/'/,e:/'/},{b:/[^\\s\"'=<>`]+/}]}]}]};return{aliases:[\"html\",\"xhtml\",\"rss\",\"atom\",\"xjb\",\"xsd\",\"xsl\",\"plist\"],cI:!0,c:[{cN:\"meta\",b:\"<!DOCTYPE\",e:\">\",r:10,c:[{b:\"\\\\[\",e:\"\\\\]\"}]},s.C(\"<!--\",\"-->\",{r:10}),{b:\"<\\\\!\\\\[CDATA\\\\[\",e:\"\\\\]\\\\]>\",r:10},{b:/<\\?(php)?/,e:/\\?>/,sL:\"php\",c:[{b:\"/\\\\*\",e:\"\\\\*/\",skip:!0}]},{cN:\"tag\",b:\"<style(?=\\\\s|>|$)\",e:\">\",k:{name:\"style\"},c:[t],starts:{e:\"</style>\",rE:!0,sL:[\"css\",\"xml\"]}},{cN:\"tag\",b:\"<script(?=\\\\s|>|$)\",e:\">\",k:{name:\"script\"},c:[t],starts:{e:\"</script>\",rE:!0,sL:[\"actionscript\",\"javascript\",\"handlebars\",\"xml\"]}},{cN:\"meta\",v:[{b:/<\\?xml/,e:/\\?>/,r:10},{b:/<\\?\\w+/,e:/\\?>/}]},{cN:\"tag\",b:\"</?\",e:\"/?>\",c:[{cN:\"name\",b:/[^\\/><\\s]+/,r:0},t]}]}});hljs.registerLanguage(\"markdown\",function(e){return{aliases:[\"md\",\"mkdown\",\"mkd\"],c:[{cN:\"section\",v:[{b:\"^#{1,6}\",e:\"$\"},{b:\"^.+?\\\\n[=-]{2,}$\"}]},{b:\"<\",e:\">\",sL:\"xml\",r:0},{cN:\"bullet\",b:\"^([*+-]|(\\\\d+\\\\.))\\\\s+\"},{cN:\"strong\",b:\"[*_]{2}.+?[*_]{2}\"},{cN:\"emphasis\",v:[{b:\"\\\\*.+?\\\\*\"},{b:\"_.+?_\",r:0}]},{cN:\"quote\",b:\"^>\\\\s+\",e:\"$\"},{cN:\"code\",v:[{b:\"^```w*s*$\",e:\"^```s*$\"},{b:\"`.+?`\"},{b:\"^( {4}|\t)\",e:\"$\",r:0}]},{b:\"^[-\\\\*]{3,}\",e:\"$\"},{b:\"\\\\[.+?\\\\][\\\\(\\\\[].*?[\\\\)\\\\]]\",rB:!0,c:[{cN:\"string\",b:\"\\\\[\",e:\"\\\\]\",eB:!0,rE:!0,r:0},{cN:\"link\",b:\"\\\\]\\\\(\",e:\"\\\\)\",eB:!0,eE:!0},{cN:\"symbol\",b:\"\\\\]\\\\[\",e:\"\\\\]\",eB:!0,eE:!0}],r:10},{b:/^\\[[^\\n]+\\]:/,rB:!0,c:[{cN:\"symbol\",b:/\\[/,e:/\\]/,eB:!0,eE:!0},{cN:\"link\",b:/:\\s*/,e:/$/,eB:!0}]}]}});hljs.registerLanguage(\"ini\",function(e){var b={cN:\"string\",c:[e.BE],v:[{b:\"'''\",e:\"'''\",r:10},{b:'\"\"\"',e:'\"\"\"',r:10},{b:'\"',e:'\"'},{b:\"'\",e:\"'\"}]};return{aliases:[\"toml\"],cI:!0,i:/\\S/,c:[e.C(\";\",\"$\"),e.HCM,{cN:\"section\",b:/^\\s*\\[+/,e:/\\]+/},{b:/^[a-z0-9\\[\\]_-]+\\s*=\\s*/,e:\"$\",rB:!0,c:[{cN:\"attr\",b:/[a-z0-9\\[\\]_-]+/},{b:/=/,eW:!0,r:0,c:[{cN:\"literal\",b:/\\bon|off|true|false|yes|no\\b/},{cN:\"variable\",v:[{b:/\\$[\\w\\d\"][\\w\\d_]*/},{b:/\\$\\{(.*?)}/}]},b,{cN:\"number\",b:/([\\+\\-]+)?[\\d]+_[\\d_]+/},e.NM]}]}]}});hljs.registerLanguage(\"python\",function(e){var r={cN:\"meta\",b:/^(>>>|\\.\\.\\.) /},b={cN:\"string\",c:[e.BE],v:[{b:/(u|b)?r?'''/,e:/'''/,c:[r],r:10},{b:/(u|b)?r?\"\"\"/,e:/\"\"\"/,c:[r],r:10},{b:/(u|r|ur)'/,e:/'/,r:10},{b:/(u|r|ur)\"/,e:/\"/,r:10},{b:/(b|br)'/,e:/'/},{b:/(b|br)\"/,e:/\"/},e.ASM,e.QSM]},a={cN:\"number\",r:0,v:[{b:e.BNR+\"[lLjJ]?\"},{b:\"\\\\b(0o[0-7]+)[lLjJ]?\"},{b:e.CNR+\"[lLjJ]?\"}]},l={cN:\"params\",b:/\\(/,e:/\\)/,c:[\"self\",r,a,b]};return{aliases:[\"py\",\"gyp\"],k:{keyword:\"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda async await nonlocal|10 None True False\",built_in:\"Ellipsis NotImplemented\"},i:/(<\\/|->|\\?)|=>/,c:[r,a,b,e.HCM,{v:[{cN:\"function\",bK:\"def\"},{cN:\"class\",bK:\"class\"}],e:/:/,i:/[${=;\\n,]/,c:[e.UTM,l,{b:/->/,eW:!0,k:\"None\"}]},{cN:\"meta\",b:/^[\\t ]*@/,e:/$/},{b:/\\b(print|exec)\\(/}]}});hljs.registerLanguage(\"css\",function(e){var c=\"[a-zA-Z-][a-zA-Z0-9_-]*\",t={b:/[A-Z\\_\\.\\-]+\\s*:/,rB:!0,e:\";\",eW:!0,c:[{cN:\"attribute\",b:/\\S/,e:\":\",eE:!0,starts:{eW:!0,eE:!0,c:[{b:/[\\w-]+\\(/,rB:!0,c:[{cN:\"built_in\",b:/[\\w-]+/},{b:/\\(/,e:/\\)/,c:[e.ASM,e.QSM]}]},e.CSSNM,e.QSM,e.ASM,e.CBCM,{cN:\"number\",b:\"#[0-9A-Fa-f]+\"},{cN:\"meta\",b:\"!important\"}]}}]};return{cI:!0,i:/[=\\/|'\\$]/,c:[e.CBCM,{cN:\"selector-id\",b:/#[A-Za-z0-9_-]+/},{cN:\"selector-class\",b:/\\.[A-Za-z0-9_-]+/},{cN:\"selector-attr\",b:/\\[/,e:/\\]/,i:\"$\"},{cN:\"selector-pseudo\",b:/:(:)?[a-zA-Z0-9\\_\\-\\+\\(\\)\"'.]+/},{b:\"@(font-face|page)\",l:\"[a-z-]+\",k:\"font-face page\"},{b:\"@\",e:\"[{;]\",i:/:/,c:[{cN:\"keyword\",b:/\\w+/},{b:/\\s/,eW:!0,eE:!0,r:0,c:[e.ASM,e.QSM,e.CSSNM]}]},{cN:\"selector-tag\",b:c,r:0},{b:\"{\",e:\"}\",i:/\\S/,c:[e.CBCM,t]}]}});hljs.registerLanguage(\"less\",function(e){var r=\"[\\\\w-]+\",t=\"(\"+r+\"|@{\"+r+\"})\",a=[],c=[],s=function(e){return{cN:\"string\",b:\"~?\"+e+\".*?\"+e}},b=function(e,r,t){return{cN:e,b:r,r:t}},n={b:\"\\\\(\",e:\"\\\\)\",c:c,r:0};c.push(e.CLCM,e.CBCM,s(\"'\"),s('\"'),e.CSSNM,{b:\"(url|data-uri)\\\\(\",starts:{cN:\"string\",e:\"[\\\\)\\\\n]\",eE:!0}},b(\"number\",\"#[0-9A-Fa-f]+\\\\b\"),n,b(\"variable\",\"@@?\"+r,10),b(\"variable\",\"@{\"+r+\"}\"),b(\"built_in\",\"~?`[^`]*?`\"),{cN:\"attribute\",b:r+\"\\\\s*:\",e:\":\",rB:!0,eE:!0},{cN:\"meta\",b:\"!important\"});var i=c.concat({b:\"{\",e:\"}\",c:a}),o={bK:\"when\",eW:!0,c:[{bK:\"and not\"}].concat(c)},u={b:t+\"\\\\s*:\",rB:!0,e:\"[;}]\",r:0,c:[{cN:\"attribute\",b:t,e:\":\",eE:!0,starts:{eW:!0,i:\"[<=$]\",r:0,c:c}}]},l={cN:\"keyword\",b:\"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\\\b\",starts:{e:\"[;{}]\",rE:!0,c:c,r:0}},C={cN:\"variable\",v:[{b:\"@\"+r+\"\\\\s*:\",r:15},{b:\"@\"+r}],starts:{e:\"[;}]\",rE:!0,c:i}},p={v:[{b:\"[\\\\.#:&\\\\[>]\",e:\"[;{}]\"},{b:t,e:\"{\"}],rB:!0,rE:!0,i:\"[<='$\\\"]\",r:0,c:[e.CLCM,e.CBCM,o,b(\"keyword\",\"all\\\\b\"),b(\"variable\",\"@{\"+r+\"}\"),b(\"selector-tag\",t+\"%?\",0),b(\"selector-id\",\"#\"+t),b(\"selector-class\",\"\\\\.\"+t,0),b(\"selector-tag\",\"&\",0),{cN:\"selector-attr\",b:\"\\\\[\",e:\"\\\\]\"},{cN:\"selector-pseudo\",b:/:(:)?[a-zA-Z0-9\\_\\-\\+\\(\\)\"'.]+/},{b:\"\\\\(\",e:\"\\\\)\",c:i},{b:\"!important\"}]};return a.push(e.CLCM,e.CBCM,l,C,u,p),{cI:!0,i:\"[=>'/<($\\\"]\",c:a}});hljs.registerLanguage(\"scss\",function(e){var t=\"[a-zA-Z-][a-zA-Z0-9_-]*\",i={cN:\"variable\",b:\"(\\\\$\"+t+\")\\\\b\"},r={cN:\"number\",b:\"#[0-9A-Fa-f]+\"};({cN:\"attribute\",b:\"[A-Z\\\\_\\\\.\\\\-]+\",e:\":\",eE:!0,i:\"[^\\\\s]\",starts:{eW:!0,eE:!0,c:[r,e.CSSNM,e.QSM,e.ASM,e.CBCM,{cN:\"meta\",b:\"!important\"}]}});return{cI:!0,i:\"[=/|']\",c:[e.CLCM,e.CBCM,{cN:\"selector-id\",b:\"\\\\#[A-Za-z0-9_-]+\",r:0},{cN:\"selector-class\",b:\"\\\\.[A-Za-z0-9_-]+\",r:0},{cN:\"selector-attr\",b:\"\\\\[\",e:\"\\\\]\",i:\"$\"},{cN:\"selector-tag\",b:\"\\\\b(a|abbr|acronym|address|area|article|aside|audio|b|base|big|blockquote|body|br|button|canvas|caption|cite|code|col|colgroup|command|datalist|dd|del|details|dfn|div|dl|dt|em|embed|fieldset|figcaption|figure|footer|form|frame|frameset|(h[1-6])|head|header|hgroup|hr|html|i|iframe|img|input|ins|kbd|keygen|label|legend|li|link|map|mark|meta|meter|nav|noframes|noscript|object|ol|optgroup|option|output|p|param|pre|progress|q|rp|rt|ruby|samp|script|section|select|small|span|strike|strong|style|sub|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|tt|ul|var|video)\\\\b\",r:0},{b:\":(visited|valid|root|right|required|read-write|read-only|out-range|optional|only-of-type|only-child|nth-of-type|nth-last-of-type|nth-last-child|nth-child|not|link|left|last-of-type|last-child|lang|invalid|indeterminate|in-range|hover|focus|first-of-type|first-line|first-letter|first-child|first|enabled|empty|disabled|default|checked|before|after|active)\"},{b:\"::(after|before|choices|first-letter|first-line|repeat-index|repeat-item|selection|value)\"},i,{cN:\"attribute\",b:\"\\\\b(z-index|word-wrap|word-spacing|word-break|width|widows|white-space|visibility|vertical-align|unicode-bidi|transition-timing-function|transition-property|transition-duration|transition-delay|transition|transform-style|transform-origin|transform|top|text-underline-position|text-transform|text-shadow|text-rendering|text-overflow|text-indent|text-decoration-style|text-decoration-line|text-decoration-color|text-decoration|text-align-last|text-align|tab-size|table-layout|right|resize|quotes|position|pointer-events|perspective-origin|perspective|page-break-inside|page-break-before|page-break-after|padding-top|padding-right|padding-left|padding-bottom|padding|overflow-y|overflow-x|overflow-wrap|overflow|outline-width|outline-style|outline-offset|outline-color|outline|orphans|order|opacity|object-position|object-fit|normal|none|nav-up|nav-right|nav-left|nav-index|nav-down|min-width|min-height|max-width|max-height|mask|marks|margin-top|margin-right|margin-left|margin-bottom|margin|list-style-type|list-style-position|list-style-image|list-style|line-height|letter-spacing|left|justify-content|initial|inherit|ime-mode|image-orientation|image-resolution|image-rendering|icon|hyphens|height|font-weight|font-variant-ligatures|font-variant|font-style|font-stretch|font-size-adjust|font-size|font-language-override|font-kerning|font-feature-settings|font-family|font|float|flex-wrap|flex-shrink|flex-grow|flex-flow|flex-direction|flex-basis|flex|filter|empty-cells|display|direction|cursor|counter-reset|counter-increment|content|column-width|column-span|column-rule-width|column-rule-style|column-rule-color|column-rule|column-gap|column-fill|column-count|columns|color|clip-path|clip|clear|caption-side|break-inside|break-before|break-after|box-sizing|box-shadow|box-decoration-break|bottom|border-width|border-top-width|border-top-style|border-top-right-radius|border-top-left-radius|border-top-color|border-top|border-style|border-spacing|border-right-width|border-right-style|border-right-color|border-right|border-radius|border-left-width|border-left-style|border-left-color|border-left|border-image-width|border-image-source|border-image-slice|border-image-repeat|border-image-outset|border-image|border-color|border-collapse|border-bottom-width|border-bottom-style|border-bottom-right-radius|border-bottom-left-radius|border-bottom-color|border-bottom|border|background-size|background-repeat|background-position|background-origin|background-image|background-color|background-clip|background-attachment|background-blend-mode|background|backface-visibility|auto|animation-timing-function|animation-play-state|animation-name|animation-iteration-count|animation-fill-mode|animation-duration|animation-direction|animation-delay|animation|align-self|align-items|align-content)\\\\b\",i:\"[^\\\\s]\"},{b:\"\\\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\\\b\"},{b:\":\",e:\";\",c:[i,r,e.CSSNM,e.QSM,e.ASM,{cN:\"meta\",b:\"!important\"}]},{b:\"@\",e:\"[{;]\",k:\"mixin include extend for if else each while charset import debug media page content font-face namespace warn\",c:[i,e.QSM,e.ASM,r,e.CSSNM,{b:\"\\\\s[A-Za-z0-9_.-]+\",r:0}]}]}});hljs.registerLanguage(\"json\",function(e){var i={literal:\"true false null\"},n=[e.QSM,e.CNM],r={e:\",\",eW:!0,eE:!0,c:n,k:i},t={b:\"{\",e:\"}\",c:[{cN:\"attr\",b:/\"/,e:/\"/,c:[e.BE],i:\"\\\\n\"},e.inherit(r,{b:/:/})],i:\"\\\\S\"},c={b:\"\\\\[\",e:\"\\\\]\",c:[e.inherit(r)],i:\"\\\\S\"};return n.splice(n.length,0,t,c),{c:n,k:i,i:\"\\\\S\"}});hljs.registerLanguage(\"javascript\",function(e){var r=\"[A-Za-z$_][0-9A-Za-z$_]*\",t={keyword:\"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as\",literal:\"true false null undefined NaN Infinity\",built_in:\"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise\"},a={cN:\"number\",v:[{b:\"\\\\b(0[bB][01]+)\"},{b:\"\\\\b(0[oO][0-7]+)\"},{b:e.CNR}],r:0},n={cN:\"subst\",b:\"\\\\$\\\\{\",e:\"\\\\}\",k:t,c:[]},c={cN:\"string\",b:\"`\",e:\"`\",c:[e.BE,n]};n.c=[e.ASM,e.QSM,c,a,e.RM];var s=n.c.concat([e.CBCM,e.CLCM]);return{aliases:[\"js\",\"jsx\"],k:t,c:[{cN:\"meta\",r:10,b:/^\\s*['\"]use (strict|asm)['\"]/},{cN:\"meta\",b:/^#!/,e:/$/},e.ASM,e.QSM,c,e.CLCM,e.CBCM,a,{b:/[{,]\\s*/,r:0,c:[{b:r+\"\\\\s*:\",rB:!0,r:0,c:[{cN:\"attr\",b:r,r:0}]}]},{b:\"(\"+e.RSR+\"|\\\\b(case|return|throw)\\\\b)\\\\s*\",k:\"return throw case\",c:[e.CLCM,e.CBCM,e.RM,{cN:\"function\",b:\"(\\\\(.*?\\\\)|\"+r+\")\\\\s*=>\",rB:!0,e:\"\\\\s*=>\",c:[{cN:\"params\",v:[{b:r},{b:/\\(\\s*\\)/},{b:/\\(/,e:/\\)/,eB:!0,eE:!0,k:t,c:s}]}]},{b:/</,e:/(\\/\\w+|\\w+\\/)>/,sL:\"xml\",c:[{b:/<\\w+\\s*\\/>/,skip:!0},{b:/<\\w+/,e:/(\\/\\w+|\\w+\\/)>/,skip:!0,c:[{b:/<\\w+\\s*\\/>/,skip:!0},\"self\"]}]}],r:0},{cN:\"function\",bK:\"function\",e:/\\{/,eE:!0,c:[e.inherit(e.TM,{b:r}),{cN:\"params\",b:/\\(/,e:/\\)/,eB:!0,eE:!0,c:s}],i:/\\[|%/},{b:/\\$[(.]/},e.METHOD_GUARD,{cN:\"class\",bK:\"class\",e:/[{;=]/,eE:!0,i:/[:\"\\[\\]]/,c:[{bK:\"extends\"},e.UTM]},{bK:\"constructor\",e:/\\{/,eE:!0}],i:/#(?!!)/}});hljs.registerLanguage(\"bash\",function(e){var t={cN:\"variable\",v:[{b:/\\$[\\w\\d#@][\\w\\d_]*/},{b:/\\$\\{(.*?)}/}]},s={cN:\"string\",b:/\"/,e:/\"/,c:[e.BE,t,{cN:\"variable\",b:/\\$\\(/,e:/\\)/,c:[e.BE]}]},a={cN:\"string\",b:/'/,e:/'/};return{aliases:[\"sh\",\"zsh\"],l:/-?[a-z\\._]+/,k:{keyword:\"if then else elif fi for while in do done case esac function\",literal:\"true false\",built_in:\"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp\",_:\"-ne -eq -lt -gt -f -d -e -s -l -a\"},c:[{cN:\"meta\",b:/^#![^\\n]+sh\\s*$/,r:10},{cN:\"function\",b:/\\w[\\w\\d_]*\\s*\\(\\s*\\)\\s*\\{/,rB:!0,c:[e.inherit(e.TM,{b:/\\w[\\w\\d_]*/})],r:0},e.HCM,s,a,t]}});","import React from \"react\"\nimport misago from \"misago\"\nimport escapeHtml from \"misago/utils/escape-html\"\n\nconst AGREEMENT_URL = '<a href=\"%(url)s\" target=\"_blank\">%(agreement)s</a>'\n\nconst RegisterLegalFootnote = props => {\n  const {\n    errors,\n    privacyPolicy,\n    termsOfService,\n    onPrivacyPolicyChange,\n    onTermsOfServiceChange\n  } = props\n\n  const termsOfServiceId = misago.get(\"TERMS_OF_SERVICE_ID\")\n  const termsOfServiceUrl = misago.get(\"TERMS_OF_SERVICE_URL\")\n\n  const privacyPolicyId = misago.get(\"PRIVACY_POLICY_ID\")\n  const privacyPolicyUrl = misago.get(\"PRIVACY_POLICY_URL\")\n\n  if (!termsOfServiceId && !privacyPolicyId) return null\n\n  return (\n    <div>\n      <LegalAgreement\n        agreement={gettext(\"the terms of service\")}\n        checked={termsOfService !== null}\n        errors={errors.termsOfService}\n        url={termsOfServiceUrl}\n        value={termsOfServiceId}\n        onChange={onTermsOfServiceChange}\n      />\n      <LegalAgreement\n        agreement={gettext(\"the privacy policy\")}\n        checked={privacyPolicy !== null}\n        errors={errors.privacyPolicy}\n        url={privacyPolicyUrl}\n        value={privacyPolicyId}\n        onChange={onPrivacyPolicyChange}\n      />\n    </div>\n  )\n}\n\nconst LegalAgreement = props => {\n  const { agreement, checked, errors, url, value, onChange } = props\n\n  if (!url) return null\n\n  const agreementHtml = interpolate(\n    AGREEMENT_URL,\n    { agreement: escapeHtml(agreement), url: escapeHtml(url) },\n    true\n  )\n  const label = interpolate(\n    gettext(\"I have read and accept %(agreement)s.\"),\n    { agreement: agreementHtml },\n    true\n  )\n\n  return (\n    <div className=\"checkbox legal-footnote\">\n      <label>\n        <input\n          checked={checked}\n          type=\"checkbox\"\n          value={value}\n          onChange={onChange}\n        />\n        <span dangerouslySetInnerHTML={{ __html: label }} />\n      </label>\n      {errors &&\n        errors.map((error, i) => (\n          <div className=\"help-block errors\" key={i}>\n            {error}\n          </div>\n        ))}\n    </div>\n  )\n}\n\nexport default RegisterLegalFootnote\n","import React from \"react\"\nimport misago from \"misago\"\n\nconst StartSocialAuth = props => {\n  const {\n    buttonClassName,\n    buttonLabel,\n    formLabel,\n    header,\n    labelClassName\n  } = props\n  const socialAuth = misago.get(\"SOCIAL_AUTH\")\n\n  if (socialAuth.length === 0) return null\n\n  return (\n    <div className=\"form-group form-social-auth\">\n      <FormHeader className={labelClassName} text={header} />\n      <div className=\"row\">\n        {socialAuth.map(({ id, name, button_text, button_color, url }) => {\n          const className = \"btn btn-block btn-default btn-social-\" + id\n          const style = button_color ? {color: button_color} : null\n          const finalButtonLabel = button_text || interpolate(\n            buttonLabel,\n            { site: name },\n            true\n          )\n\n          return (\n            <div className={buttonClassName || \"col-xs-12\"} key={id}>\n              <a className={className} style={style} href={url}>\n                {finalButtonLabel}\n              </a>\n            </div>\n          )\n        })}\n      </div>\n      <hr />\n      <FormHeader className={labelClassName} text={formLabel} />\n    </div>\n  )\n}\n\nconst FormHeader = ({ className, text }) => {\n  if (!text) return null\n  return <h5 className={className || \"\"}>{text}</h5>\n}\n\nexport default StartSocialAuth\n","import React from \"react\"\nimport misago from \"misago\"\n\nexport default function(props) {\n  const size = props.size || 100\n  const size2x = props.size2x || size\n\n  return (\n    <img\n      alt=\"\"\n      className={props.className || \"user-avatar\"}\n      src={getSrc(props.user, size)}\n      srcSet={getSrc(props.user, size2x)}\n      width={size}\n      height={size}\n    />\n  )\n}\n\nexport function getSrc(user, size) {\n  if (user && user.id) {\n    // just avatar hash, size and user id\n    return resolveAvatarForSize(user.avatars, size).url\n  } else {\n    // just append avatar size to file to produce no-avatar placeholder\n    return misago.get(\"BLANK_AVATAR_URL\")\n  }\n}\n\nexport function resolveAvatarForSize(avatars, size) {\n  let avatar = avatars[0]\n  avatars.forEach(av => {\n    if (av.size >= size) {\n      avatar = av\n    }\n  })\n  return avatar\n}\n","import React from \"react\"\nimport Loader from \"./loader\"\n\nexport default class Button extends React.Component {\n  render() {\n    let className = \"btn \" + this.props.className\n    let disabled = this.props.disabled\n\n    if (this.props.loading) {\n      className += \" btn-loading\"\n      disabled = true\n    }\n\n    return (\n      <button\n        className={className}\n        disabled={disabled}\n        onClick={this.props.onClick}\n        type={this.props.onClick ? \"button\" : \"submit\"}\n      >\n        {this.props.children}\n        {this.props.loading ? <Loader /> : null}\n      </button>\n    )\n  }\n}\n\nButton.defaultProps = {\n  className: \"btn-default\",\n\n  type: \"submit\",\n\n  loading: false,\n  disabled: false,\n\n  onClick: null\n}\n","import React from \"react\"\n\nexport default function(props) {\n  return (\n    <select\n      className={props.className || \"form-control\"}\n      disabled={props.disabled || false}\n      id={props.id || null}\n      onChange={props.onChange}\n      value={props.value}\n    >\n      {props.choices.map(item => {\n        return (\n          <option\n            disabled={item.disabled || false}\n            key={item.value}\n            value={item.value}\n          >\n            {\"- - \".repeat(item.level) + item.label}\n          </option>\n        )\n      })}\n    </select>\n  )\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  getClassName() {\n    if (this.props.dropdown) {\n      return \"btn btn-default btn-aligned btn-icon btn-dropdown-toggle open hidden-md hidden-lg\"\n    } else {\n      return \"btn btn-default btn-aligned btn-icon btn-dropdown-toggle hidden-md hidden-lg\"\n    }\n  }\n\n  render() {\n    return (\n      <button\n        className={this.getClassName()}\n        type=\"button\"\n        onClick={this.props.toggleNav}\n        aria-haspopup=\"true\"\n        aria-expanded={this.props.dropdown ? \"true\" : \"false\"}\n      >\n        <i className=\"material-icon\">menu</i>\n      </button>\n    )\n  }\n}\n","import React from \"react\"\nimport PanelMessage from \"misago/components/panel-message\"\n\nexport default function({ display }) {\n  if (!display) return null\n\n  return (\n    <PanelMessage\n      helpText={gettext(\"No profile details are editable at this time.\")}\n      message={gettext(\"This option is currently unavailable.\")}\n    />\n  )\n}\n","import React from \"react\"\nimport Loader from \"misago/components/loader\"\n\nexport default function({ display }) {\n  if (!display) return null\n\n  return (\n    <div className=\"panel-body\">\n      <Loader />\n    </div>\n  )\n}\n","import React from \"react\"\nimport Select from \"misago/components/select\"\n\nexport default class extends React.Component {\n  onChange = ev => {\n    const { field, onChange } = this.props\n    onChange(field.fieldname, ev.target.value)\n  }\n\n  render() {\n    const { disabled, field, value } = this.props\n    const { input } = field\n\n    if (input.type === \"select\") {\n      return (\n        <Select\n          choices={input.choices}\n          disabled={disabled}\n          id={\"id_\" + field.fieldname}\n          onChange={this.onChange}\n          value={value}\n        />\n      )\n    }\n\n    if (input.type === \"textarea\") {\n      return (\n        <textarea\n          className=\"form-control\"\n          disabled={disabled}\n          id={\"id_\" + field.fieldname}\n          onChange={this.onChange}\n          rows=\"4\"\n          type=\"text\"\n          value={value}\n        />\n      )\n    }\n\n    if (input.type === \"text\") {\n      return (\n        <input\n          className=\"form-control\"\n          disabled={disabled}\n          id={\"id_\" + field.fieldname}\n          onChange={this.onChange}\n          type=\"text\"\n          value={value}\n        />\n      )\n    }\n\n    return null\n  }\n}\n","import React from \"react\"\nimport FieldInput from \"./field-input\"\nimport FormGroup from \"misago/components/form-group\"\n\nexport default function({ disabled, errors, fields, name, onChange, value }) {\n  return (\n    <fieldset>\n      <legend>{name}</legend>\n      {fields.map(field => {\n        return (\n          <FormGroup\n            for={\"id_\" + field.fieldname}\n            helpText={field.help_text}\n            key={field.fieldname}\n            label={field.label}\n            validation={errors[field.fieldname]}\n          >\n            <FieldInput\n              disabled={disabled}\n              field={field}\n              onChange={onChange}\n              value={value[field.fieldname]}\n            />\n          </FormGroup>\n        )\n      })}\n    </fieldset>\n  )\n}\n","import React from \"react\"\nimport Fieldset from \"./fieldset\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      errors: {}\n    }\n\n    const groups = props.groups.length\n    for (let i = 0; i < groups; i++) {\n      const group = props.groups[i]\n      const fields = group.fields.length\n      for (let f = 0; f < fields; f++) {\n        const fieldname = group.fields[f].fieldname\n        const initial = group.fields[f].initial\n        this.state[fieldname] = initial\n      }\n    }\n  }\n\n  send() {\n    const data = Object.assign({}, this.state, {\n      errors: null,\n      isLoading: null\n    })\n\n    return ajax.post(this.props.api, data)\n  }\n\n  handleSuccess(data) {\n    this.props.onSuccess(data)\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      snackbar.error(gettext(\"Form contains errors.\"))\n      this.setState({ errors: rejection })\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  onChange = (name, value) => {\n    this.setState({\n      [name]: value\n    })\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"panel-body\">\n          {this.props.groups.map((group, i) => {\n            return (\n              <Fieldset\n                disabled={this.state.isLoading}\n                errors={this.state.errors}\n                fields={group.fields}\n                name={group.name}\n                key={i}\n                onChange={this.onChange}\n                value={this.state}\n              />\n            )\n          })}\n        </div>\n        <div className=\"panel-footer text-right\">\n          <CancelButton\n            disabled={this.state.isLoading}\n            onCancel={this.props.onCancel}\n          />{\" \"}\n          <Button className=\"btn-primary\" loading={this.state.isLoading}>\n            {gettext(\"Save changes\")}\n          </Button>\n        </div>\n      </form>\n    )\n  }\n}\n\nexport function CancelButton({ onCancel, disabled }) {\n  if (!onCancel) return null\n\n  return (\n    <button\n      className=\"btn btn-default\"\n      disabled={disabled}\n      onClick={onCancel}\n      type=\"button\"\n    >\n      {gettext(\"Cancel\")}\n    </button>\n  )\n}\n","import React from \"react\"\nimport Blankslate from \"./blankslate\"\nimport Loader from \"./loader\"\nimport Form from \"./form\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      loading: true,\n      groups: null\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(this.props.api).then(\n      groups => {\n        this.setState({\n          loading: false,\n\n          groups\n        })\n      },\n      rejection => {\n        snackbar.apiError(rejection)\n        if (this.props.cancel) {\n          this.props.cancel()\n        }\n      }\n    )\n  }\n\n  render() {\n    const { groups, loading } = this.state\n\n    return (\n      <div className=\"panel panel-default panel-form\">\n        <div className=\"panel-heading\">\n          <h3 className=\"panel-title\">{gettext(\"Edit details\")}</h3>\n        </div>\n        <Loader display={loading} />\n        <Blankslate display={!loading && !groups.length} />\n        <FormDisplay\n          api={this.props.api}\n          display={!loading && groups.length}\n          groups={groups}\n          onCancel={this.props.onCancel}\n          onSuccess={this.props.onSuccess}\n        />\n      </div>\n    )\n  }\n}\n\nexport function FormDisplay({ api, display, groups, onCancel, onSuccess }) {\n  if (!display) return null\n\n  return (\n    <Form api={api} groups={groups} onCancel={onCancel} onSuccess={onSuccess} />\n  )\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  isValidated() {\n    return typeof this.props.validation !== \"undefined\"\n  }\n\n  getClassName() {\n    let className = \"form-group\"\n    if (this.isValidated()) {\n      className += \" has-feedback\"\n      if (this.props.validation === null) {\n        className += \" has-success\"\n      } else {\n        className += \" has-error\"\n      }\n    }\n    return className\n  }\n\n  getFeedback() {\n    if (this.props.validation) {\n      return (\n        <div className=\"help-block errors\">\n          {this.props.validation.map((error, i) => {\n            return <p key={this.props.for + \"FeedbackItem\" + i}>{error}</p>\n          })}\n        </div>\n      )\n    } else {\n      return null\n    }\n  }\n\n  getFeedbackDescription() {\n    if (this.isValidated()) {\n      return (\n        <span id={this.props.for + \"_status\"} className=\"sr-only\">\n          {this.props.validation ? gettext(\"(error)\") : gettext(\"(success)\")}\n        </span>\n      )\n    } else {\n      return null\n    }\n  }\n\n  getHelpText() {\n    if (this.props.helpText) {\n      return <p className=\"help-block\">{this.props.helpText}</p>\n    } else {\n      return null\n    }\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()}>\n        <label\n          className={\"control-label \" + (this.props.labelClass || \"\")}\n          htmlFor={this.props.for || \"\"}\n        >\n          {this.props.label + \":\"}\n        </label>\n        <div className={this.props.controlClass || \"\"}>\n          {this.props.children}\n          {this.getFeedbackDescription()}\n          {this.getFeedback()}\n          {this.getHelpText()}\n          {this.props.extra || null}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport { required } from \"misago/utils/validators\"\nimport snackbar from \"misago/services/snackbar\"\n\nlet validateRequired = required()\n\nexport default class extends React.Component {\n  validate() {\n    let errors = {}\n    if (!this.state.validators) {\n      return errors\n    }\n\n    let validators = {\n      required: this.state.validators.required || this.state.validators,\n      optional: this.state.validators.optional || {}\n    }\n\n    let validatedFields = []\n\n    // add required fields to validation\n    for (let name in validators.required) {\n      if (\n        validators.required.hasOwnProperty(name) &&\n        validators.required[name]\n      ) {\n        validatedFields.push(name)\n      }\n    }\n\n    // add optional fields to validation\n    for (let name in validators.optional) {\n      if (\n        validators.optional.hasOwnProperty(name) &&\n        validators.optional[name]\n      ) {\n        validatedFields.push(name)\n      }\n    }\n\n    // validate fields values\n    for (let i in validatedFields) {\n      let name = validatedFields[i]\n      let fieldErrors = this.validateField(name, this.state[name])\n\n      if (fieldErrors === null) {\n        errors[name] = null\n      } else if (fieldErrors) {\n        errors[name] = fieldErrors\n      }\n    }\n\n    return errors\n  }\n\n  isValid() {\n    let errors = this.validate()\n    for (let field in errors) {\n      if (errors.hasOwnProperty(field)) {\n        if (errors[field] !== null) {\n          return false\n        }\n      }\n    }\n\n    return true\n  }\n\n  validateField(name, value) {\n    let errors = []\n    if (!this.state.validators) {\n      return errors\n    }\n\n    let validators = {\n      required: (this.state.validators.required || this.state.validators)[name],\n      optional: (this.state.validators.optional || {})[name]\n    }\n\n    let requiredError = validateRequired(value) || false\n\n    if (validators.required) {\n      if (requiredError) {\n        errors = [requiredError]\n      } else {\n        for (let i in validators.required) {\n          let validationError = validators.required[i](value)\n          if (validationError) {\n            errors.push(validationError)\n          }\n        }\n      }\n\n      return errors.length ? errors : null\n    } else if (requiredError === false && validators.optional) {\n      for (let i in validators.optional) {\n        let validationError = validators.optional[i](value)\n        if (validationError) {\n          errors.push(validationError)\n        }\n      }\n\n      return errors.length ? errors : null\n    }\n\n    return false // false === field wasn't validated\n  }\n\n  bindInput = name => {\n    return event => {\n      this.changeValue(name, event.target.value)\n    }\n  }\n\n  changeValue = (name, value) => {\n    let newState = {\n      [name]: value\n    }\n\n    const formErrors = this.state.errors || {}\n    formErrors[name] = this.validateField(name, newState[name])\n    newState.errors = formErrors\n\n    this.setState(newState)\n  }\n\n  clean() {\n    return true\n  }\n\n  send() {\n    return null\n  }\n\n  handleSuccess(success) {\n    return\n  }\n\n  handleError(rejection) {\n    snackbar.apiError(rejection)\n  }\n\n  handleSubmit = event => {\n    // we don't reload page on submissions\n    if (event) {\n      event.preventDefault()\n    }\n\n    if (this.state.isLoading) {\n      return\n    }\n\n    if (this.clean()) {\n      this.setState({ isLoading: true })\n      let promise = this.send()\n\n      if (promise) {\n        promise.then(\n          success => {\n            this.setState({ isLoading: false })\n            this.handleSuccess(success)\n          },\n          rejection => {\n            this.setState({ isLoading: false })\n            this.handleError(rejection)\n          }\n        )\n      } else {\n        this.setState({ isLoading: false })\n      }\n    }\n  }\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  isActive() {\n    if (this.props.isControlled) {\n      return this.props.isActive\n    } else {\n      if (this.props.path) {\n        return document.location.pathname.indexOf(this.props.path) === 0\n      } else {\n        return false\n      }\n    }\n  }\n\n  getClassName() {\n    if (this.isActive()) {\n      return (\n        (this.props.className || \"\") +\n        \" \" +\n        (this.props.activeClassName || \"active\")\n      )\n    } else {\n      return this.props.className || \"\"\n    }\n  }\n\n  render() {\n    return <li className={this.getClassName()}>{this.props.children}</li>\n  }\n}\n","import React from \"react\"\n\nexport default function(props) {\n  return (\n    <div className={props.className || \"loader\"}>\n      <div className=\"loader-spinning-wheel\" />\n    </div>\n  )\n}\n","import React from \"react\"\nimport Button from \"./button\"\nimport Form from \"./form\"\nimport FormGroup from \"./form-group\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      bestAnswer: \"0\",\n      poll: \"0\"\n    }\n  }\n\n  clean() {\n    if (this.props.polls && this.state.poll === \"0\") {\n      const confirmation = window.confirm(\n        gettext(\"Are you sure you want to delete all polls?\")\n      )\n      return confirmation\n    }\n\n    return true\n  }\n\n  send() {\n    const data = Object.assign({}, this.props.data, {\n      best_answer: this.state.bestAnswer,\n      poll: this.state.poll\n    })\n\n    return ajax.post(this.props.api, data)\n  }\n\n  handleSuccess = success => {\n    this.props.onSuccess(success)\n    modal.hide()\n  }\n\n  handleError = rejection => {\n    this.props.onError(rejection)\n  }\n\n  onBestAnswerChange = event => {\n    this.changeValue(\"bestAnswer\", event.target.value)\n  }\n\n  onPollChange = event => {\n    this.changeValue(\"poll\", event.target.value)\n  }\n\n  render() {\n    return (\n      <div className=\"modal-dialog\" role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              aria-label={gettext(\"Close\")}\n              className=\"close\"\n              data-dismiss=\"modal\"\n              type=\"button\"\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Merge threads\")}</h4>\n          </div>\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"modal-body\">\n              <BestAnswerSelect\n                choices={this.props.bestAnswers}\n                onChange={this.onBestAnswerChange}\n                value={this.state.bestAnswer}\n              />\n              <PollSelect\n                choices={this.props.polls}\n                onChange={this.onPollChange}\n                value={this.state.poll}\n              />\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn btn-default\"\n                data-dismiss=\"modal\"\n                disabled={this.state.isLoading}\n                type=\"button\"\n              >\n                {gettext(\"Cancel\")}\n              </button>\n              <Button className=\"btn-primary\" loading={this.state.isLoading}>\n                {gettext(\"Merge threads\")}\n              </Button>\n            </div>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport function BestAnswerSelect({ choices, onChange, value }) {\n  if (!choices) return null\n\n  return (\n    <FormGroup\n      label={gettext(\"Best answer\")}\n      helpText={gettext(\n        \"Please select the best answer for your newly merged thread. No posts will be deleted during the merge.\"\n      )}\n      for=\"id_best_answer\"\n    >\n      <select\n        className=\"form-control\"\n        id=\"id_best_answer\"\n        onChange={onChange}\n        value={value}\n      >\n        {choices.map(choice => {\n          return (\n            <option value={choice[0]} key={choice[0]}>\n              {choice[1]}\n            </option>\n          )\n        })}\n      </select>\n    </FormGroup>\n  )\n}\n\nexport function PollSelect({ choices, onChange, value }) {\n  if (!choices) return null\n\n  return (\n    <FormGroup\n      label={gettext(\"Poll\")}\n      helpText={gettext(\n        \"Please select the poll for your newly merged thread. Rejected polls will be permanently deleted and cannot be recovered.\"\n      )}\n      for=\"id_poll\"\n    >\n      <select\n        className=\"form-control\"\n        id=\"id_poll\"\n        onChange={onChange}\n        value={value}\n      >\n        {choices.map(choice => {\n          return (\n            <option value={choice[0]} key={choice[0]}>\n              {choice[1]}\n            </option>\n          )\n        })}\n      </select>\n    </FormGroup>\n  )\n}\n","const ytRegExp = new RegExp(\n  \"^.*(?:(?:youtu.be/|v/|vi/|u/w/|embed/)|(?:(?:watch)??v(?:i)?=|&v(?:i)?=))([^#&?]*).*\"\n)\n\nexport class OneBox {\n  constructor() {\n    this._youtube = {}\n  }\n\n  render = domnode => {\n    if (!domnode) return\n    this.highlightCode(domnode)\n    this.embedYoutubePlayers(domnode)\n  }\n\n  highlightCode(domnode) {\n    const codeblocks = domnode.querySelectorAll(\"pre>code\")\n    for (let i = 0; i < codeblocks.length; i++) {\n      const code = codeblocks[i]\n      hljs.highlightBlock(code)\n    }\n  }\n\n  embedYoutubePlayers(domnode) {\n    const anchors = domnode.querySelectorAll(\"p>a\")\n    for (let i = 0; i < anchors.length; i++) {\n      const a = anchors[i]\n      const p = a.parentNode\n      const onlyChild = p.childNodes.length === 1\n\n      if (!this._youtube[a.href]) {\n        this._youtube[a.href] = parseYoutubeUrl(a.href)\n      }\n\n      const youtubeMovie = this._youtube[a.href]\n      if (onlyChild && !!youtubeMovie && youtubeMovie.data !== false) {\n        this.swapYoutubePlayer(a, youtubeMovie)\n      }\n    }\n  }\n\n  swapYoutubePlayer(element, youtube) {\n    let url = \"https://www.youtube.com/embed/\"\n    url += youtube.video\n    url += \"?rel=0\"\n    if (youtube.start) {\n      url += \"&start=\" + youtube.start\n    }\n\n    const player = $(\n      '<iframe class=\"embed-responsive-item\" src=\"' +\n        url +\n        '\" allowfullscreen></iframe>'\n    )\n    $(element).replaceWith(player)\n    player.wrap('<div class=\"embed-responsive embed-responsive-16by9\"></div>')\n  }\n}\n\nexport default new OneBox()\n\nexport function parseYoutubeUrl(url) {\n  const cleanedUrl = cleanUrl(url)\n  const video = getVideoIdFromUrl(cleanedUrl)\n\n  if (!video) return null\n\n  let start = 0\n  if (cleanedUrl.indexOf(\"?\") > 0) {\n    const query = cleanedUrl.substr(cleanedUrl.indexOf(\"?\") + 1)\n    const timebit = query.split(\"&\").filter(i => {\n      return i.substr(0, 2) === \"t=\"\n    })[0]\n\n    if (timebit) {\n      const bits = timebit.substr(2).split(\"m\")\n      if (bits[0].substr(-1) === \"s\") {\n        start += parseInt(bits[0].substr(0, bits[0].length - 1))\n      } else {\n        start += parseInt(bits[0]) * 60\n        if (!!bits[1] && bits[1].substr(-1) === \"s\") {\n          start += parseInt(bits[1].substr(0, bits[1].length - 1))\n        }\n      }\n    }\n  }\n\n  return {\n    start,\n    video\n  }\n}\n\nexport function cleanUrl(url) {\n  let clean = url\n\n  if (url.substr(0, 8) === \"https://\") {\n    clean = clean.substr(8)\n  } else if (url.substr(0, 7) === \"http://\") {\n    clean = clean.substr(7)\n  }\n\n  if (clean.substr(0, 4) === \"www.\") {\n    clean = clean.substr(4)\n  }\n\n  return clean\n}\n\nexport function getVideoIdFromUrl(url) {\n  if (url.indexOf(\"youtu\") === -1) return null\n\n  const video = url.match(ytRegExp)\n  if (video) {\n    return video[1]\n  }\n  return null\n}\n","import React from \"react\"\nimport onebox from \"misago/services/one-box\"\n\nexport default class extends React.Component {\n  componentDidMount() {\n    onebox.render(this.documentNode)\n    $(this.documentNode).find(\".spoiler-reveal\").click(revealSpoiler)\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    onebox.render(this.documentNode)\n    $(this.documentNode).find(\".spoiler-reveal\").click(revealSpoiler)\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextProps.markup !== this.props.markup\n  }\n\n  render() {\n    return (\n      <article\n        className=\"misago-markup\"\n        dangerouslySetInnerHTML={{ __html: this.props.markup }}\n        ref={node => {\n          this.documentNode = node\n        }}\n      />\n    )\n  }\n}\n\nfunction revealSpoiler(event) {\n  var btn = event.target\n  $(btn).parent().parent().addClass(\"revealed\")\n}","import React from \"react\"\nimport Loader from \"misago/components/loader\"\n\nexport default class extends React.Component {\n  render() {\n    return (\n      <div className=\"modal-body modal-loader\">\n        <Loader />\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport PanelMessage from \"misago/components/panel-message\"\n\nexport default class extends PanelMessage {\n  getHelpText() {\n    if (this.props.helpText) {\n      return <p className=\"help-block\">{this.props.helpText}</p>\n    } else {\n      return null\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"modal-body\">\n        <div className=\"message-icon\">\n          <span className=\"material-icon\">\n            {this.props.icon || \"info_outline\"}\n          </span>\n        </div>\n        <div className=\"message-body\">\n          <p className=\"lead\">{this.props.message}</p>\n          {this.getHelpText()}\n          <button\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            {gettext(\"Ok\")}\n          </button>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport stringCount from \"misago/utils/string-count\"\n\nexport default class extends React.Component {\n  getClassName() {\n    if (this.props.copy && this.props.copy.length) {\n      if (\n        stringCount(this.props.copy, \"<p\") === 1 &&\n        this.props.copy.indexOf(\"<br\") === -1\n      ) {\n        return \"page-lead lead\"\n      }\n    }\n\n    return \"page-lead\"\n  }\n\n  render() {\n    if (this.props.copy && this.props.copy.length) {\n      return (\n        <div\n          className={this.getClassName()}\n          dangerouslySetInnerHTML={{\n            __html: this.props.copy\n          }}\n        />\n      )\n    } else {\n      return null\n    }\n  }\n}\n","export default function(string, subString) {\n  string = (string + \"\").toLowerCase()\n  subString = (subString + \"\").toLowerCase()\n\n  if (subString.length <= 0) return 0\n\n  let n = 0\n  let pos = 0\n  let step = subString.length\n\n  while (true) {\n    pos = string.indexOf(subString, pos)\n    if (pos >= 0) {\n      n += 1\n      pos += step\n    } else {\n      break\n    }\n  }\n\n  return n\n}\n","import React from \"react\"\nimport Loader from \"misago/components/loader\"\n\nexport default class extends React.Component {\n  render() {\n    return (\n      <div className=\"panel-body panel-body-loading\">\n        <Loader className=\"loader loader-spaced\" />\n      </div>\n    )\n  }\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  getHelpText() {\n    if (this.props.helpText) {\n      return <p className=\"help-block\">{this.props.helpText}</p>\n    } else {\n      return null\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"panel-body panel-message-body\">\n        <div className=\"message-icon\">\n          <span className=\"material-icon\">\n            {this.props.icon || \"info_outline\"}\n          </span>\n        </div>\n        <div className=\"message-body\">\n          <p className=\"lead\">{this.props.message}</p>\n          {this.getHelpText()}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\n\nexport default function(props) {\n  return (\n    <div className=\"poll-choices-bars\">\n      {props.poll.choices.map(choice => {\n        return (\n          <PollChoice choice={choice} key={choice.hash} poll={props.poll} />\n        )\n      })}\n    </div>\n  )\n}\n\nexport function PollChoice(props) {\n  let proc = 0\n  if (props.choice.votes && props.poll.votes) {\n    proc = Math.ceil((props.choice.votes * 100) / props.poll.votes)\n  }\n\n  return (\n    <dl className=\"dl-horizontal\">\n      <dt>{props.choice.label}</dt>\n      <dd>\n        <div className=\"progress\">\n          <div\n            className=\"progress-bar\"\n            role=\"progressbar\"\n            aria-valuenow={proc}\n            aria-valuemin=\"0\"\n            aria-valuemax=\"100\"\n            style={{ width: proc + \"%\" }}\n          >\n            <span className=\"sr-only\">\n              {getVotesLabel(props.votes, props.proc)}\n            </span>\n          </div>\n        </div>\n        <ul className=\"list-unstyled list-inline poll-chart\">\n          <ChoiceVotes proc={proc} votes={props.choice.votes} />\n          <UserChoice selected={props.choice.selected} />\n        </ul>\n      </dd>\n    </dl>\n  )\n}\n\nexport function ChoiceVotes(props) {\n  return (\n    <li className=\"poll-chart-votes\">\n      {getVotesLabel(props.votes, props.proc)}\n    </li>\n  )\n}\n\nexport function getVotesLabel(votes, proc) {\n  const message = ngettext(\n    \"%(votes)s vote, %(proc)s% of total.\",\n    \"%(votes)s votes, %(proc)s% of total.\",\n    votes\n  )\n\n  return interpolate(\n    message,\n    {\n      votes: votes,\n      proc: proc\n    },\n    true\n  )\n}\n\nexport function UserChoice(props) {\n  if (!props.selected) return null\n\n  return (\n    <li className=\"poll-chart-selected\">\n      <span className=\"material-icon\">check_box</span>\n      {gettext(\"Your choice.\")}\n    </li>\n  )\n}\n","import React from \"react\"\nimport moment from \"moment\"\nimport Message from \"misago/components/modal-message\"\nimport Loader from \"misago/components/modal-loader\"\nimport ajax from \"misago/services/ajax\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: true,\n      error: null,\n      data: []\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(this.props.poll.api.votes).then(\n      data => {\n        const hydratedData = data.map(choice => {\n          return Object.assign({}, choice, {\n            voters: choice.voters.map(voter => {\n              return Object.assign({}, voter, {\n                voted_on: moment(voter.voted_on)\n              })\n            })\n          })\n        })\n\n        this.setState({\n          isLoading: false,\n          data: hydratedData\n        })\n      },\n      rejection => {\n        this.setState({\n          isLoading: false,\n          error: rejection.detail\n        })\n      }\n    )\n  }\n\n  render() {\n    return (\n      <div\n        className={\n          \"modal-dialog\" + (this.state.error ? \" modal-message\" : \" modal-sm\")\n        }\n        role=\"document\"\n      >\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"modal\"\n              aria-label={gettext(\"Close\")}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Poll votes\")}</h4>\n          </div>\n\n          <ModalBody\n            data={this.state.data}\n            error={this.state.error}\n            isLoading={this.state.isLoading}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport function ModalBody(props) {\n  if (props.isLoading) {\n    return <Loader />\n  } else if (props.error) {\n    return <Message icon=\"error_outline\" message={props.error} />\n  }\n\n  return <ChoicesList data={props.data} />\n}\n\nexport function ChoicesList(props) {\n  return (\n    <div className=\"modal-body modal-poll-votes\">\n      <ul className=\"list-unstyled votes-details\">\n        {props.data.map(choice => {\n          return <ChoiceDetails key={choice.hash} {...choice} />\n        })}\n      </ul>\n    </div>\n  )\n}\n\nexport function ChoiceDetails(props) {\n  return (\n    <li>\n      <h4>{props.label}</h4>\n      <VotesCount votes={props.votes} />\n      <VotesList voters={props.voters} />\n      <hr />\n    </li>\n  )\n}\n\nexport function VotesCount(props) {\n  const message = ngettext(\n    \"%(votes)s user has voted for this choice.\",\n    \"%(votes)s users have voted for this choice.\",\n    props.votes\n  )\n\n  const label = interpolate(\n    message,\n    {\n      votes: props.votes\n    },\n    true\n  )\n\n  return <p>{label}</p>\n}\n\nexport function VotesList(props) {\n  if (!props.voters.length) return null\n\n  return (\n    <ul className=\"list-unstyled\">\n      {props.voters.map(user => {\n        return <Voter key={user.username} {...user} />\n      })}\n    </ul>\n  )\n}\n\nexport function Voter(props) {\n  if (props.url) {\n    return (\n      <li>\n        <a className=\"item-title\" href={props.url}>\n          {props.username}\n        </a>{\" \"}\n        <VoteDate voted_on={props.voted_on} />\n      </li>\n    )\n  }\n\n  return (\n    <li>\n      <strong>{props.username}</strong> <VoteDate voted_on={props.voted_on} />\n    </li>\n  )\n}\n\nexport function VoteDate(props) {\n  return (\n    <abbr className=\"text-muted\" title={props.voted_on.format(\"LLL\")}>\n      {props.voted_on.fromNow()}\n    </abbr>\n  )\n}\n","import React from \"react\"\nimport Modal from \"./modal\"\nimport * as poll from \"misago/reducers/poll\"\nimport * as thread from \"misago/reducers/thread\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport posting from \"misago/services/posting\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default function(props) {\n  const { isPollOver, poll, showVoting, thread } = props\n\n  if (!isVisible(isPollOver, poll.acl, poll)) return null\n\n  const controls = []\n\n  const canVote = poll.acl.can_vote\n  const canChangeVote = !poll.hasSelectedChoices || poll.allow_revotes\n\n  if (canVote && canChangeVote) controls.push(0)\n  if (poll.is_public || poll.acl.can_see_votes) controls.push(1)\n  if (poll.acl.can_edit) controls.push(2)\n  if (poll.acl.can_delete) controls.push(3)\n\n  return (\n    <div className=\"row poll-options\">\n      <ChangeVote\n        controls={controls}\n        isPollOver={isPollOver}\n        poll={poll}\n        showVoting={showVoting}\n      />\n      <SeeVotes controls={controls} poll={poll} />\n      <Edit controls={controls} poll={poll} thread={thread} />\n      <Delete controls={controls} poll={poll} />\n    </div>\n  )\n}\n\nexport function isVisible(isPollOver, acl, poll) {\n  return (\n    poll.is_public ||\n    acl.can_delete ||\n    acl.can_edit ||\n    acl.can_see_votes ||\n    (acl.can_vote &&\n      !isPollOver &&\n      (!poll.hasSelectedChoices || poll.allow_revotes))\n  )\n}\n\nexport function getClassName(controls, control) {\n  let className = \"col-xs-6\"\n\n  if (controls.length === 1) {\n    className = \"col-xs-12\"\n  }\n\n  if (controls.length === 3 && controls[0] === control) {\n    className = \"col-xs-12\"\n  }\n\n  return className + \" col-sm-3 col-md-2\"\n}\n\nexport function ChangeVote(props) {\n  const canVote = props.poll.acl.can_vote\n  const canChangeVote =\n    !props.poll.hasSelectedChoices || props.poll.allow_revotes\n\n  if (!(canVote && canChangeVote)) return null\n\n  return (\n    <div className={getClassName(props.controls, 0)}>\n      <button\n        className=\"btn btn-default btn-block btn-sm\"\n        disabled={props.poll.isBusy}\n        onClick={props.showVoting}\n        type=\"button\"\n      >\n        {gettext(\"Vote\")}\n      </button>\n    </div>\n  )\n}\n\nexport class SeeVotes extends React.Component {\n  onClick = () => {\n    modal.show(<Modal poll={this.props.poll} />)\n  }\n\n  render() {\n    const seeVotes =\n      this.props.poll.is_public || this.props.poll.acl.can_see_votes\n    if (!seeVotes) return null\n\n    return (\n      <div className={getClassName(this.props.controls, 1)}>\n        <button\n          className=\"btn btn-default btn-block btn-sm\"\n          disabled={this.props.poll.isBusy}\n          onClick={this.onClick}\n          type=\"button\"\n        >\n          {gettext(\"See votes\")}\n        </button>\n      </div>\n    )\n  }\n}\n\nexport class Edit extends React.Component {\n  onClick = () => {\n    posting.open({\n      submit: this.props.poll.api.index,\n\n      thread: this.props.thread,\n      poll: this.props.poll,\n\n      mode: \"POLL\"\n    })\n  }\n\n  render() {\n    if (!this.props.poll.acl.can_edit) return null\n\n    return (\n      <div className={getClassName(this.props.controls, 2)}>\n        <button\n          className=\"btn btn-default btn-block btn-sm\"\n          disabled={this.props.poll.isBusy}\n          onClick={this.onClick}\n          type=\"button\"\n        >\n          {gettext(\"Edit\")}\n        </button>\n      </div>\n    )\n  }\n}\n\nexport class Delete extends React.Component {\n  onClick = () => {\n    const deletePoll = window.confirm(\n      gettext(\n        \"Are you sure you want to delete this poll? This action is not reversible.\"\n      )\n    )\n    if (!deletePoll) return false\n\n    store.dispatch(poll.busy())\n\n    ajax\n      .delete(this.props.poll.api.index)\n      .then(this.handleSuccess, this.handleError)\n  }\n\n  handleSuccess = newThreadAcl => {\n    snackbar.success(\"Poll has been deleted\")\n    store.dispatch(poll.remove())\n    store.dispatch(thread.updateAcl(newThreadAcl))\n  }\n\n  handleError = rejection => {\n    snackbar.apiError(rejection)\n    store.dispatch(poll.release())\n  }\n\n  render() {\n    if (!this.props.poll.acl.can_delete) return null\n\n    return (\n      <div className={getClassName(this.props.controls, 3)}>\n        <button\n          className=\"btn btn-default btn-block btn-sm\"\n          disabled={this.props.poll.isBusy}\n          onClick={this.onClick}\n          type=\"button\"\n        >\n          {gettext(\"Delete\")}\n        </button>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport escapeHtml from \"misago/utils/escape-html\"\n\nconst DATE_ABBR = '<abbr title=\"%(absolute)s\">%(relative)s</abbr>'\nconst USER_SPAN = '<span class=\"item-title\">%(user)s</span>'\nconst USER_URL = '<a href=\"%(url)s\" class=\"item-title\">%(user)s</a>'\n\nexport default function(props) {\n  return (\n    <ul className=\"list-unstyled list-inline poll-details\">\n      <PollVotes votes={props.poll.votes} />\n      <PollLength poll={props.poll} />\n      <PollIsPublic poll={props.poll} />\n      <PollCreation poll={props.poll} />\n    </ul>\n  )\n}\n\nexport function PollCreation(props) {\n  const message = interpolate(\n    escapeHtml(gettext(\"Posted by %(poster)s %(posted_on)s.\")),\n    {\n      poster: getPoster(props.poll),\n      posted_on: getPostedOn(props.poll)\n    },\n    true\n  )\n\n  return (\n    <li\n      className=\"poll-info-creation\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n\nexport function getPoster(poll) {\n  if (poll.url.poster) {\n    return interpolate(\n      USER_URL,\n      {\n        url: escapeHtml(poll.url.poster),\n        user: escapeHtml(poll.poster_name)\n      },\n      true\n    )\n  }\n\n  return interpolate(\n    USER_SPAN,\n    {\n      user: escapeHtml(poll.poster_name)\n    },\n    true\n  )\n}\n\nexport function getPostedOn(poll) {\n  return interpolate(\n    DATE_ABBR,\n    {\n      absolute: escapeHtml(poll.posted_on.format(\"LLL\")),\n      relative: escapeHtml(poll.posted_on.fromNow())\n    },\n    true\n  )\n}\n\nexport function PollLength(props) {\n  if (!props.poll.length) {\n    return null\n  }\n\n  const message = interpolate(\n    escapeHtml(gettext(\"Voting ends %(ends_on)s.\")),\n    {\n      ends_on: getEndsOn(props.poll)\n    },\n    true\n  )\n\n  return (\n    <li\n      className=\"poll-info-ends-on\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n\nexport function getEndsOn(poll) {\n  return interpolate(\n    DATE_ABBR,\n    {\n      absolute: escapeHtml(poll.endsOn.format(\"LLL\")),\n      relative: escapeHtml(poll.endsOn.fromNow())\n    },\n    true\n  )\n}\n\nexport function PollVotes(props) {\n  const message = ngettext(\"%(votes)s vote.\", \"%(votes)s votes.\", props.votes)\n  const label = interpolate(\n    message,\n    {\n      votes: props.votes\n    },\n    true\n  )\n\n  return <li className=\"poll-info-votes\">{label}</li>\n}\n\nexport function PollIsPublic(props) {\n  if (!props.poll.is_public) {\n    return null\n  }\n\n  return <li className=\"poll-info-public\">{gettext(\"Votes are public.\")}</li>\n}\n","import React from \"react\"\nimport Chart from \"./chart\"\nimport Options from \"./options\"\nimport PollInfo from \"../info\"\n\nexport default function(props) {\n  return (\n    <div className=\"panel panel-default panel-poll\">\n      <div className=\"panel-body\">\n        <h2>{props.poll.question}</h2>\n        <PollInfo poll={props.poll} />\n        <Chart poll={props.poll} />\n        <Options\n          isPollOver={props.isPollOver}\n          poll={props.poll}\n          showVoting={props.showVoting}\n          thread={props.thread}\n        />\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport escapeHtml from \"misago/utils/escape-html\"\n\nconst DATE_ABBR = '<abbr title=\"%(absolute)s\">%(relative)s</abbr>'\nconst USER_SPAN = '<span class=\"item-title\">%(user)s</span>'\nconst USER_URL = '<a href=\"%(url)s\" class=\"item-title\">%(user)s</a>'\n\nexport default function(props) {\n  return (\n    <ul className=\"list-unstyled list-inline poll-help\">\n      <PollChoicesLeft choicesLeft={props.choicesLeft} />\n      <PollAllowRevote poll={props.poll} />\n    </ul>\n  )\n}\n\nexport function PollChoicesLeft({ choicesLeft }) {\n  if (choicesLeft === 0) {\n    return (\n      <li className=\"poll-help-choices-left\">\n        {gettext(\"You can't select any more choices.\")}\n      </li>\n    )\n  }\n\n  const message = ngettext(\n    \"You can select %(choices)s more choice.\",\n    \"You can select %(choices)s more choices.\",\n    choicesLeft\n  )\n\n  const label = interpolate(\n    message,\n    {\n      choices: choicesLeft\n    },\n    true\n  )\n\n  return <li className=\"poll-help-choices-left\">{label}</li>\n}\n\nexport function PollAllowRevote(props) {\n  if (props.poll.allow_revotes) {\n    return (\n      <li className=\"poll-help-allow-revotes\">\n        {gettext(\"You can change your vote later.\")}\n      </li>\n    )\n  }\n\n  return <li className=\"poll-help-no-revotes\">{gettext(\"Votes are final.\")}</li>\n}\n","import React from \"react\"\n\nexport default function(props) {\n  return (\n    <ul className=\"list-unstyled poll-select-choices\">\n      {props.choices.map(choice => {\n        return (\n          <ChoiceSelect\n            choice={choice}\n            key={choice.hash}\n            toggleChoice={props.toggleChoice}\n          />\n        )\n      })}\n    </ul>\n  )\n}\n\nexport class ChoiceSelect extends React.Component {\n  onClick = () => {\n    this.props.toggleChoice(this.props.choice.hash)\n  }\n\n  render() {\n    return (\n      <li className=\"poll-select-choice\">\n        <button\n          className={this.props.choice.selected ? \"btn btn-selected\" : \"btn\"}\n          onClick={this.onClick}\n          type=\"button\"\n        >\n          <span className=\"material-icon\">\n            {this.props.choice.selected\n              ? \"check_box\"\n              : \"check_box_outline_blank\"}\n          </span>\n          <strong>{this.props.choice.label}</strong>\n        </button>\n      </li>\n    )\n  }\n}\n","export function getChoiceFromHash(choices, hash) {\n  for (const i in choices) {\n    const choice = choices[i]\n    if (choice.hash === hash) {\n      return choice\n    }\n  }\n\n  return null\n}\n\nexport function getChoicesLeft(poll, choices) {\n  let selection = []\n  for (const i in choices) {\n    const choice = choices[i]\n    if (choice.selected) {\n      selection.push(choice)\n    }\n  }\n\n  return poll.allowed_choices - selection.length\n}\n","import React from \"react\"\nimport ChoicesHelp from \"./help\"\nimport ChoicesSelect from \"./select\"\nimport { getChoicesLeft, getChoiceFromHash } from \"./utils\"\nimport PollInfo from \"../info\"\nimport { Delete, Edit, getClassName } from \"../results/options\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport * as poll from \"misago/reducers/poll\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      choices: props.poll.choices,\n      choicesLeft: getChoicesLeft(props.poll, props.poll.choices)\n    }\n  }\n\n  toggleChoice = hash => {\n    const choice = getChoiceFromHash(this.state.choices, hash)\n\n    let choices = null\n    if (!choice.selected) {\n      choices = this.selectChoice(choice, hash)\n    } else {\n      choices = this.deselectChoice(choice, hash)\n    }\n\n    this.setState({\n      choices,\n      choicesLeft: getChoicesLeft(this.props.poll, choices)\n    })\n  }\n\n  selectChoice = (choice, hash) => {\n    const choicesLeft = getChoicesLeft(this.props.poll, this.state.choices)\n\n    if (!choicesLeft) {\n      for (const i in this.state.choices.slice()) {\n        const item = this.state.choices[i]\n        if (item.selected && item.hash != hash) {\n          item.selected = false\n          break\n        }\n      }\n    }\n\n    return this.state.choices.map(choice => {\n      return Object.assign({}, choice, {\n        selected: choice.hash == hash ? true : choice.selected\n      })\n    })\n  }\n\n  deselectChoice = (choice, hash) => {\n    return this.state.choices.map(choice => {\n      return Object.assign({}, choice, {\n        selected: choice.hash == hash ? false : choice.selected\n      })\n    })\n  }\n\n  clean() {\n    if (this.state.choicesLeft === this.props.poll.allowed_choices) {\n      snackbar.error(gettext(\"You need to select at least one choice\"))\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    let data = []\n    for (const i in this.state.choices.slice()) {\n      const item = this.state.choices[i]\n      if (item.selected) {\n        data.push(item.hash)\n      }\n    }\n\n    return ajax.post(this.props.poll.api.votes, data)\n  }\n\n  handleSuccess(data) {\n    store.dispatch(poll.replace(data))\n    snackbar.success(gettext(\"Your vote has been saved.\"))\n\n    this.props.showResults()\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      snackbar.error(rejection.detail)\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    const controls = []\n\n    if (this.props.poll.acl.can_vote) controls.push(0)\n    if (this.props.poll.is_public || this.props.poll.acl.can_see_votes)\n      controls.push(1)\n    if (this.props.poll.acl.can_edit) controls.push(2)\n    if (this.props.poll.acl.can_delete) controls.push(3)\n\n    return (\n      <div className=\"panel panel-default panel-poll\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"panel-body\">\n            <h2>{this.props.poll.question}</h2>\n            <PollInfo poll={this.props.poll} />\n            <ChoicesSelect\n              choices={this.state.choices}\n              toggleChoice={this.toggleChoice}\n            />\n            <ChoicesHelp\n              choicesLeft={this.state.choicesLeft}\n              poll={this.props.poll}\n            />\n          </div>\n          <div className=\"panel-footer\">\n            <div className=\"row\">\n              <div className={getClassName(controls, 0)}>\n                <Button\n                  className=\"btn-primary btn-block btn-sm\"\n                  loading={this.state.isLoading}\n                >\n                  {gettext(\"Save your vote\")}\n                </Button>\n              </div>\n              <div className={getClassName(controls, 1)}>\n                <button\n                  className=\"btn btn-default btn-block btn-sm\"\n                  disabled={this.state.isLoading}\n                  onClick={this.props.showResults}\n                  type=\"button\"\n                >\n                  {gettext(\"See results\")}\n                </button>\n              </div>\n              <Edit\n                controls={controls}\n                poll={this.props.poll}\n                thread={this.props.thread}\n              />\n              <Delete controls={controls} poll={this.props.poll} />\n            </div>\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport moment from \"moment\"\nimport Results from \"./results\"\nimport Voting from \"./voting\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    let showResults = true\n    if (props.user.id && !props.poll.hasSelectedChoices) {\n      showResults = false\n    }\n\n    this.state = {\n      showResults\n    }\n  }\n\n  showResults = () => {\n    this.setState({\n      showResults: true\n    })\n  }\n\n  showVoting = () => {\n    this.setState({\n      showResults: false\n    })\n  }\n\n  render() {\n    if (!this.props.thread.poll) return null\n\n    const isPollOver = getIsPollOver(this.props.poll)\n\n    if (\n      !isPollOver &&\n      this.props.poll.acl.can_vote &&\n      !this.state.showResults\n    ) {\n      return <Voting showResults={this.showResults} {...this.props} />\n    } else {\n      return (\n        <Results\n          isPollOver={isPollOver}\n          showVoting={this.showVoting}\n          {...this.props}\n        />\n      )\n    }\n  }\n}\n\nexport function getIsPollOver(poll) {\n  if (poll.length) {\n    return moment().isAfter(poll.endsOn)\n  }\n  return false\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  onAdd = () => {\n    let choices = this.props.choices.slice()\n    choices.push({\n      hash: generateRandomHash(),\n      label: \"\"\n    })\n\n    this.props.setChoices(choices)\n  }\n\n  onChange = (hash, label) => {\n    const choices = this.props.choices.map(choice => {\n      if (choice.hash === hash) {\n        choice.label = label\n      }\n\n      return choice\n    })\n    this.props.setChoices(choices)\n  }\n\n  onDelete = hash => {\n    const choices = this.props.choices.filter(choice => {\n      return choice.hash !== hash\n    })\n    this.props.setChoices(choices)\n  }\n\n  render() {\n    return (\n      <div className=\"poll-choices-control\">\n        <ul className=\"list-group\">\n          {this.props.choices.map(choice => {\n            return (\n              <PollChoice\n                canDelete={this.props.choices.length > 2}\n                choice={choice}\n                disabled={this.props.disabled}\n                key={choice.hash}\n                onChange={this.onChange}\n                onDelete={this.onDelete}\n              />\n            )\n          })}\n        </ul>\n        <button\n          className=\"btn btn-default btn-sm\"\n          disabled={this.props.disabled}\n          onClick={this.onAdd}\n          type=\"button\"\n        >\n          {gettext(\"Add choice\")}\n        </button>\n      </div>\n    )\n  }\n}\n\nexport class PollChoice extends React.Component {\n  onChange = event => {\n    this.props.onChange(this.props.choice.hash, event.target.value)\n  }\n\n  onDelete = () => {\n    const deleteItem = window.confirm(\n      gettext(\"Are you sure you want to delete this choice?\")\n    )\n    if (deleteItem) {\n      this.props.onDelete(this.props.choice.hash)\n    }\n  }\n\n  render() {\n    return (\n      <li className=\"list-group-item\">\n        <button\n          className=\"btn\"\n          disabled={!this.props.canDelete || this.props.disabled}\n          onClick={this.onDelete}\n          title={gettext(\"Delete this choice\")}\n          type=\"button\"\n        >\n          <span className=\"material-icon\">close</span>\n        </button>\n        <input\n          disabled={this.props.disabled}\n          maxLength=\"255\"\n          placeholder={gettext(\"choice label\")}\n          type=\"text\"\n          onChange={this.onChange}\n          value={this.props.choice.label}\n        />\n      </li>\n    )\n  }\n}\n\nexport function generateRandomHash() {\n  let randomHash = \"\"\n  while (randomHash.length != 12) {\n    randomHash = Math.random()\n      .toString(36)\n      .replace(/[^a-zA-Z0-9]+/g, \"\")\n      .substr(1, 12)\n  }\n  return randomHash\n}\n","import React from \"react\"\nimport ChoicesControl from \"./choices-control\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport YesNoSwitch from \"misago/components/yes-no-switch\"\nimport * as poll from \"misago/reducers/poll\"\nimport ajax from \"misago/services/ajax\"\nimport posting from \"misago/services/posting\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    const poll = props.poll || {\n      question: \"\",\n      choices: [\n        {\n          hash: \"choice-10000\",\n          label: \"\"\n        },\n        {\n          hash: \"choice-20000\",\n          label: \"\"\n        }\n      ],\n      length: 0,\n      allowed_choices: 1,\n      allow_revotes: 0,\n      is_public: 0\n    }\n\n    this.state = {\n      isLoading: false,\n      isEdit: !!poll.question,\n\n      question: poll.question,\n      choices: poll.choices,\n      length: poll.length,\n      allowed_choices: poll.allowed_choices,\n      allow_revotes: poll.allow_revotes,\n      is_public: poll.is_public,\n\n      validators: {\n        question: [],\n        choices: [],\n        length: [],\n        allowed_choices: []\n      },\n\n      errors: {}\n    }\n  }\n\n  setChoices = choices => {\n    const errors = Object.assign({}, errors, { choices: null })\n\n    this.setState({\n      choices,\n      errors\n    })\n  }\n\n  onCancel = () => {\n    const cancel = window.confirm(gettext(\"Are you sure you want to discard poll?\"))\n    if (cancel) {\n      posting.close()\n    }\n  }\n\n  send() {\n    const data = {\n      question: this.state.question,\n      choices: this.state.choices,\n      length: this.state.length,\n      allowed_choices: this.state.allowed_choices,\n      allow_revotes: this.state.allow_revotes,\n      is_public: this.state.is_public\n    }\n\n    if (this.state.isEdit) {\n      return ajax.put(this.props.poll.api.index, data)\n    } else {\n      return ajax.post(this.props.thread.api.poll, data)\n    }\n  }\n\n  handleSuccess(data) {\n    store.dispatch(poll.replace(data))\n\n    if (this.state.isEdit) {\n      snackbar.success(gettext(\"Poll has been edited.\"))\n    } else {\n      snackbar.success(gettext(\"Poll has been posted.\"))\n    }\n\n    posting.close()\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      if (rejection.non_field_errors) {\n        rejection.allowed_choices = rejection.non_field_errors\n      }\n\n      this.setState({\n        errors: Object.assign({}, rejection)\n      })\n\n      snackbar.error(gettext(\"Form contains errors.\"))\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"poll-form\">\n        <div className=\"container\">\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"panel panel-default panel-form\">\n              <div className=\"panel-body\">\n                <fieldset>\n                  <legend>{gettext(\"Question and choices\")}</legend>\n\n                  <FormGroup\n                    label={gettext(\"Poll question\")}\n                    for=\"id_questions\"\n                    validation={this.state.errors.question}\n                  >\n                    <input\n                      className=\"form-control\"\n                      disabled={this.state.isLoading}\n                      id=\"id_questions\"\n                      onChange={this.bindInput(\"question\")}\n                      type=\"text\"\n                      maxLength=\"255\"\n                      value={this.state.question}\n                    />\n                  </FormGroup>\n\n                  <FormGroup\n                    label={gettext(\"Available choices\")}\n                    validation={this.state.errors.choices}\n                  >\n                    <ChoicesControl\n                      choices={this.state.choices}\n                      disabled={this.state.isLoading}\n                      setChoices={this.setChoices}\n                    />\n                  </FormGroup>\n                </fieldset>\n\n                <fieldset>\n                  <legend>{gettext(\"Voting\")}</legend>\n\n                  <div className=\"row\">\n                    <div className=\"col-xs-12 col-sm-6\">\n                      <FormGroup\n                        label={gettext(\"Poll length\")}\n                        helpText={gettext(\n                          \"Enter number of days for which voting in this poll should be possible or zero to run this poll indefinitely.\"\n                        )}\n                        for=\"id_length\"\n                        validation={this.state.errors.length}\n                      >\n                        <input\n                          className=\"form-control\"\n                          disabled={this.state.isLoading}\n                          id=\"id_length\"\n                          onChange={this.bindInput(\"length\")}\n                          type=\"text\"\n                          value={this.state.length}\n                        />\n                      </FormGroup>\n                    </div>\n                    <div className=\"col-xs-12 col-sm-6\">\n                      <FormGroup\n                        label={gettext(\"Allowed choices\")}\n                        for=\"id_allowed_choices\"\n                        validation={this.state.errors.allowed_choices}\n                      >\n                        <input\n                          className=\"form-control\"\n                          disabled={this.state.isLoading}\n                          id=\"id_allowed_choices\"\n                          onChange={this.bindInput(\"allowed_choices\")}\n                          type=\"text\"\n                          maxLength=\"255\"\n                          value={this.state.allowed_choices}\n                        />\n                      </FormGroup>\n                    </div>\n                  </div>\n\n                  <div className=\"row\">\n                    <PollPublicSwitch\n                      bindInput={this.bindInput}\n                      disabled={this.state.isLoading}\n                      isEdit={this.state.isEdit}\n                      value={this.state.is_public}\n                    />\n                    <div className=\"col-xs-12 col-sm-6\">\n                      <FormGroup\n                        label={gettext(\"Allow vote changes\")}\n                        for=\"id_allow_revotes\"\n                      >\n                        <YesNoSwitch\n                          id=\"id_allow_revotes\"\n                          disabled={this.state.isLoading}\n                          iconOn=\"check\"\n                          iconOff=\"close\"\n                          labelOn={gettext(\n                            \"Allow participants to change their vote\"\n                          )}\n                          labelOff={gettext(\n                            \"Don't allow participants to change their vote\"\n                          )}\n                          onChange={this.bindInput(\"allow_revotes\")}\n                          value={this.state.allow_revotes}\n                        />\n                      </FormGroup>\n                    </div>\n                  </div>\n                </fieldset>\n              </div>\n              <div className=\"panel-footer text-right\">\n                <button\n                  className=\"btn btn-default\"\n                  disabled={this.state.isLoading}\n                  onClick={this.onCancel}\n                  type=\"button\"\n                >\n                  {gettext(\"Cancel\")}\n                </button>{\" \"}\n                <Button className=\"btn-primary\" loading={this.state.isLoading}>\n                  {this.state.isEdit\n                    ? gettext(\"Save changes\")\n                    : gettext(\"Post poll\")}\n                </Button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport function PollPublicSwitch(props) {\n  if (props.isEdit) return null\n\n  return (\n    <div className=\"col-xs-12 col-sm-6\">\n      <FormGroup\n        label={gettext(\"Make voting public\")}\n        helpText={gettext(\n          \"Making voting public will allow everyone to access detailed list of votes, showing which users voted for which choices and at which times. This option can't be changed after poll's creation. Moderators may see voting details for all polls.\"\n        )}\n        for=\"id_is_public\"\n      >\n        <YesNoSwitch\n          id=\"id_is_public\"\n          disabled={props.disabled}\n          iconOn=\"visibility\"\n          iconOff=\"visibility_off\"\n          labelOn={gettext(\"Votes are public\")}\n          labelOff={gettext(\"Votes are hidden\")}\n          onChange={props.bindInput(\"is_public\")}\n          value={props.value}\n        />\n      </FormGroup>\n    </div>\n  )\n}\n","import React from \"react\"\nimport MisagoMarkup from \"misago/components/misago-markup\"\nimport escapeHtml from \"misago/utils/escape-html\"\n\nexport default function(props) {\n  if (props.post.content) {\n    return <Default {...props} />\n  } else {\n    return <Invalid {...props} />\n  }\n}\n\nexport function Default(props) {\n  return (\n    <div className=\"post-body\">\n      <MisagoMarkup markup={props.post.content} />\n    </div>\n  )\n}\n\nexport function Invalid(props) {\n  return (\n    <div className=\"post-body post-body-invalid\">\n      <p className=\"lead\">\n        {gettext(\"This post's contents cannot be displayed.\")}\n      </p>\n      <p className=\"text-muted\">\n        {gettext(\"This error is caused by invalid post content manipulation.\")}\n      </p>\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport default function({ post }) {\n  const { category, thread } = post\n\n  const tooltip = interpolate(\n    gettext(\"posted %(posted_on)s\"),\n    {\n      posted_on: post.posted_on.format(\"LL, LT\")\n    },\n    true\n  )\n\n  return (\n    <div className=\"post-heading\">\n      <a className=\"btn btn-link item-title\" href={thread.url}>\n        {thread.title}\n      </a>\n      <a className=\"btn btn-link post-category\" href={category.url.index}>\n        {category.name}\n      </a>\n      <a\n        href={post.url.index}\n        className=\"btn btn-link posted-on\"\n        title={tooltip}\n      >\n        {post.posted_on.fromNow()}\n      </a>\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport default function({ post }) {\n  return (\n    <a className=\"btn btn-default btn-icon pull-right\" href={post.url.index}>\n      <span className=\"btn-text-left hidden-xs\">{gettext(\"See post\")}</span>\n      <span className=\"material-icon\">chevron_right</span>\n    </a>\n  )\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport GoToButton from \"./button\"\n\nexport default function({ post }) {\n  return (\n    <div className=\"post-side post-side-anonymous\">\n      <GoToButton post={post} />\n      <div className=\"media\">\n        <div className=\"media-left\">\n          <span>\n            <Avatar className=\"poster-avatar\" size={50} />\n          </span>\n        </div>\n        <div className=\"media-body\">\n          <div className=\"media-heading\">\n            <span className=\"item-title\">{post.poster_name}</span>\n          </div>\n          <span className=\"user-title user-title-anonymous\">\n            {gettext(\"Removed user\")}\n          </span>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport default function({ rank, title }) {\n  let userTitle = title || rank.title || rank.name\n\n  let className = \"user-title\"\n  if (rank.css_class) {\n    className += \" user-title-\" + rank.css_class\n  }\n\n  if (rank.is_tab) {\n    return (\n      <a className={className} href={rank.url}>\n        {userTitle}\n      </a>\n    )\n  }\n\n  return <span className={className}>{userTitle}</span>\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport GoToButton from \"./button\"\nimport UserTitle from \"./user-title\"\n\nexport default function({ post, poster }) {\n  return (\n    <div className=\"post-side post-side-registered\">\n      <GoToButton post={post} />\n      <div className=\"media\">\n        <div className=\"media-left\">\n          <a href={poster.url}>\n            <Avatar className=\"poster-avatar\" size={50} user={poster} />\n          </a>\n        </div>\n        <div className=\"media-body\">\n          <div className=\"media-heading\">\n            <a className=\"item-title\" href={poster.url}>\n              {poster.username}\n            </a>\n          </div>\n          <UserTitle title={poster.title} rank={poster.rank} />\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Anonymous from \"./anonymous\"\nimport Registered from \"./registered\"\n\nexport default function({ post, poster }) {\n  if (poster.id) {\n    return <Registered post={post} poster={poster} />\n  }\n\n  return <Anonymous post={post} />\n}\n","import React from \"react\"\nimport Body from \"./body\"\nimport Header from \"./header\"\nimport PostSide from \"./post-side\"\n\nexport default function({ post, poster }) {\n  const user = poster || post.poster\n\n  let className = \"post\"\n  if (user && user.rank.css_class) {\n    className += \" post-\" + user.rank.css_class\n  }\n\n  return (\n    <li className={className} id={\"post-\" + post.id}>\n      <div className=\"panel panel-default panel-post\">\n        <div className=\"panel-body\">\n          <PostSide post={post} poster={user} />\n          <Header post={post} />\n          <Body post={post} />\n        </div>\n      </div>\n    </li>\n  )\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport * as random from \"misago/utils/random\"\n\nexport default function() {\n  return (\n    <ul className=\"posts-list post-feed ui-preview\">\n      <li className=\"post\">\n        <div className=\"panel panel-default panel-post\">\n          <div className=\"panel-body\">\n            <div className=\"post-side post-side-anonymous\">\n              <div className=\"media\">\n                <div className=\"media-left\">\n                  <span>\n                    <Avatar className=\"poster-avatar\" size={50} />\n                  </span>\n                </div>\n                <div className=\"media-body\">\n                  <div className=\"media-heading\">\n                    <span className=\"item-title\">\n                      <span\n                        className=\"ui-preview-text\"\n                        style={{ width: random.int(30, 200) + \"px\" }}\n                      >\n                        &nbsp;\n                      </span>\n                    </span>\n                  </div>\n                  <span className=\"user-title user-title-anonymous\">\n                    <span\n                      className=\"ui-preview-text\"\n                      style={{ width: random.int(30, 200) + \"px\" }}\n                    >\n                      &nbsp;\n                    </span>\n                  </span>\n                </div>\n              </div>\n            </div>\n            <div className=\"post-heading\">\n              <span\n                className=\"ui-preview-text\"\n                style={{ width: random.int(30, 200) + \"px\" }}\n              >\n                &nbsp;\n              </span>\n            </div>\n            <div className=\"post-body\">\n              <article className=\"misago-markup\">\n                <p>\n                  <span\n                    className=\"ui-preview-text\"\n                    style={{ width: random.int(30, 200) + \"px\" }}\n                  >\n                    &nbsp;\n                  </span>\n                  &nbsp;\n                  <span\n                    className=\"ui-preview-text\"\n                    style={{ width: random.int(30, 200) + \"px\" }}\n                  >\n                    &nbsp;\n                  </span>\n                  &nbsp;\n                  <span\n                    className=\"ui-preview-text\"\n                    style={{ width: random.int(30, 200) + \"px\" }}\n                  >\n                    &nbsp;\n                  </span>\n                </p>\n              </article>\n            </div>\n          </div>\n        </div>\n      </li>\n    </ul>\n  )\n}\n","import React from \"react\"\nimport Post from \"./post\"\nimport Preview from \"./preview\"\n\nexport default function({ isReady, posts, poster }) {\n  if (!isReady) {\n    return <Preview />\n  }\n\n  return (\n    <ul className=\"posts-list post-feed ui-ready\">\n      {posts.map(post => {\n        return <Post key={post.id} post={post} poster={poster} />\n      })}\n    </ul>\n  )\n}\n","import { maxLength, minLength } from \"misago/utils/validators\"\nimport misago from \"misago\"\n\nexport function getTitleValidators() {\n  return [getTitleLengthMin(), getTitleLengthMax()]\n}\n\nexport function getPostValidators() {\n  if (misago.get(\"SETTINGS\").post_length_max) {\n    return [validatePostLengthMin(), validatePostLengthMax()]\n  } else {\n    return [validatePostLengthMin()]\n  }\n}\n\nexport function getTitleLengthMin() {\n  return minLength(\n    misago.get(\"SETTINGS\").thread_title_length_min,\n    (limitValue, length) => {\n      const message = ngettext(\n        \"Thread title should be at least %(limit_value)s character long (it has %(show_value)s).\",\n        \"Thread title should be at least %(limit_value)s characters long (it has %(show_value)s).\",\n        limitValue\n      )\n\n      return interpolate(\n        message,\n        {\n          limit_value: limitValue,\n          show_value: length\n        },\n        true\n      )\n    }\n  )\n}\n\nexport function getTitleLengthMax() {\n  return maxLength(\n    misago.get(\"SETTINGS\").thread_title_length_max,\n    (limitValue, length) => {\n      const message = ngettext(\n        \"Thread title cannot be longer than %(limit_value)s character (it has %(show_value)s).\",\n        \"Thread title cannot be longer than %(limit_value)s characters (it has %(show_value)s).\",\n        limitValue\n      )\n\n      return interpolate(\n        message,\n        {\n          limit_value: limitValue,\n          show_value: length\n        },\n        true\n      )\n    }\n  )\n}\n\nexport function validatePostLengthMin() {\n  return minLength(\n    misago.get(\"SETTINGS\").post_length_min,\n    (limitValue, length) => {\n      const message = ngettext(\n        \"Posted message should be at least %(limit_value)s character long (it has %(show_value)s).\",\n        \"Posted message should be at least %(limit_value)s characters long (it has %(show_value)s).\",\n        limitValue\n      )\n\n      return interpolate(\n        message,\n        {\n          limit_value: limitValue,\n          show_value: length\n        },\n        true\n      )\n    }\n  )\n}\n\nexport function validatePostLengthMax() {\n  return maxLength(\n    misago.get(\"SETTINGS\").post_length_max || 1000000,\n    (limitValue, length) => {\n      const message = ngettext(\n        \"Posted message cannot be longer than %(limit_value)s character (it has %(show_value)s).\",\n        \"Posted message cannot be longer than %(limit_value)s characters (it has %(show_value)s).\",\n        limitValue\n      )\n\n      return interpolate(\n        message,\n        {\n          limit_value: limitValue,\n          show_value: length\n        },\n        true\n      )\n    }\n  )\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  getChoice() {\n    let choice = null\n    this.props.choices.map(item => {\n      if (item.value === this.props.value) {\n        choice = item\n      }\n    })\n    return choice\n  }\n\n  getIcon() {\n    return this.getChoice().icon\n  }\n\n  getLabel() {\n    return this.getChoice().label\n  }\n\n  change = value => {\n    return () => {\n      this.props.onChange({\n        target: {\n          value: value\n        }\n      })\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"btn-group btn-select-group\">\n        <button\n          type=\"button\"\n          className=\"btn btn-select dropdown-toggle\"\n          id={this.props.id || null}\n          data-toggle=\"dropdown\"\n          aria-haspopup=\"true\"\n          aria-expanded=\"false\"\n          aria-describedby={this.props[\"aria-describedby\"] || null}\n          disabled={this.props.disabled || false}\n        >\n          <Icon icon={this.getIcon()} />\n          {this.getLabel()}\n        </button>\n        <ul className=\"dropdown-menu\">\n          {this.props.choices.map((item, i) => {\n            return (\n              <li key={i}>\n                <button\n                  type=\"button\"\n                  className=\"btn-link\"\n                  onClick={this.change(item.value)}\n                >\n                  <Icon icon={item.icon} />\n                  {item.label}\n                </button>\n              </li>\n            )\n          })}\n        </ul>\n      </div>\n    )\n  }\n}\n\nexport function Icon({ icon }) {\n  if (!icon) return null\n\n  return <span className=\"material-icon\">{icon}</span>\n}\n","import React from \"react\"\nimport misago from \"misago/index\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport StartSocialAuth from \"misago/components/StartSocialAuth\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport showBannedPage from \"misago/utils/banned-page\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n      showActivation: false,\n\n      username: \"\",\n      password: \"\",\n\n      validators: {\n        username: [],\n        password: []\n      }\n    }\n  }\n\n  clean() {\n    if (!this.isValid()) {\n      snackbar.error(gettext(\"Fill out both fields.\"))\n      return false\n    } else {\n      return true\n    }\n  }\n\n  send() {\n    return ajax.post(misago.get(\"AUTH_API\"), {\n      username: this.state.username,\n      password: this.state.password\n    })\n  }\n\n  handleSuccess() {\n    let form = $(\"#hidden-login-form\")\n\n    form.append('<input type=\"text\" name=\"username\" />')\n    form.append('<input type=\"password\" name=\"password\" />')\n\n    // fill out form with user credentials and submit it, this will tell\n    // Misago to redirect user back to right page, and will trigger browser's\n    // key ring feature\n    form.find('input[type=\"hidden\"]').val(ajax.getCsrfToken())\n    form.find('input[name=\"redirect_to\"]').val(window.location.pathname)\n    form.find('input[name=\"username\"]').val(this.state.username)\n    form.find('input[name=\"password\"]').val(this.state.password)\n    form.submit()\n\n    // keep form loading\n    this.setState({\n      isLoading: true\n    })\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      if (rejection.code === \"inactive_admin\") {\n        snackbar.info(rejection.detail)\n      } else if (rejection.code === \"inactive_user\") {\n        snackbar.info(rejection.detail)\n        this.setState({\n          showActivation: true\n        })\n      } else if (rejection.code === \"banned\") {\n        showBannedPage(rejection.detail)\n        modal.hide()\n      } else {\n        snackbar.error(rejection.detail)\n      }\n    } else if (rejection.status === 403 && rejection.ban) {\n      showBannedPage(rejection.ban)\n      modal.hide()\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  getActivationButton() {\n    if (!this.state.showActivation) return null\n\n    return (\n      <a\n        className=\"btn btn-success btn-block\"\n        href={misago.get(\"REQUEST_ACTIVATION_URL\")}\n      >\n        {gettext(\"Activate account\")}\n      </a>\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"modal-dialog modal-sm modal-sign-in\" role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              aria-label={gettext(\"Close\")}\n              className=\"close\"\n              data-dismiss=\"modal\"\n              type=\"button\"\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Sign in\")}</h4>\n          </div>\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"modal-body\">\n              <StartSocialAuth\n                buttonLabel={gettext(\"Sign in with %(site)s\")}\n                formLabel={gettext(\"Or use your forum account:\")}\n                labelClassName=\"text-center\"\n              />\n\n              <div className=\"form-group\">\n                <div className=\"control-input\">\n                  <input\n                    className=\"form-control input-lg\"\n                    disabled={this.state.isLoading}\n                    id=\"id_username\"\n                    onChange={this.bindInput(\"username\")}\n                    placeholder={gettext(\"Username or e-mail\")}\n                    type=\"text\"\n                    value={this.state.username}\n                  />\n                </div>\n              </div>\n\n              <div className=\"form-group\">\n                <div className=\"control-input\">\n                  <input\n                    className=\"form-control input-lg\"\n                    disabled={this.state.isLoading}\n                    id=\"id_password\"\n                    onChange={this.bindInput(\"password\")}\n                    placeholder={gettext(\"Password\")}\n                    type=\"password\"\n                    value={this.state.password}\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"modal-footer\">\n              {this.getActivationButton()}\n              <Button\n                className=\"btn-primary btn-block\"\n                loading={this.state.isLoading}\n              >\n                {gettext(\"Sign in\")}\n              </Button>\n              <a\n                className=\"btn btn-default btn-block\"\n                href={misago.get(\"FORGOTTEN_PASSWORD_URL\")}\n              >\n                {gettext(\"Forgot password?\")}\n              </a>\n            </div>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  getClass() {\n    return getStatusClassName(this.props.status)\n  }\n\n  render() {\n    return <span className={this.getClass()}>{this.props.children}</span>\n  }\n}\n\nexport class StatusIcon extends React.Component {\n  getIcon() {\n    if (this.props.status.is_banned) {\n      return \"remove_circle_outline\"\n    } else if (this.props.status.is_hidden) {\n      return \"help_outline\"\n    } else if (this.props.status.is_online_hidden) {\n      return \"label\"\n    } else if (this.props.status.is_offline_hidden) {\n      return \"label_outline\"\n    } else if (this.props.status.is_online) {\n      return \"lens\"\n    } else if (this.props.status.is_offline) {\n      return \"panorama_fish_eye\"\n    }\n  }\n\n  render() {\n    return <span className=\"material-icon status-icon\">{this.getIcon()}</span>\n  }\n}\n\nexport class StatusLabel extends React.Component {\n  getHelp() {\n    return getStatusDescription(this.props.user, this.props.status)\n  }\n\n  getLabel() {\n    if (this.props.status.is_banned) {\n      return gettext(\"Banned\")\n    } else if (this.props.status.is_hidden) {\n      return gettext(\"Hidden\")\n    } else if (this.props.status.is_online_hidden) {\n      return gettext(\"Online (hidden)\")\n    } else if (this.props.status.is_offline_hidden) {\n      return gettext(\"Offline (hidden)\")\n    } else if (this.props.status.is_online) {\n      return gettext(\"Online\")\n    } else if (this.props.status.is_offline) {\n      return gettext(\"Offline\")\n    }\n  }\n\n  render() {\n    return (\n      <span\n        className={this.props.className || \"status-label\"}\n        title={this.getHelp()}\n      >\n        {this.getLabel()}\n      </span>\n    )\n  }\n}\n\nexport function getStatusClassName(status) {\n  let className = \"\"\n  if (status.is_banned) {\n    className = \"banned\"\n  } else if (status.is_hidden) {\n    className = \"offline\"\n  } else if (status.is_online_hidden) {\n    className = \"online\"\n  } else if (status.is_offline_hidden) {\n    className = \"offline\"\n  } else if (status.is_online) {\n    className = \"online\"\n  } else if (status.is_offline) {\n    className = \"offline\"\n  }\n\n  return \"user-status user-\" + className\n}\n\nexport function getStatusDescription(user, status) {\n  if (status.is_banned) {\n    if (status.banned_until) {\n      return interpolate(\n        gettext(\"%(username)s is banned until %(ban_expires)s\"),\n        {\n          username: user.username,\n          ban_expires: status.banned_until.format(\"LL, LT\")\n        },\n        true\n      )\n    } else {\n      return interpolate(\n        gettext(\"%(username)s is banned\"),\n        {\n          username: user.username\n        },\n        true\n      )\n    }\n  } else if (status.is_hidden) {\n    return interpolate(\n      gettext(\"%(username)s is hiding presence\"),\n      {\n        username: user.username\n      },\n      true\n    )\n  } else if (status.is_online_hidden) {\n    return interpolate(\n      gettext(\"%(username)s is online (hidden)\"),\n      {\n        username: user.username\n      },\n      true\n    )\n  } else if (status.is_offline_hidden) {\n    return interpolate(\n      gettext(\"%(username)s was last seen %(last_click)s (hidden)\"),\n      {\n        username: user.username,\n        last_click: status.last_click.fromNow()\n      },\n      true\n    )\n  } else if (status.is_online) {\n    return interpolate(\n      gettext(\"%(username)s is online\"),\n      {\n        username: user.username\n      },\n      true\n    )\n  } else if (status.is_offline) {\n    return interpolate(\n      gettext(\"%(username)s was last seen %(last_click)s\"),\n      {\n        username: user.username,\n        last_click: status.last_click.fromNow()\n      },\n      true\n    )\n  }\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  getEmptyMessage() {\n    if (this.props.emptyMessage) {\n      return this.props.emptyMessage\n    } else {\n      return gettext(\"No name changes have been recorded for your account.\")\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"username-history ui-ready\">\n        <ul className=\"list-group\">\n          <li className=\"list-group-item empty-message\">\n            {this.getEmptyMessage()}\n          </li>\n        </ul>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\n\nexport default class extends React.Component {\n  renderUserAvatar() {\n    if (this.props.change.changed_by) {\n      return (\n        <a\n          href={this.props.change.changed_by.url}\n          className=\"user-avatar-wrapper\"\n        >\n          <Avatar user={this.props.change.changed_by} size=\"100\" />\n        </a>\n      )\n    } else {\n      return (\n        <span className=\"user-avatar-wrapper\">\n          <Avatar size=\"100\" />\n        </span>\n      )\n    }\n  }\n\n  renderUsername() {\n    if (this.props.change.changed_by) {\n      return (\n        <a href={this.props.change.changed_by.url} className=\"item-title\">\n          {this.props.change.changed_by.username}\n        </a>\n      )\n    } else {\n      return (\n        <span className=\"item-title\">\n          {this.props.change.changed_by_username}\n        </span>\n      )\n    }\n  }\n\n  render() {\n    return (\n      <li className=\"list-group-item\" key={this.props.change.id}>\n        <div className=\"change-avatar\">{this.renderUserAvatar()}</div>\n        <div className=\"change-author\">{this.renderUsername()}</div>\n        <div className=\"change\">\n          <span className=\"old-username\">{this.props.change.old_username}</span>\n          <span className=\"material-icon\">arrow_forward</span>\n          <span className=\"new-username\">{this.props.change.new_username}</span>\n        </div>\n        <div className=\"change-date\">\n          <abbr title={this.props.change.changed_on.format(\"LLL\")}>\n            {this.props.change.changed_on.fromNow()}\n          </abbr>\n        </div>\n      </li>\n    )\n  }\n}\n","import React from \"react\"\nimport Change from \"misago/components/username-history/change\"\n\nexport default class extends React.Component {\n  render() {\n    return (\n      <div className=\"username-history ui-ready\">\n        <ul className=\"list-group\">\n          {this.props.changes.map(change => {\n            return <Change change={change} key={change.id} />\n          })}\n        </ul>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport * as random from \"misago/utils/random\"\n\nexport default class extends React.Component {\n  shouldComponentUpdate() {\n    return false\n  }\n\n  getClassName() {\n    if (this.props.hiddenOnMobile) {\n      return \"list-group-item hidden-xs hidden-sm\"\n    } else {\n      return \"list-group-item\"\n    }\n  }\n\n  render() {\n    return (\n      <li className={this.getClassName()}>\n        <div className=\"change-avatar\">\n          <span className=\"user-avatar\">\n            <Avatar size=\"100\" />\n          </span>\n        </div>\n        <div className=\"change-author\">\n          <span\n            className=\"ui-preview-text\"\n            style={{ width: random.int(30, 100) + \"px\" }}\n          >\n            &nbsp;\n          </span>\n        </div>\n        <div className=\"change\">\n          <span\n            className=\"ui-preview-text\"\n            style={{ width: random.int(30, 70) + \"px\" }}\n          >\n            &nbsp;\n          </span>\n          <span className=\"material-icon\">arrow_forward</span>\n          <span\n            className=\"ui-preview-text\"\n            style={{ width: random.int(30, 70) + \"px\" }}\n          >\n            &nbsp;\n          </span>\n        </div>\n        <div className=\"change-date\">\n          <span\n            className=\"ui-preview-text\"\n            style={{ width: random.int(80, 140) + \"px\" }}\n          >\n            &nbsp;\n          </span>\n        </div>\n      </li>\n    )\n  }\n}\n","import React from \"react\"\nimport ChangePreview from \"misago/components/username-history/change-preview\"\n\nexport default class extends React.Component {\n  shouldComponentUpdate() {\n    return false\n  }\n\n  render() {\n    return (\n      <div className=\"username-history ui-preview\">\n        <ul className=\"list-group\">\n          {[0, 1, 2].map(i => {\n            return <ChangePreview hiddenOnMobile={i > 0} key={i} />\n          })}\n        </ul>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport ListEmpty from \"misago/components/username-history/list-empty\"\nimport ListReady from \"misago/components/username-history/list-ready\"\nimport ListPreview from \"misago/components/username-history/list-preview\"\n\nexport default class extends React.Component {\n  render() {\n    if (this.props.isLoaded) {\n      if (this.props.changes.length) {\n        return <ListReady changes={this.props.changes} />\n      } else {\n        return <ListEmpty emptyMessage={this.props.emptyMessage} />\n      }\n    } else {\n      return <ListPreview />\n    }\n  }\n}\n","import React from \"react\"\nimport UserStatus, { StatusLabel } from \"misago/components/user-status\"\n\nexport default function({ showStatus, user }) {\n  return (\n    <ul className=\"list-unstyled\">\n      <Status showStatus={showStatus} user={user} />\n      <JoinDate user={user} />\n      <li className=\"user-stat-divider\" />\n      <Posts user={user} />\n      <Threads user={user} />\n      <Followers user={user} />\n    </ul>\n  )\n}\n\nexport function Status({ showStatus, user }) {\n  if (!showStatus) return null\n\n  return (\n    <li className=\"user-stat-status\">\n      <UserStatus status={user.status}>\n        <StatusLabel status={user.status} user={user} />\n      </UserStatus>\n    </li>\n  )\n}\n\nexport function JoinDate({ user }) {\n  const { joined_on } = user\n\n  let title = interpolate(\n    gettext(\"Joined on %(joined_on)s\"),\n    {\n      joined_on: joined_on.format(\"LL, LT\")\n    },\n    true\n  )\n\n  let message = interpolate(\n    gettext(\"Joined %(joined_on)s\"),\n    {\n      joined_on: joined_on.fromNow()\n    },\n    true\n  )\n\n  return (\n    <li className=\"user-stat-join-date\">\n      <abbr title={title}>{message}</abbr>\n    </li>\n  )\n}\n\nexport function Posts({ user }) {\n  const className = getStatClassName(\"user-stat-posts\", user.posts)\n  const message = ngettext(\"%(posts)s post\", \"%(posts)s posts\", user.posts)\n\n  return (\n    <li className={className}>\n      {interpolate(\n        message,\n        {\n          posts: user.posts\n        },\n        true\n      )}\n    </li>\n  )\n}\n\nexport function Threads({ user }) {\n  const className = getStatClassName(\"user-stat-threads\", user.threads)\n  const message = ngettext(\n    \"%(threads)s thread\",\n    \"%(threads)s threads\",\n    user.threads\n  )\n\n  return (\n    <li className={className}>\n      {interpolate(\n        message,\n        {\n          threads: user.threads\n        },\n        true\n      )}\n    </li>\n  )\n}\n\nexport function Followers({ user }) {\n  const className = getStatClassName(\"user-stat-followers\", user.followers)\n  const message = ngettext(\n    \"%(followers)s follower\",\n    \"%(followers)s followers\",\n    user.followers\n  )\n\n  return (\n    <li className={className}>\n      {interpolate(\n        message,\n        {\n          followers: user.followers\n        },\n        true\n      )}\n    </li>\n  )\n}\n\nexport function getStatClassName(className, stat) {\n  if (stat === 0) {\n    return className + \" user-stat-empty\"\n  }\n  return className\n}\n","import React from \"react\"\n\nexport default function({ rank, title }) {\n  let userTitle = title || rank.title || rank.name\n\n  let className = \"user-title\"\n  if (rank.css_class) {\n    className += \" user-title-\" + rank.css_class\n  }\n\n  if (rank.is_tab) {\n    return (\n      <a className={className} href={rank.url}>\n        {userTitle}\n      </a>\n    )\n  }\n\n  return <span className={className}>{userTitle}</span>\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport Stats from \"./stats\"\nimport UserTitle from \"./user-title\"\n\nexport default function({ showStatus, user }) {\n  const { rank } = user\n\n  let className = \"panel user-card\"\n  if (rank.css_class) {\n    className += \" user-card-\" + rank.css_class\n  }\n\n  return (\n    <div className={className}>\n      <div className=\"panel-body\">\n        <div className=\"row\">\n          <div className=\"col-xs-3 user-card-left\">\n            <div className=\"user-card-small-avatar\">\n              <a href={user.url}>\n                <Avatar size=\"50\" size2x=\"80\" user={user} />\n              </a>\n            </div>\n          </div>\n          <div className=\"col-xs-9 col-sm-12 user-card-body\">\n            <div className=\"user-card-avatar\">\n              <a href={user.url}>\n                <Avatar size=\"150\" size2x=\"200\" user={user} />\n              </a>\n            </div>\n\n            <div className=\"user-card-username\">\n              <a href={user.url}>{user.username}</a>\n            </div>\n            <div className=\"user-card-title\">\n              <UserTitle rank={rank} title={user.title} />\n            </div>\n\n            <div className=\"user-card-stats\">\n              <Stats showStatus={showStatus} user={user} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport * as random from \"misago/utils/random\"\n\nexport default class extends React.Component {\n  shouldComponentUpdate() {\n    return false\n  }\n\n  render() {\n    return (\n      <div className=\"panel user-card user-card-preview\">\n        <div className=\"panel-body\">\n          <div className=\"row\">\n            <div className=\"col-xs-3 user-card-left\">\n              <div className=\"user-card-small-avatar\">\n                <span>\n                  <Avatar size=\"50\" size2x=\"80\" />\n                </span>\n              </div>\n            </div>\n            <div className=\"col-xs-9 col-sm-12 user-card-body\">\n              <div className=\"user-card-avatar\">\n                <span>\n                  <Avatar size=\"150\" size2x=\"200\" />\n                </span>\n              </div>\n\n              <div className=\"user-card-username\">\n                <span\n                  className=\"ui-preview-text\"\n                  style={{ width: random.int(60, 150) + \"px\" }}\n                >\n                  &nbsp;\n                </span>\n              </div>\n              <div className=\"user-card-title\">\n                <span\n                  className=\"ui-preview-text\"\n                  style={{ width: random.int(60, 150) + \"px\" }}\n                >\n                  &nbsp;\n                </span>\n              </div>\n\n              <div className=\"user-card-stats\">\n                <ul className=\"list-unstyled\">\n                  <li>\n                    <span\n                      className=\"ui-preview-text\"\n                      style={{ width: random.int(30, 70) + \"px\" }}\n                    >\n                      &nbsp;\n                    </span>\n                  </li>\n                  <li>\n                    <span\n                      className=\"ui-preview-text\"\n                      style={{ width: random.int(30, 70) + \"px\" }}\n                    >\n                      &nbsp;\n                    </span>\n                  </li>\n                  <li className=\"user-stat-divider\" />\n                  <li>\n                    <span\n                      className=\"ui-preview-text\"\n                      style={{ width: random.int(30, 70) + \"px\" }}\n                    >\n                      &nbsp;\n                    </span>\n                  </li>\n                  <li>\n                    <span\n                      className=\"ui-preview-text\"\n                      style={{ width: random.int(30, 70) + \"px\" }}\n                    >\n                      &nbsp;\n                    </span>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Card from \"./card\"\n\nexport default function({ colClassName, cols }) {\n  const list = Array.apply(null, { length: cols }).map(Number.call, Number)\n\n  return (\n    <div className=\"users-cards-list ui-preview\">\n      <div className=\"row\">\n        {list.map(i => {\n          let className = colClassName\n          if (i !== 0) className += \" hidden-xs\"\n          if (i === 3) className += \" hidden-sm\"\n\n          return (\n            <div className={className} key={i}>\n              <Card />\n            </div>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Card from \"./card\"\nimport Preview from \"./preview\"\n\nexport default function({ cols, isReady, showStatus, users }) {\n  let colClassName = \"col-xs-12 col-sm-4\"\n  if (cols === 4) {\n    colClassName += \" col-md-3\"\n  }\n\n  if (!isReady) {\n    return <Preview colClassName={colClassName} cols={cols} />\n  }\n\n  return (\n    <div className=\"users-cards-list ui-ready\">\n      <div className=\"row\">\n        {users.map(user => {\n          return (\n            <div className={colClassName} key={user.id}>\n              <Card showStatus={showStatus} user={user} />\n            </div>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      dropdown: false\n    }\n  }\n\n  toggleNav = () => {\n    this.setState({\n      dropdown: !this.state.dropdown\n    })\n  }\n\n  hideNav = () => {\n    this.setState({\n      dropdown: false\n    })\n  }\n\n  getCompactNavClassName() {\n    if (this.state.dropdown) {\n      return \"compact-nav open\"\n    } else {\n      return \"compact-nav\"\n    }\n  }\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  getClassName() {\n    if (this.props.value) {\n      return \"btn btn-yes-no btn-yes-no-on\"\n    } else {\n      return \"btn btn-yes-no btn-yes-no-off\"\n    }\n  }\n\n  getIcon() {\n    if (!!this.props.value) {\n      return this.props.iconOn || \"check_box\"\n    } else {\n      return this.props.iconOff || \"check_box_outline_blank\"\n    }\n  }\n\n  getLabel() {\n    if (!!this.props.value) {\n      return this.props.labelOn || gettext(\"yes\")\n    } else {\n      return this.props.labelOff || gettext(\"no\")\n    }\n  }\n\n  toggle = () => {\n    this.props.onChange({\n      target: {\n        value: !this.props.value\n      }\n    })\n  }\n\n  render() {\n    return (\n      <button\n        type=\"button\"\n        onClick={this.toggle}\n        className={this.getClassName()}\n        id={this.props.id || null}\n        aria-describedby={this.props[\"aria-describedby\"] || null}\n        disabled={this.props.disabled || false}\n      >\n        <span className=\"material-icon\">{this.getIcon()}</span>\n        <span className=\"btn-text\">{this.getLabel()}</span>\n      </button>\n    )\n  }\n}\n","class OrderedList {\n  constructor(items) {\n    this.isOrdered = false\n    this._items = items || []\n  }\n\n  add(key, item, order) {\n    this._items.push({\n      key: key,\n      item: item,\n\n      after: order ? order.after || null : null,\n      before: order ? order.before || null : null\n    })\n  }\n\n  get(key, value) {\n    for (var i = 0; i < this._items.length; i++) {\n      if (this._items[i].key === key) {\n        return this._items[i].item\n      }\n    }\n\n    return value\n  }\n\n  has(key) {\n    return this.get(key) !== undefined\n  }\n\n  values() {\n    var values = []\n    for (var i = 0; i < this._items.length; i++) {\n      values.push(this._items[i].item)\n    }\n    return values\n  }\n\n  order(values_only) {\n    if (!this.isOrdered) {\n      this._items = this._order(this._items)\n      this.isOrdered = true\n    }\n\n    if (values_only || typeof values_only === \"undefined\") {\n      return this.values()\n    } else {\n      return this._items\n    }\n  }\n\n  orderedValues() {\n    return this.order(true)\n  }\n\n  _order(unordered) {\n    // Index of unordered items\n    var index = []\n    unordered.forEach(function(item) {\n      index.push(item.key)\n    })\n\n    // Ordered items\n    var ordered = []\n    var ordering = []\n\n    // First pass: register items that\n    // don't specify their order\n    unordered.forEach(function(item) {\n      if (!item.after && !item.before) {\n        ordered.push(item)\n        ordering.push(item.key)\n      }\n    })\n\n    // Second pass: register items that\n    // specify their before to \"_end\"\n    unordered.forEach(function(item) {\n      if (item.before === \"_end\") {\n        ordered.push(item)\n        ordering.push(item.key)\n      }\n    })\n\n    // Third pass: keep iterating items\n    // until we hit iterations limit or finish\n    // ordering list\n    function insertItem(item) {\n      var insertAt = -1\n      if (ordering.indexOf(item.key) === -1) {\n        if (item.after) {\n          insertAt = ordering.indexOf(item.after)\n          if (insertAt !== -1) {\n            insertAt += 1\n          }\n        } else if (item.before) {\n          insertAt = ordering.indexOf(item.before)\n        }\n\n        if (insertAt !== -1) {\n          ordered.splice(insertAt, 0, item)\n          ordering.splice(insertAt, 0, item.key)\n        }\n      }\n    }\n\n    var iterations = 200\n    while (iterations > 0 && index.length !== ordering.length) {\n      iterations -= 1\n      unordered.forEach(insertItem)\n    }\n\n    return ordered\n  }\n}\n\nexport default OrderedList\n","import \"bootstrap/js/transition\";\nimport \"bootstrap/js/affix\";\nimport \"bootstrap/js/modal\";\nimport \"bootstrap/js/dropdown\";\nimport \"at-js\";\nimport \"cropit\";\nimport \"waypoints\";\nimport \"jquery-caret\";\nimport \"highlight\";\nimport OrderedList from \"misago/utils/ordered-list\"\nimport \"misago/style/index.less\"\n\nexport class Misago {\n  constructor() {\n    this._initializers = []\n    this._context = {}\n  }\n\n  addInitializer(initializer) {\n    this._initializers.push({\n      key: initializer.name,\n\n      item: initializer.initializer,\n\n      after: initializer.after,\n      before: initializer.before\n    })\n  }\n\n  init(context) {\n    this._context = context\n\n    var initOrder = new OrderedList(this._initializers).orderedValues()\n    initOrder.forEach(initializer => {\n      initializer(this)\n    })\n  }\n\n  // context accessors\n  has(key) {\n    return !!this._context[key]\n  }\n\n  get(key, fallback) {\n    if (this.has(key)) {\n      return this._context[key]\n    } else {\n      return fallback || undefined\n    }\n  }\n\n  pop(key) {\n    if (this.has(key)) {\n      let value = this._context[key]\n      this._context[key] = null\n      return value\n    } else {\n      return undefined\n    }\n  }\n}\n\n// create  singleton\nvar misago = new Misago()\n\n// expose it globally\nwindow.misago = misago\n\n// and export it for tests and stuff\nexport default misago\n","import misago from \"misago/index\"\nimport ajax from \"misago/services/ajax\"\n\nexport default function initializer() {\n  ajax.init(misago.get(\"CSRF_COOKIE_NAME\"))\n}\n\nmisago.addInitializer({\n  name: \"ajax\",\n  initializer: initializer\n})\n","import misago from \"misago/index\"\nimport { patch } from \"misago/reducers/auth\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nconst AUTH_SYNC_RATE = 45 // sync user with backend every 45 seconds\n\nexport default function initializer(context) {\n  if (context.get(\"isAuthenticated\")) {\n    window.setInterval(function() {\n      ajax.get(context.get(\"AUTH_API\")).then(\n        function(data) {\n          store.dispatch(patch(data))\n        },\n        function(rejection) {\n          snackbar.apiError(rejection)\n        }\n      )\n    }, AUTH_SYNC_RATE * 1000)\n  }\n}\n\nmisago.addInitializer({\n  name: \"auth-sync\",\n  initializer: initializer,\n  after: \"auth\"\n})\n","import misago from \"misago/index\"\nimport auth from \"misago/services/auth\"\nimport modal from \"misago/services/modal\"\nimport store from \"misago/services/store\"\nimport storage from \"misago/services/local-storage\"\n\nexport default function initializer() {\n  auth.init(store, storage, modal)\n}\n\nmisago.addInitializer({\n  name: \"auth\",\n  initializer: initializer,\n  after: \"store\"\n})\n","import misago from \"misago/index\"\nimport ajax from \"misago/services/ajax\"\nimport captcha from \"misago/services/captcha\"\nimport include from \"misago/services/include\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default function initializer(context) {\n  captcha.init(context, ajax, include, snackbar)\n}\n\nmisago.addInitializer({\n  name: \"captcha\",\n  initializer: initializer\n})\n","import React from \"react\"\nimport ajax from \"misago/services/ajax\"\n\nexport default class AcceptAgreement extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = { submiting: false }\n  }\n\n  handleDecline = () => {\n    if (this.state.submiting) return\n\n    const confirmation = window.confirm(\n      gettext(\n        \"Declining will result in immediate deactivation and deletion of your account. This action is not reversible.\"\n      )\n    )\n    if (!confirmation) return\n\n    this.setState({ submiting: true })\n\n    ajax.post(this.props.api, { accept: false }).then(() => {\n      window.location.reload(true)\n    })\n  }\n\n  handleAccept = () => {\n    if (this.state.submiting) return\n\n    this.setState({ submiting: true })\n\n    ajax.post(this.props.api, { accept: true }).then(() => {\n      window.location.reload(true)\n    })\n  }\n\n  render() {\n    return (\n      <div>\n        <button\n          className=\"btn btn-default\"\n          disabled={this.state.submiting}\n          type=\"buton\"\n          onClick={this.handleDecline}\n        >\n          {gettext(\"Decline\")}\n        </button>\n        <button\n          className=\"btn btn-primary\"\n          disabled={this.state.submiting}\n          type=\"buton\"\n          onClick={this.handleAccept}\n        >\n          {gettext(\"Accept and continue\")}\n        </button>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport misago from \"misago/index\"\nimport AcceptAgreement from \"misago/components/accept-agreement\"\nimport mount from \"misago/utils/mount-component\"\n\nexport default function initializer(context) {\n  if (document.getElementById(\"required-agreement-mount\")) {\n    mount(\n      <AcceptAgreement api={context.get(\"REQUIRED_AGREEMENT_API\")} />,\n      \"required-agreement-mount\",\n      false\n    )\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:accept-agreement\",\n  initializer: initializer,\n  after: \"store\"\n})\n","import React from \"react\"\n\nexport default class extends React.Component {\n  refresh() {\n    window.location.reload()\n  }\n\n  getMessage() {\n    if (this.props.signedIn) {\n      return interpolate(\n        gettext(\n          \"You have signed in as %(username)s. Please refresh the page before continuing.\"\n        ),\n        { username: this.props.signedIn.username },\n        true\n      )\n    } else if (this.props.signedOut) {\n      return interpolate(\n        gettext(\n          \"%(username)s, you have been signed out. Please refresh the page before continuing.\"\n        ),\n        { username: this.props.user.username },\n        true\n      )\n    }\n  }\n\n  render() {\n    let className = \"auth-message\"\n    if (this.props.signedIn || this.props.signedOut) {\n      className += \" show\"\n    }\n\n    return (\n      <div className={className}>\n        <div className=\"container\">\n          <p className=\"lead\">{this.getMessage()}</p>\n          <p>\n            <button\n              className=\"btn btn-default\"\n              type=\"button\"\n              onClick={this.refresh}\n            >\n              {gettext(\"Reload page\")}\n            </button>\n            <span className=\"hidden-xs hidden-sm\">\n              {\" \" + gettext(\"or press F5 key.\")}\n            </span>\n          </p>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport function select(state) {\n  return {\n    user: state.auth.user,\n    signedIn: state.auth.signedIn,\n    signedOut: state.auth.signedOut\n  }\n}\n","import { connect } from \"react-redux\"\nimport misago from \"misago/index\"\nimport AuthMessage, { select } from \"misago/components/auth-message\"\nimport mount from \"misago/utils/mount-component\"\n\nexport default function initializer() {\n  mount(connect(select)(AuthMessage), \"auth-message-mount\")\n}\n\nmisago.addInitializer({\n  name: \"component:auth-message\",\n  initializer: initializer,\n  after: \"store\"\n})\n","import misago from \"misago/index\"\nimport showBannedPage from \"misago/utils/banned-page\"\n\nexport default function initializer(context) {\n  if (context.has(\"BAN_MESSAGE\")) {\n    showBannedPage(context.get(\"BAN_MESSAGE\"), false)\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:banmed-page\",\n  initializer: initializer,\n  after: \"store\"\n})\n","import React from \"react\"\n\nexport default function(props) {\n  return (\n    <div className=\"categories-list\">\n      <ul className=\"list-group\">\n        <li className=\"list-group-item empty-message\">\n          <p className=\"lead\">\n            {gettext(\n              \"No categories exist or you don't have permission to see them.\"\n            )}\n          </p>\n        </li>\n      </ul>\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport default function({ category }) {\n  if (!category.description) return null\n\n  return (\n    <div\n      className=\"category-description\"\n      dangerouslySetInnerHTML={{\n        __html: category.description.html\n      }}\n    />\n  )\n}\n","import React from \"react\"\n\nexport default function({ category }) {\n  return (\n    <div className={getClassName(category)} title={getTitle(category)}>\n      <span className=\"material-icon\">{getIcon(category)}</span>\n    </div>\n  )\n}\n\nexport function getClassName(category) {\n  if (category.is_read) {\n    return \"read-status item-read\"\n  }\n\n  return \"read-status item-new\"\n}\n\nexport function getTitle(category) {\n  if (category.is_closed) {\n    if (category.is_read) {\n      return gettext(\"This category has no new posts. (closed)\")\n    }\n\n    return gettext(\"This category has new posts. (closed)\")\n  }\n\n  if (category.is_read) {\n    return gettext(\"This category has no new posts.\")\n  }\n\n  return gettext(\"This category has new posts.\")\n}\n\nexport function getIcon(category) {\n  if (category.is_closed) {\n    if (category.is_read) {\n      return \"lock_outline\"\n    }\n\n    return \"lock\"\n  }\n\n  if (category.is_read) {\n    return \"chat_bubble_outline\"\n  }\n\n  return \"chat_bubble\"\n}\n","import React from \"react\"\nimport Description from \"./description\"\nimport Icon from \"./icon\"\n\nexport default function({ category }) {\n  return (\n    <div className=\"col-xs-12 col-sm-6 col-md-6 category-main\">\n      <div className=\"media\">\n        <div className=\"media-left\">\n          <Icon category={category} />\n        </div>\n        <div className=\"media-body\">\n          <h4 className=\"media-heading\">\n            <a href={category.url.index}>{category.name}</a>\n          </h4>\n          <Description category={category} />\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\n\nexport default function({ category }) {\n  return (\n    <div className=\"col-xs-12 col-sm-6 col-md-4 category-last-thread\">\n      <LastThread category={category} />\n      <Empty category={category} />\n      <Private category={category} />\n      <Protected category={category} />\n    </div>\n  )\n}\n\nexport function LastThread({ category }) {\n  if (!category.acl.can_browse) return null\n  if (!category.acl.can_see_all_threads) return null\n  if (!category.last_thread_title) return null\n\n  return (\n    <div className=\"media\">\n      <div className=\"media-left hidden-xs\">\n        <LastPosterAvatar category={category} />\n      </div>\n      <div className=\"media-body\">\n        <div className=\"media-heading\">\n          <a\n            className=\"item-title thread-title\"\n            href={category.url.last_thread_new}\n            title={category.last_thread_title}\n          >\n            {category.last_thread_title}\n          </a>\n        </div>\n        <ul className=\"list-inline\">\n          <li className=\"category-last-thread-poster\">\n            <LastPosterName category={category} />\n          </li>\n          <li className=\"divider\">&#8212;</li>\n          <li className=\"category-last-thread-date\">\n            <a href={category.url.last_post}>\n              {category.last_post_on.fromNow()}\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  )\n}\n\nexport function LastPosterAvatar({ category }) {\n  if (category.last_poster) {\n    return (\n      <a\n        className=\"last-poster-avatar\"\n        href={category.last_poster.url}\n        title={category.last_poster_name}\n      >\n        <Avatar\n          className=\"media-object\"\n          size={40}\n          user={category.last_poster}\n        />\n      </a>\n    )\n  }\n\n  return (\n    <span className=\"last-poster-avatar\" title={category.last_poster_name}>\n      <Avatar className=\"media-object\" size={40} />\n    </span>\n  )\n}\n\nexport function LastPosterName({ category }) {\n  if (category.last_poster) {\n    return (\n      <a className=\"item-title\" href={category.last_poster.url}>\n        {category.last_poster_name}\n      </a>\n    )\n  }\n\n  return <span className=\"item-title\">{category.last_poster_name}</span>\n}\n\nexport function Empty({ category }) {\n  if (!category.acl.can_browse) return null\n  if (!category.acl.can_see_all_threads) return null\n  if (category.last_thread_title) return null\n\n  return (\n    <Message\n      message={gettext(\n        \"This category is empty. No threads were posted within it so far.\"\n      )}\n    />\n  )\n}\n\nexport function Private({ category }) {\n  if (!category.acl.can_browse) return null\n  if (category.acl.can_see_all_threads) return null\n\n  return (\n    <Message\n      message={gettext(\n        \"This category is private. You can see only your own threads within it.\"\n      )}\n    />\n  )\n}\n\nexport function Protected({ category }) {\n  if (category.acl.can_browse) return null\n\n  return (\n    <Message\n      message={gettext(\n        \"This category is protected. You can't browse its contents.\"\n      )}\n    />\n  )\n}\n\nexport function Message({ message }) {\n  return (\n    <div className=\"media category-thread-message\">\n      <div className=\"media-left\">\n        <span className=\"material-icon\">info_outline</span>\n      </div>\n      <div className=\"media-body\">\n        <p>{message}</p>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\n\nexport default function({ category }) {\n  return (\n    <div className=\"col-md-2 hidden-xs hidden-sm\">\n      <ul className=\"list-unstyled category-stats\">\n        <Threads threads={category.threads} />\n        <Posts posts={category.posts} />\n      </ul>\n    </div>\n  )\n}\n\nexport function Threads({ threads }) {\n  const message = ngettext(\"%(threads)s thread\", \"%(threads)s threads\", threads)\n\n  return (\n    <li className=\"category-stat-threads\">\n      {interpolate(\n        message,\n        {\n          threads: threads\n        },\n        true\n      )}\n    </li>\n  )\n}\n\nexport function Posts({ posts }) {\n  const message = ngettext(\"%(posts)s post\", \"%(posts)s posts\", posts)\n\n  return (\n    <li className=\"category-stat-posts\">\n      {interpolate(\n        message,\n        {\n          posts: posts\n        },\n        true\n      )}\n    </li>\n  )\n}\n","import React from \"react\"\n\nexport default function({ category }) {\n  let className = \"btn btn-default btn-block btn-sm btn-subcategory\"\n  if (!category.is_read) {\n    className += \" btn-subcategory-new\"\n  }\n\n  return (\n    <div className=\"col-xs-12 col-sm-4 col-md-3\">\n      <a className={className} href={category.url.index}>\n        <span className=\"material-icon\">{getIcon(category)}</span>\n        <span className=\"icon-text\">{category.name}</span>\n      </a>\n    </div>\n  )\n}\n\nexport function getIcon(category) {\n  if (category.is_closed) {\n    if (category.is_read) {\n      return \"lock_outline\"\n    }\n\n    return \"lock\"\n  }\n\n  if (category.is_read) {\n    return \"chat_bubble_outline\"\n  }\n\n  return \"chat_bubble\"\n}\n","import React from \"react\"\nimport ListItem from \"./list-item\"\n\nexport default function({ category, isFirst }) {\n  if (isFirst) return null\n  if (category.subcategories.length === 0) return null\n\n  return (\n    <div className=\"row subcategories-list\">\n      {category.subcategories.map(category => {\n        return <ListItem category={category} key={category.id} />\n      })}\n    </div>\n  )\n}\n","import React from \"react\"\nimport Main from \"./main\"\nimport LastThread from \"./last-thread\"\nimport Stats from \"./stats\"\nimport Subcategories from \"./subcategories\"\n\nexport default function({ category, isFirst }) {\n  let className = \"list-group-item\"\n\n  if (category.description) {\n    className += \" list-group-category-has-description\"\n  } else {\n    className += \" list-group-category-no-description\"\n  }\n\n  if (isFirst) {\n    className += \" list-group-item-first\"\n  }\n  if (category.css_class) {\n    className += \" list-group-category-has-flavor\"\n    className += \" list-group-item-category-\" + category.css_class\n  }\n\n  return (\n    <li className={className}>\n      <div className=\"row\">\n        <Main category={category} />\n        <Stats category={category} />\n        <LastThread category={category} />\n      </div>\n      <Subcategories category={category} isFirst={isFirst} />\n    </li>\n  )\n}\n","import React from \"react\"\nimport ListItem from \"./list-item\"\n\nexport default function({ category }) {\n  let className = \"list-group list-group-category\"\n  if (category.css_class) {\n    className += \" list-group-category-has-flavor\"\n    className += \" list-group-category-\" + category.css_class\n  }\n\n  return (\n    <ul className={className}>\n      <ListItem category={category} isFirst={true} />\n      {category.subcategories.map(category => {\n        return (\n          <ListItem category={category} isFirst={false} key={category.id} />\n        )\n      })}\n    </ul>\n  )\n}\n","import React from \"react\"\nimport Category from \"./category\"\n\nexport default function({ categories }) {\n  return (\n    <div className=\"categories-list\">\n      {categories.map(category => {\n        return <Category category={category} key={category.id} />\n      })}\n    </div>\n  )\n}\n","import moment from \"moment\"\nimport React from \"react\"\nimport Blankslate from \"./blankslate\"\nimport CategoriesList from \"./categories-list\"\nimport misago from \"misago/index\"\nimport polls from \"misago/services/polls\"\n\nconst hydrate = function(category) {\n  return Object.assign({}, category, {\n    last_post_on: category.last_post_on ? moment(category.last_post_on) : null,\n    subcategories: category.subcategories.map(hydrate)\n  })\n}\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      categories: misago.get(\"CATEGORIES\").map(hydrate)\n    }\n\n    this.startPolling(misago.get(\"CATEGORIES_API\"))\n  }\n\n  startPolling(api) {\n    polls.start({\n      poll: \"categories\",\n      url: api,\n      frequency: 180 * 1000,\n      update: this.update\n    })\n  }\n\n  update = data => {\n    this.setState({\n      categories: data.map(hydrate)\n    })\n  }\n\n  render() {\n    const { categories } = this.state\n\n    if (categories.length === 0) {\n      return <Blankslate />\n    }\n\n    return <CategoriesList categories={categories} />\n  }\n}\n\nexport function select(store) {\n  return {\n    tick: store.tick.tick\n  }\n}\n","import { connect } from \"react-redux\"\nimport Categories, { select } from \"misago/components/categories\"\nimport misago from \"misago/index\"\nimport mount from \"misago/utils/mount-component\"\n\nexport default function initializer() {\n  if (document.getElementById(\"categories-mount\")) {\n    mount(connect(select)(Categories), \"categories-mount\")\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:categories\",\n  initializer: initializer,\n  after: \"store\"\n})\n","import React from \"react\"\nimport { Link } from \"react-router\"\nimport Li from \"misago/components/li\"\nimport misago from \"misago/index\"\n\nexport function SideNav(props) {\n  return (\n    <div className=\"list-group nav-side\">\n      {props.options.map(option => {\n        return (\n          <Link\n            to={props.baseUrl + option.component + \"/\"}\n            className=\"list-group-item\"\n            activeClassName=\"active\"\n            key={option.component}\n          >\n            <span className=\"material-icon\">{option.icon}</span>\n            {option.name}\n          </Link>\n        )\n      })}\n    </div>\n  )\n}\n\nexport function CompactNav(props) {\n  return (\n    <ul\n      className={props.className || \"dropdown-menu stick-to-bottom\"}\n      role=\"menu\"\n    >\n      {props.options.map(option => {\n        return (\n          <Li\n            path={props.baseUrl + option.component + \"/\"}\n            key={option.component}\n          >\n            <Link\n              to={props.baseUrl + option.component + \"/\"}\n              onClick={props.hideNav}\n            >\n              <span className=\"material-icon hidden-sm\">{option.icon}</span>\n              {option.name}\n            </Link>\n          </Li>\n        )\n      })}\n    </ul>\n  )\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport ajax from \"misago/services/ajax\"\nimport title from \"misago/services/page-title\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport misago from \"misago\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n      password: \"\"\n    }\n  }\n\n  componentDidMount() {\n    title.set({\n      title: gettext(\"Delete account\"),\n      parent: gettext(\"Change your options\")\n    })\n  }\n\n  onPasswordChange = event => {\n    this.setState({ password: event.target.value })\n  }\n\n  handleSubmit = event => {\n    event.preventDefault()\n\n    const { isLoading, password } = this.state\n    const { user } = this.props\n\n    if (password.length == 0) {\n      snackbar.error(\n        gettext(\"Enter your password to confirm account deletion.\")\n      )\n      return false\n    }\n\n    if (isLoading) return false\n    this.setState({ isLoading: true })\n\n    ajax.post(user.api.delete, { password }).then(\n      success => {\n        window.location.href = misago.get(\"MISAGO_PATH\")\n      },\n      rejection => {\n        this.setState({ isLoading: false })\n        if (rejection.password) {\n          snackbar.error(rejection.password[0])\n        } else {\n          snackbar.apiError(rejection)\n        }\n      }\n    )\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"panel panel-danger panel-form\">\n          <div className=\"panel-heading\">\n            <h3 className=\"panel-title\">{gettext(\"Delete account\")}</h3>\n          </div>\n          <div className=\"panel-body\">\n            <p className=\"lead\">\n              {gettext(\n                \"You are going to delete your account. This action is nonreversible, and will result in following data being deleted:\"\n              )}\n            </p>\n\n            <p>\n              -{\" \"}\n              {gettext(\n                \"Stored IP addresses associated with content that you have posted will be deleted.\"\n              )}\n            </p>\n            <p>\n              -{\" \"}\n              {gettext(\n                \"Your username will become available for other user to rename to or for new user to register their account with.\"\n              )}\n            </p>\n            <p>\n              -{\" \"}\n              {gettext(\n                \"Your e-mail will become available for use in new account registration.\"\n              )}\n            </p>\n\n            <hr />\n\n            <p>\n              {gettext(\n                \"All your posted content will NOT be deleted, but username associated with it will be changed to one shared by all deleted accounts.\"\n              )}\n            </p>\n          </div>\n          <div className=\"panel-footer\">\n            <div className=\"input-group\">\n              <input\n                className=\"form-control\"\n                disabled={this.state.isLoading}\n                name=\"password-confirmation\"\n                type=\"password\"\n                placeholder={gettext(\n                  \"Enter your password to confirm account deletion.\"\n                )}\n                value={this.state.password}\n                onChange={this.onPasswordChange}\n              />\n              <span className=\"input-group-btn\">\n                <Button className=\"btn-danger\" loading={this.state.isLoading}>\n                  {gettext(\"Delete my account\")}\n                </Button>\n              </span>\n            </div>\n          </div>\n        </div>\n      </form>\n    )\n  }\n}\n","import React from \"react\"\nimport Form from \"misago/components/edit-details\"\nimport title from \"misago/services/page-title\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends React.Component {\n  componentDidMount() {\n    title.set({\n      title: gettext(\"Edit details\"),\n      parent: gettext(\"Change your options\")\n    })\n  }\n\n  onSuccess = () => {\n    snackbar.info(gettext(\"Your details have been updated.\"))\n  }\n\n  render() {\n    return (\n      <Form api={this.props.user.api.edit_details} onSuccess={this.onSuccess} />\n    )\n  }\n}\n","import React from \"react\"\nimport moment from \"moment\"\nimport Button from \"misago/components/button\"\nimport ajax from \"misago/services/ajax\"\nimport title from \"misago/services/page-title\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class DownloadData extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n      isSubmiting: false,\n      downloads: []\n    }\n  }\n\n  componentDidMount() {\n    title.set({\n      title: gettext(\"Download your data\"),\n      parent: gettext(\"Change your options\")\n    })\n\n    this.handleLoadDownloads()\n  }\n\n  handleLoadDownloads = () => {\n    ajax.get(this.props.user.api.data_downloads).then(\n      data => {\n        this.setState({\n          isLoading: false,\n          downloads: data\n        })\n      },\n      rejection => {\n        snackbar.apiError(rejection)\n      }\n    )\n  }\n\n  handleRequestDataDownload = () => {\n    this.setState({ isSubmiting: true })\n    ajax.post(this.props.user.api.request_data_download).then(\n      () => {\n        this.handleLoadDownloads()\n        snackbar.success(\n          gettext(\"Your request for data download has been registered.\")\n        )\n        this.setState({ isSubmiting: false })\n      },\n      rejection => {\n        console.log(rejection)\n        snackbar.apiError(rejection)\n        this.setState({ isSubmiting: false })\n      }\n    )\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"panel panel-default panel-form\">\n          <div className=\"panel-heading\">\n            <h3 className=\"panel-title\">{gettext(\"Download your data\")}</h3>\n          </div>\n          <div className=\"panel-body\">\n            <p>\n              {gettext(\n                'To download your data from the site, click the \"Request data download\" button. Depending on amount of data to be archived and number of users wanting to download their data at same time it may take up to few days for your download to be prepared. An e-mail with notification will be sent to you when your data is ready to be downloaded.'\n              )}\n            </p>\n\n            <p>\n              {gettext(\n                \"The download will only be available for limited amount of time, after which it will be deleted from the site and marked as expired.\"\n              )}\n            </p>\n          </div>\n          <table className=\"table\">\n            <thead>\n              <tr>\n                <th>{gettext(\"Requested on\")}</th>\n                <th className=\"col-md-4\">{gettext(\"Download\")}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.downloads.map(item => {\n                return (\n                  <tr key={item.id}>\n                    <td style={rowStyle}>\n                      {moment(item.requested_on).fromNow()}\n                    </td>\n                    <td>\n                      <DownloadButton\n                        exportFile={item.file}\n                        status={item.status}\n                      />\n                    </td>\n                  </tr>\n                )\n              })}\n              {this.state.downloads.length == 0 ? (\n                <tr>\n                  <td colSpan=\"2\">{gettext(\"You have no data downloads.\")}</td>\n                </tr>\n              ) : null}\n            </tbody>\n          </table>\n          <div className=\"panel-footer text-right\">\n            <Button\n              className=\"btn-primary\"\n              loading={this.state.isSubmiting}\n              type=\"button\"\n              onClick={this.handleRequestDataDownload}\n            >\n              {gettext(\"Request data download\")}\n            </Button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst rowStyle = {\n  verticalAlign: \"middle\"\n}\n\nconst STATUS_PENDING = 0\nconst STATUS_PROCESSING = 1\n\nconst DownloadButton = ({ exportFile, status }) => {\n  if (status === STATUS_PENDING || status === STATUS_PROCESSING) {\n    return (\n      <Button\n        className=\"btn-info btn-sm btn-block\"\n        disabled={true}\n        type=\"button\"\n      >\n        {gettext(\"Download is being prepared\")}\n      </Button>\n    )\n  }\n\n  if (exportFile) {\n    return (\n      <a className=\"btn btn-success btn-sm btn-block\" href={exportFile}>\n        {gettext(\"Download your data\")}\n      </a>\n    )\n  }\n\n  return (\n    <Button\n      className=\"btn-default btn-sm btn-block\"\n      disabled={true}\n      type=\"button\"\n    >\n      {gettext(\"Download is expired\")}\n    </Button>\n  )\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport Select from \"misago/components/select\"\nimport YesNoSwitch from \"misago/components/yes-no-switch\"\nimport { patch } from \"misago/reducers/auth\"\nimport ajax from \"misago/services/ajax\"\nimport title from \"misago/services/page-title\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      is_hiding_presence: props.user.is_hiding_presence,\n      limits_private_thread_invites_to:\n        props.user.limits_private_thread_invites_to,\n      subscribe_to_started_threads: props.user.subscribe_to_started_threads,\n      subscribe_to_replied_threads: props.user.subscribe_to_replied_threads,\n\n      errors: {}\n    }\n\n    this.privateThreadInvitesChoices = [\n      {\n        value: 0,\n        icon: \"help_outline\",\n        label: gettext(\"Everybody\")\n      },\n      {\n        value: 1,\n        icon: \"done_all\",\n        label: gettext(\"Users I follow\")\n      },\n      {\n        value: 2,\n        icon: \"highlight_off\",\n        label: gettext(\"Nobody\")\n      }\n    ]\n\n    this.subscribeToChoices = [\n      {\n        value: 0,\n        icon: \"star_border\",\n        label: gettext(\"No\")\n      },\n      {\n        value: 1,\n        icon: \"star_half\",\n        label: gettext(\"Notify\")\n      },\n      {\n        value: 2,\n        icon: \"star\",\n        label: gettext(\"Notify with e-mail\")\n      }\n    ]\n  }\n\n  send() {\n    return ajax.post(this.props.user.api.options, {\n      is_hiding_presence: this.state.is_hiding_presence,\n      limits_private_thread_invites_to: this.state\n        .limits_private_thread_invites_to,\n      subscribe_to_started_threads: this.state.subscribe_to_started_threads,\n      subscribe_to_replied_threads: this.state.subscribe_to_replied_threads\n    })\n  }\n\n  handleSuccess() {\n    store.dispatch(\n      patch({\n        is_hiding_presence: this.state.is_hiding_presence,\n        limits_private_thread_invites_to: this.state\n          .limits_private_thread_invites_to,\n        subscribe_to_started_threads: this.state.subscribe_to_started_threads,\n        subscribe_to_replied_threads: this.state.subscribe_to_replied_threads\n      })\n    )\n    snackbar.success(gettext(\"Your forum options have been changed.\"))\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      snackbar.error(gettext(\"Please reload page and try again.\"))\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  componentDidMount() {\n    title.set({\n      title: gettext(\"Forum options\"),\n      parent: gettext(\"Change your options\")\n    })\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"panel panel-default panel-form\">\n          <div className=\"panel-heading\">\n            <h3 className=\"panel-title\">{gettext(\"Change forum options\")}</h3>\n          </div>\n          <div className=\"panel-body\">\n            <fieldset>\n              <legend>{gettext(\"Privacy settings\")}</legend>\n\n              <FormGroup\n                label={gettext(\"Hide my presence\")}\n                helpText={gettext(\n                  \"If you hide your presence, only members with permission to see hidden users will see when you are online.\"\n                )}\n                for=\"id_is_hiding_presence\"\n              >\n                <YesNoSwitch\n                  id=\"id_is_hiding_presence\"\n                  disabled={this.state.isLoading}\n                  iconOn=\"visibility_off\"\n                  iconOff=\"visibility\"\n                  labelOn={gettext(\"Hide my presence from other users\")}\n                  labelOff={gettext(\"Show my presence to other users\")}\n                  onChange={this.bindInput(\"is_hiding_presence\")}\n                  value={this.state.is_hiding_presence}\n                />\n              </FormGroup>\n\n              <FormGroup\n                label={gettext(\"Private thread invitations\")}\n                for=\"id_limits_private_thread_invites_to\"\n              >\n                <Select\n                  id=\"id_limits_private_thread_invites_to\"\n                  disabled={this.state.isLoading}\n                  onChange={this.bindInput(\"limits_private_thread_invites_to\")}\n                  value={this.state.limits_private_thread_invites_to}\n                  choices={this.privateThreadInvitesChoices}\n                />\n              </FormGroup>\n            </fieldset>\n\n            <fieldset>\n              <legend>{gettext(\"Automatic subscriptions\")}</legend>\n\n              <FormGroup\n                label={gettext(\"Threads I start\")}\n                for=\"id_subscribe_to_started_threads\"\n              >\n                <Select\n                  id=\"id_subscribe_to_started_threads\"\n                  disabled={this.state.isLoading}\n                  onChange={this.bindInput(\"subscribe_to_started_threads\")}\n                  value={this.state.subscribe_to_started_threads}\n                  choices={this.subscribeToChoices}\n                />\n              </FormGroup>\n\n              <FormGroup\n                label={gettext(\"Threads I reply to\")}\n                for=\"id_subscribe_to_replied_threads\"\n              >\n                <Select\n                  id=\"id_subscribe_to_replied_threads\"\n                  disabled={this.state.isLoading}\n                  onChange={this.bindInput(\"subscribe_to_replied_threads\")}\n                  value={this.state.subscribe_to_replied_threads}\n                  choices={this.subscribeToChoices}\n                />\n              </FormGroup>\n            </fieldset>\n          </div>\n          <div className=\"panel-footer\">\n            <Button className=\"btn-primary\" loading={this.state.isLoading}>\n              {gettext(\"Save changes\")}\n            </Button>\n          </div>\n        </div>\n      </form>\n    )\n  }\n}\n","import React from \"react\"\nimport PanelLoader from \"misago/components/panel-loader\"\n\nexport default function() {\n  return (\n    <div className=\"panel panel-default panel-form\">\n      <div className=\"panel-heading\">\n        <h3 className=\"panel-title\">{gettext(\"Change username\")}</h3>\n      </div>\n      <PanelLoader />\n    </div>\n  )\n}\n","import React from \"react\"\nimport PanelMessage from \"misago/components/panel-message\"\n\nexport default class extends React.Component {\n  getHelpText() {\n    if (this.props.options.next_on) {\n      return interpolate(\n        gettext(\"You will be able to change your username %(next_change)s.\"),\n        { next_change: this.props.options.next_on.fromNow() },\n        true\n      )\n    } else {\n      return gettext(\"You have used up available name changes.\")\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"panel panel-default panel-form\">\n        <div className=\"panel-heading\">\n          <h3 className=\"panel-title\">{gettext(\"Change username\")}</h3>\n        </div>\n        <PanelMessage\n          helpText={this.getHelpText()}\n          message={gettext(\"You can't change your username at the moment.\")}\n        />\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport * as validators from \"misago/utils/validators\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      username: \"\",\n\n      validators: {\n        username: [\n          validators.usernameContent(),\n          validators.usernameMinLength(props.options.length_min),\n          validators.usernameMaxLength(props.options.length_max)\n        ]\n      },\n\n      isLoading: false\n    }\n  }\n\n  getHelpText() {\n    let phrases = []\n\n    if (this.props.options.changes_left > 0) {\n      let message = ngettext(\n        \"You can change your username %(changes_left)s more time.\",\n        \"You can change your username %(changes_left)s more times.\",\n        this.props.options.changes_left\n      )\n\n      phrases.push(\n        interpolate(\n          message,\n          {\n            changes_left: this.props.options.changes_left\n          },\n          true\n        )\n      )\n    }\n\n    if (this.props.user.acl.name_changes_expire > 0) {\n      let message = ngettext(\n        \"Used changes become available again after %(name_changes_expire)s day.\",\n        \"Used changes become available again after %(name_changes_expire)s days.\",\n        this.props.user.acl.name_changes_expire\n      )\n\n      phrases.push(\n        interpolate(\n          message,\n          {\n            name_changes_expire: this.props.user.acl.name_changes_expire\n          },\n          true\n        )\n      )\n    }\n\n    return phrases.length ? phrases.join(\" \") : null\n  }\n\n  clean() {\n    let errors = this.validate()\n    if (errors.username) {\n      snackbar.error(errors.username[0])\n      return false\n    }\n    if (this.state.username.trim() === this.props.user.username) {\n      snackbar.info(gettext(\"Your new username is same as current one.\"))\n      return false\n    } else {\n      return true\n    }\n  }\n\n  send() {\n    return ajax.post(this.props.user.api.username, {\n      username: this.state.username\n    })\n  }\n\n  handleSuccess(success) {\n    this.setState({\n      username: \"\"\n    })\n\n    this.props.complete(success.username, success.slug, success.options)\n  }\n\n  handleError(rejection) {\n    snackbar.apiError(rejection)\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"panel panel-default panel-form\">\n          <div className=\"panel-heading\">\n            <h3 className=\"panel-title\">{gettext(\"Change username\")}</h3>\n          </div>\n          <div className=\"panel-body\">\n            <FormGroup\n              label={gettext(\"New username\")}\n              for=\"id_username\"\n              helpText={this.getHelpText()}\n            >\n              <input\n                type=\"text\"\n                id=\"id_username\"\n                className=\"form-control\"\n                disabled={this.state.isLoading}\n                onChange={this.bindInput(\"username\")}\n                value={this.state.username}\n              />\n            </FormGroup>\n          </div>\n          <div className=\"panel-footer\">\n            <Button className=\"btn-primary\" loading={this.state.isLoading}>\n              {gettext(\"Change username\")}\n            </Button>\n          </div>\n        </div>\n      </form>\n    )\n  }\n}\n","import moment from \"moment\"\nimport React from \"react\"\nimport FormLoading from \"misago/components/options/change-username/form-loading\"\nimport FormLocked from \"misago/components/options/change-username/form-locked\"\nimport Form from \"misago/components/options/change-username/form\"\nimport UsernameHistory from \"misago/components/username-history/root\"\nimport misago from \"misago/index\"\nimport { hydrate, addNameChange } from \"misago/reducers/username-history\"\nimport { updateUsername } from \"misago/reducers/users\"\nimport ajax from \"misago/services/ajax\"\nimport title from \"misago/services/page-title\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoaded: false,\n      options: null\n    }\n  }\n\n  componentDidMount() {\n    title.set({\n      title: gettext(\"Change username\"),\n      parent: gettext(\"Change your options\")\n    })\n\n    Promise.all([\n      ajax.get(this.props.user.api.username),\n      ajax.get(misago.get(\"USERNAME_CHANGES_API\"), { user: this.props.user.id })\n    ]).then(data => {\n      store.dispatch(hydrate(data[1].results))\n\n      this.setState({\n        isLoaded: true,\n        options: {\n          changes_left: data[0].changes_left,\n          length_min: data[0].length_min,\n          length_max: data[0].length_max,\n          next_on: data[0].next_on ? moment(data[0].next_on) : null\n        }\n      })\n    })\n  }\n\n  onComplete = (username, slug, options) => {\n    this.setState({\n      options\n    })\n\n    store.dispatch(\n      addNameChange({ username, slug }, this.props.user, this.props.user)\n    )\n    store.dispatch(updateUsername(this.props.user, username, slug))\n\n    snackbar.success(gettext(\"Your username has been changed successfully.\"))\n  }\n\n  getChangeForm() {\n    if (!this.state.isLoaded) {\n      return <FormLoading />\n    }\n\n    if (this.state.options.changes_left === 0) {\n      return <FormLocked options={this.state.options} />\n    }\n\n    return (\n      <Form\n        complete={this.onComplete}\n        options={this.state.options}\n        user={this.props.user}\n      />\n    )\n  }\n\n  render() {\n    return (\n      <div>\n        {this.getChangeForm()}\n        <UsernameHistory\n          changes={this.props[\"username-history\"]}\n          isLoaded={this.state.isLoaded}\n        />\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport * as validators from \"misago/utils/validators\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      new_email: \"\",\n      password: \"\",\n\n      validators: {\n        new_email: [validators.email()],\n        password: []\n      },\n\n      isLoading: false\n    }\n  }\n\n  clean() {\n    let errors = this.validate()\n    let lengths = [\n      this.state.new_email.trim().length,\n      this.state.password.trim().length\n    ]\n\n    if (lengths.indexOf(0) !== -1) {\n      snackbar.error(gettext(\"Fill out all fields.\"))\n      return false\n    }\n\n    if (errors.new_email) {\n      snackbar.error(errors.new_email[0])\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    return ajax.post(this.props.user.api.change_email, {\n      new_email: this.state.new_email,\n      password: this.state.password\n    })\n  }\n\n  handleSuccess(response) {\n    this.setState({\n      new_email: \"\",\n      password: \"\"\n    })\n\n    snackbar.success(response.detail)\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      if (rejection.new_email) {\n        snackbar.error(rejection.new_email)\n      } else {\n        snackbar.error(rejection.password)\n      }\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <input type=\"type\" style={{ display: \"none\" }} />\n        <input type=\"password\" style={{ display: \"none\" }} />\n        <div className=\"panel panel-default panel-form\">\n          <div className=\"panel-heading\">\n            <h3 className=\"panel-title\">{gettext(\"Change e-mail address\")}</h3>\n          </div>\n          <div className=\"panel-body\">\n            <FormGroup label={gettext(\"New e-mail\")} for=\"id_new_email\">\n              <input\n                type=\"text\"\n                id=\"id_new_email\"\n                className=\"form-control\"\n                disabled={this.state.isLoading}\n                onChange={this.bindInput(\"new_email\")}\n                value={this.state.new_email}\n              />\n            </FormGroup>\n\n            <hr />\n\n            <FormGroup\n              label={gettext(\"Your current password\")}\n              for=\"id_confirm_email\"\n            >\n              <input\n                type=\"password\"\n                id=\"id_confirm_email\"\n                className=\"form-control\"\n                disabled={this.state.isLoading}\n                onChange={this.bindInput(\"password\")}\n                value={this.state.password}\n              />\n            </FormGroup>\n          </div>\n          <div className=\"panel-footer\">\n            <Button className=\"btn-primary\" loading={this.state.isLoading}>\n              {gettext(\"Change e-mail\")}\n            </Button>\n          </div>\n        </div>\n      </form>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      new_password: \"\",\n      repeat_password: \"\",\n      password: \"\",\n\n      validators: {\n        new_password: [],\n        repeat_password: [],\n        password: []\n      },\n\n      isLoading: false\n    }\n  }\n\n  clean() {\n    let errors = this.validate()\n    let lengths = [\n      this.state.new_password.trim().length,\n      this.state.repeat_password.trim().length,\n      this.state.password.trim().length\n    ]\n\n    if (lengths.indexOf(0) !== -1) {\n      snackbar.error(gettext(\"Fill out all fields.\"))\n      return false\n    }\n\n    if (errors.new_password) {\n      snackbar.error(errors.new_password[0])\n      return false\n    }\n\n    if (this.state.new_password !== this.state.repeat_password) {\n      snackbar.error(gettext(\"New passwords are different.\"))\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    return ajax.post(this.props.user.api.change_password, {\n      new_password: this.state.new_password,\n      password: this.state.password\n    })\n  }\n\n  handleSuccess(response) {\n    this.setState({\n      new_password: \"\",\n      repeat_password: \"\",\n      password: \"\"\n    })\n\n    snackbar.success(response.detail)\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      if (rejection.new_password) {\n        snackbar.error(rejection.new_password)\n      } else {\n        snackbar.error(rejection.password)\n      }\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <input type=\"type\" style={{ display: \"none\" }} />\n        <input type=\"password\" style={{ display: \"none\" }} />\n        <div className=\"panel panel-default panel-form\">\n          <div className=\"panel-heading\">\n            <h3 className=\"panel-title\">{gettext(\"Change password\")}</h3>\n          </div>\n          <div className=\"panel-body\">\n            <FormGroup label={gettext(\"New password\")} for=\"id_new_password\">\n              <input\n                type=\"password\"\n                id=\"id_new_password\"\n                className=\"form-control\"\n                disabled={this.state.isLoading}\n                onChange={this.bindInput(\"new_password\")}\n                value={this.state.new_password}\n              />\n            </FormGroup>\n\n            <FormGroup\n              label={gettext(\"Repeat password\")}\n              for=\"id_repeat_password\"\n            >\n              <input\n                type=\"password\"\n                id=\"id_repeat_password\"\n                className=\"form-control\"\n                disabled={this.state.isLoading}\n                onChange={this.bindInput(\"repeat_password\")}\n                value={this.state.repeat_password}\n              />\n            </FormGroup>\n\n            <hr />\n\n            <FormGroup\n              label={gettext(\"Your current password\")}\n              for=\"id_confirm_password\"\n            >\n              <input\n                type=\"password\"\n                id=\"id_confirm_password\"\n                className=\"form-control\"\n                disabled={this.state.isLoading}\n                onChange={this.bindInput(\"password\")}\n                value={this.state.password}\n              />\n            </FormGroup>\n          </div>\n          <div className=\"panel-footer\">\n            <Button className=\"btn-primary\" loading={this.state.isLoading}>\n              {gettext(\"Change password\")}\n            </Button>\n          </div>\n        </div>\n      </form>\n    )\n  }\n}\n","import React from \"react\"\nimport misago from \"misago/index\"\n\nconst UnusablePasswordMessage = () => {\n  return (\n    <div className=\"panel panel-default panel-form\">\n      <div className=\"panel-heading\">\n        <h3 className=\"panel-title\">{gettext(\"Change email or password\")}</h3>\n      </div>\n      <div className=\"panel-body panel-message-body\">\n        <div className=\"message-icon\">\n          <span className=\"material-icon\">info_outline</span>\n        </div>\n        <div className=\"message-body\">\n          <p className=\"lead\">\n            {gettext(\n              \"You need to set a password for your account to be able to change your username or email.\"\n            )}\n          </p>\n          <p className=\"help-block\">\n            <a\n              className=\"btn btn-primary\"\n              href={misago.get(\"FORGOTTEN_PASSWORD_URL\")}\n            >\n              {gettext(\"Set password\")}\n            </a>\n          </p>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default UnusablePasswordMessage\n","import React from \"react\"\nimport ChangeEmail from \"misago/components/options/sign-in-credentials/change-email\"\nimport ChangePassword from \"misago/components/options/sign-in-credentials/change-password\"\nimport misago from \"misago/index\"\nimport title from \"misago/services/page-title\"\nimport UnusablePasswordMessage from \"./UnusablePasswordMessage\"\n\nexport default class extends React.Component {\n  componentDidMount() {\n    title.set({\n      title: gettext(\"Change email or password\"),\n      parent: gettext(\"Change your options\")\n    })\n  }\n\n  render() {\n    if (!this.props.user.has_usable_password) {\n      return <UnusablePasswordMessage />\n    }\n\n    return (\n      <div>\n        <ChangeEmail user={this.props.user} />\n        <ChangePassword user={this.props.user} />\n\n        <p className=\"message-line\">\n          <span className=\"material-icon\">warning</span>\n          <a href={misago.get(\"FORGOTTEN_PASSWORD_URL\")}>\n            {gettext(\"Change forgotten password\")}\n          </a>\n        </p>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport { connect } from \"react-redux\"\nimport DropdownToggle from \"misago/components/dropdown-toggle\"\nimport { SideNav, CompactNav } from \"misago/components/options/navs\"\nimport DeleteAccount from \"misago/components/options/delete-account\"\nimport EditDetails from \"misago/components/options/edit-details\"\nimport DownloadData from \"misago/components/options/download-data\"\nimport ChangeForumOptions from \"misago/components/options/forum-options\"\nimport ChangeUsername from \"misago/components/options/change-username/root\"\nimport ChangeSignInCredentials from \"misago/components/options/sign-in-credentials/root\"\nimport WithDropdown from \"misago/components/with-dropdown\"\nimport misago from \"misago/index\"\n\nexport default class extends WithDropdown {\n  render() {\n    return (\n      <div className=\"page page-options\">\n        <div className=\"page-header-bg\">\n          <div className=\"page-header\">\n            <div className=\"container\">\n              <h1>{gettext(\"Change your options\")}</h1>\n            </div>\n            <div className=\"page-tabs visible-xs-block visible-sm-block\">\n              <div className=\"container\">\n                <CompactNav\n                  className=\"nav nav-pills\"\n                  baseUrl={misago.get(\"USERCP_URL\")}\n                  options={misago.get(\"USER_OPTIONS\")}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-md-3 hidden-xs hidden-sm\">\n              <SideNav\n                baseUrl={misago.get(\"USERCP_URL\")}\n                options={misago.get(\"USER_OPTIONS\")}\n              />\n            </div>\n            <div className=\"col-md-9\">{this.props.children}</div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport function select(store) {\n  return {\n    tick: store.tick.tick,\n    user: store.auth.user,\n    \"username-history\": store[\"username-history\"]\n  }\n}\n\nexport function paths() {\n  const paths = [\n    {\n      path: misago.get(\"USERCP_URL\") + \"forum-options/\",\n      component: connect(select)(ChangeForumOptions)\n    },\n    {\n      path: misago.get(\"USERCP_URL\") + \"edit-details/\",\n      component: connect(select)(EditDetails)\n    }\n  ]\n\n  paths.push({\n    path: misago.get(\"USERCP_URL\") + \"change-username/\",\n    component: connect(select)(ChangeUsername)\n  })\n  paths.push({\n    path: misago.get(\"USERCP_URL\") + \"sign-in-credentials/\",\n    component: connect(select)(ChangeSignInCredentials)\n  })\n\n  if (misago.get(\"ENABLE_DOWNLOAD_OWN_DATA\")) {\n    paths.push({\n      path: misago.get(\"USERCP_URL\") + \"download-data/\",\n      component: connect(select)(DownloadData)\n    })\n  }\n\n  if (misago.get(\"ENABLE_DELETE_OWN_ACCOUNT\")) {\n    paths.push({\n      path: misago.get(\"USERCP_URL\") + \"delete-account/\",\n      component: connect(select)(DeleteAccount)\n    })\n  }\n\n  return paths\n}\n","import Options, { paths } from \"misago/components/options/root\"\nimport misago from \"misago/index\"\nimport mount from \"misago/utils/routed-component\"\n\nexport default function initializer(context) {\n  if (context.has(\"USER_OPTIONS\")) {\n    mount({\n      root: misago.get(\"USERCP_URL\"),\n      component: Options,\n      paths: paths()\n    })\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:options\",\n  initializer: initializer,\n  after: \"store\"\n})\n","import moment from \"moment\"\nimport React from \"react\"\nimport PanelLoader from \"misago/components/panel-loader\"\nimport PanelMessage from \"misago/components/panel-message\"\nimport misago from \"misago/index\"\nimport polls from \"misago/services/polls\"\nimport title from \"misago/services/page-title\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    if (misago.has(\"PROFILE_BAN\")) {\n      this.initWithPreloadedData(misago.pop(\"PROFILE_BAN\"))\n    } else {\n      this.initWithoutPreloadedData()\n    }\n\n    this.startPolling(props.profile.api.ban)\n  }\n\n  initWithPreloadedData(ban) {\n    if (ban.expires_on) {\n      ban.expires_on = moment(ban.expires_on)\n    }\n\n    this.state = {\n      isLoaded: true,\n      ban\n    }\n  }\n\n  initWithoutPreloadedData() {\n    this.state = {\n      isLoaded: false\n    }\n  }\n\n  startPolling(api) {\n    polls.start({\n      poll: \"ban-details\",\n      url: api,\n      frequency: 90 * 1000,\n      update: this.update,\n      error: this.error\n    })\n  }\n\n  update = ban => {\n    if (ban.expires_on) {\n      ban.expires_on = moment(ban.expires_on)\n    }\n\n    this.setState({\n      isLoaded: true,\n      error: null,\n\n      ban\n    })\n  }\n\n  error = error => {\n    this.setState({\n      isLoaded: true,\n      error: error.detail,\n      ban: null\n    })\n  }\n\n  componentDidMount() {\n    title.set({\n      title: gettext(\"Ban details\"),\n      parent: this.props.profile.username\n    })\n  }\n\n  componentWillUnmount() {\n    polls.stop(\"ban-details\")\n  }\n\n  getUserMessage() {\n    if (this.state.ban.user_message) {\n      return (\n        <div className=\"panel-body ban-message ban-user-message\">\n          <h4>{gettext(\"User-shown ban message\")}</h4>\n          <div\n            className=\"lead\"\n            dangerouslySetInnerHTML={{\n              __html: this.state.ban.user_message.html\n            }}\n          />\n        </div>\n      )\n    } else {\n      return null\n    }\n  }\n\n  getStaffMessage() {\n    if (this.state.ban.staff_message) {\n      return (\n        <div className=\"panel-body ban-message ban-staff-message\">\n          <h4>{gettext(\"Team-shown ban message\")}</h4>\n          <div\n            className=\"lead\"\n            dangerouslySetInnerHTML={{\n              __html: this.state.ban.staff_message.html\n            }}\n          />\n        </div>\n      )\n    } else {\n      return null\n    }\n  }\n\n  getExpirationMessage() {\n    if (this.state.ban.expires_on) {\n      if (this.state.ban.expires_on.isAfter(moment())) {\n        let title = interpolate(\n          gettext(\"This ban expires on %(expires_on)s.\"),\n          {\n            expires_on: this.state.ban.expires_on.format(\"LL, LT\")\n          },\n          true\n        )\n\n        let message = interpolate(\n          gettext(\"This ban expires %(expires_on)s.\"),\n          {\n            expires_on: this.state.ban.expires_on.fromNow()\n          },\n          true\n        )\n\n        return <abbr title={title}>{message}</abbr>\n      } else {\n        return gettext(\"This ban has expired.\")\n      }\n    } else {\n      return interpolate(\n        gettext(\"%(username)s's ban is permanent.\"),\n        {\n          username: this.props.profile.username\n        },\n        true\n      )\n    }\n  }\n\n  getPanelBody() {\n    if (this.state.ban) {\n      if (Object.keys(this.state.ban).length) {\n        return (\n          <div>\n            {this.getUserMessage()}\n            {this.getStaffMessage()}\n\n            <div className=\"panel-body ban-expires\">\n              <h4>{gettext(\"Ban expiration\")}</h4>\n              <p className=\"lead\">{this.getExpirationMessage()}</p>\n            </div>\n          </div>\n        )\n      } else {\n        return (\n          <div>\n            <PanelMessage\n              message={gettext(\"No ban is active at the moment.\")}\n            />\n          </div>\n        )\n      }\n    } else if (this.state.error) {\n      return (\n        <div>\n          <PanelMessage icon=\"error_outline\" message={this.state.error} />\n        </div>\n      )\n    } else {\n      return (\n        <div>\n          <PanelLoader />\n        </div>\n      )\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"profile-ban-details\">\n        <div className=\"panel panel-default\">\n          <div className=\"panel-heading\">\n            <h3 className=\"panel-title\">{gettext(\"Ban details\")}</h3>\n          </div>\n\n          {this.getPanelBody()}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Form from \"misago/components/edit-details\"\n\nexport default function({ api, display, onCancel, onSuccess }) {\n  if (!display) return null\n\n  return <Form api={api} onCancel={onCancel} onSuccess={onSuccess} />\n}\n","import React from \"react\"\n\nexport default function({ isAuthenticated, profile }) {\n  let message = null\n  if (isAuthenticated) {\n    message = gettext(\"You are not sharing any details with others.\")\n  } else {\n    message = interpolate(\n      gettext(\"%(username)s is not sharing any details with others.\"),\n      {\n        username: profile.username\n      },\n      true\n    )\n  }\n\n  return (\n    <div className=\"panel panel-default\">\n      <div className=\"panel-body text-center lead\">{message}</div>\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport default function({ html, text, url }) {\n  if (html) {\n    return (\n      <div\n        className=\"form-control-static col-md-9\"\n        dangerouslySetInnerHTML={{ __html: html }}\n      />\n    )\n  }\n\n  return (\n    <div className=\"form-control-static col-md-9\">\n      <SafeValue text={text} url={url} />\n    </div>\n  )\n}\n\nexport function SafeValue({ text, url }) {\n  if (url) {\n    return (\n      <p>\n        <a href={url} target=\"_blank\" rel=\"nofollow\">\n          {text || url}\n        </a>\n      </p>\n    )\n  }\n\n  if (text) {\n    return <p>{text}</p>\n  }\n\n  return null\n}\n","import React from \"react\"\nimport FieldValue from \"./field-value\"\n\nexport default function(props) {\n  return (\n    <div className=\"form-group\">\n      <strong className=\"control-label col-md-3\">{props.name}:</strong>\n      <FieldValue {...props} />\n    </div>\n  )\n}\n","import React from \"react\"\nimport Field from \"./field\"\n\nexport default function({ fields, name }) {\n  return (\n    <div className=\"panel panel-default panel-profile-details-group\">\n      <div className=\"panel-heading\">\n        <h3 className=\"panel-title\">{name}</h3>\n      </div>\n      <div className=\"panel-body\">\n        <div className=\"form-horizontal\">\n          {fields.map(({ fieldname, html, name, text, url }) => {\n            return (\n              <Field\n                key={fieldname}\n                name={name}\n                html={html}\n                text={text}\n                url={url}\n              />\n            )\n          })}\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport EmptyMessage from \"./empty-message\"\nimport Group from \"./group\"\nimport Loader from \"misago/components/loader\"\n\nexport default function({\n  display,\n  groups,\n  isAuthenticated,\n  loading,\n  profile\n}) {\n  if (!display) return null\n\n  if (loading) {\n    return <Loader />\n  }\n\n  if (!groups.length) {\n    return <EmptyMessage isAuthenticated={isAuthenticated} profile={profile} />\n  }\n\n  return (\n    <div>\n      {groups.map((group, i) => {\n        return <Group fields={group.fields} key={i} name={group.name} />\n      })}\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport default function({ onEdit, showEditButton }) {\n  return (\n    <div>\n      <nav className=\"toolbar\">\n        <div className=\"row\">\n          <div className=\"col-sm-8 col-md-10\">\n            <h3 className=\"md-margin-top-no\">{gettext(\"Details\")}</h3>\n          </div>\n          <EditButton onEdit={onEdit} showEditButton={showEditButton} />\n        </div>\n      </nav>\n    </div>\n  )\n}\n\nexport function EditButton({ onEdit, showEditButton }) {\n  if (!showEditButton) return null\n\n  return (\n    <div className=\"col-sm-4 col-md-2\">\n      <button\n        className=\"btn btn-default btn-outline btn-block\"\n        onClick={onEdit}\n        type=\"button\"\n      >\n        {gettext(\"Edit\")}\n      </button>\n    </div>\n  )\n}\n","import React from \"react\"\nimport { load } from \"misago/reducers/profile-details\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends React.Component {\n  componentDidMount() {\n    const { data, dispatch, user } = this.props\n    if (data && data.id === user.id) return\n\n    ajax.get(this.props.user.api.details).then(\n      data => {\n        dispatch(load(data))\n      },\n      rejection => {\n        snackbar.apiError(rejection)\n      }\n    )\n  }\n\n  render() {\n    return this.props.children\n  }\n}\n","import React from \"react\"\nimport Form from \"./form\"\nimport GroupsList from \"./groups-list\"\nimport Header from \"./header\"\nimport ProfileDetailsData from \"misago/data/profile-details\"\nimport { load as loadDetails } from \"misago/reducers/profile-details\"\nimport title from \"misago/services/page-title\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      editing: false\n    }\n  }\n\n  componentDidMount() {\n    title.set({\n      title: gettext(\"Details\"),\n      parent: this.props.profile.username\n    })\n  }\n\n  onCancel = () => {\n    this.setState({ editing: false })\n  }\n\n  onEdit = () => {\n    this.setState({ editing: true })\n  }\n\n  onSuccess = newDetails => {\n    const { dispatch, isAuthenticated, profile } = this.props\n\n    let message = null\n    if (isAuthenticated) {\n      message = gettext(\"Your details have been updated.\")\n    } else {\n      message = interpolate(\n        gettext(\"%(username)s's details have been updated.\"),\n        {\n          username: profile.username\n        },\n        true\n      )\n    }\n\n    snackbar.info(message)\n    dispatch(loadDetails(newDetails))\n    this.setState({ editing: false })\n  }\n\n  render() {\n    const { dispatch, isAuthenticated, profile, profileDetails } = this.props\n    const loading = profileDetails.id !== profile.id\n\n    return (\n      <ProfileDetailsData\n        data={profileDetails}\n        dispatch={dispatch}\n        user={profile}\n      >\n        <div className=\"profile-details\">\n          <Header\n            onEdit={this.onEdit}\n            showEditButton={!!profileDetails.edit && !this.state.editing}\n          />\n          <GroupsList\n            display={!this.state.editing}\n            groups={profileDetails.groups}\n            isAuthenticated={isAuthenticated}\n            loading={loading}\n            profile={profile}\n          />\n          <Form\n            api={profile.api.edit_details}\n            dispatch={dispatch}\n            display={this.state.editing}\n            onCancel={this.onCancel}\n            onSuccess={this.onSuccess}\n          />\n        </div>\n      </ProfileDetailsData>\n    )\n  }\n}\n","import React from \"react\"\nimport PostFeed from \"misago/components/post-feed\"\nimport Button from \"misago/components/button\"\nimport * as posts from \"misago/reducers/posts\"\nimport title from \"misago/services/page-title\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false\n    }\n  }\n\n  loadItems(start = 0) {\n    ajax\n      .get(this.props.api, {\n        start: start || 0\n      })\n      .then(\n        data => {\n          if (start === 0) {\n            store.dispatch(posts.load(data))\n          } else {\n            store.dispatch(posts.append(data))\n          }\n\n          this.setState({\n            isLoading: false\n          })\n        },\n        rejection => {\n          this.setState({\n            isLoading: false\n          })\n\n          snackbar.apiError(rejection)\n        }\n      )\n  }\n\n  loadMore = () => {\n    this.setState({\n      isLoading: true\n    })\n\n    this.loadItems(this.props.posts.next)\n  }\n\n  componentDidMount() {\n    title.set({\n      title: this.props.title,\n      parent: this.props.profile.username\n    })\n\n    this.loadItems()\n  }\n\n  render() {\n    return (\n      <div className=\"profile-feed\">\n        <nav className=\"toolbar\">\n          <h3 className=\"toolbar-left\">{this.props.header}</h3>\n        </nav>\n        <Feed\n          isLoading={this.state.isLoading}\n          loadMore={this.loadMore}\n          {...this.props}\n        />\n      </div>\n    )\n  }\n}\n\nexport function Feed(props) {\n  if (!props.posts.results.length) {\n    return <p className=\"lead\">{props.emptyMessage}</p>\n  }\n\n  return (\n    <div>\n      <PostFeed\n        isReady={props.posts.isLoaded}\n        posts={props.posts.results}\n        poster={props.profile}\n      />\n      <LoadMoreButton\n        isLoading={props.isLoading}\n        loadMore={props.loadMore}\n        next={props.posts.next}\n      />\n    </div>\n  )\n}\n\nexport function LoadMoreButton(props) {\n  if (!props.next) return null\n\n  return (\n    <div className=\"pager-more\">\n      <Button\n        className=\"btn btn-default btn-outline\"\n        loading={props.isLoading}\n        onClick={props.loadMore}\n      >\n        {gettext(\"Show older activity\")}\n      </Button>\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  getClassName() {\n    if (this.props.className) {\n      return \"form-search \" + this.props.className\n    } else {\n      return \"form-search\"\n    }\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()}>\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          value={this.props.value}\n          onChange={this.props.onChange}\n          placeholder={this.props.placeholder || gettext(\"Search...\")}\n        />\n        <span className=\"material-icon\">search</span>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Search from \"misago/components/quick-search\"\nimport UsersList from \"misago/components/users-list\"\nimport misago from \"misago/index\"\nimport { hydrate, append } from \"misago/reducers/users\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport title from \"misago/services/page-title\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.setSpecialProps()\n\n    if (misago.has(this.PRELOADED_DATA_KEY)) {\n      this.initWithPreloadedData(misago.pop(this.PRELOADED_DATA_KEY))\n    } else {\n      this.initWithoutPreloadedData()\n    }\n  }\n\n  setSpecialProps() {\n    this.PRELOADED_DATA_KEY = \"PROFILE_FOLLOWERS\"\n    this.TITLE = gettext(\"Followers\")\n    this.API_FILTER = \"followers\"\n  }\n\n  initWithPreloadedData(data) {\n    this.state = {\n      isLoaded: true,\n      isBusy: false,\n\n      search: \"\",\n\n      count: data.count,\n      more: data.more,\n\n      page: data.page,\n      pages: data.pages\n    }\n\n    store.dispatch(hydrate(data.results))\n  }\n\n  initWithoutPreloadedData() {\n    this.state = {\n      isLoaded: false,\n      isBusy: false,\n\n      search: \"\",\n\n      count: 0,\n      more: 0,\n\n      page: 1,\n      pages: 1\n    }\n\n    this.loadUsers()\n  }\n\n  loadUsers(page = 1, search = null) {\n    const apiUrl = this.props.profile.api[this.API_FILTER]\n\n    ajax\n      .get(\n        apiUrl,\n        {\n          search: search,\n          page: page || 1\n        },\n        \"user-\" + this.API_FILTER\n      )\n      .then(\n        data => {\n          if (page === 1) {\n            store.dispatch(hydrate(data.results))\n          } else {\n            store.dispatch(append(data.results))\n          }\n\n          this.setState({\n            isLoaded: true,\n            isBusy: false,\n\n            count: data.count,\n            more: data.more,\n\n            page: data.page,\n            pages: data.pages\n          })\n        },\n        rejection => {\n          snackbar.apiError(rejection)\n        }\n      )\n  }\n\n  componentDidMount() {\n    title.set({\n      title: this.TITLE,\n      parent: this.props.profile.username\n    })\n  }\n\n  loadMore = () => {\n    this.setState({\n      isBusy: true\n    })\n\n    this.loadUsers(this.state.page + 1, this.state.search)\n  }\n\n  search = ev => {\n    this.setState({\n      isLoaded: false,\n      isBusy: true,\n\n      search: ev.target.value,\n\n      count: 0,\n      more: 0,\n\n      page: 1,\n      pages: 1\n    })\n\n    this.loadUsers(1, ev.target.value)\n  }\n\n  getLabel() {\n    if (!this.state.isLoaded) {\n      return gettext(\"Loading...\")\n    } else if (this.state.search) {\n      let message = ngettext(\n        \"Found %(users)s user.\",\n        \"Found %(users)s users.\",\n        this.state.count\n      )\n\n      return interpolate(\n        message,\n        {\n          users: this.state.count\n        },\n        true\n      )\n    } else if (this.props.profile.id === this.props.user.id) {\n      let message = ngettext(\n        \"You have %(users)s follower.\",\n        \"You have %(users)s followers.\",\n        this.state.count\n      )\n\n      return interpolate(\n        message,\n        {\n          users: this.state.count\n        },\n        true\n      )\n    } else {\n      let message = ngettext(\n        \"%(username)s has %(users)s follower.\",\n        \"%(username)s has %(users)s followers.\",\n        this.state.count\n      )\n\n      return interpolate(\n        message,\n        {\n          username: this.props.profile.username,\n          users: this.state.count\n        },\n        true\n      )\n    }\n  }\n\n  getEmptyMessage() {\n    if (this.state.search) {\n      return gettext(\"Search returned no users matching specified criteria.\")\n    } else if (this.props.user.id === this.props.profile.id) {\n      return gettext(\"You have no followers.\")\n    } else {\n      return interpolate(\n        gettext(\"%(username)s has no followers.\"),\n        {\n          username: this.props.profile.username\n        },\n        true\n      )\n    }\n  }\n\n  getMoreButton() {\n    if (!this.state.more) return null\n\n    return (\n      <div className=\"pager-more\">\n        <Button\n          className=\"btn btn-default btn-outline\"\n          loading={this.state.isBusy}\n          onClick={this.loadMore}\n        >\n          {interpolate(\n            gettext(\"Show more (%(more)s)\"),\n            {\n              more: this.state.more\n            },\n            true\n          )}\n        </Button>\n      </div>\n    )\n  }\n\n  getListBody() {\n    if (this.state.isLoaded && this.state.count === 0) {\n      return <p className=\"lead\">{this.getEmptyMessage()}</p>\n    }\n\n    return (\n      <div>\n        <UsersList\n          cols={3}\n          isReady={this.state.isLoaded}\n          users={this.props.users}\n        />\n\n        {this.getMoreButton()}\n      </div>\n    )\n  }\n\n  getClassName() {\n    return \"profile-\" + this.API_FILTER\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()}>\n        <nav className=\"toolbar\">\n          <h3 className=\"toolbar-left\">{this.getLabel()}</h3>\n\n          <Search\n            className=\"toolbar-right\"\n            value={this.state.search}\n            onChange={this.search}\n            placeholder={gettext(\"Search users...\")}\n          />\n        </nav>\n\n        {this.getListBody()}\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Followers from \"misago/components/profile/followers\"\n\nexport default class extends Followers {\n  setSpecialProps() {\n    this.PRELOADED_DATA_KEY = \"PROFILE_FOLLOWS\"\n    this.TITLE = gettext(\"Follows\")\n    this.API_FILTER = \"follows\"\n  }\n\n  getLabel() {\n    if (!this.state.isLoaded) {\n      return gettext(\"Loading...\")\n    } else if (this.state.search) {\n      let message = ngettext(\n        \"Found %(users)s user.\",\n        \"Found %(users)s users.\",\n        this.state.count\n      )\n\n      return interpolate(\n        message,\n        {\n          users: this.state.count\n        },\n        true\n      )\n    } else if (this.props.profile.id === this.props.user.id) {\n      let message = ngettext(\n        \"You are following %(users)s user.\",\n        \"You are following %(users)s users.\",\n        this.state.count\n      )\n\n      return interpolate(\n        message,\n        {\n          users: this.state.count\n        },\n        true\n      )\n    } else {\n      let message = ngettext(\n        \"%(username)s is following %(users)s user.\",\n        \"%(username)s is following %(users)s users.\",\n        this.state.count\n      )\n\n      return interpolate(\n        message,\n        {\n          username: this.props.profile.username,\n          users: this.state.count\n        },\n        true\n      )\n    }\n  }\n\n  getEmptyMessage() {\n    if (this.state.search) {\n      return gettext(\"Search returned no users matching specified criteria.\")\n    } else if (this.props.user.id === this.props.profile.id) {\n      return gettext(\"You are not following any users.\")\n    } else {\n      return interpolate(\n        gettext(\"%(username)s is not following any users.\"),\n        {\n          username: this.props.profile.username\n        },\n        true\n      )\n    }\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Search from \"misago/components/quick-search\"\nimport UsernameHistory from \"misago/components/username-history/root\"\nimport misago from \"misago/index\"\nimport { hydrate, append } from \"misago/reducers/username-history\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport title from \"misago/services/page-title\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    if (misago.has(\"PROFILE_NAME_HISTORY\")) {\n      this.initWithPreloadedData(misago.pop(\"PROFILE_NAME_HISTORY\"))\n    } else {\n      this.initWithoutPreloadedData()\n    }\n  }\n\n  initWithPreloadedData(data) {\n    this.state = {\n      isLoaded: true,\n      isBusy: false,\n\n      search: \"\",\n\n      count: data.count,\n      more: data.more,\n\n      page: data.page,\n      pages: data.pages\n    }\n\n    store.dispatch(hydrate(data.results))\n  }\n\n  initWithoutPreloadedData() {\n    this.state = {\n      isLoaded: false,\n      isBusy: false,\n\n      search: \"\",\n\n      count: 0,\n      more: 0,\n\n      page: 1,\n      pages: 1\n    }\n\n    this.loadChanges()\n  }\n\n  loadChanges(page = 1, search = null) {\n    ajax\n      .get(\n        misago.get(\"USERNAME_CHANGES_API\"),\n        {\n          user: this.props.profile.id,\n          search: search,\n          page: page || 1\n        },\n        \"search-username-history\"\n      )\n      .then(\n        data => {\n          if (page === 1) {\n            store.dispatch(hydrate(data.results))\n          } else {\n            store.dispatch(append(data.results))\n          }\n\n          this.setState({\n            isLoaded: true,\n            isBusy: false,\n\n            count: data.count,\n            more: data.more,\n\n            page: data.page,\n            pages: data.pages\n          })\n        },\n        rejection => {\n          snackbar.apiError(rejection)\n        }\n      )\n  }\n\n  componentDidMount() {\n    title.set({\n      title: gettext(\"Username history\"),\n      parent: this.props.profile.username\n    })\n  }\n\n  loadMore = () => {\n    this.setState({\n      isBusy: true\n    })\n\n    this.loadChanges(this.state.page + 1, this.state.search)\n  }\n\n  search = ev => {\n    this.setState({\n      isLoaded: false,\n      isBusy: true,\n\n      search: ev.target.value,\n\n      count: 0,\n      more: 0,\n\n      page: 1,\n      pages: 1\n    })\n\n    this.loadChanges(1, ev.target.value)\n  }\n\n  getLabel() {\n    if (!this.state.isLoaded) {\n      return gettext(\"Loading...\")\n    } else if (this.state.search) {\n      let message = ngettext(\n        \"Found %(changes)s username change.\",\n        \"Found %(changes)s username changes.\",\n        this.state.count\n      )\n\n      return interpolate(\n        message,\n        {\n          changes: this.state.count\n        },\n        true\n      )\n    } else if (this.props.profile.id === this.props.user.id) {\n      let message = ngettext(\n        \"Your username was changed %(changes)s time.\",\n        \"Your username was changed %(changes)s times.\",\n        this.state.count\n      )\n\n      return interpolate(\n        message,\n        {\n          changes: this.state.count\n        },\n        true\n      )\n    } else {\n      let message = ngettext(\n        \"%(username)s's username was changed %(changes)s time.\",\n        \"%(username)s's username was changed %(changes)s times.\",\n        this.state.count\n      )\n\n      return interpolate(\n        message,\n        {\n          username: this.props.profile.username,\n          changes: this.state.count\n        },\n        true\n      )\n    }\n  }\n\n  getEmptyMessage() {\n    if (this.state.search) {\n      return gettext(\n        \"Search returned no username changes matching specified criteria.\"\n      )\n    } else if (this.props.user.id === this.props.profile.id) {\n      return gettext(\"No name changes have been recorded for your account.\")\n    } else {\n      return interpolate(\n        gettext(\"%(username)s's username was never changed.\"),\n        {\n          username: this.props.profile.username\n        },\n        true\n      )\n    }\n  }\n\n  getMoreButton() {\n    if (!this.state.more) return null\n\n    return (\n      <div className=\"pager-more\">\n        <Button\n          className=\"btn btn-default btn-outline\"\n          loading={this.state.isBusy}\n          onClick={this.loadMore}\n        >\n          {interpolate(\n            gettext(\"Show older (%(more)s)\"),\n            {\n              more: this.state.more\n            },\n            true\n          )}\n        </Button>\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"profile-username-history\">\n        <nav className=\"toolbar\">\n          <h3 className=\"toolbar-left\">{this.getLabel()}</h3>\n\n          <Search\n            className=\"toolbar-right\"\n            value={this.state.search}\n            onChange={this.search}\n            placeholder={gettext(\"Search history...\")}\n          />\n        </nav>\n\n        <UsernameHistory\n          isLoaded={this.state.isLoaded}\n          emptyMessage={this.getEmptyMessage()}\n          changes={this.props[\"username-history\"]}\n        />\n\n        {this.getMoreButton()}\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport { patch } from \"misago/reducers/profile\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false\n    }\n  }\n\n  getClassName() {\n    if (this.props.profile.is_followed) {\n      return this.props.className + \" btn-default btn-following\"\n    } else {\n      return this.props.className + \" btn-default btn-follow\"\n    }\n  }\n\n  getIcon() {\n    if (this.props.profile.is_followed) {\n      return \"favorite\"\n    } else {\n      return \"favorite_border\"\n    }\n  }\n\n  getLabel() {\n    if (this.props.profile.is_followed) {\n      return gettext(\"Following\")\n    } else {\n      return gettext(\"Follow\")\n    }\n  }\n\n  action = () => {\n    this.setState({\n      isLoading: true\n    })\n\n    if (this.props.profile.is_followed) {\n      store.dispatch(\n        patch({\n          is_followed: false,\n          followers: this.props.profile.followers - 1\n        })\n      )\n    } else {\n      store.dispatch(\n        patch({\n          is_followed: true,\n          followers: this.props.profile.followers + 1\n        })\n      )\n    }\n\n    ajax.post(this.props.profile.api.follow).then(\n      data => {\n        this.setState({\n          isLoading: false\n        })\n\n        store.dispatch(patch(data))\n      },\n      rejection => {\n        this.setState({\n          isLoading: false\n        })\n        snackbar.apiError(rejection)\n      }\n    )\n  }\n\n  render() {\n    return (\n      <Button\n        className={this.getClassName()}\n        disabled={this.state.isLoading}\n        onClick={this.action}\n      >\n        <span className=\"material-icon\">{this.getIcon()}</span>\n        {this.getLabel()}\n      </Button>\n    )\n  }\n}\n","import React from \"react\"\nimport posting from \"misago/services/posting\"\nimport misago from \"misago\"\n\nexport default class extends React.Component {\n  onClick = () => {\n    posting.open({\n      mode: \"START_PRIVATE\",\n      submit: misago.get(\"PRIVATE_THREADS_API\"),\n\n      to: [this.props.profile]\n    })\n  }\n\n  render() {\n    const canMessage = this.props.user.acl.can_start_private_threads\n    const isProfileOwner = this.props.user.id === this.props.profile.id\n\n    if (!canMessage || isProfileOwner) return null\n\n    return (\n      <button\n        className={this.props.className}\n        onClick={this.onClick}\n        type=\"button\"\n      >\n        <span className=\"material-icon\">comment</span>\n        {gettext(\"Message\")}\n      </button>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport Loader from \"misago/components/modal-loader\"\nimport YesNoSwitch from \"misago/components/yes-no-switch\"\nimport ModalMessage from \"misago/components/modal-message\"\nimport { updateAvatar } from \"misago/reducers/users\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoaded: false,\n      isLoading: false,\n      error: null,\n\n      is_avatar_locked: \"\",\n      avatar_lock_user_message: \"\",\n      avatar_lock_staff_message: \"\"\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(this.props.profile.api.moderate_avatar).then(\n      options => {\n        this.setState({\n          isLoaded: true,\n\n          is_avatar_locked: options.is_avatar_locked,\n          avatar_lock_user_message: options.avatar_lock_user_message || \"\",\n          avatar_lock_staff_message: options.avatar_lock_staff_message || \"\"\n        })\n      },\n      rejection => {\n        this.setState({\n          isLoaded: true,\n          error: rejection.detail\n        })\n      }\n    )\n  }\n\n  clean() {\n    if (this.isValid()) {\n      return true\n    } else {\n      snackbar.error(this.validate().username[0])\n      return false\n    }\n  }\n\n  send() {\n    return ajax.post(this.props.profile.api.moderate_avatar, {\n      is_avatar_locked: this.state.is_avatar_locked,\n      avatar_lock_user_message: this.state.avatar_lock_user_message,\n      avatar_lock_staff_message: this.state.avatar_lock_staff_message\n    })\n  }\n\n  handleSuccess(apiResponse) {\n    store.dispatch(updateAvatar(this.props.profile, apiResponse.avatar_hash))\n    snackbar.success(gettext(\"Avatar controls have been changed.\"))\n  }\n\n  getFormBody() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"modal-body\">\n          <FormGroup\n            label={gettext(\"Lock avatar\")}\n            helpText={gettext(\n              \"Locking user avatar will prohibit user from changing his avatar and will reset his/her avatar to default one.\"\n            )}\n            for=\"id_is_avatar_locked\"\n          >\n            <YesNoSwitch\n              id=\"id_is_avatar_locked\"\n              disabled={this.state.isLoading}\n              iconOn=\"lock_outline\"\n              iconOff=\"lock_open\"\n              labelOn={gettext(\"Disallow user from changing avatar\")}\n              labelOff={gettext(\"Allow user to change avatar\")}\n              onChange={this.bindInput(\"is_avatar_locked\")}\n              value={this.state.is_avatar_locked}\n            />\n          </FormGroup>\n\n          <FormGroup\n            label={gettext(\"User message\")}\n            helpText={gettext(\n              \"Optional message for user explaining why he/she is prohibited form changing avatar.\"\n            )}\n            for=\"id_avatar_lock_user_message\"\n          >\n            <textarea\n              id=\"id_avatar_lock_user_message\"\n              className=\"form-control\"\n              rows=\"4\"\n              disabled={this.state.isLoading}\n              onChange={this.bindInput(\"avatar_lock_user_message\")}\n              value={this.state.avatar_lock_user_message}\n            />\n          </FormGroup>\n\n          <FormGroup\n            label={gettext(\"Staff message\")}\n            helpText={gettext(\n              \"Optional message for forum team members explaining why user is prohibited form changing avatar.\"\n            )}\n            for=\"id_avatar_lock_staff_message\"\n          >\n            <textarea\n              id=\"id_avatar_lock_staff_message\"\n              className=\"form-control\"\n              rows=\"4\"\n              disabled={this.state.isLoading}\n              onChange={this.bindInput(\"avatar_lock_staff_message\")}\n              value={this.state.avatar_lock_staff_message}\n            />\n          </FormGroup>\n        </div>\n        <div className=\"modal-footer\">\n          <button\n            type=\"button\"\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n          >\n            {gettext(\"Close\")}\n          </button>\n          <Button className=\"btn-primary\" loading={this.state.isLoading}>\n            {gettext(\"Save changes\")}\n          </Button>\n        </div>\n      </form>\n    )\n  }\n\n  getModalBody() {\n    if (this.state.error) {\n      return (\n        <ModalMessage icon=\"remove_circle_outline\" message={this.state.error} />\n      )\n    } else if (this.state.isLoaded) {\n      return this.getFormBody()\n    } else {\n      return <Loader />\n    }\n  }\n\n  getClassName() {\n    if (this.state.error) {\n      return \"modal-dialog modal-message modal-avatar-controls\"\n    } else {\n      return \"modal-dialog modal-avatar-controls\"\n    }\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()} role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"modal\"\n              aria-label={gettext(\"Close\")}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Avatar controls\")}</h4>\n          </div>\n          {this.getModalBody()}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport Loader from \"misago/components/modal-loader\"\nimport ModalMessage from \"misago/components/modal-message\"\nimport { addNameChange } from \"misago/reducers/username-history\"\nimport { updateUsername } from \"misago/reducers/users\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport * as validators from \"misago/utils/validators\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoaded: false,\n      isLoading: false,\n      error: null,\n\n      username: \"\",\n      validators: {\n        username: [validators.usernameContent()]\n      }\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(this.props.profile.api.moderate_username).then(\n      () => {\n        this.setState({\n          isLoaded: true\n        })\n      },\n      rejection => {\n        this.setState({\n          isLoaded: true,\n          error: rejection.detail\n        })\n      }\n    )\n  }\n\n  clean() {\n    if (this.isValid()) {\n      return true\n    } else {\n      snackbar.error(this.validate().username[0])\n      return false\n    }\n  }\n\n  send() {\n    return ajax.post(this.props.profile.api.moderate_username, {\n      username: this.state.username\n    })\n  }\n\n  handleSuccess(apiResponse) {\n    this.setState({\n      username: \"\"\n    })\n\n    store.dispatch(\n      addNameChange(apiResponse, this.props.profile, this.props.user)\n    )\n    store.dispatch(\n      updateUsername(this.props.profile, apiResponse.username, apiResponse.slug)\n    )\n\n    snackbar.success(gettext(\"Username has been changed.\"))\n  }\n\n  getFormBody() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"modal-body\">\n          <FormGroup label={gettext(\"New username\")} for=\"id_username\">\n            <input\n              type=\"text\"\n              id=\"id_username\"\n              className=\"form-control\"\n              disabled={this.state.isLoading}\n              onChange={this.bindInput(\"username\")}\n              value={this.state.username}\n            />\n          </FormGroup>\n        </div>\n        <div className=\"modal-footer\">\n          <button\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n            disabled={this.state.isLoading}\n            type=\"button\"\n          >\n            {gettext(\"Cancel\")}\n          </button>\n          <Button className=\"btn-primary\" loading={this.state.isLoading}>\n            {gettext(\"Change username\")}\n          </Button>\n        </div>\n      </form>\n    )\n  }\n\n  getModalBody() {\n    if (this.state.error) {\n      return (\n        <ModalMessage icon=\"remove_circle_outline\" message={this.state.error} />\n      )\n    } else if (this.state.isLoaded) {\n      return this.getFormBody()\n    } else {\n      return <Loader />\n    }\n  }\n\n  getClassName() {\n    if (this.state.error) {\n      return \"modal-dialog modal-message modal-rename-user\"\n    } else {\n      return \"modal-dialog modal-rename-user\"\n    }\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()} role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"modal\"\n              aria-label={gettext(\"Close\")}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Change username\")}</h4>\n          </div>\n          {this.getModalBody()}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport Loader from \"misago/components/modal-loader\"\nimport ModalMessage from \"misago/components/modal-message\"\nimport YesNoSwitch from \"misago/components/yes-no-switch\"\nimport misago from \"misago/index\"\nimport ajax from \"misago/services/ajax\"\nimport polls from \"misago/services/polls\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoaded: false,\n      isLoading: false,\n      isDeleted: false,\n      error: null,\n\n      countdown: 5,\n      confirm: false,\n\n      with_content: false\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(this.props.profile.api.delete).then(\n      () => {\n        this.setState({\n          isLoaded: true\n        })\n\n        this.countdown()\n      },\n      rejection => {\n        this.setState({\n          isLoaded: true,\n          error: rejection.detail\n        })\n      }\n    )\n  }\n\n  countdown = () => {\n    window.setTimeout(() => {\n      if (this.state.countdown > 1) {\n        this.setState({\n          countdown: this.state.countdown - 1\n        })\n        this.countdown()\n      } else if (!this.state.confirm) {\n        this.setState({\n          confirm: true\n        })\n      }\n    }, 1000)\n  }\n\n  send() {\n    return ajax.post(this.props.profile.api.delete, {\n      with_content: this.state.with_content\n    })\n  }\n\n  handleSuccess() {\n    polls.stop(\"user-profile\")\n\n    if (this.state.with_content) {\n      this.setState({\n        isDeleted: interpolate(\n          gettext(\n            \"%(username)s's account, threads, posts and other content has been deleted.\"\n          ),\n          {\n            username: this.props.profile.username\n          },\n          true\n        )\n      })\n    } else {\n      this.setState({\n        isDeleted: interpolate(\n          gettext(\n            \"%(username)s's account has been deleted and other content has been hidden.\"\n          ),\n          {\n            username: this.props.profile.username\n          },\n          true\n        )\n      })\n    }\n  }\n\n  getButtonLabel() {\n    if (this.state.confirm) {\n      return interpolate(\n        gettext(\"Delete %(username)s\"),\n        {\n          username: this.props.profile.username\n        },\n        true\n      )\n    } else {\n      return interpolate(\n        gettext(\"Please wait... (%(countdown)ss)\"),\n        {\n          countdown: this.state.countdown\n        },\n        true\n      )\n    }\n  }\n\n  getForm() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"modal-body\">\n          <FormGroup label={gettext(\"User content\")} for=\"id_with_content\">\n            <YesNoSwitch\n              id=\"id_with_content\"\n              disabled={this.state.isLoading}\n              labelOn={gettext(\"Delete together with user's account\")}\n              labelOff={gettext(\"Hide after deleting user's account\")}\n              onChange={this.bindInput(\"with_content\")}\n              value={this.state.with_content}\n            />\n          </FormGroup>\n        </div>\n        <div className=\"modal-footer\">\n          <button\n            type=\"button\"\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n          >\n            {gettext(\"Cancel\")}\n          </button>\n\n          <Button\n            className=\"btn-danger\"\n            loading={this.state.isLoading}\n            disabled={!this.state.confirm}\n          >\n            {this.getButtonLabel()}\n          </Button>\n        </div>\n      </form>\n    )\n  }\n\n  getDeletedBody() {\n    return (\n      <div className=\"modal-body\">\n        <div className=\"message-icon\">\n          <span className=\"material-icon\">info_outline</span>\n        </div>\n        <div className=\"message-body\">\n          <p className=\"lead\">{this.state.isDeleted}</p>\n          <p>\n            <a href={misago.get(\"USERS_LIST_URL\")}>\n              {gettext(\"Return to users list\")}\n            </a>\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  getModalBody() {\n    if (this.state.error) {\n      return (\n        <ModalMessage icon=\"remove_circle_outline\" message={this.state.error} />\n      )\n    } else if (this.state.isLoaded) {\n      if (this.state.isDeleted) {\n        return this.getDeletedBody()\n      } else {\n        return this.getForm()\n      }\n    } else {\n      return <Loader />\n    }\n  }\n\n  getClassName() {\n    if (this.state.error || this.state.isDeleted) {\n      return \"modal-dialog modal-message modal-delete-account\"\n    } else {\n      return \"modal-dialog modal-delete-account\"\n    }\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()} role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"modal\"\n              aria-label={gettext(\"Close\")}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Delete user account\")}</h4>\n          </div>\n          {this.getModalBody()}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport { connect } from \"react-redux\"\nimport AvatarControls from \"misago/components/profile/moderation/avatar-controls\"\nimport ChangeUsername from \"misago/components/profile/moderation/change-username\"\nimport DeleteAccount from \"misago/components/profile/moderation/delete-account\"\nimport modal from \"misago/services/modal\"\n\nlet select = function(store) {\n  return {\n    tick: store.tick,\n    user: store.auth,\n    profile: store.profile\n  }\n}\n\nexport default class extends React.Component {\n  showAvatarDialog = () => {\n    modal.show(connect(select)(AvatarControls))\n  }\n\n  getAvatarButton() {\n    if (this.props.profile.acl.can_moderate_avatar) {\n      return (\n        <li>\n          <button\n            type=\"button\"\n            className=\"btn btn-link\"\n            onClick={this.showAvatarDialog}\n          >\n            <span className=\"material-icon\">portrait</span>\n            {gettext(\"Avatar controls\")}\n          </button>\n        </li>\n      )\n    } else {\n      return null\n    }\n  }\n\n  showRenameDialog = () => {\n    modal.show(connect(select)(ChangeUsername))\n  }\n\n  getRenameButton() {\n    if (this.props.profile.acl.can_rename) {\n      return (\n        <li>\n          <button\n            type=\"button\"\n            className=\"btn btn-link\"\n            onClick={this.showRenameDialog}\n          >\n            <span className=\"material-icon\">credit_card</span>\n            {gettext(\"Change username\")}\n          </button>\n        </li>\n      )\n    } else {\n      return null\n    }\n  }\n\n  showDeleteDialog = () => {\n    modal.show(connect(select)(DeleteAccount))\n  }\n\n  getDeleteButton() {\n    if (this.props.profile.acl.can_delete) {\n      return (\n        <li>\n          <button\n            type=\"button\"\n            className=\"btn btn-link\"\n            onClick={this.showDeleteDialog}\n          >\n            <span className=\"material-icon\">clear</span>\n            {gettext(\"Delete account\")}\n          </button>\n        </li>\n      )\n    } else {\n      return null\n    }\n  }\n\n  render() {\n    return (\n      <ul\n        className=\"dropdown-menu dropdown-menu-right stick-to-bottom\"\n        role=\"menu\"\n      >\n        {this.getAvatarButton()}\n        {this.getRenameButton()}\n        {this.getDeleteButton()}\n      </ul>\n    )\n  }\n}\n","import React from \"react\"\nimport { Link } from \"react-router\"\nimport Li from \"misago/components/li\"\nimport FollowButton from \"misago/components/profile/follow-button\"\nimport misago from \"misago/index\"\n\nexport class SideNav extends React.Component {\n  render() {\n    return (\n      <div className=\"list-group nav-side\">\n        {this.props.pages.map(page => {\n          return (\n            <Link\n              to={this.props.baseUrl + page.component + \"/\"}\n              className=\"list-group-item\"\n              activeClassName=\"active\"\n              key={page.component}\n            >\n              <span className=\"material-icon\">{page.icon}</span>\n              {page.name}\n            </Link>\n          )\n        })}\n      </div>\n    )\n  }\n}\n\nexport function CompactNav(props) {\n  return (\n    <div className=\"page-tabs hidden-md hidden-lg\">\n      <div className=\"container\">\n        <ul className=\"nav nav-pills\" role=\"menu\">\n          {props.pages.map(page => {\n            return (\n              <Li\n                path={props.baseUrl + page.component + \"/\"}\n                key={page.component}\n              >\n                <Link\n                  to={props.baseUrl + page.component + \"/\"}\n                  onClick={props.hideNav}\n                >\n                  <span className=\"material-icon\">{page.icon}</span>\n                  {page.name}\n                </Link>\n              </Li>\n            )\n          })}\n        </ul>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport DropdownToggle from \"misago/components/dropdown-toggle\"\nimport FollowButton from \"./follow-button\"\nimport MessageButton from \"./message-button\"\nimport ModerationNav from \"./moderation/nav\"\nimport { CompactNav } from \"./navs\"\nimport Status, { StatusIcon, StatusLabel } from \"misago/components/user-status\"\n\nexport default class extends React.Component {\n  getUserStatus() {\n    return (\n      <li className=\"user-status-display\">\n        <Status user={this.props.profile} status={this.props.profile.status}>\n          <StatusIcon\n            user={this.props.profile}\n            status={this.props.profile.status}\n          />\n          <StatusLabel\n            user={this.props.profile}\n            status={this.props.profile.status}\n            className=\"status-label\"\n          />\n        </Status>\n      </li>\n    )\n  }\n\n  getUserRank() {\n    if (this.props.profile.rank.is_tab) {\n      return (\n        <li className=\"user-rank\">\n          <a href={this.props.profile.rank.url} className=\"item-title\">\n            {this.props.profile.rank.name}\n          </a>\n        </li>\n      )\n    } else {\n      return (\n        <li className=\"user-rank\">\n          <span className=\"item-title\">{this.props.profile.rank.name}</span>\n        </li>\n      )\n    }\n  }\n\n  getUserTitle() {\n    if (this.props.profile.title) {\n      return <li className=\"user-title\">{this.props.profile.title}</li>\n    } else if (this.props.profile.rank.title) {\n      return <li className=\"user-title\">{this.props.profile.rank.title}</li>\n    } else {\n      return null\n    }\n  }\n\n  getJoinedOn() {\n    let title = interpolate(\n      gettext(\"Joined on %(joined_on)s\"),\n      {\n        joined_on: this.props.profile.joined_on.format(\"LL, LT\")\n      },\n      true\n    )\n\n    let age = interpolate(\n      gettext(\"Joined %(joined_on)s\"),\n      {\n        joined_on: this.props.profile.joined_on.fromNow()\n      },\n      true\n    )\n\n    return (\n      <li className=\"user-joined-on\">\n        <abbr title={title}>{age}</abbr>\n      </li>\n    )\n  }\n\n  getEmail() {\n    if (this.props.profile.email) {\n      return (\n        <li className=\"user-email\">\n          <a href={\"mailto:\" + this.props.profile.email} className=\"item-title\">\n            {this.props.profile.email}\n          </a>\n        </li>\n      )\n    } else {\n      return null\n    }\n  }\n\n  getFollowButton() {\n    if (this.props.profile.acl.can_follow) {\n      return (\n        <FollowButton\n          className=\"btn btn-block btn-outline\"\n          profile={this.props.profile}\n        />\n      )\n    } else {\n      return null\n    }\n  }\n\n  getModerationButton() {\n    if (this.props.profile.acl.can_moderate) {\n      return (\n        <div className=\"btn-group btn-group-justified\">\n          <div className=\"btn-group\">\n            <button\n              className=\"btn btn-default btn-moderate btn-outline dropdown-toggle\"\n              type=\"button\"\n              data-toggle=\"dropdown\"\n              aria-haspopup=\"true\"\n              aria-expanded=\"false\"\n            >\n              <span className=\"material-icon\">tonality</span>\n              {gettext(\"Moderation\")}\n            </button>\n            <ModerationNav profile={this.props.profile} />\n          </div>\n        </div>\n      )\n    } else {\n      return null\n    }\n  }\n\n  render() {\n    const canFollow = this.props.profile.acl.can_follow\n    const canModerate = this.props.profile.acl.can_moderate\n\n    const isProfileOwner = this.props.user.id === this.props.profile.id\n    const canMessage =\n      !isProfileOwner && this.props.user.acl.can_start_private_threads\n\n    let cols = 0\n    if (canFollow) cols += 1\n    if (canModerate) cols += 1\n    if (canMessage) cols += 1\n\n    const colsWidth = cols ? 2 * cols + 1 : 0\n\n    let headerClassName = \"page-header\"\n    if (this.props.profile.rank.css_class) {\n      headerClassName +=\n        \" page-header-rank-\" + this.props.profile.rank.css_class\n    }\n\n    return (\n      <div className=\"page-header-bg\">\n        <div className={headerClassName}>\n          <div className=\"container\">\n            <IsDisabledMessage\n              isActive={this.props.profile.is_active}\n              isDeletingAccount={this.props.profile.is_deleting_account}\n            />\n\n            <div className=\"row\">\n              <div className=\"col-md-9 col-md-offset-3\">\n                <div className=\"row\">\n                  <div className={\"col-sm-\" + (12 - colsWidth)}>\n                    <Avatar\n                      className=\"user-avatar user-avatar-sm\"\n                      user={this.props.profile}\n                      size=\"100\"\n                      size2x=\"200\"\n                    />\n                    <h1>{this.props.profile.username}</h1>\n                  </div>\n                  {!!cols && (\n                    <div className={\"col-sm-\" + colsWidth}>\n                      <div className=\"row xs-margin-top sm-margin-top\">\n                        {!!canMessage && (\n                          <div className={getColStyle(cols, 0)}>\n                            <MessageButton\n                              className=\"btn btn-default btn-block btn-outline\"\n                              profile={this.props.profile}\n                              user={this.props.user}\n                            />\n                          </div>\n                        )}\n                        {!!canFollow && (\n                          <div className={getColStyle(cols, 1)}>\n                            {this.getFollowButton()}\n                          </div>\n                        )}\n                        {!!canModerate && (\n                          <div className={getColStyle(cols, 2)}>\n                            {this.getModerationButton()}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"header-stats\">\n            <div className=\"container\">\n              <div className=\"row\">\n                <div className=\"col-md-9 col-md-offset-3\">\n                  <ul className=\"list-inline\">\n                    {this.getUserStatus()}\n                    {this.getUserRank()}\n                    {this.getUserTitle()}\n                    {this.getJoinedOn()}\n                    {this.getEmail()}\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <CompactNav\n            baseUrl={this.props.baseUrl}\n            pages={this.props.pages}\n            profile={this.props.profile}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport function IsDisabledMessage({ isActive, isDeletingAccount }) {\n  if (isActive !== false && isDeletingAccount !== true) return null\n\n  let message = null\n  if (isDeletingAccount) {\n    message = gettext(\"This user is deleting their account.\")\n  } else {\n    message = gettext(\"This user's account has been disabled by administrator.\")\n  }\n\n  return (\n    <div className=\"alert alert-danger\">\n      <p>{message}</p>\n    </div>\n  )\n}\n\nexport function getColStyle(cols, col) {\n  let colStyle = \"\"\n\n  if (cols == 1) {\n    colStyle = \"col-xs-12\"\n  }\n\n  if (cols == 2) {\n    colStyle = \"col-xs-6 col-sm-6\"\n  }\n\n  if (cols == 3) {\n    if (col == 2) {\n      colStyle = \"col-xs-12 col-sm-4 xs-margin-top\"\n    } else {\n      colStyle += \"col-xs-6 col-sm-4\"\n    }\n  }\n\n  return colStyle\n}\n","import React from \"react\"\nimport { connect } from \"react-redux\"\nimport BanDetails from \"./ban-details\"\nimport Details from \"./details\"\nimport { Posts, Threads } from \"./feed\"\nimport Followers from \"./followers\"\nimport Follows from \"./follows\"\nimport UsernameHistory from \"./username-history\"\nimport Header from \"./header\"\nimport ModerationNav from \"./moderation/nav\"\nimport { SideNav, CompactNav } from \"./navs\"\nimport Avatar from \"misago/components/avatar\"\nimport WithDropdown from \"misago/components/with-dropdown\"\nimport misago from \"misago\"\nimport { hydrate } from \"misago/reducers/profile\"\nimport polls from \"misago/services/polls\"\nimport store from \"misago/services/store\"\n\nexport default class extends WithDropdown {\n  constructor(props) {\n    super(props)\n\n    this.startPolling(props.profile.api.index)\n  }\n\n  startPolling(api) {\n    polls.start({\n      poll: \"user-profile\",\n      url: api,\n      frequency: 90 * 1000,\n      update: this.update\n    })\n  }\n\n  update = data => {\n    store.dispatch(hydrate(data))\n  }\n\n  render() {\n    const baseUrl = misago.get(\"PROFILE\").url\n    const pages = misago.get(\"PROFILE_PAGES\")\n\n    return (\n      <div className=\"page page-user-profile\">\n        <Header\n          baseUrl={baseUrl}\n          pages={pages}\n          profile={this.props.profile}\n          toggleNav={this.toggleNav}\n          toggleModeration={this.toggleModeration}\n          user={this.props.user}\n        />\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-md-3 hidden-xs hidden-sm\">\n              <div className=\"profile-side-avatar\">\n                <Avatar user={this.props.profile} size=\"400\" />\n              </div>\n\n              <SideNav\n                baseUrl={baseUrl}\n                pages={pages}\n                profile={this.props.profile}\n              />\n            </div>\n            <div className=\"col-md-9\">{this.props.children}</div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport function select(store) {\n  return {\n    isAuthenticated: store.auth.user.id === store.profile.id,\n\n    tick: store.tick.tick,\n    user: store.auth.user,\n    users: store.users,\n    posts: store.posts,\n    profile: store.profile,\n    profileDetails: store[\"profile-details\"],\n    \"username-history\": store[\"username-history\"]\n  }\n}\n\nconst COMPONENTS = {\n  posts: Posts,\n  threads: Threads,\n  followers: Followers,\n  follows: Follows,\n  details: Details,\n  \"username-history\": UsernameHistory,\n  \"ban-details\": BanDetails\n}\n\nexport function paths() {\n  let paths = []\n  misago.get(\"PROFILE_PAGES\").forEach(function(item) {\n    paths.push(\n      Object.assign({}, item, {\n        path: misago.get(\"PROFILE\").url + item.component + \"/\",\n        component: connect(select)(COMPONENTS[item.component])\n      })\n    )\n  })\n\n  return paths\n}\n","import React from \"react\"\nimport Route from \"./route\"\n\nexport function Threads(props) {\n  let emptyMessage = null\n  if (props.user.id === props.profile.id) {\n    emptyMessage = gettext(\"You have no started threads.\")\n  } else {\n    emptyMessage = interpolate(\n      gettext(\"%(username)s started no threads.\"),\n      {\n        username: props.profile.username\n      },\n      true\n    )\n  }\n\n  let header = null\n  if (!props.posts.isLoaded) {\n    header = gettext(\"Loading...\")\n  } else if (props.profile.id === props.user.id) {\n    const message = ngettext(\n      \"You have started %(threads)s thread.\",\n      \"You have started %(threads)s threads.\",\n      props.profile.threads\n    )\n\n    header = interpolate(\n      message,\n      {\n        threads: props.profile.threads\n      },\n      true\n    )\n  } else {\n    const message = ngettext(\n      \"%(username)s has started %(threads)s thread.\",\n      \"%(username)s has started %(threads)s threads.\",\n      props.profile.threads\n    )\n\n    header = interpolate(\n      message,\n      {\n        username: props.profile.username,\n        threads: props.profile.threads\n      },\n      true\n    )\n  }\n\n  return (\n    <Route\n      api={props.profile.api.threads}\n      emptyMessage={emptyMessage}\n      header={header}\n      title={gettext(\"Threads\")}\n      {...props}\n    />\n  )\n}\n\nexport function Posts(props) {\n  let emptyMessage = null\n  if (props.user.id === props.profile.id) {\n    emptyMessage = gettext(\"You have posted no messages.\")\n  } else {\n    emptyMessage = interpolate(\n      gettext(\"%(username)s posted no messages.\"),\n      {\n        username: props.profile.username\n      },\n      true\n    )\n  }\n\n  let header = null\n  if (!props.posts.isLoaded) {\n    header = gettext(\"Loading...\")\n  } else if (props.profile.id === props.user.id) {\n    const message = ngettext(\n      \"You have posted %(posts)s message.\",\n      \"You have posted %(posts)s messages.\",\n      props.profile.posts\n    )\n\n    header = interpolate(\n      message,\n      {\n        posts: props.profile.posts\n      },\n      true\n    )\n  } else {\n    const message = ngettext(\n      \"%(username)s has posted %(posts)s message.\",\n      \"%(username)s has posted %(posts)s messages.\",\n      props.profile.posts\n    )\n\n    header = interpolate(\n      message,\n      {\n        username: props.profile.username,\n        posts: props.profile.posts\n      },\n      true\n    )\n  }\n\n  return (\n    <Route\n      api={props.profile.api.posts}\n      emptyMessage={emptyMessage}\n      header={header}\n      title={gettext(\"Posts\")}\n      {...props}\n    />\n  )\n}\n","import { connect } from \"react-redux\"\nimport Profile, { paths, select } from \"misago/components/profile/root\"\nimport misago from \"misago/index\"\nimport mount from \"misago/utils/routed-component\"\n\nexport default function initializer(context) {\n  if (context.has(\"PROFILE\") && context.has(\"PROFILE_PAGES\")) {\n    mount({\n      root: misago.get(\"PROFILE\").url,\n      component: connect(select)(Profile),\n      paths: paths()\n    })\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:profile\",\n  initializer: initializer,\n  after: \"reducer:profile-hydrate\"\n})\n","import React from \"react\"\nimport misago from \"misago/index\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport * as validators from \"misago/utils/validators\"\nimport showBannedPage from \"misago/utils/banned-page\"\n\nexport class RequestLinkForm extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      email: \"\",\n\n      validators: {\n        email: [validators.email()]\n      }\n    }\n  }\n\n  clean() {\n    if (this.isValid()) {\n      return true\n    } else {\n      snackbar.error(gettext(\"Enter a valid email address.\"))\n      return false\n    }\n  }\n\n  send() {\n    return ajax.post(misago.get(\"SEND_ACTIVATION_API\"), {\n      email: this.state.email\n    })\n  }\n\n  handleSuccess(apiResponse) {\n    this.props.callback(apiResponse)\n  }\n\n  handleError(rejection) {\n    if ([\"already_active\", \"inactive_admin\"].indexOf(rejection.code) > -1) {\n      snackbar.info(rejection.detail)\n    } else if (rejection.status === 403 && rejection.ban) {\n      showBannedPage(rejection.ban)\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"well well-form well-form-request-activation-link\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"form-group\">\n            <div className=\"control-input\">\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                placeholder={gettext(\"Your e-mail address\")}\n                disabled={this.state.isLoading}\n                onChange={this.bindInput(\"email\")}\n                value={this.state.email}\n              />\n            </div>\n          </div>\n\n          <Button\n            className=\"btn-primary btn-block\"\n            loading={this.state.isLoading}\n          >\n            {gettext(\"Send link\")}\n          </Button>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport class LinkSent extends React.Component {\n  getMessage() {\n    return interpolate(\n      gettext(\"Activation link was sent to %(email)s\"),\n      {\n        email: this.props.user.email\n      },\n      true\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"well well-form well-form-request-activation-link well-done\">\n        <div className=\"done-message\">\n          <div className=\"message-icon\">\n            <span className=\"material-icon\">check</span>\n          </div>\n          <div className=\"message-body\">\n            <p>{this.getMessage()}</p>\n          </div>\n          <button\n            className=\"btn btn-primary btn-block\"\n            type=\"button\"\n            onClick={this.props.callback}\n          >\n            {gettext(\"Request another link\")}\n          </button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      complete: false\n    }\n  }\n\n  complete = apiResponse => {\n    this.setState({\n      complete: apiResponse\n    })\n  }\n\n  reset = () => {\n    this.setState({\n      complete: false\n    })\n  }\n\n  render() {\n    if (this.state.complete) {\n      return <LinkSent user={this.state.complete} callback={this.reset} />\n    } else {\n      return <RequestLinkForm callback={this.complete} />\n    }\n  }\n}\n","import misago from \"misago/index\"\nimport RequestActivationLink from \"misago/components/request-activation-link\"\nimport mount from \"misago/utils/mount-component\"\n\nexport default function initializer() {\n  if (document.getElementById(\"request-activation-link-mount\")) {\n    mount(RequestActivationLink, \"request-activation-link-mount\", false)\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:request-activation-link\",\n  initializer: initializer,\n  after: \"store\"\n})\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport misago from \"misago/index\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport * as validators from \"misago/utils/validators\"\nimport showBannedPage from \"misago/utils/banned-page\"\n\nexport class RequestResetForm extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      email: \"\",\n\n      validators: {\n        email: [validators.email()]\n      }\n    }\n  }\n\n  clean() {\n    if (this.isValid()) {\n      return true\n    } else {\n      snackbar.error(gettext(\"Enter a valid email address.\"))\n      return false\n    }\n  }\n\n  send() {\n    return ajax.post(misago.get(\"SEND_PASSWORD_RESET_API\"), {\n      email: this.state.email\n    })\n  }\n\n  handleSuccess(apiResponse) {\n    this.props.callback(apiResponse)\n  }\n\n  handleError(rejection) {\n    if ([\"inactive_user\", \"inactive_admin\"].indexOf(rejection.code) > -1) {\n      this.props.showInactivePage(rejection)\n    } else if (rejection.status === 403 && rejection.ban) {\n      showBannedPage(rejection.ban)\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"well well-form well-form-request-password-reset\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"form-group\">\n            <div className=\"control-input\">\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                placeholder={gettext(\"Your e-mail address\")}\n                disabled={this.state.isLoading}\n                onChange={this.bindInput(\"email\")}\n                value={this.state.email}\n              />\n            </div>\n          </div>\n\n          <Button\n            className=\"btn-primary btn-block\"\n            loading={this.state.isLoading}\n          >\n            {gettext(\"Send link\")}\n          </Button>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport class LinkSent extends React.Component {\n  getMessage() {\n    return interpolate(\n      gettext(\"Reset password link was sent to %(email)s\"),\n      {\n        email: this.props.user.email\n      },\n      true\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"well well-form well-form-request-password-reset well-done\">\n        <div className=\"done-message\">\n          <div className=\"message-icon\">\n            <span className=\"material-icon\">check</span>\n          </div>\n          <div className=\"message-body\">\n            <p>{this.getMessage()}</p>\n          </div>\n          <button\n            type=\"button\"\n            className=\"btn btn-primary btn-block\"\n            onClick={this.props.callback}\n          >\n            {gettext(\"Request another link\")}\n          </button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport class AccountInactivePage extends React.Component {\n  getActivateButton() {\n    if (this.props.activation === \"inactive_user\") {\n      return (\n        <p>\n          <a href={misago.get(\"REQUEST_ACTIVATION_URL\")}>\n            {gettext(\"Activate your account.\")}\n          </a>\n        </p>\n      )\n    } else {\n      return null\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"page page-message page-message-info page-forgotten-password-inactive\">\n        <div className=\"container\">\n          <div className=\"message-panel\">\n            <div className=\"message-icon\">\n              <span className=\"material-icon\">info_outline</span>\n            </div>\n\n            <div className=\"message-body\">\n              <p className=\"lead\">{gettext(\"Your account is inactive.\")}</p>\n              <p>{this.props.message}</p>\n              {this.getActivateButton()}\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      complete: false\n    }\n  }\n\n  complete = apiResponse => {\n    this.setState({\n      complete: apiResponse\n    })\n  }\n\n  reset = () => {\n    this.setState({\n      complete: false\n    })\n  }\n\n  showInactivePage(apiResponse) {\n    ReactDOM.render(\n      <AccountInactivePage\n        activation={apiResponse.code}\n        message={apiResponse.detail}\n      />,\n      document.getElementById(\"page-mount\")\n    )\n  }\n\n  render() {\n    if (this.state.complete) {\n      return <LinkSent callback={this.reset} user={this.state.complete} />\n    }\n\n    return (\n      <RequestResetForm\n        callback={this.complete}\n        showInactivePage={this.showInactivePage}\n      />\n    )\n  }\n}\n","import misago from \"misago/index\"\nimport RequestPasswordReset from \"misago/components/request-password-reset\"\nimport mount from \"misago/utils/mount-component\"\n\nexport default function initializer() {\n  if (document.getElementById(\"request-password-reset-mount\")) {\n    mount(RequestPasswordReset, \"request-password-reset-mount\", false)\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:request-password-reset\",\n  initializer: initializer,\n  after: \"store\"\n})\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport misago from \"misago/index\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport SignInModal from \"misago/components/sign-in.js\"\nimport ajax from \"misago/services/ajax\"\nimport auth from \"misago/services/auth\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport showBannedPage from \"misago/utils/banned-page\"\n\nexport class ResetPasswordForm extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      password: \"\"\n    }\n  }\n\n  clean() {\n    if (this.state.password.trim().length) {\n      return true\n    } else {\n      snackbar.error(gettext(\"Enter new password.\"))\n      return false\n    }\n  }\n\n  send() {\n    return ajax.post(misago.get(\"CHANGE_PASSWORD_API\"), {\n      password: this.state.password\n    })\n  }\n\n  handleSuccess(apiResponse) {\n    this.props.callback(apiResponse)\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 403 && rejection.ban) {\n      showBannedPage(rejection.ban)\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"well well-form well-form-reset-password\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"form-group\">\n            <div className=\"control-input\">\n              <input\n                type=\"password\"\n                className=\"form-control\"\n                placeholder={gettext(\"Enter new password\")}\n                disabled={this.state.isLoading}\n                onChange={this.bindInput(\"password\")}\n                value={this.state.password}\n              />\n            </div>\n          </div>\n\n          <Button\n            className=\"btn-primary btn-block\"\n            loading={this.state.isLoading}\n          >\n            {gettext(\"Change password\")}\n          </Button>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport class PasswordChangedPage extends React.Component {\n  getMessage() {\n    return interpolate(\n      gettext(\"%(username)s, your password has been changed successfully.\"),\n      {\n        username: this.props.user.username\n      },\n      true\n    )\n  }\n\n  showSignIn() {\n    modal.show(SignInModal)\n  }\n\n  render() {\n    return (\n      <div className=\"page page-message page-message-success page-forgotten-password-changed\">\n        <div className=\"container\">\n          <div className=\"message-panel\">\n            <div className=\"message-icon\">\n              <span className=\"material-icon\">check</span>\n            </div>\n\n            <div className=\"message-body\">\n              <p className=\"lead\">{this.getMessage()}</p>\n              <p>\n                {gettext(\n                  \"You will have to sign in using new password before continuing.\"\n                )}\n              </p>\n              <p>\n                <button\n                  type=\"button\"\n                  className=\"btn btn-primary\"\n                  onClick={this.showSignIn}\n                >\n                  {gettext(\"Sign in\")}\n                </button>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default class extends React.Component {\n  complete = apiResponse => {\n    auth.softSignOut()\n\n    // nuke \"redirect_to\" field so we don't end\n    // coming back to error page after sign in\n    $('#hidden-login-form input[name=\"redirect_to\"]').remove()\n\n    ReactDOM.render(\n      <PasswordChangedPage user={apiResponse} />,\n      document.getElementById(\"page-mount\")\n    )\n  }\n\n  render() {\n    return <ResetPasswordForm callback={this.complete} />\n  }\n}\n","import misago from \"misago\"\nimport ResetPasswordForm from \"misago/components/reset-password-form\"\nimport mount from \"misago/utils/mount-component\"\n\nexport default function initializer() {\n  if (document.getElementById(\"reset-password-form-mount\")) {\n    mount(ResetPasswordForm, \"reset-password-form-mount\", false)\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:reset-password-form\",\n  initializer: initializer,\n  after: \"store\"\n})\n","import React from \"react\"\nimport misago from \"misago\"\nimport Form from \"misago/components/form\"\nimport { load as updatePosts } from \"misago/reducers/posts\"\nimport { update as updateSearch } from \"misago/reducers/search\"\nimport { hydrate as updateUsers } from \"misago/reducers/users\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      query: props.search.query\n    }\n  }\n\n  componentDidMount() {\n    if (this.state.query.length) {\n      this.handleSubmit()\n    }\n  }\n\n  onQueryChange = event => {\n    this.changeValue(\"query\", event.target.value)\n  }\n\n  clean() {\n    if (!this.state.query.trim().length) {\n      snackbar.error(gettext(\"You have to enter search query.\"))\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    store.dispatch(\n      updateSearch({\n        isLoading: true\n      })\n    )\n\n    return ajax.get(misago.get(\"SEARCH_API\"), {\n      q: this.state.query.trim()\n    })\n  }\n\n  handleSuccess(providers) {\n    store.dispatch(\n      updateSearch({\n        query: this.state.query.trim(),\n        isLoading: false,\n        providers\n      })\n    )\n\n    providers.forEach(provider => {\n      if (provider.id === \"users\") {\n        store.dispatch(updateUsers(provider.results.results))\n      } else if (provider.id === \"threads\") {\n        store.dispatch(updatePosts(provider.results))\n      }\n    })\n  }\n\n  handleError(rejection) {\n    snackbar.apiError(rejection)\n\n    store.dispatch(\n      updateSearch({\n        isLoading: false\n      })\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"page-header-bg\">\n        <div className=\"page-header page-search-form\">\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"container\">\n              <div className=\"row\">\n                <div className=\"col-xs-12 col-md-3\">\n                  <h1>{gettext(\"Search\")}</h1>\n                </div>\n                <div className=\"col-xs-12 col-md-9\">\n                  <div className=\"row xs-margin-top sm-margin-top\">\n                    <div className=\"col-xs-12 col-sm-8 col-md-9\">\n                      <div className=\"form-group\">\n                        <input\n                          className=\"form-control\"\n                          disabled={\n                            this.props.search.isLoading || this.state.isLoading\n                          }\n                          onChange={this.onQueryChange}\n                          type=\"text\"\n                          value={this.state.query}\n                        />\n                      </div>\n                    </div>\n                    <div className=\"col-xs-12 col-sm-4 col-md-3\">\n                      <button\n                        className=\"btn btn-primary btn-block btn-outline\"\n                        disabled={\n                          this.props.search.isLoading || this.state.isLoading\n                        }\n                      >\n                        {gettext(\"Search\")}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport { Link } from \"react-router\"\n\nexport default function(props) {\n  return (\n    <div className=\"list-group nav-side\">\n      {props.providers.map(provider => {\n        return (\n          <Link\n            activeClassName=\"active\"\n            className=\"list-group-item\"\n            key={provider.id}\n            to={provider.url}\n          >\n            <span className=\"material-icon\">{provider.icon}</span>\n            {provider.name}\n            <Badge results={provider.results} />\n          </Link>\n        )\n      })}\n    </div>\n  )\n}\n\nexport function Badge(props) {\n  if (!props.results) return null\n\n  let count = props.results.count\n  if (count > 1000000) {\n    count = Math.ceil(count / 1000000) + \"KK\"\n  } else if (count > 1000) {\n    count = Math.ceil(count / 1000) + \"K\"\n  }\n\n  return <span className=\"badge\">{count}</span>\n}\n","import React from \"react\"\nimport SearchForm from \"./form\"\nimport SideNav from \"./sidenav\"\n\nexport default function(props) {\n  return (\n    <div className=\"page page-search\">\n      <SearchForm provider={props.provider} search={props.search} />\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-md-3\">\n            <SideNav providers={props.search.providers} />\n          </div>\n          <div className=\"col-md-9\">\n            {props.children}\n            <SearchTime provider={props.provider} search={props.search} />\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport function SearchTime(props) {\n  let time = null\n  props.search.providers.forEach(p => {\n    if (p.id === props.provider.id) {\n      time = p.time\n    }\n  })\n\n  if (time === null) return null\n\n  const copy = gettext(\"Search took %(time)s s to complete\")\n\n  return (\n    <footer className=\"search-footer\">\n      <p>{interpolate(copy, { time }, true)}</p>\n    </footer>\n  )\n}\n","import React from \"react\"\nimport PostFeed from \"misago/components/post-feed\"\nimport Button from \"misago/components/button\"\nimport MisagoMarkup from \"misago/components/misago-markup\"\nimport {\n  update as updatePosts,\n  append as appendPosts\n} from \"misago/reducers/posts\"\nimport { updateProvider } from \"misago/reducers/search\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default function(props) {\n  return (\n    <div>\n      <PostFeed isReady={true} posts={props.results} />\n      <LoadMore {...props} />\n    </div>\n  )\n}\n\nexport class LoadMore extends React.Component {\n  onClick = () => {\n    store.dispatch(\n      updatePosts({\n        isBusy: true\n      })\n    )\n\n    ajax\n      .get(this.props.provider.api, {\n        q: this.props.query,\n        page: this.props.next\n      })\n      .then(\n        providers => {\n          providers.forEach(provider => {\n            if (provider.id !== \"threads\") return\n            store.dispatch(appendPosts(provider.results))\n            store.dispatch(updateProvider(provider))\n          })\n\n          store.dispatch(\n            updatePosts({\n              isBusy: false\n            })\n          )\n        },\n        rejection => {\n          snackbar.apiError(rejection)\n\n          store.dispatch(\n            updatePosts({\n              isBusy: false\n            })\n          )\n        }\n      )\n  }\n\n  render() {\n    if (!this.props.more) return null\n\n    return (\n      <div className=\"pager-more\">\n        <Button\n          className=\"btn btn-default btn-outline\"\n          loading={this.props.isBusy}\n          onClick={this.onClick}\n        >\n          {gettext(\"Show more\")}\n        </Button>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport SearchPage from \"../page\"\nimport Results from \"./results\"\n\nexport default function(props) {\n  return (\n    <SearchPage provider={props.route.provider} search={props.search}>\n      <Blankslate query={props.search.query} posts={props.posts}>\n        <Results\n          provider={props.route.provider}\n          query={props.search.query}\n          {...props.posts}\n        />\n      </Blankslate>\n    </SearchPage>\n  )\n}\n\nexport function Blankslate(props) {\n  if (props.posts && props.posts.count) return props.children\n\n  if (props.query.length) {\n    return (\n      <p className=\"lead\">\n        {gettext(\"No threads matching search query have been found.\")}\n      </p>\n    )\n  }\n\n  return (\n    <p className=\"lead\">\n      {gettext(\"Enter at least two characters to search threads.\")}\n    </p>\n  )\n}\n","import React from \"react\"\nimport SearchPage from \"../page\"\nimport UsersList from \"misago/components/users-list\"\n\nexport default function(props) {\n  return (\n    <SearchPage provider={props.route.provider} search={props.search}>\n      <Blankslate query={props.search.query} users={props.users}>\n        <UsersList cols={3} isReady={true} users={props.users} />\n      </Blankslate>\n    </SearchPage>\n  )\n}\n\nexport function Blankslate(props) {\n  if (props.users.length) return props.children\n\n  if (props.query.length) {\n    return (\n      <p className=\"lead\">\n        {gettext(\"No users matching search query have been found.\")}\n      </p>\n    )\n  }\n\n  return (\n    <p className=\"lead\">\n      {gettext(\"Enter at least two characters to search users.\")}\n    </p>\n  )\n}\n","import { connect } from \"react-redux\"\nimport SearchThreads from \"./threads\"\nimport SearchUsers from \"./users\"\n\nconst components = {\n  threads: SearchThreads,\n  users: SearchUsers\n}\n\nexport function select(store) {\n  return {\n    posts: store.posts,\n    search: store.search,\n    tick: store.tick.tick,\n    user: store.auth.user,\n    users: store.users\n  }\n}\n\nexport default function(providers) {\n  return providers.map(provider => {\n    return {\n      path: provider.url,\n      component: connect(select)(components[provider.id]),\n      provider: provider\n    }\n  })\n}\n","import paths from \"misago/components/search\"\nimport misago from \"misago\"\nimport mount from \"misago/utils/routed-component\"\n\nexport default function initializer(context) {\n  if (context.get(\"CURRENT_LINK\") === \"misago:search\") {\n    mount({\n      paths: paths(misago.get(\"SEARCH_PROVIDERS\"))\n    })\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:search\",\n  initializer: initializer,\n  after: \"store\"\n})\n","import React from \"react\"\n\nconst TYPES_CLASSES = {\n  info: \"alert-info\",\n  success: \"alert-success\",\n  warning: \"alert-warning\",\n  error: \"alert-danger\"\n}\n\nexport class Snackbar extends React.Component {\n  getSnackbarClass() {\n    let snackbarClass = \"alerts-snackbar\"\n    if (this.props.isVisible) {\n      snackbarClass += \" in\"\n    } else {\n      snackbarClass += \" out\"\n    }\n    return snackbarClass\n  }\n\n  render() {\n    return (\n      <div className={this.getSnackbarClass()}>\n        <p className={\"alert \" + TYPES_CLASSES[this.props.type]}>\n          {this.props.message}\n        </p>\n      </div>\n    )\n  }\n}\n\nexport function select(state) {\n  return state.snackbar\n}\n","import { connect } from \"react-redux\"\nimport misago from \"misago/index\"\nimport { Snackbar, select } from \"misago/components/snackbar\"\nimport mount from \"misago/utils/mount-component\"\n\nexport default function initializer() {\n  mount(connect(select)(Snackbar), \"snackbar-mount\")\n}\n\nmisago.addInitializer({\n  name: \"component:snackbar\",\n  initializer: initializer,\n  after: \"snackbar\"\n})\n","import React from \"react\"\n\nconst Header = ({ backendName }) => {\n  const pageTitleTpl = gettext(\"Sign in with %(backend)s\")\n  const pageTitle = interpolate(pageTitleTpl, { backend: backendName }, true)\n\n  return (\n    <div className=\"page-header-bg\">\n      <div className=\"page-header\">\n        <div className=\"container\">\n          <h1>{pageTitle}</h1>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Header\n","import React from \"react\"\nimport misago from \"misago\"\nimport RegisterLegalFootnote from \"misago/components/RegisterLegalFootnote\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport * as validators from \"misago/utils/validators\"\nimport Header from \"./header\"\n\nexport default class Register extends Form {\n  constructor(props) {\n    super(props)\n\n    const formValidators = {\n      email: [validators.email()],\n      username: [validators.usernameContent()]\n    }\n\n    if (!!misago.get(\"TERMS_OF_SERVICE_ID\")) {\n      formValidators.termsOfService = [validators.requiredTermsOfService()]\n    }\n\n    if (!!misago.get(\"PRIVACY_POLICY_ID\")) {\n      formValidators.privacyPolicy = [validators.requiredPrivacyPolicy()]\n    }\n\n    this.state = {\n      email: props.email || \"\",\n      emailProtected: !!props.email,\n      username: props.username || \"\",\n\n      termsOfService: null,\n      privacyPolicy: null,\n\n      validators: formValidators,\n      errors: {},\n\n      isLoading: false\n    }\n  }\n\n  clean() {\n    let errors = this.validate()\n    let lengths = [\n      this.state.email.trim().length,\n      this.state.username.trim().length\n    ]\n\n    if (lengths.indexOf(0) !== -1) {\n      snackbar.error(gettext(\"Fill out all fields.\"))\n      return false\n    }\n\n    const { validators } = this.state\n\n    const checkTermsOfService = !!misago.get(\"TERMS_OF_SERVICE_ID\")\n    if (checkTermsOfService && this.state.termsOfService === null) {\n      snackbar.error(validators.termsOfService[0](null))\n      return false\n    }\n\n    const checkPrivacyPolicy = !!misago.get(\"PRIVACY_POLICY_ID\")\n    if (checkPrivacyPolicy && this.state.privacyPolicy === null) {\n      snackbar.error(validators.privacyPolicy[0](null))\n      snackbar.error(gettext(\"You need to accept the privacy policy.\"))\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    return ajax.post(this.props.url, {\n      email: this.state.email,\n      username: this.state.username,\n      terms_of_service: this.state.termsOfService,\n      privacy_policy: this.state.privacyPolicy\n    })\n  }\n\n  handleSuccess(response) {\n    const { onRegistrationComplete } = this.props\n    onRegistrationComplete(response)\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 200) {\n      // We've entered \"errored\" state because response is HTML instead of exptected JSON\n      const { onRegistrationComplete } = this.props\n      const { username } = this.state\n      onRegistrationComplete({ activation: \"active\", step: \"done\", username })\n    } else if (rejection.status === 400) {\n      const stateUpdate = { errors: rejection }\n      if (rejection.email) {\n        stateUpdate.emailProtected = false\n      }\n      this.setState(stateUpdate)\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  handlePrivacyPolicyChange = event => {\n    const value = event.target.value\n    this.handleToggleAgreement(\"privacyPolicy\", value)\n  }\n\n  handleTermsOfServiceChange = event => {\n    const value = event.target.value\n    this.handleToggleAgreement(\"termsOfService\", value)\n  }\n\n  handleToggleAgreement = (agreement, value) => {\n    this.setState((prevState, props) => {\n      if (prevState[agreement] === null) {\n        const errors = { ...prevState.errors, [agreement]: null }\n        return { errors, [agreement]: value }\n      }\n\n      const validator = this.state.validators[agreement][0]\n      const errors = { ...prevState.errors, [agreement]: [validator(null)] }\n      return { errors, [agreement]: null }\n    })\n  }\n\n  render() {\n    const { backend_name } = this.props\n    const { email, emailProtected, username, isLoading } = this.state\n\n    let emailHelpText = null\n    if (emailProtected) {\n      const emailHelpTextTpl = gettext(\n        \"Your e-mail address has been verified by %(backend)s.\"\n      )\n      emailHelpText = interpolate(\n        emailHelpTextTpl,\n        { backend: backend_name },\n        true\n      )\n    }\n\n    return (\n      <div className=\"page page-social-auth page-social-sauth-register\">\n        <Header backendName={backend_name} />\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-md-6 col-md-offset-3\">\n              <form onSubmit={this.handleSubmit}>\n                <div className=\"panel panel-default panel-form\">\n                  <div className=\"panel-heading\">\n                    <h3 className=\"panel-title\">\n                      {gettext(\"Complete your details\")}\n                    </h3>\n                  </div>\n                  <div className=\"panel-body\">\n                    <FormGroup\n                      for=\"id_username\"\n                      label={gettext(\"Username\")}\n                      validation={this.state.errors.username}\n                    >\n                      <input\n                        type=\"text\"\n                        id=\"id_username\"\n                        className=\"form-control\"\n                        disabled={isLoading}\n                        onChange={this.bindInput(\"username\")}\n                        value={username}\n                      />\n                    </FormGroup>\n                    <FormGroup\n                      for=\"id_email\"\n                      label={gettext(\"E-mail address\")}\n                      helpText={emailHelpText}\n                      validation={\n                        emailProtected ? null : this.state.errors.email\n                      }\n                    >\n                      <input\n                        type=\"email\"\n                        id=\"id_email\"\n                        className=\"form-control\"\n                        disabled={isLoading || emailProtected}\n                        onChange={this.bindInput(\"email\")}\n                        value={email}\n                      />\n                    </FormGroup>\n                    <RegisterLegalFootnote\n                      errors={this.state.errors}\n                      privacyPolicy={this.state.privacyPolicy}\n                      termsOfService={this.state.termsOfService}\n                      onPrivacyPolicyChange={this.handlePrivacyPolicyChange}\n                      onTermsOfServiceChange={this.handleTermsOfServiceChange}\n                    />\n                  </div>\n                  <div className=\"panel-footer\">\n                    <Button\n                      className=\"btn-primary\"\n                      loading={this.state.isLoading}\n                    >\n                      {gettext(\"Sign in\")}\n                    </Button>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Header from \"./header\"\nimport misago from \"misago\"\n\nconst Complete = ({ activation, backend_name, username }) => {\n  let icon = \"\"\n  let message = \"\"\n  if (activation === \"user\") {\n    message = gettext(\n      \"%(username)s, your account has been created but you need to activate it before you will be able to sign in.\"\n    )\n  } else if (activation === \"admin\") {\n    message = gettext(\n      \"%(username)s, your account has been created but board administrator will have to activate it before you will be able to sign in.\"\n    )\n  } else {\n    message = gettext(\n      \"%(username)s, your account has been created and you have been signed in to it.\"\n    )\n  }\n\n  if (activation === \"active\") {\n    icon = \"check\"\n  } else {\n    icon = \"info_outline\"\n  }\n\n  return (\n    <div className=\"page page-social-auth page-social-sauth-register\">\n      <Header backendName={backend_name} />\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-md-6 col-md-offset-3\">\n            <div className=\"panel panel-default panel-form\">\n              <div className=\"panel-heading\">\n                <h3 className=\"panel-title\">\n                  {gettext(\"Registration completed!\")}\n                </h3>\n              </div>\n              <div className=\"panel-body panel-message-body\">\n                <div className=\"message-icon\">\n                  <span className=\"material-icon\">{icon}</span>\n                </div>\n                <div className=\"message-body\">\n                  <p className=\"lead\">\n                    {interpolate(message, { username }, true)}\n                  </p>\n                  <p className=\"help-block\">\n                    <a\n                      className=\"btn btn-default\"\n                      href={misago.get(\"MISAGO_PATH\")}\n                    >\n                      {gettext(\"Return to forum index\")}\n                    </a>\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Complete\n","import React from \"react\"\nimport Register from \"./register\"\nimport Complete from \"./complete\"\n\nexport default class SocialAuth extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      step: props.step,\n\n      activation: props.activation || \"\",\n      email: props.email || \"\",\n      username: props.username || \"\"\n    }\n  }\n\n  handleRegistrationComplete = ({ activation, email, step, username }) => {\n    this.setState({ activation, email, step, username })\n  }\n\n  render() {\n    const { backend_name, url } = this.props\n    const { activation, email, step, username } = this.state\n\n    if (step === \"register\") {\n      return (\n        <Register\n          backend_name={backend_name}\n          email={email}\n          url={url}\n          username={username}\n          onRegistrationComplete={this.handleRegistrationComplete}\n        />\n      )\n    }\n\n    return (\n      <Complete\n        activation={activation}\n        backend_name={backend_name}\n        email={email}\n        url={url}\n        username={username}\n      />\n    )\n  }\n}\n","import React from \"react\"\nimport SocialAuth from \"misago/components/social-auth\"\nimport misago from \"misago\"\nimport mount from \"misago/utils/mount-component\"\n\nexport default function initializer(context) {\n  if (context.get(\"CURRENT_LINK\") === \"misago:social-complete\") {\n    const props = context.get(\"SOCIAL_AUTH_FORM\")\n    mount(<SocialAuth {...props} />, \"page-mount\")\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:social-auth\",\n  initializer: initializer,\n  after: \"store\"\n})\n","import React from \"react\"\nimport Form from \"./form\"\nimport FormGroup from \"misago/components/form-group\"\nimport * as participants from \"misago/reducers/participants\"\nimport { updateAcl } from \"misago/reducers/thread\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      username: \"\"\n    }\n  }\n\n  onUsernameChange = event => {\n    this.changeValue(\"username\", event.target.value)\n  }\n\n  clean() {\n    if (!this.state.username.trim().length) {\n      snackbar.error(gettext(\"You have to enter user name.\"))\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    return ajax.patch(this.props.thread.api.index, [\n      { op: \"add\", path: \"participants\", value: this.state.username },\n      { op: \"add\", path: \"acl\", value: 1 }\n    ])\n  }\n\n  handleSuccess(data) {\n    store.dispatch(updateAcl(data))\n    store.dispatch(participants.replace(data.participants))\n\n    snackbar.success(gettext(\"New participant has been added to thread.\"))\n\n    modal.hide()\n  }\n\n  render() {\n    return (\n      <div className=\"modal-dialog modal-sm\" role=\"document\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"modal-content\">\n            <ModalHeader />\n            <div className=\"modal-body\">\n              <FormGroup for=\"id_username\" label={gettext(\"User to add\")}>\n                <input\n                  id=\"id_username\"\n                  className=\"form-control\"\n                  disabled={this.state.isLoading}\n                  onChange={this.onUsernameChange}\n                  type=\"text\"\n                  value={this.state.username}\n                />\n              </FormGroup>\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn btn-block btn-primary\"\n                disabled={this.state.isLoading}\n              >\n                {gettext(\"Add participant\")}\n              </button>\n              <button\n                className=\"btn btn-block btn-default\"\n                data-dismiss=\"modal\"\n                disabled={this.state.isLoading}\n                type=\"button\"\n              >\n                {gettext(\"Cancel\")}\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport function ModalHeader(props) {\n  return (\n    <div className=\"modal-header\">\n      <button\n        aria-label={gettext(\"Close\")}\n        className=\"close\"\n        data-dismiss=\"modal\"\n        type=\"button\"\n      >\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n      <h4 className=\"modal-title\">{gettext(\"Add participant\")}</h4>\n    </div>\n  )\n}\n","import React from \"react\"\nimport AddParticipantModal from \"misago/components/add-participant\"\nimport modal from \"misago/services/modal\"\n\nexport default class extends React.Component {\n  onClick = () => {\n    modal.show(<AddParticipantModal thread={this.props.thread} />)\n  }\n\n  render() {\n    if (!this.props.thread.acl.can_add_participants) return null\n\n    return (\n      <div className=\"col-xs-12 col-sm-3\">\n        <button\n          className=\"btn btn-default btn-block\"\n          onClick={this.onClick}\n          type=\"button\"\n        >\n          <span className=\"material-icon\">person_add</span>\n          {gettext(\"Add participant\")}\n        </button>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport { changeOwner } from \"./actions\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.isUser = props.participant.id === props.user.id\n  }\n\n  onClick = () => {\n    let confirmed = false\n    if (this.isUser) {\n      confirmed = window.confirm(\n        gettext(\"Are you sure you want to take over this thread?\")\n      )\n    } else {\n      const message = gettext(\n        \"Are you sure you want to change thread owner to %(user)s?\"\n      )\n      confirmed = window.confirm(\n        interpolate(\n          message,\n          {\n            user: this.props.participant.username\n          },\n          true\n        )\n      )\n    }\n\n    if (!confirmed) return\n\n    changeOwner(this.props.thread, this.props.participant)\n  }\n\n  render() {\n    if (this.props.participant.is_owner) return null\n    if (!this.props.thread.acl.can_change_owner) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          {gettext(\"Make owner\")}\n        </button>\n      </li>\n    )\n  }\n}\n","import * as participants from \"misago/reducers/participants\"\nimport { updateAcl } from \"misago/reducers/thread\"\nimport misago from \"misago\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport function leave(thread, participant) {\n  ajax\n    .patch(thread.api.index, [\n      { op: \"remove\", path: \"participants\", value: participant.id }\n    ])\n    .then(\n      () => {\n        snackbar.success(gettext(\"You have left this thread.\"))\n        window.setTimeout(() => {\n          window.location = misago.get(\"PRIVATE_THREADS_URL\")\n        }, 3 * 1000)\n      },\n      rejection => {\n        snackbar.apiError(rejection)\n      }\n    )\n}\n\nexport function remove(thread, participant) {\n  ajax\n    .patch(thread.api.index, [\n      { op: \"remove\", path: \"participants\", value: participant.id },\n      { op: \"add\", path: \"acl\", value: 1 }\n    ])\n    .then(\n      data => {\n        store.dispatch(updateAcl(data))\n        store.dispatch(participants.replace(data.participants))\n\n        const message = gettext(\"%(user)s has been removed from this thread.\")\n        snackbar.success(\n          interpolate(\n            message,\n            {\n              user: participant.username\n            },\n            true\n          )\n        )\n      },\n      rejection => {\n        snackbar.apiError(rejection)\n      }\n    )\n}\n\nexport function changeOwner(thread, participant) {\n  ajax\n    .patch(thread.api.index, [\n      { op: \"replace\", path: \"owner\", value: participant.id },\n      { op: \"add\", path: \"acl\", value: 1 }\n    ])\n    .then(\n      data => {\n        store.dispatch(updateAcl(data))\n        store.dispatch(participants.replace(data.participants))\n\n        const message = gettext(\"%(user)s has been made new thread owner.\")\n        snackbar.success(\n          interpolate(\n            message,\n            {\n              user: participant.username\n            },\n            true\n          )\n        )\n      },\n      rejection => {\n        snackbar.apiError(rejection)\n      }\n    )\n}\n","import React from \"react\"\nimport { remove, leave } from \"./actions\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.isUser = props.participant.id === props.user.id\n  }\n\n  onClick = () => {\n    let confirmed = false\n    if (this.isUser) {\n      confirmed = window.confirm(\n        gettext(\"Are you sure you want to leave this thread?\")\n      )\n    } else {\n      const message = gettext(\n        \"Are you sure you want to remove %(user)s from this thread?\"\n      )\n      confirmed = window.confirm(\n        interpolate(\n          message,\n          {\n            user: this.props.participant.username\n          },\n          true\n        )\n      )\n    }\n\n    if (!confirmed) return\n\n    if (this.isUser) {\n      leave(this.props.thread, this.props.participant)\n    } else {\n      remove(this.props.thread, this.props.participant)\n    }\n  }\n\n  render() {\n    const isModerator = this.props.user.acl.can_moderate_private_threads\n\n    if (!(this.props.userIsOwner || this.isUser || isModerator)) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          {this.isUser ? gettext(\"Leave thread\") : gettext(\"Remove\")}\n        </button>\n      </li>\n    )\n  }\n}\n","import React from \"react\"\nimport MakeOwner from \"./make-owner\"\nimport Remove from \"./remove\"\nimport Avatar from \"misago/components/avatar\"\n\nexport default function(props) {\n  const participant = props.participant\n\n  let className = \"btn btn-default\"\n  if (participant.is_owner) {\n    className = \"btn btn-primary\"\n  }\n  className += \" btn-user btn-block\"\n\n  return (\n    <div className=\"col-xs-12 col-sm-3 col-md-2 participant-card\">\n      <div className=\"dropdown\">\n        <button\n          aria-haspopup=\"true\"\n          aria-expanded=\"false\"\n          className={className}\n          data-toggle=\"dropdown\"\n          type=\"button\"\n        >\n          <Avatar size=\"34\" user={participant} />\n          <span className=\"btn-text\">{participant.username}</span>\n        </button>\n        <ul className=\"dropdown-menu stick-to-bottom\">\n          <UserStatus isOwner={participant.is_owner} />\n          <li className=\"dropdown-header\" />\n          <li>\n            <a href={participant.url}>{gettext(\"See profile\")}</a>\n          </li>\n          <li role=\"separator\" className=\"divider\" />\n          <MakeOwner {...props} />\n          <Remove {...props} />\n        </ul>\n      </div>\n    </div>\n  )\n}\n\nexport function UserStatus({ isOwner }) {\n  if (!isOwner) return null\n\n  return (\n    <li className=\"dropdown-header dropdown-header-owner\">\n      <span className=\"material-icon\">start</span>\n      <span className=\"icon-text\">{gettext(\"Thread owner\")}</span>\n    </li>\n  )\n}\n","import React from \"react\"\nimport Card from \"./card\"\n\nexport default function({ participants, thread, user, userIsOwner }) {\n  return (\n    <div className=\"participants-cards\">\n      <div className=\"row\">\n        {participants.map(participant => {\n          return (\n            <Card\n              key={participant.id}\n              participant={participant}\n              thread={thread}\n              user={user}\n              userIsOwner={userIsOwner}\n            />\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport AddParticipant from \"./add-participant\"\nimport CardsList from \"./cards-list\"\nimport * as utils from \"./utils\"\n\nexport default function(props) {\n  if (!props.participants.length) return null\n\n  return (\n    <div className=\"panel panel-default panel-participants\">\n      <div className=\"panel-body\">\n        <CardsList\n          userIsOwner={getUserIsOwner(props.user, props.participants)}\n          {...props}\n        />\n        <div className=\"row\">\n          <AddParticipant thread={props.thread} />\n          <div className=\"col-xs-12 col-sm-9\">\n            <p>{utils.getParticipantsCopy(props.participants)}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport function getUserIsOwner(user, participants) {\n  return participants[0].id === user.id\n}\n","export function getParticipantsCopy(participants) {\n  const count = participants.length\n  const message = ngettext(\n    \"This thread has %(users)s participant.\",\n    \"This thread has %(users)s participants.\",\n    count\n  )\n\n  return interpolate(\n    message,\n    {\n      users: count\n    },\n    true\n  )\n}\n","import React from \"react\"\n\nconst ICON = {\n  changed_title: \"edit\",\n\n  pinned_globally: \"bookmark\",\n  pinned_locally: \"bookmark_border\",\n  unpinned: \"panorama_fish_eye\",\n\n  moved: \"arrow_forward\",\n  merged: \"call_merge\",\n\n  approved: \"done\",\n\n  opened: \"lock_open\",\n  closed: \"lock_outline\",\n\n  unhid: \"visibility\",\n  hid: \"visibility_off\",\n\n  changed_owner: \"grade\",\n  tookover: \"grade\",\n\n  added_participant: \"person_add\",\n\n  owner_left: \"person_outline\",\n  participant_left: \"person_outline\",\n  removed_participant: \"remove_circle_outline\"\n}\n\nexport default function(props) {\n  return (\n    <div className=\"post-avatar\">\n      <span className=\"material-icon\">{ICON[props.post.event_type]}</span>\n    </div>\n  )\n}\n","import React from \"react\"\nimport moment from \"moment\"\nimport * as post from \"misago/reducers/post\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default function(props) {\n  if (isVisible(props.post.acl)) {\n    return (\n      <li className=\"event-controls\">\n        <Hide {...props} />\n        <Unhide {...props} />\n        <Delete {...props} />\n      </li>\n    )\n  } else {\n    return null\n  }\n}\n\nexport function isVisible(acl) {\n  return acl.can_hide\n}\n\nexport class Hide extends React.Component {\n  onClick = () => {\n    store.dispatch(\n      post.patch(this.props.post, {\n        is_hidden: true,\n        hidden_on: moment(),\n        hidden_by_name: this.props.user.username,\n        url: Object.assign(this.props.post.url, {\n          hidden_by: this.props.user.url\n        })\n      })\n    )\n\n    const op = { op: \"replace\", path: \"is-hidden\", value: true }\n\n    ajax.patch(this.props.post.api.index, [op]).then(\n      patch => {\n        store.dispatch(post.patch(this.props.post, patch))\n      },\n      rejection => {\n        if (rejection.status === 400) {\n          snackbar.error(rejection.detail[0])\n        } else {\n          snackbar.apiError(rejection)\n        }\n\n        store.dispatch(\n          post.patch(this.props.post, {\n            is_hidden: false\n          })\n        )\n      }\n    )\n  }\n\n  render() {\n    if (!this.props.post.is_hidden) {\n      return (\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          {gettext(\"Hide\")}\n        </button>\n      )\n    } else {\n      return null\n    }\n  }\n}\n\nexport class Unhide extends React.Component {\n  onClick = () => {\n    store.dispatch(\n      post.patch(this.props.post, {\n        is_hidden: false\n      })\n    )\n\n    const op = { op: \"replace\", path: \"is-hidden\", value: false }\n\n    ajax.patch(this.props.post.api.index, [op]).then(\n      patch => {\n        store.dispatch(post.patch(this.props.post, patch))\n      },\n      rejection => {\n        if (rejection.status === 400) {\n          snackbar.error(rejection.detail[0])\n        } else {\n          snackbar.apiError(rejection)\n        }\n\n        store.dispatch(\n          post.patch(this.props.post, {\n            is_hidden: true\n          })\n        )\n      }\n    )\n  }\n\n  render() {\n    if (this.props.post.is_hidden) {\n      return (\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          {gettext(\"Unhide\")}\n        </button>\n      )\n    } else {\n      return null\n    }\n  }\n}\n\nexport class Delete extends React.Component {\n  onClick = () => {\n    const decision = window.confirm(\n      gettext(\n        \"Are you sure you wish to delete this event? This action is not reversible!\"\n      )\n    )\n    if (decision) {\n      this.delete()\n    }\n  }\n\n  delete = () => {\n    store.dispatch(\n      post.patch(this.props.post, {\n        isDeleted: true\n      })\n    )\n\n    ajax.delete(this.props.post.api.index).then(\n      () => {\n        snackbar.success(gettext(\"Event has been deleted.\"))\n      },\n      rejection => {\n        if (rejection.status === 400) {\n          snackbar.error(rejection.detail[0])\n        } else {\n          snackbar.apiError(rejection)\n        }\n\n        store.dispatch(\n          post.patch(this.props.post, {\n            isDeleted: false\n          })\n        )\n      }\n    )\n  }\n\n  render() {\n    return (\n      <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n        {gettext(\"Delete\")}\n      </button>\n    )\n  }\n}\n","import React from \"react\"\nimport escapeHtml from \"misago/utils/escape-html\"\nimport Controls from \"./controls\"\n\nconst DATE_ABBR = '<abbr title=\"%(absolute)s\">%(relative)s</abbr>'\nconst DATE_URL = '<a href=\"%(url)s\" title=\"%(absolute)s\">%(relative)s</a>'\nconst USER_SPAN = '<span class=\"item-title\">%(user)s</span>'\nconst USER_URL = '<a href=\"%(url)s\" class=\"item-title\">%(user)s</a>'\n\nexport default function(props) {\n  return (\n    <ul className=\"list-inline event-info\">\n      <Hidden {...props} />\n      <Poster {...props} />\n      <Controls {...props} />\n    </ul>\n  )\n}\n\nexport function Hidden(props) {\n  if (props.post.is_hidden) {\n    let user = null\n    if (props.post.url.hidden_by) {\n      user = interpolate(\n        USER_URL,\n        {\n          url: escapeHtml(props.post.url.hidden_by),\n          user: escapeHtml(props.post.hidden_by_name)\n        },\n        true\n      )\n    } else {\n      user = interpolate(\n        USER_SPAN,\n        {\n          user: escapeHtml(props.post.hidden_by_name)\n        },\n        true\n      )\n    }\n\n    const date = interpolate(\n      DATE_ABBR,\n      {\n        absolute: escapeHtml(props.post.hidden_on.format(\"LLL\")),\n        relative: escapeHtml(props.post.hidden_on.fromNow())\n      },\n      true\n    )\n\n    const message = interpolate(\n      escapeHtml(gettext(\"Hidden by %(event_by)s %(event_on)s.\")),\n      {\n        event_by: user,\n        event_on: date\n      },\n      true\n    )\n\n    return (\n      <li\n        className=\"event-hidden-message\"\n        dangerouslySetInnerHTML={{ __html: message }}\n      />\n    )\n  } else {\n    return null\n  }\n}\n\nexport function Poster(props) {\n  let user = null\n  if (props.post.poster) {\n    user = interpolate(\n      USER_URL,\n      {\n        url: escapeHtml(props.post.poster.url),\n        user: escapeHtml(props.post.poster_name)\n      },\n      true\n    )\n  } else {\n    user = interpolate(\n      USER_SPAN,\n      {\n        user: escapeHtml(props.post.poster_name)\n      },\n      true\n    )\n  }\n\n  const date = interpolate(\n    DATE_URL,\n    {\n      url: escapeHtml(props.post.url.index),\n      absolute: escapeHtml(props.post.posted_on.format(\"LLL\")),\n      relative: escapeHtml(props.post.posted_on.fromNow())\n    },\n    true\n  )\n\n  const message = interpolate(\n    escapeHtml(gettext(\"By %(event_by)s %(event_on)s.\")),\n    {\n      event_by: user,\n      event_on: date\n    },\n    true\n  )\n\n  return (\n    <li\n      className=\"event-posters\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n","import React from \"react\"\nimport escapeHtml from \"misago/utils/escape-html\"\n\nconst MESSAGE = {\n  pinned_globally: gettext(\"Thread has been pinned globally.\"),\n  pinned_locally: gettext(\"Thread has been pinned locally.\"),\n  unpinned: gettext(\"Thread has been unpinned.\"),\n\n  approved: gettext(\"Thread has been approved.\"),\n\n  opened: gettext(\"Thread has been opened.\"),\n  closed: gettext(\"Thread has been closed.\"),\n\n  unhid: gettext(\"Thread has been revealed.\"),\n  hid: gettext(\"Thread has been made hidden.\"),\n\n  tookover: gettext(\"Took thread over.\"),\n\n  owner_left: gettext(\"Owner has left thread. This thread is now closed.\"),\n  participant_left: gettext(\"Participant has left thread.\")\n}\n\nconst ITEM_LINK = '<a href=\"%(url)s\" class=\"item-title\">%(name)s</a>'\nconst ITEM_SPAN = '<span class=\"item-title\">%(name)s</span>'\n\nexport default function(props) {\n  if (MESSAGE[props.post.event_type]) {\n    return <p className=\"event-message\">{MESSAGE[props.post.event_type]}</p>\n  } else if (props.post.event_type === \"changed_title\") {\n    return <ChangedTitle {...props} />\n  } else if (props.post.event_type === \"moved\") {\n    return <Moved {...props} />\n  } else if (props.post.event_type === \"merged\") {\n    return <Merged {...props} />\n  } else if (props.post.event_type === \"changed_owner\") {\n    return <ChangedOwner {...props} />\n  } else if (props.post.event_type === \"added_participant\") {\n    return <AddedParticipant {...props} />\n  } else if (props.post.event_type === \"removed_participant\") {\n    return <RemovedParticipant {...props} />\n  } else {\n    return null\n  }\n}\n\nexport function ChangedTitle(props) {\n  const msgstring = escapeHtml(\n    gettext(\"Thread title has been changed from %(old_title)s.\")\n  )\n  const oldTitle = interpolate(\n    ITEM_SPAN,\n    {\n      name: escapeHtml(props.post.event_context.old_title)\n    },\n    true\n  )\n  const message = interpolate(\n    msgstring,\n    {\n      old_title: oldTitle\n    },\n    true\n  )\n\n  return (\n    <p\n      className=\"event-message\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n\nexport function Moved(props) {\n  const msgstring = escapeHtml(\n    gettext(\"Thread has been moved from %(from_category)s.\")\n  )\n  const fromCategory = interpolate(\n    ITEM_LINK,\n    {\n      url: escapeHtml(props.post.event_context.from_category.url),\n      name: escapeHtml(props.post.event_context.from_category.name)\n    },\n    true\n  )\n\n  const message = interpolate(\n    msgstring,\n    {\n      from_category: fromCategory\n    },\n    true\n  )\n\n  return (\n    <p\n      className=\"event-message\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n\nexport function Merged(props) {\n  const msgstring = escapeHtml(\n    gettext(\"The %(merged_thread)s thread has been merged into this thread.\")\n  )\n  const mergedThread = interpolate(\n    ITEM_SPAN,\n    {\n      name: escapeHtml(props.post.event_context.merged_thread)\n    },\n    true\n  )\n\n  const message = interpolate(\n    msgstring,\n    {\n      merged_thread: mergedThread\n    },\n    true\n  )\n\n  return (\n    <p\n      className=\"event-message\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n\nexport function ChangedOwner(props) {\n  const msgstring = escapeHtml(gettext(\"Changed thread owner to %(user)s.\"))\n  const newOwner = interpolate(\n    ITEM_LINK,\n    {\n      url: escapeHtml(props.post.event_context.user.url),\n      name: escapeHtml(props.post.event_context.user.username)\n    },\n    true\n  )\n\n  const message = interpolate(\n    msgstring,\n    {\n      user: newOwner\n    },\n    true\n  )\n\n  return (\n    <p\n      className=\"event-message\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n\nexport function AddedParticipant(props) {\n  const msgstring = escapeHtml(gettext(\"Added %(user)s to thread.\"))\n  const newOwner = interpolate(\n    ITEM_LINK,\n    {\n      url: escapeHtml(props.post.event_context.user.url),\n      name: escapeHtml(props.post.event_context.user.username)\n    },\n    true\n  )\n\n  const message = interpolate(\n    msgstring,\n    {\n      user: newOwner\n    },\n    true\n  )\n\n  return (\n    <p\n      className=\"event-message\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n\nexport function RemovedParticipant(props) {\n  const msgstring = escapeHtml(gettext(\"Removed %(user)s from thread.\"))\n  const newOwner = interpolate(\n    ITEM_LINK,\n    {\n      url: escapeHtml(props.post.event_context.user.url),\n      name: escapeHtml(props.post.event_context.user.username)\n    },\n    true\n  )\n\n  const message = interpolate(\n    msgstring,\n    {\n      user: newOwner\n    },\n    true\n  )\n\n  return (\n    <p\n      className=\"event-message\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n","import React from \"react\"\n\nexport default function({ post }) {\n  if (post.is_read) return null\n\n  return (\n    <div className=\"row\">\n      <div className=\"col-xs-10 col-xs-offset-2 col-sm-9 col-sm-offset-3 text-left\">\n        <div className=\"event-label\">\n          <span className=\"label label-unread\">{gettext(\"New event\")}</span>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport * as post from \"misago/reducers/post\"\nimport * as thread from \"misago/reducers/thread\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends React.Component {\n  /*\n  Super naive and de-facto placeholder implementation for reading posts on scroll\n  */\n  componentDidMount() {\n    if (this.props.post.is_read) return // don't register read tracker\n\n    $(this.documentNode).waypoint({\n      handler: direction => {\n        if (direction !== \"down\" || this.props.post.is_read) return\n\n        // after 1500ms run flag post as read logic\n        window.setTimeout(() => {\n          // check if post's bottom edge is still in viewport\n          const boundingClientRect = this.documentNode.getBoundingClientRect()\n          const offsetBottom =\n            boundingClientRect.height + boundingClientRect.top\n          const clientHeight = document.documentElement.clientHeight\n\n          if (offsetBottom < 5) return // scrolled past the post\n          if (offsetBottom > clientHeight) return // scrolled back up\n\n          // mark post as read\n          store.dispatch(\n            post.patch(this.props.post, {\n              is_read: true\n            })\n          )\n\n          // call API to let it know we have unread post\n          ajax.post(this.props.post.api.read).then(\n            data => {\n              store.dispatch(\n                thread.update(this.props.thread, {\n                  is_read: data.thread_is_read\n                })\n              )\n            },\n            rejection => {\n              snackbar.apiError(rejection)\n            }\n          )\n        }, 1000)\n      },\n      offset: \"bottom-in-view\"\n    })\n  }\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        ref={node => {\n          this.documentNode = node\n        }}\n      >\n        {this.props.children}\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Icon from \"./icon\"\nimport Info from \"./info\"\nimport Message from \"./message\"\nimport UnreadLabel from \"./unread-label\"\nimport Waypoint from \"../waypoint\"\n\nexport default function(props) {\n  let className = \"event\"\n  if (props.post.isDeleted) {\n    className = \"hide\"\n  } else if (props.post.is_hidden) {\n    className = \"event post-hidden\"\n  }\n\n  return (\n    <li id={\"post-\" + props.post.id} className={className}>\n      <UnreadLabel post={props.post} />\n      <div className=\"row\">\n        <div className=\"col-xs-2 col-sm-3 text-right\">\n          <Icon {...props} />\n        </div>\n        <div className=\"col-xs-10 col-sm-9 text-left\">\n          <Waypoint post={props.post}>\n            <Message {...props} />\n            <Info {...props} />\n          </Waypoint>\n        </div>\n      </div>\n    </li>\n  )\n}\n","import React from \"react\"\nimport misago from \"misago\"\nimport escapeHtml from \"misago/utils/escape-html\"\nimport formatFilesize from \"misago/utils/file-size\"\n\nconst DATE_ABBR = '<abbr title=\"%(absolute)s\">%(relative)s</abbr>'\nconst USER_SPAN = '<span class=\"item-title\">%(user)s</span>'\nconst USER_URL = '<a href=\"%(url)s\" class=\"item-title\">%(user)s</a>'\n\nexport default function(props) {\n  return (\n    <div className=\"col-xs-12 col-md-6\">\n      <AttachmentPreview {...props} />\n      <div className=\"post-attachment\">\n        <a\n          href={props.attachment.url.index}\n          className=\"attachment-name item-title\"\n        >\n          {props.attachment.filename}\n        </a>\n        <AttachmentDetails {...props} />\n      </div>\n    </div>\n  )\n}\n\nexport function AttachmentPreview(props) {\n  if (props.attachment.is_image) {\n    return (\n      <div className=\"post-attachment-preview\">\n        <AttachmentThumbnail {...props} />\n      </div>\n    )\n  } else {\n    return (\n      <div className=\"post-attachment-preview\">\n        <AttachmentIcon {...props} />\n      </div>\n    )\n  }\n}\n\nexport function AttachmentIcon(props) {\n  return (\n    <a href={props.attachment.url.index} className=\"material-icon\">\n      insert_drive_file\n    </a>\n  )\n}\n\nexport function AttachmentThumbnail(props) {\n  const url = props.attachment.url.thumb || props.attachment.url.index\n  return (\n    <a\n      className=\"post-thumbnail\"\n      href={props.attachment.url.index}\n      style={{ backgroundImage: 'url(\"' + escapeHtml(url) + '\")' }}\n    />\n  )\n}\n\nexport function AttachmentDetails(props) {\n  let user = null\n  if (props.attachment.url.uploader) {\n    user = interpolate(\n      USER_URL,\n      {\n        url: escapeHtml(props.attachment.url.uploader),\n        user: escapeHtml(props.attachment.uploader_name)\n      },\n      true\n    )\n  } else {\n    user = interpolate(\n      USER_SPAN,\n      {\n        user: escapeHtml(props.attachment.uploader_name)\n      },\n      true\n    )\n  }\n\n  const date = interpolate(\n    DATE_ABBR,\n    {\n      absolute: escapeHtml(props.attachment.uploaded_on.format(\"LLL\")),\n      relative: escapeHtml(props.attachment.uploaded_on.fromNow())\n    },\n    true\n  )\n\n  const message = interpolate(\n    escapeHtml(\n      gettext(\n        \"%(filetype)s, %(size)s, uploaded by %(uploader)s %(uploaded_on)s.\"\n      )\n    ),\n    {\n      filetype: props.attachment.filetype,\n      size: formatFilesize(props.attachment.size),\n      uploader: user,\n      uploaded_on: date\n    },\n    true\n  )\n\n  return (\n    <p\n      className=\"post-attachment-description\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n","import React from \"react\"\nimport batch from \"misago/utils/batch\"\nimport Attachment from \"./attachment\"\n\nexport default function(props) {\n  if (!isVisible(props.post)) {\n    return null\n  }\n\n  return (\n    <div className=\"post-attachments\">\n      {batch(props.post.attachments, 2).map(row => {\n        const key = row\n          .map(a => {\n            return a ? a.id : 0\n          })\n          .join(\"_\")\n        return <Row key={key} row={row} />\n      })}\n    </div>\n  )\n}\n\nexport function isVisible(post) {\n  return (!post.is_hidden || post.acl.can_see_hidden) && post.attachments\n}\n\nexport function Row(props) {\n  return (\n    <div className=\"row\">\n      {props.row.map(attachment => {\n        return (\n          <Attachment\n            attachment={attachment}\n            key={attachment ? attachment.id : 0}\n          />\n        )\n      })}\n    </div>\n  )\n}\n","import React from \"react\"\nimport Waypoint from \"../waypoint\"\nimport MisagoMarkup from \"misago/components/misago-markup\"\nimport escapeHtml from \"misago/utils/escape-html\"\n\nconst HIDDEN_BY_URL = '<a href=\"%(url)s\" class=\"item-title\">%(user)s</a>'\nconst HIDDEN_BY_SPAN = '<span class=\"item-title\">%(user)s</span>'\nconst HIDDEN_ON =\n  '<abbr class=\"last-title\" title=\"%(absolute)s\">%(relative)s</abbr>'\n\nexport default function(props) {\n  if (props.post.is_hidden && !props.post.acl.can_see_hidden) {\n    return <Hidden {...props} />\n  } else if (props.post.content) {\n    return <Default {...props} />\n  } else {\n    return <Invalid {...props} />\n  }\n}\n\nexport function Default(props) {\n  return (\n    <Waypoint className=\"post-body\" post={props.post}>\n      <MisagoMarkup markup={props.post.content} />\n    </Waypoint>\n  )\n}\n\nexport function Hidden(props) {\n  let user = null\n  if (props.post.hidden_by) {\n    user = interpolate(\n      HIDDEN_BY_URL,\n      {\n        url: escapeHtml(props.post.url.hidden_by),\n        user: escapeHtml(props.post.hidden_by_name)\n      },\n      true\n    )\n  } else {\n    user = interpolate(\n      HIDDEN_BY_SPAN,\n      {\n        user: escapeHtml(props.post.hidden_by_name)\n      },\n      true\n    )\n  }\n\n  const date = interpolate(\n    HIDDEN_ON,\n    {\n      absolute: escapeHtml(props.post.hidden_on.format(\"LLL\")),\n      relative: escapeHtml(props.post.hidden_on.fromNow())\n    },\n    true\n  )\n\n  const message = interpolate(\n    escapeHtml(gettext(\"Hidden by %(hidden_by)s %(hidden_on)s.\")),\n    {\n      hidden_by: user,\n      hidden_on: date\n    },\n    true\n  )\n\n  return (\n    <Waypoint className=\"post-body post-body-hidden\" post={props.post}>\n      <p className=\"lead\">\n        {gettext(\"This post is hidden. You cannot see its contents.\")}\n      </p>\n      <p className=\"text-muted\" dangerouslySetInnerHTML={{ __html: message }} />\n    </Waypoint>\n  )\n}\n\nexport function Invalid(props) {\n  return (\n    <Waypoint className=\"post-body post-body-invalid\" post={props.post}>\n      <p className=\"lead\">\n        {gettext(\"This post's contents cannot be displayed.\")}\n      </p>\n      <p className=\"text-muted\">\n        {gettext(\"This error is caused by invalid post content manipulation.\")}\n      </p>\n    </Waypoint>\n  )\n}\n","import React from \"react\"\n\nexport function FlagBestAnswer({ post, thread, user }) {\n  if (!(isVisible(post) && post.id === thread.best_answer)) {\n    return null\n  }\n\n  let message = null\n  if (user.id && thread.best_answer_marked_by === user.id) {\n    message = interpolate(\n      gettext(\"Marked as best answer by you %(marked_on)s.\"),\n      {\n        marked_on: thread.best_answer_marked_on.fromNow()\n      },\n      true\n    )\n  } else {\n    message = interpolate(\n      gettext(\"Marked as best answer by %(marked_by)s %(marked_on)s.\"),\n      {\n        marked_by: thread.best_answer_marked_by_name,\n        marked_on: thread.best_answer_marked_on.fromNow()\n      },\n      true\n    )\n  }\n\n  return (\n    <div className=\"post-status-message post-status-best-answer\">\n      <span className=\"material-icon\">check_box</span>\n      <p>{message}</p>\n    </div>\n  )\n}\n\nexport function FlagHidden(props) {\n  if (!(isVisible(props.post) && props.post.is_hidden)) {\n    return null\n  }\n\n  return (\n    <div className=\"post-status-message post-status-hidden\">\n      <span className=\"material-icon\">visibility_off</span>\n      <p>\n        {gettext(\n          \"This post is hidden. Only users with permission may see its contents.\"\n        )}\n      </p>\n    </div>\n  )\n}\n\nexport function FlagUnapproved(props) {\n  if (!(isVisible(props.post) && props.post.is_unapproved)) {\n    return null\n  }\n\n  return (\n    <div className=\"post-status-message post-status-unapproved\">\n      <span className=\"material-icon\">remove_circle_outline</span>\n      <p>\n        {gettext(\n          \"This post is unapproved. Only users with permission to approve posts and its author may see its contents.\"\n        )}\n      </p>\n    </div>\n  )\n}\n\nexport function FlagProtected(props) {\n  if (!(isVisible(props.post) && props.post.is_protected)) {\n    return null\n  }\n\n  return (\n    <div className=\"post-status-message post-status-protected visible-xs-block\">\n      <span className=\"material-icon\">lock_outline</span>\n      <p>{gettext(\"This post is protected. Only moderators may change it.\")}</p>\n    </div>\n  )\n}\n\nexport function isVisible(post) {\n  return !post.is_hidden || post.acl.can_see_hidden\n}\n","import moment from \"moment\"\nimport * as thread from \"misago/reducers/thread\"\nimport * as post from \"misago/reducers/post\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport function approve(props) {\n  store.dispatch(\n    post.patch(props.post, {\n      is_unapproved: false\n    })\n  )\n\n  const ops = [{ op: \"replace\", path: \"is-unapproved\", value: false }]\n\n  const previousState = {\n    is_unapproved: props.post.is_unapproved\n  }\n\n  patch(props, ops, previousState)\n}\n\nexport function protect(props) {\n  store.dispatch(\n    post.patch(props.post, {\n      is_protected: true\n    })\n  )\n\n  const ops = [{ op: \"replace\", path: \"is-protected\", value: true }]\n\n  const previousState = {\n    is_protected: props.post.is_protected\n  }\n\n  patch(props, ops, previousState)\n}\n\nexport function unprotect(props) {\n  store.dispatch(\n    post.patch(props.post, {\n      is_protected: false\n    })\n  )\n\n  const ops = [{ op: \"replace\", path: \"is-protected\", value: false }]\n\n  const previousState = {\n    is_protected: props.post.is_protected\n  }\n\n  patch(props, ops, previousState)\n}\n\nexport function hide(props) {\n  store.dispatch(\n    post.patch(props.post, {\n      is_hidden: true,\n      hidden_on: moment(),\n      hidden_by_name: props.user.username,\n      url: Object.assign(props.post.url, {\n        hidden_by: props.user.url\n      })\n    })\n  )\n\n  const ops = [{ op: \"replace\", path: \"is-hidden\", value: true }]\n\n  const previousState = {\n    is_hidden: props.post.is_hidden,\n    hidden_on: props.post.hidden_on,\n    hidden_by_name: props.post.hidden_by_name,\n    url: props.post.url\n  }\n\n  patch(props, ops, previousState)\n}\n\nexport function unhide(props) {\n  store.dispatch(\n    post.patch(props.post, {\n      is_hidden: false\n    })\n  )\n\n  const ops = [{ op: \"replace\", path: \"is-hidden\", value: false }]\n\n  const previousState = {\n    is_hidden: props.post.is_hidden\n  }\n\n  patch(props, ops, previousState)\n}\n\nexport function like(props) {\n  const lastLikes = props.post.last_likes || []\n  const concatedLikes = [props.user].concat(lastLikes)\n  const finalLikes =\n    concatedLikes.length > 3 ? concatedLikes.slice(0, -1) : concatedLikes\n\n  store.dispatch(\n    post.patch(props.post, {\n      is_liked: true,\n      likes: props.post.likes + 1,\n      last_likes: finalLikes\n    })\n  )\n\n  const ops = [{ op: \"replace\", path: \"is-liked\", value: true }]\n\n  const previousState = {\n    is_liked: props.post.is_liked,\n    likes: props.post.likes,\n    last_likes: props.post.last_likes\n  }\n\n  patch(props, ops, previousState)\n}\n\nexport function unlike(props) {\n  store.dispatch(\n    post.patch(props.post, {\n      is_liked: false,\n      likes: props.post.likes - 1,\n      last_likes: props.post.last_likes.filter(user => {\n        return !user.id || user.id !== props.user.id\n      })\n    })\n  )\n\n  const ops = [{ op: \"replace\", path: \"is-liked\", value: false }]\n\n  const previousState = {\n    is_liked: props.post.is_liked,\n    likes: props.post.likes,\n    last_likes: props.post.last_likes\n  }\n\n  patch(props, ops, previousState)\n}\n\nexport function patch(props, ops, previousState) {\n  ajax.patch(props.post.api.index, ops).then(\n    newState => {\n      store.dispatch(post.patch(props.post, newState))\n    },\n    rejection => {\n      if (rejection.status === 400) {\n        snackbar.error(rejection.detail[0])\n      } else {\n        snackbar.apiError(rejection)\n      }\n\n      store.dispatch(post.patch(props.post, previousState))\n    }\n  )\n}\n\nexport function remove(props) {\n  let confirmed = window.confirm(\n    gettext(\n      \"Are you sure you want to delete this post? This action is not reversible!\"\n    )\n  )\n  if (!confirmed) {\n    return\n  }\n\n  store.dispatch(\n    post.patch(props.post, {\n      isDeleted: true\n    })\n  )\n\n  ajax.delete(props.post.api.index).then(\n    () => {\n      snackbar.success(gettext(\"Post has been deleted.\"))\n    },\n    rejection => {\n      if (rejection.status === 400) {\n        snackbar.error(rejection.detail)\n      } else {\n        snackbar.apiError(rejection)\n      }\n\n      store.dispatch(\n        post.patch(props.post, {\n          isDeleted: false\n        })\n      )\n    }\n  )\n}\n\nexport function markAsBestAnswer(props) {\n  const { post, user } = props\n\n  store.dispatch(\n    thread.update({\n      best_answer: post.id,\n      best_answer_is_protected: post.is_protected,\n      best_answer_marked_on: moment(),\n      best_answer_marked_by: user.id,\n      best_answer_marked_by_name: user.username,\n      best_answer_marked_by_slug: user.slug\n    })\n  )\n\n  const ops = [\n    { op: \"replace\", path: \"best-answer\", value: post.id },\n    { op: \"add\", path: \"acl\", value: true }\n  ]\n\n  const previousState = {\n    best_answer: props.thread.best_answer,\n    best_answer_is_protected: props.thread.best_answer_is_protected,\n    best_answer_marked_on: props.thread.best_answer_marked_on,\n    best_answer_marked_by: props.thread.best_answer_marked_by,\n    best_answer_marked_by_name: props.thread.best_answer_marked_by_name,\n    best_answer_marked_by_slug: props.thread.best_answer_marked_by_slug\n  }\n\n  patchThread(props, ops, previousState)\n}\n\nexport function unmarkBestAnswer(props) {\n  const { post } = props\n\n  store.dispatch(\n    thread.update({\n      best_answer: null,\n      best_answer_is_protected: false,\n      best_answer_marked_on: null,\n      best_answer_marked_by: null,\n      best_answer_marked_by_name: null,\n      best_answer_marked_by_slug: null\n    })\n  )\n\n  const ops = [\n    { op: \"remove\", path: \"best-answer\", value: post.id },\n    { op: \"add\", path: \"acl\", value: true }\n  ]\n\n  const previousState = {\n    best_answer: props.thread.best_answer,\n    best_answer_is_protected: props.thread.best_answer_is_protected,\n    best_answer_marked_on: props.thread.best_answer_marked_on,\n    best_answer_marked_by: props.thread.best_answer_marked_by,\n    best_answer_marked_by_name: props.thread.best_answer_marked_by_name,\n    best_answer_marked_by_slug: props.thread.best_answer_marked_by_slug\n  }\n\n  patchThread(props, ops, previousState)\n}\n\nexport function patchThread(props, ops, previousState) {\n  ajax.patch(props.thread.api.index, ops).then(\n    newState => {\n      if (newState.best_answer_marked_on) {\n        newState.best_answer_marked_on = moment(newState.best_answer_marked_on)\n      }\n      store.dispatch(thread.update(newState))\n    },\n    rejection => {\n      if (rejection.status === 400) {\n        snackbar.error(rejection.detail[0])\n      } else {\n        snackbar.apiError(rejection)\n      }\n\n      store.dispatch(thread.update(previousState))\n    }\n  )\n}\n","import React from \"react\"\nimport moment from \"moment\"\nimport Avatar from \"misago/components/avatar\"\nimport Message from \"misago/components/modal-message\"\nimport Loader from \"misago/components/modal-loader\"\nimport ajax from \"misago/services/ajax\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isReady: false,\n\n      error: null,\n      likes: []\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(this.props.post.api.likes).then(\n      data => {\n        this.setState({\n          isReady: true,\n          likes: data.map(hydrateLike)\n        })\n      },\n      rejection => {\n        this.setState({\n          isReady: true,\n          error: rejection.detail\n        })\n      }\n    )\n  }\n\n  render() {\n    if (this.state.error) {\n      return (\n        <ModalDialog className=\"modal-message\">\n          <Message message={this.state.error} />\n        </ModalDialog>\n      )\n    } else if (this.state.isReady) {\n      if (this.state.likes.length) {\n        return (\n          <ModalDialog className=\"modal-sm\" likes={this.state.likes}>\n            <LikesList likes={this.state.likes} />\n          </ModalDialog>\n        )\n      }\n\n      return (\n        <ModalDialog className=\"modal-message\">\n          <Message message={gettext(\"No users have liked this post.\")} />\n        </ModalDialog>\n      )\n    }\n\n    return (\n      <ModalDialog className=\"modal-sm\">\n        <Loader />\n      </ModalDialog>\n    )\n  }\n}\n\nexport function hydrateLike(data) {\n  return Object.assign({}, data, {\n    liked_on: moment(data.liked_on)\n  })\n}\n\nexport function ModalDialog({ className, children, likes }) {\n  let title = gettext(\"Post Likes\")\n  if (likes) {\n    const likesCount = likes.length\n    const message = ngettext(\"%(likes)s like\", \"%(likes)s likes\", likesCount)\n\n    title = interpolate(message, { likes: likesCount }, true)\n  }\n\n  return (\n    <div className={\"modal-dialog \" + (className || \"\")} role=\"document\">\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <button\n            aria-label={gettext(\"Close\")}\n            className=\"close\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n          <h4 className=\"modal-title\">{title}</h4>\n        </div>\n        {children}\n      </div>\n    </div>\n  )\n}\n\nexport function LikesList(props) {\n  return (\n    <div className=\"modal-body modal-post-likers\">\n      <ul className=\"media-list\">\n        {props.likes.map(like => {\n          return <LikeDetails key={like.id} {...like} />\n        })}\n      </ul>\n    </div>\n  )\n}\n\nexport function LikeDetails(props) {\n  if (props.url) {\n    const user = {\n      id: props.liker_id,\n      avatars: props.avatars\n    }\n\n    return (\n      <li className=\"media\">\n        <div className=\"media-left\">\n          <a className=\"user-avatar\" href={props.url}>\n            <Avatar size=\"50\" user={user} />\n          </a>\n        </div>\n        <div className=\"media-body\">\n          <a className=\"item-title\" href={props.url}>\n            {props.username}\n          </a>{\" \"}\n          <LikeDate likedOn={props.liked_on} />\n        </div>\n      </li>\n    )\n  }\n\n  return (\n    <li className=\"media\">\n      <div className=\"media-left\">\n        <span className=\"user-avatar\">\n          <Avatar size=\"50\" />\n        </span>\n      </div>\n      <div className=\"media-body\">\n        <strong>{props.username}</strong> <LikeDate likedOn={props.liked_on} />\n      </div>\n    </li>\n  )\n}\n\nexport function LikeDate(props) {\n  return (\n    <span className=\"text-muted\" title={props.likedOn.format(\"LLL\")}>\n      {props.likedOn.fromNow()}\n    </span>\n  )\n}\n","import React from \"react\"\nimport * as actions from \"./controls/actions\"\nimport LikesModal from \"misago/components/post-likes\"\nimport modal from \"misago/services/modal\"\nimport posting from \"misago/services/posting\"\n\nexport default function(props) {\n  if (!isVisible(props.post)) return null\n\n  return (\n    <div className=\"post-footer\">\n      <MarkAsBestAnswer {...props} />\n      <MarkAsBestAnswerCompact {...props} />\n      <Like {...props} />\n      <Likes\n        lastLikes={props.post.last_likes}\n        likes={props.post.likes}\n        {...props}\n      />\n      <LikesCompact likes={props.post.likes} {...props} />\n      <Reply {...props} />\n      <Edit {...props} />\n    </div>\n  )\n}\n\nexport function isVisible(post) {\n  return (\n    (!post.is_hidden || post.acl.can_see_hidden) &&\n    (post.acl.can_reply ||\n      post.acl.can_edit ||\n      (post.acl.can_see_likes && (post.last_likes || []).length) ||\n      post.acl.can_like)\n  )\n}\n\nexport class MarkAsBestAnswer extends React.Component {\n  onClick = () => {\n    actions.markAsBestAnswer(this.props)\n  }\n\n  render() {\n    const { post, thread } = this.props\n\n    if (!thread.acl.can_mark_best_answer) return null\n    if (!post.acl.can_mark_as_best_answer) return null\n    if (thread.best_answer && !thread.acl.can_change_best_answer) return null\n\n    return (\n      <button\n        className=\"hidden-xs btn btn-default btn-sm pull-left\"\n        disabled={this.props.post.isBusy || post.id === thread.best_answer}\n        onClick={this.onClick}\n        type=\"button\"\n      >\n        <span className=\"material-icon\">check_box</span>\n        {gettext(\"Best answer\")}\n      </button>\n    )\n  }\n}\n\nexport class MarkAsBestAnswerCompact extends React.Component {\n  onClick = () => {\n    actions.markAsBestAnswer(this.props)\n  }\n\n  render() {\n    const { post, thread } = this.props\n\n    if (!thread.acl.can_mark_best_answer) return null\n    if (!post.acl.can_mark_as_best_answer) return null\n    if (thread.best_answer && !thread.acl.can_change_best_answer) return null\n\n    return (\n      <button\n        className=\"visible-xs-inline-block btn btn-default btn-sm pull-left\"\n        disabled={this.props.post.isBusy || post.id === thread.best_answer}\n        onClick={this.onClick}\n        type=\"button\"\n      >\n        <span className=\"material-icon\">check_box</span>\n      </button>\n    )\n  }\n}\n\nexport class Like extends React.Component {\n  onClick = () => {\n    if (this.props.post.is_liked) {\n      actions.unlike(this.props)\n    } else {\n      actions.like(this.props)\n    }\n  }\n\n  render() {\n    if (!this.props.post.acl.can_like) return null\n\n    let className = \"btn btn-default btn-sm pull-left\"\n    if (this.props.post.is_liked) {\n      className = \"btn btn-success btn-sm pull-left\"\n    }\n\n    return (\n      <button\n        className={className}\n        disabled={this.props.post.isBusy}\n        onClick={this.onClick}\n        type=\"button\"\n      >\n        {this.props.post.is_liked ? gettext(\"Liked\") : gettext(\"Like\")}\n      </button>\n    )\n  }\n}\n\nexport class Likes extends React.Component {\n  onClick = () => {\n    modal.show(<LikesModal post={this.props.post} />)\n  }\n\n  render() {\n    const hasLikes = (this.props.post.last_likes || []).length > 0\n    if (!this.props.post.acl.can_see_likes || !hasLikes) return null\n\n    if (this.props.post.acl.can_see_likes === 2) {\n      return (\n        <button\n          className=\"btn btn-link btn-sm pull-left hidden-xs\"\n          onClick={this.onClick}\n          type=\"button\"\n        >\n          {getLikesMessage(this.props.likes, this.props.lastLikes)}\n        </button>\n      )\n    }\n\n    return (\n      <p className=\"pull-left hidden-xs\">\n        {getLikesMessage(this.props.likes, this.props.lastLikes)}\n      </p>\n    )\n  }\n}\n\nexport class LikesCompact extends Likes {\n  render() {\n    const hasLikes = (this.props.post.last_likes || []).length > 0\n    if (!this.props.post.acl.can_see_likes || !hasLikes) return null\n\n    if (this.props.post.acl.can_see_likes === 2) {\n      return (\n        <button\n          className=\"btn btn-link btn-sm likes-compact pull-left visible-xs-block\"\n          onClick={this.onClick}\n          type=\"button\"\n        >\n          <span className=\"material-icon\">favorite</span>\n          {this.props.likes}\n        </button>\n      )\n    }\n\n    return (\n      <p className=\"likes-compact pull-left visible-xs-block\">\n        <span className=\"material-icon\">favorite</span>\n        {this.props.likes}\n      </p>\n    )\n  }\n}\n\nexport function getLikesMessage(likes, users) {\n  const usernames = users.slice(0, 3).map(u => u.username)\n\n  if (usernames.length == 1) {\n    return interpolate(\n      gettext(\"%(user)s likes this.\"),\n      {\n        user: usernames[0]\n      },\n      true\n    )\n  }\n\n  const hiddenLikes = likes - usernames.length\n\n  const otherUsers = usernames.slice(0, -1).join(\", \")\n  const lastUser = usernames.slice(-1)[0]\n\n  const usernamesList = interpolate(\n    gettext(\"%(users)s and %(last_user)s\"),\n    {\n      users: otherUsers,\n      last_user: lastUser\n    },\n    true\n  )\n\n  if (hiddenLikes === 0) {\n    return interpolate(\n      gettext(\"%(users)s like this.\"),\n      {\n        users: usernamesList\n      },\n      true\n    )\n  }\n\n  const message = ngettext(\n    \"%(users)s and %(likes)s other user like this.\",\n    \"%(users)s and %(likes)s other users like this.\",\n    hiddenLikes\n  )\n\n  return interpolate(\n    message,\n    {\n      users: usernames.join(\", \"),\n      likes: hiddenLikes\n    },\n    true\n  )\n}\n\nexport class Reply extends React.Component {\n  onClick = () => {\n    posting.open({\n      mode: \"REPLY\",\n\n      config: this.props.thread.api.editor,\n      submit: this.props.thread.api.posts.index,\n\n      context: {\n        reply: this.props.post.id\n      }\n    })\n  }\n\n  render() {\n    if (this.props.post.acl.can_reply) {\n      return (\n        <button\n          className=\"btn btn-primary btn-sm pull-right\"\n          type=\"button\"\n          onClick={this.onClick}\n        >\n          {gettext(\"Reply\")}\n        </button>\n      )\n    } else {\n      return null\n    }\n  }\n}\n\nexport class Edit extends React.Component {\n  onClick = () => {\n    posting.open({\n      mode: \"EDIT\",\n\n      config: this.props.post.api.editor,\n      submit: this.props.post.api.index\n    })\n  }\n\n  render() {\n    if (this.props.post.acl.can_edit) {\n      return (\n        <button\n          className=\"hidden-xs btn btn-default btn-sm pull-right\"\n          type=\"button\"\n          onClick={this.onClick}\n        >\n          {gettext(\"Edit\")}\n        </button>\n      )\n    } else {\n      return null\n    }\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport * as post from \"misago/reducers/post\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      url: \"\",\n\n      validators: {\n        url: []\n      },\n      errors: {}\n    }\n  }\n\n  clean() {\n    if (!this.state.url.trim().length) {\n      snackbar.error(gettext(\"You have to enter link to the other thread.\"))\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    return ajax.post(this.props.thread.api.posts.move, {\n      new_thread: this.state.url,\n      posts: [this.props.post.id]\n    })\n  }\n\n  handleSuccess(success) {\n    store.dispatch(\n      post.patch(this.props.post, {\n        isDeleted: true\n      })\n    )\n\n    modal.hide()\n\n    snackbar.success(gettext(\"Selected post was moved to the other thread.\"))\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      snackbar.error(rejection.detail)\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  onUrlChange = event => {\n    this.changeValue(\"url\", event.target.value)\n  }\n\n  render() {\n    return (\n      <div className=\"modal-dialog\" role=\"document\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"modal-content\">\n            <ModalHeader />\n            <div className=\"modal-body\">\n              <FormGroup\n                for=\"id_url\"\n                label={gettext(\"Link to thread you want to move post to\")}\n              >\n                <input\n                  className=\"form-control\"\n                  disabled={this.state.isLoading}\n                  id=\"id_url\"\n                  onChange={this.onUrlChange}\n                  value={this.state.url}\n                />\n              </FormGroup>\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn btn-primary\"\n                loading={this.state.isLoading}\n              >\n                {gettext(\"Move post\")}\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport function ModalHeader(props) {\n  return (\n    <div className=\"modal-header\">\n      <button\n        aria-label={gettext(\"Close\")}\n        className=\"close\"\n        data-dismiss=\"modal\"\n        type=\"button\"\n      >\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n      <h4 className=\"modal-title\">{gettext(\"Move post\")}</h4>\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport default function(props) {\n  return (\n    <div className=\"modal-body post-changelog-diff\">\n      <ul className=\"list-unstyled\">\n        {props.diff.map((item, i) => {\n          return <DiffItem item={item} key={i} />\n        })}\n      </ul>\n    </div>\n  )\n}\n\nexport function DiffItem(props) {\n  if (props.item[0] === \"?\") return null\n\n  return (\n    <li className={getItemClassName(props.item)}>{cleanItem(props.item)}</li>\n  )\n}\n\nexport function getItemClassName(item) {\n  let className = \"diff-item\"\n  if (item[0] === \"-\") {\n    className += \" diff-item-sub\"\n  } else if (item[0] === \"+\") {\n    className += \" diff-item-add\"\n  }\n  return className\n}\n\nexport function cleanItem(item) {\n  return item.substr(2)\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\n\nexport default class extends React.Component {\n  onClick = () => {\n    this.props.revertEdit(this.props.edit.id)\n  }\n\n  render() {\n    if (!this.props.canRevert) return null\n\n    return (\n      <div className=\"modal-footer visible-xs-block\">\n        <Button\n          className=\"btn-default btn-sm btn-block\"\n          disabled={this.props.disabled}\n          onClick={this.onClick}\n          title={gettext(\"Revert post to state from before this edit.\")}\n        >\n          {gettext(\"Revert\")}\n        </Button>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport escapeHtml from \"misago/utils/escape-html\"\n\nconst DATE_ABBR = '<abbr title=\"%(absolute)s\">%(relative)s</abbr>'\nconst USER_SPAN = '<span class=\"item-title\">%(user)s</span>'\nconst USER_URL = '<a href=\"%(url)s\" class=\"item-title\">%(user)s</a>'\n\nexport default class extends React.Component {\n  goLast = () => {\n    this.props.goToEdit()\n  }\n\n  goForward = () => {\n    this.props.goToEdit(this.props.edit.next)\n  }\n\n  goBack = () => {\n    this.props.goToEdit(this.props.edit.previous)\n  }\n\n  revertEdit = () => {\n    this.props.revertEdit(this.props.edit.id)\n  }\n\n  render() {\n    return (\n      <div className=\"modal-toolbar post-changelog-toolbar\">\n        <div className=\"row\">\n          <div className=\"col-xs-12 col-sm-4\">\n            <div className=\"row\">\n              <div className=\"col-xs-4\">\n                <GoBackBtn\n                  disabled={this.props.disabled}\n                  edit={this.props.edit}\n                  onClick={this.goBack}\n                />\n              </div>\n              <div className=\"col-xs-4\">\n                <GoForwardBtn\n                  disabled={this.props.disabled}\n                  edit={this.props.edit}\n                  onClick={this.goForward}\n                />\n              </div>\n              <div className=\"col-xs-4\">\n                <GoLastBtn\n                  disabled={this.props.disabled}\n                  edit={this.props.edit}\n                  onClick={this.goLast}\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"col-xs-12 col-sm-5 xs-margin-top-half post-change-label\">\n            <Label edit={this.props.edit} />\n          </div>\n          <RevertBtn\n            canRevert={this.props.canRevert}\n            disabled={this.props.disabled}\n            onClick={this.revertEdit}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport function GoBackBtn(props) {\n  return (\n    <Button\n      className=\"btn-default btn-block btn-icon btn-sm\"\n      disabled={props.disabled || !props.edit.previous}\n      onClick={props.onClick}\n      title={gettext(\"See previous change\")}\n    >\n      <span className=\"material-icon\">chevron_left</span>\n    </Button>\n  )\n}\n\nexport function GoForwardBtn(props) {\n  return (\n    <Button\n      className=\"btn-default btn-block btn-icon btn-sm\"\n      disabled={props.disabled || !props.edit.next}\n      onClick={props.onClick}\n      title={gettext(\"See next change\")}\n    >\n      <span className=\"material-icon\">chevron_right</span>\n    </Button>\n  )\n}\n\nexport function GoLastBtn(props) {\n  return (\n    <Button\n      className=\"btn-default btn-block btn-icon btn-sm\"\n      disabled={props.disabled || !props.edit.next}\n      onClick={props.onClick}\n      title={gettext(\"See previous change\")}\n    >\n      <span className=\"material-icon\">last_page</span>\n    </Button>\n  )\n}\n\nexport function RevertBtn(props) {\n  if (!props.canRevert) return null\n\n  return (\n    <div className=\"col-sm-3 hidden-xs\">\n      <Button\n        className=\"btn-default btn-sm btn-block\"\n        disabled={props.disabled}\n        onClick={props.onClick}\n        title={gettext(\"Revert post to state from before this edit.\")}\n      >\n        {gettext(\"Revert\")}\n      </Button>\n    </div>\n  )\n}\n\nexport function Label(props) {\n  let user = null\n  if (props.edit.url.editor) {\n    user = interpolate(\n      USER_URL,\n      {\n        url: escapeHtml(props.edit.url.editor),\n        user: escapeHtml(props.edit.editor_name)\n      },\n      true\n    )\n  } else {\n    user = interpolate(\n      USER_SPAN,\n      {\n        user: escapeHtml(props.edit.editor_name)\n      },\n      true\n    )\n  }\n\n  const date = interpolate(\n    DATE_ABBR,\n    {\n      absolute: escapeHtml(props.edit.edited_on.format(\"LLL\")),\n      relative: escapeHtml(props.edit.edited_on.fromNow())\n    },\n    true\n  )\n\n  const message = interpolate(\n    escapeHtml(gettext(\"By %(edited_by)s %(edited_on)s.\")),\n    {\n      edited_by: user,\n      edited_on: date\n    },\n    true\n  )\n\n  return <p dangerouslySetInnerHTML={{ __html: message }} />\n}\n","import moment from \"moment\"\n\nexport function hydrateEdit(json) {\n  return Object.assign({}, json, {\n    edited_on: moment(json.edited_on)\n  })\n}\n","import React from \"react\"\nimport Diff from \"./diff\"\nimport Footer from \"./footer\"\nimport Toolbar from \"./toolbar\"\nimport { hydrateEdit } from \"./utils\"\nimport Message from \"misago/components/modal-message\"\nimport Loader from \"misago/components/modal-loader\"\nimport * as post from \"misago/reducers/post\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isReady: false,\n      isBusy: true,\n\n      canRevert: props.post.acl.can_edit,\n\n      error: null,\n      edit: null\n    }\n  }\n\n  componentDidMount() {\n    this.goToEdit()\n  }\n\n  goToEdit = (edit = null) => {\n    this.setState({\n      isBusy: true\n    })\n\n    let url = this.props.post.api.edits\n    if (edit !== null) {\n      url += \"?edit=\" + edit\n    }\n\n    ajax.get(url).then(\n      data => {\n        this.setState({\n          isReady: true,\n          isBusy: false,\n          edit: hydrateEdit(data)\n        })\n      },\n      rejection => {\n        this.setState({\n          isReady: true,\n          isBusy: false,\n          error: rejection.detail\n        })\n      }\n    )\n  }\n\n  revertEdit = edit => {\n    if (this.state.isBusy) return\n\n    const confirmation = window.confirm(\n      gettext(\n        \"Are you sure you with to revert this post to the state from before this edit?\"\n      )\n    )\n    if (!confirmation) return\n\n    this.setState({\n      isBusy: true\n    })\n\n    const url = this.props.post.api.edits + \"?edit=\" + edit\n    ajax.post(url).then(\n      data => {\n        const hydratedPost = post.hydrate(data)\n        store.dispatch(post.patch(data, hydratedPost))\n\n        snackbar.success(gettext(\"Post has been reverted to previous state.\"))\n        modal.hide()\n      },\n      rejection => {\n        snackbar.apiError(rejection)\n\n        this.setState({\n          isBusy: false\n        })\n      }\n    )\n  }\n\n  render() {\n    if (this.state.error) {\n      return (\n        <ModalDialog className=\"modal-dialog modal-message\">\n          <Message message={this.state.error} />\n        </ModalDialog>\n      )\n    } else if (this.state.isReady) {\n      return (\n        <ModalDialog>\n          <Toolbar\n            canRevert={this.state.canRevert}\n            disabled={this.state.isBusy}\n            edit={this.state.edit}\n            goToEdit={this.goToEdit}\n            revertEdit={this.revertEdit}\n          />\n          <Diff diff={this.state.edit.diff} />\n          <Footer\n            canRevert={this.state.canRevert}\n            disabled={this.state.isBusy}\n            edit={this.state.edit}\n            revertEdit={this.revertEdit}\n          />\n        </ModalDialog>\n      )\n    }\n\n    return (\n      <ModalDialog>\n        <Loader />\n      </ModalDialog>\n    )\n  }\n}\n\nexport function ModalDialog(props) {\n  return (\n    <div className={props.className || \"modal-dialog\"} role=\"document\">\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <button\n            aria-label={gettext(\"Close\")}\n            className=\"close\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n          <h4 className=\"modal-title\">{gettext(\"Post edits history\")}</h4>\n        </div>\n        {props.children}\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport CategorySelect from \"misago/components/category-select\"\nimport ModalLoader from \"misago/components/modal-loader\"\nimport Select from \"misago/components/select\"\nimport * as post from \"misago/reducers/post\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport * as validators from \"misago/utils/validators\"\n\nexport default function(props) {\n  return <PostingConfig {...props} Form={ModerationForm} />\n}\n\nexport class PostingConfig extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoaded: false,\n      isError: false,\n\n      categories: []\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(misago.get(\"THREAD_EDITOR_API\")).then(\n      data => {\n        // hydrate categories, extract posting options\n        const categories = data.map(item => {\n          return Object.assign(item, {\n            disabled: item.post === false,\n            label: item.name,\n            value: item.id,\n            post: item.post\n          })\n        })\n\n        this.setState({\n          isLoaded: true,\n          categories\n        })\n      },\n      rejection => {\n        this.setState({\n          isError: rejection.detail\n        })\n      }\n    )\n  }\n\n  render() {\n    if (this.state.isError) {\n      return <Error message={this.state.isError} />\n    } else if (this.state.isLoaded) {\n      return (\n        <ModerationForm {...this.props} categories={this.state.categories} />\n      )\n    } else {\n      return <Loader />\n    }\n  }\n}\n\nexport class ModerationForm extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      title: \"\",\n      category: null,\n      categories: props.categories,\n      weight: 0,\n      is_hidden: 0,\n      is_closed: false,\n\n      validators: {\n        title: [validators.required()]\n      },\n\n      errors: {}\n    }\n\n    this.isHiddenChoices = [\n      {\n        value: 0,\n        icon: \"visibility\",\n        label: gettext(\"No\")\n      },\n      {\n        value: 1,\n        icon: \"visibility_off\",\n        label: gettext(\"Yes\")\n      }\n    ]\n\n    this.isClosedChoices = [\n      {\n        value: false,\n        icon: \"lock_outline\",\n        label: gettext(\"No\")\n      },\n      {\n        value: true,\n        icon: \"lock\",\n        label: gettext(\"Yes\")\n      }\n    ]\n\n    this.acl = {}\n    this.props.categories.forEach(category => {\n      if (category.post) {\n        if (!this.state.category) {\n          this.state.category = category.id\n        }\n\n        this.acl[category.id] = {\n          can_pin_threads: category.post.pin,\n          can_close_threads: category.post.close,\n          can_hide_threads: category.post.hide\n        }\n      }\n    })\n  }\n\n  clean() {\n    if (this.isValid()) {\n      return true\n    } else {\n      snackbar.error(gettext(\"Form contains errors.\"))\n      this.setState({\n        errors: this.validate()\n      })\n      return false\n    }\n  }\n\n  send() {\n    return ajax.post(this.props.thread.api.posts.split, {\n      title: this.state.title,\n      category: this.state.category,\n      weight: this.state.weight,\n      is_hidden: this.state.is_hidden,\n      is_closed: this.state.is_closed,\n      posts: [this.props.post.id]\n    })\n  }\n\n  handleSuccess(apiResponse) {\n    store.dispatch(\n      post.patch(this.props.post, {\n        isDeleted: true\n      })\n    )\n\n    modal.hide()\n\n    snackbar.success(gettext(\"Selected post was split into new thread.\"))\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      this.setState({\n        errors: Object.assign({}, this.state.errors, rejection)\n      })\n      snackbar.error(gettext(\"Form contains errors.\"))\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  onCategoryChange = ev => {\n    const categoryId = ev.target.value\n    const newState = {\n      category: categoryId\n    }\n\n    if (this.acl[categoryId].can_pin_threads < newState.weight) {\n      newState.weight = 0\n    }\n\n    if (!this.acl[categoryId].can_hide_threads) {\n      newState.is_hidden = 0\n    }\n\n    if (!this.acl[categoryId].can_close_threads) {\n      newState.is_closed = false\n    }\n\n    this.setState(newState)\n  }\n\n  getWeightChoices() {\n    const choices = [\n      {\n        value: 0,\n        icon: \"remove\",\n        label: gettext(\"Not pinned\")\n      },\n      {\n        value: 1,\n        icon: \"bookmark_border\",\n        label: gettext(\"Pinned locally\")\n      }\n    ]\n\n    if (this.acl[this.state.category].can_pin_threads == 2) {\n      choices.push({\n        value: 2,\n        icon: \"bookmark\",\n        label: gettext(\"Pinned globally\")\n      })\n    }\n\n    return choices\n  }\n\n  renderWeightField() {\n    if (this.acl[this.state.category].can_pin_threads) {\n      return (\n        <FormGroup\n          label={gettext(\"Thread weight\")}\n          for=\"id_weight\"\n          labelClass=\"col-sm-4\"\n          controlClass=\"col-sm-8\"\n        >\n          <Select\n            id=\"id_weight\"\n            onChange={this.bindInput(\"weight\")}\n            value={this.state.weight}\n            choices={this.getWeightChoices()}\n          />\n        </FormGroup>\n      )\n    } else {\n      return null\n    }\n  }\n\n  renderHiddenField() {\n    if (this.acl[this.state.category].can_hide_threads) {\n      return (\n        <FormGroup\n          label={gettext(\"Hide thread\")}\n          for=\"id_is_hidden\"\n          labelClass=\"col-sm-4\"\n          controlClass=\"col-sm-8\"\n        >\n          <Select\n            id=\"id_is_closed\"\n            onChange={this.bindInput(\"is_hidden\")}\n            value={this.state.is_hidden}\n            choices={this.isHiddenChoices}\n          />\n        </FormGroup>\n      )\n    } else {\n      return null\n    }\n  }\n\n  renderClosedField() {\n    if (this.acl[this.state.category].can_close_threads) {\n      return (\n        <FormGroup\n          label={gettext(\"Close thread\")}\n          for=\"id_is_closed\"\n          labelClass=\"col-sm-4\"\n          controlClass=\"col-sm-8\"\n        >\n          <Select\n            id=\"id_is_closed\"\n            onChange={this.bindInput(\"is_closed\")}\n            value={this.state.is_closed}\n            choices={this.isClosedChoices}\n          />\n        </FormGroup>\n      )\n    } else {\n      return null\n    }\n  }\n\n  render() {\n    return (\n      <Modal className=\"modal-dialog\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"modal-body\">\n            <FormGroup\n              label={gettext(\"Thread title\")}\n              for=\"id_title\"\n              labelClass=\"col-sm-4\"\n              controlClass=\"col-sm-8\"\n              validation={this.state.errors.title}\n            >\n              <input\n                id=\"id_title\"\n                className=\"form-control\"\n                type=\"text\"\n                onChange={this.bindInput(\"title\")}\n                value={this.state.title}\n              />\n            </FormGroup>\n            <div className=\"clearfix\" />\n\n            <FormGroup\n              label={gettext(\"Category\")}\n              for=\"id_category\"\n              labelClass=\"col-sm-4\"\n              controlClass=\"col-sm-8\"\n              validation={this.state.errors.category}\n            >\n              <CategorySelect\n                id=\"id_category\"\n                onChange={this.onCategoryChange}\n                value={this.state.category}\n                choices={this.state.categories}\n              />\n            </FormGroup>\n            <div className=\"clearfix\" />\n\n            {this.renderWeightField()}\n            {this.renderHiddenField()}\n            {this.renderClosedField()}\n          </div>\n          <div className=\"modal-footer\">\n            <Button className=\"btn-primary\" loading={this.state.isLoading}>\n              {gettext(\"Split post\")}\n            </Button>\n          </div>\n        </form>\n      </Modal>\n    )\n  }\n}\n\nexport function Loader() {\n  return (\n    <Modal className=\"modal-dialog\">\n      <ModalLoader />\n    </Modal>\n  )\n}\n\nexport function Error(props) {\n  return (\n    <Modal className=\"modal-dialog modal-message\">\n      <div className=\"message-icon\">\n        <span className=\"material-icon\">info_outline</span>\n      </div>\n      <div className=\"message-body\">\n        <p className=\"lead\">\n          {gettext(\"You can't move this post at the moment.\")}\n        </p>\n        <p>{props.message}</p>\n      </div>\n    </Modal>\n  )\n}\n\nexport function Modal(props) {\n  return (\n    <div className={props.className} role=\"document\">\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <button\n            aria-label={gettext(\"Close\")}\n            className=\"close\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n          <h4 className=\"modal-title\">\n            {gettext(\"Split post into new thread\")}\n          </h4>\n        </div>\n        {props.children}\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport modal from \"misago/services/modal\"\nimport posting from \"misago/services/posting\"\nimport * as moderation from \"./actions\"\nimport MoveModal from \"./move\"\nimport PostChangelog from \"misago/components/post-changelog\"\nimport SplitModal from \"./split\"\n\nexport default function(props) {\n  return (\n    <ul className=\"dropdown-menu dropdown-menu-right stick-to-bottom\">\n      <Permalink {...props} />\n      <Edit {...props} />\n      <MarkAsBestAnswer {...props} />\n      <UnmarkMarkBestAnswer {...props} />\n      <PostEdits {...props} />\n      <Approve {...props} />\n      <Move {...props} />\n      <Split {...props} />\n      <Protect {...props} />\n      <Unprotect {...props} />\n      <Hide {...props} />\n      <Unhide {...props} />\n      <Delete {...props} />\n    </ul>\n  )\n}\n\nexport class Permalink extends React.Component {\n  onClick = () => {\n    let permaUrl = window.location.protocol + \"//\"\n    permaUrl += window.location.host\n    permaUrl += this.props.post.url.index\n\n    prompt(gettext(\"Permament link to this post:\"), permaUrl)\n  }\n\n  render() {\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">link</span>\n          {gettext(\"Permament link\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Edit extends React.Component {\n  onClick = () => {\n    posting.open({\n      mode: \"EDIT\",\n\n      config: this.props.post.api.editor,\n      submit: this.props.post.api.index\n    })\n  }\n\n  render() {\n    if (!this.props.post.acl.can_edit) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">edit</span>\n          {gettext(\"Edit\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class MarkAsBestAnswer extends React.Component {\n  onClick = () => {\n    moderation.markAsBestAnswer(this.props)\n  }\n\n  render() {\n    const { post, thread } = this.props\n\n    if (!thread.acl.can_mark_best_answer) return null\n    if (!post.acl.can_mark_as_best_answer) return null\n    if (post.id === thread.best_answer) return null\n    if (thread.best_answer && !thread.acl.can_change_best_answer) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">check_box</span>\n          {gettext(\"Mark as best answer\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class UnmarkMarkBestAnswer extends React.Component {\n  onClick = () => {\n    moderation.unmarkBestAnswer(this.props)\n  }\n\n  render() {\n    const { post, thread } = this.props\n\n    if (post.id !== thread.best_answer) return null\n    if (!thread.acl.can_unmark_best_answer) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">check_box_outline_blank</span>\n          {gettext(\"Unmark best answer\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class PostEdits extends React.Component {\n  onClick = () => {\n    modal.show(<PostChangelog post={this.props.post} />)\n  }\n\n  render() {\n    const isHidden =\n      this.props.post.is_hidden && !this.props.post.acl.can_see_hidden\n    const isUnedited = this.props.post.edits === 0\n    if (isHidden || isUnedited) return null\n\n    const message = ngettext(\n      \"This post was edited %(edits)s time.\",\n      \"This post was edited %(edits)s times.\",\n      this.props.post.edits\n    )\n\n    const title = interpolate(\n      message,\n      {\n        edits: this.props.post.edits\n      },\n      true\n    )\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">edit</span>\n          {gettext(\"Changes history\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Approve extends React.Component {\n  onClick = () => {\n    moderation.approve(this.props)\n  }\n\n  render() {\n    if (!this.props.post.acl.can_approve) return null\n    if (!this.props.post.is_unapproved) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">done</span>\n          {gettext(\"Approve\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Move extends React.Component {\n  onClick = () => {\n    modal.show(<MoveModal {...this.props} />)\n  }\n\n  render() {\n    if (!this.props.post.acl.can_move) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">arrow_forward</span>\n          {gettext(\"Move\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Split extends React.Component {\n  onClick = () => {\n    modal.show(<SplitModal {...this.props} />)\n  }\n\n  render() {\n    if (!this.props.post.acl.can_move) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">call_split</span>\n          {gettext(\"Split\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Protect extends React.Component {\n  onClick = () => {\n    moderation.protect(this.props)\n  }\n\n  render() {\n    if (!this.props.post.acl.can_protect) return null\n    if (this.props.post.is_protected) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">lock_outline</span>\n          {gettext(\"Protect\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Unprotect extends React.Component {\n  onClick = () => {\n    moderation.unprotect(this.props)\n  }\n\n  render() {\n    if (!this.props.post.acl.can_protect) return null\n    if (!this.props.post.is_protected) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">lock_open</span>\n          {gettext(\"Remove protection\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Hide extends React.Component {\n  onClick = () => {\n    moderation.hide(this.props)\n  }\n\n  render() {\n    const { post, thread } = this.props\n\n    if (post.id === thread.best_answer) return null\n    if (!post.acl.can_hide) return null\n    if (post.is_hidden) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">visibility_off</span>\n          {gettext(\"Hide\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Unhide extends React.Component {\n  onClick = () => {\n    moderation.unhide(this.props)\n  }\n\n  render() {\n    if (!this.props.post.acl.can_unhide) return null\n    if (!this.props.post.is_hidden) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">visibility</span>\n          {gettext(\"Unhide\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Delete extends React.Component {\n  onClick = () => {\n    moderation.remove(this.props)\n  }\n\n  render() {\n    const { post, thread } = this.props\n\n    if (post.id === thread.best_answer) return null\n    if (!post.acl.can_delete) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          <span className=\"material-icon\">clear</span>\n          {gettext(\"Delete\")}\n        </button>\n      </li>\n    )\n  }\n}\n","import React from \"react\"\nimport Dropdown from \"./dropdown\"\n\nexport default function(props) {\n  return (\n    <div className=\"pull-right dropdown\">\n      <button\n        aria-expanded=\"true\"\n        aria-haspopup=\"true\"\n        className=\"btn btn-default btn-icon dropdown-toggle\"\n        data-toggle=\"dropdown\"\n        type=\"button\"\n      >\n        <span className=\"material-icon\">expand_more</span>\n      </button>\n      <Dropdown {...props} />\n    </div>\n  )\n}\n","import React from \"react\"\nimport * as posts from \"misago/reducers/posts\"\nimport store from \"misago/services/store\"\n\nexport default class extends React.Component {\n  onClick = () => {\n    if (this.props.post.isSelected) {\n      store.dispatch(posts.deselect(this.props.post))\n    } else {\n      store.dispatch(posts.select(this.props.post))\n    }\n  }\n\n  render() {\n    if (\n      !(this.props.thread.acl.can_merge_posts || isVisible(this.props.post.acl))\n    ) {\n      return null\n    }\n\n    return (\n      <div className=\"pull-right hidden-xs\">\n        <button\n          className=\"btn btn-default btn-icon\"\n          onClick={this.onClick}\n          type=\"button\"\n        >\n          <span className=\"material-icon\">\n            {this.props.post.isSelected\n              ? \"check_box\"\n              : \"check_box_outline_blank\"}\n          </span>\n        </button>\n      </div>\n    )\n  }\n}\n\nexport function isVisible(acl) {\n  return (\n    acl.can_approve ||\n    acl.can_hide ||\n    acl.can_protect ||\n    acl.can_unhide ||\n    acl.can_delete ||\n    acl.can_move\n  )\n}\n","import React from \"react\"\nimport Controls from \"./controls\"\nimport Select from \"./select\"\nimport {\n  StatusIcon,\n  getStatusClassName,\n  getStatusDescription\n} from \"misago/components/user-status\"\nimport PostChangelog from \"misago/components/post-changelog\"\nimport modal from \"misago/services/modal\"\n\nexport default function(props) {\n  return (\n    <div className=\"post-heading\">\n      <UnreadLabel {...props} />\n      <UnreadCompact {...props} />\n      <PostedOn {...props} />\n      <PostedOnCompact {...props} />\n      <PostEdits {...props} />\n      <PostEditsCompacts {...props} />\n      <ProtectedLabel {...props} />\n      <Select {...props} />\n      <Controls {...props} />\n    </div>\n  )\n}\n\nexport function UnreadLabel(props) {\n  if (props.post.is_read) return null\n\n  return (\n    <span className=\"label label-unread hidden-xs\">{gettext(\"New post\")}</span>\n  )\n}\n\nexport function UnreadCompact(props) {\n  if (props.post.is_read) return null\n\n  return (\n    <span className=\"label label-unread visible-xs-inline-block\">\n      {gettext(\"New\")}\n    </span>\n  )\n}\n\nexport function PostedOn(props) {\n  const tooltip = interpolate(\n    gettext(\"posted %(posted_on)s\"),\n    {\n      posted_on: props.post.posted_on.format(\"LL, LT\")\n    },\n    true\n  )\n\n  return (\n    <a\n      href={props.post.url.index}\n      className=\"btn btn-link posted-on hidden-xs\"\n      title={tooltip}\n    >\n      {props.post.posted_on.fromNow()}\n    </a>\n  )\n}\n\nexport function PostedOnCompact(props) {\n  return (\n    <a\n      href={props.post.url.index}\n      className=\"btn btn-link posted-on visible-xs-inline-block\"\n    >\n      {props.post.posted_on.fromNow(true)}\n    </a>\n  )\n}\n\nexport class PostEdits extends React.Component {\n  onClick = () => {\n    modal.show(<PostChangelog post={this.props.post} />)\n  }\n\n  render() {\n    const isHidden =\n      this.props.post.is_hidden && !this.props.post.acl.can_see_hidden\n    const isUnedited = this.props.post.edits === 0\n    if (isHidden || isUnedited) return null\n\n    const tooltip = ngettext(\n      \"This post was edited %(edits)s time.\",\n      \"This post was edited %(edits)s times.\",\n      this.props.post.edits\n    )\n\n    const title = interpolate(\n      tooltip,\n      {\n        edits: this.props.post.edits\n      },\n      true\n    )\n\n    const label = ngettext(\n      \"edited %(edits)s time\",\n      \"edited %(edits)s times\",\n      this.props.post.edits\n    )\n\n    return (\n      <button\n        className=\"btn btn-link btn-see-edits hidden-xs\"\n        onClick={this.onClick}\n        title={title}\n        type=\"button\"\n      >\n        {interpolate(\n          label,\n          {\n            edits: this.props.post.edits\n          },\n          true\n        )}\n      </button>\n    )\n  }\n}\n\nexport class PostEditsCompacts extends PostEdits {\n  render() {\n    const isHidden =\n      this.props.post.is_hidden && !this.props.post.acl.can_see_hidden\n    const isUnedited = this.props.post.edits === 0\n    if (isHidden || isUnedited) return null\n\n    const label = ngettext(\n      \"%(edits)s edit\",\n      \"%(edits)s edits\",\n      this.props.post.edits\n    )\n\n    return (\n      <button\n        className=\"btn btn-link btn-see-edits visible-xs-inline-block\"\n        onClick={this.onClick}\n        type=\"button\"\n      >\n        {interpolate(\n          label,\n          {\n            edits: this.props.post.edits\n          },\n          true\n        )}\n      </button>\n    )\n  }\n}\n\nexport function ProtectedLabel(props) {\n  const postAuthor = props.post.poster && props.post.poster.id === props.user.id\n  const hasAcl = props.post.acl.can_protect\n  const isVisible =\n    props.user.id && props.post.is_protected && (postAuthor || hasAcl)\n\n  if (!isVisible) {\n    return null\n  }\n\n  return (\n    <span\n      className=\"label label-protected hidden-xs\"\n      title={gettext(\"This post is protected and may not be edited.\")}\n    >\n      <span className=\"material-icon\">lock_outline</span>\n      {gettext(\"protected\")}\n    </span>\n  )\n}\n","export default function({ title, rank }) {\n  return rank.is_tab || !!title || !!rank.title\n}\n","import React from \"react\"\nimport hasVisibleTitle from \"./has-visible-title\"\n\nexport default function({ poster }) {\n  const message = ngettext(\"%(posts)s post\", \"%(posts)s posts\", poster.posts)\n\n  let className = \"user-postcount\"\n  if (hasVisibleTitle(poster)) {\n    className += \" hidden-xs hidden-sm\"\n  }\n\n  return (\n    <span className={className}>\n      {interpolate(\n        message,\n        {\n          posts: poster.posts\n        },\n        true\n      )}\n    </span>\n  )\n}\n","import React from \"react\"\n\nexport default function({ rank, title }) {\n  let userTitle = title || rank.title\n  if (!userTitle && rank.is_tab) {\n    userTitle = rank.name\n  }\n\n  if (!userTitle) return null\n\n  let className = \"user-title\"\n  if (rank.css_class) {\n    className += \" user-title-\" + rank.css_class\n  }\n\n  if (rank.is_tab) {\n    return (\n      <div className={className}>\n        <a href={rank.url}>{userTitle}</a>\n      </div>\n    )\n  }\n\n  return <div className={className}>{userTitle}</div>\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport Controls from \"misago/components/posts-list/post/controls\"\nimport Select from \"misago/components/posts-list/post/select\"\nimport UserStatus, {\n  StatusIcon,\n  StatusLabel\n} from \"misago/components/user-status\"\nimport UserPostcount from \"./user-postcount\"\nimport UserTitle from \"./user-title\"\n\nexport default function({ post, thread }) {\n  return (\n    <div className=\"col-xs-12 col-md-3 post-side post-side-anonymous\">\n      <Select post={post} thread={thread} />\n      <Controls post={post} thread={thread} />\n      <div className=\"media\">\n        <div className=\"media-left\">\n          <span>\n            <Avatar className=\"poster-avatar\" size={100} />\n          </span>\n        </div>\n        <div className=\"media-body\">\n          <span className=\"media-heading item-title\">{post.poster_name}</span>\n\n          <span className=\"user-title user-title-anonymous\">\n            {gettext(\"Removed user\")}\n          </span>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport UserStatus, { StatusLabel } from \"misago/components/user-status\"\nimport hasVisibleTitle from \"./has-visible-title\"\n\nexport default function({ poster }) {\n  let className = \"hidden-xs\"\n  if (hasVisibleTitle(poster)) {\n    className += \" hidden-sm\"\n  }\n\n  return (\n    <span className={className}>\n      <UserStatus status={poster.status}>\n        <StatusLabel status={poster.status} user={poster} />\n      </UserStatus>\n    </span>\n  )\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport Controls from \"misago/components/posts-list/post/controls\"\nimport Select from \"misago/components/posts-list/post/select\"\nimport UserStatus, { StatusIcon } from \"misago/components/user-status\"\nimport UserPostcount from \"./user-postcount\"\nimport UserStatusLabel from \"./user-status\"\nimport UserTitle from \"./user-title\"\n\nexport default function({ post, thread }) {\n  const { poster } = post\n\n  return (\n    <div className=\"col-xs-12 col-md-3 post-side post-side-registered\">\n      <Select post={post} thread={thread} />\n      <Controls post={post} thread={thread} />\n      <div className=\"media\">\n        <div className=\"media-left\">\n          <a href={poster.url}>\n            <Avatar className=\"poster-avatar\" size={100} user={poster} />\n          </a>\n        </div>\n        <div className=\"media-body\">\n          <div className=\"media-heading\">\n            <a className=\"item-title\" href={poster.url}>\n              {poster.username}\n            </a>\n            <UserStatus status={poster.status}>\n              <StatusIcon status={poster.status} />\n            </UserStatus>\n          </div>\n\n          <UserTitle rank={poster.rank} title={poster.title} />\n\n          <UserStatusLabel poster={poster} />\n          <UserPostcount poster={poster} />\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Anonymous from \"./anonymous\"\nimport Registered from \"./registered\"\n\nexport default function(props) {\n  if (props.post.poster) {\n    return <Registered {...props} />\n  }\n\n  return <Anonymous {...props} />\n}\n","import React from \"react\"\nimport Attachments from \"./attachments\"\nimport Body from \"./body\"\nimport {\n  FlagBestAnswer,\n  FlagHidden,\n  FlagUnapproved,\n  FlagProtected\n} from \"./flags\"\nimport Footer from \"./footer\"\nimport Header from \"./header\"\nimport PostSide from \"./post-side\"\n\nexport default function(props) {\n  let className = \"post\"\n  if (props.post.isDeleted) {\n    className = \"hide\"\n  } else if (props.post.is_hidden && !props.post.acl.can_see_hidden) {\n    className = \"post post-hidden\"\n  }\n\n  if (props.post.poster && props.post.poster.rank.css_class) {\n    className += \" post-\" + props.post.poster.rank.css_class\n  }\n\n  if (!props.post.is_read) {\n    className += \" post-new\"\n  }\n\n  return (\n    <li id={\"post-\" + props.post.id} className={className}>\n      <div className=\"panel panel-default panel-post\">\n        <div className=\"panel-body\">\n          <div className=\"row\">\n            <PostSide {...props} />\n            <div className=\"col-xs-12 col-md-9\">\n              <Header {...props} />\n              <FlagBestAnswer {...props} />\n              <FlagUnapproved {...props} />\n              <FlagProtected {...props} />\n              <FlagHidden {...props} />\n              <Body {...props} />\n              <Attachments {...props} />\n              <Footer {...props} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </li>\n  )\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport * as random from \"misago/utils/random\"\n\nexport default function(props) {\n  return (\n    <li className=\"post\">\n      <div className=\"post-border\">\n        <div className=\"post-avatar\">\n          <Avatar size=\"100\" />\n        </div>\n        <div className=\"post-body\">\n          <div className=\"panel panel-default panel-post\">\n            <div className=\"panel-heading post-heading\">\n              <span\n                className=\"ui-preview-text\"\n                style={{ width: random.int(30, 100) + \"px\" }}\n              >\n                &nbsp;\n              </span>\n              <span\n                className=\"ui-preview-text\"\n                style={{ width: random.int(30, 100) + \"px\" }}\n              >\n                &nbsp;\n              </span>\n            </div>\n            <div className=\"panel-body\">\n              <article className=\"misago-markup\">\n                <p\n                  className=\"ui-preview-text\"\n                  style={{ width: random.int(50, 100) + \"%\" }}\n                >\n                  &nbsp;\n                </p>\n                <p\n                  className=\"ui-preview-text\"\n                  style={{ width: random.int(50, 100) + \"%\" }}\n                >\n                  &nbsp;\n                </p>\n                <p\n                  className=\"ui-preview-text\"\n                  style={{ width: random.int(50, 100) + \"%\" }}\n                >\n                  &nbsp;\n                </p>\n              </article>\n            </div>\n          </div>\n        </div>\n      </div>\n    </li>\n  )\n}\n","import React from \"react\"\nimport Event from \"./event\"\nimport Post from \"./post\"\nimport PostPreview from \"./post/preview\"\n\nexport default function(props) {\n  if (!props.posts.isLoaded) {\n    return (\n      <ul className=\"posts-list ui-preview\">\n        <PostPreview />\n      </ul>\n    )\n  }\n\n  return (\n    <ul className=\"posts-list ui-ready\">\n      {props.posts.results.map(post => {\n        return <ListItem key={post.id} post={post} {...props} />\n      })}\n    </ul>\n  )\n}\n\nexport function ListItem(props) {\n  if (props.post.is_event) {\n    return <Event {...props} />\n  }\n\n  return <Post {...props} />\n}\n","import React from \"react\"\n\nexport default function(props) {\n  return (\n    <div className=\"page-breadcrumbs\">\n      <div className=\"container\">\n        <ol className=\"breadcrumb hidden-xs\">\n          {props.path.map(item => {\n            return <Breadcrumb key={item.id} node={item} />\n          })}\n        </ol>\n        <GoBack {...props} />\n      </div>\n    </div>\n  )\n}\n\nexport function Breadcrumb(props) {\n  return (\n    <li>\n      <a href={props.node.url.index}>{props.node.name}</a>\n    </li>\n  )\n}\n\nexport function GoBack(props) {\n  const lastItem = props.path[props.path.length - 1]\n\n  return (\n    <a href={lastItem.url.index} className=\"go-back-sm visible-xs-block\">\n      <span className=\"material-icon\">chevron_left</span>\n      {lastItem.name}\n    </a>\n  )\n}\n","import React from \"react\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport MergeConflict from \"misago/components/merge-conflict\"\nimport * as thread from \"misago/reducers/thread\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      url: \"\",\n\n      validators: {\n        url: []\n      },\n      errors: {}\n    }\n  }\n\n  clean() {\n    if (!this.state.url.trim().length) {\n      snackbar.error(gettext(\"You have to enter link to the other thread.\"))\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    // freeze thread\n    store.dispatch(thread.busy())\n\n    return ajax.post(this.props.thread.api.merge, {\n      other_thread: this.state.url\n    })\n  }\n\n  handleSuccess = success => {\n    this.handleSuccessUnmounted(success)\n\n    // keep form loading\n    this.setState({\n      isLoading: true\n    })\n  }\n\n  handleSuccessUnmounted = success => {\n    snackbar.success(gettext(\"Thread has been merged with other one.\"))\n    window.location = success.url\n  }\n\n  handleError = rejection => {\n    store.dispatch(thread.release())\n\n    if (rejection.status === 400) {\n      if (rejection.best_answers || rejection.polls) {\n        modal.show(\n          <MergeConflict\n            api={this.props.thread.api.merge}\n            bestAnswers={rejection.best_answers}\n            data={{ other_thread: this.state.url }}\n            polls={rejection.polls}\n            onError={this.handleError}\n            onSuccess={this.handleSuccessUnmounted}\n          />\n        )\n      } else if (rejection.best_answer) {\n        snackbar.error(rejection.best_answer[0])\n      } else if (rejection.poll) {\n        snackbar.error(rejection.poll[0])\n      } else {\n        snackbar.error(rejection.detail)\n      }\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  onUrlChange = event => {\n    this.changeValue(\"url\", event.target.value)\n  }\n\n  render() {\n    return (\n      <div className=\"modal-dialog\" role=\"document\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"modal-content\">\n            <ModalHeader />\n            <div className=\"modal-body\">\n              <FormGroup\n                for=\"id_url\"\n                label={gettext(\"Link to thread you want to merge with\")}\n                help_text={gettext(\n                  \"Merge will delete current thread and move its contents to the thread specified here.\"\n                )}\n              >\n                <input\n                  className=\"form-control\"\n                  disabled={this.state.isLoading || this.props.thread.isBusy}\n                  id=\"id_url\"\n                  onChange={this.onUrlChange}\n                  value={this.state.url}\n                />\n              </FormGroup>\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn btn-default\"\n                data-dismiss=\"modal\"\n                disabled={this.state.isLoading}\n                type=\"button\"\n              >\n                {gettext(\"Cancel\")}\n              </button>\n              <button\n                className=\"btn btn-primary\"\n                loading={this.state.isLoading || this.props.thread.isBusy}\n              >\n                {gettext(\"Merge thread\")}\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport function ModalHeader(props) {\n  return (\n    <div className=\"modal-header\">\n      <button\n        aria-label={gettext(\"Close\")}\n        className=\"close\"\n        data-dismiss=\"modal\"\n        type=\"button\"\n      >\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n      <h4 className=\"modal-title\">{gettext(\"Merge thread\")}</h4>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport CategorySelect from \"misago/components/category-select\"\nimport ModalLoader from \"misago/components/modal-loader\"\nimport * as posts from \"misago/reducers/posts\"\nimport * as thread from \"misago/reducers/thread\"\nimport misago from \"misago\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isReady: false,\n      isLoading: false,\n      isError: false,\n\n      category: null,\n      categories: []\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(misago.get(\"THREAD_EDITOR_API\")).then(\n      data => {\n        let category = null\n\n        // hydrate categories, extract posting options\n        const categories = data.map(item => {\n          // pick first category that allows posting and if it may, override it with initial one\n          if (item.post !== false && !category) {\n            category = item.id\n          }\n\n          return Object.assign(item, {\n            disabled: item.post === false,\n            label: item.name,\n            value: item.id\n          })\n        })\n\n        this.setState({\n          isReady: true,\n\n          category,\n          categories\n        })\n      },\n      rejection => {\n        this.setState({\n          isError: rejection.detail\n        })\n      }\n    )\n  }\n\n  send() {\n    // freeze thread\n    store.dispatch(thread.busy())\n\n    return ajax.patch(this.props.thread.api.index, [\n      { op: \"replace\", path: \"category\", value: this.state.category }\n    ])\n  }\n\n  handleSuccess() {\n    // refresh thread and displayed posts\n    ajax\n      .get(this.props.thread.api.posts.index, { page: this.props.posts.page })\n      .then(\n        data => {\n          store.dispatch(thread.replace(data))\n          store.dispatch(posts.load(data.post_set))\n          store.dispatch(thread.release())\n\n          snackbar.success(gettext(\"Thread has been moved.\"))\n          modal.hide()\n        },\n        rejection => {\n          store.dispatch(thread.release())\n          snackbar.apiError(rejection)\n        }\n      )\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      snackbar.error(rejection.detail[0])\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  onCategoryChange = event => {\n    this.changeValue(\"category\", event.target.value)\n  }\n\n  render() {\n    if (this.state.isReady) {\n      return (\n        <div className=\"modal-dialog\" role=\"document\">\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"modal-content\">\n              <ModalHeader />\n              <div className=\"modal-body\">\n                <FormGroup for=\"id_category\" label={gettext(\"New category\")}>\n                  <CategorySelect\n                    choices={this.state.categories}\n                    disabled={this.state.isLoading || this.props.thread.isBusy}\n                    id=\"id_category\"\n                    onChange={this.onCategoryChange}\n                    value={this.state.category}\n                  />\n                </FormGroup>\n              </div>\n              <div className=\"modal-footer\">\n                <button\n                  className=\"btn btn-default\"\n                  data-dismiss=\"modal\"\n                  disabled={this.state.isLoading}\n                  type=\"button\"\n                >\n                  {gettext(\"Cancel\")}\n                </button>\n                <button\n                  className=\"btn btn-primary\"\n                  loading={this.state.isLoading || this.props.thread.isBusy}\n                >\n                  {gettext(\"Move thread\")}\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n      )\n    } else if (this.state.isError) {\n      return <ModalMessage message={this.state.isError} />\n    } else {\n      return <ModalLoading />\n    }\n  }\n}\n\nexport function ModalHeader(props) {\n  return (\n    <div className=\"modal-header\">\n      <button\n        aria-label={gettext(\"Close\")}\n        className=\"close\"\n        data-dismiss=\"modal\"\n        type=\"button\"\n      >\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n      <h4 className=\"modal-title\">{gettext(\"Move thread\")}</h4>\n    </div>\n  )\n}\n\nexport function ModalLoading(props) {\n  return (\n    <div className=\"modal-dialog\" role=\"document\">\n      <div className=\"modal-content\">\n        <ModalHeader />\n        <ModalLoader />\n      </div>\n    </div>\n  )\n}\n\nexport function ModalMessage(props) {\n  return (\n    <div className=\"modal-dialog modal-message\" role=\"document\">\n      <div className=\"modal-content\">\n        <ModalHeader />\n        <div className=\"message-icon\">\n          <span className=\"material-icon\">info_outline</span>\n        </div>\n        <div className=\"message-body\">\n          <p className=\"lead\">\n            {gettext(\"You can't move this thread at the moment.\")}\n          </p>\n          <p>{props.message}</p>\n          <button\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            {gettext(\"Ok\")}\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport MergeModal from \"./merge\"\nimport MoveModal from \"./move\"\nimport * as thread from \"misago/reducers/thread\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends React.Component {\n  callApi = (ops, successMessage) => {\n    store.dispatch(thread.busy())\n\n    // by the chance update thread acl too\n    ops.push({ op: \"add\", path: \"acl\", value: true })\n\n    ajax.patch(this.props.thread.api.index, ops).then(\n      data => {\n        store.dispatch(thread.update(data))\n        store.dispatch(thread.release())\n        snackbar.success(successMessage)\n      },\n      rejection => {\n        store.dispatch(thread.release())\n        if (rejection.status === 400) {\n          snackbar.error(rejection.detail[0])\n        } else {\n          snackbar.apiError(rejection)\n        }\n      }\n    )\n  }\n\n  pinGlobally = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"weight\",\n          value: 2\n        }\n      ],\n      gettext(\"Thread has been pinned globally.\")\n    )\n  }\n\n  pinLocally = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"weight\",\n          value: 1\n        }\n      ],\n      gettext(\"Thread has been pinned locally.\")\n    )\n  }\n\n  unpin = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"weight\",\n          value: 0\n        }\n      ],\n      gettext(\"Thread has been unpinned.\")\n    )\n  }\n\n  approve = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-unapproved\",\n          value: false\n        }\n      ],\n      gettext(\"Thread has been approved.\")\n    )\n  }\n\n  open = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-closed\",\n          value: false\n        }\n      ],\n      gettext(\"Thread has been opened.\")\n    )\n  }\n\n  close = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-closed\",\n          value: true\n        }\n      ],\n      gettext(\"Thread has been closed.\")\n    )\n  }\n\n  unhide = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-hidden\",\n          value: false\n        }\n      ],\n      gettext(\"Thread has been made visible.\")\n    )\n  }\n\n  hide = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-hidden\",\n          value: true\n        }\n      ],\n      gettext(\"Thread has been made hidden.\")\n    )\n  }\n\n  move = () => {\n    modal.show(\n      <MoveModal posts={this.props.posts} thread={this.props.thread} />\n    )\n  }\n\n  merge = () => {\n    modal.show(<MergeModal thread={this.props.thread} />)\n  }\n\n  delete = () => {\n    if (!window.confirm(gettext(\"Are you sure you want to delete this thread?\"))) {\n      return\n    }\n\n    store.dispatch(thread.busy())\n\n    ajax.delete(this.props.thread.api.index).then(\n      data => {\n        snackbar.success(gettext(\"Thread has been deleted.\"))\n        window.location = this.props.thread.category.url.index\n      },\n      rejection => {\n        store.dispatch(thread.release())\n        snackbar.apiError(rejection)\n      }\n    )\n  }\n\n  getPinGloballyButton() {\n    if (this.props.thread.weight === 2) return null\n    if (!this.props.thread.acl.can_pin_globally) return null\n\n    return (\n      <li>\n        <button\n          className=\"btn btn-link\"\n          onClick={this.pinGlobally}\n          type=\"button\"\n        >\n          <span className=\"material-icon\">bookmark</span>\n          {gettext(\"Pin globally\")}\n        </button>\n      </li>\n    )\n  }\n\n  getPinLocallyButton() {\n    if (this.props.thread.weight === 1) return null\n    if (!this.props.thread.acl.can_pin) return null\n\n    return (\n      <li>\n        <button\n          className=\"btn btn-link\"\n          onClick={this.pinLocally}\n          type=\"button\"\n        >\n          <span className=\"material-icon\">bookmark_border</span>\n          {gettext(\"Pin locally\")}\n        </button>\n      </li>\n    )\n  }\n\n  getUnpinButton() {\n    if (this.props.thread.weight === 0) return null\n    if (!this.props.thread.acl.can_pin) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.unpin} type=\"button\">\n          <span className=\"material-icon\">panorama_fish_eye</span>\n          {gettext(\"Unpin\")}\n        </button>\n      </li>\n    )\n  }\n\n  getMoveButton() {\n    if (!this.props.thread.acl.can_move) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.move} type=\"button\">\n          <span className=\"material-icon\">arrow_forward</span>\n          {gettext(\"Move\")}\n        </button>\n      </li>\n    )\n  }\n\n  getMergeButton() {\n    if (!this.props.thread.acl.can_merge) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.merge} type=\"button\">\n          <span className=\"material-icon\">call_merge</span>\n          {gettext(\"Merge\")}\n        </button>\n      </li>\n    )\n  }\n\n  getApproveButton() {\n    if (!this.props.thread.is_unapproved) return null\n    if (!this.props.thread.acl.can_approve) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.approve} type=\"button\">\n          <span className=\"material-icon\">done</span>\n          {gettext(\"Approve\")}\n        </button>\n      </li>\n    )\n  }\n\n  getOpenButton() {\n    if (!this.props.thread.is_closed) return null\n    if (!this.props.thread.acl.can_close) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.open} type=\"button\">\n          <span className=\"material-icon\">lock_open</span>\n          {gettext(\"Open\")}\n        </button>\n      </li>\n    )\n  }\n\n  getCloseButton() {\n    if (this.props.thread.is_closed) return null\n    if (!this.props.thread.acl.can_close) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.close} type=\"button\">\n          <span className=\"material-icon\">lock_outline</span>\n          {gettext(\"Close\")}\n        </button>\n      </li>\n    )\n  }\n\n  getUnhideButton() {\n    if (!this.props.thread.is_hidden) return null\n    if (!this.props.thread.acl.can_unhide) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.unhide} type=\"button\">\n          <span className=\"material-icon\">visibility</span>\n          {gettext(\"Unhide\")}\n        </button>\n      </li>\n    )\n  }\n\n  getHideButton() {\n    if (this.props.thread.is_hidden) return null\n    if (!this.props.thread.acl.can_hide) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.hide} type=\"button\">\n          <span className=\"material-icon\">visibility_off</span>\n          {gettext(\"Hide\")}\n        </button>\n      </li>\n    )\n  }\n\n  getDeleteButton() {\n    if (!this.props.thread.acl.can_delete) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.delete} type=\"button\">\n          <span className=\"material-icon\">clear</span>\n          {gettext(\"Delete\")}\n        </button>\n      </li>\n    )\n  }\n\n  render() {\n    return (\n      <ul className=\"dropdown-menu dropdown-menu-right stick-to-bottom\">\n        {this.getPinGloballyButton()}\n        {this.getPinLocallyButton()}\n        {this.getUnpinButton()}\n        {this.getMoveButton()}\n        {this.getMergeButton()}\n        {this.getApproveButton()}\n        {this.getOpenButton()}\n        {this.getCloseButton()}\n        {this.getUnhideButton()}\n        {this.getHideButton()}\n        {this.getDeleteButton()}\n      </ul>\n    )\n  }\n}\n","import React from \"react\"\nimport escapeHtml from \"misago/utils/escape-html\"\n\nconst LAST_POSTER_URL = '<a href=\"%(url)s\" class=\"poster-title\">%(user)s</a>'\nconst LAST_POSTER_SPAN = '<span class=\"poster-title\">%(user)s</span>'\nconst LAST_REPLY =\n  '<abbr class=\"last-title\" title=\"%(absolute)s\">%(relative)s</abbr>'\n\nexport function Weight(props) {\n  if (props.thread.weight == 2) {\n    return (\n      <li className=\"thread-pinned-globally\">\n        <span className=\"material-icon\">bookmark</span>\n        <span className=\"icon-legend\">{gettext(\"Pinned globally\")}</span>\n      </li>\n    )\n  } else if (props.thread.weight == 1) {\n    return (\n      <li className=\"thread-pinned-locally\">\n        <span className=\"material-icon\">bookmark_border</span>\n        <span className=\"icon-legend\">{gettext(\"Pinned locally\")}</span>\n      </li>\n    )\n  } else {\n    return null\n  }\n}\n\nexport function Unapproved(props) {\n  if (props.thread.is_unapproved) {\n    return (\n      <li className=\"thread-unapproved\">\n        <span className=\"material-icon\">remove_circle</span>\n        <span className=\"icon-legend\">{gettext(\"Unapproved\")}</span>\n      </li>\n    )\n  } else if (props.thread.has_unapproved_posts) {\n    return (\n      <li className=\"thread-unapproved-posts\">\n        <span className=\"material-icon\">remove_circle_outline</span>\n        <span className=\"icon-legend\">{gettext(\"Unapproved posts\")}</span>\n      </li>\n    )\n  } else {\n    return null\n  }\n}\n\nexport function IsHidden(props) {\n  if (props.thread.is_hidden) {\n    return (\n      <li className=\"thread-hidden\">\n        <span className=\"material-icon\">visibility_off</span>\n        <span className=\"icon-legend\">{gettext(\"Hidden\")}</span>\n      </li>\n    )\n  } else {\n    return null\n  }\n}\n\nexport function IsClosed(props) {\n  if (props.thread.is_closed) {\n    return (\n      <li className=\"thread-closed\">\n        <span className=\"material-icon\">lock_outline</span>\n        <span className=\"icon-legend\">{gettext(\"Closed\")}</span>\n      </li>\n    )\n  } else {\n    return null\n  }\n}\n\nexport function Replies(props) {\n  const message = ngettext(\n    \"%(replies)s reply\",\n    \"%(replies)s replies\",\n    props.thread.replies\n  )\n  const legend = interpolate(message, { replies: props.thread.replies }, true)\n\n  return (\n    <li className=\"thread-replies\">\n      <span className=\"material-icon\">forum</span>\n      <span className=\"icon-legend\">{legend}</span>\n    </li>\n  )\n}\n\nexport function LastReply(props) {\n  let user = null\n  if (props.thread.url.last_poster) {\n    user = interpolate(\n      LAST_POSTER_URL,\n      {\n        url: escapeHtml(props.thread.url.last_poster),\n        user: escapeHtml(props.thread.last_poster_name)\n      },\n      true\n    )\n  } else {\n    user = interpolate(\n      LAST_POSTER_SPAN,\n      {\n        user: escapeHtml(props.thread.last_poster_name)\n      },\n      true\n    )\n  }\n\n  const date = interpolate(\n    LAST_REPLY,\n    {\n      absolute: escapeHtml(props.thread.last_post_on.format(\"LLL\")),\n      relative: escapeHtml(props.thread.last_post_on.fromNow())\n    },\n    true\n  )\n\n  const message = interpolate(\n    escapeHtml(gettext(\"last reply by %(user)s %(date)s\")),\n    {\n      date,\n      user\n    },\n    true\n  )\n\n  return (\n    <li\n      className=\"thread-last-reply\"\n      dangerouslySetInnerHTML={{ __html: message }}\n    />\n  )\n}\n\nexport default function(props) {\n  return (\n    <div className=\"header-stats\">\n      <div className=\"container\">\n        <ul className=\"list-inline\">\n          <Weight thread={props.thread} />\n          <Unapproved thread={props.thread} />\n          <IsHidden thread={props.thread} />\n          <IsClosed thread={props.thread} />\n          <Replies thread={props.thread} />\n          <LastReply thread={props.thread} />\n        </ul>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Breadcrumbs from \"./breadcrumbs\"\nimport { isModerationVisible, ModerationControls } from \"../moderation/thread\"\nimport Stats from \"./stats\"\nimport Form from \"misago/components/form\"\nimport { getTitleValidators } from \"misago/components/posting/utils/validators\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport * as thread from \"misago/reducers/thread\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isEditing: false,\n      isLoading: false,\n\n      title: props.thread.title,\n\n      validators: {\n        title: getTitleValidators()\n      },\n      errors: {}\n    }\n  }\n\n  onChange = event => {\n    this.changeValue(\"title\", event.target.value)\n  }\n\n  onEdit = () => {\n    this.setState({\n      isEditing: true\n    })\n  }\n\n  onCancel = () => {\n    this.setState({\n      title: this.props.thread.title,\n\n      isEditing: false\n    })\n  }\n\n  clean() {\n    if (!this.state.title.trim().length) {\n      snackbar.error(gettext(\"You have to enter thread title.\"))\n      return false\n    }\n\n    const errors = this.validate()\n\n    if (errors.title) {\n      snackbar.error(errors.title[0])\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    return ajax.patch(this.props.thread.api.index, [\n      { op: \"replace\", path: \"title\", value: this.state.title }\n    ])\n  }\n\n  handleSuccess(data) {\n    store.dispatch(thread.update(data))\n\n    this.setState({\n      isEditing: false\n    })\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      snackbar.error(rejection.detail[0])\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    const { thread, user } = this.props\n    const showModeration = !!user.id && isModerationVisible(thread)\n\n    if (this.state.isEditing) {\n      return (\n        <div className=\"page-header\">\n          <Breadcrumbs path={thread.path} />\n          <div className=\"container\">\n            <div className=\"row xs-margin-top title-edit-form\">\n              <form onSubmit={this.handleSubmit}>\n                <div className=\"col-sm-6 col-md-6\">\n                  <input\n                    className=\"form-control\"\n                    type=\"text\"\n                    value={this.state.title}\n                    onChange={this.onChange}\n                  />\n                </div>\n                <div className=\"col-sm-6 col-md-4\">\n                  <div className=\"row xs-margin-top-half sm-margin-top-no md-margin-top-no\">\n                    <div className=\"col-xs-6\">\n                      <button\n                        className=\"btn btn-primary btn-block btn-outline\"\n                        disabled={this.state.isLoading}\n                        title={gettext(\"Change title\")}\n                      >\n                        {gettext(\"Save changes\")}\n                      </button>\n                    </div>\n                    <div className=\"col-xs-6\">\n                      <button\n                        className=\"btn btn-default btn-block btn-outline\"\n                        disabled={this.state.isLoading}\n                        onClick={this.onCancel}\n                        title={gettext(\"Cancel\")}\n                        type=\"button\"\n                      >\n                        {gettext(\"Cancel\")}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </div>\n          <Stats thread={thread} />\n        </div>\n      )\n    } else if (user.id && thread.acl.can_edit) {\n      return (\n        <div className=\"page-header\">\n          <Breadcrumbs path={thread.path} />\n          <div className=\"container\">\n            <div className=\"row\">\n              <div\n                className={\n                  showModeration ? \"col-sm-9 col-md-8\" : \"col-sm-10 col-md-10\"\n                }\n              >\n                <h1>{thread.title}</h1>\n              </div>\n              <div\n                className={\n                  showModeration ? \"col-sm-3 col-md-4\" : \"col-sm-3 col-md-2\"\n                }\n              >\n                <div className=\"row xs-margin-top md-margin-top-no\">\n                  <div className={showModeration ? \"col-xs-6\" : \"col-xs-12\"}>\n                    <button\n                      className=\"btn btn-default btn-block btn-outline\"\n                      onClick={this.onEdit}\n                      title={gettext(\"Edit title\")}\n                      type=\"button\"\n                    >\n                      <span className=\"material-icon\">edit</span>\n                      <span className=\"hidden-sm\">{gettext(\"Edit\")}</span>\n                    </button>\n                  </div>\n                  {showModeration && <Moderation {...this.props} />}\n                </div>\n              </div>\n            </div>\n          </div>\n          <Stats thread={thread} />\n        </div>\n      )\n    } else if (showModeration) {\n      return (\n        <div className=\"page-header\">\n          <Breadcrumbs path={thread.path} />\n          <div className=\"container\">\n            <div className=\"row\">\n              <div className=\"col-sm-9 col-md-10\">\n                <h1>{thread.title}</h1>\n              </div>\n              <div className=\"col-sm-3 col-md-2\">\n                <div className=\"row xs-margin-top md-margin-top-no\">\n                  <Moderation isSingle={true} {...this.props} />\n                </div>\n              </div>\n            </div>\n          </div>\n          <Stats thread={thread} />\n        </div>\n      )\n    }\n\n    return (\n      <div className=\"page-header\">\n        <Breadcrumbs path={thread.path} />\n        <div className=\"container\">\n          <h1>{thread.title}</h1>\n        </div>\n        <Stats thread={thread} />\n      </div>\n    )\n  }\n}\n\nexport function Moderation(props) {\n  return (\n    <div className={props.isSingle ? \"col-xs-12\" : \"col-xs-6\"}>\n      <div className=\"btn-group btn-group-justified\">\n        <div className=\"btn-group\">\n          <button\n            aria-expanded=\"false\"\n            aria-haspopup=\"true\"\n            className=\"btn btn-default btn-outline dropdown-toggle\"\n            data-toggle=\"dropdown\"\n            disabled={props.thread.isBusy}\n            type=\"button\"\n          >\n            <span className=\"material-icon\">settings</span>\n            <span className={props.isSingle ? \"\" : \"hidden-sm\"}>\n              {gettext(\"Moderation\")}\n            </span>\n          </button>\n          <ModerationControls\n            posts={props.posts}\n            thread={props.thread}\n            user={props.user}\n          />\n        </div>\n      </div>\n    </div>\n  )\n}\n","export default function(thread) {\n  return !!(\n    (thread.acl.can_approve && thread.is_unapproved) ||\n    thread.acl.can_close ||\n    thread.acl.can_delete ||\n    thread.acl.can_hide ||\n    thread.acl.can_move ||\n    thread.acl.can_merge ||\n    thread.acl.can_pin ||\n    (thread.acl.can_pin_globally && thread.weight !== 2) ||\n    (thread.acl.can_unhide && thread.is_hidden)\n  )\n}\n","import React from \"react\"\n\nexport default function(props) {\n  return (\n    <button\n      className={props.className || \"btn btn-primary btn-outline\"}\n      onClick={props.onClick}\n      type=\"button\"\n    >\n      <span className=\"material-icon\">chat</span>\n      {gettext(\"Reply\")}\n    </button>\n  )\n}\n","import React from \"react\"\nimport * as actions from \"misago/reducers/thread\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default function(props) {\n  if (!props.user.id) return null\n\n  return (\n    <div className={props.className}>\n      <button\n        aria-expanded=\"true\"\n        aria-haspopup=\"true\"\n        className=\"btn btn-default dropdown-toggle btn-block btn-outline\"\n        data-toggle=\"dropdown\"\n        type=\"button\"\n      >\n        <span className=\"material-icon\">\n          {getIcon(props.thread.subscription)}\n        </span>\n        {getLabel(props.thread.subscription)}\n      </button>\n      <Dropdown {...props} />\n    </div>\n  )\n}\n\nexport function getIcon(subscription) {\n  if (subscription === true) {\n    return \"star\"\n  } else if (subscription === false) {\n    return \"star_half\"\n  } else {\n    return \"star_border\"\n  }\n}\n\nexport function getLabel(subscription) {\n  if (subscription === true) {\n    return gettext(\"E-mail\")\n  } else if (subscription === false) {\n    return gettext(\"Enabled\")\n  } else {\n    return gettext(\"Disabled\")\n  }\n}\n\nexport function Dropdown(props) {\n  return (\n    <ul className={props.dropdownClassName || \"dropdown-menu stick-to-bottom\"}>\n      <Disable {...props} />\n      <Enable {...props} />\n      <Email {...props} />\n    </ul>\n  )\n}\n\nexport class Disable extends React.Component {\n  onClick = () => {\n    if (this.props.thread.subscription === null) {\n      return\n    }\n\n    update(this.props.thread, null, \"unsubscribe\")\n  }\n\n  render() {\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">star_border</span>\n          {gettext(\"Unsubscribe\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Enable extends React.Component {\n  onClick = () => {\n    if (this.props.thread.subscription === false) {\n      return\n    }\n\n    update(this.props.thread, false, \"notify\")\n  }\n\n  render() {\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">star_half</span>\n          {gettext(\"Subscribe\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Email extends React.Component {\n  onClick = () => {\n    if (this.props.thread.subscription === true) {\n      return\n    }\n\n    update(this.props.thread, true, \"email\")\n  }\n\n  render() {\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">star</span>\n          {gettext(\"Subscribe with e-mail\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport function update(thread, newState, value) {\n  const oldState = {\n    subscription: thread.subscription\n  }\n\n  store.dispatch(\n    actions.update({\n      subscription: newState\n    })\n  )\n\n  ajax\n    .patch(thread.api.index, [\n      { op: \"replace\", path: \"subscription\", value: value }\n    ])\n    .then(\n      finalState => {\n        store.dispatch(actions.update(finalState))\n      },\n      rejection => {\n        if (rejection.status === 400) {\n          snackbar.error(rejection.detail[0])\n        } else {\n          snackbar.apiError(rejection)\n        }\n\n        store.dispatch(actions.update(oldState))\n      }\n    )\n}\n","import React from \"react\"\nimport ReplyButton from \"./reply-button\"\nimport Subscription from \"./subscription\"\nimport posting from \"misago/services/posting\"\n\nexport default function(props) {\n  const hiddenSpecialOption =\n    !props.thread.acl.can_start_poll || props.thread.poll\n\n  return (\n    <div className=\"row row-toolbar row-toolbar-bottom-margin\">\n      <GotoMenu {...props} />\n      <div className=\"col-xs-9 col-md-5 col-md-offset-2\">\n        <div className=\"row\">\n          <Spacer visible={!props.user.id} />\n          <Spacer visible={hiddenSpecialOption} />\n          <SubscriptionMenu {...props} />\n          <StartPoll {...props} />\n          <Reply {...props} />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport function GotoMenu(props) {\n  const { user } = props\n\n  let className = \"col-xs-3 col-sm-3 col-md-5\"\n  if (user.is_anonymous) {\n    className = \"col-xs-12 col-sm-3 col-md-5\"\n  }\n\n  return (\n    <div className={className}>\n      <div className=\"row hidden-xs hidden-sm\">\n        <GotoLast thread={props.thread} />\n        <GotoNew thread={props.thread} />\n        <GotoBestAnswer thread={props.thread} />\n        <GotoUnapproved thread={props.thread} />\n      </div>\n      <CompactOptions {...props} />\n    </div>\n  )\n}\n\nexport function GotoNew(props) {\n  if (!props.thread.is_new) return null\n\n  return (\n    <div className=\"col-sm-4\">\n      <a\n        href={props.thread.url.new_post}\n        className=\"btn btn-default btn-block btn-outline\"\n        title={gettext(\"Go to first new post\")}\n      >\n        {gettext(\"New\")}\n      </a>\n    </div>\n  )\n}\n\nexport function GotoBestAnswer(props) {\n  if (!props.thread.best_answer) {\n    return null\n  }\n\n  return (\n    <div className=\"col-sm-4\">\n      <a\n        href={props.thread.url.best_answer}\n        className=\"btn btn-default btn-block btn-outline\"\n        title={gettext(\"Go to best answer\")}\n      >\n        {gettext(\"Best answer\")}\n      </a>\n    </div>\n  )\n}\n\nexport function GotoUnapproved(props) {\n  if (!props.thread.has_unapproved_posts || !props.thread.acl.can_approve) {\n    return null\n  }\n\n  return (\n    <div className=\"col-sm-4\">\n      <a\n        href={props.thread.url.unapproved_post}\n        className=\"btn btn-default btn-block btn-outline\"\n        title={gettext(\"Go to first unapproved post\")}\n      >\n        {gettext(\"Unapproved\")}\n      </a>\n    </div>\n  )\n}\n\nexport function GotoLast(props) {\n  return (\n    <div className=\"col-sm-4\">\n      <a\n        href={props.thread.url.last_post}\n        className=\"btn btn-default btn-block btn-outline\"\n        title={gettext(\"Go to last post\")}\n      >\n        {gettext(\"Last\")}\n      </a>\n    </div>\n  )\n}\n\nexport function CompactOptions(props) {\n  const { user } = props\n  if (user.is_anonymous) {\n    return (\n      <div className=\"visible-xs-block visible-sm-block\">\n        <a\n          href={props.thread.url.last_post}\n          className=\"btn btn-default btn-block btn-outline\"\n        >\n          {gettext(\"Last post\")}\n        </a>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"dropdown visible-xs-block visible-sm-block\">\n      <button\n        aria-expanded=\"true\"\n        aria-haspopup=\"true\"\n        className=\"btn btn-default dropdown-toggle btn-block btn-outline\"\n        data-toggle=\"dropdown\"\n        type=\"button\"\n      >\n        <span className=\"material-icon\">expand_more</span>\n        <span className=\"btn-text hidden-xs\">{gettext(\"Options\")}</span>\n      </button>\n      <ul className=\"dropdown-menu\">\n        <StartPollCompact {...props} />\n        <GotoNewCompact {...props} />\n        <GotoUnapprovedCompact {...props} />\n        <GotoLastCompact {...props} />\n      </ul>\n    </div>\n  )\n}\n\nexport function GotoNewCompact(props) {\n  if (!props.thread.is_new) return null\n\n  return (\n    <li>\n      <a href={props.thread.url.new_post} className=\"btn btn-link\">\n        {gettext(\"Go to first new post\")}\n      </a>\n    </li>\n  )\n}\n\nexport function GotoUnapprovedCompact(props) {\n  if (!props.thread.has_unapproved_posts || !props.thread.acl.can_approve) {\n    return null\n  }\n\n  return (\n    <li>\n      <a href={props.thread.url.unapproved_post} className=\"btn btn-link\">\n        {gettext(\"Go to first unapproved post\")}\n      </a>\n    </li>\n  )\n}\n\nexport function GotoLastCompact(props) {\n  return (\n    <li>\n      <a href={props.thread.url.last_post} className=\"btn btn-link\">\n        {gettext(\"Go to last post\")}\n      </a>\n    </li>\n  )\n}\n\nexport function Reply(props) {\n  if (!props.thread.acl.can_reply) return null\n\n  return (\n    <div className=\"col-sm-4 hidden-xs\">\n      <ReplyButton\n        className=\"btn btn-primary btn-block btn-outline\"\n        onClick={props.openReplyForm}\n      />\n    </div>\n  )\n}\n\nexport function SubscriptionMenu(props) {\n  if (!props.user.id) return null\n\n  return (\n    <div className=\"col-xs-12 col-sm-4\">\n      <Subscription\n        className=\"dropdown\"\n        dropdownClassName=\"dropdown-menu dropdown-menu-right stick-to-bottom\"\n        {...props}\n      />\n    </div>\n  )\n}\n\nexport class StartPoll extends React.Component {\n  onClick = () => {\n    posting.open({\n      mode: \"POLL\",\n      submit: this.props.thread.api.poll,\n\n      thread: this.props.thread,\n      poll: null\n    })\n  }\n\n  render() {\n    if (!this.props.thread.acl.can_start_poll || this.props.thread.poll) {\n      return null\n    }\n\n    return (\n      <div className=\"col-sm-4 hidden-xs\">\n        <button\n          className=\"btn btn-default btn-block btn-outline\"\n          onClick={this.onClick}\n          type=\"button\"\n        >\n          <span className=\"material-icon\">poll</span>\n          {gettext(\"Add poll\")}\n        </button>\n      </div>\n    )\n  }\n}\n\nexport class StartPollCompact extends StartPoll {\n  render() {\n    if (!this.props.thread.acl.can_start_poll || this.props.thread.poll) {\n      return null\n    }\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.onClick} type=\"button\">\n          {gettext(\"Add poll\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport function Spacer(props) {\n  if (!props.visible) return null\n\n  return <div className=\"col-sm-4 hidden-xs\" />\n}\n","import React from \"react\"\nimport { Link } from \"react-router\"\n\nexport default function(props) {\n  return (\n    <nav className=\"misago-pagination pull-left\">\n      <Pager {...props} />\n      <More more={props.posts.more} />\n    </nav>\n  )\n}\n\nexport function Pager(props) {\n  return (\n    <div className=\"row row-paginator\">\n      <div className=\"col-xs-3\">\n        <FirstPage {...props} />\n      </div>\n      <div className=\"col-xs-3\">\n        <PreviousPage {...props} />\n      </div>\n      <div className=\"col-xs-3\">\n        <NextPage {...props} />\n      </div>\n      <div className=\"col-xs-3\">\n        <LastPage {...props} />\n      </div>\n    </div>\n  )\n}\n\nexport function FirstPage(props) {\n  if (props.posts.isLoaded && props.posts.first) {\n    return (\n      <Link\n        className=\"btn btn-default btn-block btn-outline btn-icon\"\n        to={props.thread.url.index}\n        title={gettext(\"Go to first page\")}\n      >\n        <span className=\"material-icon\">first_page</span>\n      </Link>\n    )\n  } else {\n    return (\n      <span\n        className=\"btn btn-default btn-block btn-outline btn-icon disabled\"\n        title={gettext(\"Go to first page\")}\n      >\n        <span className=\"material-icon\">first_page</span>\n      </span>\n    )\n  }\n}\n\nexport function PreviousPage(props) {\n  if (props.posts.isLoaded && props.posts.page > 1) {\n    let previousUrl = \"\"\n    if (props.posts.previous) {\n      previousUrl = props.posts.previous + \"/\"\n    }\n\n    return (\n      <Link\n        className=\"btn btn-default btn-block btn-outline btn-icon\"\n        to={props.thread.url.index + previousUrl}\n        title={gettext(\"Go to previous page\")}\n      >\n        <span className=\"material-icon\">chevron_left</span>\n      </Link>\n    )\n  } else {\n    return (\n      <span\n        className=\"btn btn-default btn-block btn-outline btn-icon disabled\"\n        title={gettext(\"Go to previous page\")}\n      >\n        <span className=\"material-icon\">chevron_left</span>\n      </span>\n    )\n  }\n}\n\nexport function NextPage(props) {\n  if (props.posts.isLoaded && props.posts.more) {\n    let nextUrl = \"\"\n    if (props.posts.next) {\n      nextUrl = props.posts.next + \"/\"\n    }\n\n    return (\n      <Link\n        className=\"btn btn-default btn-block btn-outline btn-icon\"\n        to={props.thread.url.index + nextUrl}\n        title={gettext(\"Go to next page\")}\n      >\n        <span className=\"material-icon\">chevron_right</span>\n      </Link>\n    )\n  } else {\n    return (\n      <span\n        className=\"btn btn-default btn-block btn-outline btn-icon disabled\"\n        title={gettext(\"Go to next page\")}\n      >\n        <span className=\"material-icon\">chevron_right</span>\n      </span>\n    )\n  }\n}\n\nexport function LastPage(props) {\n  if (props.posts.isLoaded && props.posts.last) {\n    return (\n      <Link\n        className=\"btn btn-default btn-block btn-outline btn-icon\"\n        to={props.thread.url.index + props.posts.last + \"/\"}\n        title={gettext(\"Go to last page\")}\n      >\n        <span className=\"material-icon\">last_page</span>\n      </Link>\n    )\n  } else {\n    return (\n      <span\n        className=\"btn btn-default btn-block btn-outline btn-icon disabled\"\n        title={gettext(\"Go to last page\")}\n      >\n        <span className=\"material-icon\">last_page</span>\n      </span>\n    )\n  }\n}\n\nexport function More(props) {\n  let message = null\n  if (props.more) {\n    message = ngettext(\n      \"There is %(more)s more post in this thread.\",\n      \"There are %(more)s more posts in this thread.\",\n      props.more\n    )\n    message = interpolate(message, { more: props.more }, true)\n  } else {\n    message = gettext(\"There are no more posts in this thread.\")\n  }\n\n  return <p>{message}</p>\n}\n","import React from \"react\"\n\nexport default function({ errors, posts }) {\n  return (\n    <div className=\"modal-dialog\" role=\"document\">\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <button\n            aria-label={gettext(\"Close\")}\n            className=\"close\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n          <h4 className=\"modal-title\">{gettext(\"Moderation\")}</h4>\n        </div>\n        <div className=\"modal-body\">\n          <p className=\"lead\">\n            {gettext(\"One or more posts could not be changed:\")}\n          </p>\n\n          <ul className=\"list-unstyled list-errored-items\">\n            {errors.map(post => {\n              return (\n                <PostErrors\n                  errors={post.detail}\n                  key={post.id}\n                  post={posts[post.id]}\n                />\n              )\n            })}\n          </ul>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport function PostErrors({ errors, post }) {\n  const heading = interpolate(\n    gettext(\"%(username)s on %(posted_on)s\"),\n    {\n      posted_on: post.posted_on.format(\"LL, LT\"),\n      username: post.poster_name\n    },\n    true\n  )\n\n  return (\n    <li>\n      <h5>{heading}:</h5>\n      {errors.map((error, i) => {\n        return <p key={i}>{error}</p>\n      })}\n    </li>\n  )\n}\n","import moment from \"moment\"\nimport React from \"react\"\nimport * as post from \"misago/reducers/post\"\nimport * as posts from \"misago/reducers/posts\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport ErrorsList from \"./errors-list\"\n\nexport function approve(props) {\n  const { selection } = props\n\n  const ops = [{ op: \"replace\", path: \"is-unapproved\", value: false }]\n\n  const newState = selection.map(post => {\n    return {\n      id: post.id,\n      is_unapproved: false\n    }\n  })\n\n  const previousState = selection.map(post => {\n    return {\n      id: post.id,\n      is_unapproved: post.is_unapproved\n    }\n  })\n\n  patch(props, ops, newState, previousState)\n}\n\nexport function protect(props) {\n  const { selection } = props\n\n  const ops = [{ op: \"replace\", path: \"is-protected\", value: true }]\n\n  const newState = selection.map(post => {\n    return {\n      id: post.id,\n      is_protected: true\n    }\n  })\n\n  const previousState = selection.map(post => {\n    return {\n      id: post.id,\n      is_protected: post.is_protected\n    }\n  })\n\n  patch(props, ops, newState, previousState)\n}\n\nexport function unprotect(props) {\n  const { selection } = props\n\n  const ops = [{ op: \"replace\", path: \"is-protected\", value: false }]\n\n  const newState = selection.map(post => {\n    return {\n      id: post.id,\n      is_protected: false\n    }\n  })\n\n  const previousState = selection.map(post => {\n    return {\n      id: post.id,\n      is_protected: post.is_protected\n    }\n  })\n\n  patch(props, ops, newState, previousState)\n}\n\nexport function hide(props) {\n  const { selection } = props\n\n  const ops = [{ op: \"replace\", path: \"is-hidden\", value: true }]\n\n  const newState = selection.map(post => {\n    return {\n      id: post.id,\n      is_hidden: true,\n      hidden_on: moment(),\n      hidden_by_name: props.user.username,\n      url: Object.assign(post.url, {\n        hidden_by: props.user.url\n      })\n    }\n  })\n\n  const previousState = selection.map(post => {\n    return {\n      id: post.id,\n      is_hidden: post.is_hidden,\n      hidden_on: post.hidden_on,\n      hidden_by_name: post.hidden_by_name,\n      url: post.url\n    }\n  })\n\n  patch(props, ops, newState, previousState)\n}\n\nexport function unhide(props) {\n  const { selection } = props\n\n  const ops = [{ op: \"replace\", path: \"is-hidden\", value: false }]\n\n  const newState = selection.map(post => {\n    return {\n      id: post.id,\n      is_hidden: false,\n      hidden_on: moment(),\n      hidden_by_name: props.user.username,\n      url: Object.assign(post.url, {\n        hidden_by: props.user.url\n      })\n    }\n  })\n\n  const previousState = selection.map(post => {\n    return {\n      id: post.id,\n      is_hidden: post.is_hidden,\n      hidden_on: post.hidden_on,\n      hidden_by_name: post.hidden_by_name,\n      url: post.url\n    }\n  })\n\n  patch(props, ops, newState, previousState)\n}\n\nexport function patch(props, ops, newState, previousState) {\n  const { selection, thread } = props\n\n  // patch selected items\n  newState.forEach(item => {\n    post.patch(item, item)\n  })\n\n  // deselect all the things\n  store.dispatch(posts.deselectAll())\n\n  // call ajax\n  const data = {\n    ops,\n\n    ids: selection.map(post => {\n      return post.id\n    })\n  }\n\n  ajax.patch(thread.api.posts.index, data).then(\n    data => {\n      data.forEach(item => {\n        store.dispatch(post.patch(item, item))\n      })\n    },\n    rejection => {\n      if (rejection.status !== 400) {\n        // rollback all\n        previousState.forEach(item => {\n          store.dispatch(post.patch(item, item))\n        })\n        return snackbar.apiError(rejection)\n      }\n\n      let errors = []\n      let rollback = []\n\n      rejection.forEach(item => {\n        if (item.detail) {\n          errors.push(item)\n          rollback.push(item.id)\n        } else {\n          store.dispatch(post.patch(item, item))\n        }\n\n        previousState.forEach(item => {\n          if (rollback.indexOf(item) !== -1) {\n            store.dispatch(post.patch(item, item))\n          }\n        })\n      })\n\n      let posts = {}\n      selection.forEach(item => {\n        posts[item.id] = item\n      })\n\n      modal.show(<ErrorsList errors={errors} posts={posts} />)\n    }\n  )\n}\n\nexport function merge(props) {\n  let confirmed = window.confirm(\n    gettext(\n      \"Are you sure you want to merge selected posts? This action is not reversible!\"\n    )\n  )\n  if (!confirmed) {\n    return\n  }\n\n  props.selection.slice(1).map(selection => {\n    store.dispatch(\n      post.patch(selection, {\n        isDeleted: true\n      })\n    )\n  })\n\n  ajax\n    .post(props.thread.api.posts.merge, {\n      posts: props.selection.map(post => post.id)\n    })\n    .then(\n      data => {\n        store.dispatch(post.patch(data, post.hydrate(data)))\n      },\n      rejection => {\n        if (rejection.status === 400) {\n          snackbar.error(rejection.detail)\n        } else {\n          snackbar.apiError(rejection)\n        }\n\n        props.selection.slice(1).map(selection => {\n          store.dispatch(\n            post.patch(selection, {\n              isDeleted: false\n            })\n          )\n        })\n      }\n    )\n\n  store.dispatch(posts.deselectAll())\n}\n\nexport function remove(props) {\n  let confirmed = window.confirm(\n    gettext(\n      \"Are you sure you want to delete selected posts? This action is not reversible!\"\n    )\n  )\n  if (!confirmed) {\n    return\n  }\n\n  props.selection.map(selection => {\n    store.dispatch(\n      post.patch(selection, {\n        isDeleted: true\n      })\n    )\n  })\n\n  const ids = props.selection.map(post => {\n    return post.id\n  })\n\n  ajax.delete(props.thread.api.posts.index, ids).then(\n    () => {\n      return\n    },\n    rejection => {\n      if (rejection.status === 400) {\n        snackbar.error(rejection.detail)\n      } else {\n        snackbar.apiError(rejection)\n      }\n\n      props.selection.map(selection => {\n        store.dispatch(\n          post.patch(selection, {\n            isDeleted: false\n          })\n        )\n      })\n    }\n  )\n\n  store.dispatch(posts.deselectAll())\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport * as post from \"misago/reducers/post\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      url: \"\",\n\n      validators: {\n        url: []\n      },\n      errors: {}\n    }\n  }\n\n  clean() {\n    if (!this.state.url.trim().length) {\n      snackbar.error(gettext(\"You have to enter link to the other thread.\"))\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    return ajax.post(this.props.thread.api.posts.move, {\n      new_thread: this.state.url,\n      posts: this.props.selection.map(post => post.id)\n    })\n  }\n\n  handleSuccess(success) {\n    this.props.selection.forEach(selection => {\n      store.dispatch(\n        post.patch(selection, {\n          isDeleted: true\n        })\n      )\n    })\n\n    modal.hide()\n\n    snackbar.success(gettext(\"Selected posts were moved to the other thread.\"))\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      snackbar.error(rejection.detail)\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  onUrlChange = event => {\n    this.changeValue(\"url\", event.target.value)\n  }\n\n  render() {\n    return (\n      <div className=\"modal-dialog\" role=\"document\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"modal-content\">\n            <ModalHeader />\n            <div className=\"modal-body\">\n              <FormGroup\n                for=\"id_url\"\n                label={gettext(\"Link to thread you want to move posts to\")}\n              >\n                <input\n                  className=\"form-control\"\n                  disabled={this.state.isLoading}\n                  id=\"id_url\"\n                  onChange={this.onUrlChange}\n                  value={this.state.url}\n                />\n              </FormGroup>\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn btn-default\"\n                data-dismiss=\"modal\"\n                disabled={this.state.isLoading}\n                type=\"button\"\n              >\n                {gettext(\"Cancel\")}\n              </button>\n              <button\n                className=\"btn btn-primary\"\n                loading={this.state.isLoading}\n              >\n                {gettext(\"Move posts\")}\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport function ModalHeader(props) {\n  return (\n    <div className=\"modal-header\">\n      <button\n        aria-label={gettext(\"Close\")}\n        className=\"close\"\n        data-dismiss=\"modal\"\n        type=\"button\"\n      >\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n      <h4 className=\"modal-title\">{gettext(\"Move posts\")}</h4>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport CategorySelect from \"misago/components/category-select\"\nimport ModalLoader from \"misago/components/modal-loader\"\nimport Select from \"misago/components/select\"\nimport * as post from \"misago/reducers/post\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport * as validators from \"misago/utils/validators\"\nimport ErrorsModal from \"./errors-list\"\n\nexport default function(props) {\n  return <PostingConfig {...props} Form={ModerationForm} />\n}\n\nexport class PostingConfig extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoaded: false,\n      isError: false,\n\n      categories: []\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(misago.get(\"THREAD_EDITOR_API\")).then(\n      data => {\n        // hydrate categories, extract posting options\n        const categories = data.map(item => {\n          return Object.assign(item, {\n            disabled: item.post === false,\n            label: item.name,\n            value: item.id,\n            post: item.post\n          })\n        })\n\n        this.setState({\n          isLoaded: true,\n          categories\n        })\n      },\n      rejection => {\n        this.setState({\n          isError: rejection.detail\n        })\n      }\n    )\n  }\n\n  render() {\n    if (this.state.isError) {\n      return <Error message={this.state.isError} />\n    } else if (this.state.isLoaded) {\n      return (\n        <ModerationForm {...this.props} categories={this.state.categories} />\n      )\n    } else {\n      return <Loader />\n    }\n  }\n}\n\nexport class ModerationForm extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      title: \"\",\n      category: null,\n      categories: props.categories,\n      weight: 0,\n      is_hidden: 0,\n      is_closed: false,\n\n      validators: {\n        title: [validators.required()]\n      },\n\n      errors: {}\n    }\n\n    this.isHiddenChoices = [\n      {\n        value: 0,\n        icon: \"visibility\",\n        label: gettext(\"No\")\n      },\n      {\n        value: 1,\n        icon: \"visibility_off\",\n        label: gettext(\"Yes\")\n      }\n    ]\n\n    this.isClosedChoices = [\n      {\n        value: false,\n        icon: \"lock_outline\",\n        label: gettext(\"No\")\n      },\n      {\n        value: true,\n        icon: \"lock\",\n        label: gettext(\"Yes\")\n      }\n    ]\n\n    this.acl = {}\n    this.props.categories.forEach(category => {\n      if (category.post) {\n        if (!this.state.category) {\n          this.state.category = category.id\n        }\n\n        this.acl[category.id] = {\n          can_pin_threads: category.post.pin,\n          can_close_threads: category.post.close,\n          can_hide_threads: category.post.hide\n        }\n      }\n    })\n  }\n\n  clean() {\n    if (this.isValid()) {\n      return true\n    } else {\n      snackbar.error(gettext(\"Form contains errors.\"))\n      this.setState({\n        errors: this.validate()\n      })\n      return false\n    }\n  }\n\n  send() {\n    return ajax.post(this.props.thread.api.posts.split, {\n      title: this.state.title,\n      category: this.state.category,\n      weight: this.state.weight,\n      is_hidden: this.state.is_hidden,\n      is_closed: this.state.is_closed,\n      posts: this.props.selection.map(post => post.id)\n    })\n  }\n\n  handleSuccess(apiResponse) {\n    this.props.selection.forEach(selection => {\n      store.dispatch(\n        post.patch(selection, {\n          isDeleted: true\n        })\n      )\n    })\n\n    modal.hide()\n\n    snackbar.success(gettext(\"Selected posts were split into new thread.\"))\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      this.setState({\n        errors: Object.assign({}, this.state.errors, rejection)\n      })\n      snackbar.error(gettext(\"Form contains errors.\"))\n    } else if (rejection.status === 403 && Array.isArray(rejection)) {\n      modal.show(<ErrorsModal errors={rejection} />)\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  onCategoryChange = ev => {\n    const categoryId = ev.target.value\n    const newState = {\n      category: categoryId\n    }\n\n    if (this.acl[categoryId].can_pin_threads < newState.weight) {\n      newState.weight = 0\n    }\n\n    if (!this.acl[categoryId].can_hide_threads) {\n      newState.is_hidden = 0\n    }\n\n    if (!this.acl[categoryId].can_close_threads) {\n      newState.is_closed = false\n    }\n\n    this.setState(newState)\n  }\n\n  getWeightChoices() {\n    const choices = [\n      {\n        value: 0,\n        icon: \"remove\",\n        label: gettext(\"Not pinned\")\n      },\n      {\n        value: 1,\n        icon: \"bookmark_border\",\n        label: gettext(\"Pinned locally\")\n      }\n    ]\n\n    if (this.acl[this.state.category].can_pin_threads == 2) {\n      choices.push({\n        value: 2,\n        icon: \"bookmark\",\n        label: gettext(\"Pinned globally\")\n      })\n    }\n\n    return choices\n  }\n\n  renderWeightField() {\n    if (this.acl[this.state.category].can_pin_threads) {\n      return (\n        <FormGroup\n          label={gettext(\"Thread weight\")}\n          for=\"id_weight\"\n          labelClass=\"col-sm-4\"\n          controlClass=\"col-sm-8\"\n        >\n          <Select\n            id=\"id_weight\"\n            onChange={this.bindInput(\"weight\")}\n            value={this.state.weight}\n            choices={this.getWeightChoices()}\n          />\n        </FormGroup>\n      )\n    } else {\n      return null\n    }\n  }\n\n  renderHiddenField() {\n    if (this.acl[this.state.category].can_hide_threads) {\n      return (\n        <FormGroup\n          label={gettext(\"Hide thread\")}\n          for=\"id_is_hidden\"\n          labelClass=\"col-sm-4\"\n          controlClass=\"col-sm-8\"\n        >\n          <Select\n            id=\"id_is_closed\"\n            onChange={this.bindInput(\"is_hidden\")}\n            value={this.state.is_hidden}\n            choices={this.isHiddenChoices}\n          />\n        </FormGroup>\n      )\n    } else {\n      return null\n    }\n  }\n\n  renderClosedField() {\n    if (this.acl[this.state.category].can_close_threads) {\n      return (\n        <FormGroup\n          label={gettext(\"Close thread\")}\n          for=\"id_is_closed\"\n          labelClass=\"col-sm-4\"\n          controlClass=\"col-sm-8\"\n        >\n          <Select\n            id=\"id_is_closed\"\n            onChange={this.bindInput(\"is_closed\")}\n            value={this.state.is_closed}\n            choices={this.isClosedChoices}\n          />\n        </FormGroup>\n      )\n    } else {\n      return null\n    }\n  }\n\n  render() {\n    return (\n      <Modal className=\"modal-dialog\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"modal-body\">\n            <FormGroup\n              label={gettext(\"Thread title\")}\n              for=\"id_title\"\n              labelClass=\"col-sm-4\"\n              controlClass=\"col-sm-8\"\n              validation={this.state.errors.title}\n            >\n              <input\n                id=\"id_title\"\n                className=\"form-control\"\n                type=\"text\"\n                onChange={this.bindInput(\"title\")}\n                value={this.state.title}\n              />\n            </FormGroup>\n            <div className=\"clearfix\" />\n\n            <FormGroup\n              label={gettext(\"Category\")}\n              for=\"id_category\"\n              labelClass=\"col-sm-4\"\n              controlClass=\"col-sm-8\"\n              validation={this.state.errors.category}\n            >\n              <CategorySelect\n                id=\"id_category\"\n                onChange={this.onCategoryChange}\n                value={this.state.category}\n                choices={this.state.categories}\n              />\n            </FormGroup>\n            <div className=\"clearfix\" />\n\n            {this.renderWeightField()}\n            {this.renderHiddenField()}\n            {this.renderClosedField()}\n          </div>\n          <div className=\"modal-footer\">\n            <button\n              className=\"btn btn-default\"\n              data-dismiss=\"modal\"\n              disabled={this.state.isLoading}\n              type=\"button\"\n            >\n              {gettext(\"Cancel\")}\n            </button>\n            <Button className=\"btn-primary\" loading={this.state.isLoading}>\n              {gettext(\"Split posts\")}\n            </Button>\n          </div>\n        </form>\n      </Modal>\n    )\n  }\n}\n\nexport function Loader() {\n  return (\n    <Modal className=\"modal-dialog\">\n      <ModalLoader />\n    </Modal>\n  )\n}\n\nexport function Error(props) {\n  return (\n    <Modal className=\"modal-dialog modal-message\">\n      <div className=\"message-icon\">\n        <span className=\"material-icon\">info_outline</span>\n      </div>\n      <div className=\"message-body\">\n        <p className=\"lead\">\n          {gettext(\"You can't move selected posts at the moment.\")}\n        </p>\n        <p>{props.message}</p>\n        <button className=\"btn btn-default\" data-dismiss=\"modal\" type=\"button\">\n          {gettext(\"Ok\")}\n        </button>\n      </div>\n    </Modal>\n  )\n}\n\nexport function Modal(props) {\n  return (\n    <div className={props.className} role=\"document\">\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <button\n            aria-label={gettext(\"Close\")}\n            className=\"close\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n          <h4 className=\"modal-title\">\n            {gettext(\"Split posts into new thread\")}\n          </h4>\n        </div>\n        {props.children}\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport modal from \"misago/services/modal\"\nimport * as moderation from \"./actions\"\nimport MoveModal from \"./move\"\nimport SplitModal from \"./split\"\n\nexport default function(props) {\n  return (\n    <ul className=\"dropdown-menu\">\n      <Approve {...props} />\n      <Merge {...props} />\n      <Move {...props} />\n      <Split {...props} />\n      <Protect {...props} />\n      <Unprotect {...props} />\n      <Unhide {...props} />\n      <Hide {...props} />\n      <Delete {...props} />\n    </ul>\n  )\n}\n\nexport class Approve extends React.Component {\n  onClick = () => {\n    moderation.approve(this.props)\n  }\n\n  render() {\n    const isVisible = this.props.selection.find(post => {\n      return post.acl.can_approve && post.is_unapproved\n    })\n\n    if (!isVisible) return null\n\n    return (\n      <li>\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">done</span>\n          {gettext(\"Approve\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Merge extends React.Component {\n  onClick = () => {\n    moderation.merge(this.props)\n  }\n\n  render() {\n    const isVisible =\n      this.props.selection.length > 1 &&\n      this.props.selection.find(post => {\n        return post.acl.can_merge\n      })\n\n    if (!isVisible) return null\n\n    return (\n      <li>\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">call_merge</span>\n          {gettext(\"Merge\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Move extends React.Component {\n  onClick = () => {\n    modal.show(<MoveModal {...this.props} />)\n  }\n\n  render() {\n    const isVisible = this.props.selection.find(post => {\n      return post.acl.can_move\n    })\n\n    if (!isVisible) return null\n\n    return (\n      <li>\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">arrow_forward</span>\n          {gettext(\"Move\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Split extends React.Component {\n  onClick = () => {\n    modal.show(<SplitModal {...this.props} />)\n  }\n\n  render() {\n    const isVisible = this.props.selection.find(post => {\n      return post.acl.can_move\n    })\n\n    if (!isVisible) return null\n\n    return (\n      <li>\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">call_split</span>\n          {gettext(\"Split\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Protect extends React.Component {\n  onClick = () => {\n    moderation.protect(this.props)\n  }\n\n  render() {\n    const isVisible = this.props.selection.find(post => {\n      return !post.is_protected && post.acl.can_protect\n    })\n\n    if (!isVisible) return null\n\n    return (\n      <li>\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">lock_outline</span>\n          {gettext(\"Protect\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Unprotect extends React.Component {\n  onClick = () => {\n    moderation.unprotect(this.props)\n  }\n\n  render() {\n    const isVisible = this.props.selection.find(post => {\n      return post.is_protected && post.acl.can_protect\n    })\n\n    if (!isVisible) return null\n\n    return (\n      <li>\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">lock_open</span>\n          {gettext(\"Unprotect\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Hide extends React.Component {\n  onClick = () => {\n    moderation.hide(this.props)\n  }\n\n  render() {\n    const isVisible = this.props.selection.find(post => {\n      return post.acl.can_hide && !post.is_hidden\n    })\n\n    if (!isVisible) return null\n\n    return (\n      <li>\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">visibility_off</span>\n          {gettext(\"Hide\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Unhide extends React.Component {\n  onClick = () => {\n    moderation.unhide(this.props)\n  }\n\n  render() {\n    const isVisible = this.props.selection.find(post => {\n      return post.acl.can_unhide && post.is_hidden\n    })\n\n    if (!isVisible) return null\n\n    return (\n      <li>\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">visibility</span>\n          {gettext(\"Unhide\")}\n        </button>\n      </li>\n    )\n  }\n}\n\nexport class Delete extends React.Component {\n  onClick = () => {\n    moderation.remove(this.props)\n  }\n\n  render() {\n    const isVisible = this.props.selection.find(post => {\n      return post.acl.can_delete\n    })\n\n    if (!isVisible) return null\n\n    return (\n      <li>\n        <button type=\"button\" className=\"btn btn-link\" onClick={this.onClick}>\n          <span className=\"material-icon\">clear</span>\n          {gettext(\"Delete\")}\n        </button>\n      </li>\n    )\n  }\n}\n","import React from \"react\"\nimport Dropdown from \"./dropdown\"\n\nexport default function(props) {\n  if (!props.user.id || !isVisible(props.thread, props.posts.results)) {\n    return null\n  }\n\n  const selection = props.posts.results.filter(post => {\n    return post.isSelected\n  })\n\n  return (\n    <div className=\"dropup\">\n      <button\n        aria-expanded=\"true\"\n        aria-haspopup=\"true\"\n        className=\"btn btn-default dropdown-toggle btn-block btn-outline\"\n        data-toggle=\"dropdown\"\n        disabled={!selection.length}\n        type=\"button\"\n      >\n        {gettext(\"Posts options\")}\n      </button>\n      <Dropdown selection={selection} {...props} />\n    </div>\n  )\n}\n\nexport function isVisible(thread, posts) {\n  if (thread.acl.can_merge_posts && posts.length > 1) {\n    // fast test: show moderation menu if we can merge posts\n    return true\n  }\n\n  // slow test: show moderation if any of posts has moderation options\n  let visible = false\n  posts.forEach(post => {\n    if (!post.is_event) {\n      const showModeration =\n        (post.acl.can_approve && post.is_unapproved) ||\n        post.acl.can_delete ||\n        (!post.is_hidden && post.acl.can_hide) ||\n        post.acl.can_move ||\n        post.acl.can_merge ||\n        post.acl.can_protect ||\n        (post.is_hidden && post.acl.can_unhide) ||\n        post.acl.can_unprotect\n\n      if (showModeration) {\n        visible = true\n      }\n    }\n  })\n  return visible\n}\n","import React from \"react\"\nimport { Pager, More } from \"./paginator\"\nimport PostsModeration from \"./moderation/posts\"\nimport ReplyButton from \"./reply-button\"\nimport SubscriptionSwitch from \"./subscription\"\n\nexport default function(props) {\n  return (\n    <div className=\"row row-toolbar\">\n      <div className=\"col-xs-12 text-center visible-xs-block\">\n        <More more={props.posts.more} />\n        <div className=\"toolbar-vertical-spacer\" />\n      </div>\n      <div className=\"col-md-7\">\n        <div className=\"row\">\n          <div className=\"col-sm-4 col-md-5\">\n            <Pager {...props} />\n          </div>\n          <div className=\"col-sm-8 col-md-7 hidden-xs\">\n            <More more={props.posts.more} />\n          </div>\n        </div>\n      </div>\n      <Options visible={!!props.user.id}>\n        <div className=\"toolbar-vertical-spacer hidden-md hidden-lg\" />\n        <div className=\"row\">\n          <Spacer {...props} />\n          <Moderation {...props} />\n          <Subscription {...props} />\n          <Reply thread={props.thread} onClick={props.openReplyForm} />\n        </div>\n      </Options>\n    </div>\n  )\n}\n\nexport function Options(props) {\n  if (!props.visible) return null\n\n  return <div className=\"col-md-5\">{props.children}</div>\n}\n\nexport function Moderation(props) {\n  if (!props.user.id) return null\n\n  return (\n    <div className=\"col-sm-4 hidden-xs\">\n      <PostsModeration {...props} />\n    </div>\n  )\n}\n\nexport function Subscription(props) {\n  let xsClass = \"col-xs-6\"\n  if (!props.thread.acl.can_reply) {\n    xsClass = \"col-xs-12\"\n  }\n\n  return (\n    <div className={xsClass + \" col-sm-4\"}>\n      <SubscriptionSwitch\n        btnClassName=\"btn-block\"\n        className=\"dropup\"\n        {...props}\n      />\n    </div>\n  )\n}\n\nexport function Reply(props) {\n  if (!props.thread.acl.can_reply) return null\n\n  return (\n    <div className=\"col-xs-6 col-sm-4\">\n      <ReplyButton\n        className=\"btn btn-primary btn-block btn-outline\"\n        onClick={props.onClick}\n      />\n    </div>\n  )\n}\n\nexport function Spacer(props) {\n  if (props.thread.acl.can_reply) return null\n\n  return <div className=\"hidden-xs hidden-sm col-sm-4\" />\n}\n","import React from \"react\"\nimport Participants from \"misago/components/participants\"\nimport { Poll } from \"misago/components/poll\"\nimport PostsList from \"misago/components/posts-list\"\nimport Header from \"./header\"\nimport ToolbarTop from \"./toolbar-top\"\nimport ToolbarBottom from \"./toolbar-bottom\"\nimport * as participants from \"misago/reducers/participants\"\nimport * as poll from \"misago/reducers/poll\"\nimport * as posts from \"misago/reducers/posts\"\nimport * as thread from \"misago/reducers/thread\"\nimport ajax from \"misago/services/ajax\"\nimport polls from \"misago/services/polls\"\nimport snackbar from \"misago/services/snackbar\"\nimport posting from \"misago/services/posting\"\nimport store from \"misago/services/store\"\nimport title from \"misago/services/page-title\"\n\nexport default class extends React.Component {\n  componentDidMount() {\n    if (this.shouldFetchData()) {\n      this.fetchData()\n      this.setPageTitle()\n    }\n\n    this.startPollingApi()\n  }\n\n  componentDidUpdate() {\n    if (this.shouldFetchData()) {\n      this.fetchData()\n      this.startPollingApi()\n      this.setPageTitle()\n    }\n  }\n\n  componentWillUnmount() {\n    this.stopPollingApi()\n  }\n\n  shouldFetchData() {\n    if (this.props.posts.isLoaded) {\n      const page = (this.props.params.page || 1) * 1\n      return page != this.props.posts.page\n    } else {\n      return false\n    }\n  }\n\n  fetchData() {\n    store.dispatch(posts.unload())\n\n    ajax\n      .get(\n        this.props.thread.api.posts.index,\n        {\n          page: this.props.params.page || 1\n        },\n        \"posts\"\n      )\n      .then(\n        data => {\n          this.update(data)\n        },\n        rejection => {\n          snackbar.apiError(rejection)\n        }\n      )\n  }\n\n  startPollingApi() {\n    polls.start({\n      poll: \"thread-posts\",\n\n      url: this.props.thread.api.posts.index,\n      data: {\n        page: this.props.params.page || 1\n      },\n      update: this.update,\n\n      frequency: 120 * 1000,\n      delayed: true\n    })\n  }\n\n  stopPollingApi() {\n    polls.stop(\"thread-posts\")\n  }\n\n  setPageTitle() {\n    title.set({\n      title: this.props.thread.title,\n      parent: this.props.thread.category.name,\n      page: (this.props.params.page || 1) * 1\n    })\n  }\n\n  update = data => {\n    store.dispatch(thread.replace(data))\n    store.dispatch(posts.load(data.post_set))\n\n    if (data.participants) {\n      store.dispatch(participants.replace(data.participants))\n    }\n\n    if (data.poll) {\n      store.dispatch(poll.replace(data.poll))\n    }\n\n    this.setPageTitle()\n  }\n\n  openReplyForm = () => {\n    posting.open({\n      mode: \"REPLY\",\n\n      config: this.props.thread.api.editor,\n      submit: this.props.thread.api.posts.index\n    })\n  }\n\n  render() {\n    let className = \"page page-thread\"\n    if (this.props.thread.category.css_class) {\n      className += \" page-thread-\" + this.props.thread.category.css_class\n    }\n\n    return (\n      <div className={className}>\n        <div className=\"page-header-bg\">\n          <Header {...this.props} />\n        </div>\n        <div className=\"container\">\n          <ToolbarTop openReplyForm={this.openReplyForm} {...this.props} />\n          <Poll\n            poll={this.props.poll}\n            thread={this.props.thread}\n            user={this.props.user}\n          />\n          <Participants\n            participants={this.props.participants}\n            thread={this.props.thread}\n            user={this.props.user}\n          />\n          <PostsList {...this.props} />\n          <ToolbarBottom openReplyForm={this.openReplyForm} {...this.props} />\n        </div>\n      </div>\n    )\n  }\n}\n","import { connect } from \"react-redux\"\nimport Route from \"misago/components/thread/route\"\nimport misago from \"misago/index\"\n\nexport function select(store) {\n  return {\n    participants: store.participants,\n    poll: store.poll,\n    posts: store.posts,\n    thread: store.thread,\n    tick: store.tick.tick,\n    user: store.auth.user\n  }\n}\n\nexport function paths() {\n  const thread = misago.get(\"THREAD\")\n  const basePath = thread.url.index.replace(\n    thread.slug + \"-\" + thread.pk,\n    \":slug\"\n  )\n\n  return [\n    {\n      path: basePath,\n      component: connect(select)(Route)\n    },\n    {\n      path: basePath + \":page/\",\n      component: connect(select)(Route)\n    }\n  ]\n}\n","import { paths } from \"misago/components/thread/root\"\nimport misago from \"misago/index\"\nimport mount from \"misago/utils/routed-component\"\n\nexport default function initializer(context) {\n  if (context.has(\"THREAD\") && context.has(\"POSTS\")) {\n    mount({\n      paths: paths()\n    })\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:thread\",\n  initializer: initializer,\n  after: \"store\"\n})\n","export function compareLastPostAge(a, b) {\n  if (a.last_post > b.last_post) {\n    return -1\n  } else if (a.last_post < b.last_post) {\n    return 1\n  } else {\n    return 0\n  }\n}\n\nexport function compareGlobalWeight(a, b) {\n  if (a.weight === 2 && a.weight > b.weight) {\n    return -1\n  } else if (b.weight === 2 && a.weight < b.weight) {\n    return 1\n  } else {\n    return compareLastPostAge(a, b)\n  }\n}\n\nexport function compareWeight(a, b) {\n  if (a.weight > b.weight) {\n    return -1\n  } else if (a.weight < b.weight) {\n    return 1\n  } else {\n    return compareLastPostAge(a, b)\n  }\n}\n","import React from \"react\"\nimport { Link } from \"react-router\"\n\nexport class Subcategory extends React.Component {\n  getUrl() {\n    if (this.props.listPath) {\n      return this.props.category.url.index + this.props.listPath\n    } else {\n      return this.props.category.url.index\n    }\n  }\n\n  render() {\n    return (\n      <li>\n        <Link to={this.getUrl()} className=\"btn btn-link\">\n          {this.props.category.name}\n        </Link>\n      </li>\n    )\n  }\n}\n\nexport default class extends React.Component {\n  render() {\n    return (\n      <div className=\"dropdown category-picker\">\n        <button\n          type=\"button\"\n          className=\"btn btn-default btn-outline dropdown-toggle btn-block\"\n          data-toggle=\"dropdown\"\n          aria-haspopup=\"true\"\n          aria-expanded=\"false\"\n        >\n          <span className=\"material-icon\">label_outline</span>\n          <span className=\"hidden-xs\">{gettext(\"Category\")}</span>\n        </button>\n        <ul className=\"dropdown-menu stick-to-bottom categories-menu\">\n          {this.props.choices.map(id => {\n            if (this.props.categories[id]) {\n              return (\n                <Subcategory\n                  category={this.props.categories[id]}\n                  listPath={this.props.list.path}\n                  key={id}\n                />\n              )\n            } else {\n              return null\n            }\n          })}\n        </ul>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  render() {\n    return (\n      <div className=\"modal-dialog\" role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              aria-label={gettext(\"Close\")}\n              className=\"close\"\n              data-dismiss=\"modal\"\n              type=\"button\"\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Threads moderation\")}</h4>\n          </div>\n          <div className=\"modal-body\">\n            <p className=\"lead\">\n              {gettext(\"One or more threads could not be deleted:\")}\n            </p>\n\n            <ul className=\"list-unstyled list-errored-items\">\n              {this.props.errors.map(item => {\n                return (\n                  <ThreadErrors\n                    errors={item.errors}\n                    key={item.thread.id}\n                    thread={item.thread}\n                  />\n                )\n              })}\n            </ul>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport function ThreadErrors({ errors, thread }) {\n  return (\n    <li>\n      <h5>{thread.title}</h5>\n      {errors.map((message, i) => {\n        return <p>{message}</p>\n      })}\n    </li>\n  )\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport CategorySelect from \"misago/components/category-select\"\nimport Select from \"misago/components/select\"\nimport misago from \"misago/index\"\nimport { filterThreads } from \"misago/reducers/threads\"\nimport * as select from \"misago/reducers/selection\"\nimport ErrorsModal from \"misago/components/threads/moderation/errors-list\"\nimport MergeConflict from \"misago/components/merge-conflict\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport * as validators from \"misago/utils/validators\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n\n      title: \"\",\n      category: null,\n      weight: 0,\n      is_hidden: 0,\n      is_closed: false,\n\n      validators: {\n        title: [validators.required()]\n      },\n\n      errors: {}\n    }\n\n    this.acl = {}\n    for (const i in props.user.acl.categories) {\n      if (!props.user.acl.categories.hasOwnProperty(i)) {\n        continue\n      }\n\n      const acl = props.user.acl.categories[i]\n      this.acl[acl.id] = acl\n    }\n\n    this.categoryChoices = []\n    props.categories.forEach(category => {\n      if (category.level > 0) {\n        const acl = this.acl[category.id]\n        const disabled =\n          !acl.can_start_threads ||\n          (category.is_closed && !acl.can_close_threads)\n\n        this.categoryChoices.push({\n          value: category.id,\n          disabled: disabled,\n          level: category.level - 1,\n          label: category.name\n        })\n\n        if (!disabled && !this.state.category) {\n          this.state.category = category.id\n        }\n      }\n    })\n\n    this.isHiddenChoices = [\n      {\n        value: 0,\n        icon: \"visibility\",\n        label: gettext(\"No\")\n      },\n      {\n        value: 1,\n        icon: \"visibility_off\",\n        label: gettext(\"Yes\")\n      }\n    ]\n\n    this.isClosedChoices = [\n      {\n        value: false,\n        icon: \"lock_outline\",\n        label: gettext(\"No\")\n      },\n      {\n        value: true,\n        icon: \"lock\",\n        label: gettext(\"Yes\")\n      }\n    ]\n  }\n\n  clean() {\n    if (this.isValid()) {\n      return true\n    } else {\n      snackbar.error(gettext(\"Form contains errors.\"))\n      this.setState({\n        errors: this.validate()\n      })\n      return false\n    }\n  }\n\n  send() {\n    return ajax.post(misago.get(\"MERGE_THREADS_API\"), this.getFormdata())\n  }\n\n  getFormdata = () => {\n    return {\n      threads: this.props.threads.map(thread => thread.id),\n      title: this.state.title,\n      category: this.state.category,\n      weight: this.state.weight,\n      is_hidden: this.state.is_hidden,\n      is_closed: this.state.is_closed\n    }\n  }\n\n  handleSuccess = apiResponse => {\n    // unfreeze and remove merged threads\n    this.props.threads.forEach(thread => {\n      this.props.freezeThread(thread.id)\n      this.props.deleteThread(thread)\n    })\n\n    // deselect all threads\n    store.dispatch(select.none())\n\n    // append merged thread, filter threads\n    this.props.addThreads([apiResponse])\n    store.dispatch(\n      filterThreads(this.props.route.category, this.props.categoriesMap)\n    )\n\n    // hide modal\n    modal.hide()\n  }\n\n  handleError = rejection => {\n    if (rejection.status === 400) {\n      if (rejection.best_answers || rejection.polls) {\n        modal.show(\n          <MergeConflict\n            api={misago.get(\"MERGE_THREADS_API\")}\n            bestAnswers={rejection.best_answers}\n            data={this.getFormdata()}\n            polls={rejection.polls}\n            onError={this.handleError}\n            onSuccess={this.handleSuccess}\n          />\n        )\n      } else {\n        this.setState({\n          errors: Object.assign({}, this.state.errors, rejection)\n        })\n        snackbar.error(gettext(\"Form contains errors.\"))\n      }\n    } else if (rejection.status === 403 && Array.isArray(rejection)) {\n      modal.show(<ErrorsModal errors={rejection} />)\n    } else if (rejection.best_answer) {\n      snackbar.error(rejection.best_answer[0])\n    } else if (rejection.poll) {\n      snackbar.error(rejection.poll[0])\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  onCategoryChange = ev => {\n    const categoryId = ev.target.value\n    const newState = {\n      category: categoryId\n    }\n\n    if (this.acl[categoryId].can_pin_threads < newState.weight) {\n      newState.weight = 0\n    }\n\n    if (!this.acl[categoryId].can_hide_threads) {\n      newState.is_hidden = 0\n    }\n\n    if (!this.acl[categoryId].can_close_threads) {\n      newState.is_closed = false\n    }\n\n    this.setState(newState)\n  }\n\n  getWeightChoices() {\n    const choices = [\n      {\n        value: 0,\n        icon: \"remove\",\n        label: gettext(\"Not pinned\")\n      },\n      {\n        value: 1,\n        icon: \"bookmark_border\",\n        label: gettext(\"Pinned locally\")\n      }\n    ]\n\n    if (this.acl[this.state.category].can_pin_threads == 2) {\n      choices.push({\n        value: 2,\n        icon: \"bookmark\",\n        label: gettext(\"Pinned globally\")\n      })\n    }\n\n    return choices\n  }\n\n  renderWeightField() {\n    if (this.acl[this.state.category].can_pin_threads) {\n      return (\n        <FormGroup label={gettext(\"Thread weight\")} for=\"id_weight\">\n          <Select\n            id=\"id_weight\"\n            onChange={this.bindInput(\"weight\")}\n            value={this.state.weight}\n            choices={this.getWeightChoices()}\n          />\n        </FormGroup>\n      )\n    } else {\n      return null\n    }\n  }\n\n  renderHiddenField() {\n    if (this.acl[this.state.category].can_hide_threads) {\n      return (\n        <FormGroup label={gettext(\"Hide thread\")} for=\"id_is_hidden\">\n          <Select\n            id=\"id_is_closed\"\n            onChange={this.bindInput(\"is_hidden\")}\n            value={this.state.is_hidden}\n            choices={this.isHiddenChoices}\n          />\n        </FormGroup>\n      )\n    } else {\n      return null\n    }\n  }\n\n  renderClosedField() {\n    if (this.acl[this.state.category].can_close_threads) {\n      return (\n        <FormGroup label={gettext(\"Close thread\")} for=\"id_is_closed\">\n          <Select\n            id=\"id_is_closed\"\n            onChange={this.bindInput(\"is_closed\")}\n            value={this.state.is_closed}\n            choices={this.isClosedChoices}\n          />\n        </FormGroup>\n      )\n    } else {\n      return null\n    }\n  }\n\n  renderForm() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"modal-body\">\n          <FormGroup\n            label={gettext(\"Thread title\")}\n            for=\"id_title\"\n            validation={this.state.errors.title}\n          >\n            <input\n              id=\"id_title\"\n              className=\"form-control\"\n              type=\"text\"\n              onChange={this.bindInput(\"title\")}\n              value={this.state.title}\n            />\n          </FormGroup>\n          <div className=\"clearfix\" />\n\n          <FormGroup\n            label={gettext(\"Category\")}\n            for=\"id_category\"\n            validation={this.state.errors.category}\n          >\n            <CategorySelect\n              id=\"id_category\"\n              onChange={this.onCategoryChange}\n              value={this.state.category}\n              choices={this.categoryChoices}\n            />\n          </FormGroup>\n          <div className=\"clearfix\" />\n\n          {this.renderWeightField()}\n          {this.renderHiddenField()}\n          {this.renderClosedField()}\n        </div>\n        <div className=\"modal-footer\">\n          <button\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n            disabled={this.state.isLoading}\n            type=\"button\"\n          >\n            {gettext(\"Cancel\")}\n          </button>\n          <Button className=\"btn-primary\" loading={this.state.isLoading}>\n            {gettext(\"Merge threads\")}\n          </Button>\n        </div>\n      </form>\n    )\n  }\n\n  renderCantMergeMessage() {\n    return (\n      <div className=\"modal-body\">\n        <div className=\"message-icon\">\n          <span className=\"material-icon\">info_outline</span>\n        </div>\n        <div className=\"message-body\">\n          <p className=\"lead\">\n            {gettext(\n              \"You can't move threads because there are no categories you are allowed to move them to.\"\n            )}\n          </p>\n          <p>\n            {gettext(\n              \"You need permission to start threads in category to be able to merge threads to it.\"\n            )}\n          </p>\n          <button\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            {gettext(\"Ok\")}\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  getClassName() {\n    if (!this.state.category) {\n      return \"modal-dialog modal-message\"\n    } else {\n      return \"modal-dialog\"\n    }\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()} role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"modal\"\n              aria-label={gettext(\"Close\")}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Merge threads\")}</h4>\n          </div>\n          {this.state.category\n            ? this.renderForm()\n            : this.renderCantMergeMessage()}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport CategorySelect from \"misago/components/category-select\"\nimport * as select from \"misago/reducers/selection\"\nimport { filterThreads } from \"misago/reducers/threads\"\nimport modal from \"misago/services/modal\"\nimport store from \"misago/services/store\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      category: null\n    }\n\n    const acls = {}\n    for (const i in props.user.acl.categories) {\n      if (!props.user.acl.categories.hasOwnProperty(i)) {\n        continue\n      }\n\n      const acl = props.user.acl.categories[i]\n      acls[acl.id] = acl\n    }\n\n    this.categoryChoices = []\n    props.categories.forEach(category => {\n      if (category.level > 0) {\n        const acl = acls[category.id]\n        const disabled =\n          !acl.can_start_threads ||\n          (category.is_closed && !acl.can_close_threads)\n\n        this.categoryChoices.push({\n          value: category.id,\n          disabled: disabled,\n          level: category.level - 1,\n          label: category.name\n        })\n\n        if (!disabled && !this.state.category) {\n          this.state.category = category.id\n        }\n      }\n    })\n  }\n\n  handleSubmit = event => {\n    // we don't reload page on submissions\n    event.preventDefault()\n\n    modal.hide()\n\n    const onSuccess = () => {\n      store.dispatch(\n        filterThreads(this.props.route.category, this.props.categoriesMap)\n      )\n\n      // deselect threads moved outside of visible scope\n      const storeState = store.getState()\n      const leftThreads = storeState.threads.map(thread => thread.id)\n      store.dispatch(\n        select.all(\n          storeState.selection.filter(thread => {\n            return leftThreads.indexOf(thread) !== -1\n          })\n        )\n      )\n    }\n\n    this.props.callApi(\n      [\n        { op: \"replace\", path: \"category\", value: this.state.category },\n        { op: \"replace\", path: \"flatten-categories\", value: null },\n        { op: \"add\", path: \"acl\", value: true }\n      ],\n      gettext(\"Selected threads were moved.\"),\n      onSuccess\n    )\n  }\n\n  getClassName() {\n    if (!this.state.category) {\n      return \"modal-dialog modal-message\"\n    } else {\n      return \"modal-dialog\"\n    }\n  }\n\n  renderForm() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"modal-body\">\n          <FormGroup label={gettext(\"New category\")} for=\"id_new_category\">\n            <CategorySelect\n              id=\"id_new_category\"\n              onChange={this.bindInput(\"category\")}\n              value={this.state.category}\n              choices={this.categoryChoices}\n            />\n          </FormGroup>\n        </div>\n        <div className=\"modal-footer\">\n          <button\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n            disabled={this.state.isLoading}\n            type=\"button\"\n          >\n            {gettext(\"Cancel\")}\n          </button>\n          <button className=\"btn btn-primary\">{gettext(\"Move threads\")}</button>\n        </div>\n      </form>\n    )\n  }\n\n  renderCantMoveMessage() {\n    return (\n      <div className=\"modal-body\">\n        <div className=\"message-icon\">\n          <span className=\"material-icon\">info_outline</span>\n        </div>\n        <div className=\"message-body\">\n          <p className=\"lead\">\n            {gettext(\n              \"You can't move threads because there are no categories you are allowed to move them to.\"\n            )}\n          </p>\n          <p>\n            {gettext(\n              \"You need permission to start threads in category to be able to move threads to it.\"\n            )}\n          </p>\n          <button\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            {gettext(\"Ok\")}\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()} role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"modal\"\n              aria-label={gettext(\"Close\")}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Move threads\")}</h4>\n          </div>\n          {this.state.category\n            ? this.renderForm()\n            : this.renderCantMoveMessage()}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport ErrorsModal from \"misago/components/threads/moderation/errors-list\"\nimport MergeThreads from \"misago/components/threads/moderation/merge\"\nimport MoveThreads from \"misago/components/threads/moderation/move\"\nimport * as select from \"misago/reducers/selection\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport Countdown from \"misago/utils/countdown\"\n\nexport default class extends React.Component {\n  callApi = (ops, successMessage, onSuccess = null) => {\n    // freeze threads\n    this.props.threads.forEach(thread => {\n      this.props.freezeThread(thread.id)\n    })\n\n    // list ids\n    const ids = this.props.threads.map(thread => {\n      return thread.id\n    })\n\n    // always return current acl\n    ops.push({ op: \"add\", path: \"acl\", value: true })\n\n    ajax.patch(this.props.api, { ids, ops }).then(\n      data => {\n        // unfreeze\n        this.props.threads.forEach(thread => {\n          this.props.freezeThread(thread.id)\n        })\n\n        // update threads\n        data.forEach(thread => {\n          this.props.updateThread(thread)\n        })\n\n        // show success message and call callback\n        snackbar.success(successMessage)\n        if (onSuccess) {\n          onSuccess()\n        }\n      },\n      rejection => {\n        // unfreeze\n        this.props.threads.forEach(thread => {\n          this.props.freezeThread(thread.id)\n        })\n\n        // escape on non-400 error\n        if (rejection.status !== 400) {\n          return snackbar.apiError(rejection)\n        }\n\n        // build errors list\n        let errors = []\n        let threadsMap = {}\n\n        this.props.threads.forEach(thread => {\n          threadsMap[thread.id] = thread\n        })\n\n        rejection.forEach(({ id, detail }) => {\n          if (typeof threadsMap[id] !== \"undefined\") {\n            errors.push({\n              errors: detail,\n              thread: threadsMap[id]\n            })\n          }\n        })\n\n        modal.show(<ErrorsModal errors={errors} />)\n      }\n    )\n  }\n\n  pinGlobally = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"weight\",\n          value: 2\n        }\n      ],\n      gettext(\"Selected threads were pinned globally.\")\n    )\n  }\n\n  pinLocally = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"weight\",\n          value: 1\n        }\n      ],\n      gettext(\"Selected threads were pinned locally.\")\n    )\n  }\n\n  unpin = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"weight\",\n          value: 0\n        }\n      ],\n      gettext(\"Selected threads were unpinned.\")\n    )\n  }\n\n  approve = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-unapproved\",\n          value: false\n        }\n      ],\n      gettext(\"Selected threads were approved.\")\n    )\n  }\n\n  open = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-closed\",\n          value: false\n        }\n      ],\n      gettext(\"Selected threads were opened.\")\n    )\n  }\n\n  close = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-closed\",\n          value: true\n        }\n      ],\n      gettext(\"Selected threads were closed.\")\n    )\n  }\n\n  unhide = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-hidden\",\n          value: false\n        }\n      ],\n      gettext(\"Selected threads were unhidden.\")\n    )\n  }\n\n  hide = () => {\n    this.callApi(\n      [\n        {\n          op: \"replace\",\n          path: \"is-hidden\",\n          value: true\n        }\n      ],\n      gettext(\"Selected threads were hidden.\")\n    )\n  }\n\n  move = () => {\n    modal.show(\n      <MoveThreads\n        callApi={this.callApi}\n        categories={this.props.categories}\n        categoriesMap={this.props.categoriesMap}\n        route={this.props.route}\n        user={this.props.user}\n      />\n    )\n  }\n\n  merge = () => {\n    const errors = []\n    this.props.threads.forEach(thread => {\n      if (!thread.acl.can_merge) {\n        errors.append({\n          id: thread.id,\n          title: thread.title,\n          errors: [\n            gettext(\n              \"You don't have permission to merge this thread with others.\"\n            )\n          ]\n        })\n      }\n    })\n\n    if (this.props.threads.length < 2) {\n      snackbar.info(\n        gettext(\"You have to select at least two threads to merge.\")\n      )\n    } else if (errors.length) {\n      modal.show(<ErrorsModal errors={errors} />)\n      return\n    } else {\n      modal.show(<MergeThreads {...this.props} />)\n    }\n  }\n\n  delete = () => {\n    if (\n      !window.confirm(gettext(\"Are you sure you want to delete selected threads?\"))\n    ) {\n      return\n    }\n\n    this.props.threads.map(thread => {\n      this.props.freezeThread(thread.id)\n    })\n\n    const ids = this.props.threads.map(thread => {\n      return thread.id\n    })\n\n    ajax.delete(this.props.api, ids).then(\n      () => {\n        this.props.threads.map(thread => {\n          this.props.freezeThread(thread.id)\n          this.props.deleteThread(thread)\n        })\n\n        snackbar.success(gettext(\"Selected threads were deleted.\"))\n      },\n      rejection => {\n        if (rejection.status === 400) {\n          const failedThreads = rejection.map(thread => {\n            return thread.id\n          })\n\n          this.props.threads.map(thread => {\n            this.props.freezeThread(thread.id)\n            if (failedThreads.indexOf(thread.id) === -1) {\n              this.props.deleteThread(thread)\n            }\n          })\n\n          modal.show(<ErrorsModal errors={rejection} />)\n        } else {\n          snackbar.apiError(rejection)\n        }\n      }\n    )\n  }\n\n  getPinGloballyButton() {\n    if (!this.props.moderation.can_pin_globally) return null\n\n    return (\n      <li>\n        <button\n          className=\"btn btn-link\"\n          onClick={this.pinGlobally}\n          type=\"button\"\n        >\n          <span className=\"material-icon\">bookmark</span>\n          {gettext(\"Pin threads globally\")}\n        </button>\n      </li>\n    )\n  }\n\n  getPinLocallyButton() {\n    if (!this.props.moderation.can_pin) return null\n\n    return (\n      <li>\n        <button\n          className=\"btn btn-link\"\n          onClick={this.pinLocally}\n          type=\"button\"\n        >\n          <span className=\"material-icon\">bookmark_border</span>\n          {gettext(\"Pin threads locally\")}\n        </button>\n      </li>\n    )\n  }\n\n  getUnpinButton() {\n    if (!this.props.moderation.can_pin) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.unpin} type=\"button\">\n          <span className=\"material-icon\">panorama_fish_eye</span>\n          {gettext(\"Unpin threads\")}\n        </button>\n      </li>\n    )\n  }\n\n  getMoveButton() {\n    if (!this.props.moderation.can_move) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.move} type=\"button\">\n          <span className=\"material-icon\">arrow_forward</span>\n          {gettext(\"Move threads\")}\n        </button>\n      </li>\n    )\n  }\n\n  getMergeButton() {\n    if (!this.props.moderation.can_merge) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.merge} type=\"button\">\n          <span className=\"material-icon\">call_merge</span>\n          {gettext(\"Merge threads\")}\n        </button>\n      </li>\n    )\n  }\n\n  getApproveButton() {\n    if (!this.props.moderation.can_approve) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.approve} type=\"button\">\n          <span className=\"material-icon\">done</span>\n          {gettext(\"Approve threads\")}\n        </button>\n      </li>\n    )\n  }\n\n  getOpenButton() {\n    if (!this.props.moderation.can_close) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.open} type=\"button\">\n          <span className=\"material-icon\">lock_open</span>\n          {gettext(\"Open threads\")}\n        </button>\n      </li>\n    )\n  }\n\n  getCloseButton() {\n    if (!this.props.moderation.can_close) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.close} type=\"button\">\n          <span className=\"material-icon\">lock_outline</span>\n          {gettext(\"Close threads\")}\n        </button>\n      </li>\n    )\n  }\n\n  getUnhideButton() {\n    if (!this.props.moderation.can_unhide) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.unhide} type=\"button\">\n          <span className=\"material-icon\">visibility</span>\n          {gettext(\"Unhide threads\")}\n        </button>\n      </li>\n    )\n  }\n\n  getHideButton() {\n    if (!this.props.moderation.can_hide) return null\n\n    return (\n      <li>\n        <button onClick={this.hide} type=\"button\" className=\"btn btn-link\">\n          <span className=\"material-icon\">visibility_off</span>\n          {gettext(\"Hide threads\")}\n        </button>\n      </li>\n    )\n  }\n\n  getDeleteButton() {\n    if (!this.props.moderation.can_delete) return null\n\n    return (\n      <li>\n        <button className=\"btn btn-link\" onClick={this.delete} type=\"button\">\n          <span className=\"material-icon\">clear</span>\n          {gettext(\"Delete threads\")}\n        </button>\n      </li>\n    )\n  }\n\n  render() {\n    return (\n      <ul className={this.props.className}>\n        {this.getPinGloballyButton()}\n        {this.getPinLocallyButton()}\n        {this.getUnpinButton()}\n        {this.getMoveButton()}\n        {this.getMergeButton()}\n        {this.getApproveButton()}\n        {this.getOpenButton()}\n        {this.getCloseButton()}\n        {this.getUnhideButton()}\n        {this.getHideButton()}\n        {this.getDeleteButton()}\n      </ul>\n    )\n  }\n}\n","import React from \"react\"\nimport * as select from \"misago/reducers/selection\"\nimport store from \"misago/services/store\"\n\nexport default class extends React.Component {\n  selectAll = () => {\n    store.dispatch(\n      select.all(\n        this.props.threads.map(function(thread) {\n          return thread.id\n        })\n      )\n    )\n  }\n\n  selectNone = () => {\n    store.dispatch(select.none())\n  }\n\n  render() {\n    return (\n      <ul className={this.props.className}>\n        <li>\n          <button\n            className=\"btn btn-link\"\n            type=\"button\"\n            onClick={this.selectAll}\n          >\n            <span className=\"material-icon\">check_box</span>\n            {gettext(\"Select all\")}\n          </button>\n        </li>\n        <li>\n          <button\n            className=\"btn btn-link\"\n            type=\"button\"\n            onClick={this.selectNone}\n          >\n            <span className=\"material-icon\">check_box_outline_blank</span>\n            {gettext(\"Select none\")}\n          </button>\n        </li>\n      </ul>\n    )\n  }\n}\n","import React from \"react\"\nimport CategoryPicker from \"misago/components/threads/category-picker\"\nimport ModerationControls from \"misago/components/threads/moderation/controls\"\nimport SelectionControls from \"misago/components/threads/moderation/selection\"\n\nexport default class extends React.Component {\n  getCategoryPicker() {\n    if (!this.props.subcategories.length) return null\n\n    return (\n      <CategoryPicker\n        categories={this.props.categoriesMap}\n        choices={this.props.subcategories}\n        list={this.props.list}\n      />\n    )\n  }\n\n  showModerationOptions() {\n    return this.props.user.id && this.props.moderation.allow\n  }\n\n  getSelectedThreads() {\n    return this.props.threads.filter(thread => {\n      return this.props.selection.indexOf(thread.id) >= 0\n    })\n  }\n\n  getModerationButton() {\n    if (!this.showModerationOptions()) return null\n\n    return (\n      <div className=\"col-xs-6 col-sm-3 col-md-2\">\n        <div className=\"btn-group btn-group-justified\">\n          <div className=\"btn-group dropdown\">\n            <button\n              type=\"button\"\n              className=\"btn btn-default btn-outline dropdown-toggle\"\n              data-toggle=\"dropdown\"\n              aria-haspopup=\"true\"\n              aria-expanded=\"false\"\n              disabled={this.props.disabled || !this.props.selection.length}\n            >\n              <span className=\"material-icon\">settings</span>\n              {gettext(\"Options\")}\n            </button>\n\n            <ModerationControls\n              addThreads={this.props.addThreads}\n              api={this.props.api}\n              categories={this.props.categories}\n              categoriesMap={this.props.categoriesMap}\n              className=\"dropdown-menu dropdown-menu-right stick-to-bottom\"\n              deleteThread={this.props.deleteThread}\n              freezeThread={this.props.freezeThread}\n              moderation={this.props.moderation}\n              route={this.props.route}\n              threads={this.getSelectedThreads()}\n              updateThread={this.props.updateThread}\n              user={this.props.user}\n            />\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  getSelectionButton() {\n    if (!this.showModerationOptions()) return null\n\n    return (\n      <div className=\"col-xs-3 col-sm-2 col-md-1\">\n        <div className=\"btn-group btn-group-justified\">\n          <div className=\"btn-group dropdown\">\n            <button\n              type=\"button\"\n              className=\"btn btn-default btn-outline btn-icon dropdown-toggle\"\n              data-toggle=\"dropdown\"\n              aria-haspopup=\"true\"\n              aria-expanded=\"false\"\n              disabled={this.props.disabled}\n            >\n              <span className=\"material-icon\">select_all</span>\n            </button>\n\n            <SelectionControls\n              className=\"dropdown-menu dropdown-menu-right stick-to-bottom\"\n              threads={this.props.threads}\n            />\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"row row-toolbar row-toolbar-bottom-margin\">\n        <div className=\"col-xs-3 col-sm-3 col-md-2 dropdown\">\n          {this.getCategoryPicker()}\n        </div>\n        <div className=\"hidden-xs col-sm-4 col-md-7\" />\n        {this.getModerationButton()}\n        {this.getSelectionButton()}\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport PageLead from \"misago/components/page-lead\"\nimport Toolbar from \"misago/components/threads/toolbar\"\n\nexport default class extends React.Component {\n  getCategoryDescription() {\n    if (this.props.pageLead) {\n      return (\n        <div className=\"category-description\">\n          <div className=\"page-lead\">\n            <p>{this.props.pageLead}</p>\n          </div>\n        </div>\n      )\n    } else if (this.props.route.category.description) {\n      return (\n        <div className=\"category-description\">\n          <PageLead copy={this.props.route.category.description.html} />\n        </div>\n      )\n    } else {\n      return null\n    }\n  }\n\n  getDisableToolbar() {\n    return (\n      !this.props.isLoaded || this.props.isBusy || this.props.busyThreads.length\n    )\n  }\n\n  getToolbar() {\n    const isVisible = this.props.subcategories.length || this.props.user.id\n\n    if (!isVisible) return null\n\n    return (\n      <Toolbar\n        subcategories={this.props.subcategories}\n        categories={this.props.route.categories}\n        categoriesMap={this.props.route.categoriesMap}\n        list={this.props.route.list}\n        threads={this.props.threads}\n        moderation={this.props.moderation}\n        selection={this.props.selection}\n        selectAllThreads={this.props.selectAllThreads}\n        selectNoneThreads={this.props.selectNoneThreads}\n        addThreads={this.props.addThreads}\n        freezeThread={this.props.freezeThread}\n        deleteThread={this.props.deleteThread}\n        updateThread={this.props.updateThread}\n        api={this.props.api}\n        route={this.props.route}\n        disabled={this.getDisableToolbar()}\n        user={this.props.user}\n      />\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        {this.getCategoryDescription()}\n        {this.getToolbar()}\n\n        {this.props.children}\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport { Link } from \"react-router\"\nimport Li from \"misago/components/li\"\n\nexport default function({ baseUrl, list, lists }) {\n  if (lists.length < 2) return null\n\n  return (\n    <div className=\"page-tabs\">\n      <div className=\"container\">\n        <ul className=\"nav nav-pills\">\n          {lists.map(item => {\n            return (\n              <Li\n                isControlled={true}\n                isActive={item.path === list.path}\n                key={baseUrl + item.path}\n              >\n                <Link to={baseUrl + item.path}>{item.name}</Link>\n              </Li>\n            )\n          })}\n        </ul>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport { Link } from \"react-router\"\nimport Button from \"misago/components/button\"\nimport DropdownToggle from \"misago/components/dropdown-toggle\"\nimport Nav from \"misago/components/threads/nav\"\nimport ajax from \"misago/services/ajax\"\nimport posting from \"misago/services/posting\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport misago from \"misago\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isBusy: false\n    }\n  }\n\n  startThread = () => {\n    posting.open(\n      this.props.startThread || {\n        mode: \"START\",\n\n        config: misago.get(\"THREAD_EDITOR_API\"),\n        submit: misago.get(\"THREADS_API\"),\n\n        category: this.props.route.category.id\n      }\n    )\n  }\n\n  hasGoBackButton() {\n    return !!this.props.route.category.parent\n  }\n\n  getGoBackButton() {\n    if (!this.props.route.category.parent) return null\n\n    const parent = this.props.categories[this.props.route.category.parent]\n\n    return (\n      <div className=\"hidden-xs col-sm-2 col-lg-1\">\n        <Link\n          className=\"btn btn-default btn-icon btn-aligned btn-go-back btn-block btn-outline\"\n          to={parent.url.index + this.props.route.list.path}\n        >\n          <span className=\"material-icon\">keyboard_arrow_left</span>\n        </Link>\n      </div>\n    )\n  }\n\n  getStartThreadButton() {\n    if (!this.props.user.id) return null\n\n    return (\n      <Button\n        className=\"btn-primary btn-block btn-outline\"\n        onClick={this.startThread}\n        disabled={this.props.disabled}\n      >\n        <span className=\"material-icon\">chat</span>\n        {gettext(\"Start thread\")}\n      </Button>\n    )\n  }\n\n  render() {\n    let headerClassName = \"col-xs-12\"\n    if (this.hasGoBackButton()) {\n      headerClassName += \" col-sm-10 col-lg-11 sm-align-row-buttons\"\n    }\n\n    const isAuthenticated = !!this.props.user.id\n\n    return (\n      <div className=\"page-header-bg\">\n        <div className=\"page-header\">\n          <div className=\"container\">\n            <div className=\"row\">\n              <div\n                className={isAuthenticated ? \"col-sm-9 col-md-10\" : \"col-xs-12\"}\n              >\n                <div className=\"row\">\n                  {this.getGoBackButton()}\n                  <div className={headerClassName}>\n                    <ParentCategory\n                      categories={this.props.categories}\n                      category={this.props.route.category.parent}\n                    />\n                    <h1>{this.props.title}</h1>\n                  </div>\n                </div>\n              </div>\n              {isAuthenticated && (\n                <div className=\"col-sm-3 col-md-2 xs-margin-top\">\n                  {this.getStartThreadButton()}\n                </div>\n              )}\n            </div>\n          </div>\n\n          <Nav\n            baseUrl={this.props.route.category.url.index}\n            list={this.props.route.list}\n            lists={this.props.route.lists}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport function ParentCategory({ categories, category }) {\n  if (!category) return null\n\n  const parent = categories[category]\n\n  return (\n    <Link className=\"go-back-sm visible-xs-block\" to={parent.url.index}>\n      <span className=\"material-icon\">chevron_left</span>\n      {parent.parent ? parent.name : gettext(\"Threads\")}\n    </Link>\n  )\n}\n","import misago from \"misago/index\"\n\nexport function getPageTitle(route) {\n  if (route.category.level) {\n    if (route.list.path) {\n      return {\n        title: route.list.longName,\n        parent: route.category.name\n      }\n    } else {\n      return {\n        title: route.category.name\n      }\n    }\n  } else if (misago.get(\"THREADS_ON_INDEX\")) {\n    if (route.list.path) {\n      return {\n        title: route.list.longName\n      }\n    } else {\n      return null\n    }\n  } else {\n    if (route.list.path) {\n      return {\n        title: route.list.longName,\n        parent: gettext(\"Threads\")\n      }\n    } else {\n      return {\n        title: gettext(\"Threads\")\n      }\n    }\n  }\n}\n\nexport function getTitle(route) {\n  if (route.category.level) {\n    return route.category.name\n  } else if (misago.get(\"THREADS_ON_INDEX\")) {\n    if (misago.get(\"SETTINGS\").index_header) {\n      return misago.get(\"SETTINGS\").index_header\n    } else {\n      return misago.get(\"SETTINGS\").forum_name\n    }\n  } else {\n    return gettext(\"Threads\")\n  }\n}\n\nexport function isThreadChanged(current, fromDb) {\n  return (\n    [\n      current.title === fromDb.title,\n      current.weight === fromDb.weight,\n      current.category === fromDb.category,\n      current.last_post === fromDb.last_post,\n      current.last_poster_name === fromDb.last_poster_name\n    ].indexOf(false) >= 0\n  )\n}\n\nexport function diffThreads(current, fromDb) {\n  let currentMap = {}\n  current.forEach(function(thread) {\n    currentMap[thread.id] = thread\n  })\n\n  return fromDb.filter(function(thread) {\n    if (currentMap[thread.id]) {\n      return isThreadChanged(currentMap[thread.id], thread)\n    } else {\n      return true\n    }\n  })\n}\n\nexport function getModerationActions(threads) {\n  let moderation = {\n    allow: false,\n\n    can_approve: 0,\n    can_close: 0,\n    can_delete: 0,\n    can_hide: 0,\n    can_merge: 0,\n    can_move: 0,\n    can_pin: 0,\n    can_pin_globally: 0,\n    can_unhide: 0\n  }\n\n  threads.forEach(function(thread) {\n    if (\n      thread.is_unapproved &&\n      thread.acl.can_approve > moderation.can_approve\n    ) {\n      moderation.can_approve = thread.acl.can_approve\n    }\n\n    if (thread.acl.can_close > moderation.can_close) {\n      moderation.can_close = thread.acl.can_close\n    }\n\n    if (thread.acl.can_delete > moderation.can_delete) {\n      moderation.can_delete = thread.acl.can_delete\n    }\n\n    if (thread.acl.can_hide > moderation.can_hide) {\n      moderation.can_hide = thread.acl.can_hide\n    }\n\n    if (thread.acl.can_merge > moderation.can_merge) {\n      moderation.can_merge = thread.acl.can_merge\n    }\n\n    if (thread.acl.can_move > moderation.can_move) {\n      moderation.can_move = thread.acl.can_move\n    }\n\n    if (thread.acl.can_pin > moderation.can_pin) {\n      moderation.can_pin = thread.acl.can_pin\n    }\n\n    if (thread.acl.can_pin_globally > moderation.can_pin_globally) {\n      moderation.can_pin_globally = thread.acl.can_pin_globally\n    }\n\n    if (thread.is_hidden && thread.acl.can_unhide > moderation.can_unhide) {\n      moderation.can_unhide = thread.acl.can_unhide\n    }\n\n    moderation.allow =\n      moderation.can_approve ||\n      moderation.can_close ||\n      moderation.can_delete ||\n      moderation.can_hide ||\n      moderation.can_merge ||\n      moderation.can_move ||\n      moderation.can_pin ||\n      moderation.can_pin_globally ||\n      moderation.can_unhide\n  })\n\n  return moderation\n}\n","import React from \"react\"\n\nconst ThreadsListItemActivity = ({ thread }) => (\n  <a\n    href={thread.url.last_post}\n    className=\"threads-list-item-last-activity\"\n    title={interpolate(\n      gettext(\"Last activity: %(timestamp)s\"),\n      {\n        timestamp: thread.last_post_on.format(\"LLL\"),\n      },\n      true\n    )}\n  >\n    {thread.last_post_on.fromNow(true)}\n  </a>\n)\n\nexport default ThreadsListItemActivity","import React from \"react\"\n\nconst ThreadsListItemCategory = ({ category }) => (\n  <a\n    href={category.url.index}\n    className={getClassName(category)}\n    style={category.color ? {\"--label-color\": category.color} : null}\n    title={!!category.short_name ? category.name : null}\n  >\n    {category.short_name || category.name}\n  </a>\n)\n\nconst getClassName = (category) => {\n  let className = \"threads-list-item-category\"\n  className += \" threads-list-category-label\"\n\n  if (category.color) {\n    className += \" threads-list-category-label-color\"\n  }\n\n  return className\n}\n\nexport default ThreadsListItemCategory","import React from \"react\"\n\nconst ThreadsListItemFlags = ({ thread }) => (\n  <ul className=\"threads-list-item-flags\">\n    {thread.weight == 2 && (\n      <li\n        className=\"threads-list-item-flag-pinned-globally\"\n        title={gettext(\"Pinned globally\")}\n      >\n        <span className=\"material-icon\">star</span>\n      </li>\n    )}\n    {thread.weight == 1 && (\n      <li\n        className=\"threads-list-item-flag-pinned-locally\"\n        title={gettext(\"Pinned in category\")}\n      >\n        <span className=\"material-icon\">star_half</span>\n      </li>\n    )}\n    {thread.best_answer && (\n      <li\n        className=\"threads-list-item-flag-answered\"\n        title={gettext(\"Answered\")}\n      >\n        <span className=\"material-icon\">check_circle</span>\n      </li>\n    )}\n    {thread.has_poll && (\n      <li\n        className=\"threads-list-item-flag-poll\"\n        title={gettext(\"Poll\")}\n      >\n        <span className=\"material-icon\">poll</span>\n      </li>\n    )}\n    {(thread.is_unapproved || thread.has_unapproved_posts) && (\n      <li\n        className=\"threads-list-item-flag-unapproved\"\n        title={thread.is_unapproved ? gettext(\"Awaiting approval\") : gettext(\"Has unapproved posts\")}\n      >\n        <span className=\"material-icon\">visibility</span>\n      </li>\n    )}\n    {thread.is_closed && (\n      <li\n        className=\"threads-list-item-flag-closed\"\n        title={gettext(\"Closed\")}\n      >\n        <span className=\"material-icon\">lock</span>\n      </li>\n    )}\n    {thread.is_hidden && (\n      <li\n        className=\"threads-list-item-flag-hidden\"\n        title={gettext(\"Hidden\")}\n      >\n        <span className=\"material-icon\">visibility_off</span>\n      </li>\n    )}\n  </ul>\n)\n\nexport default ThreadsListItemFlags","import React from \"react\"\n\nconst ThreadsListItemIcon = ({ thread }) => {\n  let className = \"threads-list-icon\"\n  if (!thread.is_read) className += \" threads-list-icon-new\"\n\n  return (\n    <a\n      title={thread.is_read ? gettext(\"No new posts\") : gettext(\"New posts\")}\n      href={thread.is_read ? thread.url.last_post : thread.url.new_post}\n      className={className}\n    >\n      <span className=\"material-icon\">\n        {thread.is_read ? \"chat_bubble_outline\" : \"chat_bubble\"}\n      </span>\n    </a>\n  )\n}\n\nexport default ThreadsListItemIcon","import React from \"react\"\nimport Avatar from \"../avatar\"\n\nconst ThreadsListItemLastPoster = ({ thread }) => (\n  !!thread.last_poster ? (\n    <a\n      href={thread.url.last_poster}\n      className=\"threads-list-item-last-poster\"\n      title={interpolate(\n        gettext(\"Last post by: %(poster)s\"),\n        {poster: thread.last_poster.username},\n        true\n      )}\n    >\n      <Avatar size={32} user={thread.last_poster} />\n    </a>\n  )\n  : (\n    <span\n      className=\"threads-list-item-last-poster\"\n      title={interpolate(\n        gettext(\"Last post by: %(poster)s\"),\n        {poster: thread.last_poster_name},\n        true\n      )}\n    >\n      <Avatar size={32} />\n    </span>\n  )\n)\n\nexport default ThreadsListItemLastPoster","import React from \"react\"\n\nconst ThreadsListItemReplies = ({ thread }) => (\n  <span className=\"threads-list-item-replies\"\n    title={interpolate(\n      ngettext(\"%(replies)s reply\", \"%(replies)s replies\", thread.replies),\n      {replies: thread.replies},\n      true\n    )}\n  >\n    <span className=\"material-icon\">chat_bubble_outline</span>\n    {thread.replies > 980 ? Math.round(thread.replies / 1000) + \"K\" : thread.replies}\n  </span>\n)\n\nexport default ThreadsListItemReplies","import React from \"react\"\nimport ThreadsListItemActivity from \"./ThreadsListItemActivity\"\nimport ThreadsListItemCategory from \"./ThreadsListItemCategory\"\nimport ThreadsListItemFlags from \"./ThreadsListItemFlags\"\nimport ThreadsListItemIcon from \"./ThreadsListItemIcon\"\nimport ThreadsListItemLastPoster from \"./ThreadsListItemLastPoster\"\nimport ThreadsListItemReplies from \"./ThreadsListItemReplies\"\n\nconst ThreadsListItem = ({\n  activeCategory,\n  categories,\n  showOptions,\n  thread,\n  isBusy,\n  isSelected,\n}) => {\n  let category = null\n  if (activeCategory.id !== thread.category) {\n    category = categories[thread.category]\n  }\n  console.log(showOptions)\n  const hasFlags = (\n    thread.is_closed ||\n    thread.is_hidden ||\n    thread.is_unapproved ||\n    thread.weight > 0 ||\n    thread.best_answer ||\n    thread.has_poll ||\n    thread.has_unapproved_posts\n  )\n\n  return (\n    <li className=\"list-group-item threads-list-item\">\n      <div className=\"threads-list-item-col-icon\">\n        <ThreadsListItemIcon thread={thread} />\n      </div>\n      <div className=\"threads-list-item-col-title\">\n        <a\n          href={thread.is_read ? thread.url.index : thread.url.new_post}\n          className={\"threads-list-item-title\" + (!thread.is_read ? \" threads-list-item-title-new\" : \"\")}\n        >\n          {thread.title}\n        </a>\n      </div>\n      {hasFlags && (\n        <div className=\"threads-list-item-col-flags\">\n          <ThreadsListItemFlags thread={thread} />\n        </div>\n      )}\n      {!!category && (\n        <div className=\"threads-list-item-col-category\">\n          <ThreadsListItemCategory category={category} />\n        </div>\n      )}\n      <div className=\"threads-list-item-col-replies\">\n        <ThreadsListItemReplies thread={thread} />\n      </div>\n      <div className=\"threads-list-item-col-last-poster\">\n        <ThreadsListItemLastPoster thread={thread} />\n      </div>\n      <div className=\"threads-list-item-col-last-activity\">\n        <ThreadsListItemActivity thread={thread} />\n      </div>\n    </li>\n  )\n}\n\nexport default ThreadsListItem","import ThreadsList from \"./ThreadsList\";\n\nexport default ThreadsList;","import React from \"react\"\nimport ThreadsListItem from \"./ThreadsListItem\";\n\nconst ThreadsList = ({\n  category,\n  categories,\n  threads,\n  busyThreads,\n  isLoaded,\n  showOptions,\n  selection,\n}) => {\n  if (!isLoaded) {\n    return <div>LOADING THREADS</div>\n  }\n\n  console.log(selection)\n\n  return (\n    <div className=\"threads-list\">\n      <ul className=\"list-group\">\n        {threads.map(\n          thread => (\n            <ThreadsListItem\n              key={thread.id}\n              activeCategory={category}\n              categories={categories}\n              thread={thread}\n            />\n          )\n        )}\n      </ul>\n    </div>\n  )\n}\n\nexport default ThreadsList","import React from \"react\"\n\nexport default class extends React.Component {\n  render() {\n    if (this.props.list.type === \"all\") {\n      if (this.props.emptyMessage) {\n        return (\n          <li className=\"list-group-item empty-message\">\n            <p className=\"lead\">{this.props.emptyMessage}</p>\n            <p>{gettext(\"Why not start one yourself?\")}</p>\n          </li>\n        )\n      } else {\n        return (\n          <li className=\"list-group-item empty-message\">\n            <p className=\"lead\">\n              {this.props.category.special_role\n                ? gettext(\"There are no threads on this forum... yet!\")\n                : gettext(\"There are no threads in this category.\")}\n            </p>\n            <p>{gettext(\"Why not start one yourself?\")}</p>\n          </li>\n        )\n      }\n    } else {\n      return (\n        <li className=\"list-group-item empty-message\">\n          {gettext(\"No threads matching specified criteria were found.\")}\n        </li>\n      )\n    }\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport {\n  compareGlobalWeight,\n  compareWeight\n} from \"misago/components/threads/compare\"\nimport Container from \"misago/components/threads/container\"\nimport Header from \"misago/components/threads/header\"\nimport {\n  diffThreads,\n  getModerationActions,\n  getPageTitle,\n  getTitle\n} from \"misago/components/threads/utils\"\nimport ThreadsList from \"misago/components/ThreadsList\"\nimport ThreadsListEmpty from \"misago/components/threads/list-empty\"\nimport WithDropdown from \"misago/components/with-dropdown\"\nimport misago from \"misago/index\"\nimport * as select from \"misago/reducers/selection\"\nimport { append, deleteThread, hydrate, patch } from \"misago/reducers/threads\"\nimport ajax from \"misago/services/ajax\"\nimport polls from \"misago/services/polls\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\nimport title from \"misago/services/page-title\"\nimport * as sets from \"misago/utils/sets\"\n\nexport default class extends WithDropdown {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isMounted: true,\n\n      isLoaded: false,\n      isBusy: false,\n\n      diff: {\n        results: []\n      },\n\n      moderation: [],\n      busyThreads: [],\n\n      dropdown: false,\n      subcategories: [],\n      \n      next: 0,\n    }\n\n    let category = this.getCategory()\n\n    if (misago.has(\"THREADS\")) {\n      this.initWithPreloadedData(category, misago.get(\"THREADS\"))\n    } else {\n      this.initWithoutPreloadedData(category)\n    }\n  }\n\n  getCategory() {\n    if (!this.props.route.category.special_role) {\n      return this.props.route.category.id\n    } else {\n      return null\n    }\n  }\n\n  initWithPreloadedData(category, data) {\n    this.state = Object.assign(this.state, {\n      moderation: getModerationActions(data.results),\n      subcategories: data.subcategories,\n      next: data.next\n    })\n\n    this.startPolling(category)\n  }\n\n  initWithoutPreloadedData(category) {\n    this.loadThreads(category)\n  }\n\n  loadThreads(category, next = 0) {\n    ajax\n      .get(\n        this.props.options.api,\n        {\n          category: category,\n          list: this.props.route.list.type,\n          start: next || 0\n        },\n        \"threads\"\n      )\n      .then(\n        data => {\n          if (!this.state.isMounted) {\n            // user changed route before loading completion\n            return\n          }\n\n          if (next === 0) {\n            store.dispatch(hydrate(data.results))\n          } else {\n            store.dispatch(append(data.results, this.getSorting()))\n          }\n\n          this.setState({\n            isLoaded: true,\n            isBusy: false,\n\n            moderation: getModerationActions(store.getState().threads),\n\n            subcategories: data.subcategories,\n\n            next: data.next,\n          })\n\n          this.startPolling(category)\n        },\n        rejection => {\n          snackbar.apiError(rejection)\n        }\n      )\n  }\n\n  startPolling(category) {\n    polls.start({\n      poll: \"threads\",\n      url: this.props.options.api,\n      data: {\n        category: category,\n        list: this.props.route.list.type\n      },\n      frequency: 120 * 1000,\n      update: this.pollResponse\n    })\n  }\n\n  componentDidMount() {\n    this.setPageTitle()\n\n    if (misago.has(\"THREADS\")) {\n      // unlike in other components, routes are root components for threads\n      // so we can't dispatch store action from constructor\n      store.dispatch(hydrate(misago.pop(\"THREADS\").results))\n\n      this.setState({\n        isLoaded: true\n      })\n    }\n\n    store.dispatch(select.none())\n  }\n\n  componentWillUnmount() {\n    this.state.isMounted = false\n    polls.stop(\"threads\")\n  }\n\n  getTitle() {\n    if (this.props.options.title) {\n      return this.props.options.title\n    }\n\n    return getTitle(this.props.route)\n  }\n\n  setPageTitle() {\n    if (this.props.route.category.level || !misago.get(\"THREADS_ON_INDEX\")) {\n      title.set(getPageTitle(this.props.route))\n    } else if (this.props.options.title) {\n      title.set(this.props.options.title)\n    } else {\n      if (misago.get(\"SETTINGS\").index_title) {\n        document.title = misago.get(\"SETTINGS\").index_title\n      } else {\n        document.title = misago.get(\"SETTINGS\").forum_name\n      }\n    }\n  }\n\n  getSorting() {\n    if (this.props.route.category.level) {\n      return compareWeight\n    } else {\n      return compareGlobalWeight\n    }\n  }\n\n  // AJAX\n\n  loadMore = () => {\n    this.setState({\n      isBusy: true\n    })\n\n    this.loadThreads(this.getCategory(), this.state.next)\n  }\n\n  pollResponse = data => {\n    this.setState({\n      diff: Object.assign({}, data, {\n        results: diffThreads(this.props.threads, data.results)\n      })\n    })\n  }\n\n  addThreads = threads => {\n    store.dispatch(append(threads, this.getSorting()))\n  }\n\n  applyDiff = () => {\n    this.addThreads(this.state.diff.results)\n\n    this.setState(\n      Object.assign({}, this.state.diff, {\n        moderation: getModerationActions(store.getState().threads),\n\n        diff: {\n          results: []\n        }\n      })\n    )\n  }\n\n  // Thread state utils\n\n  freezeThread = thread => {\n    this.setState(function(currentState) {\n      return {\n        busyThreads: sets.toggle(currentState.busyThreads, thread)\n      }\n    })\n  }\n\n  updateThread = thread => {\n    store.dispatch(patch(thread, thread, this.getSorting()))\n  }\n\n  deleteThread = thread => {\n    store.dispatch(deleteThread(thread))\n  }\n\n  getMoreButton() {\n    if (!this.state.next) return null\n\n    return (\n      <div className=\"pager-more\">\n        <Button\n          className=\"btn btn-default btn-outline\"\n          loading={this.state.isBusy || this.state.busyThreads.length}\n          onClick={this.loadMore}\n        >\n          {gettext(\"Show more\")}\n        </Button>\n      </div>\n    )\n  }\n\n  getClassName() {\n    let className = \"page page-threads\"\n    className += \" page-threads-\" + this.props.route.list.type\n    if (isIndex(this.props)) {\n      className += \" page-threads-index\"\n    }\n    if (this.props.route.category.css_class) {\n      className += \" page-threads-\" + this.props.route.category.css_class\n    }\n    return className\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()}>\n        <Header\n          categories={this.props.route.categoriesMap}\n          disabled={!this.state.isLoaded}\n          startThread={this.props.options.startThread}\n          threads={this.props.threads}\n          title={this.getTitle()}\n          toggleNav={this.toggleNav}\n          route={this.props.route}\n          user={this.props.user}\n        />\n\n        <Container\n          api={this.props.options.api}\n          route={this.props.route}\n          subcategories={this.state.subcategories}\n          user={this.props.user}\n          pageLead={this.props.options.pageLead}\n          threads={this.props.threads}\n          threadsCount={this.state.count}\n          moderation={this.state.moderation}\n          selection={this.props.selection}\n          busyThreads={this.state.busyThreads}\n          addThreads={this.addThreads}\n          freezeThread={this.freezeThread}\n          deleteThread={this.deleteThread}\n          updateThread={this.updateThread}\n          isLoaded={this.state.isLoaded}\n          isBusy={this.state.isBusy}\n        >\n          <ThreadsList\n            category={this.props.route.category}\n            categories={this.props.route.categoriesMap}\n            list={this.props.route.list}\n            selection={this.props.selection}\n            threads={this.props.threads}\n            diffSize={this.state.diff.results.length}\n            applyDiff={this.applyDiff}\n            showOptions={!!this.props.user.id}\n            isLoaded={this.state.isLoaded}\n            busyThreads={this.state.busyThreads}\n          >\n            <ThreadsListEmpty\n              category={this.props.route.category}\n              emptyMessage={this.props.options.emptyMessage}\n              list={this.props.route.list}\n            />\n          </ThreadsList>\n\n          {this.getMoreButton()}\n        </Container>\n      </div>\n    )\n  }\n}\n\nfunction isIndex(props) {\n  if (props.route.category.level || !misago.get(\"THREADS_ON_INDEX\")) return false\n  if (props.options.title) return false\n\n  return true\n}","import { paths } from \"misago/components/threads/root\"\nimport misago from \"misago/index\"\nimport mount from \"misago/utils/routed-component\"\n\nconst PRIVATE_THREADS_LIST = \"misago:private-threads\"\n\nexport default function initializer(context) {\n  if (context.has(\"THREADS\") && context.has(\"CATEGORIES\")) {\n    mount({\n      paths: paths(context.get(\"user\"), getListOptions(context))\n    })\n  }\n}\n\nexport function getListOptions(context) {\n  const currentLink = context.get(\"CURRENT_LINK\")\n  if (\n    currentLink.substr(0, PRIVATE_THREADS_LIST.length) === PRIVATE_THREADS_LIST\n  ) {\n    return {\n      api: context.get(\"PRIVATE_THREADS_API\"),\n      startThread: {\n        mode: \"START_PRIVATE\",\n        submit: misago.get(\"PRIVATE_THREADS_API\")\n      },\n      title: gettext(\"Private threads\"),\n      pageLead: gettext(\n        \"Private threads are threads which only those that started them and those they have invited may see and participate in.\"\n      ),\n      emptyMessage: gettext(\"You aren't participating in any private threads.\")\n    }\n  }\n\n  return {\n    api: context.get(\"THREADS_API\")\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:threads\",\n  initializer: initializer,\n  after: \"store\"\n})\n","import { connect } from \"react-redux\"\nimport Route from \"misago/components/threads/route\"\nimport misago from \"misago/index\"\n\nexport function getSelect(options) {\n  return function(store) {\n    return {\n      options: options,\n      selection: store.selection,\n      threads: store.threads,\n      tick: store.tick.tick,\n      user: store.auth.user\n    }\n  }\n}\n\nexport function getLists(user) {\n  let lists = [\n    {\n      type: \"all\",\n      path: \"\",\n      name: gettext(\"All\"),\n      longName: gettext(\"All threads\")\n    }\n  ]\n\n  if (user.id) {\n    lists.push({\n      type: \"my\",\n      path: \"my/\",\n      name: gettext(\"My\"),\n      longName: gettext(\"My threads\")\n    })\n    lists.push({\n      type: \"new\",\n      path: \"new/\",\n      name: gettext(\"New\"),\n      longName: gettext(\"New threads\")\n    })\n    lists.push({\n      type: \"unread\",\n      path: \"unread/\",\n      name: gettext(\"Unread\"),\n      longName: gettext(\"Unread threads\")\n    })\n    lists.push({\n      type: \"subscribed\",\n      path: \"subscribed/\",\n      name: gettext(\"Subscribed\"),\n      longName: gettext(\"Subscribed threads\")\n    })\n\n    if (user.acl.can_see_unapproved_content_lists) {\n      lists.push({\n        type: \"unapproved\",\n        path: \"unapproved/\",\n        name: gettext(\"Unapproved\"),\n        longName: gettext(\"Unapproved content\")\n      })\n    }\n  }\n\n  return lists\n}\n\nexport function paths(user, mode) {\n  let lists = getLists(user)\n  let routes = []\n  let categoriesMap = {}\n\n  misago.get(\"CATEGORIES\").forEach(function(category) {\n    lists.forEach(function(list) {\n      categoriesMap[category.id] = category\n\n      routes.push({\n        path: category.url.index + list.path,\n        component: connect(getSelect(mode))(Route),\n\n        categories: misago.get(\"CATEGORIES\"),\n        categoriesMap,\n        category,\n\n        lists,\n        list\n      })\n    })\n  })\n\n  return routes\n}\n","const MAX_RESULTS = 5\n\nexport default function(data) {\n  const filtered = data.filter(section => {\n    return section.results.count > 0\n  })\n\n  return filtered.map(section => {\n    return Object.assign({}, section, {\n      count: section.results.count,\n      results: section.results.results.slice(0, MAX_RESULTS)\n    })\n  })\n}\n","export const HEADER = \"HEADER\"\nexport const RESULT = \"RESULT\"\nexport const FOOTER = \"FOOTER\"\n","import React from \"react\"\n\nexport default function({ value, onChange }) {\n  return (\n    <input\n      aria-haspopup=\"true\"\n      aria-expanded=\"false\"\n      aria-controls=\"dropdown-menu dropdown-search-results\"\n      autoComplete=\"off\"\n      className=\"form-control\"\n      value={value}\n      onChange={onChange}\n      placeholder={gettext(\"Search\")}\n      role=\"combobox\"\n      type=\"text\"\n    />\n  )\n}\n","import React from \"react\"\nimport Input from \"./input\"\n\nexport default function({ children, onChange, query }) {\n  return (\n    <ul className=\"dropdown-menu dropdown-search-results\" role=\"menu\">\n      <li className=\"form-group\">\n        <Input value={query} onChange={onChange} />\n      </li>\n      {children}\n    </ul>\n  )\n}\n","import React from \"react\"\n\nexport default function() {\n  return (\n    <li className=\"dropdown-search-message\">\n      {gettext(\"Search returned no results.\")}\n    </li>\n  )\n}\n","import React from \"react\"\nimport Loader from \"misago/components/loader\"\n\nexport default function({ message }) {\n  return (\n    <li className=\"dropdown-search-loader\">\n      <Loader />\n    </li>\n  )\n}\n","import React from \"react\"\n\nexport default function({ provider, query }) {\n  const url = provider.url + \"?q=\" + encodeURI(query)\n  const label = ngettext(\n    'See full \"%(provider)s\" results page with %(count)s result.',\n    'See full \"%(provider)s\" results page with %(count)s results.',\n    provider.count\n  )\n\n  return (\n    <li className=\"dropdown-search-footer\">\n      <a href={url}>\n        {interpolate(\n          label,\n          {\n            count: provider.count,\n            provider: provider.name\n          },\n          true\n        )}\n      </a>\n    </li>\n  )\n}\n","import React from \"react\"\n\nexport default function({ provider }) {\n  return <li className=\"dropdown-search-header\">{provider.name}</li>\n}\n","import moment from \"moment\"\nimport React from \"react\"\n\nexport default function({ result }) {\n  const { poster, thread } = result\n  const footer = gettext(\n    \"Posted by %(poster)s on %(posted_on)s in %(category)s.\"\n  )\n\n  return (\n    <li>\n      <a href={result.url.index} className=\"dropdown-search-thread\">\n        <h5>{thread.title}</h5>\n        <small className=\"dropdown-search-post-content\">\n          {$(result.content).text()}\n        </small>\n        <small className=\"dropdown-search-post-footer\">\n          {interpolate(\n            footer,\n            {\n              category: result.category.name,\n              posted_on: moment(result.posted_on).format(\"LL\"),\n              poster: result.poster_name\n            },\n            true\n          )}\n        </small>\n      </a>\n    </li>\n  )\n}\n","import moment from \"moment\"\nimport React from \"react\"\nimport Avatar from \"misago/components/avatar\"\n\nexport default function({ result }) {\n  const { rank } = result\n\n  const detail = gettext(\"%(title)s, joined on %(joined_on)s\")\n  const title = result.title || rank.title || rank.name\n\n  return (\n    <li>\n      <a href={result.url} className=\"dropdown-search-user\">\n        <div className=\"media\">\n          <div className=\"media-left\">\n            <Avatar size={38} user={result} />\n          </div>\n          <div className=\"media-body\">\n            <h5 className=\"media-heading\">{result.username}</h5>\n            <small>\n              {interpolate(\n                detail,\n                {\n                  title,\n                  joined_on: moment(result.joined_on).format(\"LL\")\n                },\n                true\n              )}\n            </small>\n          </div>\n        </div>\n      </a>\n    </li>\n  )\n}\n","import React from \"react\"\nimport Thread from \"./thread\"\nimport User from \"./user\"\n\nexport default function({ provider, result }) {\n  if (provider.id === \"threads\") {\n    return <Thread result={result} />\n  }\n\n  return <User result={result} />\n}\n","import React from \"react\"\nimport { HEADER, FOOTER } from \"../constants\"\nimport Footer from \"./footer\"\nimport Header from \"./header\"\nimport Result from \"./result\"\n\nexport default function({ provider, result, type, query }) {\n  if (type === HEADER) {\n    return <Header provider={provider} />\n  } else if (type === FOOTER) {\n    return <Footer provider={provider} query={query} />\n  }\n\n  return <Result provider={provider} result={result} />\n}\n","import { HEADER, RESULT, FOOTER } from \"./constants\"\n\nexport default function(results) {\n  const flatlist = []\n  flattenProviders(results, flatlist)\n  return flatlist\n}\n\nfunction flattenProviders(results, flatlist) {\n  const arrayLength = results.length\n  for (var i = 0; i < arrayLength; i++) {\n    const provider = results[i]\n\n    flatlist.push({\n      provider,\n      type: HEADER\n    })\n\n    flattenProvider(provider, flatlist)\n  }\n}\n\nfunction flattenProvider(provider, flatlist) {\n  const arrayLength = provider.results.length\n  for (var i = 0; i < arrayLength; i++) {\n    const result = provider.results[i]\n    flatlist.push({\n      provider,\n      result,\n      type: RESULT\n    })\n  }\n\n  flatlist.push({\n    provider,\n    type: FOOTER\n  })\n}\n","import React from \"react\"\nimport { RESULT } from \"./constants\"\nimport DropdownMenu from \"./dropdown-menu\"\nimport Empty from \"./empty\"\nimport Loader from \"./loader\"\nimport Result from \"./result\"\nimport flattenResults from \"./flatten-results\"\n\nexport default function({ isLoading, onChange, results, query }) {\n  if (!query.trim().length) {\n    return <DropdownMenu onChange={onChange} query={query} />\n  }\n\n  if (results.length) {\n    const flatResults = flattenResults(results)\n\n    return (\n      <DropdownMenu onChange={onChange} query={query}>\n        {flatResults.map(props => {\n          const { type, provider, result } = props\n\n          if (type === RESULT) {\n            return (\n              <Result\n                key={[provider.id, type, result.id].join(\"_\")}\n                {...props}\n              />\n            )\n          }\n\n          return (\n            <Result\n              key={[provider.id, type].join(\"_\")}\n              query={query}\n              {...props}\n            />\n          )\n        })}\n      </DropdownMenu>\n    )\n  } else if (isLoading) {\n    return (\n      <DropdownMenu onChange={onChange} query={query}>\n        <Loader />\n      </DropdownMenu>\n    )\n  }\n\n  return (\n    <DropdownMenu onChange={onChange} query={query}>\n      <Empty />\n    </DropdownMenu>\n  )\n}\n","import React from \"react\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport misago from \"misago\"\nimport cleanResults from \"./clean-results\"\nimport Dropdown from \"./dropdown\"\n\nexport default class extends React.Component {\n  constructor() {\n    super()\n\n    this.state = {\n      isLoading: false,\n      isOpen: false,\n      query: \"\",\n      results: []\n    }\n\n    this.intervalId = null\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"mousedown\", this.onDocumentMouseDown)\n    document.addEventListener(\"keydown\", this.onEscape)\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"mousedown\", this.onDocumentMouseDown)\n    document.removeEventListener(\"keydown\", this.onEscape)\n  }\n\n  onToggle = ev => {\n    this.setState((prevState, props) => {\n      if (!prevState.isOpen) {\n        window.setTimeout(() => {\n          this.container.querySelector(\"input\").focus()\n        }, 100)\n      }\n\n      return { isOpen: !prevState.isOpen }\n    })\n  }\n\n  onDocumentMouseDown = ev => {\n    let closeResults = true\n    let node = ev.target\n\n    while (node !== null && node !== document) {\n      if (node === this.container) {\n        closeResults = false\n        return\n      }\n\n      node = node.parentNode\n    }\n\n    if (closeResults) {\n      this.setState({ isOpen: false })\n    }\n  }\n\n  onEscape = ev => {\n    if (ev.key === \"Escape\") {\n      this.setState({ isOpen: false })\n    }\n  }\n\n  onChange = ev => {\n    const query = ev.target.value\n\n    this.setState({ query })\n    this.loadResults(query.trim())\n  }\n\n  loadResults(query) {\n    if (!query.length) return\n\n    const delay = 300 + Math.random() * 300\n\n    if (this.intervalId) {\n      window.clearTimeout(this.intervalId)\n    }\n\n    this.setState({ isLoading: true })\n\n    this.intervalId = window.setTimeout(() => {\n      ajax.get(misago.get(\"SEARCH_API\"), { q: query }).then(\n        data => {\n          this.setState({\n            intervalId: null,\n            isLoading: false,\n            results: cleanResults(data)\n          })\n        },\n        rejection => {\n          snackbar.apiError(rejection)\n\n          this.setState({\n            intervalId: null,\n            isLoading: false,\n            results: []\n          })\n        }\n      )\n    }, delay)\n  }\n\n  render() {\n    let className = \"navbar-search dropdown\"\n    if (this.state.isOpen) className += \" open\"\n\n    return (\n      <div\n        className={className}\n        ref={container => (this.container = container)}\n      >\n        <a\n          aria-haspopup=\"true\"\n          aria-expanded=\"false\"\n          className=\"navbar-icon\"\n          data-toggle=\"dropdown\"\n          href={misago.get(\"SEARCH_URL\")}\n          onClick={this.onToggle}\n        >\n          <i className=\"material-icon\">search</i>\n        </a>\n        <Dropdown\n          isLoading={this.state.isLoading}\n          onChange={this.onChange}\n          results={this.state.results}\n          query={this.state.query}\n        />\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport zxcvbn from \"misago/services/zxcvbn\"\n\nexport const STYLES = [\n  \"progress-bar-danger\",\n  \"progress-bar-warning\",\n  \"progress-bar-warning\",\n  \"progress-bar-primary\",\n  \"progress-bar-success\"\n]\n\nexport const LABELS = [\n  gettext(\"Entered password is very weak.\"),\n  gettext(\"Entered password is weak.\"),\n  gettext(\"Entered password is average.\"),\n  gettext(\"Entered password is strong.\"),\n  gettext(\"Entered password is very strong.\")\n]\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this._score = 0\n    this._password = null\n    this._inputs = []\n\n    this.state = {\n      loaded: false\n    }\n  }\n\n  componentDidMount() {\n    zxcvbn.load().then(() => {\n      this.setState({ loaded: true })\n    })\n  }\n\n  getScore(password, inputs) {\n    let cacheStale = false\n\n    if (password !== this._password) {\n      cacheStale = true\n    }\n\n    if (inputs.length !== this._inputs.length) {\n      cacheStale = true\n    } else {\n      inputs.map((value, i) => {\n        if (value.trim() !== this._inputs[i]) {\n          cacheStale = true\n        }\n      })\n    }\n\n    if (cacheStale) {\n      this._score = zxcvbn.scorePassword(password, inputs)\n      this._password = password\n      this._inputs = inputs.map(function(value) {\n        return value.trim()\n      })\n    }\n\n    return this._score\n  }\n\n  render() {\n    if (!this.state.loaded) return null\n\n    let score = this.getScore(this.props.password, this.props.inputs)\n\n    return (\n      <div className=\"help-block password-strength\">\n        <div className=\"progress\">\n          <div\n            className={\"progress-bar \" + STYLES[score]}\n            style={{ width: 20 + 20 * score + \"%\" }}\n            role=\"progress-bar\"\n            aria-valuenow={score}\n            aria-valuemin=\"0\"\n            aria-valuemax=\"4\"\n          >\n            <span className=\"sr-only\">{LABELS[score]}</span>\n          </div>\n        </div>\n        <p className=\"text-small\">{LABELS[score]}</p>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Button from \"misago/components/button\"\nimport Form from \"misago/components/form\"\nimport FormGroup from \"misago/components/form-group\"\nimport PasswordStrength from \"misago/components/password-strength\"\nimport RegisterLegalFootnote from \"misago/components/RegisterLegalFootnote\"\nimport StartSocialAuth from \"misago/components/StartSocialAuth\"\nimport misago from \"misago\"\nimport ajax from \"misago/services/ajax\"\nimport auth from \"misago/services/auth\"\nimport captcha from \"misago/services/captcha\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\nimport showBannedPage from \"misago/utils/banned-page\"\nimport * as validators from \"misago/utils/validators\"\n\nexport class RegisterForm extends Form {\n  constructor(props) {\n    super(props)\n\n    const { username, password } = this.props.criteria\n\n    let passwordMinLength = 0\n    password.forEach(item => {\n      if (item.name === \"MinimumLengthValidator\") {\n        passwordMinLength = item.min_length\n      }\n    })\n\n    const formValidators = {\n      username: [\n        validators.usernameContent(),\n        validators.usernameMinLength(username.min_length),\n        validators.usernameMaxLength(username.max_length)\n      ],\n      email: [validators.email()],\n      password: [validators.passwordMinLength(passwordMinLength)],\n      captcha: captcha.validator()\n    }\n\n    if (!!misago.get(\"TERMS_OF_SERVICE_ID\")) {\n      formValidators.termsOfService = [validators.requiredTermsOfService()]\n    }\n\n    if (!!misago.get(\"PRIVACY_POLICY_ID\")) {\n      formValidators.privacyPolicy = [validators.requiredPrivacyPolicy()]\n    }\n\n    this.state = {\n      isLoading: false,\n\n      username: \"\",\n      email: \"\",\n      password: \"\",\n      captcha: \"\",\n\n      termsOfService: null,\n      privacyPolicy: null,\n\n      validators: formValidators,\n      errors: {}\n    }\n  }\n\n  clean() {\n    if (this.isValid()) {\n      return true\n    } else {\n      snackbar.error(gettext(\"Form contains errors.\"))\n      this.setState({\n        errors: this.validate()\n      })\n      return false\n    }\n  }\n\n  send() {\n    return ajax.post(misago.get(\"USERS_API\"), {\n      username: this.state.username,\n      email: this.state.email,\n      password: this.state.password,\n      captcha: this.state.captcha,\n      terms_of_service: this.state.termsOfService,\n      privacy_policy: this.state.privacyPolicy\n    })\n  }\n\n  handleSuccess(apiResponse) {\n    this.props.callback(apiResponse)\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      this.setState({\n        errors: Object.assign({}, this.state.errors, rejection)\n      })\n\n      if (rejection.__all__ && rejection.__all__.length > 0) {\n        snackbar.error(rejection.__all__[0])\n      } else {\n        snackbar.error(gettext(\"Form contains errors.\"))\n      }\n    } else if (rejection.status === 403 && rejection.ban) {\n      showBannedPage(rejection.ban)\n      modal.hide()\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  handlePrivacyPolicyChange = event => {\n    const value = event.target.value\n    this.handleToggleAgreement(\"privacyPolicy\", value)\n  }\n\n  handleTermsOfServiceChange = event => {\n    const value = event.target.value\n    this.handleToggleAgreement(\"termsOfService\", value)\n  }\n\n  handleToggleAgreement = (agreement, value) => {\n    this.setState((prevState, props) => {\n      if (prevState[agreement] === null) {\n        const errors = { ...prevState.errors, [agreement]: null }\n        return { errors, [agreement]: value }\n      }\n\n      const validator = this.state.validators[agreement][0]\n      const errors = { ...prevState.errors, [agreement]: [validator(null)] }\n      return { errors, [agreement]: null }\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"modal-dialog modal-register\" role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"modal\"\n              aria-label={gettext(\"Close\")}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Register\")}</h4>\n          </div>\n          <form onSubmit={this.handleSubmit}>\n            <input type=\"type\" style={{ display: \"none\" }} />\n            <input type=\"password\" style={{ display: \"none\" }} />\n            <div className=\"modal-body\">\n              <StartSocialAuth\n                buttonClassName=\"col-xs-12 col-sm-6\"\n                buttonLabel={gettext(\"Join with %(site)s\")}\n                formLabel={gettext(\"Or create forum account:\")}\n              />\n\n              <FormGroup\n                label={gettext(\"Username\")}\n                for=\"id_username\"\n                validation={this.state.errors.username}\n              >\n                <input\n                  type=\"text\"\n                  id=\"id_username\"\n                  className=\"form-control\"\n                  aria-describedby=\"id_username_status\"\n                  disabled={this.state.isLoading}\n                  onChange={this.bindInput(\"username\")}\n                  value={this.state.username}\n                />\n              </FormGroup>\n\n              <FormGroup\n                label={gettext(\"E-mail\")}\n                for=\"id_email\"\n                validation={this.state.errors.email}\n              >\n                <input\n                  type=\"text\"\n                  id=\"id_email\"\n                  className=\"form-control\"\n                  aria-describedby=\"id_email_status\"\n                  disabled={this.state.isLoading}\n                  onChange={this.bindInput(\"email\")}\n                  value={this.state.email}\n                />\n              </FormGroup>\n\n              <FormGroup\n                label={gettext(\"Password\")}\n                for=\"id_password\"\n                validation={this.state.errors.password}\n                extra={\n                  <PasswordStrength\n                    password={this.state.password}\n                    inputs={[this.state.username, this.state.email]}\n                  />\n                }\n              >\n                <input\n                  type=\"password\"\n                  id=\"id_password\"\n                  className=\"form-control\"\n                  aria-describedby=\"id_password_status\"\n                  disabled={this.state.isLoading}\n                  onChange={this.bindInput(\"password\")}\n                  value={this.state.password}\n                />\n              </FormGroup>\n\n              {captcha.component({\n                form: this\n              })}\n\n              <RegisterLegalFootnote\n                errors={this.state.errors}\n                privacyPolicy={this.state.privacyPolicy}\n                termsOfService={this.state.termsOfService}\n                onPrivacyPolicyChange={this.handlePrivacyPolicyChange}\n                onTermsOfServiceChange={this.handleTermsOfServiceChange}\n              />\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn btn-default\"\n                data-dismiss=\"modal\"\n                disabled={this.state.isLoading}\n                type=\"button\"\n              >\n                {gettext(\"Cancel\")}\n              </button>\n              <Button className=\"btn-primary\" loading={this.state.isLoading}>\n                {gettext(\"Register account\")}\n              </Button>\n            </div>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport class RegisterComplete extends React.Component {\n  getLead() {\n    if (this.props.activation === \"user\") {\n      return gettext(\n        \"%(username)s, your account has been created but you need to activate it before you will be able to sign in.\"\n      )\n    } else if (this.props.activation === \"admin\") {\n      return gettext(\n        \"%(username)s, your account has been created but board administrator will have to activate it before you will be able to sign in.\"\n      )\n    }\n  }\n\n  getSubscript() {\n    if (this.props.activation === \"user\") {\n      return gettext(\n        \"We have sent an e-mail to %(email)s with link that you have to click to activate your account.\"\n      )\n    } else if (this.props.activation === \"admin\") {\n      return gettext(\n        \"We will send an e-mail to %(email)s when this takes place.\"\n      )\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className=\"modal-dialog modal-message modal-register\"\n        role=\"document\"\n      >\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"modal\"\n              aria-label={gettext(\"Close\")}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Registration complete\")}</h4>\n          </div>\n          <div className=\"modal-body\">\n            <div className=\"message-icon\">\n              <span className=\"material-icon\">info_outline</span>\n            </div>\n            <div className=\"message-body\">\n              <p className=\"lead\">\n                {interpolate(\n                  this.getLead(),\n                  { username: this.props.username },\n                  true\n                )}\n              </p>\n              <p>\n                {interpolate(\n                  this.getSubscript(),\n                  { email: this.props.email },\n                  true\n                )}\n              </p>\n              <button\n                className=\"btn btn-default\"\n                data-dismiss=\"modal\"\n                type=\"button\"\n              >\n                {gettext(\"Ok\")}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      complete: false\n    }\n  }\n\n  completeRegistration = apiResponse => {\n    if (apiResponse.activation === \"active\") {\n      modal.hide()\n      auth.signIn(apiResponse)\n    } else {\n      this.setState({\n        complete: apiResponse\n      })\n    }\n  }\n\n  render() {\n    if (this.state.complete) {\n      return (\n        <RegisterComplete\n          activation={this.state.complete.activation}\n          email={this.state.complete.email}\n          username={this.state.complete.username}\n        />\n      )\n    }\n\n    return <RegisterForm callback={this.completeRegistration} {...this.props} />\n  }\n}\n","import React from \"react\"\nimport Loader from \"misago/components/loader\"\nimport RegisterForm from \"misago/components/register.js\"\nimport ajax from \"misago/services/ajax\"\nimport captcha from \"misago/services/captcha\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n      isLoaded: false,\n\n      criteria: null\n    }\n  }\n\n  showRegisterForm = () => {\n    if (misago.get(\"SETTINGS\").account_activation === \"closed\") {\n      snackbar.info(gettext(\"New registrations are currently disabled.\"))\n    } else if (this.state.isLoaded) {\n      modal.show(<RegisterForm criteria={this.state.criteria} />)\n    } else {\n      this.setState({ isLoading: true })\n\n      Promise.all([\n        captcha.load(),\n        ajax.get(misago.get(\"AUTH_CRITERIA_API\"))\n      ]).then(\n        result => {\n          this.setState({\n            isLoading: false,\n            isLoaded: true,\n            criteria: result[1]\n          })\n\n          modal.show(<RegisterForm criteria={result[1]} />)\n        },\n        () => {\n          this.setState({ isLoading: false })\n\n          snackbar.error(\n            gettext(\"Registration is currently unavailable due to an error.\")\n          )\n        }\n      )\n    }\n  }\n\n  getClassName() {\n    return this.props.className + (this.state.isLoading ? \" btn-loading\" : \"\")\n  }\n\n  render() {\n    return (\n      <button\n        className={\"btn \" + this.getClassName()}\n        disabled={this.state.isLoading}\n        onClick={this.showRegisterForm}\n        type=\"button\"\n      >\n        {gettext(\"Register\")}\n        {this.state.isLoading ? <Loader /> : null}\n      </button>\n    )\n  }\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport NavbarSearch from \"misago/components/navbar-search\"\nimport RegisterButton from \"misago/components/register-button\"\nimport SignInModal from \"misago/components/sign-in.js\"\nimport misago from \"misago\"\nimport dropdown from \"misago/services/mobile-navbar-dropdown\"\nimport modal from \"misago/services/modal\"\n\nexport class GuestMenu extends React.Component {\n  showSignInModal() {\n    modal.show(SignInModal)\n  }\n\n  render() {\n    return (\n      <ul\n        className=\"dropdown-menu user-dropdown dropdown-menu-right\"\n        role=\"menu\"\n      >\n        <li className=\"guest-preview\">\n          <h4>{gettext(\"You are browsing as guest.\")}</h4>\n          <p>\n            {gettext(\n              \"Sign in or register to start and participate in discussions.\"\n            )}\n          </p>\n          <div className=\"row\">\n            <div className=\"col-xs-6\">\n              <button\n                className=\"btn btn-default btn-sign-in btn-block\"\n                onClick={this.showSignInModal}\n                type=\"button\"\n              >\n                {gettext(\"Sign in\")}\n              </button>\n            </div>\n            <div className=\"col-xs-6\">\n              <RegisterButton className=\"btn-primary btn-register btn-block\">\n                {gettext(\"Register\")}\n              </RegisterButton>\n            </div>\n          </div>\n        </li>\n      </ul>\n    )\n  }\n}\n\nexport class GuestNav extends GuestMenu {\n  render() {\n    return (\n      <div className=\"nav nav-guest\">\n        <button\n          className=\"btn navbar-btn btn-default btn-sign-in\"\n          onClick={this.showSignInModal}\n          type=\"button\"\n        >\n          {gettext(\"Sign in\")}\n        </button>\n        <RegisterButton className=\"navbar-btn btn-primary btn-register\">\n          {gettext(\"Register\")}\n        </RegisterButton>\n        <div className=\"navbar-left\">\n          <NavbarSearch />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport class CompactGuestNav extends React.Component {\n  showGuestMenu() {\n    dropdown.show(GuestMenu)\n  }\n\n  render() {\n    return (\n      <button type=\"button\" onClick={this.showGuestMenu}>\n        <Avatar size=\"64\" />\n      </button>\n    )\n  }\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport Button from \"misago/components/button\"\nimport Loader from \"misago/components/loader\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false\n    }\n  }\n\n  callApi(avatarType) {\n    if (this.state.isLoading) {\n      return false\n    }\n\n    this.setState({\n      isLoading: true\n    })\n\n    ajax\n      .post(this.props.user.api.avatar, {\n        avatar: avatarType\n      })\n      .then(\n        response => {\n          this.setState({\n            isLoading: false\n          })\n\n          snackbar.success(response.detail)\n          this.props.onComplete(response)\n        },\n        rejection => {\n          if (rejection.status === 400) {\n            snackbar.error(rejection.detail)\n            this.setState({\n              isLoading: false\n            })\n          } else {\n            this.props.showError(rejection)\n          }\n        }\n      )\n  }\n\n  setGravatar = () => {\n    this.callApi(\"gravatar\")\n  }\n\n  setGenerated = () => {\n    this.callApi(\"generated\")\n  }\n\n  getGravatarButton() {\n    if (this.props.options.gravatar) {\n      return (\n        <Button\n          onClick={this.setGravatar}\n          disabled={this.state.isLoading}\n          className=\"btn-default btn-block btn-avatar-gravatar\"\n        >\n          {gettext(\"Download my Gravatar\")}\n        </Button>\n      )\n    } else {\n      return null\n    }\n  }\n\n  getCropButton() {\n    if (!this.props.options.crop_src) return null\n\n    return (\n      <Button\n        className=\"btn-default btn-block btn-avatar-crop\"\n        disabled={this.state.isLoading}\n        onClick={this.props.showCrop}\n      >\n        {gettext(\"Re-crop uploaded image\")}\n      </Button>\n    )\n  }\n\n  getUploadButton() {\n    if (!this.props.options.upload) return null\n\n    return (\n      <Button\n        className=\"btn-default btn-block btn-avatar-upload\"\n        disabled={this.state.isLoading}\n        onClick={this.props.showUpload}\n      >\n        {gettext(\"Upload new image\")}\n      </Button>\n    )\n  }\n\n  getGalleryButton() {\n    if (!this.props.options.galleries) return null\n\n    return (\n      <Button\n        className=\"btn-default btn-block btn-avatar-gallery\"\n        disabled={this.state.isLoading}\n        onClick={this.props.showGallery}\n      >\n        {gettext(\"Pick avatar from gallery\")}\n      </Button>\n    )\n  }\n\n  getAvatarPreview() {\n    let userPeview = {\n      id: this.props.user.id,\n      avatars: this.props.options.avatars\n    }\n\n    if (this.state.isLoading) {\n      return (\n        <div className=\"avatar-preview preview-loading\">\n          <Avatar size=\"200\" user={userPeview} />\n          <Loader />\n        </div>\n      )\n    }\n\n    return (\n      <div className=\"avatar-preview\">\n        <Avatar size=\"200\" user={userPeview} />\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"modal-body modal-avatar-index\">\n        <div className=\"row\">\n          <div className=\"col-md-5\">{this.getAvatarPreview()}</div>\n          <div className=\"col-md-7\">\n            {this.getGravatarButton()}\n\n            <Button\n              onClick={this.setGenerated}\n              disabled={this.state.isLoading}\n              className=\"btn-default btn-block btn-avatar-generate\"\n            >\n              {gettext(\"Generate my individual avatar\")}\n            </Button>\n\n            {this.getCropButton()}\n            {this.getUploadButton()}\n            {this.getGalleryButton()}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport Button from \"misago/components/button\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoading: false,\n      deviceRatio: 1\n    }\n  }\n\n  getAvatarSize() {\n    if (this.props.upload) {\n      return this.props.options.crop_tmp.size\n    } else {\n      return this.props.options.crop_src.size\n    }\n  }\n\n  getImagePath() {\n    if (this.props.upload) {\n      return this.props.dataUrl\n    } else {\n      return this.props.options.crop_src.url\n    }\n  }\n\n  componentDidMount() {\n    let cropit = $(\".crop-form\")\n    let cropperWidth = this.getAvatarSize()\n\n    const initialWidth = cropit.width()\n    while (initialWidth < cropperWidth) {\n      cropperWidth = cropperWidth / 2\n    }\n\n    const deviceRatio = this.getAvatarSize() / cropperWidth\n\n    cropit.width(cropperWidth)\n\n    cropit.cropit({\n      width: cropperWidth,\n      height: cropperWidth,\n      exportZoom: deviceRatio,\n      imageState: {\n        src: this.getImagePath()\n      },\n      onImageLoaded: () => {\n        if (this.props.upload) {\n          // center uploaded image\n          let zoomLevel = cropit.cropit(\"zoom\")\n          let imageSize = cropit.cropit(\"imageSize\")\n\n          // is it wider than taller?\n          if (imageSize.width > imageSize.height) {\n            let displayedWidth = imageSize.width * zoomLevel\n            let offsetX = (displayedWidth - this.getAvatarSize()) / -2\n\n            cropit.cropit(\"offset\", {\n              x: offsetX,\n              y: 0\n            })\n          } else if (imageSize.width < imageSize.height) {\n            let displayedHeight = imageSize.height * zoomLevel\n            let offsetY = (displayedHeight - this.getAvatarSize()) / -2\n\n            cropit.cropit(\"offset\", {\n              x: 0,\n              y: offsetY\n            })\n          } else {\n            cropit.cropit(\"offset\", {\n              x: 0,\n              y: 0\n            })\n          }\n        } else {\n          // use preserved crop\n          let crop = this.props.options.crop_src.crop\n\n          if (crop) {\n            cropit.cropit(\"zoom\", crop.zoom)\n            cropit.cropit(\"offset\", {\n              x: crop.x,\n              y: crop.y\n            })\n          }\n        }\n      }\n    })\n  }\n\n  componentWillUnmount() {\n    $(\".crop-form\").cropit(\"disable\")\n  }\n\n  cropAvatar = () => {\n    if (this.state.isLoading) {\n      return false\n    }\n\n    this.setState({\n      isLoading: true\n    })\n\n    let avatarType = this.props.upload ? \"crop_tmp\" : \"crop_src\"\n    let cropit = $(\".crop-form\")\n\n    const deviceRatio = cropit.cropit(\"exportZoom\")\n    const cropitOffset = cropit.cropit(\"offset\")\n\n    ajax\n      .post(this.props.user.api.avatar, {\n        avatar: avatarType,\n        crop: {\n          offset: {\n            x: cropitOffset.x * deviceRatio,\n            y: cropitOffset.y * deviceRatio\n          },\n          zoom: cropit.cropit(\"zoom\") * deviceRatio\n        }\n      })\n      .then(\n        data => {\n          this.props.onComplete(data)\n          snackbar.success(data.detail)\n        },\n        rejection => {\n          if (rejection.status === 400) {\n            snackbar.error(rejection.detail)\n            this.setState({\n              isLoading: false\n            })\n          } else {\n            this.props.showError(rejection)\n          }\n        }\n      )\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"modal-body modal-avatar-crop\">\n          <div className=\"crop-form\">\n            <div className=\"cropit-preview\" />\n            <input type=\"range\" className=\"cropit-image-zoom-input\" />\n          </div>\n        </div>\n        <div className=\"modal-footer\">\n          <div className=\"col-md-6 col-md-offset-3\">\n            <Button\n              onClick={this.cropAvatar}\n              loading={this.state.isLoading}\n              className=\"btn-primary btn-block\"\n            >\n              {this.props.upload\n                ? gettext(\"Set avatar\")\n                : gettext(\"Crop image\")}\n            </Button>\n\n            <Button\n              onClick={this.props.showIndex}\n              disabled={this.state.isLoading}\n              className=\"btn-default btn-block\"\n            >\n              {gettext(\"Cancel\")}\n            </Button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport AvatarCrop from \"misago/components/change-avatar/crop\"\nimport Button from \"misago/components/button\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport fileSize from \"misago/utils/file-size\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      image: null,\n      preview: null,\n      progress: 0,\n      uploaded: null,\n      dataUrl: null\n    }\n  }\n\n  validateFile(image) {\n    if (image.size > this.props.options.upload.limit) {\n      return interpolate(\n        gettext(\"Selected file is too big. (%(filesize)s)\"),\n        {\n          filesize: fileSize(image.size)\n        },\n        true\n      )\n    }\n\n    let invalidTypeMsg = gettext(\"Selected file type is not supported.\")\n    if (\n      this.props.options.upload.allowed_mime_types.indexOf(image.type) === -1\n    ) {\n      return invalidTypeMsg\n    }\n\n    let extensionFound = false\n    let loweredFilename = image.name.toLowerCase()\n    this.props.options.upload.allowed_extensions.map(function(extension) {\n      if (loweredFilename.substr(extension.length * -1) === extension) {\n        extensionFound = true\n      }\n    })\n\n    if (!extensionFound) {\n      return invalidTypeMsg\n    }\n\n    return false\n  }\n\n  pickFile = () => {\n    document.getElementById(\"avatar-hidden-upload\").click()\n  }\n\n  uploadFile = () => {\n    let image = document.getElementById(\"avatar-hidden-upload\").files[0]\n    if (!image) return\n\n    let validationError = this.validateFile(image)\n    if (validationError) {\n      snackbar.error(validationError)\n      return\n    }\n\n    this.setState({\n      image,\n      preview: URL.createObjectURL(image),\n      progress: 0\n    })\n\n    let data = new FormData()\n    data.append(\"avatar\", \"upload\")\n    data.append(\"image\", image)\n\n    ajax\n      .upload(this.props.user.api.avatar, data, progress => {\n        this.setState({\n          progress\n        })\n      })\n      .then(\n        data => {\n          this.setState({\n            options: data,\n            uploaded: data.detail\n          })\n\n          snackbar.info(\n            gettext(\"Your image has been uploaded and you may now crop it.\")\n          )\n        },\n        rejection => {\n          if (rejection.status === 400 || rejection.status === 413) {\n            snackbar.error(rejection.detail)\n            this.setState({\n              isLoading: false,\n              image: null,\n              progress: 0\n            })\n          } else {\n            this.props.showError(rejection)\n          }\n        }\n      )\n  }\n\n  getUploadRequirements(options) {\n    let extensions = options.allowed_extensions.map(function(extension) {\n      return extension.substr(1)\n    })\n\n    return interpolate(\n      gettext(\"%(files)s files smaller than %(limit)s\"),\n      {\n        files: extensions.join(\", \"),\n        limit: fileSize(options.limit)\n      },\n      true\n    )\n  }\n\n  getUploadButton() {\n    return (\n      <div className=\"modal-body modal-avatar-upload\">\n        <Button className=\"btn-pick-file\" onClick={this.pickFile}>\n          <div className=\"material-icon\">input</div>\n          {gettext(\"Select file\")}\n        </Button>\n        <p className=\"text-muted\">\n          {this.getUploadRequirements(this.props.options.upload)}\n        </p>\n      </div>\n    )\n  }\n\n  getUploadProgressLabel() {\n    return interpolate(\n      gettext(\"%(progress)s % complete\"),\n      {\n        progress: this.state.progress\n      },\n      true\n    )\n  }\n\n  getUploadProgress() {\n    return (\n      <div className=\"modal-body modal-avatar-upload\">\n        <div className=\"upload-progress\">\n          <img src={this.state.preview} />\n\n          <div className=\"progress\">\n            <div\n              className=\"progress-bar\"\n              role=\"progressbar\"\n              aria-valuenow=\"{this.state.progress}\"\n              aria-valuemin=\"0\"\n              aria-valuemax=\"100\"\n              style={{ width: this.state.progress + \"%\" }}\n            >\n              <span className=\"sr-only\">{this.getUploadProgressLabel()}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  renderUpload() {\n    return (\n      <div>\n        <input\n          type=\"file\"\n          id=\"avatar-hidden-upload\"\n          className=\"hidden-file-upload\"\n          onChange={this.uploadFile}\n        />\n        {this.state.image ? this.getUploadProgress() : this.getUploadButton()}\n        <div className=\"modal-footer\">\n          <div className=\"col-md-6 col-md-offset-3\">\n            <Button\n              onClick={this.props.showIndex}\n              disabled={!!this.state.image}\n              className=\"btn-default btn-block\"\n            >\n              {gettext(\"Cancel\")}\n            </Button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  renderCrop() {\n    return (\n      <AvatarCrop\n        options={this.state.options}\n        user={this.props.user}\n        upload={this.state.uploaded}\n        dataUrl={this.state.preview}\n        onComplete={this.props.onComplete}\n        showError={this.props.showError}\n        showIndex={this.props.showIndex}\n      />\n    )\n  }\n\n  render() {\n    if (this.state.uploaded) return this.renderCrop()\n\n    return this.renderUpload()\n  }\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport Button from \"misago/components/button\"\nimport misago from \"misago/index\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport batch from \"misago/utils/batch\"\n\nexport class GalleryItem extends React.Component {\n  select = () => {\n    this.props.select(this.props.id)\n  }\n\n  getClassName() {\n    if (this.props.selection === this.props.id) {\n      if (this.props.disabled) {\n        return \"btn btn-avatar btn-disabled avatar-selected\"\n      } else {\n        return \"btn btn-avatar avatar-selected\"\n      }\n    } else if (this.props.disabled) {\n      return \"btn btn-avatar btn-disabled\"\n    } else {\n      return \"btn btn-avatar\"\n    }\n  }\n\n  render() {\n    return (\n      <button\n        type=\"button\"\n        className={this.getClassName()}\n        disabled={this.props.disabled}\n        onClick={this.select}\n      >\n        <img src={this.props.url} />\n      </button>\n    )\n  }\n}\n\nexport class Gallery extends React.Component {\n  render() {\n    return (\n      <div className=\"avatars-gallery\">\n        <h3>{this.props.name}</h3>\n\n        <div className=\"avatars-gallery-images\">\n          {batch(this.props.images, 4, null).map((row, i) => {\n            return (\n              <div className=\"row\" key={i}>\n                {row.map((item, i) => {\n                  return (\n                    <div className=\"col-xs-3\" key={i}>\n                      {item ? (\n                        <GalleryItem\n                          disabled={this.props.disabled}\n                          select={this.props.select}\n                          selection={this.props.selection}\n                          {...item}\n                        />\n                      ) : (\n                        <div className=\"blank-avatar\" />\n                      )}\n                    </div>\n                  )\n                })}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      selection: null,\n      isLoading: false\n    }\n  }\n\n  select = image => {\n    this.setState({\n      selection: image\n    })\n  }\n\n  save = () => {\n    if (this.state.isLoading) {\n      return false\n    }\n\n    this.setState({\n      isLoading: true\n    })\n\n    ajax\n      .post(this.props.user.api.avatar, {\n        avatar: \"galleries\",\n        image: this.state.selection\n      })\n      .then(\n        response => {\n          this.setState({\n            isLoading: false\n          })\n\n          snackbar.success(response.detail)\n          this.props.onComplete(response)\n          this.props.showIndex()\n        },\n        rejection => {\n          if (rejection.status === 400) {\n            snackbar.error(rejection.detail)\n            this.setState({\n              isLoading: false\n            })\n          } else {\n            this.props.showError(rejection)\n          }\n        }\n      )\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"modal-body modal-avatar-gallery\">\n          {this.props.options.galleries.map((item, i) => {\n            return (\n              <Gallery\n                name={item.name}\n                images={item.images}\n                selection={this.state.selection}\n                disabled={this.state.isLoading}\n                select={this.select}\n                key={i}\n              />\n            )\n          })}\n        </div>\n        <div className=\"modal-footer\">\n          <div className=\"row\">\n            <div className=\"col-md-6 col-md-offset-3\">\n              <Button\n                onClick={this.save}\n                loading={this.state.isLoading}\n                disabled={!this.state.selection}\n                className=\"btn-primary btn-block\"\n              >\n                {this.state.selection\n                  ? gettext(\"Save choice\")\n                  : gettext(\"Select avatar\")}\n              </Button>\n\n              <Button\n                onClick={this.props.showIndex}\n                disabled={this.state.isLoading}\n                className=\"btn-default btn-block\"\n              >\n                {gettext(\"Cancel\")}\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport AvatarIndex from \"misago/components/change-avatar/index\"\nimport AvatarCrop from \"misago/components/change-avatar/crop\"\nimport AvatarUpload from \"misago/components/change-avatar/upload\"\nimport AvatarGallery from \"misago/components/change-avatar/gallery\"\nimport Loader from \"misago/components/modal-loader\"\nimport { updateAvatar } from \"misago/reducers/users\"\nimport ajax from \"misago/services/ajax\"\nimport store from \"misago/services/store\"\n\nexport class ChangeAvatarError extends React.Component {\n  getErrorReason() {\n    if (this.props.reason) {\n      return <p dangerouslySetInnerHTML={{ __html: this.props.reason }} />\n    } else {\n      return null\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"modal-body\">\n        <div className=\"message-icon\">\n          <span className=\"material-icon\">remove_circle_outline</span>\n        </div>\n        <div className=\"message-body\">\n          <p className=\"lead\">{this.props.message}</p>\n          {this.getErrorReason()}\n          <button\n            className=\"btn btn-default\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            {gettext(\"Ok\")}\n          </button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default class extends React.Component {\n  componentDidMount() {\n    ajax.get(this.props.user.api.avatar).then(\n      options => {\n        this.setState({\n          component: AvatarIndex,\n          options: options,\n          error: null\n        })\n      },\n      rejection => {\n        this.showError(rejection)\n      }\n    )\n  }\n\n  showError = error => {\n    this.setState({\n      error\n    })\n  }\n\n  showIndex = () => {\n    this.setState({\n      component: AvatarIndex\n    })\n  }\n\n  showUpload = () => {\n    this.setState({\n      component: AvatarUpload\n    })\n  }\n\n  showCrop = () => {\n    this.setState({\n      component: AvatarCrop\n    })\n  }\n\n  showGallery = () => {\n    this.setState({\n      component: AvatarGallery\n    })\n  }\n\n  completeFlow = options => {\n    store.dispatch(updateAvatar(this.props.user, options.avatars))\n\n    this.setState({\n      component: AvatarIndex,\n      options\n    })\n  }\n\n  getBody() {\n    if (this.state) {\n      if (this.state.error) {\n        return (\n          <ChangeAvatarError\n            message={this.state.error.detail}\n            reason={this.state.error.reason}\n          />\n        )\n      } else {\n        return (\n          <this.state.component\n            options={this.state.options}\n            user={this.props.user}\n            onComplete={this.completeFlow}\n            showError={this.showError}\n            showIndex={this.showIndex}\n            showCrop={this.showCrop}\n            showUpload={this.showUpload}\n            showGallery={this.showGallery}\n          />\n        )\n      }\n    } else {\n      return <Loader />\n    }\n  }\n\n  getClassName() {\n    if (this.state && this.state.error) {\n      return \"modal-dialog modal-message modal-change-avatar\"\n    } else {\n      return \"modal-dialog modal-change-avatar\"\n    }\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()} role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"modal\"\n              aria-label={gettext(\"Close\")}\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            <h4 className=\"modal-title\">{gettext(\"Change your avatar\")}</h4>\n          </div>\n\n          {this.getBody()}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport function select(state) {\n  return {\n    user: state.auth.user\n  }\n}\n","import React from \"react\"\nimport { connect } from \"react-redux\"\nimport Avatar from \"misago/components/avatar\"\nimport ChangeAvatarModal, { select } from \"misago/components/change-avatar/root\"\nimport NavbarSearch from \"misago/components/navbar-search\"\nimport misago from \"misago\"\nimport dropdown from \"misago/services/mobile-navbar-dropdown\"\nimport modal from \"misago/services/modal\"\n\nexport class UserMenu extends React.Component {\n  changeAvatar() {\n    modal.show(connect(select)(ChangeAvatarModal))\n  }\n\n  render() {\n    const { user } = this.props\n\n    return (\n      <ul\n        className=\"dropdown-menu user-dropdown dropdown-menu-right\"\n        role=\"menu\"\n      >\n        <li className=\"dropdown-header\">\n          <strong>{user.username}</strong>\n          <div className=\"row user-stats\">\n            <div className=\"col-sm-3\">\n              <span className=\"material-icon\">message</span>\n              {user.posts}\n            </div>\n            <div className=\"col-sm-3\">\n              <span className=\"material-icon\">forum</span>\n              {user.threads}\n            </div>\n            <div className=\"col-sm-3\">\n              <span className=\"material-icon\">favorite</span>\n              {user.followers}\n            </div>\n            <div className=\"col-sm-3\">\n              <span className=\"material-icon\">favorite_outline</span>\n              {user.following}\n            </div>\n          </div>\n        </li>\n        <li className=\"divider\" />\n        <li>\n          <a href={user.url}>\n            <span className=\"material-icon\">account_circle</span>\n            {gettext(\"See your profile\")}\n          </a>\n        </li>\n        <li>\n          <a href={misago.get(\"USERCP_URL\")}>\n            <span className=\"material-icon\">done_all</span>\n            {gettext(\"Change options\")}\n          </a>\n        </li>\n        <li>\n          <button\n            className=\"btn-link\"\n            onClick={this.changeAvatar}\n            type=\"button\"\n          >\n            <span className=\"material-icon\">portrait</span>\n            {gettext(\"Change avatar\")}\n          </button>\n        </li>\n        {!!user.acl.can_use_private_threads && (\n          <li>\n            <a href={misago.get(\"PRIVATE_THREADS_URL\")}>\n              <span className=\"material-icon\">message</span>\n              {gettext(\"Private threads\")}\n              <PrivateThreadsBadge user={user} />\n            </a>\n          </li>\n        )}\n        <li className=\"divider\" />\n        <li className=\"dropdown-buttons\">\n          <button\n            className=\"btn btn-default btn-block\"\n            onClick={() => document.getElementById(\"hidden-logout-form\").submit()}\n            type=\"button\"\n          >\n            {gettext(\"Log out\")}\n          </button>\n        </li>\n      </ul>\n    )\n  }\n}\n\nexport function PrivateThreadsBadge({ user }) {\n  if (!user.unread_private_threads) return null\n\n  return <span className=\"badge\">{user.unread_private_threads}</span>\n}\n\nexport function UserNav({ user }) {\n  return (\n    <ul className=\"ul nav navbar-nav nav-user\">\n      <li>\n        <NavbarSearch />\n      </li>\n      <UserPrivateThreadsLink user={user} />\n      <li className=\"dropdown\">\n        <a\n          aria-haspopup=\"true\"\n          aria-expanded=\"false\"\n          className=\"dropdown-toggle\"\n          data-toggle=\"dropdown\"\n          href={user.url}\n          role=\"button\"\n        >\n          <Avatar user={user} size=\"64\" />\n        </a>\n        <UserMenu user={user} />\n      </li>\n    </ul>\n  )\n}\n\nexport function UserPrivateThreadsLink({ user }) {\n  if (!user.acl.can_use_private_threads) return null\n\n  let title = null\n  if (user.unread_private_threads) {\n    title = gettext(\"You have unread private threads!\")\n  } else {\n    title = gettext(\"Private threads\")\n  }\n\n  return (\n    <li>\n      <a\n        className=\"navbar-icon\"\n        href={misago.get(\"PRIVATE_THREADS_URL\")}\n        title={title}\n      >\n        <span className=\"material-icon\">message</span>\n        {user.unread_private_threads > 0 && (\n          <span className=\"badge\">{user.unread_private_threads}</span>\n        )}\n      </a>\n    </li>\n  )\n}\n\nexport function selectUserMenu(state) {\n  return {\n    user: state.auth.user\n  }\n}\n\nexport class CompactUserNav extends React.Component {\n  showUserMenu() {\n    dropdown.showConnected(\"user-menu\", connect(selectUserMenu)(UserMenu))\n  }\n\n  render() {\n    return (\n      <button type=\"button\" onClick={this.showUserMenu}>\n        <Avatar user={this.props.user} size=\"50\" />\n      </button>\n    )\n  }\n}\n","import React from \"react\"\nimport { GuestNav, CompactGuestNav } from \"./guest-nav\"\nimport { UserNav, CompactUserNav } from \"./user-nav\"\n\nexport class UserMenu extends React.Component {\n  render() {\n    if (this.props.isAuthenticated) {\n      return <UserNav user={this.props.user} />\n    } else {\n      return <GuestNav />\n    }\n  }\n}\n\nexport class CompactUserMenu extends React.Component {\n  render() {\n    if (this.props.isAuthenticated) {\n      return <CompactUserNav user={this.props.user} />\n    } else {\n      return <CompactGuestNav />\n    }\n  }\n}\n\nexport function select(state) {\n  return state.auth\n}\n","import { connect } from \"react-redux\"\nimport misago from \"misago/index\"\nimport {\n  UserMenu,\n  CompactUserMenu,\n  select\n} from \"misago/components/user-menu/root\"\nimport mount from \"misago/utils/mount-component\"\n\nexport default function initializer() {\n  mount(connect(select)(UserMenu), \"user-menu-mount\")\n  mount(connect(select)(CompactUserMenu), \"user-menu-compact-mount\")\n}\n\nmisago.addInitializer({\n  name: \"component:user-menu\",\n  initializer: initializer,\n  after: \"store\"\n})\n","import React from \"react\"\nimport { Link } from \"react-router\"\nimport Li from \"misago/components/li\"\nimport misago from \"misago/index\"\n\nexport default function({ baseUrl, lists }) {\n  return (\n    <ul className=\"nav nav-pills\">\n      {lists.map(list => {\n        const url = listUrl(baseUrl, list)\n        return (\n          <Li path={url} key={url}>\n            <Link to={url}>{list.name}</Link>\n          </Li>\n        )\n      })}\n    </ul>\n  )\n}\n\nconst listUrl = function(baseUrl, list) {\n  let url = baseUrl\n  if (list.component === \"rank\") {\n    url += list.slug\n  } else {\n    url += list.component\n  }\n  return url + \"/\"\n}\n","import React from \"react\"\n\nexport default class extends React.Component {\n  getEmptyMessage() {\n    return interpolate(\n      gettext(\n        \"No users have posted any new messages during last %(days)s days.\"\n      ),\n      { days: this.props.trackedPeriod },\n      true\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"active-posters-list\">\n        <div className=\"container\">\n          <p className=\"lead\">{this.getEmptyMessage()}</p>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport Avatar from \"misago/components/avatar\"\nimport * as random from \"misago/utils/random\"\n\nexport default class extends React.Component {\n  shouldComponentUpdate() {\n    return false\n  }\n\n  getClassName() {\n    if (this.props.hiddenOnMobile) {\n      return \"list-group-item hidden-xs hidden-sm\"\n    } else {\n      return \"list-group-item\"\n    }\n  }\n\n  render() {\n    return (\n      <li className={this.getClassName()}>\n        <div className=\"rank-user-avatar\">\n          <span>\n            <Avatar size=\"50\" />\n          </span>\n        </div>\n\n        <div className=\"rank-user\">\n          <div className=\"user-name\">\n            <span className=\"item-title\">\n              <span\n                className=\"ui-preview-text\"\n                style={{ width: random.int(30, 80) + \"px\" }}\n              >\n                &nbsp;\n              </span>\n            </span>\n          </div>\n\n          <div className=\"user-details\">\n            <span className=\"user-status\">\n              <span className=\"status-icon ui-preview-text\">&nbsp;</span>\n              <span\n                className=\"status-label ui-preview-text hidden-xs hidden-sm\"\n                style={{ width: random.int(30, 50) + \"px\" }}\n              >\n                &nbsp;\n              </span>\n            </span>\n            <span className=\"rank-name\">\n              <span\n                className=\"ui-preview-text\"\n                style={{ width: random.int(30, 50) + \"px\" }}\n              >\n                &nbsp;\n              </span>\n            </span>\n            <span className=\"user-title hidden-xs hidden-sm\">\n              <span\n                className=\"ui-preview-text\"\n                style={{ width: random.int(30, 50) + \"px\" }}\n              >\n                &nbsp;\n              </span>\n            </span>\n          </div>\n          <div className=\"user-compact-stats visible-xs-block\">\n            <span className=\"rank-position\">\n              <strong>\n                <span\n                  className=\"ui-preview-text\"\n                  style={{ width: random.int(20, 30) + \"px\" }}\n                >\n                  &nbsp;\n                </span>\n              </strong>\n              <small>{gettext(\"Rank\")}</small>\n            </span>\n            <span className=\"rank-posts-counted\">\n              <strong>\n                <span\n                  className=\"ui-preview-text\"\n                  style={{ width: random.int(20, 30) + \"px\" }}\n                >\n                  &nbsp;\n                </span>\n              </strong>\n              <small>{gettext(\"Ranked posts\")}</small>\n            </span>\n          </div>\n        </div>\n\n        <div className=\"rank-position hidden-xs\">\n          <strong>\n            <span\n              className=\"ui-preview-text\"\n              style={{ width: random.int(20, 30) + \"px\" }}\n            >\n              &nbsp;\n            </span>\n          </strong>\n          <small>{gettext(\"Rank\")}</small>\n        </div>\n\n        <div className=\"rank-posts-counted hidden-xs\">\n          <strong>\n            <span\n              className=\"ui-preview-text\"\n              style={{ width: random.int(20, 30) + \"px\" }}\n            >\n              &nbsp;\n            </span>\n          </strong>\n          <small>{gettext(\"Ranked posts\")}</small>\n        </div>\n\n        <div className=\"rank-posts-total hidden-xs\">\n          <strong>\n            <span\n              className=\"ui-preview-text\"\n              style={{ width: random.int(20, 30) + \"px\" }}\n            >\n              &nbsp;\n            </span>\n          </strong>\n          <small>{gettext(\"Total posts\")}</small>\n        </div>\n      </li>\n    )\n  }\n}\n","import React from \"react\"\nimport ItemPreview from \"misago/components/users/active-posters/list-item-preview\"\nimport * as random from \"misago/utils/random\"\n\nexport default class extends React.Component {\n  shouldComponentUpdate() {\n    return false\n  }\n\n  render() {\n    return (\n      <div className=\"active-posters-list\">\n        <div className=\"container\">\n          <p className=\"lead ui-preview\">\n            <span\n              className=\"ui-preview-text\"\n              style={{ width: random.int(50, 220) + \"px\" }}\n            >\n              &nbsp;\n            </span>\n          </p>\n\n          <div className=\"active-posters ui-preview\">\n            <ul className=\"list-group\">\n              {[0, 1, 2].map(i => {\n                return <ItemPreview hiddenOnMobile={i > 0} key={i} />\n              })}\n            </ul>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport { Link } from \"react-router\"\nimport Avatar from \"misago/components/avatar\"\nimport Status, { StatusIcon, StatusLabel } from \"misago/components/user-status\"\nimport misago from \"misago/index\"\nimport * as random from \"misago/utils/random\"\n\nexport default class extends React.Component {\n  getClassName() {\n    if (this.props.rank.css_class) {\n      return \"list-group-item list-group-rank-\" + this.props.rank.css_class\n    } else {\n      return \"list-group-item\"\n    }\n  }\n\n  getUserStatus() {\n    if (this.props.user.status) {\n      return (\n        <Status user={this.props.user} status={this.props.user.status}>\n          <StatusIcon user={this.props.user} status={this.props.user.status} />\n          <StatusLabel\n            user={this.props.user}\n            status={this.props.user.status}\n            className=\"status-label hidden-xs hidden-sm\"\n          />\n        </Status>\n      )\n    }\n\n    return (\n      <span className=\"user-status\">\n        <span className=\"status-icon ui-preview-text\">&nbsp;</span>\n        <span\n          className=\"status-label ui-preview-text hidden-xs hidden-sm\"\n          style={{ width: random.int(30, 50) + \"px\" }}\n        >\n          &nbsp;\n        </span>\n      </span>\n    )\n  }\n\n  getRankName() {\n    if (!this.props.rank.is_tab) {\n      return (\n        <span className=\"rank-name item-title\">{this.props.rank.name}</span>\n      )\n    }\n\n    let rankUrl = misago.get(\"USERS_LIST_URL\") + this.props.rank.slug + \"/\"\n    return (\n      <Link to={rankUrl} className=\"rank-name item-title\">\n        {this.props.rank.name}\n      </Link>\n    )\n  }\n\n  getUserTitle() {\n    if (!this.props.user.title) return null\n\n    return (\n      <span className=\"user-title hidden-xs hidden-sm\">\n        {this.props.user.title}\n      </span>\n    )\n  }\n\n  render() {\n    return (\n      <li className={this.getClassName()}>\n        <div className=\"rank-user-avatar\">\n          <a href={this.props.user.url}>\n            <Avatar user={this.props.user} size={50} size2x={64} />\n          </a>\n        </div>\n\n        <div className=\"rank-user\">\n          <div className=\"user-name\">\n            <a href={this.props.user.url} className=\"item-title\">\n              {this.props.user.username}\n            </a>\n          </div>\n          <div className=\"user-details\">\n            {this.getUserStatus()}\n            {this.getRankName()}\n            {this.getUserTitle()}\n          </div>\n          <div className=\"user-compact-stats visible-xs-block\">\n            <span className=\"rank-position\">\n              <strong>#{this.props.counter}</strong>\n              <small>{gettext(\"Rank\")}</small>\n            </span>\n\n            <span className=\"rank-posts-counted\">\n              <strong>{this.props.user.meta.score}</strong>\n              <small>{gettext(\"Ranked posts\")}</small>\n            </span>\n          </div>\n        </div>\n\n        <div className=\"rank-position hidden-xs\">\n          <strong>#{this.props.counter}</strong>\n          <small>{gettext(\"Rank\")}</small>\n        </div>\n\n        <div className=\"rank-posts-counted hidden-xs\">\n          <strong>{this.props.user.meta.score}</strong>\n          <small>{gettext(\"Ranked posts\")}</small>\n        </div>\n\n        <div className=\"rank-posts-total hidden-xs\">\n          <strong>{this.props.user.posts}</strong>\n          <small>{gettext(\"Total posts\")}</small>\n        </div>\n      </li>\n    )\n  }\n}\n","import React from \"react\"\nimport ListItem from \"misago/components/users/active-posters/list-item\"\n\nexport default class extends React.Component {\n  getLeadMessage() {\n    let message = ngettext(\n      \"%(posters)s top poster from last %(days)s days.\",\n      \"%(posters)s top posters from last %(days)s days.\",\n      this.props.count\n    )\n\n    return interpolate(\n      message,\n      {\n        posters: this.props.count,\n        days: this.props.trackedPeriod\n      },\n      true\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"active-posters-list\">\n        <div className=\"container\">\n          <p className=\"lead\">{this.getLeadMessage()}</p>\n\n          <div className=\"active-posters ui-ready\">\n            <ul className=\"list-group\">\n              {this.props.users.map((user, i) => {\n                return (\n                  <ListItem\n                    user={user}\n                    rank={user.rank}\n                    counter={i + 1}\n                    key={user.id}\n                  />\n                )\n              })}\n            </ul>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport ListEmpty from \"misago/components/users/active-posters/list-empty\"\nimport ListPreview from \"misago/components/users/active-posters/list-preview\"\nimport ListReady from \"misago/components/users/active-posters/list-ready\"\nimport misago from \"misago/index\"\nimport { hydrate } from \"misago/reducers/users\"\nimport polls from \"misago/services/polls\"\nimport store from \"misago/services/store\"\nimport title from \"misago/services/page-title\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    if (misago.has(\"USERS\")) {\n      this.initWithPreloadedData(misago.pop(\"USERS\"))\n    } else {\n      this.initWithoutPreloadedData()\n    }\n\n    this.startPolling()\n  }\n\n  initWithPreloadedData(data) {\n    this.state = {\n      isLoaded: true,\n\n      trackedPeriod: data.tracked_period,\n      count: data.count\n    }\n\n    store.dispatch(hydrate(data.results))\n  }\n\n  initWithoutPreloadedData() {\n    this.state = {\n      isLoaded: false\n    }\n  }\n\n  startPolling() {\n    polls.start({\n      poll: \"active-posters\",\n      url: misago.get(\"USERS_API\"),\n      data: {\n        list: \"active\"\n      },\n      frequency: 90 * 1000,\n      update: this.update\n    })\n  }\n\n  update = data => {\n    store.dispatch(hydrate(data.results))\n\n    this.setState({\n      isLoaded: true,\n\n      trackedPeriod: data.tracked_period,\n      count: data.count\n    })\n  }\n\n  componentDidMount() {\n    title.set({\n      title: this.props.route.extra.name,\n      parent: gettext(\"Users\")\n    })\n  }\n\n  componentWillUnmount() {\n    polls.stop(\"active-posters\")\n  }\n\n  render() {\n    if (this.state.isLoaded) {\n      if (this.state.count > 0) {\n        return (\n          <ListReady\n            users={this.props.users}\n            trackedPeriod={this.state.trackedPeriod}\n            count={this.state.count}\n          />\n        )\n      } else {\n        return <ListEmpty trackedPeriod={this.state.trackedPeriod} />\n      }\n    } else {\n      return <ListPreview />\n    }\n  }\n}\n","export default function() {\n  window.scrollTo(0, 0)\n}\n","import React from \"react\"\nimport { Link } from \"react-router\"\nimport resetScroll from \"misago/utils/reset-scroll\"\n\nexport default function(props) {\n  if (props.pages === 1) return null\n\n  return (\n    <div className=\"row row-toolbar\">\n      <div className=\"col-xs-12 text-center visible-xs-block\">\n        <More more={props.more} />\n        <div className=\"toolbar-vertical-spacer\" />\n      </div>\n      <div className=\"col-md-7\">\n        <div className=\"row\">\n          <div className=\"col-sm-4 col-md-5\">\n            <Pager {...props} />\n          </div>\n          <div className=\"col-sm-8 col-md-7 hidden-xs\">\n            <More more={props.more} />\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport function Pager(props) {\n  return (\n    <div className=\"row row-paginator\">\n      <div className=\"col-xs-3\">\n        <FirstPage {...props} />\n      </div>\n      <div className=\"col-xs-3\">\n        <PreviousPage {...props} />\n      </div>\n      <div className=\"col-xs-3\">\n        <NextPage {...props} />\n      </div>\n      <div className=\"col-xs-3\">\n        <LastPage {...props} />\n      </div>\n    </div>\n  )\n}\n\nexport function FirstPage(props) {\n  if (props.isLoaded && props.first) {\n    return (\n      <Link\n        className=\"btn btn-default btn-block btn-icon btn-outline\"\n        onClick={resetScroll}\n        to={props.baseUrl}\n        title={gettext(\"Go to first page\")}\n      >\n        <span className=\"material-icon\">first_page</span>\n      </Link>\n    )\n  } else {\n    return (\n      <span\n        className=\"btn btn-default btn-block btn-icon btn-outline disabled\"\n        title={gettext(\"Go to first page\")}\n      >\n        <span className=\"material-icon\">first_page</span>\n      </span>\n    )\n  }\n}\n\nexport function PreviousPage(props) {\n  if (props.isLoaded && props.page > 1) {\n    let previousUrl = \"\"\n    if (props.previous) {\n      previousUrl = props.previous + \"/\"\n    }\n\n    return (\n      <Link\n        className=\"btn btn-default btn-block btn-icon btn-outline\"\n        onClick={resetScroll}\n        to={props.baseUrl + previousUrl}\n        title={gettext(\"Go to previous page\")}\n      >\n        <span className=\"material-icon\">chevron_left</span>\n      </Link>\n    )\n  } else {\n    return (\n      <span\n        className=\"btn btn-default btn-block btn-icon btn-outline disabled\"\n        title={gettext(\"Go to previous page\")}\n      >\n        <span className=\"material-icon\">chevron_left</span>\n      </span>\n    )\n  }\n}\n\nexport function NextPage(props) {\n  if (props.isLoaded && props.more) {\n    let nextUrl = \"\"\n    if (props.next) {\n      nextUrl = props.next + \"/\"\n    }\n\n    return (\n      <Link\n        className=\"btn btn-default btn-block btn-icon btn-outline\"\n        onClick={resetScroll}\n        to={props.baseUrl + nextUrl}\n        title={gettext(\"Go to next page\")}\n      >\n        <span className=\"material-icon\">chevron_right</span>\n      </Link>\n    )\n  } else {\n    return (\n      <span\n        className=\"btn btn-default btn-block btn-icon btn-outline disabled\"\n        title={gettext(\"Go to next page\")}\n      >\n        <span className=\"material-icon\">chevron_right</span>\n      </span>\n    )\n  }\n}\n\nexport function LastPage(props) {\n  if (props.isLoaded && props.last) {\n    return (\n      <Link\n        className=\"btn btn-default btn-block btn-icon btn-outline\"\n        onClick={resetScroll}\n        to={props.baseUrl + props.last + \"/\"}\n        title={gettext(\"Go to last page\")}\n      >\n        <span className=\"material-icon\">last_page</span>\n      </Link>\n    )\n  } else {\n    return (\n      <span\n        className=\"btn btn-default btn-block btn-icon btn-outline disabled\"\n        title={gettext(\"Go to last page\")}\n      >\n        <span className=\"material-icon\">last_page</span>\n      </span>\n    )\n  }\n}\n\nexport function More(props) {\n  let message = null\n  if (props.more) {\n    message = ngettext(\n      \"There is %(more)s more member with this role.\",\n      \"There are %(more)s more members with this role.\",\n      props.more\n    )\n    message = interpolate(message, { more: props.more }, true)\n  } else {\n    message = gettext(\"There are no more members with this role.\")\n  }\n\n  return <p>{message}</p>\n}\n","import React from \"react\"\nimport Pager from \"misago/components/users/rank/pager\"\nimport UsersList from \"misago/components/users-list\"\n\nexport default function(props) {\n  return (\n    <div>\n      <UsersList\n        cols={4}\n        isReady={true}\n        showStatus={true}\n        users={props.users}\n      />\n      <Pager {...props} />\n    </div>\n  )\n}\n","import React from \"react\"\nimport UsersList from \"misago/components/users-list\"\n\nexport default class extends React.Component {\n  shouldComponentUpdate() {\n    return false\n  }\n\n  render() {\n    return (\n      <div>\n        <UsersList cols={4} isReady={false} />\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport PageLead from \"misago/components/page-lead\"\nimport List from \"misago/components/users/rank/list\"\nimport ListLoading from \"misago/components/users/rank/list-loading\"\nimport misago from \"misago/index\"\nimport { hydrate } from \"misago/reducers/users\"\nimport polls from \"misago/services/polls\"\nimport store from \"misago/services/store\"\nimport title from \"misago/services/page-title\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    if (misago.has(\"USERS\")) {\n      this.initWithPreloadedData(misago.pop(\"USERS\"))\n    } else {\n      this.initWithoutPreloadedData()\n    }\n\n    this.startPolling(props.params.page || 1)\n  }\n\n  initWithPreloadedData(data) {\n    this.state = Object.assign(data, {\n      isLoaded: true\n    })\n    store.dispatch(hydrate(data.results))\n  }\n\n  initWithoutPreloadedData() {\n    this.state = {\n      isLoaded: false\n    }\n  }\n\n  startPolling(page) {\n    polls.start({\n      poll: \"rank-users\",\n      url: misago.get(\"USERS_API\"),\n      data: {\n        rank: this.props.route.rank.id,\n        page: page\n      },\n      frequency: 90 * 1000,\n      update: this.update\n    })\n  }\n\n  update = data => {\n    store.dispatch(hydrate(data.results))\n\n    data.isLoaded = true\n    this.setState(data)\n  }\n\n  componentDidMount() {\n    title.set({\n      title: this.props.route.rank.name,\n      page: this.props.params.page || null,\n      parent: gettext(\"Users\")\n    })\n  }\n\n  componentWillUnmount() {\n    polls.stop(\"rank-users\")\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.params.page !== nextProps.params.page) {\n      title.set({\n        title: this.props.route.rank.name,\n        page: nextProps.params.page || null,\n        parent: gettext(\"Users\")\n      })\n\n      this.setState({\n        isLoaded: false\n      })\n\n      polls.stop(\"rank-users\")\n      this.startPolling(nextProps.params.page)\n    }\n  }\n\n  getClassName() {\n    if (this.props.route.rank.css_class) {\n      return \"rank-users-list rank-users-\" + this.props.route.rank.css_class\n    } else {\n      return \"rank-users-list\"\n    }\n  }\n\n  getRankDescription() {\n    if (this.props.route.rank.description) {\n      return (\n        <div className=\"rank-description\">\n          <PageLead copy={this.props.route.rank.description.html} />\n        </div>\n      )\n    } else {\n      return null\n    }\n  }\n\n  getComponent() {\n    if (this.state.isLoaded) {\n      if (this.state.count > 0) {\n        let baseUrl =\n          misago.get(\"USERS_LIST_URL\") + this.props.route.rank.slug + \"/\"\n        return (\n          <List baseUrl={baseUrl} users={this.props.users} {...this.state} />\n        )\n      } else {\n        return (\n          <p className=\"lead\">\n            {gettext(\"There are no users with this rank at the moment.\")}\n          </p>\n        )\n      }\n    } else {\n      return <ListLoading />\n    }\n  }\n\n  render() {\n    return (\n      <div className={this.getClassName()}>\n        <div className=\"container\">\n          {this.getRankDescription()}\n          {this.getComponent()}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from \"react\"\nimport { connect } from \"react-redux\"\nimport DropdownToggle from \"misago/components/dropdown-toggle\"\nimport Nav from \"misago/components/users/nav\"\nimport ActivePosters from \"misago/components/users/active-posters/root\"\nimport Rank from \"misago/components/users/rank/root\"\nimport WithDropdown from \"misago/components/with-dropdown\"\nimport misago from \"misago/index\"\n\nexport default class extends WithDropdown {\n  render() {\n    return (\n      <div className=\"page page-users-lists\">\n        <div className=\"page-header-bg\">\n          <div className=\"page-header\">\n            <div className=\"container\">\n              <h1>{gettext(\"Users\")}</h1>\n            </div>\n            <div className=\"page-tabs\">\n              <div className=\"container\">\n                <Nav\n                  lists={misago.get(\"USERS_LISTS\")}\n                  baseUrl={misago.get(\"USERS_LIST_URL\")}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {this.props.children}\n      </div>\n    )\n  }\n}\n\nexport function select(store) {\n  return {\n    tick: store.tick.tick,\n    user: store.auth.user,\n    users: store.users\n  }\n}\n\nexport function paths() {\n  let paths = []\n\n  misago.get(\"USERS_LISTS\").forEach(function(item) {\n    if (item.component === \"rank\") {\n      paths.push({\n        path: misago.get(\"USERS_LIST_URL\") + item.slug + \"/:page/\",\n        component: connect(select)(Rank),\n        rank: item\n      })\n      paths.push({\n        path: misago.get(\"USERS_LIST_URL\") + item.slug + \"/\",\n        component: connect(select)(Rank),\n        rank: item\n      })\n    } else if (item.component === \"active-posters\") {\n      paths.push({\n        path: misago.get(\"USERS_LIST_URL\") + item.component + \"/\",\n        component: connect(select)(ActivePosters),\n        extra: {\n          name: item.name\n        }\n      })\n    }\n  })\n\n  return paths\n}\n","import Users, { paths } from \"misago/components/users/root\"\nimport misago from \"misago/index\"\nimport mount from \"misago/utils/routed-component\"\n\nexport default function initializer(context) {\n  if (context.has(\"USERS_LISTS\")) {\n    mount({\n      root: misago.get(\"USERS_LIST_URL\"),\n      component: Users,\n      paths: paths()\n    })\n  }\n}\n\nmisago.addInitializer({\n  name: \"component:users\",\n  initializer: initializer,\n  after: \"store\"\n})\n","import misago from \"misago/index\"\nimport include from \"misago/services/include\"\n\nexport default function initializer(context) {\n  include.init(context.get(\"STATIC_URL\"))\n}\n\nmisago.addInitializer({\n  name: \"include\",\n  initializer: initializer\n})\n","import misago from \"misago/index\"\nimport storage from \"misago/services/local-storage\"\n\nexport default function initializer() {\n  storage.init(\"misago_\")\n}\n\nmisago.addInitializer({\n  name: \"local-storage\",\n  initializer: initializer\n})\n","import misago from \"misago/index\"\nimport dropdown from \"misago/services/mobile-navbar-dropdown\"\n\nexport default function initializer() {\n  let element = document.getElementById(\"mobile-navbar-dropdown-mount\")\n  if (element) {\n    dropdown.init(element)\n  }\n}\n\nmisago.addInitializer({\n  name: \"dropdown\",\n  initializer: initializer,\n  before: \"store\"\n})\n","import misago from \"misago/index\"\nimport modal from \"misago/services/modal\"\n\nexport default function initializer() {\n  let element = document.getElementById(\"modal-mount\")\n  if (element) {\n    modal.init(element)\n  }\n}\n\nmisago.addInitializer({\n  name: \"modal\",\n  initializer: initializer,\n  before: \"store\"\n})\n","import moment from \"moment\"\nimport misago from \"misago/index\"\n\nexport default function initializer() {\n  moment.locale($(\"html\").attr(\"lang\"))\n}\n\nmisago.addInitializer({\n  name: \"moment\",\n  initializer: initializer\n})\n","import misago from \"misago/index\"\nimport title from \"misago/services/page-title\"\n\nexport default function initializer(context) {\n  title.init(\n    context.get(\"SETTINGS\").forum_index_title,\n    context.get(\"SETTINGS\").forum_name\n  )\n}\n\nmisago.addInitializer({\n  name: \"page-title\",\n  initializer: initializer\n})\n","import misago from \"misago/index\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\nimport polls from \"misago/services/polls\"\n\nexport default function initializer() {\n  polls.init(ajax, snackbar)\n}\n\nmisago.addInitializer({\n  name: \"polls\",\n  initializer: initializer\n})\n","import misago from \"misago/index\"\nimport ajax from \"misago/services/ajax\"\nimport posting from \"misago/services/posting\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default function initializer() {\n  posting.init(ajax, snackbar, document.getElementById(\"posting-placeholder\"))\n}\n\nmisago.addInitializer({\n  name: \"posting\",\n  initializer: initializer\n})\n","import misago from \"misago/index\"\nimport reducer, { initialState } from \"misago/reducers/auth\"\nimport store from \"misago/services/store\"\n\nexport default function initializer(context) {\n  store.addReducer(\n    \"auth\",\n    reducer,\n    Object.assign(\n      {\n        isAuthenticated: context.get(\"isAuthenticated\"),\n        isAnonymous: !context.get(\"isAuthenticated\"),\n\n        user: context.get(\"user\")\n      },\n      initialState\n    )\n  )\n}\n\nmisago.addInitializer({\n  name: \"reducer:auth\",\n  initializer: initializer,\n  before: \"store\"\n})\n","import misago from \"misago/index\"\nimport reducer from \"misago/reducers/participants\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  let initialState = null\n  if (misago.has(\"THREAD\")) {\n    initialState = misago.get(\"THREAD\").participants\n  }\n\n  store.addReducer(\"participants\", reducer, initialState || [])\n}\n\nmisago.addInitializer({\n  name: \"reducer:participants\",\n  initializer: initializer,\n  before: \"store\"\n})\n","import misago from \"misago/index\"\nimport reducer, { hydrate } from \"misago/reducers/poll\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  let initialState = null\n  if (misago.has(\"THREAD\") && misago.get(\"THREAD\").poll) {\n    initialState = hydrate(misago.get(\"THREAD\").poll)\n  } else {\n    initialState = {\n      isBusy: false\n    }\n  }\n\n  store.addReducer(\"poll\", reducer, initialState)\n}\n\nmisago.addInitializer({\n  name: \"reducer:poll\",\n  initializer: initializer,\n  before: \"store\"\n})\n","import misago from \"misago/index\"\nimport reducer, { hydrate } from \"misago/reducers/posts\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  let initialState = null\n  if (misago.has(\"POSTS\")) {\n    initialState = hydrate(misago.get(\"POSTS\"))\n  } else {\n    initialState = {\n      isLoaded: false,\n      isBusy: false\n    }\n  }\n\n  store.addReducer(\"posts\", reducer, initialState)\n}\n\nmisago.addInitializer({\n  name: \"reducer:posts\",\n  initializer: initializer,\n  before: \"store\"\n})\n","import misago from \"misago/index\"\nimport reducer from \"misago/reducers/profile-details\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  let initialState = null\n  if (misago.has(\"PROFILE_DETAILS\")) {\n    initialState = misago.get(\"PROFILE_DETAILS\")\n  }\n\n  store.addReducer(\"profile-details\", reducer, initialState || {})\n}\n\nmisago.addInitializer({\n  name: \"reducer:profile-details\",\n  initializer: initializer,\n  before: \"store\"\n})\n","import misago from \"misago/index\"\nimport { hydrate } from \"misago/reducers/profile\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  if (misago.has(\"PROFILE\")) {\n    store.dispatch(hydrate(misago.get(\"PROFILE\")))\n  }\n}\n\nmisago.addInitializer({\n  name: \"reducer:profile-hydrate\",\n  initializer: initializer,\n  after: \"store\"\n})\n","import misago from \"misago/index\"\nimport reducer from \"misago/reducers/profile\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  store.addReducer(\"profile\", reducer, {})\n}\n\nmisago.addInitializer({\n  name: \"reducer:profile\",\n  initializer: initializer,\n  before: \"store\"\n})\n","import misago from \"misago\"\nimport reducer, { initialState } from \"misago/reducers/search\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  store.addReducer(\n    \"search\",\n    reducer,\n    Object.assign({}, initialState, {\n      providers: misago.get(\"SEARCH_PROVIDERS\") || [],\n      query: misago.get(\"SEARCH_QUERY\") || \"\"\n    })\n  )\n}\n\nmisago.addInitializer({\n  name: \"reducer:search\",\n  initializer: initializer,\n  before: \"store\"\n})\n","import misago from \"misago/index\"\nimport reducer from \"misago/reducers/selection\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  store.addReducer(\"selection\", reducer, [])\n}\n\nmisago.addInitializer({\n  name: \"reducer:selection\",\n  initializer: initializer,\n  before: \"store\"\n})\n","import misago from \"misago/index\"\nimport reducer, { initialState } from \"misago/reducers/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  store.addReducer(\"snackbar\", reducer, initialState)\n}\n\nmisago.addInitializer({\n  name: \"reducer:snackbar\",\n  initializer: initializer,\n  before: \"store\"\n})\n","import misago from \"misago/index\"\nimport reducer, { hydrate } from \"misago/reducers/thread\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  let initialState = null\n  if (misago.has(\"THREAD\")) {\n    initialState = hydrate(misago.get(\"THREAD\"))\n  } else {\n    initialState = {\n      isBusy: false\n    }\n  }\n\n  store.addReducer(\"thread\", reducer, initialState)\n}\n\nmisago.addInitializer({\n  name: \"reducer:thread\",\n  initializer: initializer,\n  before: \"store\"\n})\n","import misago from \"misago/index\"\nimport reducer from \"misago/reducers/threads\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  store.addReducer(\"threads\", reducer, [])\n}\n\nmisago.addInitializer({\n  name: \"reducer:threads\",\n  initializer: initializer,\n  before: \"store\"\n})\n","import misago from \"misago/index\"\nimport reducer, { initialState } from \"misago/reducers/tick\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  store.addReducer(\"tick\", reducer, initialState)\n}\n\nmisago.addInitializer({\n  name: \"reducer:tick\",\n  initializer: initializer,\n  before: \"store\"\n})\n","import misago from \"misago/index\"\nimport reducer from \"misago/reducers/username-history\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  store.addReducer(\"username-history\", reducer, [])\n}\n\nmisago.addInitializer({\n  name: \"reducer:username-history\",\n  initializer: initializer,\n  before: \"store\"\n})\n","import misago from \"misago/index\"\nimport reducer from \"misago/reducers/users\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  store.addReducer(\"users\", reducer, [])\n}\n\nmisago.addInitializer({\n  name: \"reducer:users\",\n  initializer: initializer,\n  before: \"store\"\n})\n","import misago from \"misago/index\"\nimport snackbar from \"misago/services/snackbar\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  snackbar.init(store)\n}\n\nmisago.addInitializer({\n  name: \"snackbar\",\n  initializer: initializer,\n  after: \"store\"\n})\n","import misago from \"misago/index\"\nimport store from \"misago/services/store\"\n\nexport default function initializer() {\n  store.init()\n}\n\nmisago.addInitializer({\n  name: \"store\",\n  initializer: initializer,\n  before: \"_end\"\n})\n","import misago from \"misago/index\"\nimport { doTick } from \"misago/reducers/tick\"\nimport store from \"misago/services/store\"\n\nconst TICK_PERIOD = 50 * 1000 //do the tick every 50s\n\nexport default function initializer() {\n  window.setInterval(function() {\n    store.dispatch(doTick())\n  }, TICK_PERIOD)\n}\n\nmisago.addInitializer({\n  name: \"tick-start\",\n  initializer: initializer,\n  after: \"store\"\n})\n","import misago from \"misago/index\"\nimport include from \"misago/services/include\"\nimport zxcvbn from \"misago/services/zxcvbn\"\n\nexport default function initializer() {\n  zxcvbn.init(include)\n}\n\nmisago.addInitializer({\n  name: \"zxcvbn\",\n  initializer: initializer\n})\n","import { UPDATE_AVATAR, UPDATE_USERNAME } from \"misago/reducers/users\"\n\nexport var initialState = {\n  signedIn: false,\n  signedOut: false\n}\n\nexport const PATCH_USER = \"PATCH_USER\"\nexport const SIGN_IN = \"SIGN_IN\"\nexport const SIGN_OUT = \"SIGN_OUT\"\n\nexport function patch(patch) {\n  return {\n    type: PATCH_USER,\n    patch\n  }\n}\n\nexport function signIn(user) {\n  return {\n    type: SIGN_IN,\n    user\n  }\n}\n\nexport function signOut(soft = false) {\n  return {\n    type: SIGN_OUT,\n    soft\n  }\n}\n\nexport default function auth(state = initialState, action = null) {\n  switch (action.type) {\n    case PATCH_USER:\n      let newState = Object.assign({}, state)\n      newState.user = Object.assign({}, state.user, action.patch)\n      return newState\n\n    case SIGN_IN:\n      return Object.assign({}, state, {\n        signedIn: action.user\n      })\n\n    case SIGN_OUT:\n      return Object.assign({}, state, {\n        isAuthenticated: false,\n        isAnonymous: true,\n        signedOut: !action.soft\n      })\n\n    case UPDATE_AVATAR:\n      if (state.isAuthenticated && state.user.id === action.userId) {\n        let newState = Object.assign({}, state)\n        newState.user = Object.assign({}, state.user, {\n          avatars: action.avatars\n        })\n        return newState\n      }\n      return state\n\n    case UPDATE_USERNAME:\n      if (state.isAuthenticated && state.user.id === action.userId) {\n        let newState = Object.assign({}, state)\n        newState.user = Object.assign({}, state.user, {\n          username: action.username,\n          slug: action.slug\n        })\n        return newState\n      }\n      return state\n\n    default:\n      return state\n  }\n}\n","export const REPLACE_PARTICIPANTS = \"REPLACE_PARTICIPANTS\"\n\nexport function replace(newState) {\n  return {\n    type: REPLACE_PARTICIPANTS,\n    state: newState\n  }\n}\n\nexport default function participants(state = [], action = null) {\n  switch (action.type) {\n    case REPLACE_PARTICIPANTS:\n      return action.state\n\n    default:\n      return state\n  }\n}\n","import moment from \"moment\"\n\nexport const BUSY_POLL = \"BUSY_POLL\"\nexport const RELEASE_POLL = \"RELEASE_POLL\"\nexport const REMOVE_POLL = \"REMOVE_POLL\"\nexport const REPLACE_POLL = \"REPLACE_POLL\"\nexport const UPDATE_POLL = \"UPDATE_POLL\"\n\nexport function hydrate(json) {\n  let hasSelectedChoices = false\n  for (const i in json.choices) {\n    const choice = json.choices[i]\n    if (choice.selected) {\n      hasSelectedChoices = true\n      break\n    }\n  }\n\n  return Object.assign({}, json, {\n    posted_on: moment(json.posted_on),\n\n    hasSelectedChoices,\n    endsOn: json.length\n      ? moment(json.posted_on).add(json.length, \"days\")\n      : null,\n\n    isBusy: false\n  })\n}\n\nexport function busy() {\n  return {\n    type: BUSY_POLL\n  }\n}\n\nexport function release() {\n  return {\n    type: RELEASE_POLL\n  }\n}\n\nexport function replace(newState, hydrated = false) {\n  return {\n    type: REPLACE_POLL,\n    state: hydrated ? newState : hydrate(newState)\n  }\n}\n\nexport function update(data) {\n  return {\n    type: UPDATE_POLL,\n    data\n  }\n}\n\nexport function remove() {\n  return {\n    type: REMOVE_POLL\n  }\n}\n\nexport default function poll(state = {}, action = null) {\n  switch (action.type) {\n    case BUSY_POLL:\n      return Object.assign({}, state, { isBusy: true })\n\n    case RELEASE_POLL:\n      return Object.assign({}, state, { isBusy: false })\n\n    case REMOVE_POLL:\n      return {\n        isBusy: false\n      }\n\n    case REPLACE_POLL:\n      return action.state\n\n    case UPDATE_POLL:\n      return Object.assign({}, state, action.data)\n\n    default:\n      return state\n  }\n}\n","import moment from \"moment\"\nimport { hydrateUser } from \"./users\"\n\nexport const PATCH_POST = \"PATCH_POST\"\n\nexport function hydrate(json) {\n  return Object.assign({}, json, {\n    posted_on: moment(json.posted_on),\n    updated_on: moment(json.updated_on),\n    hidden_on: moment(json.hidden_on),\n\n    attachments: json.attachments\n      ? json.attachments.map(hydrateAttachment)\n      : null,\n    poster: json.poster ? hydrateUser(json.poster) : null,\n\n    isSelected: false,\n    isBusy: false,\n    isDeleted: false\n  })\n}\n\nexport function hydrateAttachment(json) {\n  return Object.assign({}, json, {\n    uploaded_on: moment(json.uploaded_on)\n  })\n}\n\nexport function patch(post, patch) {\n  return {\n    type: PATCH_POST,\n    post,\n    patch\n  }\n}\n\nexport default function post(state = {}, action = null) {\n  switch (action.type) {\n    case PATCH_POST:\n      if (state.id == action.post.id) {\n        return Object.assign({}, state, action.patch)\n      }\n      return state\n\n    default:\n      return state\n  }\n}\n","import postReducer, {\n  PATCH_POST,\n  hydrate as hydratePost\n} from \"misago/reducers/post\"\n\nexport const APPEND_POSTS = \"APPEND_POSTS\"\nexport const SELECT_POST = \"SELECT_POST\"\nexport const DESELECT_POST = \"DESELECT_POST\"\nexport const DESELECT_POSTS = \"DESELECT_POSTS\"\nexport const LOAD_POSTS = \"LOAD_POSTS\"\nexport const UNLOAD_POSTS = \"UNLOAD_POSTS\"\nexport const UPDATE_POSTS = \"UPDATE_POSTS\"\n\nexport function select(post) {\n  return {\n    type: SELECT_POST,\n    post\n  }\n}\n\nexport function deselect(post) {\n  return {\n    type: DESELECT_POST,\n    post\n  }\n}\n\nexport function deselectAll() {\n  return {\n    type: DESELECT_POSTS\n  }\n}\n\nexport function hydrate(json) {\n  return Object.assign({}, json, {\n    results: json.results.map(hydratePost),\n    isLoaded: true,\n    isBusy: false,\n    isSelected: false\n  })\n}\n\nexport function load(newState, hydrated = false) {\n  return {\n    type: LOAD_POSTS,\n    state: hydrated ? newState : hydrate(newState)\n  }\n}\n\nexport function append(newState, hydrated = false) {\n  return {\n    type: APPEND_POSTS,\n    state: hydrated ? newState : hydrate(newState)\n  }\n}\n\nexport function unload() {\n  return {\n    type: UNLOAD_POSTS\n  }\n}\n\nexport function update(newState) {\n  return {\n    type: UPDATE_POSTS,\n    update: newState\n  }\n}\n\nexport default function posts(state = {}, action = null) {\n  switch (action.type) {\n    case SELECT_POST:\n      const selectedPosts = state.results.map(post => {\n        if (post.id == action.post.id) {\n          return Object.assign({}, post, {\n            isSelected: true\n          })\n        } else {\n          return post\n        }\n      })\n\n      return Object.assign({}, state, {\n        results: selectedPosts\n      })\n\n    case DESELECT_POST:\n      const deseletedPosts = state.results.map(post => {\n        if (post.id == action.post.id) {\n          return Object.assign({}, post, {\n            isSelected: false\n          })\n        } else {\n          return post\n        }\n      })\n\n      return Object.assign({}, state, {\n        results: deseletedPosts\n      })\n\n    case DESELECT_POSTS:\n      const deseletedAllPosts = state.results.map(post => {\n        return Object.assign({}, post, {\n          isSelected: false\n        })\n      })\n\n      return Object.assign({}, state, {\n        results: deseletedAllPosts\n      })\n\n    case APPEND_POSTS:\n      let results = state.results.slice()\n      const resultsIds = state.results.map(post => {\n        return post.id\n      })\n\n      action.state.results.map(post => {\n        if (resultsIds.indexOf(post.id) === -1) {\n          results.push(post)\n        }\n      })\n\n      return Object.assign({}, action.state, {\n        results\n      })\n\n    case LOAD_POSTS:\n      return action.state\n\n    case UNLOAD_POSTS:\n      return Object.assign({}, state, {\n        isLoaded: false\n      })\n\n    case UPDATE_POSTS:\n      return Object.assign({}, state, action.update)\n\n    case PATCH_POST:\n      const reducedPosts = state.results.map(post => {\n        return postReducer(post, action)\n      })\n\n      return Object.assign({}, state, {\n        results: reducedPosts\n      })\n\n    default:\n      return state\n  }\n}\n","export const LOAD_DETAILS = \"LOAD_DETAILS\"\n\nexport function load(newState) {\n  return {\n    type: LOAD_DETAILS,\n\n    newState\n  }\n}\n\nexport default function details(state = {}, action = null) {\n  switch (action.type) {\n    case LOAD_DETAILS:\n      return action.newState\n\n    default:\n      return state\n  }\n}\n","import moment from \"moment\"\nimport {\n  UPDATE_AVATAR,\n  UPDATE_USERNAME,\n  hydrateStatus\n} from \"misago/reducers/users\"\n\nexport const HYDRATE_PROFILE = \"HYDRATE_PROFILE\"\nexport const PATCH_PROFILE = \"PATCH_PROFILE\"\n\nexport function hydrate(profile) {\n  return {\n    type: HYDRATE_PROFILE,\n    profile\n  }\n}\n\nexport function patch(patch) {\n  return {\n    type: PATCH_PROFILE,\n    patch\n  }\n}\n\nexport default function auth(state = {}, action = null) {\n  switch (action.type) {\n    case HYDRATE_PROFILE:\n      return Object.assign({}, action.profile, {\n        joined_on: moment(action.profile.joined_on),\n        status: hydrateStatus(action.profile.status)\n      })\n\n    case PATCH_PROFILE:\n      return Object.assign({}, state, action.patch)\n\n    case UPDATE_AVATAR:\n      if (state.id === action.userId) {\n        return Object.assign({}, state, {\n          avatars: action.avatars\n        })\n      }\n      return state\n\n    case UPDATE_USERNAME:\n      if (state.id === action.userId) {\n        return Object.assign({}, state, {\n          username: action.username,\n          slug: action.slug\n        })\n      }\n      return state\n\n    default:\n      return state\n  }\n}\n","export const REPLACE_SEARCH = \"REPLACE_SEARCH\"\nexport const UPDATE_SEARCH = \"UPDATE_SEARCH\"\nexport const UPDATE_SEARCH_PROVIDER = \"UPDATE_SEARCH_PROVIDER\"\n\nexport const initialState = {\n  isLoading: false,\n  query: \"\",\n  providers: []\n}\n\nexport function replace(newState) {\n  return {\n    type: REPLACE_SEARCH,\n    state: {\n      isLoading: false,\n      providers: newState\n    }\n  }\n}\n\nexport function update(newState) {\n  return {\n    type: UPDATE_SEARCH,\n    update: newState\n  }\n}\n\nexport function updateProvider(provider) {\n  return {\n    type: UPDATE_SEARCH_PROVIDER,\n    provider: provider\n  }\n}\n\nexport default function participants(state = {}, action = null) {\n  switch (action.type) {\n    case REPLACE_SEARCH:\n      return action.state\n\n    case UPDATE_SEARCH:\n      return Object.assign({}, state, action.update)\n\n    case UPDATE_SEARCH_PROVIDER:\n      return Object.assign({}, state, {\n        providers: state.providers.map(provider => {\n          if (provider.id === action.provider.id) {\n            return action.provider\n          } else {\n            return provider\n          }\n        })\n      })\n\n    default:\n      return state\n  }\n}\n","import { toggle } from \"misago/utils/sets\"\n\nexport const SELECT_ALL = \"SELECT_ALL\"\nexport const SELECT_NONE = \"SELECT_NONE\"\nexport const SELECT_ITEM = \"SELECT_ITEM\"\n\nexport function all(itemsIds) {\n  return {\n    type: SELECT_ALL,\n    items: itemsIds\n  }\n}\n\nexport function none() {\n  return {\n    type: SELECT_NONE\n  }\n}\n\nexport function item(itemId) {\n  return {\n    type: SELECT_ITEM,\n    item: itemId\n  }\n}\n\nexport default function selection(state = [], action = null) {\n  switch (action.type) {\n    case SELECT_ALL:\n      return action.items\n\n    case SELECT_NONE:\n      return []\n\n    case SELECT_ITEM:\n      return toggle(state, action.item)\n\n    default:\n      return state\n  }\n}\n","export var initialState = {\n  type: \"info\",\n  message: \"\",\n  isVisible: false\n}\n\nexport const SHOW_SNACKBAR = \"SHOW_SNACKBAR\"\nexport const HIDE_SNACKBAR = \"HIDE_SNACKBAR\"\n\nexport function showSnackbar(message, type) {\n  return {\n    type: SHOW_SNACKBAR,\n    message,\n    messageType: type\n  }\n}\n\nexport function hideSnackbar() {\n  return {\n    type: HIDE_SNACKBAR\n  }\n}\n\nexport default function snackbar(state = initialState, action = null) {\n  if (action.type === SHOW_SNACKBAR) {\n    return {\n      type: action.messageType,\n      message: action.message,\n      isVisible: true\n    }\n  } else if (action.type === HIDE_SNACKBAR) {\n    return Object.assign({}, state, {\n      isVisible: false\n    })\n  } else {\n    return state\n  }\n}\n","import moment from \"moment\"\nimport { REMOVE_POLL, REPLACE_POLL } from \"./poll\"\n\nexport const BUSY_THREAD = \"BUSY_THREAD\"\nexport const RELEASE_THREAD = \"RELEASE_THREAD\"\nexport const REPLACE_THREAD = \"REPLACE_THREAD\"\nexport const UPDATE_THREAD = \"UPDATE_THREAD\"\nexport const UPDATE_THREAD_ACL = \"UPDATE_THREAD_ACL\"\n\nexport function hydrate(json) {\n  return Object.assign({}, json, {\n    started_on: moment(json.started_on),\n    last_post_on: moment(json.last_post_on),\n    best_answer_marked_on: json.best_answer_marked_on\n      ? moment(json.best_answer_marked_on)\n      : null,\n\n    isBusy: false\n  })\n}\n\nexport function busy() {\n  return {\n    type: BUSY_THREAD\n  }\n}\n\nexport function release() {\n  return {\n    type: RELEASE_THREAD\n  }\n}\n\nexport function replace(newState, hydrated = false) {\n  return {\n    type: REPLACE_THREAD,\n    state: hydrated ? newState : hydrate(newState)\n  }\n}\n\nexport function update(data) {\n  return {\n    type: UPDATE_THREAD,\n    data\n  }\n}\n\nexport function updateAcl(data) {\n  return {\n    type: UPDATE_THREAD_ACL,\n    data\n  }\n}\n\nexport default function thread(state = {}, action = null) {\n  switch (action.type) {\n    case BUSY_THREAD:\n      return Object.assign({}, state, { isBusy: true })\n\n    case RELEASE_THREAD:\n      return Object.assign({}, state, { isBusy: false })\n\n    case REMOVE_POLL:\n      return Object.assign({}, state, { poll: null })\n\n    case REPLACE_POLL:\n      return Object.assign({}, state, { poll: action.state })\n\n    case REPLACE_THREAD:\n      return action.state\n\n    case UPDATE_THREAD:\n      return Object.assign({}, state, action.data)\n\n    case UPDATE_THREAD_ACL:\n      const acl = Object.assign({}, state.acl, action.data)\n      return Object.assign({}, state, { acl })\n\n    default:\n      return state\n  }\n}\n","import moment from \"moment\"\nimport concatUnique from \"misago/utils/concat-unique\"\n\nexport const APPEND_THREADS = \"APPEND_THREADS\"\nexport const DELETE_THREAD = \"DELETE_THREAD\"\nexport const FILTER_THREADS = \"FILTER_THREADS\"\nexport const HYDRATE_THREADS = \"HYDRATE_THREADS\"\nexport const PATCH_THREAD = \"PATCH_THREAD\"\nexport const SORT_THREADS = \"SORT_THREADS\"\n\nexport const MODERATION_PERMISSIONS = [\n  \"can_announce\",\n  \"can_approve\",\n  \"can_close\",\n  \"can_hide\",\n  \"can_move\",\n  \"can_merge\",\n  \"can_pin\",\n  \"can_review\"\n]\n\nexport function append(items, sorting) {\n  return {\n    type: APPEND_THREADS,\n    items,\n    sorting\n  }\n}\n\nexport function deleteThread(thread) {\n  return {\n    type: DELETE_THREAD,\n    thread\n  }\n}\n\nexport function filterThreads(category, categoriesMap) {\n  return {\n    type: FILTER_THREADS,\n    category,\n    categoriesMap\n  }\n}\n\nexport function hydrate(items) {\n  return {\n    type: HYDRATE_THREADS,\n    items\n  }\n}\n\nexport function patch(thread, patch, sorting = null) {\n  return {\n    type: PATCH_THREAD,\n    thread,\n    patch,\n    sorting\n  }\n}\n\nexport function sort(sorting) {\n  return {\n    type: SORT_THREADS,\n    sorting\n  }\n}\n\nexport function getThreadModerationOptions(thread_acl) {\n  let options = []\n  MODERATION_PERMISSIONS.forEach(function(perm) {\n    if (thread_acl[perm]) {\n      options.push(perm)\n    }\n  })\n  return options\n}\n\nexport function hydrateThread(thread) {\n  return Object.assign({}, thread, {\n    started_on: moment(thread.started_on),\n    last_post_on: moment(thread.last_post_on),\n    moderation: getThreadModerationOptions(thread.acl)\n  })\n}\n\nexport default function thread(state = [], action = null) {\n  switch (action.type) {\n    case APPEND_THREADS:\n      const mergedState = concatUnique(action.items.map(hydrateThread), state)\n      return mergedState.sort(action.sorting)\n\n    case DELETE_THREAD:\n      return state.filter(function(item) {\n        return item.id !== action.thread.id\n      })\n\n    case FILTER_THREADS:\n      return state.filter(function(item) {\n        const itemCategory = action.categoriesMap[item.category]\n        if (\n          itemCategory.lft >= action.category.lft &&\n          itemCategory.rght <= action.category.rght\n        ) {\n          // same or sub category\n          return true\n        } else if (item.weight == 2) {\n          // globally pinned\n          return true\n        } else {\n          // thread moved outside displayed scope, hide it\n          return false\n        }\n      })\n\n    case HYDRATE_THREADS:\n      return action.items.map(hydrateThread)\n\n    case PATCH_THREAD:\n      const patchedState = state.map(function(item) {\n        if (item.id === action.thread.id) {\n          return Object.assign({}, item, action.patch)\n        } else {\n          return item\n        }\n      })\n\n      if (action.sorting) {\n        return patchedState.sort(action.sorting)\n      }\n      return patchedState\n\n    case SORT_THREADS:\n      return state.sort(action.sorting)\n\n    default:\n      return state\n  }\n}\n","export var initialState = {\n  tick: 0\n}\n\nexport const TICK = \"TICK\"\n\nexport function doTick() {\n  return {\n    type: TICK\n  }\n}\n\nexport default function tick(state = initialState, action = null) {\n  if (action.type === TICK) {\n    return Object.assign({}, state, {\n      tick: state.tick + 1\n    })\n  } else {\n    return state\n  }\n}\n","import moment from \"moment\"\nimport { UPDATE_AVATAR, UPDATE_USERNAME } from \"misago/reducers/users\"\nimport concatUnique from \"misago/utils/concat-unique\"\n\nexport const ADD_NAME_CHANGE = \"ADD_NAME_CHANGE\"\nexport const APPEND_HISTORY = \"APPEND_HISTORY\"\nexport const HYDRATE_HISTORY = \"HYDRATE_HISTORY\"\n\nexport function addNameChange(change, user, changedBy) {\n  return {\n    type: ADD_NAME_CHANGE,\n    change,\n    user,\n    changedBy\n  }\n}\n\nexport function append(items) {\n  return {\n    type: APPEND_HISTORY,\n    items: items\n  }\n}\n\nexport function hydrate(items) {\n  return {\n    type: HYDRATE_HISTORY,\n    items: items\n  }\n}\n\nexport function hydrateNamechange(namechange) {\n  return Object.assign({}, namechange, {\n    changed_on: moment(namechange.changed_on)\n  })\n}\n\nexport default function username(state = [], action = null) {\n  switch (action.type) {\n    case ADD_NAME_CHANGE:\n      let newState = state.slice()\n      newState.unshift({\n        id: Math.floor(Date.now() / 1000), // just small hax for getting id\n        changed_by: action.changedBy,\n        changed_by_username: action.changedBy.username,\n        changed_on: moment(),\n        new_username: action.change.username,\n        old_username: action.user.username\n      })\n      return newState\n\n    case APPEND_HISTORY:\n      return concatUnique(state, action.items.map(hydrateNamechange))\n\n    case HYDRATE_HISTORY:\n      return action.items.map(hydrateNamechange)\n\n    case UPDATE_AVATAR:\n      return state.map(function(item) {\n        item = Object.assign({}, item)\n        if (item.changed_by && item.changed_by.id === action.userId) {\n          item.changed_by = Object.assign({}, item.changed_by, {\n            avatars: action.avatars\n          })\n        }\n\n        return item\n      })\n\n    case UPDATE_USERNAME:\n      return state.map(function(item) {\n        item = Object.assign({}, item)\n        if (item.changed_by && item.changed_by.id === action.userId) {\n          item.changed_by = Object.assign({}, item.changed_by, {\n            username: action.username,\n            slug: action.slug\n          })\n        }\n\n        return Object.assign({}, item)\n      })\n\n    default:\n      return state\n  }\n}\n","import moment from \"moment\"\nimport concatUnique from \"misago/utils/concat-unique\"\n\nexport const APPEND_USERS = \"APPEND_USERS\"\nexport const HYDRATE_USERS = \"HYDRATE_USERS\"\nexport const UPDATE_AVATAR = \"UPDATE_AVATAR\"\nexport const UPDATE_USERNAME = \"UPDATE_USERNAME\"\n\nexport function append(items) {\n  return {\n    type: APPEND_USERS,\n    items\n  }\n}\n\nexport function hydrate(items) {\n  return {\n    type: HYDRATE_USERS,\n    items\n  }\n}\n\nexport function hydrateStatus(status) {\n  if (status) {\n    return Object.assign({}, status, {\n      last_click: status.last_click ? moment(status.last_click) : null,\n      banned_until: status.banned_until ? moment(status.banned_until) : null\n    })\n  } else {\n    return null\n  }\n}\n\nexport function hydrateUser(user) {\n  return Object.assign({}, user, {\n    joined_on: moment(user.joined_on),\n    status: hydrateStatus(user.status)\n  })\n}\n\nexport function updateAvatar(user, avatars) {\n  return {\n    type: UPDATE_AVATAR,\n    userId: user.id,\n    avatars\n  }\n}\n\nexport function updateUsername(user, username, slug) {\n  return {\n    type: UPDATE_USERNAME,\n    userId: user.id,\n    username,\n    slug\n  }\n}\n\nexport default function user(state = [], action = null) {\n  switch (action.type) {\n    case APPEND_USERS:\n      return concatUnique(state, action.items.map(hydrateUser))\n\n    case HYDRATE_USERS:\n      return action.items.map(hydrateUser)\n\n    case UPDATE_AVATAR:\n      return state.map(function(item) {\n        item = Object.assign({}, item)\n        if (item.id === action.userId) {\n          item.avatars = action.avatars\n        }\n\n        return item\n      })\n\n    default:\n      return state\n  }\n}\n","export class Ajax {\n  constructor() {\n    this._cookieName = null\n    this._csrfToken = null\n    this._locks = {}\n  }\n\n  init(cookieName) {\n    this._cookieName = cookieName\n  }\n\n  getCsrfToken() {\n    if (document.cookie.indexOf(this._cookieName) !== -1) {\n      let cookieRegex = new RegExp(this._cookieName + \"=([^;]*)\")\n      let cookie = document.cookie.match(cookieRegex)[0]\n      return cookie ? cookie.split(\"=\")[1] : null\n    } else {\n      return null\n    }\n  }\n\n  request(method, url, data) {\n    let self = this\n    return new Promise(function(resolve, reject) {\n      let xhr = {\n        url: url,\n        method: method,\n        headers: {\n          \"X-CSRFToken\": self.getCsrfToken()\n        },\n\n        data: data ? JSON.stringify(data) : null,\n        contentType: \"application/json; charset=utf-8\",\n        dataType: \"json\",\n\n        success: function(data) {\n          resolve(data)\n        },\n\n        error: function(jqXHR) {\n          let rejection = jqXHR.responseJSON || {}\n\n          rejection.status = jqXHR.status\n\n          if (rejection.status === 0) {\n            rejection.detail = gettext(\"Lost connection with application.\")\n          }\n\n          if (rejection.status === 404) {\n            if (!rejection.detail || rejection.detail === \"NOT FOUND\") {\n              rejection.detail = gettext(\"Action link is invalid.\")\n            }\n          }\n\n          if (rejection.status === 500 && !rejection.detail) {\n            rejection.detail = gettext(\"Unknown error has occured.\")\n          }\n\n          rejection.statusText = jqXHR.statusText\n\n          reject(rejection)\n        }\n      }\n\n      $.ajax(xhr)\n    })\n  }\n\n  get(url, params, lock) {\n    if (params) {\n      url += \"?\" + $.param(params)\n    }\n\n    if (lock) {\n      let self = this\n\n      // update url in existing lock?\n      if (this._locks[lock]) {\n        this._locks[lock].url = url\n      }\n\n      // immediately dereference promise handlers without doing anything\n      // we are already waiting for existing response to resolve\n      if (this._locks[lock] && this._locks[lock].waiter) {\n        return {\n          then: function() {\n            return\n          }\n        }\n\n        // return promise that will begin when original one resolves\n      } else if (this._locks[lock] && this._locks[lock].wait) {\n        this._locks[lock].waiter = true\n\n        return new Promise(function(resolve, reject) {\n          let wait = function(url) {\n            // keep waiting on promise\n            if (self._locks[lock].wait) {\n              window.setTimeout(function() {\n                wait(url)\n              }, 300)\n\n              // poll for new url\n            } else if (self._locks[lock].url !== url) {\n              wait(self._locks[lock].url)\n\n              // ajax backend for response\n            } else {\n              self._locks[lock].waiter = false\n              self.request(\"GET\", self._locks[lock].url).then(\n                function(data) {\n                  if (self._locks[lock].url === url) {\n                    resolve(data)\n                  } else {\n                    self._locks[lock].waiter = true\n                    wait(self._locks[lock].url)\n                  }\n                },\n                function(rejection) {\n                  if (self._locks[lock].url === url) {\n                    reject(rejection)\n                  } else {\n                    self._locks[lock].waiter = true\n                    wait(self._locks[lock].url)\n                  }\n                }\n              )\n            }\n          }\n\n          window.setTimeout(function() {\n            wait(url)\n          }, 300)\n        })\n\n        // setup new lock without waiter\n      } else {\n        this._locks[lock] = {\n          url,\n          wait: true,\n          waiter: false\n        }\n\n        return new Promise(function(resolve, reject) {\n          self.request(\"GET\", url).then(\n            function(data) {\n              self._locks[lock].wait = false\n              if (self._locks[lock].url === url) {\n                resolve(data)\n              }\n            },\n            function(rejection) {\n              self._locks[lock].wait = false\n              if (self._locks[lock].url === url) {\n                reject(rejection)\n              }\n            }\n          )\n        })\n      }\n    } else {\n      return this.request(\"GET\", url)\n    }\n  }\n\n  post(url, data) {\n    return this.request(\"POST\", url, data)\n  }\n\n  patch(url, data) {\n    return this.request(\"PATCH\", url, data)\n  }\n\n  put(url, data) {\n    return this.request(\"PUT\", url, data)\n  }\n\n  delete(url, data) {\n    return this.request(\"DELETE\", url, data)\n  }\n\n  upload(url, data, progress) {\n    let self = this\n    return new Promise(function(resolve, reject) {\n      let xhr = {\n        url: url,\n        method: \"POST\",\n        headers: {\n          \"X-CSRFToken\": self.getCsrfToken()\n        },\n\n        data: data,\n        contentType: false,\n        processData: false,\n\n        xhr: function() {\n          let xhr = new window.XMLHttpRequest()\n          xhr.upload.addEventListener(\n            \"progress\",\n            function(evt) {\n              if (evt.lengthComputable) {\n                progress(Math.round((evt.loaded / evt.total) * 100))\n              }\n            },\n            false\n          )\n          return xhr\n        },\n\n        success: function(response) {\n          resolve(response)\n        },\n\n        error: function(jqXHR) {\n          let rejection = jqXHR.responseJSON || {}\n\n          rejection.status = jqXHR.status\n\n          if (rejection.status === 0) {\n            rejection.detail = gettext(\"Lost connection with application.\")\n          }\n\n          if (rejection.status === 413 && !rejection.detail) {\n            rejection.detail = gettext(\n              \"Upload was rejected by server as too large.\"\n            )\n          }\n\n          if (rejection.status === 404) {\n            if (!rejection.detail || rejection.detail === \"NOT FOUND\") {\n              rejection.detail = gettext(\"Action link is invalid.\")\n            }\n          }\n\n          if (rejection.status === 500 && !rejection.detail) {\n            rejection.detail = gettext(\"Unknown error has occured.\")\n          }\n\n          rejection.statusText = jqXHR.statusText\n\n          reject(rejection)\n        }\n      }\n\n      $.ajax(xhr)\n    })\n  }\n}\n\nexport default new Ajax()\n","import { signIn, signOut } from \"misago/reducers/auth\"\n\nexport class Auth {\n  init(store, local, modal) {\n    this._store = store\n    this._local = local\n    this._modal = modal\n\n    // tell other tabs what auth state is because we are most current with it\n    this.syncSession()\n\n    // listen for other tabs to tell us that state changed\n    this.watchState()\n  }\n\n  syncSession() {\n    const state = this._store.getState().auth\n    if (state.isAuthenticated) {\n      this._local.set(\"auth\", {\n        isAuthenticated: true,\n        username: state.user.username\n      })\n    } else {\n      this._local.set(\"auth\", {\n        isAuthenticated: false\n      })\n    }\n  }\n\n  watchState() {\n    const state = this._store.getState().auth\n    this._local.watch(\"auth\", newState => {\n      if (newState.isAuthenticated) {\n        this._store.dispatch(\n          signIn({\n            username: newState.username\n          })\n        )\n      } else if (state.isAuthenticated) {\n        // check if we are authenticated in this tab\n        // because some browser plugins prune local store\n        // aggressively, forcing erroneous message to display here\n        // tracking bug #955\n        this._store.dispatch(signOut())\n      }\n    })\n    this._modal.hide()\n  }\n\n  signIn(user) {\n    this._store.dispatch(signIn(user))\n    this._local.set(\"auth\", {\n      isAuthenticated: true,\n      username: user.username\n    })\n    this._modal.hide()\n  }\n\n  signOut() {\n    this._store.dispatch(signOut())\n    this._local.set(\"auth\", {\n      isAuthenticated: false\n    })\n    this._modal.hide()\n  }\n\n  softSignOut() {\n    this._store.dispatch(signOut(true))\n    this._local.set(\"auth\", {\n      isAuthenticated: false\n    })\n    this._modal.hide()\n  }\n}\n\nexport default new Auth()\n","/* global grecaptcha */\nimport React from \"react\"\nimport FormGroup from \"misago/components/form-group\"\n\nexport class BaseCaptcha {\n  init(context, ajax, include, snackbar) {\n    this._context = context\n    this._ajax = ajax\n    this._include = include\n    this._snackbar = snackbar\n  }\n}\n\nexport class NoCaptcha extends BaseCaptcha {\n  load() {\n    return new Promise(function(resolve) {\n      // immediately resolve as we don't have anything to validate\n      resolve()\n    })\n  }\n\n  validator() {\n    return null\n  }\n\n  component() {\n    return null\n  }\n}\n\nexport class QACaptcha extends BaseCaptcha {\n  load() {\n    var self = this\n    return new Promise((resolve, reject) => {\n      self._ajax.get(self._context.get(\"CAPTCHA_API\")).then(\n        function(data) {\n          self.question = data.question\n          self.helpText = data.help_text\n          resolve()\n        },\n        function() {\n          self._snackbar.error(gettext(\"Failed to load CAPTCHA.\"))\n          reject()\n        }\n      )\n    })\n  }\n\n  validator() {\n    return []\n  }\n\n  component(kwargs) {\n    return (\n      <FormGroup\n        label={this.question}\n        for=\"id_captcha\"\n        labelClass={kwargs.labelClass || \"\"}\n        controlClass={kwargs.controlClass || \"\"}\n        validation={kwargs.form.state.errors.captcha}\n        helpText={this.helpText || null}\n      >\n        <input\n          aria-describedby=\"id_captcha_status\"\n          className=\"form-control\"\n          disabled={kwargs.form.state.isLoading}\n          id=\"id_captcha\"\n          onChange={kwargs.form.bindInput(\"captcha\")}\n          type=\"text\"\n          value={kwargs.form.state.captcha}\n        />\n      </FormGroup>\n    )\n  }\n}\n\nexport class ReCaptchaComponent extends React.Component {\n  componentDidMount() {\n    grecaptcha.render(\"recaptcha\", {\n      sitekey: this.props.siteKey,\n      callback: response => {\n        // fire fakey event to binding\n        this.props.binding({\n          target: {\n            value: response\n          }\n        })\n      }\n    })\n  }\n\n  render() {\n    return <div id=\"recaptcha\" />\n  }\n}\n\nexport class ReCaptcha extends BaseCaptcha {\n  load() {\n    this._include.include(\"https://www.google.com/recaptcha/api.js\", true)\n\n    return new Promise(function(resolve) {\n      var wait = function() {\n        if (typeof grecaptcha === \"undefined\") {\n          window.setTimeout(function() {\n            wait()\n          }, 200)\n        } else {\n          resolve()\n        }\n      }\n      wait()\n    })\n  }\n\n  validator() {\n    return []\n  }\n\n  component(kwargs) {\n    return (\n      <FormGroup\n        label={gettext(\"Please solve the quick test\")}\n        for=\"id_captcha\"\n        labelClass={kwargs.labelClass || \"\"}\n        controlClass={kwargs.controlClass || \"\"}\n        validation={kwargs.form.state.errors.captcha}\n        helpText={gettext(\n          \"This test helps us prevent automated spam registrations on our site.\"\n        )}\n      >\n        <ReCaptchaComponent\n          binding={kwargs.form.bindInput(\"captcha\")}\n          siteKey={this._context.get(\"SETTINGS\").recaptcha_site_key}\n        />\n      </FormGroup>\n    )\n  }\n}\n\nexport class Captcha {\n  init(context, ajax, include, snackbar) {\n    switch (context.get(\"SETTINGS\").captcha_type) {\n      case \"no\":\n        this._captcha = new NoCaptcha()\n        break\n\n      case \"qa\":\n        this._captcha = new QACaptcha()\n        break\n\n      case \"re\":\n        this._captcha = new ReCaptcha()\n        break\n    }\n\n    this._captcha.init(context, ajax, include, snackbar)\n  }\n\n  // accessors for underlying strategy\n\n  load() {\n    return this._captcha.load()\n  }\n\n  validator() {\n    return this._captcha.validator()\n  }\n\n  component(kwargs) {\n    return this._captcha.component(kwargs)\n  }\n}\n\nexport default new Captcha()\n","export class Include {\n  init(staticUrl) {\n    this._staticUrl = staticUrl\n    this._included = []\n  }\n\n  include(script, remote = false) {\n    if (this._included.indexOf(script) === -1) {\n      this._included.push(script)\n      this._include(script, remote)\n    }\n  }\n\n  _include(script, remote) {\n    $.ajax({\n      url: (!remote ? this._staticUrl : \"\") + script,\n      cache: true,\n      dataType: \"script\"\n    })\n  }\n}\n\nexport default new Include()\n","let storage = window.localStorage\n\nexport class LocalStorage {\n  init(prefix) {\n    this._prefix = prefix\n    this._watchers = []\n\n    window.addEventListener(\"storage\", e => {\n      let newValueJson = JSON.parse(e.newValue)\n      this._watchers.forEach(function(watcher) {\n        if (watcher.key === e.key && e.oldValue !== e.newValue) {\n          watcher.callback(newValueJson)\n        }\n      })\n    })\n  }\n\n  set(key, value) {\n    storage.setItem(this._prefix + key, JSON.stringify(value))\n  }\n\n  get(key) {\n    let itemString = storage.getItem(this._prefix + key)\n    if (itemString) {\n      return JSON.parse(itemString)\n    } else {\n      return null\n    }\n  }\n\n  watch(key, callback) {\n    this._watchers.push({\n      key: this._prefix + key,\n      callback: callback\n    })\n  }\n}\n\nexport default new LocalStorage()\n","import mount from \"misago/utils/mount-component\"\n\nexport class MobileNavbarDropdown {\n  init(element) {\n    this._element = element\n    this._component = null\n  }\n\n  show(component) {\n    if (this._component === component) {\n      this.hide()\n    } else {\n      this._component = component\n      mount(component, this._element.id)\n      $(this._element).addClass(\"open\")\n    }\n  }\n\n  showConnected(name, component) {\n    if (this._component === name) {\n      this.hide()\n    } else {\n      this._component = name\n      mount(component, this._element.id, true)\n      $(this._element).addClass(\"open\")\n    }\n  }\n\n  hide() {\n    $(this._element).removeClass(\"open\")\n    this._component = null\n  }\n}\n\nexport default new MobileNavbarDropdown()\n","import ReactDOM from \"react-dom\"\nimport mount from \"misago/utils/mount-component\"\n\nexport class Modal {\n  init(element) {\n    this._element = element\n\n    this._modal = $(element).modal({ show: false })\n\n    this._modal.on(\"hidden.bs.modal\", () => {\n      ReactDOM.unmountComponentAtNode(this._element)\n    })\n  }\n\n  show(component) {\n    mount(component, this._element.id)\n    this._modal.modal(\"show\")\n  }\n\n  hide() {\n    this._modal.modal(\"hide\")\n  }\n}\n\nexport default new Modal()\n","export class PageTitle {\n  init(indexTitle, forumName) {\n    this._indexTitle = indexTitle\n    this._forumName = forumName\n  }\n\n  set(title) {\n    if (!title) {\n      document.title = this._indexTitle || this._forumName\n      return\n    }\n\n    if (typeof title === \"string\") {\n      title = { title: title }\n    }\n\n    let finalTitle = title.title\n\n    if (title.page > 1) {\n      const pageLabel = interpolate(\n        gettext(\"page: %(page)s\"),\n        {\n          page: title.page\n        },\n        true\n      )\n\n      finalTitle += \" (\" + pageLabel + \")\"\n    }\n\n    if (title.parent) {\n      finalTitle += \" | \" + title.parent\n    }\n\n    document.title = finalTitle + \" | \" + this._forumName\n  }\n}\n\nexport default new PageTitle()\n","export class Polls {\n  init(ajax, snackbar) {\n    this._ajax = ajax\n    this._snackbar = snackbar\n\n    this._polls = {}\n  }\n\n  start(kwargs) {\n    this.stop(kwargs.poll)\n\n    const poolServer = () => {\n      this._polls[kwargs.poll] = kwargs\n\n      this._ajax.get(kwargs.url, kwargs.data || null).then(\n        data => {\n          if (!this._polls[kwargs.poll]._stopped) {\n            kwargs.update(data)\n\n            this._polls[kwargs.poll].timeout = window.setTimeout(\n              poolServer,\n              kwargs.frequency\n            )\n          }\n        },\n        rejection => {\n          if (!this._polls[kwargs.poll]._stopped) {\n            if (kwargs.error) {\n              kwargs.error(rejection)\n            } else {\n              this._snackbar.apiError(rejection)\n            }\n          }\n        }\n      )\n    }\n\n    if (kwargs.delayed) {\n      this._polls[kwargs.poll] = {\n        timeout: window.setTimeout(poolServer, kwargs.frequency)\n      }\n    } else {\n      poolServer()\n    }\n  }\n\n  stop(pollId) {\n    if (this._polls[pollId]) {\n      window.clearTimeout(this._polls[pollId].timeout)\n      this._polls[pollId]._stopped = true\n    }\n  }\n}\n\nexport default new Polls()\n","import React from \"react\"\n\nexport default class extends React.Component {\n  onClick = () => {\n    this.props.replaceSelection(this.props.execAction)\n  }\n\n  render() {\n    return (\n      <button\n        className={\"btn btn-icon \" + this.props.className}\n        disabled={this.props.disabled}\n        onClick={this.onClick}\n        title={this.props.title}\n        type=\"button\"\n      >\n        {this.props.children}\n      </button>\n    )\n  }\n}\n","import React from \"react\"\nimport Action from \"./action\"\n\nexport default function(props) {\n  return (\n    <Action execAction={insertCode} title={gettext(\"Insert code\")} {...props}>\n      <span className=\"material-icon\">functions</span>\n    </Action>\n  )\n}\n\nexport function insertCode(selection, replace) {\n  const syntax = $.trim(\n    prompt(gettext(\"Enter name of syntax of your code (optional)\") + \":\")\n  )\n  replace(\"\\n\\n```\" + syntax + \"\\n\" + selection + \"\\n```\\n\\n\")\n}\n","import React from \"react\"\nimport Action from \"./action\"\n\nexport default function(props) {\n  return (\n    <Action\n      execAction={makeEmphasis}\n      title={gettext(\"Emphase selection\")}\n      {...props}\n    >\n      <span className=\"material-icon\">format_italic</span>\n    </Action>\n  )\n}\n\nexport function makeEmphasis(selection, replace) {\n  if (selection.length) {\n    replace(\"*\" + selection + \"*\")\n  }\n}\n","import React from \"react\"\nimport Action from \"./action\"\n\nexport default function(props) {\n  return (\n    <Action\n      execAction={insertHr}\n      title={gettext(\"Insert horizontal ruler\")}\n      {...props}\n    >\n      <span className=\"material-icon\">remove</span>\n    </Action>\n  )\n}\n\nexport function insertHr(selection, replace) {\n  replace(\"\\n\\n- - - - -\\n\\n\")\n}\n","const URL_PATTERN = new RegExp(\n  \"^(https?:\\\\/\\\\/)?((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*(\\\\?[;&a-z\\\\d%_.~+=-]*)?(\\\\#[-a-z\\\\d_]*)?$\",\n  \"i\"\n)\n\nexport default function(str) {\n  return URL_PATTERN.test($.trim(str))\n}\n","import React from \"react\"\nimport Action from \"./action\"\nimport isUrl from \"misago/utils/is-url\"\n\nexport default function(props) {\n  return (\n    <Action execAction={insertImage} title={gettext(\"Insert image\")} {...props}>\n      <span className=\"material-icon\">insert_photo</span>\n    </Action>\n  )\n}\n\nexport function insertImage(selection, replace) {\n  let url = \"\"\n  let label = \"\"\n\n  if (selection.length) {\n    if (isUrl(selection)) {\n      url = selection\n    } else {\n      label = selection\n    }\n  }\n\n  url = $.trim(prompt(gettext(\"Enter link to image\") + \":\", url))\n\n  if (url.length) {\n    label = $.trim(prompt(gettext(\"Enter image label (optional)\") + \":\", label))\n    if (label.length > 0) {\n      replace(\"![\" + label + \"](\" + url + \")\")\n    } else {\n      replace(\"!(\" + url + \")\")\n    }\n  }\n}\n","import React from \"react\"\nimport Action from \"./action\"\nimport isUrl from \"misago/utils/is-url\"\n\nexport default function(props) {\n  return (\n    <Action execAction={insertLink} title={gettext(\"Insert link\")} {...props}>\n      <span className=\"material-icon\">insert_link</span>\n    </Action>\n  )\n}\n\nexport function insertLink(selection, replace) {\n  let url = \"\"\n  let label = \"\"\n\n  if (selection.length) {\n    if (isUrl(selection)) {\n      url = selection\n    } else {\n      label = selection\n    }\n  }\n\n  url = $.trim(prompt(gettext(\"Enter link address\") + \":\", url) || \"\")\n  if (url.length === 0) return false\n  label = $.trim(prompt(gettext(\"Enter link label (optional)\") + \":\", label))\n\n  if (url.length) {\n    if (label.length > 0) {\n      replace(\"[\" + label + \"](\" + url + \")\")\n    } else {\n      replace(url)\n    }\n  }\n}\n","import React from \"react\"\nimport Action from \"./action\"\nimport isUrl from \"misago/utils/is-url\"\n\nexport default function(props) {\n  return (\n    <Action execAction={insertSpoiler} title={gettext(\"Insert spoiler\")} {...props}>\n      <span className=\"material-icon\">not_interested</span>\n    </Action>\n  )\n}\n\nexport function insertSpoiler(selection, replace) {\n  replace(\"\\n\\n[spoiler]\\n\" + selection + \"\\n[/spoiler]\\n\\n\")\n}\n","import React from \"react\"\nimport Action from \"./action\"\n\nexport default function(props) {\n  return (\n    <Action\n      execAction={makeStrikethrough}\n      title={gettext(\"Strikethrough selection\")}\n      {...props}\n    >\n      <span className=\"material-icon\">format_strikethrough</span>\n    </Action>\n  )\n}\n\nexport function makeStrikethrough(selection, replace) {\n  if (selection.length) {\n    replace(\"~~\" + selection + \"~~\")\n  }\n}\n","import React from \"react\"\nimport Action from \"./action\"\n\nexport default function(props) {\n  return (\n    <Action\n      execAction={makeStrong}\n      title={gettext(\"Bolder selection\")}\n      {...props}\n    >\n      <span className=\"material-icon\">format_bold</span>\n    </Action>\n  )\n}\n\nexport function makeStrong(selection, replace) {\n  if (selection.length) {\n    replace(\"**\" + selection + \"**\")\n  }\n}\n","import React from \"react\"\nimport Action from \"./action\"\nimport isUrl from \"misago/utils/is-url\"\n\nexport default function(props) {\n  return (\n    <Action execAction={insertQuote} title={gettext(\"Insert quote\")} {...props}>\n      <span className=\"material-icon\">format_quote</span>\n    </Action>\n  )\n}\n\nexport function insertQuote(selection, replace) {\n  let title = $.trim(\n    prompt(gettext(\"Enter quote autor, prefix usernames with @\") + \":\", title)\n  )\n\n  if (title) {\n    replace('\\n\\n[quote=\"' + title + '\"]\\n' + selection + \"\\n[/quote]\\n\\n\")\n  } else {\n    replace(\"\\n\\n[quote]\\n\" + selection + \"\\n[/quote]\\n\\n\")\n  }\n}\n","import React from \"react\"\nimport misago from \"misago\"\nimport escapeHtml from \"misago/utils/escape-html\"\nimport formatFilesize from \"misago/utils/file-size\"\n\nconst DATE_ABBR = '<abbr title=\"%(absolute)s\">%(relative)s</abbr>'\nconst USER_SPAN = '<span class=\"item-title\">%(user)s</span>'\nconst USER_URL = '<a href=\"%(url)s\" class=\"item-title\">%(user)s</a>'\n\nexport default class extends React.Component {\n  onInsert = () => {\n    this.props.replaceSelection(this.insertAttachment)\n  }\n\n  insertAttachment = (selection, replace) => {\n    const item = this.props.item\n\n    if (item.is_image) {\n      if (item.url.thumb) {\n        replace(\n          \"[![\" +\n            item.filename +\n            \"](\" +\n            item.url.thumb +\n            \")](\" +\n            item.url.index +\n            \")\"\n        )\n      } else {\n        replace(\n          \"[![\" +\n            item.filename +\n            \"](\" +\n            item.url.index +\n            \")](\" +\n            item.url.index +\n            \")\"\n        )\n      }\n    } else {\n      replace(\"[\" + item.filename + \"](\" + item.url.index + \")\")\n    }\n  }\n\n  onRemove = () => {\n    this.updateItem({\n      isRemoved: true\n    })\n  }\n\n  onUndo = () => {\n    this.updateItem({\n      isRemoved: false\n    })\n  }\n\n  updateItem = newState => {\n    const updatedAttachments = this.props.attachments.map(item => {\n      if (item.id === this.props.item.id) {\n        return Object.assign({}, item, newState)\n      } else {\n        return item\n      }\n    })\n    this.props.onAttachmentsChange(updatedAttachments)\n  }\n\n  render() {\n    return (\n      <li className=\"editor-attachment-complete\">\n        <div className=\"row\">\n          <div className=\"col-xs-12 col-sm-8 col-md-9\">\n            <Preview {...this.props} />\n            <div className=\"editor-attachment-details\">\n              <Filename {...this.props} />\n              <Details {...this.props} />\n            </div>\n          </div>\n          <div className=\"col-xs-12 col-sm-4 col-md-3 xs-margin-top-half\">\n            <Actions\n              onInsert={this.onInsert}\n              onRemove={this.onRemove}\n              onUndo={this.onUndo}\n              {...this.props}\n            />\n          </div>\n        </div>\n      </li>\n    )\n  }\n}\n\nexport function Preview(props) {\n  if (props.item.is_image) {\n    return <Image {...props} />\n  } else {\n    return <Icon {...props} />\n  }\n}\n\nexport function Image(props) {\n  const thumbnailUrl = props.item.url.thumb || props.item.url.index\n\n  return (\n    <div className=\"editor-attachment-image\">\n      <a\n        href={props.item.url.index + \"?shva=1\"}\n        style={{ backgroundImage: \"url('\" + thumbnailUrl + \"?shva=1')\" }}\n        target=\"_blank\"\n      />\n    </div>\n  )\n}\n\nexport function Icon(props) {\n  return (\n    <div className=\"editor-attachment-icon\">\n      <span className=\"material-icon\">insert_drive_file</span>\n    </div>\n  )\n}\n\nexport function Filename(props) {\n  return (\n    <h4>\n      <a\n        className=\"item-title\"\n        href={props.item.url.index + \"?shva=1\"}\n        target=\"_blank\"\n      >\n        {props.item.filename}\n      </a>\n    </h4>\n  )\n}\n\nexport function Details(props) {\n  let user = null\n  if (props.item.url.uploader) {\n    user = interpolate(\n      USER_URL,\n      {\n        url: escapeHtml(props.item.url.uploader),\n        user: escapeHtml(props.item.uploader_name)\n      },\n      true\n    )\n  } else {\n    user = interpolate(\n      USER_SPAN,\n      {\n        user: escapeHtml(props.item.uploader_name)\n      },\n      true\n    )\n  }\n\n  const date = interpolate(\n    DATE_ABBR,\n    {\n      absolute: escapeHtml(props.item.uploaded_on.format(\"LLL\")),\n      relative: escapeHtml(props.item.uploaded_on.fromNow())\n    },\n    true\n  )\n\n  const message = interpolate(\n    escapeHtml(\n      gettext(\n        \"%(filetype)s, %(size)s, uploaded by %(uploader)s %(uploaded_on)s.\"\n      )\n    ),\n    {\n      filetype: props.item.filetype,\n      size: formatFilesize(props.item.size),\n      uploader: user,\n      uploaded_on: date\n    },\n    true\n  )\n\n  return <p dangerouslySetInnerHTML={{ __html: message }} />\n}\n\nexport function Actions(props) {\n  return (\n    <div className=\"editor-attachment-actions\">\n      <div className=\"row\">\n        <Insert {...props} />\n        <Remove {...props} />\n        <Undo {...props} />\n      </div>\n    </div>\n  )\n}\n\nexport function Insert(props) {\n  if (!!props.item.isRemoved) {\n    return null\n  }\n\n  return (\n    <div className=\"col-xs-6\">\n      <button\n        className=\"btn btn-default btn-sm btn-block\"\n        onClick={props.onInsert}\n        type=\"button\"\n      >\n        {gettext(\"Insert\")}\n      </button>\n    </div>\n  )\n}\n\nexport function Remove(props) {\n  if (!!props.item.isRemoved && props.item.acl.can_delete) {\n    return null\n  }\n\n  return (\n    <div className=\"col-xs-6\">\n      <button\n        className=\"btn btn-default btn-sm btn-block\"\n        onClick={props.onRemove}\n        type=\"button\"\n      >\n        {gettext(\"Remove\")}\n      </button>\n    </div>\n  )\n}\n\nexport function Undo(props) {\n  if (!props.item.isRemoved) {\n    return null\n  }\n\n  return (\n    <div className=\"col-xs-12\">\n      <button\n        className=\"btn btn-default btn-sm btn-block\"\n        onClick={props.onUndo}\n        type=\"button\"\n      >\n        {gettext(\"Undo removal\")}\n      </button>\n    </div>\n  )\n}\n","import React from \"react\"\nimport escapeHtml from \"misago/utils/escape-html\"\n\nconst STRONG = \"<strong>%(name)s</strong>\"\n\nexport default class extends React.Component {\n  onClick = () => {\n    const filteredAttachments = this.props.attachments.filter(item => {\n      return item.key !== this.props.item.key\n    })\n    this.props.onAttachmentsChange(filteredAttachments)\n  }\n\n  render() {\n    const filename = interpolate(\n      STRONG,\n      {\n        name: escapeHtml(this.props.item.filename)\n      },\n      true\n    )\n\n    const title = interpolate(\n      gettext(\"Error uploading %(filename)s\"),\n      {\n        filename,\n        progress: this.props.item.progress + \"%\"\n      },\n      true\n    )\n\n    return (\n      <li className=\"editor-attachment-error\">\n        <div className=\"editor-attachment-error-icon\">\n          <span className=\"material-icon\">warning</span>\n        </div>\n        <div className=\"editor-attachment-error-message\">\n          <h4 dangerouslySetInnerHTML={{ __html: title + \":\" }} />\n          <p>{this.props.item.error}</p>\n          <button\n            className=\"btn btn-default btn-sm\"\n            onClick={this.onClick}\n            type=\"button\"\n          >\n            {gettext(\"Dismiss\")}\n          </button>\n        </div>\n      </li>\n    )\n  }\n}\n","import React from \"react\"\nimport escapeHtml from \"misago/utils/escape-html\"\n\nconst STRONG = \"<strong>%(name)s</strong>\"\n\nexport default function(props) {\n  const filename = interpolate(\n    STRONG,\n    {\n      name: escapeHtml(props.item.filename)\n    },\n    true\n  )\n\n  const message = interpolate(\n    gettext(\"Uploading %(filename)s... %(progress)s\"),\n    {\n      filename,\n      progress: props.item.progress + \"%\"\n    },\n    true\n  )\n\n  return (\n    <li className=\"editor-attachment-upload\">\n      <div className=\"editor-attachment-progress-bar\">\n        <div\n          className=\"editor-attachment-progress\"\n          style={{ width: props.item.progress + \"%\" }}\n        />\n      </div>\n      <p\n        className=\"editor-attachment-upload-message\"\n        dangerouslySetInnerHTML={{ __html: message }}\n      />\n    </li>\n  )\n}\n","import React from \"react\"\nimport AttachmentComplete from \"./complete\"\nimport AttachmentError from \"./error\"\nimport AttachmentUpload from \"./upload\"\nimport misago from \"misago\"\nimport escapeHtml from \"misago/utils/escape-html\"\n\nexport default function(props) {\n  if (props.item.id) {\n    return <AttachmentComplete {...props} />\n  }\n\n  if (props.item.error) {\n    return <AttachmentError {...props} />\n  }\n\n  return <AttachmentUpload {...props} />\n}\n","import React from \"react\"\nimport Attachment from \"./attachment\"\n\nexport default function(props) {\n  return (\n    <ul className=\"list-unstyled editor-attachments-list\">\n      {props.attachments.map(item => {\n        return <Attachment item={item} key={item.id || item.key} {...props} />\n      })}\n    </ul>\n  )\n}\n","import React from \"react\"\nimport moment from \"moment\"\nimport misago from \"misago\"\nimport ajax from \"misago/services/ajax\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends React.Component {\n  onChange = event => {\n    const file = event.target.files[0]\n    if (!file) {\n      return\n    }\n\n    let upload = {\n      id: null,\n      key: getRandomKey(),\n      progress: 0,\n      error: null,\n      filename: file.name\n    }\n\n    this.props.onAttachmentsChange([upload].concat(this.props.attachments))\n\n    const data = new FormData()\n    data.append(\"upload\", file)\n\n    ajax\n      .upload(misago.get(\"ATTACHMENTS_API\"), data, progress => {\n        upload.progress = progress\n        this.props.onAttachmentsChange(this.props.attachments.concat())\n      })\n      .then(\n        data => {\n          data.uploaded_on = moment(data.uploaded_on)\n          Object.assign(upload, data)\n          this.props.onAttachmentsChange(this.props.attachments.concat())\n        },\n        rejection => {\n          if (rejection.status === 400 || rejection.status === 413) {\n            upload.error = rejection.detail\n            this.props.onAttachmentsChange(this.props.attachments.concat())\n          } else {\n            snackbar.apiError(rejection)\n          }\n        }\n      )\n  }\n\n  render() {\n    return (\n      <input id=\"editor-upload-field\" onChange={this.onChange} type=\"file\" />\n    )\n  }\n}\n\nexport function getRandomKey() {\n  return \"upld-\" + Math.round(new Date().getTime())\n}\n","import React from \"react\"\nimport List from \"./list\"\nimport Uploader from \"./uploader\"\nimport misago from \"misago\"\n\nexport default function(props) {\n  if (!misago.get(\"user\").acl.max_attachment_size) {\n    return null\n  }\n\n  return (\n    <div className=\"editor-attachments\">\n      <List {...props} />\n      <Uploader {...props} />\n    </div>\n  )\n}\n","import React from \"react\"\nimport misago from \"misago\"\n\nexport default class extends React.Component {\n  onClick = () => {\n    document.getElementById(\"editor-upload-field\").click()\n  }\n\n  render() {\n    if (!misago.get(\"user\").acl.max_attachment_size) {\n      return null\n    }\n\n    return (\n      <button\n        className={\"btn btn-icon \" + this.props.className}\n        disabled={this.props.disabled}\n        onClick={this.onClick}\n        title={gettext(\"Upload file\")}\n        type=\"button\"\n      >\n        <span className=\"material-icon\">file_upload</span>\n      </button>\n    )\n  }\n}\n","import React from \"react\"\nimport MisagoMarkup from \"misago/components/misago-markup\"\n\nexport default function(props) {\n  return (\n    <div className=\"modal-dialog\" role=\"document\">\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <button\n            aria-label={gettext(\"Close\")}\n            className=\"close\"\n            data-dismiss=\"modal\"\n            type=\"button\"\n          >\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n          <h4 className=\"modal-title\">{gettext(\"Preview message\")}</h4>\n        </div>\n        <div className=\"modal-body markup-preview\">\n          <MisagoMarkup markup={props.markup} />\n        </div>\n      </div>\n    </div>\n  )\n}\n","export const textareaId = \"editor-textarea\"\n\nexport function getTextarea() {\n  return document.getElementById(textareaId)\n}\n\nexport function getValue() {\n  return document.getElementById(textareaId).value\n}\n\nexport function getSelectionRange(start, end) {\n  return {\n    start,\n    end\n  }\n}\n\nexport function getSelection() {\n  const ctrl = getTextarea()\n  if (document.selection) {\n    ctrl.focus()\n    const range = document.selection.createRange()\n    const length = range.text.length\n    range.moveStart(\"character\", -ctrl.value.length)\n    return getSelectionRange(range.text.length - length, range.text.length)\n  } else if (ctrl.selectionStart || ctrl.selectionStart == \"0\") {\n    return getSelectionRange(ctrl.selectionStart, ctrl.selectionEnd)\n  }\n}\n\nexport function getSelectionText() {\n  const range = getSelection()\n  return $.trim(getValue().substring(range.start, range.end))\n}\n\nexport function setSelection(selectionRange) {\n  const ctrl = getTextarea()\n  if (ctrl.setSelectionRange) {\n    ctrl.focus()\n    ctrl.setSelectionRange(selectionRange.start, selectionRange.end)\n  } else if (ctrl.createTextRange) {\n    const range = ctrl.createTextRange()\n    range.collapse(true)\n    range.moveStart(\"character\", selectionRange.start)\n    range.moveEnd(\"character\", selectionRange.end)\n    range.select()\n  }\n}\n\nexport function _replace(myRange, replacement) {\n  const ctrl = getTextarea()\n  const text = ctrl.value\n  const startText = text.substring(0, myRange.start)\n  ctrl.value =\n    text.substring(0, myRange.start) + replacement + text.substring(myRange.end)\n  setSelection(\n    getSelectionRange(\n      startText.length + replacement.length,\n      startText.length + replacement.length\n    )\n  )\n  return ctrl.value\n}\n\nexport function replace(replacement) {\n  return _replace(getSelection(), replacement)\n}\n","import React from \"react\"\nimport Code from \"./actions/code\"\nimport Emphasis from \"./actions/emphasis\"\nimport Hr from \"./actions/hr\"\nimport Image from \"./actions/image\"\nimport Link from \"./actions/link\"\nimport Spoiler from \"./actions/spoiler\"\nimport Strikethrough from \"./actions/strikethrough\"\nimport Strong from \"./actions/strong\"\nimport Quote from \"./actions/quote\"\nimport AttachmentsEditor from \"./attachments\"\nimport Upload from \"./attachments/upload-button\"\nimport MarkupPreview from \"./markup-preview\"\nimport * as textUtils from \"./textutils\"\nimport Button from \"misago/components/button\"\nimport misago from \"misago\"\nimport ajax from \"misago/services/ajax\"\nimport modal from \"misago/services/modal\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isPreviewLoading: false\n    }\n  }\n\n  componentDidMount() {\n    $(\"#editor-textarea\").atwho({\n      at: \"@\",\n      displayTpl: '<li><img src=\"${avatar}\" alt=\"\">${username}</li>',\n      insertTpl: \"@${username}\",\n      searchKey: \"username\",\n      callbacks: {\n        remoteFilter: function(query, callback) {\n          $.getJSON(misago.get(\"MENTION_API\"), { q: query }, callback)\n        }\n      }\n    })\n\n    $(\"#editor-textarea\").on(\"inserted.atwho\", (event, flag, query) => {\n      this.props.onChange(event)\n    })\n  }\n\n  onPreviewClick = () => {\n    if (this.state.isPreviewLoading) {\n      return\n    }\n\n    this.setState({\n      isPreviewLoading: true\n    })\n\n    ajax.post(misago.get(\"PARSE_MARKUP_API\"), { post: this.props.value }).then(\n      data => {\n        modal.show(<MarkupPreview markup={data.parsed} />)\n\n        this.setState({\n          isPreviewLoading: false\n        })\n      },\n      rejection => {\n        if (rejection.status === 400) {\n          snackbar.error(rejection.detail)\n        } else {\n          snackbar.apiError(rejection)\n        }\n\n        this.setState({\n          isPreviewLoading: false\n        })\n      }\n    )\n  }\n\n  replaceSelection = operation => {\n    operation(textUtils.getSelectionText(), this._replaceSelection)\n  }\n\n  _replaceSelection = newValue => {\n    this.props.onChange({\n      target: {\n        value: textUtils.replace(newValue)\n      }\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"editor-border\">\n        <textarea\n          className=\"form-control\"\n          value={this.props.value}\n          disabled={this.props.loading}\n          id=\"editor-textarea\"\n          onChange={this.props.onChange}\n          rows=\"9\"\n        />\n        <div className=\"editor-footer\">\n          <div className=\"buttons-list pull-left\">\n            <Strong\n              className=\"btn-default btn-sm pull-left\"\n              disabled={this.props.loading || this.state.isPreviewLoading}\n              replaceSelection={this.replaceSelection}\n            />\n            <Emphasis\n              className=\"btn-default btn-sm pull-left\"\n              disabled={this.props.loading || this.state.isPreviewLoading}\n              replaceSelection={this.replaceSelection}\n            />\n            <Strikethrough\n              className=\"btn-default btn-sm pull-left\"\n              disabled={this.props.loading || this.state.isPreviewLoading}\n              replaceSelection={this.replaceSelection}\n            />\n            <Hr\n              className=\"btn-default btn-sm pull-left\"\n              disabled={this.props.loading || this.state.isPreviewLoading}\n              replaceSelection={this.replaceSelection}\n            />\n            <Link\n              className=\"btn-default btn-sm pull-left\"\n              disabled={this.props.loading || this.state.isPreviewLoading}\n              replaceSelection={this.replaceSelection}\n            />\n            <Image\n              className=\"btn-default btn-sm pull-left\"\n              disabled={this.props.loading || this.state.isPreviewLoading}\n              replaceSelection={this.replaceSelection}\n            />\n            <Quote\n              className=\"btn-default btn-sm pull-left\"\n              disabled={this.props.loading || this.state.isPreviewLoading}\n              replaceSelection={this.replaceSelection}\n            />\n            <Spoiler\n              className=\"btn-default btn-sm pull-left\"\n              disabled={this.props.loading || this.state.isPreviewLoading}\n              replaceSelection={this.replaceSelection}\n            />\n            <Code\n              className=\"btn-default btn-sm pull-left\"\n              disabled={this.props.loading || this.state.isPreviewLoading}\n              replaceSelection={this.replaceSelection}\n            />\n            <Upload\n              className=\"btn-default btn-sm pull-left\"\n              disabled={this.props.loading || this.state.isPreviewLoading}\n            />\n          </div>\n          <Button\n            className=\"btn-default btn-sm pull-left\"\n            disabled={this.props.loading || this.state.isPreviewLoading}\n            onClick={this.onPreviewClick}\n            type=\"button\"\n          >\n            {gettext(\"Preview\")}\n          </Button>\n          <Button\n            className=\"btn-primary btn-sm pull-right\"\n            loading={this.props.loading}\n          >\n            {this.props.submitLabel || gettext(\"Post\")}\n          </Button>\n          <button\n            className=\"btn btn-default btn-sm pull-right\"\n            disabled={this.props.loading}\n            onClick={this.props.onCancel}\n            type=\"button\"\n          >\n            {gettext(\"Cancel\")}\n          </button>\n          <div className=\"clearfix visible-xs-block\" />\n          <Protect\n            canProtect={this.props.canProtect}\n            disabled={this.props.loading}\n            onProtect={this.props.onProtect}\n            onUnprotect={this.props.onUnprotect}\n            protect={this.props.protect}\n          />\n        </div>\n        <AttachmentsEditor\n          attachments={this.props.attachments}\n          onAttachmentsChange={this.props.onAttachmentsChange}\n          placeholder={this.props.placeholder}\n          replaceSelection={this.replaceSelection}\n        />\n      </div>\n    )\n  }\n}\n\nexport function Protect(props) {\n  if (!props.canProtect) return null\n\n  const label = props.protect ? gettext(\"Protected\") : gettext(\"Protect\")\n\n  return (\n    <button\n      className=\"btn btn-icon btn-default btn-protect btn-sm pull-right\"\n      disabled={props.disabled}\n      onClick={props.protect ? props.onUnprotect : props.onProtect}\n      title={label}\n      type=\"button\"\n    >\n      <span className=\"material-icon\">\n        {props.protect ? \"lock\" : \"lock_outline\"}\n      </span>\n      <span className=\"btn-text hidden-md hidden-lg\">{label}</span>\n    </button>\n  )\n}\n","import React from \"react\"\n\nexport default function(props) {\n  return (\n    <div className={props.className}>\n      <div className=\"container\">{props.children}</div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport Container from \"./container\"\nimport Loader from \"misago/components/loader\"\n\nexport default function(props) {\n  return (\n    <Container className=\"posting-loader\">\n      <Loader />\n    </Container>\n  )\n}\n","import React from \"react\"\nimport Container from \"./container\"\nimport posting from \"misago/services/posting\"\n\nexport default function(props) {\n  return (\n    <Container className=\"posting-message\">\n      <div className=\"message-body\">\n        <p>\n          <span className=\"material-icon\">error_outline</span>\n          {props.message}\n        </p>\n        <button\n          type=\"button\"\n          className=\"btn btn-default\"\n          onClick={posting.close}\n        >\n          {gettext(\"Dismiss\")}\n        </button>\n      </div>\n    </Container>\n  )\n}\n","import React from \"react\"\n\nexport default function(props) {\n  if (!props.showOptions) return null\n\n  const { columns } = props\n\n  let className = \"col-xs-12 xs-margin-top\"\n\n  if (columns === 1) {\n    className += \" col-sm-2\"\n  } else {\n    className += \" sm-margin-top\"\n  }\n\n  if (columns === 3) {\n    className += \" col-md-3\"\n  } else {\n    className += \" col-md-2\"\n  }\n  className += \" posting-options\"\n\n  const columnClassName = \"col-xs-\" + 12 / columns\n\n  let textClassName = \"btn-text\"\n  if (columns === 3) {\n    textClassName += \" visible-sm-inline-block\"\n  } else if (columns === 2) {\n    textClassName += \" hidden-md hidden-lg\"\n  } else {\n    textClassName += \" hidden-sm\"\n  }\n\n  return (\n    <div className={className}>\n      <div className=\"row\">\n        <PinOptions\n          className={columnClassName}\n          disabled={props.disabled}\n          onPinGlobally={props.onPinGlobally}\n          onPinLocally={props.onPinLocally}\n          onUnpin={props.onUnpin}\n          pin={props.pin}\n          show={props.options.pin}\n          textClassName={textClassName}\n        />\n        <HideOptions\n          className={columnClassName}\n          disabled={props.disabled}\n          hide={props.hide}\n          onHide={props.onHide}\n          onUnhide={props.onUnhide}\n          show={props.options.hide}\n          textClassName={textClassName}\n        />\n        <CloseOptions\n          className={columnClassName}\n          close={props.close}\n          disabled={props.disabled}\n          onClose={props.onClose}\n          onOpen={props.onOpen}\n          show={props.options.close}\n          textClassName={textClassName}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport function CloseOptions(props) {\n  if (!props.show) return null\n\n  const label = props.close ? gettext(\"Closed\") : gettext(\"Open\")\n\n  return (\n    <div className={props.className}>\n      <button\n        className=\"btn btn-default btn-block\"\n        disabled={props.disabled}\n        onClick={props.close ? props.onOpen : props.onClose}\n        title={label}\n        type=\"button\"\n      >\n        <span className=\"material-icon\">\n          {props.close ? \"lock\" : \"lock_outline\"}\n        </span>\n        <span className={props.textClassName}>{label}</span>\n      </button>\n    </div>\n  )\n}\n\nexport function HideOptions(props) {\n  if (!props.show) return null\n\n  const label = props.hide ? gettext(\"Hidden\") : gettext(\"Not hidden\")\n\n  return (\n    <div className={props.className}>\n      <button\n        className=\"btn btn-default btn-block\"\n        disabled={props.disabled}\n        onClick={props.hide ? props.onUnhide : props.onHide}\n        title={label}\n        type=\"button\"\n      >\n        <span className=\"material-icon\">\n          {props.hide ? \"visibility_off\" : \"visibility\"}\n        </span>\n        <span className={props.textClassName}>{label}</span>\n      </button>\n    </div>\n  )\n}\n\nexport function PinOptions(props) {\n  if (!props.show) return null\n\n  let icon = null\n  let onClick = null\n  let label = null\n\n  switch (props.pin) {\n    case 0:\n      icon = \"radio_button_unchecked\"\n      onClick = props.onPinLocally\n      label = gettext(\"Unpinned\")\n      break\n\n    case 1:\n      icon = \"bookmark_outline\"\n      onClick = props.onPinGlobally\n      label = gettext(\"Pinned locally\")\n\n      if (props.show == 2) {\n        onClick = props.onPinGlobally\n      } else {\n        onClick = props.onUnpin\n      }\n\n      break\n\n    case 2:\n      icon = \"bookmark\"\n      onClick = props.onUnpin\n      label = gettext(\"Pinned globally\")\n      break\n  }\n\n  return (\n    <div className={props.className}>\n      <button\n        className=\"btn btn-default btn-block\"\n        disabled={props.disabled}\n        onClick={onClick}\n        title={label}\n        type=\"button\"\n      >\n        <span className=\"material-icon\">{icon}</span>\n        <span className={props.textClassName}>{label}</span>\n      </button>\n    </div>\n  )\n}\n","import moment from \"moment\"\n\nexport function clean(attachments) {\n  const completedAttachments = attachments.filter(attachment => {\n    return attachment.id && !attachment.isRemoved\n  })\n\n  return completedAttachments.map(a => {\n    return a.id\n  })\n}\n\nexport function hydrate(attachments) {\n  return attachments.map(attachment => {\n    return Object.assign({}, attachment, {\n      uploaded_on: moment(attachment.uploaded_on)\n    })\n  })\n}\n","import React from \"react\"\nimport CategorySelect from \"misago/components/category-select\"\nimport Editor from \"misago/components/editor\"\nimport Form from \"misago/components/form\"\nimport Container from \"./utils/container\"\nimport Loader from \"./utils/loader\"\nimport Message from \"./utils/message\"\nimport Options from \"./utils/options\"\nimport * as attachments from \"./utils/attachments\"\nimport { getPostValidators, getTitleValidators } from \"./utils/validators\"\nimport ajax from \"misago/services/ajax\"\nimport posting from \"misago/services/posting\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isReady: false,\n      isLoading: false,\n      isErrored: false,\n\n      showOptions: false,\n      categoryOptions: null,\n\n      title: \"\",\n      category: props.category || null,\n      categories: [],\n      post: \"\",\n      attachments: [],\n      close: false,\n      hide: false,\n      pin: 0,\n\n      validators: {\n        title: getTitleValidators(),\n        post: getPostValidators()\n      },\n      errors: {}\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(this.props.config).then(this.loadSuccess, this.loadError)\n  }\n\n  loadSuccess = data => {\n    let category = null\n    let showOptions = false\n    let categoryOptions = null\n\n    // hydrate categories, extract posting options\n    const categories = data.map(item => {\n      // pick first category that allows posting and if it may, override it with initial one\n      if (\n        item.post !== false &&\n        (!category || item.id == this.state.category)\n      ) {\n        category = item.id\n        categoryOptions = item.post\n      }\n\n      if (item.post && (item.post.close || item.post.hide || item.post.pin)) {\n        showOptions = true\n      }\n\n      return Object.assign(item, {\n        disabled: item.post === false,\n        label: item.name,\n        value: item.id\n      })\n    })\n\n    this.setState({\n      isReady: true,\n      showOptions,\n\n      categories,\n      category,\n      categoryOptions\n    })\n  }\n\n  loadError = rejection => {\n    this.setState({\n      isErrored: rejection.detail\n    })\n  }\n\n  onCancel = () => {\n    const cancel = window.confirm(gettext(\"Are you sure you want to discard thread?\"))\n    if (cancel) {\n      posting.close()\n    }\n  }\n\n  onTitleChange = event => {\n    this.changeValue(\"title\", event.target.value)\n  }\n\n  onCategoryChange = event => {\n    const category = this.state.categories.find(item => {\n      return event.target.value == item.value\n    })\n\n    // if selected pin is greater than allowed, reduce it\n    let pin = this.state.pin\n    if (category.post.pin && category.post.pin < pin) {\n      pin = category.post.pin\n    }\n\n    this.setState({\n      category: category.id,\n      categoryOptions: category.post,\n\n      pin\n    })\n  }\n\n  onPostChange = event => {\n    this.changeValue(\"post\", event.target.value)\n  }\n\n  onAttachmentsChange = attachments => {\n    this.setState({\n      attachments\n    })\n  }\n\n  onClose = () => {\n    this.changeValue(\"close\", true)\n  }\n\n  onOpen = () => {\n    this.changeValue(\"close\", false)\n  }\n\n  onPinGlobally = () => {\n    this.changeValue(\"pin\", 2)\n  }\n\n  onPinLocally = () => {\n    this.changeValue(\"pin\", 1)\n  }\n\n  onUnpin = () => {\n    this.changeValue(\"pin\", 0)\n  }\n\n  onHide = () => {\n    this.changeValue(\"hide\", true)\n  }\n\n  onUnhide = () => {\n    this.changeValue(\"hide\", false)\n  }\n\n  clean() {\n    if (!this.state.title.trim().length) {\n      snackbar.error(gettext(\"You have to enter thread title.\"))\n      return false\n    }\n\n    if (!this.state.post.trim().length) {\n      snackbar.error(gettext(\"You have to enter a message.\"))\n      return false\n    }\n\n    const errors = this.validate()\n\n    if (errors.title) {\n      snackbar.error(errors.title[0])\n      return false\n    }\n\n    if (errors.post) {\n      snackbar.error(errors.post[0])\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    return ajax.post(this.props.submit, {\n      title: this.state.title,\n      category: this.state.category,\n      post: this.state.post,\n      attachments: attachments.clean(this.state.attachments),\n      close: this.state.close,\n      hide: this.state.hide,\n      pin: this.state.pin\n    })\n  }\n\n  handleSuccess(success) {\n    snackbar.success(gettext(\"Your thread has been posted.\"))\n    window.location = success.url\n\n    // keep form loading\n    this.setState({\n      isLoading: true\n    })\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      const errors = [].concat(\n        rejection.non_field_errors || [],\n        rejection.category || [],\n        rejection.title || [],\n        rejection.post || [],\n        rejection.attachments || []\n      )\n\n      snackbar.error(errors[0])\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    if (this.state.isErrored) {\n      return <Message message={this.state.isErrored} />\n    }\n\n    if (!this.state.isReady) {\n      return <Loader />\n    }\n\n    let columns = 0\n    if (this.state.categoryOptions.close) columns += 1\n    if (this.state.categoryOptions.hide) columns += 1\n    if (this.state.categoryOptions.pin) columns += 1\n\n    let titleStyle = null\n\n    if (columns === 1) {\n      titleStyle = \"col-sm-6\"\n    } else {\n      titleStyle = \"col-sm-8\"\n    }\n\n    if (columns === 3) {\n      titleStyle += \" col-md-6\"\n    } else if (columns) {\n      titleStyle += \" col-md-7\"\n    } else {\n      titleStyle += \" col-md-9\"\n    }\n\n    return (\n      <Container className=\"posting-form\" withFirstRow={true}>\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"row first-row\">\n            <div className={titleStyle}>\n              <input\n                className=\"form-control\"\n                disabled={this.state.isLoading}\n                onChange={this.onTitleChange}\n                placeholder={gettext(\"Thread title\")}\n                type=\"text\"\n                value={this.state.title}\n              />\n            </div>\n            <div className=\"col-xs-12 col-sm-4 col-md-3 xs-margin-top\">\n              <CategorySelect\n                choices={this.state.categories}\n                disabled={this.state.isLoading}\n                onChange={this.onCategoryChange}\n                value={this.state.category}\n              />\n            </div>\n            <Options\n              close={this.state.close}\n              columns={columns}\n              disabled={this.state.isLoading}\n              hide={this.state.hide}\n              onClose={this.onClose}\n              onHide={this.onHide}\n              onOpen={this.onOpen}\n              onPinGlobally={this.onPinGlobally}\n              onPinLocally={this.onPinLocally}\n              onUnhide={this.onUnhide}\n              onUnpin={this.onUnpin}\n              options={this.state.categoryOptions}\n              pin={this.state.pin}\n              showOptions={this.state.showOptions}\n            />\n          </div>\n          <div className=\"row\">\n            <div className=\"col-md-12\">\n              <Editor\n                attachments={this.state.attachments}\n                loading={this.state.isLoading}\n                onAttachmentsChange={this.onAttachmentsChange}\n                onCancel={this.onCancel}\n                onChange={this.onPostChange}\n                submitLabel={gettext(\"Post thread\")}\n                value={this.state.post}\n              />\n            </div>\n          </div>\n        </form>\n      </Container>\n    )\n  }\n}\n","export default function(usernames) {\n  const normalisedNames = usernames.split(\",\").map(i => i.trim().toLowerCase())\n  const removedBlanks = normalisedNames.filter(i => i.length > 0)\n  const removedDuplicates = removedBlanks.filter((name, pos) => {\n    return removedBlanks.indexOf(name) == pos\n  })\n\n  return removedDuplicates\n}\n","import React from \"react\"\nimport Editor from \"misago/components/editor\"\nimport Form from \"misago/components/form\"\nimport Container from \"./utils/container\"\nimport Message from \"./utils/message\"\nimport * as attachments from \"./utils/attachments\"\nimport cleanUsernames from \"./utils/usernames\"\nimport { getPostValidators, getTitleValidators } from \"./utils/validators\"\nimport ajax from \"misago/services/ajax\"\nimport posting from \"misago/services/posting\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    const to = (props.to || []).map(user => user.username).join(\", \")\n\n    this.state = {\n      isLoading: false,\n\n      to: to,\n      title: \"\",\n      post: \"\",\n      attachments: [],\n\n      validators: {\n        title: getTitleValidators(),\n        post: getPostValidators()\n      },\n      errors: {}\n    }\n  }\n\n  onCancel = () => {\n    const cancel = window.confirm(\n      gettext(\"Are you sure you want to discard private thread?\")\n    )\n    if (cancel) {\n      posting.close()\n    }\n  }\n\n  onToChange = event => {\n    this.changeValue(\"to\", event.target.value)\n  }\n\n  onTitleChange = event => {\n    this.changeValue(\"title\", event.target.value)\n  }\n\n  onPostChange = event => {\n    this.changeValue(\"post\", event.target.value)\n  }\n\n  onAttachmentsChange = attachments => {\n    this.setState({\n      attachments\n    })\n  }\n\n  clean() {\n    if (!cleanUsernames(this.state.to).length) {\n      snackbar.error(gettext(\"You have to enter at least one recipient.\"))\n      return false\n    }\n\n    if (!this.state.title.trim().length) {\n      snackbar.error(gettext(\"You have to enter thread title.\"))\n      return false\n    }\n\n    if (!this.state.post.trim().length) {\n      snackbar.error(gettext(\"You have to enter a message.\"))\n      return false\n    }\n\n    const errors = this.validate()\n\n    if (errors.title) {\n      snackbar.error(errors.title[0])\n      return false\n    }\n\n    if (errors.post) {\n      snackbar.error(errors.post[0])\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    return ajax.post(this.props.submit, {\n      to: cleanUsernames(this.state.to),\n      title: this.state.title,\n      post: this.state.post,\n      attachments: attachments.clean(this.state.attachments)\n    })\n  }\n\n  handleSuccess(success) {\n    snackbar.success(gettext(\"Your thread has been posted.\"))\n    window.location = success.url\n\n    // keep form loading\n    this.setState({\n      isLoading: true\n    })\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      const errors = [].concat(\n        rejection.non_field_errors || [],\n        rejection.to || [],\n        rejection.title || [],\n        rejection.post || [],\n        rejection.attachments || []\n      )\n\n      snackbar.error(errors[0])\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    return (\n      <Container className=\"posting-form\" withFirstRow={true}>\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"row first-row\">\n            <div className=\"col-xs-12\">\n              <input\n                className=\"form-control\"\n                disabled={this.state.isLoading}\n                onChange={this.onToChange}\n                placeholder={gettext(\n                  \"Comma separated list of user names, eg.: Danny, Lisa\"\n                )}\n                type=\"text\"\n                value={this.state.to}\n              />\n            </div>\n          </div>\n          <div className=\"row first-row\">\n            <div className=\"col-xs-12\">\n              <input\n                className=\"form-control\"\n                disabled={this.state.isLoading}\n                onChange={this.onTitleChange}\n                placeholder={gettext(\"Thread title\")}\n                type=\"text\"\n                value={this.state.title}\n              />\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-xs-12\">\n              <Editor\n                attachments={this.state.attachments}\n                loading={this.state.isLoading}\n                onAttachmentsChange={this.onAttachmentsChange}\n                onCancel={this.onCancel}\n                onChange={this.onPostChange}\n                submitLabel={gettext(\"Post thread\")}\n                value={this.state.post}\n              />\n            </div>\n          </div>\n        </form>\n      </Container>\n    )\n  }\n}\n","import React from \"react\"\nimport Editor from \"misago/components/editor\"\nimport Form from \"misago/components/form\"\nimport Container from \"./utils/container\"\nimport Loader from \"./utils/loader\"\nimport Message from \"./utils/message\"\nimport * as attachments from \"./utils/attachments\"\nimport { getPostValidators } from \"./utils/validators\"\nimport ajax from \"misago/services/ajax\"\nimport posting from \"misago/services/posting\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isReady: false,\n      isLoading: false,\n      isErrored: false,\n\n      post: \"\",\n      attachments: [],\n\n      validators: {\n        post: getPostValidators()\n      },\n      errors: {}\n    }\n  }\n\n  componentDidMount() {\n    ajax\n      .get(this.props.config, this.props.context || null)\n      .then(this.loadSuccess, this.loadError)\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const context = this.props.context\n    const newContext = nextProps.context\n\n    if (context && newContext && context.reply === newContext.reply) return\n\n    ajax\n      .get(nextProps.config, nextProps.context || null)\n      .then(this.appendData, snackbar.apiError)\n  }\n\n  loadSuccess = data => {\n    this.setState({\n      isReady: true,\n\n      post: data.post\n        ? '[quote=\"@' + data.poster + '\"]\\n' + data.post + \"\\n[/quote]\"\n        : \"\"\n    })\n  }\n\n  loadError = rejection => {\n    this.setState({\n      isErrored: rejection.detail\n    })\n  }\n\n  appendData = data => {\n    const newPost = data.post\n      ? '[quote=\"@' + data.poster + '\"]\\n' + data.post + \"\\n[/quote]\\n\\n\"\n      : \"\"\n\n    this.setState((prevState, props) => {\n      if (prevState.post.length > 0) {\n        return {\n          post: prevState.post + \"\\n\\n\" + newPost\n        }\n      }\n\n      return {\n        post: newPost\n      }\n    })\n  }\n\n  onCancel = () => {\n    const cancel = window.confirm(\n      gettext(\"Are you sure you want to discard your reply?\")\n    )\n    if (cancel) {\n      posting.close()\n    }\n  }\n\n  onPostChange = event => {\n    this.changeValue(\"post\", event.target.value)\n  }\n\n  onAttachmentsChange = attachments => {\n    this.setState({\n      attachments\n    })\n  }\n\n  clean() {\n    if (!this.state.post.trim().length) {\n      snackbar.error(gettext(\"You have to enter a message.\"))\n      return false\n    }\n\n    const errors = this.validate()\n\n    if (errors.post) {\n      snackbar.error(errors.post[0])\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    return ajax.post(this.props.submit, {\n      post: this.state.post,\n      attachments: attachments.clean(this.state.attachments)\n    })\n  }\n\n  handleSuccess(success) {\n    snackbar.success(gettext(\"Your reply has been posted.\"))\n    window.location = success.url.index\n\n    // keep form loading\n    this.setState({\n      isLoading: true\n    })\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      const errors = [].concat(\n        rejection.non_field_errors || [],\n        rejection.post || [],\n        rejection.attachments || []\n      )\n\n      snackbar.error(errors[0])\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    if (this.state.isReady) {\n      return (\n        <Container className=\"posting-form\">\n          <form onSubmit={this.handleSubmit} method=\"POST\">\n            <div className=\"row\">\n              <div className=\"col-md-12\">\n                <Editor\n                  attachments={this.state.attachments}\n                  loading={this.state.isLoading}\n                  onAttachmentsChange={this.onAttachmentsChange}\n                  onCancel={this.onCancel}\n                  onChange={this.onPostChange}\n                  submitLabel={gettext(\"Post reply\")}\n                  value={this.state.post}\n                />\n              </div>\n            </div>\n          </form>\n        </Container>\n      )\n    } else if (this.state.isErrored) {\n      return <Message message={this.state.isErrored} />\n    } else {\n      return <Loader />\n    }\n  }\n}\n","import React from \"react\"\nimport Editor from \"misago/components/editor\"\nimport Form from \"misago/components/form\"\nimport Container from \"./utils/container\"\nimport Loader from \"./utils/loader\"\nimport Message from \"./utils/message\"\nimport * as attachments from \"./utils/attachments\"\nimport { getPostValidators } from \"./utils/validators\"\nimport ajax from \"misago/services/ajax\"\nimport posting from \"misago/services/posting\"\nimport snackbar from \"misago/services/snackbar\"\n\nexport default class extends Form {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isReady: false,\n      isLoading: false,\n      isErrored: false,\n\n      post: \"\",\n      attachments: [],\n      protect: false,\n\n      canProtect: false,\n\n      validators: {\n        post: getPostValidators()\n      },\n      errors: {}\n    }\n  }\n\n  componentDidMount() {\n    ajax.get(this.props.config).then(this.loadSuccess, this.loadError)\n  }\n\n  loadSuccess = data => {\n    this.setState({\n      isReady: true,\n\n      post: data.post,\n      attachments: attachments.hydrate(data.attachments),\n      protect: data.is_protected,\n\n      canProtect: data.can_protect\n    })\n  }\n\n  loadError = rejection => {\n    this.setState({\n      isErrored: rejection.detail\n    })\n  }\n\n  onCancel = () => {\n    const cancel = window.confirm(gettext(\"Are you sure you want to discard changes?\"))\n    if (cancel) {\n      posting.close()\n    }\n  }\n\n  onProtect = () => {\n    this.setState({\n      protect: true\n    })\n  }\n\n  onUnprotect = () => {\n    this.setState({\n      protect: false\n    })\n  }\n\n  onPostChange = event => {\n    this.changeValue(\"post\", event.target.value)\n  }\n\n  onAttachmentsChange = attachments => {\n    this.setState({\n      attachments\n    })\n  }\n\n  clean() {\n    if (!this.state.post.trim().length) {\n      snackbar.error(gettext(\"You have to enter a message.\"))\n      return false\n    }\n\n    const errors = this.validate()\n\n    if (errors.post) {\n      snackbar.error(errors.post[0])\n      return false\n    }\n\n    return true\n  }\n\n  send() {\n    return ajax.put(this.props.submit, {\n      post: this.state.post,\n      attachments: attachments.clean(this.state.attachments),\n      protect: this.state.protect\n    })\n  }\n\n  handleSuccess(success) {\n    snackbar.success(gettext(\"Reply has been edited.\"))\n    window.location = success.url.index\n\n    // keep form loading\n    this.setState({\n      isLoading: true\n    })\n  }\n\n  handleError(rejection) {\n    if (rejection.status === 400) {\n      const errors = [].concat(\n        rejection.non_field_errors || [],\n        rejection.category || [],\n        rejection.title || [],\n        rejection.post || [],\n        rejection.attachments || []\n      )\n\n      snackbar.error(errors[0])\n    } else {\n      snackbar.apiError(rejection)\n    }\n  }\n\n  render() {\n    if (this.state.isReady) {\n      return (\n        <Container className=\"posting-form\">\n          <form onSubmit={this.handleSubmit} method=\"POST\">\n            <div className=\"row\">\n              <div className=\"col-md-12\">\n                <Editor\n                  attachments={this.state.attachments}\n                  canProtect={this.state.canProtect}\n                  loading={this.state.isLoading}\n                  onAttachmentsChange={this.onAttachmentsChange}\n                  onCancel={this.onCancel}\n                  onChange={this.onPostChange}\n                  onProtect={this.onProtect}\n                  onUnprotect={this.onUnprotect}\n                  protect={this.state.protect}\n                  submitLabel={gettext(\"Edit reply\")}\n                  value={this.state.post}\n                />\n              </div>\n            </div>\n          </form>\n        </Container>\n      )\n    } else if (this.state.isErrored) {\n      return <Message message={this.state.isErrored} />\n    } else {\n      return <Loader />\n    }\n  }\n}\n","import React from \"react\"\nimport Start from \"./start\"\nimport StartPrivate from \"./start-private\"\nimport Reply from \"./reply\"\nimport Edit from \"./edit\"\n\nexport default function(props) {\n  if (props.mode === \"START\") {\n    return <Start {...props} />\n  } else if (props.mode === \"START_PRIVATE\") {\n    return <StartPrivate {...props} />\n  } else if (props.mode === \"REPLY\") {\n    return <Reply {...props} />\n  } else if (props.mode === \"EDIT\") {\n    return <Edit {...props} />\n  } else {\n    return null\n  }\n}\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { PollForm } from \"misago/components/poll\"\nimport PostingComponent from \"misago/components/posting\"\nimport mount from \"misago/utils/mount-component\"\n\nexport class Posting {\n  init(ajax, snackbar, placeholder) {\n    this._ajax = ajax\n    this._snackbar = snackbar\n    this._placeholder = $(placeholder)\n\n    this._mode = null\n\n    this._isOpen = false\n    this._isClosing = false\n  }\n\n  open(props) {\n    if (this._isOpen === false) {\n      this._mode = props.mode\n      this._isOpen = props.submit\n      this._realOpen(props)\n    } else if (this._isOpen !== props.submit) {\n      let message = gettext(\n        \"You are already working on other message. Do you want to discard it?\"\n      )\n      if (this._mode == \"POLL\") {\n        message = gettext(\n          \"You are already working on a poll. Do you want to discard it?\"\n        )\n      }\n\n      const changeForm = window.confirm(message)\n      if (changeForm) {\n        this._mode = props.mode\n        this._isOpen = props.submit\n        this._realOpen(props)\n      }\n    } else if (this._mode == \"REPLY\" && props.mode == \"REPLY\") {\n      this._realOpen(props)\n    }\n  }\n\n  _realOpen(props) {\n    if (props.mode == \"POLL\") {\n      mount(<PollForm {...props} />, \"posting-mount\")\n    } else {\n      mount(<PostingComponent {...props} />, \"posting-mount\")\n    }\n\n    this._placeholder.addClass(\"slide-in\")\n\n    $(\"html, body\").animate(\n      {\n        scrollTop: this._placeholder.offset().top\n      },\n      1000\n    )\n  }\n\n  close = () => {\n    if (this._isOpen && !this._isClosing) {\n      this._isClosing = true\n      this._placeholder.removeClass(\"slide-in\")\n\n      window.setTimeout(() => {\n        ReactDOM.unmountComponentAtNode(\n          document.getElementById(\"posting-mount\")\n        )\n        this._isClosing = false\n        this._isOpen = false\n      }, 300)\n    }\n  }\n}\n\nexport default new Posting()\n","import { showSnackbar, hideSnackbar } from \"misago/reducers/snackbar\"\n\nconst HIDE_ANIMATION_LENGTH = 300\nconst MESSAGE_SHOW_LENGTH = 5000\n\nexport class Snackbar {\n  init(store) {\n    this._store = store\n    this._timeout = null\n  }\n\n  alert(message, type) {\n    if (this._timeout) {\n      window.clearTimeout(this._timeout)\n      this._store.dispatch(hideSnackbar())\n\n      this._timeout = window.setTimeout(() => {\n        this._timeout = null\n        this.alert(message, type)\n      }, HIDE_ANIMATION_LENGTH)\n    } else {\n      this._store.dispatch(showSnackbar(message, type))\n      this._timeout = window.setTimeout(() => {\n        this._store.dispatch(hideSnackbar())\n        this._timeout = null\n      }, MESSAGE_SHOW_LENGTH)\n    }\n  }\n\n  // shorthands for message types\n\n  info(message) {\n    this.alert(message, \"info\")\n  }\n\n  success(message) {\n    this.alert(message, \"success\")\n  }\n\n  warning(message) {\n    this.alert(message, \"warning\")\n  }\n\n  error(message) {\n    this.alert(message, \"error\")\n  }\n\n  // shorthand for api errors\n\n  apiError(rejection) {\n    let message = rejection.detail\n\n    if (!message) {\n      if (rejection.status === 404) {\n        message = gettext(\"Action link is invalid.\")\n      } else {\n        message = gettext(\"Unknown error has occured.\")\n      }\n    }\n\n    if (rejection.status === 403 && message === \"Permission denied\") {\n      message = gettext(\"You don't have permission to perform this action.\")\n    }\n\n    this.error(message)\n  }\n}\n\nexport default new Snackbar()\n","import { combineReducers, createStore } from \"redux\"\n\nexport class StoreWrapper {\n  constructor() {\n    this._store = null\n    this._reducers = {}\n    this._initialState = {}\n  }\n\n  addReducer(name, reducer, initialState) {\n    this._reducers[name] = reducer\n    this._initialState[name] = initialState\n  }\n\n  init() {\n    this._store = createStore(\n      combineReducers(this._reducers),\n      this._initialState\n    )\n  }\n\n  getStore() {\n    return this._store\n  }\n\n  // Store API\n\n  getState() {\n    return this._store.getState()\n  }\n\n  dispatch(action) {\n    return this._store.dispatch(action)\n  }\n}\n\nexport default new StoreWrapper()\n","/* global zxcvbn */\nexport class Zxcvbn {\n  init(include) {\n    this._include = include\n    this._isLoaded = false\n  }\n\n  scorePassword(password, inputs) {\n    // 0-4 score, the more the stronger password\n    if (this._isLoaded) {\n      return zxcvbn(password, inputs).score\n    }\n\n    return 0\n  }\n\n  load() {\n    if (!this._isLoaded) {\n      this._include.include(\"misago/js/zxcvbn.js\")\n      return this._loadingPromise()\n    } else {\n      return this._loadedPromise()\n    }\n  }\n\n  _loadingPromise() {\n    const self = this\n\n    return new Promise(function(resolve, reject) {\n      var wait = function(tries = 0) {\n        tries += 1\n        if (tries > 200) {\n          reject()\n        } else if (typeof zxcvbn === \"undefined\") {\n          window.setTimeout(function() {\n            wait(tries)\n          }, 200)\n        } else {\n          self._isLoaded = true\n          resolve()\n        }\n      }\n      wait()\n    })\n  }\n\n  _loadedPromise() {\n    // we have already loaded zxcvbn.js, resolve away!\n    return new Promise(function(resolve) {\n      resolve()\n    })\n  }\n}\n\nexport default new Zxcvbn()\n","import moment from \"moment\"\nimport React from \"react\"\n\nexport default class extends React.Component {\n  getReasonMessage() {\n    if (this.props.message.html) {\n      return (\n        <div\n          className=\"lead\"\n          dangerouslySetInnerHTML={{\n            __html: this.props.message.html\n          }}\n        />\n      )\n    } else {\n      return <p className=\"lead\">{this.props.message.plain}</p>\n    }\n  }\n\n  getExpirationMessage() {\n    if (this.props.expires) {\n      if (this.props.expires.isAfter(moment())) {\n        let title = interpolate(\n          gettext(\"This ban expires on %(expires_on)s.\"),\n          {\n            expires_on: this.props.expires.format(\"LL, LT\")\n          },\n          true\n        )\n\n        let message = interpolate(\n          gettext(\"This ban expires %(expires_on)s.\"),\n          {\n            expires_on: this.props.expires.fromNow()\n          },\n          true\n        )\n\n        return <abbr title={title}>{message}</abbr>\n      } else {\n        return gettext(\"This ban has expired.\")\n      }\n    } else {\n      return gettext(\"This ban is permanent.\")\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"page page-error page-error-banned\">\n        <div className=\"container\">\n          <div className=\"message-panel\">\n            <div className=\"message-icon\">\n              <span className=\"material-icon\">highlight_off</span>\n            </div>\n            <div className=\"message-body\">\n              {this.getReasonMessage()}\n              <p className=\"message-footnote\">{this.getExpirationMessage()}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n","import moment from \"moment\"\nimport React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { Provider, connect } from \"react-redux\"\nimport BannedPage from \"misago/components/banned-page\"\nimport misago from \"misago/index\"\nimport store from \"misago/services/store\"\n\nlet select = function(state) {\n  return state.tick\n}\n\nlet RedrawedBannedPage = connect(select)(BannedPage)\n\nexport default function(ban, changeState) {\n  ReactDOM.render(\n    <Provider store={store.getStore()}>\n      <RedrawedBannedPage\n        message={ban.message}\n        expires={ban.expires_on ? moment(ban.expires_on) : null}\n      />\n    </Provider>,\n\n    document.getElementById(\"page-mount\")\n  )\n\n  if (typeof changeState === \"undefined\" || changeState) {\n    let forumName = misago.get(\"SETTINGS\").forum_name\n    document.title = gettext(\"You are banned\") + \" | \" + forumName\n    window.history.pushState({}, \"\", misago.get(\"BANNED_URL\"))\n  }\n}\n","export default function(list, rowWidth, padding = false) {\n  let rows = []\n  let row = []\n\n  list.forEach(function(element) {\n    row.push(element)\n    if (row.length === rowWidth) {\n      rows.push(row)\n      row = []\n    }\n  })\n\n  // pad row to required length?\n  if (padding !== false && row.length > 0 && row.length < rowWidth) {\n    for (let i = row.length; i < rowWidth; i++) {\n      row.push(padding)\n    }\n  }\n\n  if (row.length) {\n    rows.push(row)\n  }\n\n  return rows\n}\n","export default function(a, b) {\n  let ids = []\n  return a.concat(b).filter(function(item) {\n    if (ids.indexOf(item.id) === -1) {\n      ids.push(item.id)\n      return true\n    } else {\n      return false\n    }\n  })\n}\n","const map = {\n  \"&\": \"&amp;\",\n  \"<\": \"&lt;\",\n  \">\": \"&gt;\",\n  '\"': \"&quot;\",\n  \"'\": \"&#039;\"\n}\n\nexport default function(text) {\n  return text.replace(/[&<>\"']/g, function(m) {\n    return map[m]\n  })\n}\n","export default function(bytes) {\n  if (bytes > 1024 * 1024 * 1024) {\n    return roundSize(bytes / (1024 * 1024 * 1024)) + \" GB\"\n  } else if (bytes > 1024 * 1024) {\n    return roundSize(bytes / (1024 * 1024)) + \" MB\"\n  } else if (bytes > 1024) {\n    return roundSize(bytes / 1024) + \" KB\"\n  } else {\n    return roundSize(bytes) + \" B\"\n  }\n}\n\nexport function roundSize(value) {\n  return value.toFixed(1)\n}\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { Provider } from \"react-redux\"\nimport store from \"misago/services/store\"\n\nexport default function(Component, rootElementId, connected = true) {\n  let rootElement = document.getElementById(rootElementId)\n\n  let finalComponent = Component.props ? Component : <Component />\n\n  if (rootElement) {\n    if (connected) {\n      ReactDOM.render(\n        <Provider store={store.getStore()}>{finalComponent}</Provider>,\n\n        rootElement\n      )\n    } else {\n      ReactDOM.render(finalComponent, rootElement)\n    }\n  }\n}\n","export function int(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min\n}\n\nexport function range(min, max) {\n  let array = new Array(int(min, max))\n  for (let i = 0; i < array.length; i++) {\n    array[i] = i\n  }\n\n  return array\n}\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { Provider } from \"react-redux\"\nimport { Router, browserHistory } from \"react-router\"\nimport store from \"misago/services/store\"\n\nconst rootElement = document.getElementById(\"page-mount\")\n\nexport default function(options) {\n  let routes = {\n    component: options.component || null,\n    childRoutes: []\n  }\n\n  if (options.root) {\n    routes.childRoutes = [\n      {\n        path: options.root,\n        onEnter: function(nextState, replaceState) {\n          replaceState(null, options.paths[0].path)\n        }\n      }\n    ].concat(options.paths)\n  } else {\n    routes.childRoutes = options.paths\n  }\n\n  ReactDOM.render(\n    <Provider store={store.getStore()}>\n      <Router routes={routes} history={browserHistory} />\n    </Provider>,\n    rootElement\n  )\n}\n","export function push(array, value) {\n  if (array.indexOf(value) === -1) {\n    let copy = array.slice()\n    copy.push(value)\n    return copy\n  } else {\n    return array\n  }\n}\n\nexport function remove(array, value) {\n  if (array.indexOf(value) >= 0) {\n    return array.filter(function(i) {\n      return i !== value\n    })\n  } else {\n    return array\n  }\n}\n\nexport function toggle(array, value) {\n  if (array.indexOf(value) === -1) {\n    let copy = array.slice()\n    copy.push(value)\n    return copy\n  } else {\n    return array.filter(function(i) {\n      return i !== value\n    })\n  }\n}\n","const EMAIL = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i\nconst USERNAME = new RegExp(\"^[0-9a-z]+$\", \"i\")\n\nexport function required(message) {\n  return function(value) {\n    if (value === false || value === null || $.trim(value).length === 0) {\n      return message || gettext(\"This field is required.\")\n    }\n  }\n}\n\nexport function requiredTermsOfService(message) {\n  const error = gettext(\"You have to accept the terms of service.\")\n  return required(message || error)\n}\n\nexport function requiredPrivacyPolicy(message) {\n  const error = gettext(\"You have to accept the privacy policy.\")\n  return required(message || error)\n}\n\nexport function email(message) {\n  return function(value) {\n    if (!EMAIL.test(value)) {\n      return message || gettext(\"Enter a valid email address.\")\n    }\n  }\n}\n\nexport function minLength(limitValue, message) {\n  return function(value) {\n    var returnMessage = \"\"\n    var length = $.trim(value).length\n\n    if (length < limitValue) {\n      if (message) {\n        returnMessage = message(limitValue, length)\n      } else {\n        returnMessage = ngettext(\n          \"Ensure this value has at least %(limit_value)s character (it has %(show_value)s).\",\n          \"Ensure this value has at least %(limit_value)s characters (it has %(show_value)s).\",\n          limitValue\n        )\n      }\n      return interpolate(\n        returnMessage,\n        {\n          limit_value: limitValue,\n          show_value: length\n        },\n        true\n      )\n    }\n  }\n}\n\nexport function maxLength(limitValue, message) {\n  return function(value) {\n    var returnMessage = \"\"\n    var length = $.trim(value).length\n\n    if (length > limitValue) {\n      if (message) {\n        returnMessage = message(limitValue, length)\n      } else {\n        returnMessage = ngettext(\n          \"Ensure this value has at most %(limit_value)s character (it has %(show_value)s).\",\n          \"Ensure this value has at most %(limit_value)s characters (it has %(show_value)s).\",\n          limitValue\n        )\n      }\n      return interpolate(\n        returnMessage,\n        {\n          limit_value: limitValue,\n          show_value: length\n        },\n        true\n      )\n    }\n  }\n}\n\nexport function usernameMinLength(lengthMin) {\n  var message = function(lengthMin) {\n    return ngettext(\n      \"Username must be at least %(limit_value)s character long.\",\n      \"Username must be at least %(limit_value)s characters long.\",\n      lengthMin\n    )\n  }\n  return minLength(lengthMin, message)\n}\n\nexport function usernameMaxLength(lengthMax) {\n  var message = function(lengthMax) {\n    return ngettext(\n      \"Username cannot be longer than %(limit_value)s character.\",\n      \"Username cannot be longer than %(limit_value)s characters.\",\n      lengthMax\n    )\n  }\n  return maxLength(lengthMax, message)\n}\n\nexport function usernameContent() {\n  return function(value) {\n    if (!USERNAME.test($.trim(value))) {\n      return gettext(\n        \"Username can only contain latin alphabet letters and digits.\"\n      )\n    }\n  }\n}\n\nexport function passwordMinLength(limitValue) {\n  return function(value) {\n    const length = value.length\n\n    if (length < limitValue) {\n      const returnMessage = ngettext(\n        \"Valid password must be at least %(limit_value)s character long.\",\n        \"Valid password must be at least %(limit_value)s characters long.\",\n        limitValue\n      )\n\n      return interpolate(\n        returnMessage,\n        {\n          limit_value: limitValue,\n          show_value: length\n        },\n        true\n      )\n    }\n  }\n}\n","var map = {\n\t\"./af\": 42786,\n\t\"./af.js\": 42786,\n\t\"./ar\": 30867,\n\t\"./ar-dz\": 14130,\n\t\"./ar-dz.js\": 14130,\n\t\"./ar-kw\": 96135,\n\t\"./ar-kw.js\": 96135,\n\t\"./ar-ly\": 56440,\n\t\"./ar-ly.js\": 56440,\n\t\"./ar-ma\": 47702,\n\t\"./ar-ma.js\": 47702,\n\t\"./ar-sa\": 16040,\n\t\"./ar-sa.js\": 16040,\n\t\"./ar-tn\": 37100,\n\t\"./ar-tn.js\": 37100,\n\t\"./ar.js\": 30867,\n\t\"./az\": 31083,\n\t\"./az.js\": 31083,\n\t\"./be\": 9808,\n\t\"./be.js\": 9808,\n\t\"./bg\": 68338,\n\t\"./bg.js\": 68338,\n\t\"./bm\": 67438,\n\t\"./bm.js\": 67438,\n\t\"./bn\": 8905,\n\t\"./bn-bd\": 76225,\n\t\"./bn-bd.js\": 76225,\n\t\"./bn.js\": 8905,\n\t\"./bo\": 11560,\n\t\"./bo.js\": 11560,\n\t\"./br\": 1278,\n\t\"./br.js\": 1278,\n\t\"./bs\": 80622,\n\t\"./bs.js\": 80622,\n\t\"./ca\": 2468,\n\t\"./ca.js\": 2468,\n\t\"./cs\": 5822,\n\t\"./cs.js\": 5822,\n\t\"./cv\": 50877,\n\t\"./cv.js\": 50877,\n\t\"./cy\": 47373,\n\t\"./cy.js\": 47373,\n\t\"./da\": 24780,\n\t\"./da.js\": 24780,\n\t\"./de\": 59740,\n\t\"./de-at\": 60217,\n\t\"./de-at.js\": 60217,\n\t\"./de-ch\": 60894,\n\t\"./de-ch.js\": 60894,\n\t\"./de.js\": 59740,\n\t\"./dv\": 5300,\n\t\"./dv.js\": 5300,\n\t\"./el\": 50837,\n\t\"./el.js\": 50837,\n\t\"./en-au\": 78348,\n\t\"./en-au.js\": 78348,\n\t\"./en-ca\": 77925,\n\t\"./en-ca.js\": 77925,\n\t\"./en-gb\": 22243,\n\t\"./en-gb.js\": 22243,\n\t\"./en-ie\": 46436,\n\t\"./en-ie.js\": 46436,\n\t\"./en-il\": 47207,\n\t\"./en-il.js\": 47207,\n\t\"./en-in\": 44175,\n\t\"./en-in.js\": 44175,\n\t\"./en-nz\": 76319,\n\t\"./en-nz.js\": 76319,\n\t\"./en-sg\": 31662,\n\t\"./en-sg.js\": 31662,\n\t\"./eo\": 92915,\n\t\"./eo.js\": 92915,\n\t\"./es\": 55655,\n\t\"./es-do\": 55251,\n\t\"./es-do.js\": 55251,\n\t\"./es-mx\": 96112,\n\t\"./es-mx.js\": 96112,\n\t\"./es-us\": 71146,\n\t\"./es-us.js\": 71146,\n\t\"./es.js\": 55655,\n\t\"./et\": 5603,\n\t\"./et.js\": 5603,\n\t\"./eu\": 77763,\n\t\"./eu.js\": 77763,\n\t\"./fa\": 76959,\n\t\"./fa.js\": 76959,\n\t\"./fi\": 11897,\n\t\"./fi.js\": 11897,\n\t\"./fil\": 42549,\n\t\"./fil.js\": 42549,\n\t\"./fo\": 94694,\n\t\"./fo.js\": 94694,\n\t\"./fr\": 94470,\n\t\"./fr-ca\": 63049,\n\t\"./fr-ca.js\": 63049,\n\t\"./fr-ch\": 52330,\n\t\"./fr-ch.js\": 52330,\n\t\"./fr.js\": 94470,\n\t\"./fy\": 5044,\n\t\"./fy.js\": 5044,\n\t\"./ga\": 29295,\n\t\"./ga.js\": 29295,\n\t\"./gd\": 2101,\n\t\"./gd.js\": 2101,\n\t\"./gl\": 38794,\n\t\"./gl.js\": 38794,\n\t\"./gom-deva\": 27884,\n\t\"./gom-deva.js\": 27884,\n\t\"./gom-latn\": 23168,\n\t\"./gom-latn.js\": 23168,\n\t\"./gu\": 95349,\n\t\"./gu.js\": 95349,\n\t\"./he\": 24206,\n\t\"./he.js\": 24206,\n\t\"./hi\": 30094,\n\t\"./hi.js\": 30094,\n\t\"./hr\": 30316,\n\t\"./hr.js\": 30316,\n\t\"./hu\": 22138,\n\t\"./hu.js\": 22138,\n\t\"./hy-am\": 11423,\n\t\"./hy-am.js\": 11423,\n\t\"./id\": 29218,\n\t\"./id.js\": 29218,\n\t\"./is\": 90135,\n\t\"./is.js\": 90135,\n\t\"./it\": 90626,\n\t\"./it-ch\": 10150,\n\t\"./it-ch.js\": 10150,\n\t\"./it.js\": 90626,\n\t\"./ja\": 39183,\n\t\"./ja.js\": 39183,\n\t\"./jv\": 24286,\n\t\"./jv.js\": 24286,\n\t\"./ka\": 12105,\n\t\"./ka.js\": 12105,\n\t\"./kk\": 47772,\n\t\"./kk.js\": 47772,\n\t\"./km\": 18758,\n\t\"./km.js\": 18758,\n\t\"./kn\": 79282,\n\t\"./kn.js\": 79282,\n\t\"./ko\": 33730,\n\t\"./ko.js\": 33730,\n\t\"./ku\": 1408,\n\t\"./ku.js\": 1408,\n\t\"./ky\": 33291,\n\t\"./ky.js\": 33291,\n\t\"./lb\": 36841,\n\t\"./lb.js\": 36841,\n\t\"./lo\": 55466,\n\t\"./lo.js\": 55466,\n\t\"./lt\": 57010,\n\t\"./lt.js\": 57010,\n\t\"./lv\": 37595,\n\t\"./lv.js\": 37595,\n\t\"./me\": 39861,\n\t\"./me.js\": 39861,\n\t\"./mi\": 35493,\n\t\"./mi.js\": 35493,\n\t\"./mk\": 95966,\n\t\"./mk.js\": 95966,\n\t\"./ml\": 87341,\n\t\"./ml.js\": 87341,\n\t\"./mn\": 5115,\n\t\"./mn.js\": 5115,\n\t\"./mr\": 10370,\n\t\"./mr.js\": 10370,\n\t\"./ms\": 9847,\n\t\"./ms-my\": 41237,\n\t\"./ms-my.js\": 41237,\n\t\"./ms.js\": 9847,\n\t\"./mt\": 72126,\n\t\"./mt.js\": 72126,\n\t\"./my\": 56165,\n\t\"./my.js\": 56165,\n\t\"./nb\": 64924,\n\t\"./nb.js\": 64924,\n\t\"./ne\": 16744,\n\t\"./ne.js\": 16744,\n\t\"./nl\": 93901,\n\t\"./nl-be\": 59814,\n\t\"./nl-be.js\": 59814,\n\t\"./nl.js\": 93901,\n\t\"./nn\": 83877,\n\t\"./nn.js\": 83877,\n\t\"./oc-lnc\": 92135,\n\t\"./oc-lnc.js\": 92135,\n\t\"./pa-in\": 15858,\n\t\"./pa-in.js\": 15858,\n\t\"./pl\": 64495,\n\t\"./pl.js\": 64495,\n\t\"./pt\": 89520,\n\t\"./pt-br\": 57971,\n\t\"./pt-br.js\": 57971,\n\t\"./pt.js\": 89520,\n\t\"./ro\": 96459,\n\t\"./ro.js\": 96459,\n\t\"./ru\": 21793,\n\t\"./ru.js\": 21793,\n\t\"./sd\": 40950,\n\t\"./sd.js\": 40950,\n\t\"./se\": 10490,\n\t\"./se.js\": 10490,\n\t\"./si\": 90124,\n\t\"./si.js\": 90124,\n\t\"./sk\": 64249,\n\t\"./sk.js\": 64249,\n\t\"./sl\": 14985,\n\t\"./sl.js\": 14985,\n\t\"./sq\": 51104,\n\t\"./sq.js\": 51104,\n\t\"./sr\": 49131,\n\t\"./sr-cyrl\": 79915,\n\t\"./sr-cyrl.js\": 79915,\n\t\"./sr.js\": 49131,\n\t\"./ss\": 85893,\n\t\"./ss.js\": 85893,\n\t\"./sv\": 98760,\n\t\"./sv.js\": 98760,\n\t\"./sw\": 91172,\n\t\"./sw.js\": 91172,\n\t\"./ta\": 27333,\n\t\"./ta.js\": 27333,\n\t\"./te\": 23110,\n\t\"./te.js\": 23110,\n\t\"./tet\": 52095,\n\t\"./tet.js\": 52095,\n\t\"./tg\": 27321,\n\t\"./tg.js\": 27321,\n\t\"./th\": 9041,\n\t\"./th.js\": 9041,\n\t\"./tk\": 19005,\n\t\"./tk.js\": 19005,\n\t\"./tl-ph\": 75768,\n\t\"./tl-ph.js\": 75768,\n\t\"./tlh\": 89444,\n\t\"./tlh.js\": 89444,\n\t\"./tr\": 72397,\n\t\"./tr.js\": 72397,\n\t\"./tzl\": 28254,\n\t\"./tzl.js\": 28254,\n\t\"./tzm\": 51106,\n\t\"./tzm-latn\": 30699,\n\t\"./tzm-latn.js\": 30699,\n\t\"./tzm.js\": 51106,\n\t\"./ug-cn\": 9288,\n\t\"./ug-cn.js\": 9288,\n\t\"./uk\": 67691,\n\t\"./uk.js\": 67691,\n\t\"./ur\": 13795,\n\t\"./ur.js\": 13795,\n\t\"./uz\": 6791,\n\t\"./uz-latn\": 60588,\n\t\"./uz-latn.js\": 60588,\n\t\"./uz.js\": 6791,\n\t\"./vi\": 65666,\n\t\"./vi.js\": 65666,\n\t\"./x-pseudo\": 14378,\n\t\"./x-pseudo.js\": 14378,\n\t\"./yo\": 75805,\n\t\"./yo.js\": 75805,\n\t\"./zh-cn\": 83839,\n\t\"./zh-cn.js\": 83839,\n\t\"./zh-hk\": 55726,\n\t\"./zh-hk.js\": 55726,\n\t\"./zh-mo\": 99807,\n\t\"./zh-mo.js\": 99807,\n\t\"./zh-tw\": 74152,\n\t\"./zh-tw.js\": 74152\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 46700;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = function(module) {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: function() {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t174: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmisago\"] = self[\"webpackChunkmisago\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(32233); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(58339); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(64109); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(46226); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(93240); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(75147); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(4894); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(29223); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(3026); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(94795); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(15840); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(32488); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(11768); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(61323); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(15049); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(61814); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(95920); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(32656); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(40207); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(47806); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(22904); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(97751); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(76093); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(19764); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(47549); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(22331); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(21513); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(98749); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(98251); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(6720); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(10846); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(18255); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(14113); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(24444); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(1764); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(68351); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(81521); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(19984); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(41229); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(43589); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(24108); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(33934); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(85577); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(83526); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(43060); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(92292); })\n__webpack_require__.O(undefined, [736], function() { return __webpack_require__(33409); })\nvar __webpack_exports__ = __webpack_require__.O(undefined, [736], function() { return __webpack_require__(31341); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","n","window","self","hljs","e","replace","I","t","nodeName","toLowerCase","r","exec","index","i","k","test","o","u","a","firstChild","nextSibling","nodeType","nodeValue","length","push","event","offset","node","match","c","l","w","map","call","attributes","value","join","s","f","g","substring","reverse","forEach","splice","pop","substr","source","RegExp","cI","compiled","bK","split","Number","E","lR","b","bR","eW","eR","tE","iR","v","starts","concat","filter","Boolean","endsParent","parent","N","hasOwnProperty","h","y","classPrefix","C","sL","x","B","L","M","top","language","d","lastIndex","p","cN","Object","create","m","skip","eB","rB","rE","eE","Error","R","j","O","T","message","indexOf","languages","second_best","tabReplace","useBR","className","parentNode","document","createElementNS","innerHTML","textContent","trim","result","re","called","querySelectorAll","keys","highlight","highlightAuto","fixMarkup","highlightBlock","configure","initHighlighting","initHighlightingOnLoad","addEventListener","registerLanguage","aliases","listLanguages","getLanguage","inherit","IR","UIR","NR","CNR","BNR","RSR","BE","ASM","QSM","PWM","CLCM","CBCM","HCM","NM","CNM","BNM","CSSNM","RM","TM","UTM","METHOD_GUARD","name","keyword","built_in","literal","_","LegalAgreement","props","agreement","checked","errors","url","onChange","agreementHtml","interpolate","escapeHtml","label","gettext","type","dangerouslySetInnerHTML","__html","error","privacyPolicy","termsOfService","onPrivacyPolicyChange","onTermsOfServiceChange","termsOfServiceId","misago","termsOfServiceUrl","privacyPolicyId","privacyPolicyUrl","FormHeader","text","buttonClassName","buttonLabel","formLabel","header","labelClassName","socialAuth","id","button_text","button_color","style","color","finalButtonLabel","site","href","size","size2x","alt","src","getSrc","user","srcSet","width","height","avatars","avatar","av","resolveAvatarForSize","Button","this","disabled","loading","onClick","children","React","defaultProps","choices","item","repeat","level","display","helpText","ev","field","fieldname","target","input","rows","fields","for","help_text","validation","setState","state","isLoading","groups","group","initial","data","assign","ajax","api","onSuccess","rejection","status","snackbar","onSubmit","handleSubmit","CancelButton","onCancel","Form","then","cancel","FormDisplay","isValidated","getClassName","labelClass","htmlFor","controlClass","getFeedbackDescription","getFeedback","getHelpText","extra","validateRequired","required","changeValue","newState","formErrors","validateField","preventDefault","clean","promise","send","success","handleSuccess","handleError","validators","optional","validatedFields","fieldErrors","validate","requiredError","validationError","isControlled","isActive","path","location","pathname","activeClassName","modal","onError","bestAnswer","poll","polls","confirm","best_answer","role","BestAnswerSelect","bestAnswers","onBestAnswerChange","PollSelect","onPollChange","choice","ytRegExp","domnode","highlightCode","embedYoutubePlayers","_youtube","codeblocks","code","anchors","onlyChild","childNodes","parseYoutubeUrl","youtubeMovie","swapYoutubePlayer","element","youtube","video","start","player","$","replaceWith","wrap","cleanedUrl","cleanUrl","getVideoIdFromUrl","timebit","bits","parseInt","onebox","documentNode","find","click","revealSpoiler","prevProps","prevState","nextProps","nextState","markup","ref","btn","addClass","icon","PanelMessage","copy","string","subString","pos","step","stringCount","PollChoice","hash","proc","votes","Math","ceil","getVotesLabel","ChoiceVotes","UserChoice","selected","ngettext","hydratedData","voters","voter","voted_on","moment","detail","ModalBody","ChoicesList","ChoiceDetails","key","VotesCount","VotesList","Voter","username","VoteDate","title","format","fromNow","isPollOver","showVoting","thread","acl","is_public","can_delete","can_edit","can_see_votes","can_vote","hasSelectedChoices","allow_revotes","isVisible","controls","canVote","canChangeVote","ChangeVote","SeeVotes","Edit","Delete","control","isBusy","posting","submit","mode","store","newThreadAcl","DATE_ABBR","PollVotes","PollLength","PollIsPublic","PollCreation","poster","getPoster","posted_on","getPostedOn","poster_name","absolute","relative","ends_on","getEndsOn","endsOn","question","PollChoicesLeft","choicesLeft","PollAllowRevote","ChoiceSelect","toggleChoice","getChoicesLeft","selection","allowed_choices","getChoiceFromHash","deselectChoice","selectChoice","slice","showResults","isAfter","getIsPollOver","generateRandomHash","setChoices","canDelete","onDelete","onAdd","maxLength","placeholder","randomHash","random","toString","isEdit","non_field_errors","bindInput","PollPublicSwitch","iconOn","iconOff","labelOn","labelOff","post","content","Default","Invalid","category","tooltip","rank","userTitle","css_class","is_tab","isReady","posts","getTitleValidators","minLength","thread_title_length_min","limitValue","limit_value","show_value","thread_title_length_max","getPostValidators","post_length_max","validatePostLengthMin","post_length_min","getChoice","Icon","getIcon","getLabel","change","showActivation","password","isValid","form","append","val","showBannedPage","ban","getActivationButton","is_banned","is_hidden","is_online_hidden","is_offline_hidden","is_online","is_offline","getClass","StatusIcon","StatusLabel","banned_until","ban_expires","last_click","getHelp","emptyMessage","getEmptyMessage","changed_by","changed_by_username","renderUserAvatar","renderUsername","old_username","new_username","changed_on","changes","hiddenOnMobile","isLoaded","showStatus","Status","JoinDate","Posts","Threads","Followers","joined_on","getStatClassName","threads","followers","stat","colClassName","cols","list","Array","apply","users","dropdown","toggle","items","isOrdered","_items","order","after","before","undefined","get","values","values_only","_order","unordered","ordered","ordering","insertItem","insertAt","iterations","_initializers","_context","initializer","context","OrderedList","orderedValues","fallback","has","setInterval","patch","AUTH_SYNC_RATE","auth","storage","captcha","include","AcceptAgreement","submiting","accept","reload","handleDecline","handleAccept","getElementById","mount","signedIn","signedOut","getMessage","refresh","select","connect","AuthMessage","description","html","getTitle","is_closed","is_read","LastThread","Empty","Private","Protected","can_browse","can_see_all_threads","last_thread_title","LastPosterAvatar","last_thread_new","LastPosterName","last_post","last_post_on","last_poster","last_poster_name","Message","isFirst","subcategories","categories","hydrate","startPolling","frequency","update","tick","Categories","SideNav","options","option","to","baseUrl","component","CompactNav","hideNav","delete","onPasswordChange","edit_details","DownloadData","data_downloads","downloads","isSubmiting","request_data_download","handleLoadDownloads","console","log","rowStyle","requested_on","DownloadButton","exportFile","file","colSpan","handleRequestDataDownload","verticalAlign","is_hiding_presence","limits_private_thread_invites_to","subscribe_to_started_threads","subscribe_to_replied_threads","privateThreadInvitesChoices","subscribeToChoices","next_on","next_change","length_min","length_max","phrases","changes_left","name_changes_expire","complete","slug","addNameChange","updateUsername","Promise","all","results","onComplete","getChangeForm","new_email","change_email","response","new_password","repeat_password","change_password","has_usable_password","WithDropdown","paths","ChangeForumOptions","EditDetails","ChangeUsername","ChangeSignInCredentials","DeleteAccount","root","Options","expires_on","initWithPreloadedData","initWithoutPreloadedData","profile","user_message","staff_message","getUserMessage","getStaffMessage","getExpirationMessage","getPanelBody","isAuthenticated","SafeValue","rel","onEdit","showEditButton","EditButton","dispatch","details","load","editing","newDetails","loadDetails","profileDetails","edit","loadItems","next","Feed","loadMore","LoadMoreButton","loadUsers","page","search","count","more","pages","setSpecialProps","PRELOADED_DATA_KEY","TITLE","API_FILTER","apiUrl","getMoreButton","getListBody","loadChanges","is_followed","follow","action","canMessage","can_start_private_threads","isProfileOwner","is_avatar_locked","avatar_lock_user_message","avatar_lock_staff_message","moderate_avatar","apiResponse","updateAvatar","avatar_hash","getFormBody","getModalBody","moderate_username","setTimeout","countdown","isDeleted","with_content","getButtonLabel","getDeletedBody","getForm","AvatarControls","can_moderate_avatar","showAvatarDialog","can_rename","showRenameDialog","showDeleteDialog","getAvatarButton","getRenameButton","getDeleteButton","age","email","can_follow","can_moderate","canFollow","canModerate","colsWidth","headerClassName","IsDisabledMessage","is_active","isDeletingAccount","is_deleting_account","getColStyle","getFollowButton","getModerationButton","getUserStatus","getUserRank","getUserTitle","getJoinedOn","getEmail","col","colStyle","toggleNav","toggleModeration","COMPONENTS","follows","Follows","Details","UsernameHistory","BanDetails","Profile","RequestLinkForm","callback","LinkSent","reset","RequestActivationLink","RequestResetForm","showInactivePage","AccountInactivePage","activation","getActivateButton","ReactDOM","RequestPasswordReset","ResetPasswordForm","PasswordChangedPage","SignInModal","showSignIn","remove","query","updateSearch","q","providers","provider","updateUsers","updatePosts","onQueryChange","Badge","SearchTime","time","LoadMore","appendPosts","updateProvider","Blankslate","components","route","TYPES_CLASSES","info","warning","Snackbar","snackbarClass","getSnackbarClass","backendName","pageTitleTpl","pageTitle","backend","Register","handleToggleAgreement","validator","formValidators","emailProtected","terms_of_service","privacy_policy","onRegistrationComplete","stateUpdate","backend_name","emailHelpText","emailHelpTextTpl","RegisterLegalFootnote","handlePrivacyPolicyChange","handleTermsOfServiceChange","SocialAuth","handleRegistrationComplete","op","updateAcl","participants","ModalHeader","onUsernameChange","can_add_participants","participant","confirmed","isUser","is_owner","can_change_owner","isModerator","can_moderate_private_threads","userIsOwner","UserStatus","isOwner","getUserIsOwner","utils","ICON","changed_title","pinned_globally","pinned_locally","unpinned","moved","merged","approved","opened","closed","unhid","hid","changed_owner","tookover","added_participant","owner_left","participant_left","removed_participant","event_type","can_hide","Hide","Unhide","hidden_on","hidden_by_name","hidden_by","USER_SPAN","USER_URL","Hidden","Poster","date","event_by","event_on","MESSAGE","ITEM_LINK","ITEM_SPAN","ChangedTitle","Moved","Merged","ChangedOwner","AddedParticipant","RemovedParticipant","msgstring","oldTitle","event_context","old_title","fromCategory","from_category","mergedThread","merged_thread","newOwner","waypoint","handler","direction","boundingClientRect","getBoundingClientRect","offsetBottom","clientHeight","documentElement","read","thread_is_read","AttachmentPreview","attachment","filename","AttachmentDetails","is_image","AttachmentThumbnail","AttachmentIcon","thumb","backgroundImage","uploader","uploader_name","uploaded_on","filetype","formatFilesize","can_see_hidden","attachments","batch","row","Row","FlagBestAnswer","best_answer_marked_by","marked_on","best_answer_marked_on","marked_by","best_answer_marked_by_name","FlagHidden","FlagUnapproved","is_unapproved","FlagProtected","is_protected","approve","protect","unprotect","hide","unhide","like","lastLikes","last_likes","concatedLikes","finalLikes","is_liked","likes","unlike","previousState","ops","markAsBestAnswer","best_answer_is_protected","best_answer_marked_by_slug","patchThread","unmarkBestAnswer","hydrateLike","ModalDialog","LikesList","liked_on","likesCount","LikeDetails","liker_id","LikeDate","likedOn","can_reply","can_see_likes","can_like","MarkAsBestAnswer","MarkAsBestAnswerCompact","Like","Likes","LikesCompact","Reply","actions","can_mark_best_answer","can_mark_as_best_answer","can_change_best_answer","hasLikes","getLikesMessage","usernames","hiddenLikes","otherUsers","lastUser","usernamesList","last_user","config","editor","reply","move","new_thread","onUrlChange","diff","DiffItem","revertEdit","canRevert","goToEdit","previous","GoBackBtn","goBack","GoForwardBtn","goForward","GoLastBtn","goLast","Label","RevertBtn","editor_name","edited_on","edited_by","hydrateEdit","json","edits","hydratedPost","PostingConfig","ModerationForm","isError","Loader","categoryId","can_pin_threads","weight","can_hide_threads","can_close_threads","isHiddenChoices","isClosedChoices","pin","close","getWeightChoices","Modal","onCategoryChange","renderWeightField","renderHiddenField","renderClosedField","Permalink","UnmarkMarkBestAnswer","PostEdits","Approve","Move","Split","Protect","Unprotect","permaUrl","protocol","host","prompt","moderation","can_unmark_best_answer","isHidden","isUnedited","can_approve","can_move","can_protect","can_unhide","isSelected","can_merge_posts","UnreadLabel","UnreadCompact","PostedOn","PostedOnCompact","PostEditsCompacts","ProtectedLabel","postAuthor","hasAcl","hasVisibleTitle","ListItem","is_event","Breadcrumb","GoBack","lastItem","handleSuccessUnmounted","best_answers","merge","other_thread","post_set","ModalMessage","ModalLoading","successMessage","callApi","can_pin_globally","pinGlobally","can_pin","pinLocally","unpin","can_merge","can_close","open","getPinGloballyButton","getPinLocallyButton","getUnpinButton","getMoveButton","getMergeButton","getApproveButton","getOpenButton","getCloseButton","getUnhideButton","getHideButton","Weight","Unapproved","has_unapproved_posts","IsHidden","IsClosed","Replies","replies","legend","LastReply","isEditing","showModeration","isModerationVisible","Moderation","isSingle","subscription","Dropdown","dropdownClassName","Disable","Enable","Email","oldState","finalState","hiddenSpecialOption","can_start_poll","GotoMenu","Spacer","visible","SubscriptionMenu","StartPoll","is_anonymous","GotoLast","GotoNew","GotoBestAnswer","GotoUnapproved","CompactOptions","is_new","new_post","unapproved_post","StartPollCompact","GotoNewCompact","GotoUnapprovedCompact","GotoLastCompact","openReplyForm","Pager","FirstPage","PreviousPage","NextPage","LastPage","first","previousUrl","nextUrl","last","More","PostErrors","heading","ids","rollback","isArray","Merge","can_unprotect","Subscription","xsClass","btnClassName","setPageTitle","shouldFetchData","fetchData","startPollingApi","stopPollingApi","params","delayed","basePath","pk","Route","compareLastPostAge","compareGlobalWeight","compareWeight","Subcategory","listPath","getUrl","ThreadErrors","freezeThread","deleteThread","addThreads","filterThreads","categoriesMap","getFormdata","categoryChoices","can_start_threads","renderForm","renderCantMergeMessage","storeState","leftThreads","acls","renderCantMoveMessage","updateThread","threadsMap","failedThreads","selectAll","selectNone","allow","showModerationOptions","getSelectedThreads","getCategoryPicker","getSelectionButton","pageLead","busyThreads","selectAllThreads","selectNoneThreads","getDisableToolbar","getCategoryDescription","getToolbar","lists","startThread","hasGoBackButton","getGoBackButton","ParentCategory","getStartThreadButton","getModerationActions","timestamp","short_name","has_poll","round","activeCategory","showOptions","hasFlags","special_role","loadThreads","getCategory","current","fromDb","currentMap","isThreadChanged","getSorting","currentState","sets","isMounted","pollResponse","index_header","forum_name","longName","index_title","threadsCount","diffSize","applyDiff","PRIVATE_THREADS_LIST","getListOptions","routes","can_see_unapproved_content_lists","getLists","section","HEADER","RESULT","FOOTER","autoComplete","encodeURI","footer","flattenProvider","flatlist","arrayLength","flatResults","flattenProviders","flattenResults","isOpen","container","querySelector","focus","closeResults","loadResults","intervalId","onDocumentMouseDown","onEscape","removeEventListener","delay","clearTimeout","cleanResults","onToggle","STYLES","LABELS","_score","_password","_inputs","loaded","zxcvbn","inputs","cacheStale","score","getScore","RegisterForm","criteria","passwordMinLength","min_length","max_length","__all__","StartSocialAuth","RegisterComplete","getLead","getSubscript","completeRegistration","account_activation","showRegisterForm","GuestMenu","showSignInModal","GuestNav","CompactGuestNav","showGuestMenu","avatarType","showError","gravatar","setGravatar","crop_src","showCrop","upload","showUpload","galleries","showGallery","userPeview","getAvatarPreview","getGravatarButton","setGenerated","getCropButton","getUploadButton","getGalleryButton","cropit","deviceRatio","cropitOffset","crop","zoom","crop_tmp","dataUrl","cropperWidth","getAvatarSize","initialWidth","exportZoom","imageState","getImagePath","onImageLoaded","zoomLevel","imageSize","offsetX","offsetY","cropAvatar","showIndex","image","files","validateFile","preview","URL","createObjectURL","progress","FormData","uploaded","limit","filesize","fileSize","invalidTypeMsg","allowed_mime_types","extensionFound","loweredFilename","allowed_extensions","extension","extensions","pickFile","getUploadRequirements","getUploadProgressLabel","uploadFile","getUploadProgress","renderCrop","renderUpload","GalleryItem","Gallery","images","save","ChangeAvatarError","reason","getErrorReason","AvatarIndex","AvatarUpload","AvatarCrop","AvatarGallery","completeFlow","getBody","UserMenu","ChangeAvatarModal","following","changeAvatar","can_use_private_threads","PrivateThreadsBadge","unread_private_threads","UserNav","UserPrivateThreadsLink","selectUserMenu","CompactUserNav","showUserMenu","CompactUserMenu","listUrl","days","trackedPeriod","rankUrl","getRankName","counter","meta","posters","getLeadMessage","tracked_period","scrollTo","resetScroll","getRankDescription","getComponent","Rank","ActivePosters","Users","attr","forum_index_title","reducer","isAnonymous","initialState","doTick","PATCH_USER","SIGN_IN","SIGN_OUT","signIn","signOut","soft","UPDATE_AVATAR","userId","UPDATE_USERNAME","REPLACE_PARTICIPANTS","BUSY_POLL","RELEASE_POLL","REMOVE_POLL","REPLACE_POLL","UPDATE_POLL","add","busy","release","hydrated","PATCH_POST","updated_on","hydrateAttachment","hydrateUser","APPEND_POSTS","SELECT_POST","DESELECT_POST","DESELECT_POSTS","LOAD_POSTS","UNLOAD_POSTS","UPDATE_POSTS","deselect","deselectAll","hydratePost","unload","selectedPosts","deseletedPosts","deseletedAllPosts","resultsIds","reducedPosts","postReducer","LOAD_DETAILS","HYDRATE_PROFILE","PATCH_PROFILE","hydrateStatus","REPLACE_SEARCH","UPDATE_SEARCH","UPDATE_SEARCH_PROVIDER","SELECT_ALL","SELECT_NONE","SELECT_ITEM","itemsIds","none","SHOW_SNACKBAR","HIDE_SNACKBAR","showSnackbar","messageType","hideSnackbar","BUSY_THREAD","RELEASE_THREAD","REPLACE_THREAD","UPDATE_THREAD","UPDATE_THREAD_ACL","started_on","APPEND_THREADS","DELETE_THREAD","FILTER_THREADS","HYDRATE_THREADS","PATCH_THREAD","SORT_THREADS","MODERATION_PERMISSIONS","sorting","hydrateThread","thread_acl","perm","mergedState","concatUnique","sort","itemCategory","lft","rght","patchedState","TICK","ADD_NAME_CHANGE","APPEND_HISTORY","HYDRATE_HISTORY","changedBy","hydrateNamechange","namechange","unshift","floor","Date","now","APPEND_USERS","HYDRATE_USERS","Ajax","_cookieName","_csrfToken","_locks","cookieName","cookie","cookieRegex","method","resolve","reject","xhr","headers","getCsrfToken","JSON","stringify","contentType","dataType","jqXHR","responseJSON","statusText","lock","param","waiter","wait","request","processData","XMLHttpRequest","evt","lengthComputable","total","Auth","local","_store","_local","_modal","syncSession","watchState","getState","set","watch","BaseCaptcha","_ajax","_include","_snackbar","NoCaptcha","QACaptcha","kwargs","ReCaptchaComponent","grecaptcha","render","sitekey","siteKey","binding","ReCaptcha","recaptcha_site_key","Captcha","captcha_type","_captcha","init","Include","staticUrl","_staticUrl","_included","script","remote","cache","localStorage","LocalStorage","prefix","_prefix","_watchers","newValueJson","parse","newValue","watcher","oldValue","setItem","itemString","getItem","MobileNavbarDropdown","_element","_component","removeClass","show","on","PageTitle","indexTitle","forumName","_indexTitle","_forumName","finalTitle","Polls","_polls","stop","poolServer","_stopped","timeout","apiError","pollId","replaceSelection","execAction","insertCode","makeEmphasis","insertHr","URL_PATTERN","str","insertImage","isUrl","insertLink","insertSpoiler","makeStrikethrough","makeStrong","insertQuote","insertAttachment","updateItem","isRemoved","updatedAttachments","onAttachmentsChange","Preview","Filename","Actions","onInsert","onRemove","onUndo","Image","thumbnailUrl","Insert","Remove","Undo","filteredAttachments","getRandomKey","getTime","max_attachment_size","textareaId","getTextarea","getSelectionRange","end","getSelection","ctrl","range","createRange","moveStart","selectionStart","selectionEnd","_replace","myRange","replacement","startText","selectionRange","setSelectionRange","createTextRange","collapse","moveEnd","setSelection","isPreviewLoading","parsed","operation","_replaceSelection","atwho","at","displayTpl","insertTpl","searchKey","callbacks","remoteFilter","getJSON","flag","onPreviewClick","submitLabel","canProtect","onProtect","onUnprotect","columns","columnClassName","textClassName","PinOptions","onPinGlobally","onPinLocally","onUnpin","HideOptions","onHide","onUnhide","CloseOptions","onClose","onOpen","completedAttachments","categoryOptions","isErrored","loadSuccess","loadError","titleStyle","withFirstRow","onTitleChange","onPostChange","removedBlanks","cleanUsernames","onToChange","newPost","newContext","appendData","Posting","_isOpen","_isClosing","_placeholder","_mode","_realOpen","animate","scrollTop","_timeout","alert","StoreWrapper","_reducers","_initialState","createStore","combineReducers","Zxcvbn","_isLoaded","_loadedPromise","_loadingPromise","tries","plain","expires","getReasonMessage","RedrawedBannedPage","BannedPage","changeState","history","pushState","rowWidth","padding","bytes","roundSize","toFixed","Component","rootElementId","connected","rootElement","finalComponent","int","min","max","childRoutes","onEnter","replaceState","browserHistory","array","EMAIL","USERNAME","requiredTermsOfService","requiredPrivacyPolicy","returnMessage","usernameMinLength","lengthMin","usernameMaxLength","lengthMax","usernameContent","webpackContext","req","webpackContextResolve","__webpack_require__","module","exports","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","every","getter","__esModule","definition","defineProperty","enumerable","globalThis","Function","hmd","obj","prop","prototype","Symbol","toStringTag","nmd","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","bind","__webpack_exports__"],"sourceRoot":""}