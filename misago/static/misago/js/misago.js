!function o(l,u,i){function s(t,e){if(!u[t]){if(!l[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(c)return c(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var a=u[t]={exports:{}};l[t][0].call(a.exports,function(e){return s(l[t][1][e]||e)},a,a.exports,o,l,u,i)}return u[t].exports}for(var c="function"==typeof require&&require,e=0;e<i.length;e++)s(i[e]);return s}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=n(e("react")),f=n(e("./..")),s=n(e("../utils/escape-html"));function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.errors,r=e.privacyPolicy,n=e.termsOfService,a=e.onPrivacyPolicyChange,o=e.onTermsOfServiceChange,l=f.default.get("TERMS_OF_SERVICE_ID"),u=f.default.get("TERMS_OF_SERVICE_URL"),i=f.default.get("PRIVACY_POLICY_ID"),s=f.default.get("PRIVACY_POLICY_URL");return l||i?c.default.createElement("div",null,c.default.createElement(d,{agreement:gettext("the terms of service"),checked:null!==n,errors:t.termsOfService,url:u,value:l,onChange:o}),c.default.createElement(d,{agreement:gettext("the privacy policy"),checked:null!==r,errors:t.privacyPolicy,url:s,value:i,onChange:a})):null}var d=function(e){var t=e.agreement,r=e.checked,n=e.errors,a=e.url,o=e.value,l=e.onChange;if(!a)return null;var u=interpolate('<a href="%(url)s" target="_blank">%(agreement)s</a>',{agreement:(0,s.default)(t),url:(0,s.default)(a)},!0),i=interpolate(gettext("I have read and accept %(agreement)s."),{agreement:u},!0);return c.default.createElement("div",{className:"checkbox legal-footnote"},c.default.createElement("label",null,c.default.createElement("input",{checked:r,type:"checkbox",value:o,onChange:l}),c.default.createElement("span",{dangerouslySetInnerHTML:{__html:i}})),n&&n.map(function(e,t){return c.default.createElement("div",{className:"help-block errors",key:t},e)}))};r.default=a},{"../utils/escape-html":383,"./..":302,react:"react"}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var f=n(e("react")),o=n(e("./.."));function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var s=e.buttonClassName,c=e.buttonLabel,t=e.formLabel,r=e.header,n=e.labelClassName,a=o.default.get("SOCIAL_AUTH");return 0===a.length?null:f.default.createElement("div",{className:"form-group form-social-auth"},f.default.createElement(l,{className:n,text:r}),f.default.createElement("div",{className:"row"},a.map(function(e){var t=e.id,r=e.name,n=e.button_text,a=e.button_color,o=e.url,l="btn btn-block btn-default btn-social-"+t,u=a?{color:a}:null,i=n||interpolate(c,{site:r},!0);return f.default.createElement("div",{className:s||"col-xs-12",key:t},f.default.createElement("a",{className:l,style:u,href:o},i))})),f.default.createElement("hr",null),f.default.createElement(l,{className:n,text:t}))}var l=function(e){var t=e.className,r=e.text;return r?f.default.createElement("h5",{className:t||""},r):null};r.default=a},{"./..":302,react:"react"}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../services/ajax"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=d(o);return t=l?(e=d(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?f(r):n}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,r,n=c(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),p(f(t=n.call(this,e)),"handleDecline",function(){t.state.submiting||confirm(gettext("Declining will result in immediate deactivation and deletion of your account. This action is not reversible."))&&(t.setState({submiting:!0}),l.default.post(t.props.api,{accept:!1}).then(function(){location.reload(!0)}))}),p(f(t),"handleAccept",function(){t.state.submiting||(t.setState({submiting:!0}),l.default.post(t.props.api,{accept:!0}).then(function(){location.reload(!0)}))}),t.state={submiting:!1},t}return e=a,(t=[{key:"render",value:function(){return o.default.createElement("div",null,o.default.createElement("button",{className:"btn btn-default",disabled:this.state.submiting,type:"buton",onClick:this.handleDecline},gettext("Decline")),o.default.createElement("button",{className:"btn btn-primary",disabled:this.state.submiting,type:"buton",onClick:this.handleAccept},gettext("Accept and continue")))}}])&&i(e.prototype,t),r&&i(e,r),a}();r.default=a},{"../services/ajax":365,react:"react"}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ModalHeader=E,r.default=void 0;var n=o(e("react")),a=o(e("./form")),u=o(e("./form-group")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==m(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../reducers/participants")),s=e("../reducers/thread"),c=o(e("../services/ajax")),f=o(e("../services/modal")),d=o(e("../services/snackbar")),p=o(e("../services/store"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=g(o);return t=l?(e=g(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==m(n)&&"function"!=typeof n?v(r):n}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(l,a.default);var e,t,r,o=b(l);function l(e){var t,r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),r=v(t),a=function(e){t.changeValue("username",e.target.value)},(n="onUsernameChange")in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,t.state={isLoading:!1,username:""},t}return e=l,(t=[{key:"clean",value:function(){return!!this.state.username.trim().length||(d.default.error(gettext("You have to enter user name.")),!1)}},{key:"send",value:function(){return c.default.patch(this.props.thread.api.index,[{op:"add",path:"participants",value:this.state.username},{op:"add",path:"acl",value:1}])}},{key:"handleSuccess",value:function(e){p.default.dispatch((0,s.updateAcl)(e)),p.default.dispatch(i.replace(e.participants)),d.default.success(gettext("New participant has been added to thread.")),f.default.hide()}},{key:"render",value:function(){return n.default.createElement("div",{className:"modal-dialog modal-sm",role:"document"},n.default.createElement("form",{onSubmit:this.handleSubmit},n.default.createElement("div",{className:"modal-content"},n.default.createElement(E,null),n.default.createElement("div",{className:"modal-body"},n.default.createElement(u.default,{for:"id_username",label:gettext("User to add")},n.default.createElement("input",{id:"id_username",className:"form-control",disabled:this.state.isLoading,onChange:this.onUsernameChange,type:"text",value:this.state.username}))),n.default.createElement("div",{className:"modal-footer"},n.default.createElement("button",{className:"btn btn-block btn-primary",disabled:this.state.isLoading},gettext("Add participant")),n.default.createElement("button",{className:"btn btn-block btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel"))))))}}])&&h(e.prototype,t),r&&h(e,r),l}();function E(e){return n.default.createElement("div",{className:"modal-header"},n.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},n.default.createElement("span",{"aria-hidden":"true"},"×")),n.default.createElement("h4",{className:"modal-title"},gettext("Add participant")))}r.default=_},{"../reducers/participants":351,"../reducers/thread":360,"../services/ajax":365,"../services/modal":371,"../services/snackbar":376,"../services/store":377,"./form":56,"./form-group":55,react:"react"}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.select=function(e){return{user:e.auth.user,signedIn:e.auth.signedIn,signedOut:e.auth.signedOut}},r.default=void 0;var n,o=(n=e("react"))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(a,o.default.Component);var e,t,r,n=s(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"refresh",value:function(){window.location.reload()}},{key:"getMessage",value:function(){return this.props.signedIn?interpolate(gettext("You have signed in as %(username)s. Please refresh the page before continuing."),{username:this.props.signedIn.username},!0):this.props.signedOut?interpolate(gettext("%(username)s, you have been signed out. Please refresh the page before continuing."),{username:this.props.user.username},!0):void 0}},{key:"render",value:function(){var e="auth-message";return(this.props.signedIn||this.props.signedOut)&&(e+=" show"),o.default.createElement("div",{className:e},o.default.createElement("div",{className:"container"},o.default.createElement("p",{className:"lead"},this.getMessage()),o.default.createElement("p",null,o.default.createElement("button",{className:"btn btn-default",type:"button",onClick:this.refresh},gettext("Reload page")),o.default.createElement("span",{className:"hidden-xs hidden-sm"}," "+gettext("or press F5 key.")))))}}])&&l(e.prototype,t),r&&l(e,r),a}();r.default=a},{react:"react"}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.size||100,r=e.size2x||t;return n.default.createElement("img",{alt:"",className:e.className||"user-avatar",src:l(e.user,t),srcSet:l(e.user,r),width:t,height:t})},r.getSrc=l,r.resolveAvatarForSize=u;var n=o(e("react")),a=o(e("./.."));function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return e&&e.id?u(e.avatars,t).url:a.default.get("BLANK_AVATAR_URL")}function u(e,t){var r=e[0];return e.forEach(function(e){e.size>=t&&(r=e)}),r}},{"./..":302,react:"react"}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("moment")),l=n(e("react"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,l.default.Component);var e,t,r,n=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"getReasonMessage",value:function(){return this.props.message.html?l.default.createElement("div",{className:"lead",dangerouslySetInnerHTML:{__html:this.props.message.html}}):l.default.createElement("p",{className:"lead"},this.props.message.plain)}},{key:"getExpirationMessage",value:function(){if(this.props.expires){if(this.props.expires.isAfter((0,o.default)())){var e=interpolate(gettext("This ban expires on %(expires_on)s."),{expires_on:this.props.expires.format("LL, LT")},!0),t=interpolate(gettext("This ban expires %(expires_on)s."),{expires_on:this.props.expires.fromNow()},!0);return l.default.createElement("abbr",{title:e},t)}return gettext("This ban has expired.")}return gettext("This ban is permanent.")}},{key:"render",value:function(){return l.default.createElement("div",{className:"page page-error page-error-banned"},l.default.createElement("div",{className:"container"},l.default.createElement("div",{className:"message-panel"},l.default.createElement("div",{className:"message-icon"},l.default.createElement("span",{className:"material-icon"},"highlight_off")),l.default.createElement("div",{className:"message-body"},this.getReasonMessage(),l.default.createElement("p",{className:"message-footnote"},this.getExpirationMessage())))))}}])&&i(e.prototype,t),r&&i(e,r),a}();r.default=a},{moment:"moment",react:"react"}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("./loader"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,r,n=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){var e="btn "+this.props.className,t=this.props.disabled;return this.props.loading&&(e+=" btn-loading",t=!0),o.default.createElement("button",{className:e,disabled:t,onClick:this.props.onClick,type:this.props.onClick?"button":"submit"},this.props.children,this.props.loading?o.default.createElement(l.default,null):null)}}])&&i(e.prototype,t),r&&i(e,r),a}();(r.default=a).defaultProps={className:"btn-default",type:"submit",loading:!1,disabled:!1,onClick:null}},{"./loader":58,react:"react"}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return a.default.createElement("div",{className:"categories-list"},a.default.createElement("ul",{className:"list-group"},a.default.createElement("li",{className:"list-group-item empty-message"},a.default.createElement("p",{className:"lead"},gettext("No categories exist or you don't have permission to see them.")))))};var n,a=(n=e("react"))&&n.__esModule?n:{default:n}},{react:"react"}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.categories;return n.default.createElement("div",{className:"categories-list"},t.map(function(e){return n.default.createElement(a.default,{category:e,key:e.id})}))};var n=o(e("react")),a=o(e("./category"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./category":11,react:"react"}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.category,r="list-group list-group-category";t.css_class&&(r+=" list-group-category-has-flavor",r+=" list-group-category-"+t.css_class);return n.default.createElement("ul",{className:r},n.default.createElement(a.default,{category:t,isFirst:!0}),t.subcategories.map(function(e){return n.default.createElement(a.default,{category:e,isFirst:!1,key:e.id})}))};var n=o(e("react")),a=o(e("./list-item"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./list-item":14,react:"react"}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.category;return t.description?a.default.createElement("div",{className:"category-description",dangerouslySetInnerHTML:{__html:t.description.html}}):null};var n,a=(n=e("react"))&&n.__esModule?n:{default:n}},{react:"react"}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.category;return a.default.createElement("div",{className:o(t),title:l(t)},a.default.createElement("span",{className:"material-icon"},u(t)))},r.getClassName=o,r.getTitle=l,r.getIcon=u;var n,a=(n=e("react"))&&n.__esModule?n:{default:n};function o(e){return e.is_read?"read-status item-read":"read-status item-new"}function l(e){return e.is_closed?e.is_read?gettext("This category has no new posts. (closed)"):gettext("This category has new posts. (closed)"):e.is_read?gettext("This category has no new posts."):gettext("This category has new posts.")}function u(e){return e.is_closed?e.is_read?"lock_outline":"lock":e.is_read?"chat_bubble_outline":"chat_bubble"}},{react:"react"}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.category,r=e.isFirst,n="list-group-item";t.description?n+=" list-group-category-has-description":n+=" list-group-category-no-description";r&&(n+=" list-group-item-first");t.css_class&&(n+=" list-group-category-has-flavor",n+=" list-group-item-category-"+t.css_class);return a.default.createElement("li",{className:n},a.default.createElement("div",{className:"row"},a.default.createElement(o.default,{category:t}),a.default.createElement(u.default,{category:t}),a.default.createElement(l.default,{category:t})),a.default.createElement(i.default,{category:t,isFirst:r}))};var a=n(e("react")),o=n(e("./main")),l=n(e("./last-thread")),u=n(e("./stats")),i=n(e("./subcategories"));function n(e){return e&&e.__esModule?e:{default:e}}},{"./last-thread":15,"./main":16,"./stats":17,"./subcategories":18,react:"react"}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.category;return n.default.createElement("div",{className:"col-xs-12 col-sm-6 col-md-4 category-last-thread"},n.default.createElement(l,{category:t}),n.default.createElement(s,{category:t}),n.default.createElement(c,{category:t}),n.default.createElement(f,{category:t}))},r.LastThread=l,r.LastPosterAvatar=u,r.LastPosterName=i,r.Empty=s,r.Private=c,r.Protected=f,r.Message=d;var n=o(e("react")),a=o(e("../../../avatar"));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.category;return t.acl.can_browse&&t.acl.can_see_all_threads&&t.last_thread_title?n.default.createElement("div",{className:"media"},n.default.createElement("div",{className:"media-left hidden-xs"},n.default.createElement(u,{category:t})),n.default.createElement("div",{className:"media-body"},n.default.createElement("div",{className:"media-heading"},n.default.createElement("a",{className:"item-title thread-title",href:t.url.last_thread_new,title:t.last_thread_title},t.last_thread_title)),n.default.createElement("ul",{className:"list-inline"},n.default.createElement("li",{className:"category-last-thread-poster"},n.default.createElement(i,{category:t})),n.default.createElement("li",{className:"divider"},"—"),n.default.createElement("li",{className:"category-last-thread-date"},n.default.createElement("a",{href:t.url.last_post},t.last_post_on.fromNow()))))):null}function u(e){var t=e.category;return t.last_poster?n.default.createElement("a",{className:"last-poster-avatar",href:t.last_poster.url,title:t.last_poster_name},n.default.createElement(a.default,{className:"media-object",size:40,user:t.last_poster})):n.default.createElement("span",{className:"last-poster-avatar",title:t.last_poster_name},n.default.createElement(a.default,{className:"media-object",size:40}))}function i(e){var t=e.category;return t.last_poster?n.default.createElement("a",{className:"item-title",href:t.last_poster.url},t.last_poster_name):n.default.createElement("span",{className:"item-title"},t.last_poster_name)}function s(e){var t=e.category;return!t.acl.can_browse||!t.acl.can_see_all_threads||t.last_thread_title?null:n.default.createElement(d,{message:gettext("This category is empty. No threads were posted within it so far.")})}function c(e){var t=e.category;return!t.acl.can_browse||t.acl.can_see_all_threads?null:n.default.createElement(d,{message:gettext("This category is private. You can see only your own threads within it.")})}function f(e){return e.category.acl.can_browse?null:n.default.createElement(d,{message:gettext("This category is protected. You can't browse its contents.")})}function d(e){var t=e.message;return n.default.createElement("div",{className:"media category-thread-message"},n.default.createElement("div",{className:"media-left"},n.default.createElement("span",{className:"material-icon"},"info_outline")),n.default.createElement("div",{className:"media-body"},n.default.createElement("p",null,t)))}},{"../../../avatar":6,react:"react"}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.category;return n.default.createElement("div",{className:"col-xs-12 col-sm-6 col-md-6 category-main"},n.default.createElement("div",{className:"media"},n.default.createElement("div",{className:"media-left"},n.default.createElement(o.default,{category:t})),n.default.createElement("div",{className:"media-body"},n.default.createElement("h4",{className:"media-heading"},n.default.createElement("a",{href:t.url.index},t.name)),n.default.createElement(a.default,{category:t}))))};var n=l(e("react")),a=l(e("./description")),o=l(e("./icon"));function l(e){return e&&e.__esModule?e:{default:e}}},{"./description":12,"./icon":13,react:"react"}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.category;return n.default.createElement("div",{className:"col-md-2 hidden-xs hidden-sm"},n.default.createElement("ul",{className:"list-unstyled category-stats"},n.default.createElement(o,{threads:t.threads}),n.default.createElement(l,{posts:t.posts})))},r.Threads=o,r.Posts=l;var n=a(e("react"));a(e("../../../avatar"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.threads,r=ngettext("%(threads)s thread","%(threads)s threads",t);return n.default.createElement("li",{className:"category-stat-threads"},interpolate(r,{threads:t},!0))}function l(e){var t=e.posts,r=ngettext("%(posts)s post","%(posts)s posts",t);return n.default.createElement("li",{className:"category-stat-posts"},interpolate(r,{posts:t},!0))}},{"../../../avatar":6,react:"react"}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.category;return e.isFirst||0===t.subcategories.length?null:n.default.createElement("div",{className:"row subcategories-list"},t.subcategories.map(function(e){return n.default.createElement(a.default,{category:e,key:e.id})}))};var n=o(e("react")),a=o(e("./list-item"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./list-item":19,react:"react"}],19:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.category,r="btn btn-default btn-block btn-sm btn-subcategory";t.is_read||(r+=" btn-subcategory-new");return a.default.createElement("div",{className:"col-xs-12 col-sm-4 col-md-3"},a.default.createElement("a",{className:r,href:t.url.index},a.default.createElement("span",{className:"material-icon"},o(t)),a.default.createElement("span",{className:"icon-text"},t.name)))},r.getIcon=o;var n,a=(n=e("react"))&&n.__esModule?n:{default:n};function o(e){return e.is_closed?e.is_read?"lock_outline":"lock":e.is_read?"chat_bubble_outline":"chat_bubble"}},{react:"react"}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.select=function(e){return{tick:e.tick.tick}},r.default=void 0;var n=o(e("moment")),a=o(e("react")),u=o(e("./blankslate")),i=o(e("./categories-list")),s=o(e("../..")),c=o(e("../../services/polls"));function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==f(n)&&"function"!=typeof n?h(r):n}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function e(t){return Object.assign({},t,{last_post_on:t.last_post_on?(0,n.default)(t.last_post_on):null,subcategories:t.subcategories.map(e)})},l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,a.default.Component);var e,t,r,o=m(l);function l(e){var t,r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),r=h(t),a=function(e){t.setState({categories:e.map(b)})},(n="update")in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,t.state={categories:s.default.get("CATEGORIES").map(b)},t.startPolling(s.default.get("CATEGORIES_API")),t}return e=l,(t=[{key:"startPolling",value:function(e){c.default.start({poll:"categories",url:e,frequency:18e4,update:this.update})}},{key:"render",value:function(){var e=this.state.categories;return 0===e.length?a.default.createElement(u.default,null):a.default.createElement(i.default,{categories:e})}}])&&d(e.prototype,t),r&&d(e,r),l}();r.default=l},{"../..":302,"../../services/polls":374,"./blankslate":9,"./categories-list":10,moment:"moment",react:"react"}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return a.default.createElement("select",{className:e.className||"form-control",disabled:e.disabled||!1,id:e.id||null,onChange:e.onChange,value:e.value},e.choices.map(function(e){return a.default.createElement("option",{disabled:e.disabled||!1,key:e.value,value:e.value},"- - ".repeat(e.level)+e.label)}))};var n,a=(n=e("react"))&&n.__esModule?n:{default:n}},{react:"react"}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("react")),a=(o(e("../avatar")),o(e("../button"))),u=o(e("../../services/ajax")),i=o(e("../../services/snackbar"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=m(o);return t=l?(e=m(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?p(r):n}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(l,n.default.Component);var e,t,r,o=d(l);function l(e){var a,t,r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a=o.call(this,e),t=p(a),n=function(){if(a.state.isLoading)return!1;a.setState({isLoading:!0});var e=a.props.upload?"crop_tmp":"crop_src",t=$(".crop-form"),r=t.cropit("exportZoom"),n=t.cropit("offset");u.default.post(a.props.user.api.avatar,{avatar:e,crop:{offset:{x:n.x*r,y:n.y*r},zoom:t.cropit("zoom")*r}}).then(function(e){a.props.onComplete(e),i.default.success(e.detail)},function(e){400===e.status?(i.default.error(e.detail),a.setState({isLoading:!1})):a.props.showError(e)})},(r="cropAvatar")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,a.state={isLoading:!1,deviceRatio:1},a}return e=l,(t=[{key:"getAvatarSize",value:function(){return this.props.upload?this.props.options.crop_tmp.size:this.props.options.crop_src.size}},{key:"getImagePath",value:function(){return this.props.upload?this.props.dataUrl:this.props.options.crop_src.url}},{key:"componentDidMount",value:function(){for(var o=this,l=$(".crop-form"),e=this.getAvatarSize(),t=l.width();t<e;)e/=2;var r=this.getAvatarSize()/e;l.width(e),l.cropit({width:e,height:e,exportZoom:r,imageState:{src:this.getImagePath()},onImageLoaded:function(){var e,t,r,n,a;o.props.upload?(e=l.cropit("zoom"),(t=l.cropit("imageSize")).width>t.height?(r=(t.width*e-o.getAvatarSize())/-2,l.cropit("offset",{x:r,y:0})):t.width<t.height?(n=(t.height*e-o.getAvatarSize())/-2,l.cropit("offset",{x:0,y:n})):l.cropit("offset",{x:0,y:0})):(a=o.props.options.crop_src.crop)&&(l.cropit("zoom",a.zoom),l.cropit("offset",{x:a.x,y:a.y}))}})}},{key:"componentWillUnmount",value:function(){$(".crop-form").cropit("disable")}},{key:"render",value:function(){return n.default.createElement("div",null,n.default.createElement("div",{className:"modal-body modal-avatar-crop"},n.default.createElement("div",{className:"crop-form"},n.default.createElement("div",{className:"cropit-preview"}),n.default.createElement("input",{type:"range",className:"cropit-image-zoom-input"}))),n.default.createElement("div",{className:"modal-footer"},n.default.createElement("div",{className:"col-md-6 col-md-offset-3"},n.default.createElement(a.default,{onClick:this.cropAvatar,loading:this.state.isLoading,className:"btn-primary btn-block"},this.props.upload?gettext("Set avatar"):gettext("Crop image")),n.default.createElement(a.default,{onClick:this.props.showIndex,disabled:this.state.isLoading,className:"btn-default btn-block"},gettext("Cancel")))))}}])&&c(e.prototype,t),r&&c(e,r),l}();r.default=l},{"../../services/ajax":365,"../../services/snackbar":376,"../avatar":6,"../button":8,react:"react"}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Gallery=r.GalleryItem=void 0;var l=i(e("react")),a=(i(e("../avatar")),i(e("../button"))),o=(i(e("../..")),i(e("../../services/ajax"))),u=i(e("../../services/snackbar")),n=i(e("../../utils/batch"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?b(r):n}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=function(){m(o,l.default.Component);var a=y(o);function o(){var e;f(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=a.call.apply(a,[this].concat(r))),"select",function(){e.props.select(e.props.id)}),e}return p(o,[{key:"getClassName",value:function(){return this.props.selection===this.props.id?this.props.disabled?"btn btn-avatar btn-disabled avatar-selected":"btn btn-avatar avatar-selected":this.props.disabled?"btn btn-avatar btn-disabled":"btn btn-avatar"}},{key:"render",value:function(){return l.default.createElement("button",{type:"button",className:this.getClassName(),disabled:this.props.disabled,onClick:this.select},l.default.createElement("img",{src:this.props.url}))}}]),o}();r.GalleryItem=_;var E=function(){m(t,l.default.Component);var e=y(t);function t(){return f(this,t),e.apply(this,arguments)}return p(t,[{key:"render",value:function(){var r=this;return l.default.createElement("div",{className:"avatars-gallery"},l.default.createElement("h3",null,this.props.name),l.default.createElement("div",{className:"avatars-gallery-images"},(0,n.default)(this.props.images,4,null).map(function(e,t){return l.default.createElement("div",{className:"row",key:t},e.map(function(e,t){return l.default.createElement("div",{className:"col-xs-3",key:t},e?l.default.createElement(_,c({disabled:r.props.disabled,select:r.props.select,selection:r.props.selection},e)):l.default.createElement("div",{className:"blank-avatar"}))}))})))}}]),t}();r.Gallery=E;var w=function(){m(n,l.default.Component);var r=y(n);function n(e){var t;return f(this,n),g(b(t=r.call(this,e)),"select",function(e){t.setState({selection:e})}),g(b(t),"save",function(){return!t.state.isLoading&&(t.setState({isLoading:!0}),void o.default.post(t.props.user.api.avatar,{avatar:"galleries",image:t.state.selection}).then(function(e){t.setState({isLoading:!1}),u.default.success(e.detail),t.props.onComplete(e),t.props.showIndex()},function(e){400===e.status?(u.default.error(e.detail),t.setState({isLoading:!1})):t.props.showError(e)}))}),t.state={selection:null,isLoading:!1},t}return p(n,[{key:"render",value:function(){var r=this;return l.default.createElement("div",null,l.default.createElement("div",{className:"modal-body modal-avatar-gallery"},this.props.options.galleries.map(function(e,t){return l.default.createElement(E,{name:e.name,images:e.images,selection:r.state.selection,disabled:r.state.isLoading,select:r.select,key:t})})),l.default.createElement("div",{className:"modal-footer"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-md-6 col-md-offset-3"},l.default.createElement(a.default,{onClick:this.save,loading:this.state.isLoading,disabled:!this.state.selection,className:"btn-primary btn-block"},this.state.selection?gettext("Save choice"):gettext("Select avatar")),l.default.createElement(a.default,{onClick:this.props.showIndex,disabled:this.state.isLoading,className:"btn-default btn-block"},gettext("Cancel"))))))}}]),n}();r.default=w},{"../..":302,"../../services/ajax":365,"../../services/snackbar":376,"../../utils/batch":380,"../avatar":6,"../button":8,react:"react"}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../avatar")),u=n(e("../button")),i=n(e("../loader")),s=n(e("../../services/ajax")),c=n(e("../../services/snackbar"));function n(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==f(n)&&"function"!=typeof n?h(r):n}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,o.default.Component);var e,t,r,n=m(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),b(h(t=n.call(this,e)),"setGravatar",function(){t.callApi("gravatar")}),b(h(t),"setGenerated",function(){t.callApi("generated")}),t.state={isLoading:!1},t}return e=a,(t=[{key:"callApi",value:function(e){var t=this;if(this.state.isLoading)return!1;this.setState({isLoading:!0}),s.default.post(this.props.user.api.avatar,{avatar:e}).then(function(e){t.setState({isLoading:!1}),c.default.success(e.detail),t.props.onComplete(e)},function(e){400===e.status?(c.default.error(e.detail),t.setState({isLoading:!1})):t.props.showError(e)})}},{key:"getGravatarButton",value:function(){return this.props.options.gravatar?o.default.createElement(u.default,{onClick:this.setGravatar,disabled:this.state.isLoading,className:"btn-default btn-block btn-avatar-gravatar"},gettext("Download my Gravatar")):null}},{key:"getCropButton",value:function(){return this.props.options.crop_src?o.default.createElement(u.default,{className:"btn-default btn-block btn-avatar-crop",disabled:this.state.isLoading,onClick:this.props.showCrop},gettext("Re-crop uploaded image")):null}},{key:"getUploadButton",value:function(){return this.props.options.upload?o.default.createElement(u.default,{className:"btn-default btn-block btn-avatar-upload",disabled:this.state.isLoading,onClick:this.props.showUpload},gettext("Upload new image")):null}},{key:"getGalleryButton",value:function(){return this.props.options.galleries?o.default.createElement(u.default,{className:"btn-default btn-block btn-avatar-gallery",disabled:this.state.isLoading,onClick:this.props.showGallery},gettext("Pick avatar from gallery")):null}},{key:"getAvatarPreview",value:function(){var e={id:this.props.user.id,avatars:this.props.options.avatars};return this.state.isLoading?o.default.createElement("div",{className:"avatar-preview preview-loading"},o.default.createElement(l.default,{size:"200",user:e}),o.default.createElement(i.default,null)):o.default.createElement("div",{className:"avatar-preview"},o.default.createElement(l.default,{size:"200",user:e}))}},{key:"render",value:function(){return o.default.createElement("div",{className:"modal-body modal-avatar-index"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-md-5"},this.getAvatarPreview()),o.default.createElement("div",{className:"col-md-7"},this.getGravatarButton(),o.default.createElement(u.default,{onClick:this.setGenerated,disabled:this.state.isLoading,className:"btn-default btn-block btn-avatar-generate"},gettext("Generate my individual avatar")),this.getCropButton(),this.getUploadButton(),this.getGalleryButton())))}}])&&d(e.prototype,t),r&&d(e,r),a}();r.default=a},{"../../services/ajax":365,"../../services/snackbar":376,"../avatar":6,"../button":8,"../loader":58,react:"react"}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.select=function(e){return{user:e.auth.user}},r.default=r.ChangeAvatarError=void 0;var n=a(e("react")),l=a(e("./index")),u=a(e("./crop")),i=a(e("./upload")),s=a(e("./gallery")),c=a(e("../modal-loader")),f=e("../../reducers/users"),d=a(e("../../services/ajax")),p=a(e("../../services/store"));function a(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=w(o);return t=l?(e=w(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==m(n)&&"function"!=typeof n?E(r):n}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(){v(t,n.default.Component);var e=_(t);function t(){return y(this,t),e.apply(this,arguments)}return b(t,[{key:"getErrorReason",value:function(){return this.props.reason?n.default.createElement("p",{dangerouslySetInnerHTML:{__html:this.props.reason}}):null}},{key:"render",value:function(){return n.default.createElement("div",{className:"modal-body"},n.default.createElement("div",{className:"message-icon"},n.default.createElement("span",{className:"material-icon"},"remove_circle_outline")),n.default.createElement("div",{className:"message-body"},n.default.createElement("p",{className:"lead"},this.props.message),this.getErrorReason(),n.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},gettext("Ok"))))}}]),t}();r.ChangeAvatarError=O;var P=function(){v(o,n.default.Component);var a=_(o);function o(){var t;y(this,o);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return h(E(t=a.call.apply(a,[this].concat(r))),"showError",function(e){t.setState({error:e})}),h(E(t),"showIndex",function(){t.setState({component:l.default})}),h(E(t),"showUpload",function(){t.setState({component:i.default})}),h(E(t),"showCrop",function(){t.setState({component:u.default})}),h(E(t),"showGallery",function(){t.setState({component:s.default})}),h(E(t),"completeFlow",function(e){p.default.dispatch((0,f.updateAvatar)(t.props.user,e.avatars)),t.setState({component:l.default,options:e})}),t}return b(o,[{key:"componentDidMount",value:function(){var t=this;d.default.get(this.props.user.api.avatar).then(function(e){t.setState({component:l.default,options:e,error:null})},function(e){t.showError(e)})}},{key:"getBody",value:function(){return this.state?this.state.error?n.default.createElement(O,{message:this.state.error.detail,reason:this.state.error.reason}):n.default.createElement(this.state.component,{options:this.state.options,user:this.props.user,onComplete:this.completeFlow,showError:this.showError,showIndex:this.showIndex,showCrop:this.showCrop,showUpload:this.showUpload,showGallery:this.showGallery}):n.default.createElement(c.default,null)}},{key:"getClassName",value:function(){return this.state&&this.state.error?"modal-dialog modal-message modal-change-avatar":"modal-dialog modal-change-avatar"}},{key:"render",value:function(){return n.default.createElement("div",{className:this.getClassName(),role:"document"},n.default.createElement("div",{className:"modal-content"},n.default.createElement("div",{className:"modal-header"},n.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},n.default.createElement("span",{"aria-hidden":"true"},"×")),n.default.createElement("h4",{className:"modal-title"},gettext("Change your avatar"))),this.getBody()))}}]),o}();r.default=P},{"../../reducers/users":364,"../../services/ajax":365,"../../services/store":377,"../modal-loader":61,"./crop":22,"./gallery":23,"./index":24,"./upload":26,react:"react"}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("react")),l=a(e("./crop")),u=a(e("../button")),i=a(e("../../services/ajax")),s=a(e("../../services/snackbar")),c=a(e("../../utils/file-size"));function a(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==f(n)&&"function"!=typeof n?h(r):n}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,n.default.Component);var e,t,r,a=m(o);function o(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),b(h(n=a.call(this,e)),"pickFile",function(){document.getElementById("avatar-hidden-upload").click()}),b(h(n),"uploadFile",function(){var e,t,r=document.getElementById("avatar-hidden-upload").files[0];r&&((e=n.validateFile(r))?s.default.error(e):(n.setState({image:r,preview:URL.createObjectURL(r),progress:0}),(t=new FormData).append("avatar","upload"),t.append("image",r),i.default.upload(n.props.user.api.avatar,t,function(e){n.setState({progress:e})}).then(function(e){n.setState({options:e,uploaded:e.detail}),s.default.info(gettext("Your image has been uploaded and you may now crop it."))},function(e){400===e.status||413===e.status?(s.default.error(e.detail),n.setState({isLoading:!1,image:null,progress:0})):n.props.showError(e)})))}),n.state={image:null,preview:null,progress:0,uploaded:null,dataUrl:null},n}return e=o,(t=[{key:"validateFile",value:function(e){if(e.size>this.props.options.upload.limit)return interpolate(gettext("Selected file is too big. (%(filesize)s)"),{filesize:(0,c.default)(e.size)},!0);var t=gettext("Selected file type is not supported.");if(-1===this.props.options.upload.allowed_mime_types.indexOf(e.type))return t;var r=!1,n=e.name.toLowerCase();return this.props.options.upload.allowed_extensions.map(function(e){n.substr(-1*e.length)===e&&(r=!0)}),!r&&t}},{key:"getUploadRequirements",value:function(e){var t=e.allowed_extensions.map(function(e){return e.substr(1)});return interpolate(gettext("%(files)s files smaller than %(limit)s"),{files:t.join(", "),limit:(0,c.default)(e.limit)},!0)}},{key:"getUploadButton",value:function(){return n.default.createElement("div",{className:"modal-body modal-avatar-upload"},n.default.createElement(u.default,{className:"btn-pick-file",onClick:this.pickFile},n.default.createElement("div",{className:"material-icon"},"input"),gettext("Select file")),n.default.createElement("p",{className:"text-muted"},this.getUploadRequirements(this.props.options.upload)))}},{key:"getUploadProgressLabel",value:function(){return interpolate(gettext("%(progress)s % complete"),{progress:this.state.progress},!0)}},{key:"getUploadProgress",value:function(){return n.default.createElement("div",{className:"modal-body modal-avatar-upload"},n.default.createElement("div",{className:"upload-progress"},n.default.createElement("img",{src:this.state.preview}),n.default.createElement("div",{className:"progress"},n.default.createElement("div",{className:"progress-bar",role:"progressbar","aria-valuenow":"{this.state.progress}","aria-valuemin":"0","aria-valuemax":"100",style:{width:this.state.progress+"%"}},n.default.createElement("span",{className:"sr-only"},this.getUploadProgressLabel())))))}},{key:"renderUpload",value:function(){return n.default.createElement("div",null,n.default.createElement("input",{type:"file",id:"avatar-hidden-upload",className:"hidden-file-upload",onChange:this.uploadFile}),this.state.image?this.getUploadProgress():this.getUploadButton(),n.default.createElement("div",{className:"modal-footer"},n.default.createElement("div",{className:"col-md-6 col-md-offset-3"},n.default.createElement(u.default,{onClick:this.props.showIndex,disabled:!!this.state.image,className:"btn-default btn-block"},gettext("Cancel")))))}},{key:"renderCrop",value:function(){return n.default.createElement(l.default,{options:this.state.options,user:this.props.user,upload:this.state.uploaded,dataUrl:this.state.preview,onComplete:this.props.onComplete,showError:this.props.showError,showIndex:this.props.showIndex})}},{key:"render",value:function(){return this.state.uploaded?this.renderCrop():this.renderUpload()}}])&&d(e.prototype,t),r&&d(e,r),o}();r.default=o},{"../../services/ajax":365,"../../services/snackbar":376,"../../utils/file-size":384,"../button":8,"./crop":22,react:"react"}],27:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("react"))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(a,o.default.Component);var e,t,r,n=s(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"getClassName",value:function(){return this.props.dropdown?"btn btn-default btn-aligned btn-icon btn-dropdown-toggle open hidden-md hidden-lg":"btn btn-default btn-aligned btn-icon btn-dropdown-toggle hidden-md hidden-lg"}},{key:"render",value:function(){return o.default.createElement("button",{className:this.getClassName(),type:"button",onClick:this.props.toggleNav,"aria-haspopup":"true","aria-expanded":this.props.dropdown?"true":"false"},o.default.createElement("i",{className:"material-icon"},"menu"))}}])&&l(e.prototype,t),r&&l(e,r),a}();r.default=a},{react:"react"}],28:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return e.display?n.default.createElement(a.default,{helpText:gettext("No profile details are editable at this time."),message:gettext("This option is currently unavailable.")}):null};var n=o(e("react")),a=o(e("../panel-message"));function o(e){return e&&e.__esModule?e:{default:e}}},{"../panel-message":94,react:"react"}],29:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../select"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=i(o);return t=l?(e=i(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?f(r):n}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,o.default.Component);var e,t,r,u=c(i);function i(){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var e,t,r,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=u.call.apply(u,[this].concat(o)),e=f(n),r=function(e){var t=n.props,r=t.field;(0,t.onChange)(r.fieldname,e.target.value)},(t="onChange")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,n}return e=i,(t=[{key:"render",value:function(){var e=this.props,t=e.disabled,r=e.field,n=e.value,a=r.input;return"select"===a.type?o.default.createElement(l.default,{choices:a.choices,disabled:t,id:"id_"+r.fieldname,onChange:this.onChange,value:n}):"textarea"===a.type?o.default.createElement("textarea",{className:"form-control",disabled:t,id:"id_"+r.fieldname,onChange:this.onChange,rows:"4",type:"text",value:n}):"text"===a.type?o.default.createElement("input",{className:"form-control",disabled:t,id:"id_"+r.fieldname,onChange:this.onChange,type:"text",value:n}):null}}])&&a(e.prototype,t),r&&a(e,r),i}();r.default=d},{"../select":210,react:"react"}],30:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.disabled,r=e.errors,n=e.fields,a=e.name,o=e.onChange,l=e.value;return u.default.createElement("fieldset",null,u.default.createElement("legend",null,a),n.map(function(e){return u.default.createElement(s.default,{for:"id_"+e.fieldname,helpText:e.help_text,key:e.fieldname,label:e.label,validation:r[e.fieldname]},u.default.createElement(i.default,{disabled:t,field:e,onChange:o,value:l[e.fieldname]}))}))};var u=n(e("react")),i=n(e("./field-input")),s=n(e("../form-group"));function n(e){return e&&e.__esModule?e:{default:e}}},{"../form-group":55,"./field-input":29,react:"react"}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CancelButton=v,r.default=void 0;var n=s(e("react")),a=s(e("./fieldset")),o=s(e("../button")),l=s(e("../form")),u=s(e("../../services/ajax")),i=s(e("../../services/snackbar"));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=h(o);return t=l?(e=h(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==c(n)&&"function"!=typeof n?m(r):n}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(c,l.default);var e,t,r,s=p(c);function c(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),y(m(r=s.call(this,e)),"onChange",function(e,t){r.setState(y({},e,t))}),r.state={isLoading:!1,errors:{}};for(var t=e.groups.length,n=0;n<t;n++)for(var a=e.groups[n],o=a.fields.length,l=0;l<o;l++){var u=a.fields[l].fieldname,i=a.fields[l].initial;r.state[u]=i}return r}return e=c,(t=[{key:"send",value:function(){var e=Object.assign({},this.state,{errors:null,isLoading:null});return u.default.post(this.props.api,e)}},{key:"handleSuccess",value:function(e){this.props.onSuccess(e)}},{key:"handleError",value:function(e){400===e.status?(i.default.error(gettext("Form contains errors.")),this.setState({errors:e})):i.default.apiError(e)}},{key:"render",value:function(){var r=this;return n.default.createElement("form",{onSubmit:this.handleSubmit},n.default.createElement("div",{className:"panel-body"},this.props.groups.map(function(e,t){return n.default.createElement(a.default,{disabled:r.state.isLoading,errors:r.state.errors,fields:e.fields,name:e.name,key:t,onChange:r.onChange,value:r.state})})),n.default.createElement("div",{className:"panel-footer text-right"},n.default.createElement(v,{disabled:this.state.isLoading,onCancel:this.props.onCancel})," ",n.default.createElement(o.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Save changes"))))}}])&&f(e.prototype,t),r&&f(e,r),c}();function v(e){var t=e.onCancel,r=e.disabled;return t?n.default.createElement("button",{className:"btn btn-default",disabled:r,onClick:t,type:"button"},gettext("Cancel")):null}r.default=b},{"../../services/ajax":365,"../../services/snackbar":376,"../button":8,"../form":56,"./fieldset":30,react:"react"}],32:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FormDisplay=y,r.default=void 0;var l=n(e("react")),o=n(e("./blankslate")),u=n(e("./loader")),i=n(e("./form")),s=n(e("../../services/ajax")),c=n(e("../../services/snackbar"));function n(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=h(o);return t=l?(e=h(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==f(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,l.default.Component);var e,t,r,n=m(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,e)).state={loading:!0,groups:null},t}return e=a,(t=[{key:"componentDidMount",value:function(){var t=this;s.default.get(this.props.api).then(function(e){t.setState({loading:!1,groups:e})},function(e){c.default.apiError(e),t.props.cancel&&t.props.cancel()})}},{key:"render",value:function(){var e=this.state,t=e.groups,r=e.loading;return l.default.createElement("div",{className:"panel panel-default panel-form"},l.default.createElement("div",{className:"panel-heading"},l.default.createElement("h3",{className:"panel-title"},gettext("Edit details"))),l.default.createElement(u.default,{display:r}),l.default.createElement(o.default,{display:!r&&!t.length}),l.default.createElement(y,{api:this.props.api,display:!r&&t.length,groups:t,onCancel:this.props.onCancel,onSuccess:this.props.onSuccess}))}}])&&d(e.prototype,t),r&&d(e,r),a}();function y(e){var t=e.api,r=e.display,n=e.groups,a=e.onCancel,o=e.onSuccess;return r?l.default.createElement(i.default,{api:t,groups:n,onCancel:a,onSuccess:o}):null}r.default=a},{"../../services/ajax":365,"../../services/snackbar":376,"./blankslate":28,"./form":31,"./loader":33,react:"react"}],33:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return e.display?n.default.createElement("div",{className:"panel-body"},n.default.createElement(a.default,null)):null};var n=o(e("react")),a=o(e("../loader"));function o(e){return e&&e.__esModule?e:{default:e}}},{"../loader":58,react:"react"}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,a=(n=e("react"))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=i(o);return t=l?(e=i(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?c(r):n}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,a.default.Component);var e,t,r,u=s(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t,r,n,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=u.call.apply(u,[this].concat(o)),t=c(e),n=function(){e.props.replaceSelection(e.props.execAction)},(r="onClick")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e}return e=i,(t=[{key:"render",value:function(){return a.default.createElement("button",{className:"btn btn-icon "+this.props.className,disabled:this.props.disabled,onClick:this.onClick,title:this.props.title,type:"button"},this.props.children)}}])&&o(e.prototype,t),r&&o(e,r),i}();r.default=f},{react:"react"}],35:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement(a.default,l({execAction:u,title:gettext("Insert code")},e),n.default.createElement("span",{className:"material-icon"},"functions"))},r.insertCode=u;var n=o(e("react")),a=o(e("./action"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){t("\n\n```"+$.trim(prompt(gettext("Enter name of syntax of your code (optional)")+":"))+"\n"+e+"\n```\n\n")}},{"./action":34,react:"react"}],36:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement(a.default,l({execAction:u,title:gettext("Emphase selection")},e),n.default.createElement("span",{className:"material-icon"},"format_italic"))},r.makeEmphasis=u;var n=o(e("react")),a=o(e("./action"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){e.length&&t("*"+e+"*")}},{"./action":34,react:"react"}],37:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement(a.default,l({execAction:u,title:gettext("Insert horizontal ruler")},e),n.default.createElement("span",{className:"material-icon"},"remove"))},r.insertHr=u;var n=o(e("react")),a=o(e("./action"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){t("\n\n- - - - -\n\n")}},{"./action":34,react:"react"}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement(a.default,u({execAction:i,title:gettext("Insert image")},e),n.default.createElement("span",{className:"material-icon"},"insert_photo"))},r.insertImage=i;var n=l(e("react")),a=l(e("./action")),o=l(e("../../../utils/is-url"));function l(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){var r="",n="";e.length&&((0,o.default)(e)?r=e:n=e),r=$.trim(prompt(gettext("Enter link to image")+":",r)),n=$.trim(prompt(gettext("Enter image label (optional)")+":",n)),r.length&&(0<n.length?t("!["+n+"]("+r+")"):t("!("+r+")"))}},{"../../../utils/is-url":385,"./action":34,react:"react"}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement(a.default,u({execAction:i,title:gettext("Insert link")},e),n.default.createElement("span",{className:"material-icon"},"insert_link"))},r.insertLink=i;var n=l(e("react")),a=l(e("./action")),o=l(e("../../../utils/is-url"));function l(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){var r="",n="";if(e.length&&((0,o.default)(e)?r=e:n=e),0===(r=$.trim(prompt(gettext("Enter link address")+":",r)||"")).length)return!1;n=$.trim(prompt(gettext("Enter link label (optional)")+":",n)),r.length&&(0<n.length?t("["+n+"]("+r+")"):t(r))}},{"../../../utils/is-url":385,"./action":34,react:"react"}],40:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement(a.default,l({execAction:u,title:gettext("Insert quote")},e),n.default.createElement("span",{className:"material-icon"},"format_quote"))},r.insertQuote=u;var n=o(e("react")),a=o(e("./action"));o(e("../../../utils/is-url"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){var r=$.trim(prompt(gettext("Enter quote autor, prefix usernames with @")+":",r));t(r?'\n\n[quote="'+r+'"]\n'+e+"\n[/quote]\n\n":"\n\n[quote]\n"+e+"\n[/quote]\n\n")}},{"../../../utils/is-url":385,"./action":34,react:"react"}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement(a.default,l({execAction:u,title:gettext("Insert spoiler")},e),n.default.createElement("span",{className:"material-icon"},"not_interested"))},r.insertSpoiler=u;var n=o(e("react")),a=o(e("./action"));o(e("../../../utils/is-url"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){t("\n\n[spoiler]\n"+e+"\n[/spoiler]\n\n")}},{"../../../utils/is-url":385,"./action":34,react:"react"}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement(a.default,l({execAction:u,title:gettext("Strikethrough selection")},e),n.default.createElement("span",{className:"material-icon"},"format_strikethrough"))},r.makeStrikethrough=u;var n=o(e("react")),a=o(e("./action"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){e.length&&t("~~"+e+"~~")}},{"./action":34,react:"react"}],43:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement(a.default,l({execAction:u,title:gettext("Bolder selection")},e),n.default.createElement("span",{className:"material-icon"},"format_bold"))},r.makeStrong=u;var n=o(e("react")),a=o(e("./action"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){e.length&&t("**"+e+"**")}},{"./action":34,react:"react"}],44:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Preview=g,r.Image=_,r.Icon=E,r.Filename=w,r.Details=O,r.Actions=P,r.Insert=k,r.Remove=j,r.Undo=S,r.default=void 0;var l=n(e("react")),a=(n(e("../../../..")),n(e("../../../../utils/escape-html"))),o=n(e("../../../../utils/file-size"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?d(r):n}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h='<abbr title="%(absolute)s">%(relative)s</abbr>',y='<span class="item-title">%(user)s</span>',b='<a href="%(url)s" class="item-title">%(user)s</a>',v=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,l.default.Component);var e,t,r,a=f(o);function o(){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return m(d(n=a.call.apply(a,[this].concat(t))),"onInsert",function(){n.props.replaceSelection(n.insertAttachment)}),m(d(n),"insertAttachment",function(e,t){var r=n.props.item;r.is_image?r.url.thumb?t("[!["+r.filename+"]("+r.url.thumb+")]("+r.url.index+")"):t("[!["+r.filename+"]("+r.url.index+")]("+r.url.index+")"):t("["+r.filename+"]("+r.url.index+")")}),m(d(n),"onRemove",function(){n.updateItem({isRemoved:!0})}),m(d(n),"onUndo",function(){n.updateItem({isRemoved:!1})}),m(d(n),"updateItem",function(t){var e=n.props.attachments.map(function(e){return e.id===n.props.item.id?Object.assign({},e,t):e});n.props.onAttachmentsChange(e)}),n}return e=o,(t=[{key:"render",value:function(){return l.default.createElement("li",{className:"editor-attachment-complete"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-xs-12 col-sm-8 col-md-9"},l.default.createElement(g,this.props),l.default.createElement("div",{className:"editor-attachment-details"},l.default.createElement(w,this.props),l.default.createElement(O,this.props))),l.default.createElement("div",{className:"col-xs-12 col-sm-4 col-md-3 xs-margin-top-half"},l.default.createElement(P,i({onInsert:this.onInsert,onRemove:this.onRemove,onUndo:this.onUndo},this.props)))))}}])&&s(e.prototype,t),r&&s(e,r),o}();function g(e){return e.item.is_image?l.default.createElement(_,e):l.default.createElement(E,e)}function _(e){var t=e.item.url.thumb||e.item.url.index;return l.default.createElement("div",{className:"editor-attachment-image"},l.default.createElement("a",{href:e.item.url.index+"?shva=1",style:{backgroundImage:"url('"+t+"?shva=1')"},target:"_blank"}))}function E(e){return l.default.createElement("div",{className:"editor-attachment-icon"},l.default.createElement("span",{className:"material-icon"},"insert_drive_file"))}function w(e){return l.default.createElement("h4",null,l.default.createElement("a",{className:"item-title",href:e.item.url.index+"?shva=1",target:"_blank"},e.item.filename))}function O(e){var t=null,t=e.item.url.uploader?interpolate(b,{url:(0,a.default)(e.item.url.uploader),user:(0,a.default)(e.item.uploader_name)},!0):interpolate(y,{user:(0,a.default)(e.item.uploader_name)},!0),r=interpolate(h,{absolute:(0,a.default)(e.item.uploaded_on.format("LLL")),relative:(0,a.default)(e.item.uploaded_on.fromNow())},!0),n=interpolate((0,a.default)(gettext("%(filetype)s, %(size)s, uploaded by %(uploader)s %(uploaded_on)s.")),{filetype:e.item.filetype,size:(0,o.default)(e.item.size),uploader:t,uploaded_on:r},!0);return l.default.createElement("p",{dangerouslySetInnerHTML:{__html:n}})}function P(e){return l.default.createElement("div",{className:"editor-attachment-actions"},l.default.createElement("div",{className:"row"},l.default.createElement(k,e),l.default.createElement(j,e),l.default.createElement(S,e)))}function k(e){return e.item.isRemoved?null:l.default.createElement("div",{className:"col-xs-6"},l.default.createElement("button",{className:"btn btn-default btn-sm btn-block",onClick:e.onInsert,type:"button"},gettext("Insert")))}function j(e){return e.item.isRemoved&&e.item.acl.can_delete?null:l.default.createElement("div",{className:"col-xs-6"},l.default.createElement("button",{className:"btn btn-default btn-sm btn-block",onClick:e.onRemove,type:"button"},gettext("Remove")))}function S(e){return e.item.isRemoved?l.default.createElement("div",{className:"col-xs-12"},l.default.createElement("button",{className:"btn btn-default btn-sm btn-block",onClick:e.onUndo,type:"button"},gettext("Undo removal"))):null}r.default=v},{"../../../..":302,"../../../../utils/escape-html":383,"../../../../utils/file-size":384,react:"react"}],45:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("react")),a=o(e("../../../../utils/escape-html"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=i(o);return t=l?(e=i(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?f(r):n}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,n.default.Component);var e,t,r,u=c(i);function i(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var e,r,n,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return t=u.call.apply(u,[this].concat(o)),e=f(t),n=function(){var e=t.props.attachments.filter(function(e){return e.key!==t.props.item.key});t.props.onAttachmentsChange(e)},(r="onClick")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=i,(t=[{key:"render",value:function(){var e=interpolate("<strong>%(name)s</strong>",{name:(0,a.default)(this.props.item.filename)},!0),t=interpolate(gettext("Error uploading %(filename)s"),{filename:e,progress:this.props.item.progress+"%"},!0);return n.default.createElement("li",{className:"editor-attachment-error"},n.default.createElement("div",{className:"editor-attachment-error-icon"},n.default.createElement("span",{className:"material-icon"},"warning")),n.default.createElement("div",{className:"editor-attachment-error-message"},n.default.createElement("h4",{dangerouslySetInnerHTML:{__html:t+":"}}),n.default.createElement("p",null,this.props.item.error),n.default.createElement("button",{className:"btn btn-default btn-sm",onClick:this.onClick,type:"button"},gettext("Dismiss"))))}}])&&l(e.prototype,t),r&&l(e,r),i}();r.default=d},{"../../../../utils/escape-html":383,react:"react"}],46:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(e.item.id)return n.default.createElement(a.default,e);if(e.item.error)return n.default.createElement(o.default,e);return n.default.createElement(l.default,e)};var n=u(e("react")),a=u(e("./complete")),o=u(e("./error")),l=u(e("./upload"));u(e("../../../..")),u(e("../../../../utils/escape-html"));function u(e){return e&&e.__esModule?e:{default:e}}},{"../../../..":302,"../../../../utils/escape-html":383,"./complete":44,"./error":45,"./upload":47,react:"react"}],47:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=interpolate(l,{name:(0,a.default)(e.item.filename)},!0),r=interpolate(gettext("Uploading %(filename)s... %(progress)s"),{filename:t,progress:e.item.progress+"%"},!0);return n.default.createElement("li",{className:"editor-attachment-upload"},n.default.createElement("div",{className:"editor-attachment-progress-bar"},n.default.createElement("div",{className:"editor-attachment-progress",style:{width:e.item.progress+"%"}})),n.default.createElement("p",{className:"editor-attachment-upload-message",dangerouslySetInnerHTML:{__html:r}}))};var n=o(e("react")),a=o(e("../../../../utils/escape-html"));function o(e){return e&&e.__esModule?e:{default:e}}var l="<strong>%(name)s</strong>"},{"../../../../utils/escape-html":383,react:"react"}],48:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return l.default.get("user").acl.max_attachment_size?n.default.createElement("div",{className:"editor-attachments"},n.default.createElement(a.default,e),n.default.createElement(o.default,e)):null};var n=u(e("react")),a=u(e("./list")),o=u(e("./uploader")),l=u(e("../../.."));function u(e){return e&&e.__esModule?e:{default:e}}},{"../../..":302,"./list":49,"./uploader":51,react:"react"}],49:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return n.default.createElement("ul",{className:"list-unstyled editor-attachments-list"},t.attachments.map(function(e){return n.default.createElement(a.default,l({item:e,key:e.id||e.key},t))}))};var n=o(e("react")),a=o(e("./attachment"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}},{"./attachment":46,react:"react"}],50:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("react")),a=o(e("../../.."));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=i(o);return t=l?(e=i(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?f(r):n}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,n.default.Component);var e,t,r,u=c(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t,r,n,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=u.call.apply(u,[this].concat(o)),t=f(e),n=function(){document.getElementById("editor-upload-field").click()},(r="onClick")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e}return e=i,(t=[{key:"render",value:function(){return a.default.get("user").acl.max_attachment_size?n.default.createElement("button",{className:"btn btn-icon "+this.props.className,disabled:this.props.disabled,onClick:this.onClick,title:gettext("Upload file"),type:"button"},n.default.createElement("span",{className:"material-icon"},"file_upload")):null}}])&&l(e.prototype,t),r&&l(e,r),i}();r.default=d},{"../../..":302,react:"react"}],51:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getRandomKey=y,r.default=void 0;var n=a(e("react")),s=a(e("moment")),c=a(e("../../..")),f=a(e("../../../services/ajax")),d=a(e("../../../services/snackbar"));function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=i(o);return t=l?(e=i(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?m(r):n}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,n.default.Component);var e,t,r,u=p(i);function i(){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var e,t,r,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return a=u.call.apply(u,[this].concat(o)),e=m(a),r=function(e){var t,r,n=e.target.files[0];n&&(t={id:null,key:y(),progress:0,error:null,filename:n.name},a.props.onAttachmentsChange([t].concat(a.props.attachments)),(r=new FormData).append("upload",n),f.default.upload(c.default.get("ATTACHMENTS_API"),r,function(e){t.progress=e,a.props.onAttachmentsChange(a.props.attachments.concat())}).then(function(e){e.uploaded_on=(0,s.default)(e.uploaded_on),Object.assign(t,e),a.props.onAttachmentsChange(a.props.attachments.concat())},function(e){400===e.status||413===e.status?(t.error=e.detail,a.props.onAttachmentsChange(a.props.attachments.concat())):d.default.apiError(e)}))},(t="onChange")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,a}return e=i,(t=[{key:"render",value:function(){return n.default.createElement("input",{id:"editor-upload-field",onChange:this.onChange,type:"file"})}}])&&o(e.prototype,t),r&&o(e,r),i}();function y(){return"upld-"+Math.round((new Date).getTime())}r.default=h},{"../../..":302,"../../../services/ajax":365,"../../../services/snackbar":376,moment:"moment",react:"react"}],52:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Protect=M,r.default=void 0;var o=n(e("react")),l=n(e("./actions/code")),u=n(e("./actions/emphasis")),i=n(e("./actions/hr")),s=n(e("./actions/image")),c=n(e("./actions/link")),f=n(e("./actions/spoiler")),d=n(e("./actions/strikethrough")),p=n(e("./actions/strong")),m=n(e("./actions/quote")),h=n(e("./attachments")),y=n(e("./attachments/upload-button")),b=n(e("./markup-preview")),v=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==k(e)&&"function"!=typeof e)return{default:e};var t=P();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("./textutils")),g=n(e("../button")),_=n(e("../..")),E=n(e("../../services/ajax")),w=n(e("../../services/modal")),O=n(e("../../services/snackbar"));function P(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return P=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=R(o);return t=l?(e=R(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==k(n)&&"function"!=typeof n?x(r):n}}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(a,o.default.Component);var e,t,r,n=N(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),C(x(t=n.call(this,e)),"onPreviewClick",function(){t.state.isPreviewLoading||(t.setState({isPreviewLoading:!0}),E.default.post(_.default.get("PARSE_MARKUP_API"),{post:t.props.value}).then(function(e){w.default.show(o.default.createElement(b.default,{markup:e.parsed})),t.setState({isPreviewLoading:!1})},function(e){400===e.status?O.default.error(e.detail):O.default.apiError(e),t.setState({isPreviewLoading:!1})}))}),C(x(t),"replaceSelection",function(e){e(v.getSelectionText(),t._replaceSelection)}),C(x(t),"_replaceSelection",function(e){t.props.onChange({target:{value:v.replace(e)}})}),t.state={isPreviewLoading:!1},t}return e=a,(t=[{key:"componentDidMount",value:function(){var n=this;$("#editor-textarea").atwho({at:"@",displayTpl:'<li><img src="${avatar}" alt="">${username}</li>',insertTpl:"@${username}",searchKey:"username",callbacks:{remoteFilter:function(e,t){$.getJSON(_.default.get("MENTION_API"),{q:e},t)}}}),$("#editor-textarea").on("inserted.atwho",function(e,t,r){n.props.onChange(e)})}},{key:"render",value:function(){return o.default.createElement("div",{className:"editor-border"},o.default.createElement("textarea",{className:"form-control",value:this.props.value,disabled:this.props.loading,id:"editor-textarea",onChange:this.props.onChange,rows:"9"}),o.default.createElement("div",{className:"editor-footer"},o.default.createElement("div",{className:"buttons-list pull-left"},o.default.createElement(p.default,{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading,replaceSelection:this.replaceSelection}),o.default.createElement(u.default,{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading,replaceSelection:this.replaceSelection}),o.default.createElement(d.default,{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading,replaceSelection:this.replaceSelection}),o.default.createElement(i.default,{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading,replaceSelection:this.replaceSelection}),o.default.createElement(c.default,{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading,replaceSelection:this.replaceSelection}),o.default.createElement(s.default,{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading,replaceSelection:this.replaceSelection}),o.default.createElement(m.default,{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading,replaceSelection:this.replaceSelection}),o.default.createElement(f.default,{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading,replaceSelection:this.replaceSelection}),o.default.createElement(l.default,{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading,replaceSelection:this.replaceSelection}),o.default.createElement(y.default,{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading})),o.default.createElement(g.default,{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading,onClick:this.onPreviewClick,type:"button"},gettext("Preview")),o.default.createElement(g.default,{className:"btn-primary btn-sm pull-right",loading:this.props.loading},this.props.submitLabel||gettext("Post")),o.default.createElement("button",{className:"btn btn-default btn-sm pull-right",disabled:this.props.loading,onClick:this.props.onCancel,type:"button"},gettext("Cancel")),o.default.createElement("div",{className:"clearfix visible-xs-block"}),o.default.createElement(M,{canProtect:this.props.canProtect,disabled:this.props.loading,onProtect:this.props.onProtect,onUnprotect:this.props.onUnprotect,protect:this.props.protect})),o.default.createElement(h.default,{attachments:this.props.attachments,onAttachmentsChange:this.props.onAttachmentsChange,placeholder:this.props.placeholder,replaceSelection:this.replaceSelection}))}}])&&j(e.prototype,t),r&&j(e,r),a}();function M(e){if(!e.canProtect)return null;var t=e.protect?gettext("Protected"):gettext("Protect");return o.default.createElement("button",{className:"btn btn-icon btn-default btn-protect btn-sm pull-right",disabled:e.disabled,onClick:e.protect?e.onUnprotect:e.onProtect,title:t,type:"button"},o.default.createElement("span",{className:"material-icon"},e.protect?"lock":"lock_outline"),o.default.createElement("span",{className:"btn-text hidden-md hidden-lg"},t))}r.default=a},{"../..":302,"../../services/ajax":365,"../../services/modal":371,"../../services/snackbar":376,"../button":8,"./actions/code":35,"./actions/emphasis":36,"./actions/hr":37,"./actions/image":38,"./actions/link":39,"./actions/quote":40,"./actions/spoiler":41,"./actions/strikethrough":42,"./actions/strong":43,"./attachments":48,"./attachments/upload-button":50,"./markup-preview":53,"./textutils":54,react:"react"}],53:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement("div",{className:"modal-dialog",role:"document"},n.default.createElement("div",{className:"modal-content"},n.default.createElement("div",{className:"modal-header"},n.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},n.default.createElement("span",{"aria-hidden":"true"},"×")),n.default.createElement("h4",{className:"modal-title"},gettext("Preview message"))),n.default.createElement("div",{className:"modal-body markup-preview"},n.default.createElement(a.default,{markup:e.markup}))))};var n=o(e("react")),a=o(e("../misago-markup"));function o(e){return e&&e.__esModule?e:{default:e}}},{"../misago-markup":60,react:"react"}],54:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTextarea=o,r.getValue=a,r.getSelectionRange=l,r.getSelection=u,r.getSelectionText=function(){var e=u();return $.trim(a().substring(e.start,e.end))},r.setSelection=i,r._replace=s,r.replace=function(e){return s(u(),e)},r.textareaId=void 0;var n="editor-textarea";function o(){return document.getElementById(n)}function a(){return document.getElementById(n).value}function l(e,t){return{start:e,end:t}}function u(){var e=o();if(document.selection){e.focus();var t=document.selection.createRange(),r=t.text.length;return t.moveStart("character",-e.value.length),l(t.text.length-r,t.text.length)}if(e.selectionStart||"0"==e.selectionStart)return l(e.selectionStart,e.selectionEnd)}function i(e){var t,r=o();r.setSelectionRange?(r.focus(),r.setSelectionRange(e.start,e.end)):r.createTextRange&&((t=r.createTextRange()).collapse(!0),t.moveStart("character",e.start),t.moveEnd("character",e.end),t.select())}function s(e,t){var r=o(),n=r.value,a=n.substring(0,e.start);return r.value=n.substring(0,e.start)+t+n.substring(e.end),i(l(a.length+t.length,a.length+t.length)),r.value}r.textareaId=n},{}],55:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("react"))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(a,o.default.Component);var e,t,r,n=s(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"isValidated",value:function(){return void 0!==this.props.validation}},{key:"getClassName",value:function(){var e="form-group";return this.isValidated()&&(e+=" has-feedback",null===this.props.validation?e+=" has-success":e+=" has-error"),e}},{key:"getFeedback",value:function(){var r=this;return this.props.validation?o.default.createElement("div",{className:"help-block errors"},this.props.validation.map(function(e,t){return o.default.createElement("p",{key:r.props.for+"FeedbackItem"+t},e)})):null}},{key:"getFeedbackDescription",value:function(){return this.isValidated()?o.default.createElement("span",{id:this.props.for+"_status",className:"sr-only"},this.props.validation?gettext("(error)"):gettext("(success)")):null}},{key:"getHelpText",value:function(){return this.props.helpText?o.default.createElement("p",{className:"help-block"},this.props.helpText):null}},{key:"render",value:function(){return o.default.createElement("div",{className:this.getClassName()},o.default.createElement("label",{className:"control-label "+(this.props.labelClass||""),htmlFor:this.props.for||""},this.props.label+":"),o.default.createElement("div",{className:this.props.controlClass||""},this.props.children,this.getFeedbackDescription(),this.getFeedback(),this.getHelpText(),this.props.extra||null))}}])&&l(e.prototype,t),r&&l(e,r),a}();r.default=a},{react:"react"}],56:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=o(e("react")),n=e("../utils/validators"),l=o(e("../services/snackbar"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=d(o);return t=l?(e=d(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?f(r):n}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=(0,n.required)(),h=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(o,a.default.Component);var e,t,r,n=c(o);function o(){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return p(f(a=n.call.apply(n,[this].concat(t))),"bindInput",function(t){return function(e){a.changeValue(t,e.target.value)}}),p(f(a),"changeValue",function(e,t){var r=p({},e,t),n=a.state.errors||{};n[e]=a.validateField(e,r[e]),r.errors=n,a.setState(r)}),p(f(a),"handleSubmit",function(e){var t;e&&e.preventDefault(),a.state.isLoading||a.clean()&&(a.setState({isLoading:!0}),(t=a.send())?t.then(function(e){a.setState({isLoading:!1}),a.handleSuccess(e)},function(e){a.setState({isLoading:!1}),a.handleError(e)}):a.setState({isLoading:!1}))}),a}return e=o,(t=[{key:"validate",value:function(){var e={};if(!this.state.validators)return e;var t={required:this.state.validators.required||this.state.validators,optional:this.state.validators.optional||{}},r=[];for(var n in t.required)t.required.hasOwnProperty(n)&&t.required[n]&&r.push(n);for(var a in t.optional)t.optional.hasOwnProperty(a)&&t.optional[a]&&r.push(a);for(var o in r){var l=r[o],u=this.validateField(l,this.state[l]);null===u?e[l]=null:u&&(e[l]=u)}return e}},{key:"isValid",value:function(){var e=this.validate();for(var t in e)if(e.hasOwnProperty(t)&&null!==e[t])return!1;return!0}},{key:"validateField",value:function(e,t){var r=[];if(!this.state.validators)return r;var n={required:(this.state.validators.required||this.state.validators)[e],optional:(this.state.validators.optional||{})[e]},a=m(t)||!1;if(n.required){if(a)r=[a];else for(var o in n.required){var l=n.required[o](t);l&&r.push(l)}return r.length?r:null}if(!1===a&&n.optional){for(var u in n.optional){var i=n.optional[u](t);i&&r.push(i)}return r.length?r:null}return!1}},{key:"clean",value:function(){return!0}},{key:"send",value:function(){return null}},{key:"handleSuccess",value:function(){}},{key:"handleError",value:function(e){l.default.apiError(e)}}])&&i(e.prototype,t),r&&i(e,r),o}();r.default=h},{"../services/snackbar":376,"../utils/validators":393,react:"react"}],57:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("react"))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(a,o.default.Component);var e,t,r,n=s(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"isActive",value:function(){return this.props.isControlled?this.props.isActive:!!this.props.path&&0===document.location.pathname.indexOf(this.props.path)}},{key:"getClassName",value:function(){return this.isActive()?(this.props.className||"")+" "+(this.props.activeClassName||"active"):this.props.className||""}},{key:"render",value:function(){return o.default.createElement("li",{className:this.getClassName()},this.props.children)}}])&&l(e.prototype,t),r&&l(e,r),a}();r.default=a},{react:"react"}],58:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return a.default.createElement("div",{className:e.className||"loader"},a.default.createElement("div",{className:"loader-spinning-wheel"}))};var n,a=(n=e("react"))&&n.__esModule?n:{default:n}},{react:"react"}],59:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BestAnswerSelect=v,r.PollSelect=g,r.default=void 0;var o=n(e("react")),l=n(e("./button")),u=n(e("./form")),a=n(e("./form-group")),i=n(e("../services/ajax")),s=n(e("../services/modal"));function n(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=h(o);return t=l?(e=h(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==c(n)&&"function"!=typeof n?m(r):n}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,u.default);var e,t,r,n=p(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),y(m(t=n.call(this,e)),"handleSuccess",function(e){t.props.onSuccess(e),s.default.hide()}),y(m(t),"handleError",function(e){t.props.onError(e)}),y(m(t),"onBestAnswerChange",function(e){t.changeValue("bestAnswer",e.target.value)}),y(m(t),"onPollChange",function(e){t.changeValue("poll",e.target.value)}),t.state={isLoading:!1,bestAnswer:"0",poll:"0"},t}return e=a,(t=[{key:"clean",value:function(){return!this.props.polls||"0"!==this.state.poll||confirm(gettext("Are you sure you want to delete all polls?"))}},{key:"send",value:function(){var e=Object.assign({},this.props.data,{best_answer:this.state.bestAnswer,poll:this.state.poll});return i.default.post(this.props.api,e)}},{key:"render",value:function(){return o.default.createElement("div",{className:"modal-dialog",role:"document"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},o.default.createElement("span",{"aria-hidden":"true"},"×")),o.default.createElement("h4",{className:"modal-title"},gettext("Merge threads"))),o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"modal-body"},o.default.createElement(v,{choices:this.props.bestAnswers,onChange:this.onBestAnswerChange,value:this.state.bestAnswer}),o.default.createElement(g,{choices:this.props.polls,onChange:this.onPollChange,value:this.state.poll})),o.default.createElement("div",{className:"modal-footer"},o.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel")),o.default.createElement(l.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Merge threads"))))))}}])&&f(e.prototype,t),r&&f(e,r),a}();function v(e){var t=e.choices,r=e.onChange,n=e.value;return t?o.default.createElement(a.default,{label:gettext("Best answer"),helpText:gettext("Please select the best answer for your newly merged thread. No posts will be deleted during the merge."),for:"id_best_answer"},o.default.createElement("select",{className:"form-control",id:"id_best_answer",onChange:r,value:n},t.map(function(e){return o.default.createElement("option",{value:e[0],key:e[0]},e[1])}))):null}function g(e){var t=e.choices,r=e.onChange,n=e.value;return t?o.default.createElement(a.default,{label:gettext("Poll"),helpText:gettext("Please select the poll for your newly merged thread. Rejected polls will be permanently deleted and cannot be recovered."),for:"id_poll"},o.default.createElement("select",{className:"form-control",id:"id_poll",onChange:r,value:n},t.map(function(e){return o.default.createElement("option",{value:e[0],key:e[0]},e[1])}))):null}r.default=b},{"../services/ajax":365,"../services/modal":371,"./button":8,"./form":56,"./form-group":55,react:"react"}],60:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../services/one-box"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,r,n=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"componentDidMount",value:function(){l.default.render(this.documentNode),$(this.documentNode).find(".spoiler-reveal").click(d)}},{key:"componentDidUpdate",value:function(){l.default.render(this.documentNode),$(this.documentNode).find(".spoiler-reveal").click(d)}},{key:"shouldComponentUpdate",value:function(e){return e.markup!==this.props.markup}},{key:"render",value:function(){var t=this;return o.default.createElement("article",{className:"misago-markup",dangerouslySetInnerHTML:{__html:this.props.markup},ref:function(e){t.documentNode=e}})}}])&&i(e.prototype,t),r&&i(e,r),a}();function d(e){var t=e.target;$(t).parent().parent().addClass("revealed")}r.default=a},{"../services/one-box":372,react:"react"}],61:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("./loader"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,r,n=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){return o.default.createElement("div",{className:"modal-body modal-loader"},o.default.createElement(l.default,null))}}])&&i(e.prototype,t),r&&i(e,r),a}();r.default=a},{"./loader":58,react:"react"}],62:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("./panel-message"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,l.default);var e,t,r,n=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"getHelpText",value:function(){return this.props.helpText?o.default.createElement("p",{className:"help-block"},this.props.helpText):null}},{key:"render",value:function(){return o.default.createElement("div",{className:"modal-body"},o.default.createElement("div",{className:"message-icon"},o.default.createElement("span",{className:"material-icon"},this.props.icon||"info_outline")),o.default.createElement("div",{className:"message-body"},o.default.createElement("p",{className:"lead"},this.props.message),this.getHelpText(),o.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},gettext("Ok"))))}}])&&i(e.prototype,t),r&&i(e,r),a}();r.default=a},{"./panel-message":94,react:"react"}],63:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return e.filter(function(e){return 0<e.results.count}).map(function(e){return Object.assign({},e,{count:e.results.count,results:e.results.results.slice(0,n)})})};var n=5},{}],64:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FOOTER=r.RESULT=r.HEADER=void 0;r.HEADER="HEADER";r.RESULT="RESULT";r.FOOTER="FOOTER"},{}],65:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.children,r=e.onChange,n=e.query;return a.default.createElement("ul",{className:"dropdown-menu dropdown-search-results",role:"menu"},a.default.createElement("li",{className:"form-group"},a.default.createElement(o.default,{value:n,onChange:r})),t)};var a=n(e("react")),o=n(e("./input"));function n(e){return e&&e.__esModule?e:{default:e}}},{"./input":69,react:"react"}],66:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return a.default.createElement("li",{className:"dropdown-search-message"},gettext("Search returned no results."))};var n,a=(n=e("react"))&&n.__esModule?n:{default:n}},{react:"react"}],67:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=[];return function(e,t){for(var r=e.length,n=0;n<r;n++){var a=e[n];t.push({provider:a,type:o.HEADER}),function(e,t){for(var r=e.results.length,n=0;n<r;n++){var a=e.results[n];t.push({provider:e,result:a,type:o.RESULT})}t.push({provider:e,type:o.FOOTER})}(a,t)}}(e,t),t};var o=e("./constants")},{"./constants":64}],68:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.isLoading,r=e.onChange,n=e.results,a=e.query;if(!a.trim().length)return l.default.createElement(i.default,{onChange:r,query:a});{if(n.length){var o=(0,d.default)(n);return l.default.createElement(i.default,{onChange:r,query:a},o.map(function(e){var t=e.type,r=e.provider,n=e.result;return t===u.RESULT?l.default.createElement(f.default,p({key:[r.id,t,n.id].join("_")},e)):l.default.createElement(f.default,p({key:[r.id,t].join("_"),query:a},e))}))}if(t)return l.default.createElement(i.default,{onChange:r,query:a},l.default.createElement(c.default,null))}return l.default.createElement(i.default,{onChange:r,query:a},l.default.createElement(s.default,null))};var l=n(e("react")),u=e("./constants"),i=n(e("./dropdown-menu")),s=n(e("./empty")),c=n(e("./loader")),f=n(e("./result")),d=n(e("./flatten-results"));function n(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}},{"./constants":64,"./dropdown-menu":65,"./empty":66,"./flatten-results":67,"./loader":70,"./result":73,react:"react"}],69:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.value,r=e.onChange;return a.default.createElement("input",{"aria-haspopup":"true","aria-expanded":"false","aria-controls":"dropdown-menu dropdown-search-results",autoComplete:"off",className:"form-control",value:t,onChange:r,placeholder:gettext("Search"),role:"combobox",type:"text"})};var n,a=(n=e("react"))&&n.__esModule?n:{default:n}},{react:"react"}],70:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){e.message;return n.default.createElement("li",{className:"dropdown-search-loader"},n.default.createElement(a.default,null))};var n=o(e("react")),a=o(e("../../loader"));function o(e){return e&&e.__esModule?e:{default:e}}},{"../../loader":58,react:"react"}],71:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.provider,r=e.query,n=t.url+"?q="+encodeURI(r),a=ngettext('See full "%(provider)s" results page with %(count)s result.','See full "%(provider)s" results page with %(count)s results.',t.count);return o.default.createElement("li",{className:"dropdown-search-footer"},o.default.createElement("a",{href:n},interpolate(a,{count:t.count,provider:t.name},!0)))};var n,o=(n=e("react"))&&n.__esModule?n:{default:n}},{react:"react"}],72:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.provider;return a.default.createElement("li",{className:"dropdown-search-header"},t.name)};var n,a=(n=e("react"))&&n.__esModule?n:{default:n}},{react:"react"}],73:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.provider,r=e.result,n=e.type,a=e.query;{if(n===l.HEADER)return o.default.createElement(i.default,{provider:t});if(n===l.FOOTER)return o.default.createElement(u.default,{provider:t,query:a})}return o.default.createElement(s.default,{provider:t,result:r})};var o=n(e("react")),l=e("../constants"),u=n(e("./footer")),i=n(e("./header")),s=n(e("./result"));function n(e){return e&&e.__esModule?e:{default:e}}},{"../constants":64,"./footer":71,"./header":72,"./result":74,react:"react"}],74:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.provider,r=e.result;return"threads"!==t.id?n.default.createElement(o.default,{result:r}):n.default.createElement(a.default,{result:r})};var n=l(e("react")),a=l(e("./thread")),o=l(e("./user"));function l(e){return e&&e.__esModule?e:{default:e}}},{"./thread":75,"./user":76,react:"react"}],75:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.result,r=(t.poster,t.thread),n=gettext("Posted by %(poster)s on %(posted_on)s in %(category)s.");return o.default.createElement("li",null,o.default.createElement("a",{href:t.url.index,className:"dropdown-search-thread"},o.default.createElement("h5",null,r.title),o.default.createElement("small",{className:"dropdown-search-post-content"},$(t.content).text()),o.default.createElement("small",{className:"dropdown-search-post-footer"},interpolate(n,{category:t.category.name,posted_on:(0,a.default)(t.posted_on).format("LL"),poster:t.poster_name},!0))))};var a=n(e("moment")),o=n(e("react"));function n(e){return e&&e.__esModule?e:{default:e}}},{moment:"moment",react:"react"}],76:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.result,r=t.rank,n=gettext("%(title)s, joined on %(joined_on)s"),a=t.title||r.title||r.name;return l.default.createElement("li",null,l.default.createElement("a",{href:t.url,className:"dropdown-search-user"},l.default.createElement("div",{className:"media"},l.default.createElement("div",{className:"media-left"},l.default.createElement(u.default,{size:38,user:t})),l.default.createElement("div",{className:"media-body"},l.default.createElement("h5",{className:"media-heading"},t.username),l.default.createElement("small",null,interpolate(n,{title:a,joined_on:(0,o.default)(t.joined_on).format("LL")},!0))))))};var o=n(e("moment")),l=n(e("react")),u=n(e("../../../avatar"));function n(e){return e&&e.__esModule?e:{default:e}}},{"../../../avatar":6,moment:"moment",react:"react"}],77:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("react")),l=a(e("../../services/ajax")),u=a(e("../../services/snackbar")),i=a(e("../..")),s=a(e("./clean-results")),c=a(e("./dropdown"));function a(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==f(n)&&"function"!=typeof n?h(r):n}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,n.default.Component);var e,t,r,a=m(o);function o(){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),b(h(n=a.call(this)),"onToggle",function(e){n.setState(function(e,t){return e.isOpen||window.setTimeout(function(){n.container.querySelector("input").focus()},100),{isOpen:!e.isOpen}})}),b(h(n),"onDocumentMouseDown",function(e){for(var t=!0,r=e.target;null!==r&&r!==document;){if(r===n.container)return void(t=!1);r=r.parentNode}t&&n.setState({isOpen:!1})}),b(h(n),"onEscape",function(e){"Escape"===e.key&&n.setState({isOpen:!1})}),b(h(n),"onChange",function(e){var t=e.target.value;n.setState({query:t}),n.loadResults(t.trim())}),n.state={isLoading:!1,isOpen:!1,query:"",results:[]},n.intervalId=null,n}return e=o,(t=[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown),document.addEventListener("keydown",this.onEscape)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown),document.removeEventListener("keydown",this.onEscape)}},{key:"loadResults",value:function(e){var t,r=this;e.length&&(t=300+300*Math.random(),this.intervalId&&window.clearTimeout(this.intervalId),this.setState({isLoading:!0}),this.intervalId=window.setTimeout(function(){l.default.get(i.default.get("SEARCH_API"),{q:e}).then(function(e){r.setState({intervalId:null,isLoading:!1,results:(0,s.default)(e)})},function(e){u.default.apiError(e),r.setState({intervalId:null,isLoading:!1,results:[]})})},t))}},{key:"render",value:function(){var t=this,e="navbar-search dropdown";return this.state.isOpen&&(e+=" open"),n.default.createElement("div",{className:e,ref:function(e){return t.container=e}},n.default.createElement("a",{"aria-haspopup":"true","aria-expanded":"false",className:"navbar-icon","data-toggle":"dropdown",href:i.default.get("SEARCH_URL"),onClick:this.onToggle},n.default.createElement("i",{className:"material-icon"},"search")),n.default.createElement(c.default,{isLoading:this.state.isLoading,onChange:this.onChange,results:this.state.results,query:this.state.query}))}}])&&d(e.prototype,t),r&&d(e,r),o}();r.default=o},{"../..":302,"../../services/ajax":365,"../../services/snackbar":376,"./clean-results":63,"./dropdown":68,react:"react"}],78:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return n.default.createElement("div",{className:"panel panel-default panel-form"},n.default.createElement("div",{className:"panel-heading"},n.default.createElement("h3",{className:"panel-title"},gettext("Change username"))),n.default.createElement(a.default,null))};var n=o(e("react")),a=o(e("../../panel-loader"));function o(e){return e&&e.__esModule?e:{default:e}}},{"../../panel-loader":93,react:"react"}],79:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../../panel-message"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,r,n=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"getHelpText",value:function(){return this.props.options.next_on?interpolate(gettext("You will be able to change your username %(next_change)s."),{next_change:this.props.options.next_on.fromNow()},!0):gettext("You have used up available name changes.")}},{key:"render",value:function(){return o.default.createElement("div",{className:"panel panel-default panel-form"},o.default.createElement("div",{className:"panel-heading"},o.default.createElement("h3",{className:"panel-title"},gettext("Change username"))),o.default.createElement(l.default,{helpText:this.getHelpText(),message:gettext("You can't change your username at the moment.")}))}}])&&i(e.prototype,t),r&&i(e,r),a}();r.default=a},{"../../panel-message":94,react:"react"}],80:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../../button")),u=n(e("../../form")),i=n(e("../../form-group")),s=n(e("../../../services/ajax")),c=n(e("../../../services/snackbar")),f=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../utils/validators"));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=b(o);return t=l?(e=b(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==p(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,u.default);var e,t,r,n=y(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,e)).state={username:"",validators:{username:[f.usernameContent(),f.usernameMinLength(e.options.length_min),f.usernameMaxLength(e.options.length_max)]},isLoading:!1},t}return e=a,(t=[{key:"getHelpText",value:function(){var e,t,r=[];return 0<this.props.options.changes_left&&(e=ngettext("You can change your username %(changes_left)s more time.","You can change your username %(changes_left)s more times.",this.props.options.changes_left),r.push(interpolate(e,{changes_left:this.props.options.changes_left},!0))),0<this.props.user.acl.name_changes_expire&&(t=ngettext("Used changes become available again after %(name_changes_expire)s day.","Used changes become available again after %(name_changes_expire)s days.",this.props.user.acl.name_changes_expire),r.push(interpolate(t,{name_changes_expire:this.props.user.acl.name_changes_expire},!0))),r.length?r.join(" "):null}},{key:"clean",value:function(){var e=this.validate();return e.username?(c.default.error(e.username[0]),!1):this.state.username.trim()!==this.props.user.username||(c.default.info(gettext("Your new username is same as current one.")),!1)}},{key:"send",value:function(){return s.default.post(this.props.user.api.username,{username:this.state.username})}},{key:"handleSuccess",value:function(e){this.setState({username:""}),this.props.complete(e.username,e.slug,e.options)}},{key:"handleError",value:function(e){c.default.apiError(e)}},{key:"render",value:function(){return o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"panel panel-default panel-form"},o.default.createElement("div",{className:"panel-heading"},o.default.createElement("h3",{className:"panel-title"},gettext("Change username"))),o.default.createElement("div",{className:"panel-body"},o.default.createElement(i.default,{label:gettext("New username"),for:"id_username",helpText:this.getHelpText()},o.default.createElement("input",{type:"text",id:"id_username",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("username"),value:this.state.username}))),o.default.createElement("div",{className:"panel-footer"},o.default.createElement(l.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Change username")))))}}])&&m(e.prototype,t),r&&m(e,r),a}();r.default=a},{"../../../services/ajax":365,"../../../services/snackbar":376,"../../../utils/validators":393,"../../button":8,"../../form":56,"../../form-group":55,react:"react"}],81:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("moment")),a=o(e("react")),u=o(e("./form-loading")),i=o(e("./form-locked")),s=o(e("./form")),c=o(e("../../username-history/root")),f=o(e("../../..")),d=e("../../../reducers/username-history"),p=e("../../../reducers/users"),m=o(e("../../../services/ajax")),h=o(e("../../../services/page-title")),y=o(e("../../../services/snackbar")),b=o(e("../../../services/store"));function o(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=O(o);return t=l?(e=O(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==v(n)&&"function"!=typeof n?w(r):n}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(l,a.default.Component);var e,t,r,o=E(l);function l(e){var n,t,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),n=o.call(this,e),t=w(n),a=function(e,t,r){n.setState({options:r}),b.default.dispatch((0,d.addNameChange)({username:e,slug:t},n.props.user,n.props.user)),b.default.dispatch((0,p.updateUsername)(n.props.user,e,t)),y.default.success(gettext("Your username has been changed successfully."))},(r="onComplete")in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,n.state={isLoaded:!1,options:null},n}return e=l,(t=[{key:"componentDidMount",value:function(){var t=this;h.default.set({title:gettext("Change username"),parent:gettext("Change your options")}),Promise.all([m.default.get(this.props.user.api.username),m.default.get(f.default.get("USERNAME_CHANGES_API"),{user:this.props.user.id})]).then(function(e){b.default.dispatch((0,d.hydrate)(e[1].results)),t.setState({isLoaded:!0,options:{changes_left:e[0].changes_left,length_min:e[0].length_min,length_max:e[0].length_max,next_on:e[0].next_on?(0,n.default)(e[0].next_on):null}})})}},{key:"getChangeForm",value:function(){return this.state.isLoaded?0===this.state.options.changes_left?a.default.createElement(i.default,{options:this.state.options}):a.default.createElement(s.default,{complete:this.onComplete,options:this.state.options,user:this.props.user}):a.default.createElement(u.default,null)}},{key:"render",value:function(){return a.default.createElement("div",null,this.getChangeForm(),a.default.createElement(c.default,{changes:this.props["username-history"],isLoaded:this.state.isLoaded}))}}])&&g(e.prototype,t),r&&g(e,r),l}();r.default=l},{"../../..":302,"../../../reducers/username-history":363,"../../../reducers/users":364,"../../../services/ajax":365,"../../../services/page-title":373,"../../../services/snackbar":376,"../../../services/store":377,"../../username-history/root":280,"./form":80,"./form-loading":78,"./form-locked":79,moment:"moment",react:"react"}],82:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../button")),u=n(e("../../services/ajax")),i=n(e("../../services/page-title")),s=n(e("../../services/snackbar")),c=(n(e("../../services/store")),n(e("../..")));function n(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==f(n)&&"function"!=typeof n?h(r):n}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,o.default.Component);var e,t,r,n=m(a);function a(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),b(h(o=n.call(this,e)),"onPasswordChange",function(e){o.setState({password:e.target.value})}),b(h(o),"handleSubmit",function(e){e.preventDefault();var t=o.state,r=t.isLoading,n=t.password,a=o.props.user;return 0==n.length?(s.default.error(gettext("Enter your password to confirm account deletion.")),!1):!r&&(o.setState({isLoading:!0}),void u.default.post(a.api.delete,{password:n}).then(function(e){window.location.href=c.default.get("MISAGO_PATH")},function(e){o.setState({isLoading:!1}),e.password?s.default.error(e.password[0]):s.default.apiError(e)}))}),o.state={isLoading:!1,password:""},o}return e=a,(t=[{key:"componentDidMount",value:function(){i.default.set({title:gettext("Delete account"),parent:gettext("Change your options")})}},{key:"render",value:function(){return o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"panel panel-danger panel-form"},o.default.createElement("div",{className:"panel-heading"},o.default.createElement("h3",{className:"panel-title"},gettext("Delete account"))),o.default.createElement("div",{className:"panel-body"},o.default.createElement("p",{className:"lead"},gettext("You are going to delete your account. This action is nonreversible, and will result in following data being deleted:")),o.default.createElement("p",null,"-"," ",gettext("Stored IP addresses associated with content that you have posted will be deleted.")),o.default.createElement("p",null,"-"," ",gettext("Your username will become available for other user to rename to or for new user to register their account with.")),o.default.createElement("p",null,"-"," ",gettext("Your e-mail will become available for use in new account registration.")),o.default.createElement("hr",null),o.default.createElement("p",null,gettext("All your posted content will NOT be deleted, but username associated with it will be changed to one shared by all deleted accounts."))),o.default.createElement("div",{className:"panel-footer"},o.default.createElement("div",{className:"input-group"},o.default.createElement("input",{className:"form-control",disabled:this.state.isLoading,name:"password-confirmation",type:"password",placeholder:gettext("Enter your password to confirm account deletion."),value:this.state.password,onChange:this.onPasswordChange}),o.default.createElement("span",{className:"input-group-btn"},o.default.createElement(l.default,{className:"btn-danger",loading:this.state.isLoading},gettext("Delete my account")))))))}}])&&d(e.prototype,t),r&&d(e,r),a}();r.default=a},{"../..":302,"../../services/ajax":365,"../../services/page-title":373,"../../services/snackbar":376,"../../services/store":377,"../button":8,react:"react"}],83:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("moment")),u=n(e("../button")),i=n(e("../../services/ajax")),s=n(e("../../services/page-title")),c=n(e("../../services/snackbar"));function n(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==f(n)&&"function"!=typeof n?h(r):n}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,o.default.Component);var e,t,r,n=m(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),b(h(t=n.call(this,e)),"handleLoadDownloads",function(){i.default.get(t.props.user.api.data_downloads).then(function(e){t.setState({isLoading:!1,downloads:e})},function(e){c.default.apiError(e)})}),b(h(t),"handleRequestDataDownload",function(){t.setState({isSubmiting:!0}),i.default.post(t.props.user.api.request_data_download).then(function(){t.handleLoadDownloads(),c.default.success(gettext("Your request for data download has been registered.")),t.setState({isSubmiting:!1})},function(e){console.log(e),c.default.apiError(e),t.setState({isSubmiting:!1})})}),t.state={isLoading:!1,isSubmiting:!1,downloads:[]},t}return e=a,(t=[{key:"componentDidMount",value:function(){s.default.set({title:gettext("Download your data"),parent:gettext("Change your options")}),this.handleLoadDownloads()}},{key:"render",value:function(){return o.default.createElement("div",null,o.default.createElement("div",{className:"panel panel-default panel-form"},o.default.createElement("div",{className:"panel-heading"},o.default.createElement("h3",{className:"panel-title"},gettext("Download your data"))),o.default.createElement("div",{className:"panel-body"},o.default.createElement("p",null,gettext('To download your data from the site, click the "Request data download" button. Depending on amount of data to be archived and number of users wanting to download their data at same time it may take up to few days for your download to be prepared. An e-mail with notification will be sent to you when your data is ready to be downloaded.')),o.default.createElement("p",null,gettext("The download will only be available for limited amount of time, after which it will be deleted from the site and marked as expired."))),o.default.createElement("table",{className:"table"},o.default.createElement("thead",null,o.default.createElement("tr",null,o.default.createElement("th",null,gettext("Requested on")),o.default.createElement("th",{className:"col-md-4"},gettext("Download")))),o.default.createElement("tbody",null,this.state.downloads.map(function(e){return o.default.createElement("tr",{key:e.id},o.default.createElement("td",{style:v},(0,l.default)(e.requested_on).fromNow()),o.default.createElement("td",null,o.default.createElement(g,{exportFile:e.file,status:e.status})))}),0==this.state.downloads.length?o.default.createElement("tr",null,o.default.createElement("td",{colSpan:"2"},gettext("You have no data downloads."))):null)),o.default.createElement("div",{className:"panel-footer text-right"},o.default.createElement(u.default,{className:"btn-primary",loading:this.state.isSubmiting,type:"button",onClick:this.handleRequestDataDownload},gettext("Request data download")))))}}])&&d(e.prototype,t),r&&d(e,r),a}();r.default=a;var v={verticalAlign:"middle"},g=function(e){var t=e.exportFile,r=e.status;return 0===r||1===r?o.default.createElement(u.default,{className:"btn-info btn-sm btn-block",disabled:!0,type:"button"},gettext("Download is being prepared")):t?o.default.createElement("a",{className:"btn btn-success btn-sm btn-block",href:t},gettext("Download your data")):o.default.createElement(u.default,{className:"btn-default btn-sm btn-block",disabled:!0,type:"button"},gettext("Download is expired"))}},{"../../services/ajax":365,"../../services/page-title":373,"../../services/snackbar":376,"../button":8,moment:"moment",react:"react"}],84:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=l(e("react")),a=l(e("../edit-details")),o=l(e("../../services/page-title")),s=l(e("../../services/snackbar"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=i(o);return t=l?(e=i(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?p(r):n}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(i,n.default.Component);var e,t,r,u=d(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t,r,n,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=u.call.apply(u,[this].concat(o)),t=p(e),n=function(){s.default.info(gettext("Your details have been updated."))},(r="onSuccess")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e}return e=i,(t=[{key:"componentDidMount",value:function(){o.default.set({title:gettext("Edit details"),parent:gettext("Change your options")})}},{key:"render",value:function(){return n.default.createElement(a.default,{api:this.props.user.api.edit_details,onSuccess:this.onSuccess})}}])&&c(e.prototype,t),r&&c(e,r),i}();r.default=m},{"../../services/page-title":373,"../../services/snackbar":376,"../edit-details":32,react:"react"}],85:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../button")),u=n(e("../form")),i=n(e("../form-group")),s=n(e("../select")),c=n(e("../yes-no-switch")),f=e("../../reducers/auth"),d=n(e("../../services/ajax")),p=n(e("../../services/page-title")),m=n(e("../../services/snackbar")),h=n(e("../../services/store"));function n(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==y(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(a,u.default);var e,t,r,n=g(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,e)).state={isLoading:!1,is_hiding_presence:e.user.is_hiding_presence,limits_private_thread_invites_to:e.user.limits_private_thread_invites_to,subscribe_to_started_threads:e.user.subscribe_to_started_threads,subscribe_to_replied_threads:e.user.subscribe_to_replied_threads,errors:{}},t.privateThreadInvitesChoices=[{value:0,icon:"help_outline",label:gettext("Everybody")},{value:1,icon:"done_all",label:gettext("Users I follow")},{value:2,icon:"highlight_off",label:gettext("Nobody")}],t.subscribeToChoices=[{value:0,icon:"star_border",label:gettext("No")},{value:1,icon:"star_half",label:gettext("Notify")},{value:2,icon:"star",label:gettext("Notify with e-mail")}],t}return e=a,(t=[{key:"send",value:function(){return d.default.post(this.props.user.api.options,{is_hiding_presence:this.state.is_hiding_presence,limits_private_thread_invites_to:this.state.limits_private_thread_invites_to,subscribe_to_started_threads:this.state.subscribe_to_started_threads,subscribe_to_replied_threads:this.state.subscribe_to_replied_threads})}},{key:"handleSuccess",value:function(){h.default.dispatch((0,f.patch)({is_hiding_presence:this.state.is_hiding_presence,limits_private_thread_invites_to:this.state.limits_private_thread_invites_to,subscribe_to_started_threads:this.state.subscribe_to_started_threads,subscribe_to_replied_threads:this.state.subscribe_to_replied_threads})),m.default.success(gettext("Your forum options have been changed."))}},{key:"handleError",value:function(e){400===e.status?m.default.error(gettext("Please reload page and try again.")):m.default.apiError(e)}},{key:"componentDidMount",value:function(){p.default.set({title:gettext("Forum options"),parent:gettext("Change your options")})}},{key:"render",value:function(){return o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"panel panel-default panel-form"},o.default.createElement("div",{className:"panel-heading"},o.default.createElement("h3",{className:"panel-title"},gettext("Change forum options"))),o.default.createElement("div",{className:"panel-body"},o.default.createElement("fieldset",null,o.default.createElement("legend",null,gettext("Privacy settings")),o.default.createElement(i.default,{label:gettext("Hide my presence"),helpText:gettext("If you hide your presence, only members with permission to see hidden users will see when you are online."),for:"id_is_hiding_presence"},o.default.createElement(c.default,{id:"id_is_hiding_presence",disabled:this.state.isLoading,iconOn:"visibility_off",iconOff:"visibility",labelOn:gettext("Hide my presence from other users"),labelOff:gettext("Show my presence to other users"),onChange:this.bindInput("is_hiding_presence"),value:this.state.is_hiding_presence})),o.default.createElement(i.default,{label:gettext("Private thread invitations"),for:"id_limits_private_thread_invites_to"},o.default.createElement(s.default,{id:"id_limits_private_thread_invites_to",disabled:this.state.isLoading,onChange:this.bindInput("limits_private_thread_invites_to"),value:this.state.limits_private_thread_invites_to,choices:this.privateThreadInvitesChoices}))),o.default.createElement("fieldset",null,o.default.createElement("legend",null,gettext("Automatic subscriptions")),o.default.createElement(i.default,{label:gettext("Threads I start"),for:"id_subscribe_to_started_threads"},o.default.createElement(s.default,{id:"id_subscribe_to_started_threads",disabled:this.state.isLoading,onChange:this.bindInput("subscribe_to_started_threads"),value:this.state.subscribe_to_started_threads,choices:this.subscribeToChoices})),o.default.createElement(i.default,{label:gettext("Threads I reply to"),for:"id_subscribe_to_replied_threads"},o.default.createElement(s.default,{id:"id_subscribe_to_replied_threads",disabled:this.state.isLoading,onChange:this.bindInput("subscribe_to_replied_threads"),value:this.state.subscribe_to_replied_threads,choices:this.subscribeToChoices})))),o.default.createElement("div",{className:"panel-footer"},o.default.createElement(l.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Save changes")))))}}])&&b(e.prototype,t),r&&b(e,r),a}();r.default=a},{"../../reducers/auth":350,"../../services/ajax":365,"../../services/page-title":373,"../../services/snackbar":376,"../../services/store":377,"../button":8,"../form":56,"../form-group":55,"../select":210,"../yes-no-switch":300,react:"react"}],86:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SideNav=function(t){return n.default.createElement("div",{className:"list-group nav-side"},t.options.map(function(e){return n.default.createElement(a.Link,{to:t.baseUrl+e.component+"/",className:"list-group-item",activeClassName:"active",key:e.component},n.default.createElement("span",{className:"material-icon"},e.icon),e.name)}))},r.CompactNav=function(t){return n.default.createElement("ul",{className:t.className||"dropdown-menu stick-to-bottom",role:"menu"},t.options.map(function(e){return n.default.createElement(o.default,{path:t.baseUrl+e.component+"/",key:e.component},n.default.createElement(a.Link,{to:t.baseUrl+e.component+"/",onClick:t.hideNav},n.default.createElement("span",{className:"material-icon hidden-sm"},e.icon),e.name))}))};var n=l(e("react")),a=e("react-router"),o=l(e("../li"));l(e("../.."));function l(e){return e&&e.__esModule?e:{default:e}}},{"../..":302,"../li":57,react:"react","react-router":"react-router"}],87:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.select=E,r.paths=function(){var e=p.default.get("SETTINGS").enable_sso,t=[{path:p.default.get("USERCP_URL")+"forum-options/",component:(0,n.connect)(E)(s.default)},{path:p.default.get("USERCP_URL")+"edit-details/",component:(0,n.connect)(E)(u.default)}];e||(t.push({path:p.default.get("USERCP_URL")+"change-username/",component:(0,n.connect)(E)(c.default)}),t.push({path:p.default.get("USERCP_URL")+"sign-in-credentials/",component:(0,n.connect)(E)(f.default)}));p.default.get("ENABLE_DOWNLOAD_OWN_DATA")&&t.push({path:p.default.get("USERCP_URL")+"download-data/",component:(0,n.connect)(E)(i.default)});!e&&p.default.get("ENABLE_DELETE_OWN_ACCOUNT")&&t.push({path:p.default.get("USERCP_URL")+"delete-account/",component:(0,n.connect)(E)(a.default)});return t},r.default=void 0;var o=m(e("react")),n=e("react-redux"),l=(m(e("../dropdown-toggle")),e("./navs")),a=m(e("./delete-account")),u=m(e("./edit-details")),i=m(e("./download-data")),s=m(e("./forum-options")),c=m(e("./change-username/root")),f=m(e("./sign-in-credentials/root")),d=m(e("../with-dropdown")),p=m(e("../.."));function m(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=g(o);return t=l?(e=g(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==h(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,d.default);var e,t,r,n=v(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){return o.default.createElement("div",{className:"page page-options"},o.default.createElement("div",{className:"page-header-bg"},o.default.createElement("div",{className:"page-header"},o.default.createElement("div",{className:"container"},o.default.createElement("h1",null,gettext("Change your options"))),o.default.createElement("div",{className:"page-tabs visible-xs-block visible-sm-block"},o.default.createElement("div",{className:"container"},o.default.createElement(l.CompactNav,{className:"nav nav-pills",baseUrl:p.default.get("USERCP_URL"),options:p.default.get("USER_OPTIONS")}))))),o.default.createElement("div",{className:"container"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-md-3 hidden-xs hidden-sm"},o.default.createElement(l.SideNav,{baseUrl:p.default.get("USERCP_URL"),options:p.default.get("USER_OPTIONS")})),o.default.createElement("div",{className:"col-md-9"},this.props.children))))}}])&&y(e.prototype,t),r&&y(e,r),a}();function E(e){return{tick:e.tick.tick,user:e.auth.user,"username-history":e["username-history"]}}r.default=_},{"../..":302,"../dropdown-toggle":27,"../with-dropdown":299,"./change-username/root":81,"./delete-account":82,"./download-data":83,"./edit-details":84,"./forum-options":85,"./navs":86,"./sign-in-credentials/root":91,react:"react","react-redux":"react-redux"}],88:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("react")),a=o(e("../../.."));function o(e){return e&&e.__esModule?e:{default:e}}function l(){return n.default.createElement("div",{className:"panel panel-default panel-form"},n.default.createElement("div",{className:"panel-heading"},n.default.createElement("h3",{className:"panel-title"},gettext("Change email or password"))),n.default.createElement("div",{className:"panel-body panel-message-body"},n.default.createElement("div",{className:"message-icon"},n.default.createElement("span",{className:"material-icon"},"info_outline")),n.default.createElement("div",{className:"message-body"},n.default.createElement("p",{className:"lead"},gettext("You need to set a password for your account to be able to change your username or email.")),n.default.createElement("p",{className:"help-block"},n.default.createElement("a",{className:"btn btn-primary",href:a.default.get("FORGOTTEN_PASSWORD_URL")},gettext("Set password"))))))}r.default=l},{"../../..":302,react:"react"}],89:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../../button")),u=n(e("../../form")),i=n(e("../../form-group")),s=n(e("../../../services/ajax")),c=n(e("../../../services/snackbar")),f=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../utils/validators"));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=b(o);return t=l?(e=b(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==p(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,u.default);var e,t,r,n=y(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,e)).state={new_email:"",password:"",validators:{new_email:[f.email()],password:[]},isLoading:!1},t}return e=a,(t=[{key:"clean",value:function(){var e=this.validate();return-1!==[this.state.new_email.trim().length,this.state.password.trim().length].indexOf(0)?(c.default.error(gettext("Fill out all fields.")),!1):!e.new_email||(c.default.error(e.new_email[0]),!1)}},{key:"send",value:function(){return s.default.post(this.props.user.api.change_email,{new_email:this.state.new_email,password:this.state.password})}},{key:"handleSuccess",value:function(e){this.setState({new_email:"",password:""}),c.default.success(e.detail)}},{key:"handleError",value:function(e){400===e.status?e.new_email?c.default.error(e.new_email):c.default.error(e.password):c.default.apiError(e)}},{key:"render",value:function(){return o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("input",{type:"type",style:{display:"none"}}),o.default.createElement("input",{type:"password",style:{display:"none"}}),o.default.createElement("div",{className:"panel panel-default panel-form"},o.default.createElement("div",{className:"panel-heading"},o.default.createElement("h3",{className:"panel-title"},gettext("Change e-mail address"))),o.default.createElement("div",{className:"panel-body"},o.default.createElement(i.default,{label:gettext("New e-mail"),for:"id_new_email"},o.default.createElement("input",{type:"text",id:"id_new_email",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("new_email"),value:this.state.new_email})),o.default.createElement("hr",null),o.default.createElement(i.default,{label:gettext("Your current password"),for:"id_confirm_email"},o.default.createElement("input",{type:"password",id:"id_confirm_email",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("password"),value:this.state.password}))),o.default.createElement("div",{className:"panel-footer"},o.default.createElement(l.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Change e-mail")))))}}])&&m(e.prototype,t),r&&m(e,r),a}();r.default=a},{"../../../services/ajax":365,"../../../services/snackbar":376,"../../../utils/validators":393,"../../button":8,"../../form":56,"../../form-group":55,react:"react"}],90:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../../button")),u=n(e("../../form")),i=n(e("../../form-group")),s=n(e("../../../services/ajax")),c=n(e("../../../services/snackbar"));function n(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=h(o);return t=l?(e=h(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==f(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,u.default);var e,t,r,n=m(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,e)).state={new_password:"",repeat_password:"",password:"",validators:{new_password:[],repeat_password:[],password:[]},isLoading:!1},t}return e=a,(t=[{key:"clean",value:function(){var e=this.validate();return-1!==[this.state.new_password.trim().length,this.state.repeat_password.trim().length,this.state.password.trim().length].indexOf(0)?(c.default.error(gettext("Fill out all fields.")),!1):e.new_password?(c.default.error(e.new_password[0]),!1):this.state.new_password===this.state.repeat_password||(c.default.error(gettext("New passwords are different.")),!1)}},{key:"send",value:function(){return s.default.post(this.props.user.api.change_password,{new_password:this.state.new_password,password:this.state.password})}},{key:"handleSuccess",value:function(e){this.setState({new_password:"",repeat_password:"",password:""}),c.default.success(e.detail)}},{key:"handleError",value:function(e){400===e.status?e.new_password?c.default.error(e.new_password):c.default.error(e.password):c.default.apiError(e)}},{key:"render",value:function(){return o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("input",{type:"type",style:{display:"none"}}),o.default.createElement("input",{type:"password",style:{display:"none"}}),o.default.createElement("div",{className:"panel panel-default panel-form"},o.default.createElement("div",{className:"panel-heading"},o.default.createElement("h3",{className:"panel-title"},gettext("Change password"))),o.default.createElement("div",{className:"panel-body"},o.default.createElement(i.default,{label:gettext("New password"),for:"id_new_password"},o.default.createElement("input",{type:"password",id:"id_new_password",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("new_password"),value:this.state.new_password})),o.default.createElement(i.default,{label:gettext("Repeat password"),for:"id_repeat_password"},o.default.createElement("input",{type:"password",id:"id_repeat_password",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("repeat_password"),value:this.state.repeat_password})),o.default.createElement("hr",null),o.default.createElement(i.default,{label:gettext("Your current password"),for:"id_confirm_password"},o.default.createElement("input",{type:"password",id:"id_confirm_password",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("password"),value:this.state.password}))),o.default.createElement("div",{className:"panel-footer"},o.default.createElement(l.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Change password")))))}}])&&d(e.prototype,t),r&&d(e,r),a}();r.default=a},{"../../../services/ajax":365,"../../../services/snackbar":376,"../../button":8,"../../form":56,"../../form-group":55,react:"react"}],91:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("./change-email")),u=n(e("./change-password")),i=n(e("../../..")),s=n(e("../../../services/page-title")),c=n(e("./UnusablePasswordMessage"));function n(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=h(o);return t=l?(e=h(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==f(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,o.default.Component);var e,t,r,n=m(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"componentDidMount",value:function(){s.default.set({title:gettext("Change email or password"),parent:gettext("Change your options")})}},{key:"render",value:function(){return this.props.user.has_usable_password?o.default.createElement("div",null,o.default.createElement(l.default,{user:this.props.user}),o.default.createElement(u.default,{user:this.props.user}),o.default.createElement("p",{className:"message-line"},o.default.createElement("span",{className:"material-icon"},"warning"),o.default.createElement("a",{href:i.default.get("FORGOTTEN_PASSWORD_URL")},gettext("Change forgotten password")))):o.default.createElement(c.default,null)}}])&&d(e.prototype,t),r&&d(e,r),a}();r.default=a},{"../../..":302,"../../../services/page-title":373,"./UnusablePasswordMessage":88,"./change-email":89,"./change-password":90,react:"react"}],92:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../utils/string-count"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,r,n=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"getClassName",value:function(){return this.props.copy&&this.props.copy.length&&1===(0,l.default)(this.props.copy,"<p")&&-1===this.props.copy.indexOf("<br")?"page-lead lead":"page-lead"}},{key:"render",value:function(){return this.props.copy&&this.props.copy.length?o.default.createElement("div",{className:this.getClassName(),dangerouslySetInnerHTML:{__html:this.props.copy}}):null}}])&&i(e.prototype,t),r&&i(e,r),a}();r.default=a},{"../utils/string-count":392,react:"react"}],93:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("./loader"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,r,n=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){return o.default.createElement("div",{className:"panel-body panel-body-loading"},o.default.createElement(l.default,{className:"loader loader-spaced"}))}}])&&i(e.prototype,t),r&&i(e,r),a}();r.default=a},{"./loader":58,react:"react"}],94:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("react"))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(a,o.default.Component);var e,t,r,n=s(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"getHelpText",value:function(){return this.props.helpText?o.default.createElement("p",{className:"help-block"},this.props.helpText):null}},{key:"render",value:function(){return o.default.createElement("div",{className:"panel-body panel-message-body"},o.default.createElement("div",{className:"message-icon"},o.default.createElement("span",{className:"material-icon"},this.props.icon||"info_outline")),o.default.createElement("div",{className:"message-body"},o.default.createElement("p",{className:"lead"},this.props.message),this.getHelpText()))}}])&&l(e.prototype,t),r&&l(e,r),a}();r.default=a},{react:"react"}],95:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=n(e("react")),c=n(e("../add-participant")),f=n(e("../../services/modal"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=i(o);return t=l?(e=i(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?d(r):n}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(i,s.default.Component);var e,t,r,u=l(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t,r,n,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=u.call.apply(u,[this].concat(o)),t=d(e),n=function(){f.default.show(s.default.createElement(c.default,{thread:e.props.thread}))},(r="onClick")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e}return e=i,(t=[{key:"render",value:function(){return this.props.thread.acl.can_add_participants?s.default.createElement("div",{className:"col-xs-12 col-sm-3"},s.default.createElement("button",{className:"btn btn-default btn-block",onClick:this.onClick,type:"button"},s.default.createElement("span",{className:"material-icon"},"person_add"),gettext("Add participant"))):null}}])&&a(e.prototype,t),r&&a(e,r),i}();r.default=p},{"../../services/modal":371,"../add-participant":4,react:"react"}],96:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.leave=function(e,t){u.default.patch(e.api.index,[{op:"remove",path:"participants",value:t.id}]).then(function(){i.default.success(gettext("You have left this thread.")),window.setTimeout(function(){window.location=o.default.get("PRIVATE_THREADS_URL")},3e3)},function(e){i.default.apiError(e)})},r.remove=function(e,r){u.default.patch(e.api.index,[{op:"remove",path:"participants",value:r.id},{op:"add",path:"acl",value:1}]).then(function(e){s.default.dispatch((0,a.updateAcl)(e)),s.default.dispatch(n.replace(e.participants));var t=gettext("%(user)s has been removed from this thread.");i.default.success(interpolate(t,{user:r.username},!0))},function(e){i.default.apiError(e)})},r.changeOwner=function(e,r){u.default.patch(e.api.index,[{op:"replace",path:"owner",value:r.id},{op:"add",path:"acl",value:1}]).then(function(e){s.default.dispatch((0,a.updateAcl)(e)),s.default.dispatch(n.replace(e.participants));var t=gettext("%(user)s has been made new thread owner.");i.default.success(interpolate(t,{user:r.username},!0))},function(e){i.default.apiError(e)})};var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../reducers/participants")),a=e("../../../reducers/thread"),o=c(e("../../..")),u=c(e("../../../services/ajax")),i=c(e("../../../services/snackbar")),s=c(e("../../../services/store"));function c(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}},{"../../..":302,"../../../reducers/participants":351,"../../../reducers/thread":360,"../../../services/ajax":365,"../../../services/snackbar":376,"../../../services/store":377}],97:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.participant,r="btn btn-default";t.is_owner&&(r="btn btn-primary");return r+=" btn-user btn-block",n.default.createElement("div",{className:"col-xs-12 col-sm-3 col-md-2 participant-card"},n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{"aria-haspopup":"true","aria-expanded":"false",className:r,"data-toggle":"dropdown",type:"button"},n.default.createElement(l.default,{size:"34",user:t}),n.default.createElement("span",{className:"btn-text"},t.username)),n.default.createElement("ul",{className:"dropdown-menu stick-to-bottom"},n.default.createElement(i,{isOwner:t.is_owner}),n.default.createElement("li",{className:"dropdown-header"}),n.default.createElement("li",null,n.default.createElement("a",{href:t.url},gettext("See profile"))),n.default.createElement("li",{role:"separator",className:"divider"}),n.default.createElement(a.default,e),n.default.createElement(o.default,e))))},r.UserStatus=i;var n=u(e("react")),a=u(e("./make-owner")),o=u(e("./remove")),l=u(e("../../avatar"));function u(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.isOwner?n.default.createElement("li",{className:"dropdown-header dropdown-header-owner"},n.default.createElement("span",{className:"material-icon"},"start"),n.default.createElement("span",{className:"icon-text"},gettext("Thread owner"))):null}},{"../../avatar":6,"./make-owner":99,"./remove":100,react:"react"}],98:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.participants,r=e.thread,n=e.user,a=e.userIsOwner;return o.default.createElement("div",{className:"participants-cards"},o.default.createElement("div",{className:"row"},t.map(function(e){return o.default.createElement(l.default,{key:e.id,participant:e,thread:r,user:n,userIsOwner:a})})))};var o=n(e("react")),l=n(e("./card"));function n(e){return e&&e.__esModule?e:{default:e}}},{"./card":97,react:"react"}],99:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,a=(n=e("react"))&&n.__esModule?n:{default:n},u=e("./actions");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==i(n)&&"function"!=typeof n?d(r):n}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,a.default.Component);var e,t,r,o=f(l);function l(e){var t,r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),r=d(t),a=function(){var e;(t.isUser?confirm(gettext("Are you sure you want to take over this thread?")):(e=gettext("Are you sure you want to change thread owner to %(user)s?"),confirm(interpolate(e,{user:t.props.participant.username},!0))))&&(0,u.changeOwner)(t.props.thread,t.props.participant)},(n="onClick")in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,t.isUser=e.participant.id===e.user.id,t}return e=l,(t=[{key:"render",value:function(){return!this.props.participant.is_owner&&this.props.thread.acl.can_change_owner?a.default.createElement("li",null,a.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},gettext("Make owner"))):null}}])&&s(e.prototype,t),r&&s(e,r),l}();r.default=o},{"./actions":96,react:"react"}],100:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,a=(n=e("react"))&&n.__esModule?n:{default:n},u=e("./actions");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==i(n)&&"function"!=typeof n?d(r):n}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,a.default.Component);var e,t,r,o=f(l);function l(e){var t,r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),r=d(t),a=function(){var e;(t.isUser?confirm(gettext("Are you sure you want to leave this thread?")):(e=gettext("Are you sure you want to remove %(user)s from this thread?"),confirm(interpolate(e,{user:t.props.participant.username},!0))))&&(t.isUser?(0,u.leave):(0,u.remove))(t.props.thread,t.props.participant)},(n="onClick")in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,t.isUser=e.participant.id===e.user.id,t}return e=l,(t=[{key:"render",value:function(){var e=this.props.user.acl.can_moderate_private_threads;return this.props.userIsOwner||this.isUser||e?a.default.createElement("li",null,a.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},this.isUser?gettext("Leave thread"):gettext("Remove"))):null}}])&&s(e.prototype,t),r&&s(e,r),l}();r.default=o},{"./actions":96,react:"react"}],101:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return e.participants.length?n.default.createElement("div",{className:"panel panel-default panel-participants"},n.default.createElement("div",{className:"panel-body"},n.default.createElement(o.default,c({userIsOwner:f(e.user,e.participants)},e)),n.default.createElement("div",{className:"row"},n.default.createElement(a.default,{thread:e.thread}),n.default.createElement("div",{className:"col-xs-12 col-sm-9"},n.default.createElement("p",null,u.getParticipantsCopy(e.participants)))))):null},r.getUserIsOwner=f;var n=s(e("react")),a=s(e("./add-participant")),o=s(e("./cards-list")),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("./utils"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e,t){return t[0].id===e.id}},{"./add-participant":95,"./cards-list":98,"./utils":102,react:"react"}],102:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getParticipantsCopy=function(e){var t=e.length,r=ngettext("This thread has %(users)s participant.","This thread has %(users)s participants.",t);return interpolate(r,{users:t},!0)}},{}],103:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.LABELS=r.STYLES=void 0;var o=n(e("react")),l=n(e("../services/zxcvbn"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=["progress-bar-danger","progress-bar-warning","progress-bar-warning","progress-bar-primary","progress-bar-success"];r.STYLES=d;var p=[gettext("Entered password is very weak."),gettext("Entered password is weak."),gettext("Entered password is average."),gettext("Entered password is strong."),gettext("Entered password is very strong.")];r.LABELS=p;var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,r,n=c(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,e))._score=0,t._password=null,t._inputs=[],t.state={loaded:!1},t}return e=a,(t=[{key:"componentDidMount",value:function(){var e=this;l.default.load().then(function(){e.setState({loaded:!0})})}},{key:"getScore",value:function(e,t){var r=this,n=!1;return e!==this._password&&(n=!0),t.length!==this._inputs.length?n=!0:t.map(function(e,t){e.trim()!==r._inputs[t]&&(n=!0)}),n&&(this._score=l.default.scorePassword(e,t),this._password=e,this._inputs=t.map(function(e){return e.trim()})),this._score}},{key:"render",value:function(){if(!this.state.loaded)return null;var e=this.getScore(this.props.password,this.props.inputs);return o.default.createElement("div",{className:"help-block password-strength"},o.default.createElement("div",{className:"progress"},o.default.createElement("div",{className:"progress-bar "+d[e],style:{width:20+20*e+"%"},role:"progress-bar","aria-valuenow":e,"aria-valuemin":"0","aria-valuemax":"4"},o.default.createElement("span",{className:"sr-only"},p[e]))),o.default.createElement("p",{className:"text-small"},p[e]))}}])&&i(e.prototype,t),r&&i(e,r),a}();r.default=a},{"../services/zxcvbn":378,react:"react"}],104:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generateRandomHash=b,r.PollChoice=r.default=void 0;var n,l=(n=e("react"))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?d(r):n}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(){c(o,l.default.Component);var a=f(o);function o(){var n;i(this,o);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return m(d(n=a.call.apply(a,[this].concat(t))),"onAdd",function(){var e=n.props.choices.slice();e.push({hash:b(),label:""}),n.props.setChoices(e)}),m(d(n),"onChange",function(t,r){var e=n.props.choices.map(function(e){return e.hash===t&&(e.label=r),e});n.props.setChoices(e)}),m(d(n),"onDelete",function(t){var e=n.props.choices.filter(function(e){return e.hash!==t});n.props.setChoices(e)}),n}return s(o,[{key:"render",value:function(){var t=this;return l.default.createElement("div",{className:"poll-choices-control"},l.default.createElement("ul",{className:"list-group"},this.props.choices.map(function(e){return l.default.createElement(y,{canDelete:2<t.props.choices.length,choice:e,disabled:t.props.disabled,key:e.hash,onChange:t.onChange,onDelete:t.onDelete})})),l.default.createElement("button",{className:"btn btn-default btn-sm",disabled:this.props.disabled,onClick:this.onAdd,type:"button"},gettext("Add choice")))}}]),o}();r.default=h;var y=function(){c(o,l.default.Component);var a=f(o);function o(){var t;i(this,o);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return m(d(t=a.call.apply(a,[this].concat(r))),"onChange",function(e){t.props.onChange(t.props.choice.hash,e.target.value)}),m(d(t),"onDelete",function(){confirm(gettext("Are you sure you want to delete this choice?"))&&t.props.onDelete(t.props.choice.hash)}),t}return s(o,[{key:"render",value:function(){return l.default.createElement("li",{className:"list-group-item"},l.default.createElement("button",{className:"btn",disabled:!this.props.canDelete||this.props.disabled,onClick:this.onDelete,title:gettext("Delete this choice"),type:"button"},l.default.createElement("span",{className:"material-icon"},"close")),l.default.createElement("input",{disabled:this.props.disabled,maxLength:"255",placeholder:gettext("choice label"),type:"text",onChange:this.onChange,value:this.props.choice.label}))}}]),o}();function b(){for(var e="";12!=e.length;)e=Math.random().toString(36).replace(/[^a-zA-Z0-9]+/g,"").substr(1,12);return e}r.PollChoice=y},{react:"react"}],105:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PollPublicSwitch=P,r.default=void 0;var o=n(e("react")),l=n(e("./choices-control")),u=n(e("../../button")),i=n(e("../../form")),s=n(e("../../form-group")),c=n(e("../../yes-no-switch")),f=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==b(e)&&"function"!=typeof e)return{default:e};var t=y();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../reducers/poll")),d=n(e("../../../services/ajax")),p=n(e("../../../services/posting")),m=n(e("../../../services/snackbar")),h=n(e("../../../services/store"));function y(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return y=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=w(o);return t=l?(e=w(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==b(n)&&"function"!=typeof n?E(r):n}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(a,i.default);var e,t,r,n=_(a);function a(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),O(E(r=n.call(this,e)),"setChoices",function(e){var t=Object.assign({},t,{choices:null});r.setState({choices:e,errors:t})}),O(E(r),"onCancel",function(){confirm(gettext("Are you sure you want to discard poll?"))&&p.default.close()});var t=e.poll||{question:"",choices:[{hash:"choice-10000",label:""},{hash:"choice-20000",label:""}],length:0,allowed_choices:1,allow_revotes:0,is_public:0};return r.state={isLoading:!1,isEdit:!!t.question,question:t.question,choices:t.choices,length:t.length,allowed_choices:t.allowed_choices,allow_revotes:t.allow_revotes,is_public:t.is_public,validators:{question:[],choices:[],length:[],allowed_choices:[]},errors:{}},r}return e=a,(t=[{key:"send",value:function(){var e={question:this.state.question,choices:this.state.choices,length:this.state.length,allowed_choices:this.state.allowed_choices,allow_revotes:this.state.allow_revotes,is_public:this.state.is_public};return this.state.isEdit?d.default.put(this.props.poll.api.index,e):d.default.post(this.props.thread.api.poll,e)}},{key:"handleSuccess",value:function(e){h.default.dispatch(f.replace(e)),this.state.isEdit?m.default.success(gettext("Poll has been edited.")):m.default.success(gettext("Poll has been posted.")),p.default.close()}},{key:"handleError",value:function(e){400===e.status?(e.non_field_errors&&(e.allowed_choices=e.non_field_errors),this.setState({errors:Object.assign({},e)}),m.default.error(gettext("Form contains errors."))):m.default.apiError(e)}},{key:"render",value:function(){return o.default.createElement("div",{className:"poll-form"},o.default.createElement("div",{className:"container"},o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"panel panel-default panel-form"},o.default.createElement("div",{className:"panel-body"},o.default.createElement("fieldset",null,o.default.createElement("legend",null,gettext("Question and choices")),o.default.createElement(s.default,{label:gettext("Poll question"),for:"id_questions",validation:this.state.errors.question},o.default.createElement("input",{className:"form-control",disabled:this.state.isLoading,id:"id_questions",onChange:this.bindInput("question"),type:"text",maxLength:"255",value:this.state.question})),o.default.createElement(s.default,{label:gettext("Available choices"),validation:this.state.errors.choices},o.default.createElement(l.default,{choices:this.state.choices,disabled:this.state.isLoading,setChoices:this.setChoices}))),o.default.createElement("fieldset",null,o.default.createElement("legend",null,gettext("Voting")),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-xs-12 col-sm-6"},o.default.createElement(s.default,{label:gettext("Poll length"),helpText:gettext("Enter number of days for which voting in this poll should be possible or zero to run this poll indefinitely."),for:"id_length",validation:this.state.errors.length},o.default.createElement("input",{className:"form-control",disabled:this.state.isLoading,id:"id_length",onChange:this.bindInput("length"),type:"text",value:this.state.length}))),o.default.createElement("div",{className:"col-xs-12 col-sm-6"},o.default.createElement(s.default,{label:gettext("Allowed choices"),for:"id_allowed_choices",validation:this.state.errors.allowed_choices},o.default.createElement("input",{className:"form-control",disabled:this.state.isLoading,id:"id_allowed_choices",onChange:this.bindInput("allowed_choices"),type:"text",maxLength:"255",value:this.state.allowed_choices})))),o.default.createElement("div",{className:"row"},o.default.createElement(P,{bindInput:this.bindInput,disabled:this.state.isLoading,isEdit:this.state.isEdit,value:this.state.is_public}),o.default.createElement("div",{className:"col-xs-12 col-sm-6"},o.default.createElement(s.default,{label:gettext("Allow vote changes"),for:"id_allow_revotes"},o.default.createElement(c.default,{id:"id_allow_revotes",disabled:this.state.isLoading,iconOn:"check",iconOff:"close",labelOn:gettext("Allow participants to change their vote"),labelOff:gettext("Don't allow participants to change their vote"),onChange:this.bindInput("allow_revotes"),value:this.state.allow_revotes})))))),o.default.createElement("div",{className:"panel-footer text-right"},o.default.createElement("button",{className:"btn btn-default",disabled:this.state.isLoading,onClick:this.onCancel,type:"button"},gettext("Cancel"))," ",o.default.createElement(u.default,{className:"btn-primary",loading:this.state.isLoading},this.state.isEdit?gettext("Save changes"):gettext("Post poll")))))))}}])&&v(e.prototype,t),r&&v(e,r),a}();function P(e){return e.isEdit?null:o.default.createElement("div",{className:"col-xs-12 col-sm-6"},o.default.createElement(s.default,{label:gettext("Make voting public"),helpText:gettext("Making voting public will allow everyone to access detailed list of votes, showing which users voted for which choices and at which times. This option can't be changed after poll's creation. Moderators may see voting details for all polls."),for:"id_is_public"},o.default.createElement(c.default,{id:"id_is_public",disabled:e.disabled,iconOn:"visibility",iconOff:"visibility_off",labelOn:gettext("Votes are public"),labelOff:gettext("Votes are hidden"),onChange:e.bindInput("is_public"),value:e.value})))}r.default=a},{"../../../reducers/poll":352,"../../../services/ajax":365,"../../../services/posting":375,"../../../services/snackbar":376,"../../../services/store":377,"../../button":8,"../../form":56,"../../form-group":55,"../../yes-no-switch":300,"./choices-control":104,react:"react"}],106:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Poll",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"PollForm",{enumerable:!0,get:function(){return a.default}});var n=o(e("./poll")),a=o(e("./form"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./form":105,"./poll":108}],107:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement("ul",{className:"list-unstyled list-inline poll-details"},n.default.createElement(m,{votes:e.poll.votes}),n.default.createElement(d,{poll:e.poll}),n.default.createElement(h,{poll:e.poll}),n.default.createElement(s,{poll:e.poll}))},r.PollCreation=s,r.getPoster=c,r.getPostedOn=f,r.PollLength=d,r.getEndsOn=p,r.PollVotes=m,r.PollIsPublic=h;var n=o(e("react")),a=o(e("../../utils/escape-html"));function o(e){return e&&e.__esModule?e:{default:e}}var l='<abbr title="%(absolute)s">%(relative)s</abbr>',u='<span class="item-title">%(user)s</span>',i='<a href="%(url)s" class="item-title">%(user)s</a>';function s(e){var t=interpolate((0,a.default)(gettext("Posted by %(poster)s %(posted_on)s.")),{poster:c(e.poll),posted_on:f(e.poll)},!0);return n.default.createElement("li",{className:"poll-info-creation",dangerouslySetInnerHTML:{__html:t}})}function c(e){return e.url.poster?interpolate(i,{url:(0,a.default)(e.url.poster),user:(0,a.default)(e.poster_name)},!0):interpolate(u,{user:(0,a.default)(e.poster_name)},!0)}function f(e){return interpolate(l,{absolute:(0,a.default)(e.posted_on.format("LLL")),relative:(0,a.default)(e.posted_on.fromNow())},!0)}function d(e){if(!e.poll.length)return null;var t=interpolate((0,a.default)(gettext("Voting ends %(ends_on)s.")),{ends_on:p(e.poll)},!0);return n.default.createElement("li",{className:"poll-info-ends-on",dangerouslySetInnerHTML:{__html:t}})}function p(e){return interpolate(l,{absolute:(0,a.default)(e.endsOn.format("LLL")),relative:(0,a.default)(e.endsOn.fromNow())},!0)}function m(e){var t=ngettext("%(votes)s vote.","%(votes)s votes.",e.votes),r=interpolate(t,{votes:e.votes},!0);return n.default.createElement("li",{className:"poll-info-votes"},r)}function h(e){return e.poll.is_public?n.default.createElement("li",{className:"poll-info-public"},gettext("Votes are public.")):null}},{"../../utils/escape-html":383,react:"react"}],108:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getIsPollOver=b,r.default=void 0;var o=a(e("react")),n=a(e("moment")),l=a(e("./results")),u=a(e("./voting"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=m(o);return t=l?(e=m(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==i(n)&&"function"!=typeof n?p(r):n}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,o.default.Component);var e,t,r,n=d(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),h(p(t=n.call(this,e)),"showResults",function(){t.setState({showResults:!0})}),h(p(t),"showVoting",function(){t.setState({showResults:!1})});var r=!0;return e.user.id&&!e.poll.hasSelectedChoices&&(r=!1),t.state={showResults:r},t}return e=a,(t=[{key:"render",value:function(){if(!this.props.thread.poll)return null;var e=b(this.props.poll);return e||!this.props.poll.acl.can_vote||this.state.showResults?o.default.createElement(l.default,s({isPollOver:e,showVoting:this.showVoting},this.props)):o.default.createElement(u.default,s({showResults:this.showResults},this.props))}}])&&c(e.prototype,t),r&&c(e,r),a}();function b(e){return!!e.length&&(0,n.default)().isAfter(e.endsOn)}r.default=y},{"./results":110,"./voting":114,moment:"moment",react:"react"}],109:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return a.default.createElement("div",{className:"poll-choices-bars"},t.poll.choices.map(function(e){return a.default.createElement(o,{choice:e,key:e.hash,poll:t.poll})}))},r.PollChoice=o,r.ChoiceVotes=l,r.getVotesLabel=u,r.UserChoice=i;var n,a=(n=e("react"))&&n.__esModule?n:{default:n};function o(e){var t=0;return e.choice.votes&&e.poll.votes&&(t=Math.ceil(100*e.choice.votes/e.poll.votes)),a.default.createElement("dl",{className:"dl-horizontal"},a.default.createElement("dt",null,e.choice.label),a.default.createElement("dd",null,a.default.createElement("div",{className:"progress"},a.default.createElement("div",{className:"progress-bar",role:"progressbar","aria-valuenow":t,"aria-valuemin":"0","aria-valuemax":"100",style:{width:t+"%"}},a.default.createElement("span",{className:"sr-only"},u(e.votes,e.proc)))),a.default.createElement("ul",{className:"list-unstyled list-inline poll-chart"},a.default.createElement(l,{proc:t,votes:e.choice.votes}),a.default.createElement(i,{selected:e.choice.selected}))))}function l(e){return a.default.createElement("li",{className:"poll-chart-votes"},u(e.votes,e.proc))}function u(e,t){var r=ngettext("%(votes)s vote, %(proc)s% of total.","%(votes)s votes, %(proc)s% of total.",e);return interpolate(r,{votes:e,proc:t},!0)}function i(e){return e.selected?a.default.createElement("li",{className:"poll-chart-selected"},a.default.createElement("span",{className:"material-icon"},"check_box"),gettext("Your choice.")):null}},{react:"react"}],110:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement("div",{className:"panel panel-default panel-poll"},n.default.createElement("div",{className:"panel-body"},n.default.createElement("h2",null,e.poll.question),n.default.createElement(l.default,{poll:e.poll}),n.default.createElement(a.default,{poll:e.poll}),n.default.createElement(o.default,{isPollOver:e.isPollOver,poll:e.poll,showVoting:e.showVoting,thread:e.thread})))};var n=u(e("react")),a=u(e("./chart")),o=u(e("./options")),l=u(e("../info"));function u(e){return e&&e.__esModule?e:{default:e}}},{"../info":107,"./chart":109,"./options":112,react:"react"}],111:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ModalBody=y,r.ChoicesList=b,r.ChoiceDetails=v,r.VotesCount=g,r.VotesList=_,r.Voter=E,r.VoteDate=w,r.default=void 0;var o=i(e("react")),l=i(e("moment")),n=i(e("../../modal-message")),a=i(e("../../modal-loader")),u=i(e("../../../services/ajax"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=m(o);return t=l?(e=m(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==c(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,o.default.Component);var e,t,r,n=p(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,e)).state={isLoading:!0,error:null,data:[]},t}return e=a,(t=[{key:"componentDidMount",value:function(){var r=this;u.default.get(this.props.poll.api.votes).then(function(e){var t=e.map(function(e){return Object.assign({},e,{voters:e.voters.map(function(e){return Object.assign({},e,{voted_on:(0,l.default)(e.voted_on)})})})});r.setState({isLoading:!1,data:t})},function(e){r.setState({isLoading:!1,error:e.detail})})}},{key:"render",value:function(){return o.default.createElement("div",{className:"modal-dialog"+(this.state.error?" modal-message":" modal-sm"),role:"document"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},o.default.createElement("span",{"aria-hidden":"true"},"×")),o.default.createElement("h4",{className:"modal-title"},gettext("Poll votes"))),o.default.createElement(y,{data:this.state.data,error:this.state.error,isLoading:this.state.isLoading})))}}])&&f(e.prototype,t),r&&f(e,r),a}();function y(e){return e.isLoading?o.default.createElement(a.default,null):e.error?o.default.createElement(n.default,{icon:"error_outline",message:e.error}):o.default.createElement(b,{data:e.data})}function b(e){return o.default.createElement("div",{className:"modal-body modal-poll-votes"},o.default.createElement("ul",{className:"list-unstyled votes-details"},e.data.map(function(e){return o.default.createElement(v,s({key:e.hash},e))})))}function v(e){return o.default.createElement("li",null,o.default.createElement("h4",null,e.label),o.default.createElement(g,{votes:e.votes}),o.default.createElement(_,{voters:e.voters}),o.default.createElement("hr",null))}function g(e){var t=ngettext("%(votes)s user has voted for this choice.","%(votes)s users have voted for this choice.",e.votes),r=interpolate(t,{votes:e.votes},!0);return o.default.createElement("p",null,r)}function _(e){return e.voters.length?o.default.createElement("ul",{className:"list-unstyled"},e.voters.map(function(e){return o.default.createElement(E,s({key:e.username},e))})):null}function E(e){return e.url?o.default.createElement("li",null,o.default.createElement("a",{className:"item-title",href:e.url},e.username)," ",o.default.createElement(w,{voted_on:e.voted_on})):o.default.createElement("li",null,o.default.createElement("strong",null,e.username)," ",o.default.createElement(w,{voted_on:e.voted_on}))}function w(e){return o.default.createElement("abbr",{className:"text-muted",title:e.voted_on.format("LLL")},e.voted_on.fromNow())}r.default=h},{"../../../services/ajax":365,"../../modal-loader":61,"../../modal-message":62,moment:"moment",react:"react"}],112:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.isPollOver,r=e.poll,n=e.showVoting,a=e.thread;if(!k(t,r.acl,r))return null;var o=[],l=r.acl.can_vote,u=!r.hasSelectedChoices||r.allow_revotes;l&&u&&o.push(0);(r.is_public||r.acl.can_see_votes)&&o.push(1);r.acl.can_edit&&o.push(2);r.acl.can_delete&&o.push(3);return i.default.createElement("div",{className:"row poll-options"},i.default.createElement(S,{controls:o,isPollOver:t,poll:r,showVoting:n}),i.default.createElement(N,{controls:o,poll:r}),i.default.createElement(x,{controls:o,poll:r,thread:a}),i.default.createElement(R,{controls:o,poll:r}))},r.isVisible=k,r.getClassName=j,r.ChangeVote=S,r.Delete=r.Edit=r.SeeVotes=void 0;var i=a(e("react")),l=a(e("./modal")),u=n(e("../../../reducers/poll")),s=n(e("../../../reducers/thread")),c=a(e("../../../services/ajax")),f=a(e("../../../services/modal")),d=a(e("../../../services/posting")),p=a(e("../../../services/snackbar")),m=a(e("../../../services/store"));function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!==y(e)&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var r,n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((r=a?Object.getOwnPropertyDescriptor(e,o):null)&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o])}return n.default=e,t&&t.set(e,n),n}function a(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=O(o);return t=l?(e=O(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==y(n)&&"function"!=typeof n?w(r):n}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t,r){return r.is_public||t.can_delete||t.can_edit||t.can_see_votes||t.can_vote&&!e&&(!r.hasSelectedChoices||r.allow_revotes)}function j(e,t){var r="col-xs-6";return 1===e.length&&(r="col-xs-12"),3===e.length&&e[0]===t&&(r="col-xs-12"),r+" col-sm-3 col-md-2"}function S(e){var t=e.poll.acl.can_vote,r=!e.poll.hasSelectedChoices||e.poll.allow_revotes;return t&&r?i.default.createElement("div",{className:j(e.controls,0)},i.default.createElement("button",{className:"btn btn-default btn-block btn-sm",disabled:e.poll.isBusy,onClick:e.showVoting,type:"button"},gettext("Vote"))):null}var N=function(){g(o,i.default.Component);var a=E(o);function o(){var e;b(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return P(w(e=a.call.apply(a,[this].concat(r))),"onClick",function(){f.default.show(i.default.createElement(l.default,{poll:e.props.poll}))}),e}return v(o,[{key:"render",value:function(){return this.props.poll.is_public||this.props.poll.acl.can_see_votes?i.default.createElement("div",{className:j(this.props.controls,1)},i.default.createElement("button",{className:"btn btn-default btn-block btn-sm",disabled:this.props.poll.isBusy,onClick:this.onClick,type:"button"},gettext("See votes"))):null}}]),o}();r.SeeVotes=N;var x=function(){g(o,i.default.Component);var a=E(o);function o(){var e;b(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return P(w(e=a.call.apply(a,[this].concat(r))),"onClick",function(){d.default.open({submit:e.props.poll.api.index,thread:e.props.thread,poll:e.props.poll,mode:"POLL"})}),e}return v(o,[{key:"render",value:function(){return this.props.poll.acl.can_edit?i.default.createElement("div",{className:j(this.props.controls,2)},i.default.createElement("button",{className:"btn btn-default btn-block btn-sm",disabled:this.props.poll.isBusy,onClick:this.onClick,type:"button"},gettext("Edit"))):null}}]),o}();r.Edit=x;var R=function(){g(o,i.default.Component);var a=E(o);function o(){var e;b(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return P(w(e=a.call.apply(a,[this].concat(r))),"onClick",function(){return!!confirm(gettext("Are you sure you want to delete this poll? This action is not reversible."))&&(m.default.dispatch(u.busy()),void c.default.delete(e.props.poll.api.index).then(e.handleSuccess,e.handleError))}),P(w(e),"handleSuccess",function(e){p.default.success("Poll has been deleted"),m.default.dispatch(u.remove()),m.default.dispatch(s.updateAcl(e))}),P(w(e),"handleError",function(e){p.default.apiError(e),m.default.dispatch(u.release())}),e}return v(o,[{key:"render",value:function(){return this.props.poll.acl.can_delete?i.default.createElement("div",{className:j(this.props.controls,3)},i.default.createElement("button",{className:"btn btn-default btn-block btn-sm",disabled:this.props.poll.isBusy,onClick:this.onClick,type:"button"},gettext("Delete"))):null}}]),o}();r.Delete=R},{"../../../reducers/poll":352,"../../../reducers/thread":360,"../../../services/ajax":365,"../../../services/modal":371,"../../../services/posting":375,"../../../services/snackbar":376,"../../../services/store":377,"./modal":111,react:"react"}],113:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return a.default.createElement("ul",{className:"list-unstyled list-inline poll-help"},a.default.createElement(o,{choicesLeft:e.choicesLeft}),a.default.createElement(l,{poll:e.poll}))},r.PollChoicesLeft=o,r.PollAllowRevote=l;var a=n(e("react"));n(e("../../../utils/escape-html"));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.choicesLeft;if(0===t)return a.default.createElement("li",{className:"poll-help-choices-left"},gettext("You can't select any more choices."));var r=ngettext("You can select %(choices)s more choice.","You can select %(choices)s more choices.",t),n=interpolate(r,{choices:t},!0);return a.default.createElement("li",{className:"poll-help-choices-left"},n)}function l(e){return e.poll.allow_revotes?a.default.createElement("li",{className:"poll-help-allow-revotes"},gettext("You can change your vote later.")):a.default.createElement("li",{className:"poll-help-no-revotes"},gettext("Votes are final."))}},{"../../../utils/escape-html":383,react:"react"}],114:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),l=n(e("./help")),u=n(e("./select")),i=e("./utils"),s=n(e("../info")),c=e("../results/options"),f=n(e("../../button")),d=n(e("../../form")),p=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==v(e)&&"function"!=typeof e)return{default:e};var t=b();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../reducers/poll")),m=n(e("../../../services/ajax")),h=n(e("../../../services/snackbar")),y=n(e("../../../services/store"));function b(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return b=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=O(o);return t=l?(e=O(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==v(n)&&"function"!=typeof n?w(r):n}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(o,d.default);var e,t,r,n=E(o);function o(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),P(w(a=n.call(this,e)),"toggleChoice",function(e){var t=(0,i.getChoiceFromHash)(a.state.choices,e),r=null,r=t.selected?a.deselectChoice(t,e):a.selectChoice(t,e);a.setState({choices:r,choicesLeft:(0,i.getChoicesLeft)(a.props.poll,r)})}),P(w(a),"selectChoice",function(e,t){if(!(0,i.getChoicesLeft)(a.props.poll,a.state.choices))for(var r in a.state.choices.slice()){var n=a.state.choices[r];if(n.selected&&n.hash!=t){n.selected=!1;break}}return a.state.choices.map(function(e){return Object.assign({},e,{selected:e.hash==t||e.selected})})}),P(w(a),"deselectChoice",function(e,t){return a.state.choices.map(function(e){return Object.assign({},e,{selected:e.hash!=t&&e.selected})})}),a.state={isLoading:!1,choices:e.poll.choices,choicesLeft:(0,i.getChoicesLeft)(e.poll,e.poll.choices)},a}return e=o,(t=[{key:"clean",value:function(){return this.state.choicesLeft!==this.props.poll.allowed_choices||(h.default.error(gettext("You need to select at least one choice")),!1)}},{key:"send",value:function(){var e=[];for(var t in this.state.choices.slice()){var r=this.state.choices[t];r.selected&&e.push(r.hash)}return m.default.post(this.props.poll.api.votes,e)}},{key:"handleSuccess",value:function(e){y.default.dispatch(p.replace(e)),h.default.success(gettext("Your vote has been saved.")),this.props.showResults()}},{key:"handleError",value:function(e){400===e.status?h.default.error(e.detail):h.default.apiError(e)}},{key:"render",value:function(){var e=[];return this.props.poll.acl.can_vote&&e.push(0),(this.props.poll.is_public||this.props.poll.acl.can_see_votes)&&e.push(1),this.props.poll.acl.can_edit&&e.push(2),this.props.poll.acl.can_delete&&e.push(3),a.default.createElement("div",{className:"panel panel-default panel-poll"},a.default.createElement("form",{onSubmit:this.handleSubmit},a.default.createElement("div",{className:"panel-body"},a.default.createElement("h2",null,this.props.poll.question),a.default.createElement(s.default,{poll:this.props.poll}),a.default.createElement(u.default,{choices:this.state.choices,toggleChoice:this.toggleChoice}),a.default.createElement(l.default,{choicesLeft:this.state.choicesLeft,poll:this.props.poll})),a.default.createElement("div",{className:"panel-footer"},a.default.createElement("div",{className:"row"},a.default.createElement("div",{className:(0,c.getClassName)(e,0)},a.default.createElement(f.default,{className:"btn-primary btn-block btn-sm",loading:this.state.isLoading},gettext("Save your vote"))),a.default.createElement("div",{className:(0,c.getClassName)(e,1)},a.default.createElement("button",{className:"btn btn-default btn-block btn-sm",disabled:this.state.isLoading,onClick:this.props.showResults,type:"button"},gettext("See results"))),a.default.createElement(c.Edit,{controls:e,poll:this.props.poll,thread:this.props.thread}),a.default.createElement(c.Delete,{controls:e,poll:this.props.poll})))))}}])&&g(e.prototype,t),r&&g(e,r),o}();r.default=o},{"../../../reducers/poll":352,"../../../services/ajax":365,"../../../services/snackbar":376,"../../../services/store":377,"../../button":8,"../../form":56,"../info":107,"../results/options":112,"./help":113,"./select":115,"./utils":116,react:"react"}],115:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return a.default.createElement("ul",{className:"list-unstyled poll-select-choices"},t.choices.map(function(e){return a.default.createElement(f,{choice:e,key:e.hash,toggleChoice:t.toggleChoice})}))},r.ChoiceSelect=void 0;var n,a=(n=e("react"))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=i(o);return t=l?(e=i(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?c(r):n}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,a.default.Component);var e,t,r,u=s(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t,r,n,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=u.call.apply(u,[this].concat(o)),t=c(e),n=function(){e.props.toggleChoice(e.props.choice.hash)},(r="onClick")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e}return e=i,(t=[{key:"render",value:function(){return a.default.createElement("li",{className:"poll-select-choice"},a.default.createElement("button",{className:this.props.choice.selected?"btn btn-selected":"btn",onClick:this.onClick,type:"button"},a.default.createElement("span",{className:"material-icon"},this.props.choice.selected?"check_box":"check_box_outline_blank"),a.default.createElement("strong",null,this.props.choice.label)))}}])&&o(e.prototype,t),r&&o(e,r),i}();r.ChoiceSelect=f},{react:"react"}],116:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getChoiceFromHash=function(e,t){for(var r in e){var n=e[r];if(n.hash===t)return n}return null},r.getChoicesLeft=function(e,t){var r=[];for(var n in t){var a=t[n];a.selected&&r.push(a)}return e.allowed_choices-r.length}},{}],117:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return a.default.createElement("div",{className:"modal-body post-changelog-diff"},a.default.createElement("ul",{className:"list-unstyled"},e.diff.map(function(e,t){return a.default.createElement(o,{item:e,key:t})})))},r.DiffItem=o,r.getItemClassName=l,r.cleanItem=u;var n,a=(n=e("react"))&&n.__esModule?n:{default:n};function o(e){return"?"===e.item[0]?null:a.default.createElement("li",{className:l(e.item)},u(e.item))}function l(e){var t="diff-item";return"-"===e[0]?t+=" diff-item-sub":"+"===e[0]&&(t+=" diff-item-add"),t}function u(e){return e.substr(2)}},{react:"react"}],118:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("react")),a=o(e("../button"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=i(o);return t=l?(e=i(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?f(r):n}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,n.default.Component);var e,t,r,u=c(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t,r,n,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=u.call.apply(u,[this].concat(o)),t=f(e),n=function(){e.props.revertEdit(e.props.edit.id)},(r="onClick")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e}return e=i,(t=[{key:"render",value:function(){return this.props.canRevert?n.default.createElement("div",{className:"modal-footer visible-xs-block"},n.default.createElement(a.default,{className:"btn-default btn-sm btn-block",disabled:this.props.disabled,onClick:this.onClick,title:gettext("Revert post to state from before this edit.")},gettext("Revert"))):null}}])&&l(e.prototype,t),r&&l(e,r),i}();r.default=d},{"../button":8,react:"react"}],119:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ModalDialog=k,r.default=void 0;var o=n(e("react")),l=n(e("./diff")),u=n(e("./footer")),i=n(e("./toolbar")),s=e("./utils"),c=n(e("../modal-message")),f=n(e("../modal-loader")),d=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==v(e)&&"function"!=typeof e)return{default:e};var t=b();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../reducers/post")),p=n(e("../../services/ajax")),m=n(e("../../services/modal")),h=n(e("../../services/snackbar")),y=n(e("../../services/store"));function b(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return b=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=O(o);return t=l?(e=O(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==v(n)&&"function"!=typeof n?w(r):n}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(a,o.default.Component);var e,t,r,n=E(a);function a(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),P(w(r=n.call(this,e)),"goToEdit",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;r.setState({isBusy:!0});var t=r.props.post.api.edits;null!==e&&(t+="?edit="+e),p.default.get(t).then(function(e){r.setState({isReady:!0,isBusy:!1,edit:(0,s.hydrateEdit)(e)})},function(e){r.setState({isReady:!0,isBusy:!1,error:e.detail})})}),P(w(r),"revertEdit",function(e){var t;r.state.isBusy||confirm(gettext("Are you sure you with to revert this post to the state from before this edit?"))&&(r.setState({isBusy:!0}),t=r.props.post.api.edits+"?edit="+e,p.default.post(t).then(function(e){var t=d.hydrate(e);y.default.dispatch(d.patch(e,t)),h.default.success(gettext("Post has been reverted to previous state.")),m.default.hide()},function(e){h.default.apiError(e),r.setState({isBusy:!1})}))}),r.state={isReady:!1,isBusy:!0,canRevert:e.post.acl.can_edit,error:null,edit:null},r}return e=a,(t=[{key:"componentDidMount",value:function(){this.goToEdit()}},{key:"render",value:function(){return this.state.error?o.default.createElement(k,{className:"modal-dialog modal-message"},o.default.createElement(c.default,{message:this.state.error})):this.state.isReady?o.default.createElement(k,null,o.default.createElement(i.default,{canRevert:this.state.canRevert,disabled:this.state.isBusy,edit:this.state.edit,goToEdit:this.goToEdit,revertEdit:this.revertEdit}),o.default.createElement(l.default,{diff:this.state.edit.diff}),o.default.createElement(u.default,{canRevert:this.state.canRevert,disabled:this.state.isBusy,edit:this.state.edit,revertEdit:this.revertEdit})):o.default.createElement(k,null,o.default.createElement(f.default,null))}}])&&g(e.prototype,t),r&&g(e,r),a}();function k(e){return o.default.createElement("div",{className:e.className||"modal-dialog",role:"document"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},o.default.createElement("span",{"aria-hidden":"true"},"×")),o.default.createElement("h4",{className:"modal-title"},gettext("Post edits history"))),e.children))}r.default=a},{"../../reducers/post":353,"../../services/ajax":365,"../../services/modal":371,"../../services/snackbar":376,"../../services/store":377,"../modal-loader":61,"../modal-message":62,"./diff":117,"./footer":118,"./toolbar":120,"./utils":121,react:"react"}],120:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GoBackBtn=v,r.GoForwardBtn=g,r.GoLastBtn=_,r.RevertBtn=E,r.Label=w,r.default=void 0;var l=o(e("react")),n=o(e("../button")),a=o(e("../../utils/escape-html"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=d(o);return t=l?(e=d(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?f(r):n}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m='<abbr title="%(absolute)s">%(relative)s</abbr>',h='<span class="item-title">%(user)s</span>',y='<a href="%(url)s" class="item-title">%(user)s</a>',b=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(o,l.default.Component);var e,t,r,a=c(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return p(f(e=a.call.apply(a,[this].concat(r))),"goLast",function(){e.props.goToEdit()}),p(f(e),"goForward",function(){e.props.goToEdit(e.props.edit.next)}),p(f(e),"goBack",function(){e.props.goToEdit(e.props.edit.previous)}),p(f(e),"revertEdit",function(){e.props.revertEdit(e.props.edit.id)}),e}return e=o,(t=[{key:"render",value:function(){return l.default.createElement("div",{className:"modal-toolbar post-changelog-toolbar"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-xs-12 col-sm-4"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-xs-4"},l.default.createElement(v,{disabled:this.props.disabled,edit:this.props.edit,onClick:this.goBack})),l.default.createElement("div",{className:"col-xs-4"},l.default.createElement(g,{disabled:this.props.disabled,edit:this.props.edit,onClick:this.goForward})),l.default.createElement("div",{className:"col-xs-4"},l.default.createElement(_,{disabled:this.props.disabled,edit:this.props.edit,onClick:this.goLast})))),l.default.createElement("div",{className:"col-xs-12 col-sm-5 xs-margin-top-half post-change-label"},l.default.createElement(w,{edit:this.props.edit})),l.default.createElement(E,{canRevert:this.props.canRevert,disabled:this.props.disabled,onClick:this.revertEdit})))}}])&&i(e.prototype,t),r&&i(e,r),o}();function v(e){return l.default.createElement(n.default,{className:"btn-default btn-block btn-icon btn-sm",disabled:e.disabled||!e.edit.previous,onClick:e.onClick,title:gettext("See previous change")},l.default.createElement("span",{className:"material-icon"},"chevron_left"))}function g(e){return l.default.createElement(n.default,{className:"btn-default btn-block btn-icon btn-sm",disabled:e.disabled||!e.edit.next,onClick:e.onClick,title:gettext("See next change")},l.default.createElement("span",{className:"material-icon"},"chevron_right"))}function _(e){return l.default.createElement(n.default,{className:"btn-default btn-block btn-icon btn-sm",disabled:e.disabled||!e.edit.next,onClick:e.onClick,title:gettext("See previous change")},l.default.createElement("span",{className:"material-icon"},"last_page"))}function E(e){return e.canRevert?l.default.createElement("div",{className:"col-sm-3 hidden-xs"},l.default.createElement(n.default,{className:"btn-default btn-sm btn-block",disabled:e.disabled,onClick:e.onClick,title:gettext("Revert post to state from before this edit.")},gettext("Revert"))):null}function w(e){var t=null,t=e.edit.url.editor?interpolate(y,{url:(0,a.default)(e.edit.url.editor),user:(0,a.default)(e.edit.editor_name)},!0):interpolate(h,{user:(0,a.default)(e.edit.editor_name)},!0),r=interpolate(m,{absolute:(0,a.default)(e.edit.edited_on.format("LLL")),relative:(0,a.default)(e.edit.edited_on.fromNow())},!0),n=interpolate((0,a.default)(gettext("By %(edited_by)s %(edited_on)s.")),{edited_by:t,edited_on:r},!0);return l.default.createElement("p",{dangerouslySetInnerHTML:{__html:n}})}r.default=b},{"../../utils/escape-html":383,"../button":8,react:"react"}],121:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hydrateEdit=function(e){return Object.assign({},e,{edited_on:(0,a.default)(e.edited_on)})};var n,a=(n=e("moment"))&&n.__esModule?n:{default:n}},{moment:"moment"}],122:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.isReady,r=e.posts,n=e.poster;return t?a.default.createElement("ul",{className:"posts-list post-feed ui-ready"},r.map(function(e){return a.default.createElement(o.default,{key:e.id,post:e,poster:n})})):a.default.createElement(l.default,null)};var a=n(e("react")),o=n(e("./post")),l=n(e("./preview"));function n(e){return e&&e.__esModule?e:{default:e}}},{"./post":125,"./preview":131,react:"react"}],123:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return e.post.content?n.default.createElement(l,e):n.default.createElement(u,e)},r.Default=l,r.Invalid=u;var n=o(e("react")),a=o(e("../../misago-markup"));o(e("../../../utils/escape-html"));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){return n.default.createElement("div",{className:"post-body"},n.default.createElement(a.default,{markup:e.post.content}))}function u(e){return n.default.createElement("div",{className:"post-body post-body-invalid"},n.default.createElement("p",{className:"lead"},gettext("This post's contents cannot be displayed.")),n.default.createElement("p",{className:"text-muted"},gettext("This error is caused by invalid post content manipulation.")))}},{"../../../utils/escape-html":383,"../../misago-markup":60,react:"react"}],124:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.post,r=t.category,n=t.thread,a=interpolate(gettext("posted %(posted_on)s"),{posted_on:t.posted_on.format("LL, LT")},!0);return o.default.createElement("div",{className:"post-heading"},o.default.createElement("a",{className:"btn btn-link item-title",href:n.url},n.title),o.default.createElement("a",{className:"btn btn-link post-category",href:r.url.index},r.name),o.default.createElement("a",{href:t.url.index,className:"btn btn-link posted-on",title:a},t.posted_on.fromNow()))};var n,o=(n=e("react"))&&n.__esModule?n:{default:n}},{react:"react"}],125:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.post,r=e.poster||t.poster,n="post";r&&r.rank.css_class&&(n+=" post-"+r.rank.css_class);return a.default.createElement("li",{className:n,id:"post-"+t.id},a.default.createElement("div",{className:"panel panel-default panel-post"},a.default.createElement("div",{className:"panel-body"},a.default.createElement(u.default,{post:t,poster:r}),a.default.createElement(l.default,{post:t}),a.default.createElement(o.default,{post:t}))))};var a=n(e("react")),o=n(e("./body")),l=n(e("./header")),u=n(e("./post-side"));function n(e){return e&&e.__esModule?e:{default:e}}},{"./body":123,"./header":124,"./post-side":128,react:"react"}],126:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.post;return n.default.createElement("div",{className:"post-side post-side-anonymous"},n.default.createElement(o.default,{post:t}),n.default.createElement("div",{className:"media"},n.default.createElement("div",{className:"media-left"},n.default.createElement("span",null,n.default.createElement(a.default,{className:"poster-avatar",size:50}))),n.default.createElement("div",{className:"media-body"},n.default.createElement("div",{className:"media-heading"},n.default.createElement("span",{className:"item-title"},t.poster_name)),n.default.createElement("span",{className:"user-title user-title-anonymous"},gettext("Removed user")))))};var n=l(e("react")),a=l(e("../../../avatar")),o=l(e("./button"));function l(e){return e&&e.__esModule?e:{default:e}}},{"../../../avatar":6,"./button":127,react:"react"}],127:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.post;return a.default.createElement("a",{className:"btn btn-default btn-icon pull-right",href:t.url.index},a.default.createElement("span",{className:"btn-text-left hidden-xs"},gettext("See post")),a.default.createElement("span",{className:"material-icon"},"chevron_right"))};var n,a=(n=e("react"))&&n.__esModule?n:{default:n}},{react:"react"}],128:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.post,r=e.poster;if(r.id)return n.default.createElement(o.default,{post:t,poster:r});return n.default.createElement(a.default,{post:t})};var n=l(e("react")),a=l(e("./anonymous")),o=l(e("./registered"));function l(e){return e&&e.__esModule?e:{default:e}}},{"./anonymous":126,"./registered":129,react:"react"}],129:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.post,r=e.poster;return n.default.createElement("div",{className:"post-side post-side-registered"},n.default.createElement(o.default,{post:t}),n.default.createElement("div",{className:"media"},n.default.createElement("div",{className:"media-left"},n.default.createElement("a",{href:r.url},n.default.createElement(a.default,{className:"poster-avatar",size:50,user:r}))),n.default.createElement("div",{className:"media-body"},n.default.createElement("div",{className:"media-heading"},n.default.createElement("a",{className:"item-title",href:r.url},r.username)),n.default.createElement(l.default,{title:r.title,rank:r.rank}))))};var n=u(e("react")),a=u(e("../../../avatar")),o=u(e("./button")),l=u(e("./user-title"));function u(e){return e&&e.__esModule?e:{default:e}}},{"../../../avatar":6,"./button":127,"./user-title":130,react:"react"}],130:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.rank,r=e.title||t.title||t.name,n="user-title";t.css_class&&(n+=" user-title-"+t.css_class);if(t.is_tab)return a.default.createElement("a",{className:n,href:t.url},r);return a.default.createElement("span",{className:n},r)};var n,a=(n=e("react"))&&n.__esModule?n:{default:n}},{react:"react"}],131:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return n.default.createElement("ul",{className:"posts-list post-feed ui-preview"},n.default.createElement("li",{className:"post"},n.default.createElement("div",{className:"panel panel-default panel-post"},n.default.createElement("div",{className:"panel-body"},n.default.createElement("div",{className:"post-side post-side-anonymous"},n.default.createElement("div",{className:"media"},n.default.createElement("div",{className:"media-left"},n.default.createElement("span",null,n.default.createElement(a.default,{className:"poster-avatar",size:50}))),n.default.createElement("div",{className:"media-body"},n.default.createElement("div",{className:"media-heading"},n.default.createElement("span",{className:"item-title"},n.default.createElement("span",{className:"ui-preview-text",style:{width:o.int(30,200)+"px"}}," "))),n.default.createElement("span",{className:"user-title user-title-anonymous"},n.default.createElement("span",{className:"ui-preview-text",style:{width:o.int(30,200)+"px"}}," "))))),n.default.createElement("div",{className:"post-heading"},n.default.createElement("span",{className:"ui-preview-text",style:{width:o.int(30,200)+"px"}}," ")),n.default.createElement("div",{className:"post-body"},n.default.createElement("article",{className:"misago-markup"},n.default.createElement("p",null,n.default.createElement("span",{className:"ui-preview-text",style:{width:o.int(30,200)+"px"}}," ")," ",n.default.createElement("span",{className:"ui-preview-text",style:{width:o.int(30,200)+"px"}}," ")," ",n.default.createElement("span",{className:"ui-preview-text",style:{width:o.int(30,200)+"px"}}," "))))))))};var n=i(e("react")),a=i(e("../avatar")),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../utils/random"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){return e&&e.__esModule?e:{default:e}}},{"../../utils/random":388,"../avatar":6,react:"react"}],132:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hydrateLike=b,r.ModalDialog=v,r.LikesList=g,r.LikeDetails=_,r.LikeDate=E,r.default=void 0;var u=s(e("react")),n=s(e("moment")),a=s(e("./avatar")),o=s(e("./modal-message")),l=s(e("./modal-loader")),i=s(e("../services/ajax"));function s(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=h(o);return t=l?(e=h(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==f(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,u.default.Component);var e,t,r,n=m(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,e)).state={isReady:!1,error:null,likes:[]},t}return e=a,(t=[{key:"componentDidMount",value:function(){var t=this;i.default.get(this.props.post.api.likes).then(function(e){t.setState({isReady:!0,likes:e.map(b)})},function(e){t.setState({isReady:!0,error:e.detail})})}},{key:"render",value:function(){return this.state.error?u.default.createElement(v,{className:"modal-message"},u.default.createElement(o.default,{message:this.state.error})):this.state.isReady?this.state.likes.length?u.default.createElement(v,{className:"modal-sm",likes:this.state.likes},u.default.createElement(g,{likes:this.state.likes})):u.default.createElement(v,{className:"modal-message"},u.default.createElement(o.default,{message:gettext("No users have liked this post.")})):u.default.createElement(v,{className:"modal-sm"},u.default.createElement(l.default,null))}}])&&d(e.prototype,t),r&&d(e,r),a}();function b(e){return Object.assign({},e,{liked_on:(0,n.default)(e.liked_on)})}function v(e){var t,r,n=e.className,a=e.children,o=e.likes,l=gettext("Post Likes");return o&&(t=o.length,r=ngettext("%(likes)s like","%(likes)s likes",t),l=interpolate(r,{likes:t},!0)),u.default.createElement("div",{className:"modal-dialog "+(n||""),role:"document"},u.default.createElement("div",{className:"modal-content"},u.default.createElement("div",{className:"modal-header"},u.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},u.default.createElement("span",{"aria-hidden":"true"},"×")),u.default.createElement("h4",{className:"modal-title"},l)),a))}function g(e){return u.default.createElement("div",{className:"modal-body modal-post-likers"},u.default.createElement("ul",{className:"media-list"},e.likes.map(function(e){return u.default.createElement(_,c({key:e.id},e))})))}function _(e){if(e.url){var t={id:e.liker_id,avatars:e.avatars};return u.default.createElement("li",{className:"media"},u.default.createElement("div",{className:"media-left"},u.default.createElement("a",{className:"user-avatar",href:e.url},u.default.createElement(a.default,{size:"50",user:t}))),u.default.createElement("div",{className:"media-body"},u.default.createElement("a",{className:"item-title",href:e.url},e.username)," ",u.default.createElement(E,{likedOn:e.liked_on})))}return u.default.createElement("li",{className:"media"},u.default.createElement("div",{className:"media-left"},u.default.createElement("span",{className:"user-avatar"},u.default.createElement(a.default,{size:"50"}))),u.default.createElement("div",{className:"media-body"},u.default.createElement("strong",null,e.username)," ",u.default.createElement(E,{likedOn:e.liked_on})))}function E(e){return u.default.createElement("span",{className:"text-muted",title:e.likedOn.format("LLL")},e.likedOn.fromNow())}r.default=y},{"../services/ajax":365,"./avatar":6,"./modal-loader":61,"./modal-message":62,moment:"moment",react:"react"}],133:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../editor")),u=n(e("../form")),i=n(e("./utils/container")),s=n(e("./utils/loader")),c=n(e("./utils/message")),f=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==b(e)&&"function"!=typeof e)return{default:e};var t=y();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("./utils/attachments")),d=e("./utils/validators"),p=n(e("../../services/ajax")),m=n(e("../../services/posting")),h=n(e("../../services/snackbar"));function y(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return y=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=w(o);return t=l?(e=w(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==b(n)&&"function"!=typeof n?E(r):n}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(a,u.default);var e,t,r,n=_(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),O(E(t=n.call(this,e)),"loadSuccess",function(e){t.setState({isReady:!0,post:e.post,attachments:f.hydrate(e.attachments),protect:e.is_protected,canProtect:e.can_protect})}),O(E(t),"loadError",function(e){t.setState({isErrored:e.detail})}),O(E(t),"onCancel",function(){confirm(gettext("Are you sure you want to discard changes?"))&&m.default.close()}),O(E(t),"onProtect",function(){t.setState({protect:!0})}),O(E(t),"onUnprotect",function(){t.setState({protect:!1})}),O(E(t),"onPostChange",function(e){t.changeValue("post",e.target.value)}),O(E(t),"onAttachmentsChange",function(e){t.setState({attachments:e})}),t.state={isReady:!1,isLoading:!1,isErrored:!1,post:"",attachments:[],protect:!1,canProtect:!1,validators:{post:(0,d.getPostValidators)()},errors:{}},t}return e=a,(t=[{key:"componentDidMount",value:function(){p.default.get(this.props.config).then(this.loadSuccess,this.loadError)}},{key:"clean",value:function(){if(!this.state.post.trim().length)return h.default.error(gettext("You have to enter a message.")),!1;var e=this.validate();return!e.post||(h.default.error(e.post[0]),!1)}},{key:"send",value:function(){return p.default.put(this.props.submit,{post:this.state.post,attachments:f.clean(this.state.attachments),protect:this.state.protect})}},{key:"handleSuccess",value:function(e){h.default.success(gettext("Reply has been edited.")),window.location=e.url.index,this.setState({isLoading:!0})}},{key:"handleError",value:function(e){var t;400===e.status?(t=[].concat(e.non_field_errors||[],e.category||[],e.title||[],e.post||[],e.attachments||[]),h.default.error(t[0])):h.default.apiError(e)}},{key:"render",value:function(){return this.state.isReady?o.default.createElement(i.default,{className:"posting-form"},o.default.createElement("form",{onSubmit:this.handleSubmit,method:"POST"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-md-12"},o.default.createElement(l.default,{attachments:this.state.attachments,canProtect:this.state.canProtect,loading:this.state.isLoading,onAttachmentsChange:this.onAttachmentsChange,onCancel:this.onCancel,onChange:this.onPostChange,onProtect:this.onProtect,onUnprotect:this.onUnprotect,protect:this.state.protect,submitLabel:gettext("Edit reply"),value:this.state.post}))))):this.state.isErrored?o.default.createElement(c.default,{message:this.state.isErrored}):o.default.createElement(s.default,null)}}])&&v(e.prototype,t),r&&v(e,r),a}();r.default=a},{"../../services/ajax":365,"../../services/posting":375,"../../services/snackbar":376,"../editor":52,"../form":56,"./utils/attachments":138,"./utils/container":139,"./utils/loader":140,"./utils/message":141,"./utils/validators":144,react:"react"}],134:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return"START"===e.mode?n.default.createElement(a.default,e):"START_PRIVATE"===e.mode?n.default.createElement(o.default,e):"REPLY"===e.mode?n.default.createElement(l.default,e):"EDIT"===e.mode?n.default.createElement(u.default,e):null};var n=i(e("react")),a=i(e("./start")),o=i(e("./start-private")),l=i(e("./reply")),u=i(e("./edit"));function i(e){return e&&e.__esModule?e:{default:e}}},{"./edit":133,"./reply":135,"./start":137,"./start-private":136,react:"react"}],135:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../editor")),u=n(e("../form")),i=n(e("./utils/container")),s=n(e("./utils/loader")),c=n(e("./utils/message")),f=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==b(e)&&"function"!=typeof e)return{default:e};var t=y();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("./utils/attachments")),d=e("./utils/validators"),p=n(e("../../services/ajax")),m=n(e("../../services/posting")),h=n(e("../../services/snackbar"));function y(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return y=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=w(o);return t=l?(e=w(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==b(n)&&"function"!=typeof n?E(r):n}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(a,u.default);var e,t,r,n=_(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),O(E(t=n.call(this,e)),"loadSuccess",function(e){t.setState({isReady:!0,post:e.post?'[quote="@'+e.poster+'"]\n'+e.post+"\n[/quote]":""})}),O(E(t),"loadError",function(e){t.setState({isErrored:e.detail})}),O(E(t),"appendData",function(e){var r=e.post?'[quote="@'+e.poster+'"]\n'+e.post+"\n[/quote]\n\n":"";t.setState(function(e,t){return 0<e.post.length?{post:e.post+"\n\n"+r}:{post:r}})}),O(E(t),"onCancel",function(){confirm(gettext("Are you sure you want to discard your reply?"))&&m.default.close()}),O(E(t),"onPostChange",function(e){t.changeValue("post",e.target.value)}),O(E(t),"onAttachmentsChange",function(e){t.setState({attachments:e})}),t.state={isReady:!1,isLoading:!1,isErrored:!1,post:"",attachments:[],validators:{post:(0,d.getPostValidators)()},errors:{}},t}return e=a,(t=[{key:"componentDidMount",value:function(){p.default.get(this.props.config,this.props.context||null).then(this.loadSuccess,this.loadError)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.context,r=e.context;t&&r&&t.reply===r.reply||p.default.get(e.config,e.context||null).then(this.appendData,h.default.apiError)}},{key:"clean",value:function(){if(!this.state.post.trim().length)return h.default.error(gettext("You have to enter a message.")),!1;var e=this.validate();return!e.post||(h.default.error(e.post[0]),!1)}},{key:"send",value:function(){return p.default.post(this.props.submit,{post:this.state.post,attachments:f.clean(this.state.attachments)})}},{key:"handleSuccess",value:function(e){h.default.success(gettext("Your reply has been posted.")),window.location=e.url.index,this.setState({isLoading:!0})}},{key:"handleError",value:function(e){var t;400===e.status?(t=[].concat(e.non_field_errors||[],e.post||[],e.attachments||[]),h.default.error(t[0])):h.default.apiError(e)}},{key:"render",value:function(){return this.state.isReady?o.default.createElement(i.default,{className:"posting-form"},o.default.createElement("form",{onSubmit:this.handleSubmit,method:"POST"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-md-12"},o.default.createElement(l.default,{attachments:this.state.attachments,loading:this.state.isLoading,onAttachmentsChange:this.onAttachmentsChange,onCancel:this.onCancel,onChange:this.onPostChange,submitLabel:gettext("Post reply"),value:this.state.post}))))):this.state.isErrored?o.default.createElement(c.default,{message:this.state.isErrored}):o.default.createElement(s.default,null)}}])&&v(e.prototype,t),r&&v(e,r),a}();r.default=a},{"../../services/ajax":365,"../../services/posting":375,"../../services/snackbar":376,"../editor":52,"../form":56,"./utils/attachments":138,"./utils/container":139,"./utils/loader":140,"./utils/message":141,"./utils/validators":144,react:"react"}],136:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../editor")),u=n(e("../form")),i=n(e("./utils/container")),s=(n(e("./utils/message")),function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==y(e)&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("./utils/attachments"))),c=n(e("./utils/usernames")),f=e("./utils/validators"),d=n(e("../../services/ajax")),p=n(e("../../services/posting")),m=n(e("../../services/snackbar"));function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=E(o);return t=l?(e=E(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==y(n)&&"function"!=typeof n?_(r):n}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(a,u.default);var e,t,r,n=g(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),w(_(t=n.call(this,e)),"onCancel",function(){confirm(gettext("Are you sure you want to discard private thread?"))&&p.default.close()}),w(_(t),"onToChange",function(e){t.changeValue("to",e.target.value)}),w(_(t),"onTitleChange",function(e){t.changeValue("title",e.target.value)}),w(_(t),"onPostChange",function(e){t.changeValue("post",e.target.value)}),w(_(t),"onAttachmentsChange",function(e){t.setState({attachments:e})});var r=(e.to||[]).map(function(e){return e.username}).join(", ");return t.state={isLoading:!1,to:r,title:"",post:"",attachments:[],validators:{title:(0,f.getTitleValidators)(),post:(0,f.getPostValidators)()},errors:{}},t}return e=a,(t=[{key:"clean",value:function(){if(!(0,c.default)(this.state.to).length)return m.default.error(gettext("You have to enter at least one recipient.")),!1;if(!this.state.title.trim().length)return m.default.error(gettext("You have to enter thread title.")),!1;if(!this.state.post.trim().length)return m.default.error(gettext("You have to enter a message.")),!1;var e=this.validate();return e.title?(m.default.error(e.title[0]),!1):!e.post||(m.default.error(e.post[0]),!1)}},{key:"send",value:function(){return d.default.post(this.props.submit,{to:(0,c.default)(this.state.to),title:this.state.title,post:this.state.post,attachments:s.clean(this.state.attachments)})}},{key:"handleSuccess",value:function(e){m.default.success(gettext("Your thread has been posted.")),window.location=e.url,this.setState({isLoading:!0})}},{key:"handleError",value:function(e){var t;400===e.status?(t=[].concat(e.non_field_errors||[],e.to||[],e.title||[],e.post||[],e.attachments||[]),m.default.error(t[0])):m.default.apiError(e)}},{key:"render",value:function(){return o.default.createElement(i.default,{className:"posting-form",withFirstRow:!0},o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"row first-row"},o.default.createElement("div",{className:"col-xs-12"},o.default.createElement("input",{className:"form-control",disabled:this.state.isLoading,onChange:this.onToChange,placeholder:gettext("Comma separated list of user names, eg.: Danny, Lisa"),type:"text",value:this.state.to}))),o.default.createElement("div",{className:"row first-row"},o.default.createElement("div",{className:"col-xs-12"},o.default.createElement("input",{className:"form-control",disabled:this.state.isLoading,onChange:this.onTitleChange,placeholder:gettext("Thread title"),type:"text",value:this.state.title}))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-xs-12"},o.default.createElement(l.default,{attachments:this.state.attachments,loading:this.state.isLoading,onAttachmentsChange:this.onAttachmentsChange,onCancel:this.onCancel,onChange:this.onPostChange,submitLabel:gettext("Post thread"),value:this.state.post})))))}}])&&b(e.prototype,t),r&&b(e,r),a}();r.default=a},{"../../services/ajax":365,"../../services/posting":375,"../../services/snackbar":376,"../editor":52,"../form":56,"./utils/attachments":138,"./utils/container":139,"./utils/message":141,"./utils/usernames":143,"./utils/validators":144,react:"react"}],137:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../category-select")),u=n(e("../editor")),i=n(e("../form")),s=n(e("./utils/container")),c=n(e("./utils/loader")),f=n(e("./utils/message")),d=n(e("./utils/options")),p=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==g(e)&&"function"!=typeof e)return{default:e};var t=v();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("./utils/attachments")),m=e("./utils/validators"),h=n(e("../../services/ajax")),y=n(e("../../services/posting")),b=n(e("../../services/snackbar"));function v(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return v=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=P(o);return t=l?(e=P(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==g(n)&&"function"!=typeof n?O(r):n}}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(a,i.default);var e,t,r,n=w(a);function a(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),k(O(o=n.call(this,e)),"loadSuccess",function(e){var t=null,r=!1,n=null,a=e.map(function(e){return!1===e.post||t&&e.id!=o.state.category||(t=e.id,n=e.post),e.post&&(e.post.close||e.post.hide||e.post.pin)&&(r=!0),Object.assign(e,{disabled:!1===e.post,label:e.name,value:e.id})});o.setState({isReady:!0,showOptions:r,categories:a,category:t,categoryOptions:n})}),k(O(o),"loadError",function(e){o.setState({isErrored:e.detail})}),k(O(o),"onCancel",function(){confirm(gettext("Are you sure you want to discard thread?"))&&y.default.close()}),k(O(o),"onTitleChange",function(e){o.changeValue("title",e.target.value)}),k(O(o),"onCategoryChange",function(t){var e=o.state.categories.find(function(e){return t.target.value==e.value}),r=o.state.pin;e.post.pin&&e.post.pin<r&&(r=e.post.pin),o.setState({category:e.id,categoryOptions:e.post,pin:r})}),k(O(o),"onPostChange",function(e){o.changeValue("post",e.target.value)}),k(O(o),"onAttachmentsChange",function(e){o.setState({attachments:e})}),k(O(o),"onClose",function(){o.changeValue("close",!0)}),k(O(o),"onOpen",function(){o.changeValue("close",!1)}),k(O(o),"onPinGlobally",function(){o.changeValue("pin",2)}),k(O(o),"onPinLocally",function(){o.changeValue("pin",1)}),k(O(o),"onUnpin",function(){o.changeValue("pin",0)}),k(O(o),"onHide",function(){o.changeValue("hide",!0)}),k(O(o),"onUnhide",function(){o.changeValue("hide",!1)}),o.state={isReady:!1,isLoading:!1,isErrored:!1,showOptions:!1,categoryOptions:null,title:"",category:e.category||null,categories:[],post:"",attachments:[],close:!1,hide:!1,pin:0,validators:{title:(0,m.getTitleValidators)(),post:(0,m.getPostValidators)()},errors:{}},o}return e=a,(t=[{key:"componentDidMount",value:function(){h.default.get(this.props.config).then(this.loadSuccess,this.loadError)}},{key:"clean",value:function(){if(!this.state.title.trim().length)return b.default.error(gettext("You have to enter thread title.")),!1;if(!this.state.post.trim().length)return b.default.error(gettext("You have to enter a message.")),!1;var e=this.validate();return e.title?(b.default.error(e.title[0]),!1):!e.post||(b.default.error(e.post[0]),!1)}},{key:"send",value:function(){return h.default.post(this.props.submit,{title:this.state.title,category:this.state.category,post:this.state.post,attachments:p.clean(this.state.attachments),close:this.state.close,hide:this.state.hide,pin:this.state.pin})}},{key:"handleSuccess",value:function(e){b.default.success(gettext("Your thread has been posted.")),window.location=e.url,this.setState({isLoading:!0})}},{key:"handleError",value:function(e){var t;400===e.status?(t=[].concat(e.non_field_errors||[],e.category||[],e.title||[],e.post||[],e.attachments||[]),b.default.error(t[0])):b.default.apiError(e)}},{key:"render",value:function(){if(this.state.isErrored)return o.default.createElement(f.default,{message:this.state.isErrored});if(!this.state.isReady)return o.default.createElement(c.default,null);var e=0;this.state.categoryOptions.close&&(e+=1),this.state.categoryOptions.hide&&(e+=1),this.state.categoryOptions.pin&&(e+=1);var t=null,t=1===e?"col-sm-6":"col-sm-8";return t+=3===e?" col-md-6":e?" col-md-7":" col-md-9",o.default.createElement(s.default,{className:"posting-form",withFirstRow:!0},o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"row first-row"},o.default.createElement("div",{className:t},o.default.createElement("input",{className:"form-control",disabled:this.state.isLoading,onChange:this.onTitleChange,placeholder:gettext("Thread title"),type:"text",value:this.state.title})),o.default.createElement("div",{className:"col-xs-12 col-sm-4 col-md-3 xs-margin-top"},o.default.createElement(l.default,{choices:this.state.categories,disabled:this.state.isLoading,onChange:this.onCategoryChange,value:this.state.category})),o.default.createElement(d.default,{close:this.state.close,columns:e,disabled:this.state.isLoading,hide:this.state.hide,onClose:this.onClose,onHide:this.onHide,onOpen:this.onOpen,onPinGlobally:this.onPinGlobally,onPinLocally:this.onPinLocally,onUnhide:this.onUnhide,onUnpin:this.onUnpin,options:this.state.categoryOptions,pin:this.state.pin,showOptions:this.state.showOptions})),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-md-12"},o.default.createElement(u.default,{attachments:this.state.attachments,loading:this.state.isLoading,onAttachmentsChange:this.onAttachmentsChange,onCancel:this.onCancel,onChange:this.onPostChange,submitLabel:gettext("Post thread"),value:this.state.post})))))}}])&&_(e.prototype,t),r&&_(e,r),a}();r.default=a},{"../../services/ajax":365,"../../services/posting":375,"../../services/snackbar":376,"../category-select":21,"../editor":52,"../form":56,"./utils/attachments":138,"./utils/container":139,"./utils/loader":140,"./utils/message":141,"./utils/options":142,"./utils/validators":144,react:"react"}],138:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.clean=function(e){return e.filter(function(e){return e.id&&!e.isRemoved}).map(function(e){return e.id})},r.hydrate=function(e){return e.map(function(e){return Object.assign({},e,{uploaded_on:(0,a.default)(e.uploaded_on)})})};var n,a=(n=e("moment"))&&n.__esModule?n:{default:n}},{moment:"moment"}],139:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return a.default.createElement("div",{className:e.className},a.default.createElement("div",{className:"container"},e.children))};var n,a=(n=e("react"))&&n.__esModule?n:{default:n}},{react:"react"}],140:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement(a.default,{className:"posting-loader"},n.default.createElement(o.default,null))};var n=l(e("react")),a=l(e("./container")),o=l(e("../../loader"));function l(e){return e&&e.__esModule?e:{default:e}}},{"../../loader":58,"./container":139,react:"react"}],141:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement(a.default,{className:"posting-message"},n.default.createElement("div",{className:"message-body"},n.default.createElement("p",null,n.default.createElement("span",{className:"material-icon"},"error_outline"),e.message),n.default.createElement("button",{type:"button",className:"btn btn-default",onClick:o.default.close},gettext("Dismiss"))))};var n=l(e("react")),a=l(e("./container")),o=l(e("../../../services/posting"));function l(e){return e&&e.__esModule?e:{default:e}}},{"../../../services/posting":375,"./container":139,react:"react"}],142:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(!e.showOptions)return null;var t=e.columns,r="col-xs-12 xs-margin-top";r+=1===t?" col-sm-2":" sm-margin-top";r+=3===t?" col-md-3":" col-md-2";r+=" posting-options";var n="col-xs-"+12/t,a="btn-text";a+=3===t?" visible-sm-inline-block":2===t?" hidden-md hidden-lg":" hidden-sm";return o.default.createElement("div",{className:r},o.default.createElement("div",{className:"row"},o.default.createElement(i,{className:n,disabled:e.disabled,onPinGlobally:e.onPinGlobally,onPinLocally:e.onPinLocally,onUnpin:e.onUnpin,pin:e.pin,show:e.options.pin,textClassName:a}),o.default.createElement(u,{className:n,disabled:e.disabled,hide:e.hide,onHide:e.onHide,onUnhide:e.onUnhide,show:e.options.hide,textClassName:a}),o.default.createElement(l,{className:n,close:e.close,disabled:e.disabled,onClose:e.onClose,onOpen:e.onOpen,show:e.options.close,textClassName:a})))},r.CloseOptions=l,r.HideOptions=u,r.PinOptions=i;var n,o=(n=e("react"))&&n.__esModule?n:{default:n};function l(e){if(!e.show)return null;var t=e.close?gettext("Closed"):gettext("Open");return o.default.createElement("div",{className:e.className},o.default.createElement("button",{className:"btn btn-default btn-block",disabled:e.disabled,onClick:e.close?e.onOpen:e.onClose,title:t,type:"button"},o.default.createElement("span",{className:"material-icon"},e.close?"lock":"lock_outline"),o.default.createElement("span",{className:e.textClassName},t)))}function u(e){if(!e.show)return null;var t=e.hide?gettext("Hidden"):gettext("Not hidden");return o.default.createElement("div",{className:e.className},o.default.createElement("button",{className:"btn btn-default btn-block",disabled:e.disabled,onClick:e.hide?e.onUnhide:e.onHide,title:t,type:"button"},o.default.createElement("span",{className:"material-icon"},e.hide?"visibility_off":"visibility"),o.default.createElement("span",{className:e.textClassName},t)))}function i(e){if(!e.show)return null;var t=null,r=null,n=null;switch(e.pin){case 0:t="radio_button_unchecked",r=e.onPinLocally,n=gettext("Unpinned");break;case 1:t="bookmark_outline",r=e.onPinGlobally,n=gettext("Pinned locally"),r=2==e.show?e.onPinGlobally:e.onUnpin;break;case 2:t="bookmark",r=e.onUnpin,n=gettext("Pinned globally")}return o.default.createElement("div",{className:e.className},o.default.createElement("button",{className:"btn btn-default btn-block",disabled:e.disabled,onClick:r,title:n,type:"button"},o.default.createElement("span",{className:"material-icon"},t),o.default.createElement("span",{className:e.textClassName},n)))}},{react:"react"}],143:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var r=e.split(",").map(function(e){return e.trim().toLowerCase()}).filter(function(e){return 0<e.length});return r.filter(function(e,t){return r.indexOf(e)==t})}},{}],144:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTitleValidators=function(){return[l(),u()]},r.getPostValidators=function(){return o.default.get("SETTINGS").post_length_max?[i(),s()]:[i()]},r.getTitleLengthMin=l,r.getTitleLengthMax=u,r.validatePostLengthMin=i,r.validatePostLengthMax=s;var n,a=e("../../../utils/validators"),o=(n=e("../../.."))&&n.__esModule?n:{default:n};function l(){return(0,a.minLength)(o.default.get("SETTINGS").thread_title_length_min,function(e,t){var r=ngettext("Thread title should be at least %(limit_value)s character long (it has %(show_value)s).","Thread title should be at least %(limit_value)s characters long (it has %(show_value)s).",e);return interpolate(r,{limit_value:e,show_value:t},!0)})}function u(){return(0,a.maxLength)(o.default.get("SETTINGS").thread_title_length_max,function(e,t){var r=ngettext("Thread title cannot be longer than %(limit_value)s character (it has %(show_value)s).","Thread title cannot be longer than %(limit_value)s characters (it has %(show_value)s).",e);return interpolate(r,{limit_value:e,show_value:t},!0)})}function i(){return(0,a.minLength)(o.default.get("SETTINGS").post_length_min,function(e,t){var r=ngettext("Posted message should be at least %(limit_value)s character long (it has %(show_value)s).","Posted message should be at least %(limit_value)s characters long (it has %(show_value)s).",e);return interpolate(r,{limit_value:e,show_value:t},!0)})}function s(){return(0,a.maxLength)(o.default.get("SETTINGS").post_length_max||1e6,function(e,t){var r=ngettext("Posted message cannot be longer than %(limit_value)s character (it has %(show_value)s).","Posted message cannot be longer than %(limit_value)s characters (it has %(show_value)s).",e);return interpolate(r,{limit_value:e,show_value:t},!0)})}},{"../../..":302,"../../../utils/validators":393}],145:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return E(e.post.acl)?n.default.createElement("li",{className:"event-controls"},n.default.createElement(w,e),n.default.createElement(O,e),n.default.createElement(P,e)):null},r.isVisible=E,r.Delete=r.Unhide=r.Hide=void 0;var n=a(e("react")),l=a(e("moment")),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../reducers/post")),i=a(e("../../../services/ajax")),s=a(e("../../../services/snackbar")),c=a(e("../../../services/store"));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function a(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=g(o);return t=l?(e=g(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==d(n)&&"function"!=typeof n?v(r):n}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){return e.can_hide}var w=function(){h(o,n.default.Component);var a=b(o);function o(){var t;p(this,o);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return _(v(t=a.call.apply(a,[this].concat(r))),"onClick",function(){c.default.dispatch(u.patch(t.props.post,{is_hidden:!0,hidden_on:(0,l.default)(),hidden_by_name:t.props.user.username,url:Object.assign(t.props.post.url,{hidden_by:t.props.user.url})}));i.default.patch(t.props.post.api.index,[{op:"replace",path:"is-hidden",value:!0}]).then(function(e){c.default.dispatch(u.patch(t.props.post,e))},function(e){400===e.status?s.default.error(e.detail[0]):s.default.apiError(e),c.default.dispatch(u.patch(t.props.post,{is_hidden:!1}))})}),t}return m(o,[{key:"render",value:function(){return this.props.post.is_hidden?null:n.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Hide"))}}]),o}();r.Hide=w;var O=function(){h(o,n.default.Component);var a=b(o);function o(){var t;p(this,o);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return _(v(t=a.call.apply(a,[this].concat(r))),"onClick",function(){c.default.dispatch(u.patch(t.props.post,{is_hidden:!1}));i.default.patch(t.props.post.api.index,[{op:"replace",path:"is-hidden",value:!1}]).then(function(e){c.default.dispatch(u.patch(t.props.post,e))},function(e){400===e.status?s.default.error(e.detail[0]):s.default.apiError(e),c.default.dispatch(u.patch(t.props.post,{is_hidden:!0}))})}),t}return m(o,[{key:"render",value:function(){return this.props.post.is_hidden?n.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Unhide")):null}}]),o}();r.Unhide=O;var P=function(){h(o,n.default.Component);var a=b(o);function o(){var t;p(this,o);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return _(v(t=a.call.apply(a,[this].concat(r))),"onClick",function(){confirm(gettext("Are you sure you wish to delete this event? This action is not reversible!"))&&t.delete()}),_(v(t),"delete",function(){c.default.dispatch(u.patch(t.props.post,{isDeleted:!0})),i.default.delete(t.props.post.api.index).then(function(){s.default.success(gettext("Event has been deleted."))},function(e){400===e.status?s.default.error(e.detail[0]):s.default.apiError(e),c.default.dispatch(u.patch(t.props.post,{isDeleted:!1}))})}),t}return m(o,[{key:"render",value:function(){return n.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Delete"))}}]),o}();r.Delete=P},{"../../../reducers/post":353,"../../../services/ajax":365,"../../../services/snackbar":376,"../../../services/store":377,moment:"moment",react:"react"}],146:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return a.default.createElement("div",{className:"post-avatar"},a.default.createElement("span",{className:"material-icon"},o[e.post.event_type]))};var n,a=(n=e("react"))&&n.__esModule?n:{default:n};var o={changed_title:"edit",pinned_globally:"bookmark",pinned_locally:"bookmark_border",unpinned:"panorama_fish_eye",moved:"arrow_forward",merged:"call_merge",approved:"done",opened:"lock_open",closed:"lock_outline",unhid:"visibility",hid:"visibility_off",changed_owner:"grade",tookover:"grade",added_participant:"person_add",owner_left:"person_outline",participant_left:"person_outline",removed_participant:"remove_circle_outline"}},{react:"react"}],147:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t="event";e.post.isDeleted?t="hide":e.post.is_hidden&&(t="event post-hidden");return n.default.createElement("li",{id:"post-"+e.post.id,className:t},n.default.createElement(u.default,{post:e.post}),n.default.createElement("div",{className:"row"},n.default.createElement("div",{className:"col-xs-2 col-sm-3 text-right"},n.default.createElement(a.default,e)),n.default.createElement("div",{className:"col-xs-10 col-sm-9 text-left"},n.default.createElement(i.default,{post:e.post},n.default.createElement(l.default,e),n.default.createElement(o.default,e)))))};var n=s(e("react")),a=s(e("./icon")),o=s(e("./info")),l=s(e("./message")),u=s(e("./unread-label")),i=s(e("../waypoint"));function s(e){return e&&e.__esModule?e:{default:e}}},{"../waypoint":173,"./icon":146,"./info":148,"./message":149,"./unread-label":150,react:"react"}],148:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return a.default.createElement("ul",{className:"list-inline event-info"},a.default.createElement(f,e),a.default.createElement(d,e),a.default.createElement(n.default,e))},r.Hidden=f,r.Poster=d;var a=l(e("react")),o=l(e("../../../utils/escape-html")),n=l(e("./controls"));function l(e){return e&&e.__esModule?e:{default:e}}var u='<abbr title="%(absolute)s">%(relative)s</abbr>',i='<a href="%(url)s" title="%(absolute)s">%(relative)s</a>',s='<span class="item-title">%(user)s</span>',c='<a href="%(url)s" class="item-title">%(user)s</a>';function f(e){if(e.post.is_hidden){var t=null,t=e.post.url.hidden_by?interpolate(c,{url:(0,o.default)(e.post.url.hidden_by),user:(0,o.default)(e.post.hidden_by_name)},!0):interpolate(s,{user:(0,o.default)(e.post.hidden_by_name)},!0),r=interpolate(u,{absolute:(0,o.default)(e.post.hidden_on.format("LLL")),relative:(0,o.default)(e.post.hidden_on.fromNow())},!0),n=interpolate((0,o.default)(gettext("Hidden by %(event_by)s %(event_on)s.")),{event_by:t,event_on:r},!0);return a.default.createElement("li",{className:"event-hidden-message",dangerouslySetInnerHTML:{__html:n}})}return null}function d(e){var t=null,t=e.post.poster?interpolate(c,{url:(0,o.default)(e.post.poster.url),user:(0,o.default)(e.post.poster_name)},!0):interpolate(s,{user:(0,o.default)(e.post.poster_name)},!0),r=interpolate(i,{url:(0,o.default)(e.post.url.index),absolute:(0,o.default)(e.post.posted_on.format("LLL")),relative:(0,o.default)(e.post.posted_on.fromNow())},!0),n=interpolate((0,o.default)(gettext("By %(event_by)s %(event_on)s.")),{event_by:t,event_on:r},!0);return a.default.createElement("li",{className:"event-posters",dangerouslySetInnerHTML:{__html:n}})}},{"../../../utils/escape-html":383,"./controls":145,react:"react"}],149:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return l[e.post.event_type]?a.default.createElement("p",{className:"event-message"},l[e.post.event_type]):"changed_title"===e.post.event_type?a.default.createElement(s,e):"moved"===e.post.event_type?a.default.createElement(c,e):"merged"===e.post.event_type?a.default.createElement(f,e):"changed_owner"===e.post.event_type?a.default.createElement(d,e):"added_participant"===e.post.event_type?a.default.createElement(p,e):"removed_participant"===e.post.event_type?a.default.createElement(m,e):null},r.ChangedTitle=s,r.Moved=c,r.Merged=f,r.ChangedOwner=d,r.AddedParticipant=p,r.RemovedParticipant=m;var a=n(e("react")),o=n(e("../../../utils/escape-html"));function n(e){return e&&e.__esModule?e:{default:e}}var l={pinned_globally:gettext("Thread has been pinned globally."),pinned_locally:gettext("Thread has been pinned locally."),unpinned:gettext("Thread has been unpinned."),approved:gettext("Thread has been approved."),opened:gettext("Thread has been opened."),closed:gettext("Thread has been closed."),unhid:gettext("Thread has been revealed."),hid:gettext("Thread has been made hidden."),tookover:gettext("Took thread over."),owner_left:gettext("Owner has left thread. This thread is now closed."),participant_left:gettext("Participant has left thread.")},u='<a href="%(url)s" class="item-title">%(name)s</a>',i='<span class="item-title">%(name)s</span>';function s(e){var t=(0,o.default)(gettext("Thread title has been changed from %(old_title)s.")),r=interpolate(i,{name:(0,o.default)(e.post.event_context.old_title)},!0),n=interpolate(t,{old_title:r},!0);return a.default.createElement("p",{className:"event-message",dangerouslySetInnerHTML:{__html:n}})}function c(e){var t=(0,o.default)(gettext("Thread has been moved from %(from_category)s.")),r=interpolate(u,{url:(0,o.default)(e.post.event_context.from_category.url),name:(0,o.default)(e.post.event_context.from_category.name)},!0),n=interpolate(t,{from_category:r},!0);return a.default.createElement("p",{className:"event-message",dangerouslySetInnerHTML:{__html:n}})}function f(e){var t=(0,o.default)(gettext("The %(merged_thread)s thread has been merged into this thread.")),r=interpolate(i,{name:(0,o.default)(e.post.event_context.merged_thread)},!0),n=interpolate(t,{merged_thread:r},!0);return a.default.createElement("p",{className:"event-message",dangerouslySetInnerHTML:{__html:n}})}function d(e){var t=(0,o.default)(gettext("Changed thread owner to %(user)s.")),r=interpolate(u,{url:(0,o.default)(e.post.event_context.user.url),name:(0,o.default)(e.post.event_context.user.username)},!0),n=interpolate(t,{user:r},!0);return a.default.createElement("p",{className:"event-message",dangerouslySetInnerHTML:{__html:n}})}function p(e){var t=(0,o.default)(gettext("Added %(user)s to thread.")),r=interpolate(u,{url:(0,o.default)(e.post.event_context.user.url),name:(0,o.default)(e.post.event_context.user.username)},!0),n=interpolate(t,{user:r},!0);return a.default.createElement("p",{className:"event-message",dangerouslySetInnerHTML:{__html:n}})}function m(e){var t=(0,o.default)(gettext("Removed %(user)s from thread.")),r=interpolate(u,{url:(0,o.default)(e.post.event_context.user.url),name:(0,o.default)(e.post.event_context.user.username)},!0),n=interpolate(t,{user:r},!0);return a.default.createElement("p",{className:"event-message",dangerouslySetInnerHTML:{__html:n}})}},{"../../../utils/escape-html":383,react:"react"}],150:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return e.post.is_read?null:a.default.createElement("div",{className:"row"},a.default.createElement("div",{className:"col-xs-10 col-xs-offset-2 col-sm-9 col-sm-offset-3 text-left"},a.default.createElement("div",{className:"event-label"},a.default.createElement("span",{className:"label label-unread"},gettext("New event")))))};var n,a=(n=e("react"))&&n.__esModule?n:{default:n}},{react:"react"}],151:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return t.posts.isLoaded?n.default.createElement("ul",{className:"posts-list ui-ready"},t.posts.results.map(function(e){return n.default.createElement(s,i({key:e.id,post:e},t))})):n.default.createElement("ul",{className:"posts-list ui-preview"},n.default.createElement(l.default,null))},r.ListItem=s;var n=u(e("react")),a=u(e("./event")),o=u(e("./post")),l=u(e("./post/preview"));function u(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e){return e.post.is_event?n.default.createElement(a.default,e):n.default.createElement(o.default,e)}},{"./event":147,"./post":163,"./post/preview":171,react:"react"}],152:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return a.default.createElement("div",{className:"col-xs-12 col-md-6"},a.default.createElement(c,e),a.default.createElement("div",{className:"post-attachment"},a.default.createElement("a",{href:e.attachment.url.index,className:"attachment-name item-title"},e.attachment.filename),a.default.createElement(p,e)))},r.AttachmentPreview=c,r.AttachmentIcon=f,r.AttachmentThumbnail=d,r.AttachmentDetails=p;var a=n(e("react")),o=(n(e("../../../..")),n(e("../../../../utils/escape-html"))),l=n(e("../../../../utils/file-size"));function n(e){return e&&e.__esModule?e:{default:e}}var u='<abbr title="%(absolute)s">%(relative)s</abbr>',i='<span class="item-title">%(user)s</span>',s='<a href="%(url)s" class="item-title">%(user)s</a>';function c(e){return e.attachment.is_image?a.default.createElement("div",{className:"post-attachment-preview"},a.default.createElement(d,e)):a.default.createElement("div",{className:"post-attachment-preview"},a.default.createElement(f,e))}function f(e){return a.default.createElement("a",{href:e.attachment.url.index,className:"material-icon"},"insert_drive_file")}function d(e){var t=e.attachment.url.thumb||e.attachment.url.index;return a.default.createElement("a",{className:"post-thumbnail",href:e.attachment.url.index,style:{backgroundImage:'url("'+(0,o.default)(t)+'")'}})}function p(e){var t=null,t=e.attachment.url.uploader?interpolate(s,{url:(0,o.default)(e.attachment.url.uploader),user:(0,o.default)(e.attachment.uploader_name)},!0):interpolate(i,{user:(0,o.default)(e.attachment.uploader_name)},!0),r=interpolate(u,{absolute:(0,o.default)(e.attachment.uploaded_on.format("LLL")),relative:(0,o.default)(e.attachment.uploaded_on.fromNow())},!0),n=interpolate((0,o.default)(gettext("%(filetype)s, %(size)s, uploaded by %(uploader)s %(uploaded_on)s.")),{filetype:e.attachment.filetype,size:(0,l.default)(e.attachment.size),uploader:t,uploaded_on:r},!0);return a.default.createElement("p",{className:"post-attachment-description",dangerouslySetInnerHTML:{__html:n}})}},{"../../../..":302,"../../../../utils/escape-html":383,"../../../../utils/file-size":384,react:"react"}],153:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return u(e.post)?n.default.createElement("div",{className:"post-attachments"},(0,a.default)(e.post.attachments,2).map(function(e){var t=e.map(function(e){return e?e.id:0}).join("_");return n.default.createElement(i,{key:t,row:e})})):null},r.isVisible=u,r.Row=i;var n=l(e("react")),a=l(e("../../../../utils/batch")),o=l(e("./attachment"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return(!e.is_hidden||e.acl.can_see_hidden)&&e.attachments}function i(e){return n.default.createElement("div",{className:"row"},e.row.map(function(e){return n.default.createElement(o.default,{attachment:e,key:e?e.id:0})}))}},{"../../../../utils/batch":380,"./attachment":152,react:"react"}],154:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return e.post.is_hidden&&!e.post.acl.can_see_hidden?a.default.createElement(d,e):e.post.content?a.default.createElement(f,e):a.default.createElement(p,e)},r.Default=f,r.Hidden=d,r.Invalid=p;var a=u(e("react")),o=u(e("../waypoint")),n=u(e("../../misago-markup")),l=u(e("../../../utils/escape-html"));function u(e){return e&&e.__esModule?e:{default:e}}var i='<a href="%(url)s" class="item-title">%(user)s</a>',s='<span class="item-title">%(user)s</span>',c='<abbr class="last-title" title="%(absolute)s">%(relative)s</abbr>';function f(e){return a.default.createElement(o.default,{className:"post-body",post:e.post},a.default.createElement(n.default,{markup:e.post.content}))}function d(e){var t=null,t=e.post.hidden_by?interpolate(i,{url:(0,l.default)(e.post.url.hidden_by),user:(0,l.default)(e.post.hidden_by_name)},!0):interpolate(s,{user:(0,l.default)(e.post.hidden_by_name)},!0),r=interpolate(c,{absolute:(0,l.default)(e.post.hidden_on.format("LLL")),relative:(0,l.default)(e.post.hidden_on.fromNow())},!0),n=interpolate((0,l.default)(gettext("Hidden by %(hidden_by)s %(hidden_on)s.")),{hidden_by:t,hidden_on:r},!0);return a.default.createElement(o.default,{className:"post-body post-body-hidden",post:e.post},a.default.createElement("p",{className:"lead"},gettext("This post is hidden. You cannot see its contents.")),a.default.createElement("p",{className:"text-muted",dangerouslySetInnerHTML:{__html:n}}))}function p(e){return a.default.createElement(o.default,{className:"post-body post-body-invalid",post:e.post},a.default.createElement("p",{className:"lead"},gettext("This post's contents cannot be displayed.")),a.default.createElement("p",{className:"text-muted"},gettext("This error is caused by invalid post content manipulation.")))}},{"../../../utils/escape-html":383,"../../misago-markup":60,"../waypoint":173,react:"react"}],155:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.approve=function(e){s.default.dispatch(i.patch(e.post,{is_unapproved:!1}));var t={is_unapproved:e.post.is_unapproved};p(e,[{op:"replace",path:"is-unapproved",value:!1}],t)},r.protect=function(e){s.default.dispatch(i.patch(e.post,{is_protected:!0}));var t={is_protected:e.post.is_protected};p(e,[{op:"replace",path:"is-protected",value:!0}],t)},r.unprotect=function(e){s.default.dispatch(i.patch(e.post,{is_protected:!1}));var t={is_protected:e.post.is_protected};p(e,[{op:"replace",path:"is-protected",value:!1}],t)},r.hide=function(e){s.default.dispatch(i.patch(e.post,{is_hidden:!0,hidden_on:(0,o.default)(),hidden_by_name:e.user.username,url:Object.assign(e.post.url,{hidden_by:e.user.url})}));var t={is_hidden:e.post.is_hidden,hidden_on:e.post.hidden_on,hidden_by_name:e.post.hidden_by_name,url:e.post.url};p(e,[{op:"replace",path:"is-hidden",value:!0}],t)},r.unhide=function(e){s.default.dispatch(i.patch(e.post,{is_hidden:!1}));var t={is_hidden:e.post.is_hidden};p(e,[{op:"replace",path:"is-hidden",value:!1}],t)},r.like=function(e){var t=e.post.last_likes||[],r=[e.user].concat(t),n=3<r.length?r.slice(0,-1):r;s.default.dispatch(i.patch(e.post,{is_liked:!0,likes:e.post.likes+1,last_likes:n}));var a={is_liked:e.post.is_liked,likes:e.post.likes,last_likes:e.post.last_likes};p(e,[{op:"replace",path:"is-liked",value:!0}],a)},r.unlike=function(t){s.default.dispatch(i.patch(t.post,{is_liked:!1,likes:t.post.likes-1,last_likes:t.post.last_likes.filter(function(e){return!e.id||e.id!==t.user.id})}));var e={is_liked:t.post.is_liked,likes:t.post.likes,last_likes:t.post.last_likes};p(t,[{op:"replace",path:"is-liked",value:!1}],e)},r.patch=p,r.remove=function(t){if(!confirm(gettext("Are you sure you want to delete this post? This action is not reversible!")))return;s.default.dispatch(i.patch(t.post,{isDeleted:!0})),n.default.delete(t.post.api.index).then(function(){a.default.success(gettext("Post has been deleted."))},function(e){400===e.status?a.default.error(e.detail):a.default.apiError(e),s.default.dispatch(i.patch(t.post,{isDeleted:!1}))})},r.markAsBestAnswer=function(e){var t=e.post,r=e.user;s.default.dispatch(u.update({best_answer:t.id,best_answer_is_protected:t.is_protected,best_answer_marked_on:(0,o.default)(),best_answer_marked_by:r.id,best_answer_marked_by_name:r.username,best_answer_marked_by_slug:r.slug}));var n=[{op:"replace",path:"best-answer",value:t.id},{op:"add",path:"acl",value:!0}],a={best_answer:e.thread.best_answer,best_answer_is_protected:e.thread.best_answer_is_protected,best_answer_marked_on:e.thread.best_answer_marked_on,best_answer_marked_by:e.thread.best_answer_marked_by,best_answer_marked_by_name:e.thread.best_answer_marked_by_name,best_answer_marked_by_slug:e.thread.best_answer_marked_by_slug};m(e,n,a)},r.unmarkBestAnswer=function(e){var t=e.post;s.default.dispatch(u.update({best_answer:null,best_answer_is_protected:!1,best_answer_marked_on:null,best_answer_marked_by:null,best_answer_marked_by_name:null,best_answer_marked_by_slug:null}));var r=[{op:"remove",path:"best-answer",value:t.id},{op:"add",path:"acl",value:!0}],n={best_answer:e.thread.best_answer,best_answer_is_protected:e.thread.best_answer_is_protected,best_answer_marked_on:e.thread.best_answer_marked_on,best_answer_marked_by:e.thread.best_answer_marked_by,best_answer_marked_by_name:e.thread.best_answer_marked_by_name,best_answer_marked_by_slug:e.thread.best_answer_marked_by_slug};m(e,r,n)},r.patchThread=m;var o=d(e("moment")),u=f(e("../../../../reducers/thread")),i=f(e("../../../../reducers/post")),n=d(e("../../../../services/ajax")),a=d(e("../../../../services/snackbar")),s=d(e("../../../../services/store"));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r,n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((r=a?Object.getOwnPropertyDescriptor(e,o):null)&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o])}return n.default=e,t&&t.set(e,n),n}function d(e){return e&&e.__esModule?e:{default:e}}function p(t,e,r){n.default.patch(t.post.api.index,e).then(function(e){s.default.dispatch(i.patch(t.post,e))},function(e){400===e.status?a.default.error(e.detail[0]):a.default.apiError(e),s.default.dispatch(i.patch(t.post,r))})}function m(e,t,r){n.default.patch(e.thread.api.index,t).then(function(e){e.best_answer_marked_on&&(e.best_answer_marked_on=(0,o.default)(e.best_answer_marked_on)),s.default.dispatch(u.update(e))},function(e){400===e.status?a.default.error(e.detail[0]):a.default.apiError(e),s.default.dispatch(u.update(r))})}},{"../../../../reducers/post":353,"../../../../reducers/thread":360,"../../../../services/ajax":365,"../../../../services/snackbar":376,"../../../../services/store":377,moment:"moment"}],156:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return l.default.createElement("ul",{className:"dropdown-menu dropdown-menu-right stick-to-bottom"},l.default.createElement(w,e),l.default.createElement(O,e),l.default.createElement(P,e),l.default.createElement(k,e),l.default.createElement(j,e),l.default.createElement(S,e),l.default.createElement(N,e),l.default.createElement(x,e),l.default.createElement(R,e),l.default.createElement(C,e),l.default.createElement(M,e),l.default.createElement(T,e),l.default.createElement(D,e))},r.Delete=r.Unhide=r.Hide=r.Unprotect=r.Protect=r.Split=r.Move=r.Approve=r.PostEdits=r.UnmarkMarkBestAnswer=r.MarkAsBestAnswer=r.Edit=r.Permalink=void 0;var l=n(e("react")),u=n(e("../../../../services/modal")),i=n(e("../../../../services/posting")),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==m(e)&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("./actions")),c=n(e("./move")),f=n(e("../../../post-changelog")),d=n(e("./split"));function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==m(n)&&"function"!=typeof n?g(r):n}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=function(){b(o,l.default.Component);var a=v(o);function o(){var t;h(this,o);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return E(g(t=a.call.apply(a,[this].concat(r))),"onClick",function(){var e=window.location.protocol+"//";e+=window.location.host,e+=t.props.post.url.index,prompt(gettext("Permament link to this post:"),e)}),t}return y(o,[{key:"render",value:function(){return l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"link"),gettext("Permament link")))}}]),o}();r.Permalink=w;var O=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(g(e=a.call.apply(a,[this].concat(r))),"onClick",function(){i.default.open({mode:"EDIT",config:e.props.post.api.editor,submit:e.props.post.api.index})}),e}return y(o,[{key:"render",value:function(){return this.props.post.acl.can_edit?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"edit"),gettext("Edit"))):null}}]),o}();r.Edit=O;var P=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(g(e=a.call.apply(a,[this].concat(r))),"onClick",function(){s.markAsBestAnswer(e.props)}),e}return y(o,[{key:"render",value:function(){var e=this.props,t=e.post,r=e.thread;return!r.acl.can_mark_best_answer||!t.acl.can_mark_as_best_answer||t.id===r.best_answer||r.best_answer&&!r.acl.can_change_best_answer?null:l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"check_box"),gettext("Mark as best answer")))}}]),o}();r.MarkAsBestAnswer=P;var k=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(g(e=a.call.apply(a,[this].concat(r))),"onClick",function(){s.unmarkBestAnswer(e.props)}),e}return y(o,[{key:"render",value:function(){var e=this.props,t=e.post,r=e.thread;return t.id===r.best_answer&&r.acl.can_unmark_best_answer?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"check_box_outline_blank"),gettext("Unmark best answer"))):null}}]),o}();r.UnmarkMarkBestAnswer=k;var j=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(g(e=a.call.apply(a,[this].concat(r))),"onClick",function(){u.default.show(l.default.createElement(f.default,{post:e.props.post}))}),e}return y(o,[{key:"render",value:function(){var e=this.props.post.is_hidden&&!this.props.post.acl.can_see_hidden,t=0===this.props.post.edits;if(e||t)return null;var r=ngettext("This post was edited %(edits)s time.","This post was edited %(edits)s times.",this.props.post.edits);interpolate(r,{edits:this.props.post.edits},!0);return l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"edit"),gettext("Changes history")))}}]),o}();r.PostEdits=j;var S=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(g(e=a.call.apply(a,[this].concat(r))),"onClick",function(){s.approve(e.props)}),e}return y(o,[{key:"render",value:function(){return this.props.post.acl.can_approve&&this.props.post.is_unapproved?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"done"),gettext("Approve"))):null}}]),o}();r.Approve=S;var N=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(g(e=a.call.apply(a,[this].concat(r))),"onClick",function(){u.default.show(l.default.createElement(c.default,e.props))}),e}return y(o,[{key:"render",value:function(){return this.props.post.acl.can_move?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"arrow_forward"),gettext("Move"))):null}}]),o}();r.Move=N;var x=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(g(e=a.call.apply(a,[this].concat(r))),"onClick",function(){u.default.show(l.default.createElement(d.default,e.props))}),e}return y(o,[{key:"render",value:function(){return this.props.post.acl.can_move?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"call_split"),gettext("Split"))):null}}]),o}();r.Split=x;var R=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(g(e=a.call.apply(a,[this].concat(r))),"onClick",function(){s.protect(e.props)}),e}return y(o,[{key:"render",value:function(){return!this.props.post.acl.can_protect||this.props.post.is_protected?null:l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"lock_outline"),gettext("Protect")))}}]),o}();r.Protect=R;var C=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(g(e=a.call.apply(a,[this].concat(r))),"onClick",function(){s.unprotect(e.props)}),e}return y(o,[{key:"render",value:function(){return this.props.post.acl.can_protect&&this.props.post.is_protected?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"lock_open"),gettext("Remove protection"))):null}}]),o}();r.Unprotect=C;var M=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(g(e=a.call.apply(a,[this].concat(r))),"onClick",function(){s.hide(e.props)}),e}return y(o,[{key:"render",value:function(){var e=this.props,t=e.post,r=e.thread;return t.id===r.best_answer||!t.acl.can_hide||t.is_hidden?null:l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"visibility_off"),gettext("Hide")))}}]),o}();r.Hide=M;var T=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(g(e=a.call.apply(a,[this].concat(r))),"onClick",function(){s.unhide(e.props)}),e}return y(o,[{key:"render",value:function(){return this.props.post.acl.can_unhide&&this.props.post.is_hidden?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"visibility"),gettext("Unhide"))):null}}]),o}();r.Unhide=T;var D=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(g(e=a.call.apply(a,[this].concat(r))),"onClick",function(){s.remove(e.props)}),e}return y(o,[{key:"render",value:function(){var e=this.props,t=e.post,r=e.thread;return t.id!==r.best_answer&&t.acl.can_delete?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"clear"),gettext("Delete"))):null}}]),o}();r.Delete=D},{"../../../../services/modal":371,"../../../../services/posting":375,"../../../post-changelog":119,"./actions":155,"./move":158,"./split":159,react:"react"}],157:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement("div",{className:"pull-right dropdown"},n.default.createElement("button",{"aria-expanded":"true","aria-haspopup":"true",className:"btn btn-default btn-icon dropdown-toggle","data-toggle":"dropdown",type:"button"},n.default.createElement("span",{className:"material-icon"},"expand_more")),n.default.createElement(a.default,e))};var n=o(e("react")),a=o(e("./dropdown"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./dropdown":156,react:"react"}],158:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ModalHeader=_,r.default=void 0;var n=o(e("react")),a=(o(e("../../../button")),o(e("../../../form"))),u=o(e("../../../form-group")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../../reducers/post")),s=o(e("../../../../services/ajax")),c=o(e("../../../../services/modal")),f=o(e("../../../../services/snackbar")),d=o(e("../../../../services/store"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function o(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==p(n)&&"function"!=typeof n?b(r):n}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(l,a.default);var e,t,r,o=y(l);function l(e){var t,r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),r=b(t),a=function(e){t.changeValue("url",e.target.value)},(n="onUrlChange")in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,t.state={isLoading:!1,url:"",validators:{url:[]},errors:{}},t}return e=l,(t=[{key:"clean",value:function(){return!!this.state.url.trim().length||(f.default.error(gettext("You have to enter link to the other thread.")),!1)}},{key:"send",value:function(){return s.default.post(this.props.thread.api.posts.move,{new_thread:this.state.url,posts:[this.props.post.id]})}},{key:"handleSuccess",value:function(){d.default.dispatch(i.patch(this.props.post,{isDeleted:!0})),c.default.hide(),f.default.success(gettext("Selected post was moved to the other thread."))}},{key:"handleError",value:function(e){400===e.status?f.default.error(e.detail):f.default.apiError(e)}},{key:"render",value:function(){return n.default.createElement("div",{className:"modal-dialog",role:"document"},n.default.createElement("form",{onSubmit:this.handleSubmit},n.default.createElement("div",{className:"modal-content"},n.default.createElement(_,null),n.default.createElement("div",{className:"modal-body"},n.default.createElement(u.default,{for:"id_url",label:gettext("Link to thread you want to move post to")},n.default.createElement("input",{className:"form-control",disabled:this.state.isLoading,id:"id_url",onChange:this.onUrlChange,value:this.state.url}))),n.default.createElement("div",{className:"modal-footer"},n.default.createElement("button",{className:"btn btn-primary",loading:this.state.isLoading},gettext("Move post"))))))}}])&&m(e.prototype,t),r&&m(e,r),l}();function _(e){return n.default.createElement("div",{className:"modal-header"},n.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},n.default.createElement("span",{"aria-hidden":"true"},"×")),n.default.createElement("h4",{className:"modal-title"},gettext("Move post")))}r.default=g},{"../../../../reducers/post":353,"../../../../services/ajax":365,"../../../../services/modal":371,"../../../../services/snackbar":376,"../../../../services/store":377,"../../../button":8,"../../../form":56,"../../../form-group":55,react:"react"}],159:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return a.default.createElement(x,N({},e,{Form:R}))},r.Loader=C,r.Error=M,r.Modal=T,r.ModerationForm=r.PostingConfig=void 0;var a=v(e("react")),n=v(e("../../../button")),u=v(e("../../../form")),i=v(e("../../../form-group")),s=v(e("../../../category-select")),o=v(e("../../../modal-loader")),c=v(e("../../../select")),f=b(e("../../../../reducers/post")),d=v(e("../../../../services/ajax")),p=v(e("../../../../services/modal")),m=v(e("../../../../services/snackbar")),h=v(e("../../../../services/store")),y=b(e("../../../../utils/validators"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function b(e){if(e&&e.__esModule)return e;if(null===e||"object"!==g(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r,n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((r=a?Object.getOwnPropertyDescriptor(e,o):null)&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o])}return n.default=e,t&&t.set(e,n),n}function v(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t,r){return t&&E(e.prototype,t),r&&E(e,r),e}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=S(o);return t=l?(e=S(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==g(n)&&"function"!=typeof n?j(r):n}}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var x=function(){O(n,a.default.Component);var r=k(n);function n(e){var t;return _(this,n),(t=r.call(this,e)).state={isLoaded:!1,isError:!1,categories:[]},t}return w(n,[{key:"componentDidMount",value:function(){var r=this;d.default.get(misago.get("THREAD_EDITOR_API")).then(function(e){var t=e.map(function(e){return Object.assign(e,{disabled:!1===e.post,label:e.name,value:e.id,post:e.post})});r.setState({isLoaded:!0,categories:t})},function(e){r.setState({isError:e.detail})})}},{key:"render",value:function(){return this.state.isError?a.default.createElement(M,{message:this.state.isError}):this.state.isLoaded?a.default.createElement(R,N({},this.props,{categories:this.state.categories})):a.default.createElement(C,null)}}]),n}();r.PostingConfig=x;var R=function(){O(l,u.default);var o=k(l);function l(e){var n,t,r,a;return _(this,l),n=o.call(this,e),t=j(n),a=function(e){var t=e.target.value,r={category:t};n.acl[t].can_pin_threads<r.weight&&(r.weight=0),n.acl[t].can_hide_threads||(r.is_hidden=0),n.acl[t].can_close_threads||(r.is_closed=!1),n.setState(r)},(r="onCategoryChange")in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,n.state={isLoading:!1,title:"",category:null,categories:e.categories,weight:0,is_hidden:0,is_closed:!1,validators:{title:[y.required()]},errors:{}},n.isHiddenChoices=[{value:0,icon:"visibility",label:gettext("No")},{value:1,icon:"visibility_off",label:gettext("Yes")}],n.isClosedChoices=[{value:!1,icon:"lock_outline",label:gettext("No")},{value:!0,icon:"lock",label:gettext("Yes")}],n.acl={},n.props.categories.forEach(function(e){e.post&&(n.state.category||(n.state.category=e.id),n.acl[e.id]={can_pin_threads:e.post.pin,can_close_threads:e.post.close,can_hide_threads:e.post.hide})}),n}return w(l,[{key:"clean",value:function(){return!!this.isValid()||(m.default.error(gettext("Form contains errors.")),this.setState({errors:this.validate()}),!1)}},{key:"send",value:function(){return d.default.post(this.props.thread.api.posts.split,{title:this.state.title,category:this.state.category,weight:this.state.weight,is_hidden:this.state.is_hidden,is_closed:this.state.is_closed,posts:[this.props.post.id]})}},{key:"handleSuccess",value:function(){h.default.dispatch(f.patch(this.props.post,{isDeleted:!0})),p.default.hide(),m.default.success(gettext("Selected post was split into new thread."))}},{key:"handleError",value:function(e){400===e.status?(this.setState({errors:Object.assign({},this.state.errors,e)}),m.default.error(gettext("Form contains errors."))):403===e.status&&Array.isArray(e)?p.default.show(a.default.createElement(ErrorsModal,{errors:e})):m.default.apiError(e)}},{key:"getWeightChoices",value:function(){var e=[{value:0,icon:"remove",label:gettext("Not pinned")},{value:1,icon:"bookmark_border",label:gettext("Pinned locally")}];return 2==this.acl[this.state.category].can_pin_threads&&e.push({value:2,icon:"bookmark",label:gettext("Pinned globally")}),e}},{key:"renderWeightField",value:function(){return this.acl[this.state.category].can_pin_threads?a.default.createElement(i.default,{label:gettext("Thread weight"),for:"id_weight",labelClass:"col-sm-4",controlClass:"col-sm-8"},a.default.createElement(c.default,{id:"id_weight",onChange:this.bindInput("weight"),value:this.state.weight,choices:this.getWeightChoices()})):null}},{key:"renderHiddenField",value:function(){return this.acl[this.state.category].can_hide_threads?a.default.createElement(i.default,{label:gettext("Hide thread"),for:"id_is_hidden",labelClass:"col-sm-4",controlClass:"col-sm-8"},a.default.createElement(c.default,{id:"id_is_closed",onChange:this.bindInput("is_hidden"),value:this.state.is_hidden,choices:this.isHiddenChoices})):null}},{key:"renderClosedField",value:function(){return this.acl[this.state.category].can_close_threads?a.default.createElement(i.default,{label:gettext("Close thread"),for:"id_is_closed",labelClass:"col-sm-4",controlClass:"col-sm-8"},a.default.createElement(c.default,{id:"id_is_closed",onChange:this.bindInput("is_closed"),value:this.state.is_closed,choices:this.isClosedChoices})):null}},{key:"render",value:function(){return a.default.createElement(T,{className:"modal-dialog"},a.default.createElement("form",{onSubmit:this.handleSubmit},a.default.createElement("div",{className:"modal-body"},a.default.createElement(i.default,{label:gettext("Thread title"),for:"id_title",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.title},a.default.createElement("input",{id:"id_title",className:"form-control",type:"text",onChange:this.bindInput("title"),value:this.state.title})),a.default.createElement("div",{className:"clearfix"}),a.default.createElement(i.default,{label:gettext("Category"),for:"id_category",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.category},a.default.createElement(s.default,{id:"id_category",onChange:this.onCategoryChange,value:this.state.category,choices:this.state.categories})),a.default.createElement("div",{className:"clearfix"}),this.renderWeightField(),this.renderHiddenField(),this.renderClosedField()),a.default.createElement("div",{className:"modal-footer"},a.default.createElement(n.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Split post")))))}}]),l}();function C(){return a.default.createElement(T,{className:"modal-dialog"},a.default.createElement(o.default,null))}function M(e){return a.default.createElement(T,{className:"modal-dialog modal-message"},a.default.createElement("div",{className:"message-icon"},a.default.createElement("span",{className:"material-icon"},"info_outline")),a.default.createElement("div",{className:"message-body"},a.default.createElement("p",{className:"lead"},gettext("You can't move this post at the moment.")),a.default.createElement("p",null,e.message)))}function T(e){return a.default.createElement("div",{className:e.className,role:"document"},a.default.createElement("div",{className:"modal-content"},a.default.createElement("div",{className:"modal-header"},a.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},a.default.createElement("span",{"aria-hidden":"true"},"×")),a.default.createElement("h4",{className:"modal-title"},gettext("Split post into new thread"))),e.children))}r.ModerationForm=R},{"../../../../reducers/post":353,"../../../../services/ajax":365,"../../../../services/modal":371,"../../../../services/snackbar":376,"../../../../services/store":377,"../../../../utils/validators":393,"../../../button":8,"../../../category-select":21,"../../../form":56,"../../../form-group":55,"../../../modal-loader":61,"../../../select":210,react:"react"}],160:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FlagBestAnswer=function(e){var t=e.post,r=e.thread,n=e.user;if(!l(t)||t.id!==r.best_answer)return null;var a=null;a=n.id&&r.best_answer_marked_by===n.id?interpolate(gettext("Marked as best answer by you %(marked_on)s."),{marked_on:r.best_answer_marked_on.fromNow()},!0):interpolate(gettext("Marked as best answer by %(marked_by)s %(marked_on)s."),{marked_by:r.best_answer_marked_by_name,marked_on:r.best_answer_marked_on.fromNow()},!0);return o.default.createElement("div",{className:"post-status-message post-status-best-answer"},o.default.createElement("span",{className:"material-icon"},"check_box"),o.default.createElement("p",null,a))},r.FlagHidden=function(e){return l(e.post)&&e.post.is_hidden?o.default.createElement("div",{className:"post-status-message post-status-hidden"},o.default.createElement("span",{className:"material-icon"},"visibility_off"),o.default.createElement("p",null,gettext("This post is hidden. Only users with permission may see its contents."))):null},r.FlagUnapproved=function(e){return l(e.post)&&e.post.is_unapproved?o.default.createElement("div",{className:"post-status-message post-status-unapproved"},o.default.createElement("span",{className:"material-icon"},"remove_circle_outline"),o.default.createElement("p",null,gettext("This post is unapproved. Only users with permission to approve posts and its author may see its contents."))):null},r.FlagProtected=function(e){return l(e.post)&&e.post.is_protected?o.default.createElement("div",{className:"post-status-message post-status-protected visible-xs-block"},o.default.createElement("span",{className:"material-icon"},"lock_outline"),o.default.createElement("p",null,gettext("This post is protected. Only moderators may change it."))):null},r.isVisible=l;var n,o=(n=e("react"))&&n.__esModule?n:{default:n};function l(e){return!e.is_hidden||e.acl.can_see_hidden}},{react:"react"}],161:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return E(e.post)?l.default.createElement("div",{className:"post-footer"},l.default.createElement(w,e),l.default.createElement(O,e),l.default.createElement(P,e),l.default.createElement(k,_({lastLikes:e.post.last_likes,likes:e.post.likes},e)),l.default.createElement(j,_({likes:e.post.likes},e)),l.default.createElement(N,e),l.default.createElement(x,e)):null},r.isVisible=E,r.getLikesMessage=S,r.Edit=r.Reply=r.LikesCompact=r.Likes=r.Like=r.MarkAsBestAnswerCompact=r.MarkAsBestAnswer=void 0;var l=n(e("react")),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("./controls/actions")),i=n(e("../../post-likes")),s=n(e("../../../services/modal")),c=n(e("../../../services/posting"));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==d(n)&&"function"!=typeof n?b(r):n}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function E(e){return(!e.is_hidden||e.acl.can_see_hidden)&&(e.acl.can_reply||e.acl.can_edit||e.acl.can_see_likes&&(e.last_likes||[]).length||e.acl.can_like)}var w=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=a.call.apply(a,[this].concat(r))),"onClick",function(){u.markAsBestAnswer(e.props)}),e}return m(o,[{key:"render",value:function(){var e=this.props,t=e.post,r=e.thread;return!r.acl.can_mark_best_answer||!t.acl.can_mark_as_best_answer||r.best_answer&&!r.acl.can_change_best_answer?null:l.default.createElement("button",{className:"hidden-xs btn btn-default btn-sm pull-left",disabled:this.props.post.isBusy||t.id===r.best_answer,onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"check_box"),gettext("Best answer"))}}]),o}();r.MarkAsBestAnswer=w;var O=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=a.call.apply(a,[this].concat(r))),"onClick",function(){u.markAsBestAnswer(e.props)}),e}return m(o,[{key:"render",value:function(){var e=this.props,t=e.post,r=e.thread;return!r.acl.can_mark_best_answer||!t.acl.can_mark_as_best_answer||r.best_answer&&!r.acl.can_change_best_answer?null:l.default.createElement("button",{className:"visible-xs-inline-block btn btn-default btn-sm pull-left",disabled:this.props.post.isBusy||t.id===r.best_answer,onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"check_box"))}}]),o}();r.MarkAsBestAnswerCompact=O;var P=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=a.call.apply(a,[this].concat(r))),"onClick",function(){e.props.post.is_liked?u.unlike(e.props):u.like(e.props)}),e}return m(o,[{key:"render",value:function(){if(!this.props.post.acl.can_like)return null;var e="btn btn-default btn-sm pull-left";return this.props.post.is_liked&&(e="btn btn-success btn-sm pull-left"),l.default.createElement("button",{className:e,disabled:this.props.post.isBusy,onClick:this.onClick,type:"button"},this.props.post.is_liked?gettext("Liked"):gettext("Like"))}}]),o}();r.Like=P;var k=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=a.call.apply(a,[this].concat(r))),"onClick",function(){s.default.show(l.default.createElement(i.default,{post:e.props.post}))}),e}return m(o,[{key:"render",value:function(){var e=0<(this.props.post.last_likes||[]).length;return this.props.post.acl.can_see_likes&&e?2===this.props.post.acl.can_see_likes?l.default.createElement("button",{className:"btn btn-link btn-sm pull-left hidden-xs",onClick:this.onClick,type:"button"},S(this.props.likes,this.props.lastLikes)):l.default.createElement("p",{className:"pull-left hidden-xs"},S(this.props.likes,this.props.lastLikes)):null}}]),o}();r.Likes=k;var j=function(){h(t,k);var e=y(t);function t(){return p(this,t),e.apply(this,arguments)}return m(t,[{key:"render",value:function(){var e=0<(this.props.post.last_likes||[]).length;return this.props.post.acl.can_see_likes&&e?2===this.props.post.acl.can_see_likes?l.default.createElement("button",{className:"btn btn-link btn-sm likes-compact pull-left visible-xs-block",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"favorite"),this.props.likes):l.default.createElement("p",{className:"likes-compact pull-left visible-xs-block"},l.default.createElement("span",{className:"material-icon"},"favorite"),this.props.likes):null}}]),t}();function S(e,t){var r=t.slice(0,3).map(function(e){return e.username});if(1==r.length)return interpolate(gettext("%(user)s likes this."),{user:r[0]},!0);var n=e-r.length,a=r.slice(0,-1).join(", "),o=r.slice(-1)[0],l=interpolate(gettext("%(users)s and %(last_user)s"),{users:a,last_user:o},!0);if(0==n)return interpolate(gettext("%(users)s like this."),{users:l},!0);var u=ngettext("%(users)s and %(likes)s other user like this.","%(users)s and %(likes)s other users like this.",n);return interpolate(u,{users:r.join(", "),likes:n},!0)}r.LikesCompact=j;var N=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=a.call.apply(a,[this].concat(r))),"onClick",function(){c.default.open({mode:"REPLY",config:e.props.thread.api.editor,submit:e.props.thread.api.posts.index,context:{reply:e.props.post.id}})}),e}return m(o,[{key:"render",value:function(){return this.props.post.acl.can_reply?l.default.createElement("button",{className:"btn btn-primary btn-sm pull-right",type:"button",onClick:this.onClick},gettext("Reply")):null}}]),o}();r.Reply=N;var x=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=a.call.apply(a,[this].concat(r))),"onClick",function(){c.default.open({mode:"EDIT",config:e.props.post.api.editor,submit:e.props.post.api.index})}),e}return m(o,[{key:"render",value:function(){return this.props.post.acl.can_edit?l.default.createElement("button",{className:"hidden-xs btn btn-default btn-sm pull-right",type:"button",onClick:this.onClick},gettext("Edit")):null}}]),o}();r.Edit=x},{"../../../services/modal":371,"../../../services/posting":375,"../../post-likes":132,"./controls/actions":155,react:"react"}],162:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return s.default.createElement("div",{className:"post-heading"},s.default.createElement(v,e),s.default.createElement(g,e),s.default.createElement(_,e),s.default.createElement(E,e),s.default.createElement(w,e),s.default.createElement(O,e),s.default.createElement(P,e),s.default.createElement(a.default,e),s.default.createElement(n.default,e))},r.UnreadLabel=v,r.UnreadCompact=g,r.PostedOn=_,r.PostedOnCompact=E,r.ProtectedLabel=P,r.PostEditsCompacts=r.PostEdits=void 0;var s=o(e("react")),n=o(e("./controls")),a=o(e("./select")),c=(e("../../user-status"),o(e("../../post-changelog"))),f=o(e("../../../services/modal"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=b(o);return t=l?(e=b(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?y(r):n}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){return e.post.is_read?null:s.default.createElement("span",{className:"label label-unread hidden-xs"},gettext("New post"))}function g(e){return e.post.is_read?null:s.default.createElement("span",{className:"label label-unread visible-xs-inline-block"},gettext("New"))}function _(e){var t=interpolate(gettext("posted %(posted_on)s"),{posted_on:e.post.posted_on.format("LL, LT")},!0);return s.default.createElement("a",{href:e.post.url.index,className:"btn btn-link posted-on hidden-xs",title:t},e.post.posted_on.fromNow())}function E(e){return s.default.createElement("a",{href:e.post.url.index,className:"btn btn-link posted-on visible-xs-inline-block"},e.post.posted_on.fromNow(!0))}var w=function(){m(i,s.default.Component);var u=h(i);function i(){var e;d(this,i);for(var t,r,n,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=u.call.apply(u,[this].concat(o)),t=y(e),n=function(){f.default.show(s.default.createElement(c.default,{post:e.props.post}))},(r="onClick")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e}return p(i,[{key:"render",value:function(){var e=this.props.post.is_hidden&&!this.props.post.acl.can_see_hidden,t=0===this.props.post.edits;if(e||t)return null;var r=ngettext("This post was edited %(edits)s time.","This post was edited %(edits)s times.",this.props.post.edits),n=interpolate(r,{edits:this.props.post.edits},!0),a=ngettext("edited %(edits)s time","edited %(edits)s times",this.props.post.edits);return s.default.createElement("button",{className:"btn btn-link btn-see-edits hidden-xs",onClick:this.onClick,title:n,type:"button"},interpolate(a,{edits:this.props.post.edits},!0))}}]),i}();r.PostEdits=w;var O=function(){m(t,w);var e=h(t);function t(){return d(this,t),e.apply(this,arguments)}return p(t,[{key:"render",value:function(){var e=this.props.post.is_hidden&&!this.props.post.acl.can_see_hidden,t=0===this.props.post.edits;if(e||t)return null;var r=ngettext("%(edits)s edit","%(edits)s edits",this.props.post.edits);return s.default.createElement("button",{className:"btn btn-link btn-see-edits visible-xs-inline-block",onClick:this.onClick,type:"button"},interpolate(r,{edits:this.props.post.edits},!0))}}]),t}();function P(e){var t=e.post.poster&&e.post.poster.id===e.user.id,r=e.post.acl.can_protect;return e.user.id&&e.post.is_protected&&(t||r)?s.default.createElement("span",{className:"label label-protected hidden-xs",title:gettext("This post is protected and may not be edited.")},s.default.createElement("span",{className:"material-icon"},"lock_outline"),gettext("protected")):null}r.PostEditsCompacts=O},{"../../../services/modal":371,"../../post-changelog":119,"../../user-status":274,"./controls":157,"./select":172,react:"react"}],163:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t="post";e.post.isDeleted?t="hide":e.post.is_hidden&&!e.post.acl.can_see_hidden&&(t="post post-hidden");e.post.poster&&e.post.poster.rank.css_class&&(t+=" post-"+e.post.poster.rank.css_class);e.post.is_read||(t+=" post-new");return n.default.createElement("li",{id:"post-"+e.post.id,className:t},n.default.createElement("div",{className:"panel panel-default panel-post"},n.default.createElement("div",{className:"panel-body"},n.default.createElement("div",{className:"row"},n.default.createElement(s.default,e),n.default.createElement("div",{className:"col-xs-12 col-md-9"},n.default.createElement(i.default,e),n.default.createElement(l.FlagBestAnswer,e),n.default.createElement(l.FlagUnapproved,e),n.default.createElement(l.FlagProtected,e),n.default.createElement(l.FlagHidden,e),n.default.createElement(o.default,e),n.default.createElement(a.default,e),n.default.createElement(u.default,e))))))};var n=c(e("react")),a=c(e("./attachments")),o=c(e("./body")),l=e("./flags"),u=c(e("./footer")),i=c(e("./header")),s=c(e("./post-side"));function c(e){return e&&e.__esModule?e:{default:e}}},{"./attachments":153,"./body":154,"./flags":160,"./footer":161,"./header":162,"./post-side":166,react:"react"}],164:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.post,r=e.thread;return n.default.createElement("div",{className:"col-xs-12 col-md-3 post-side post-side-anonymous"},n.default.createElement(u.default,{post:t,thread:r}),n.default.createElement(o.default,{post:t,thread:r}),n.default.createElement("div",{className:"media"},n.default.createElement("div",{className:"media-left"},n.default.createElement("span",null,n.default.createElement(a.default,{className:"poster-avatar",size:100}))),n.default.createElement("div",{className:"media-body"},n.default.createElement("span",{className:"media-heading item-title"},t.poster_name),n.default.createElement("span",{className:"user-title user-title-anonymous"},gettext("Removed user")))))};var n=s(e("react")),a=s(e("../../../avatar")),o=s(e("../controls")),u=s(e("../select"));(function(e){if(e&&e.__esModule)return;if(null===e||"object"!==l(e)&&"function"!=typeof e)return;var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r)})(e("../../../user-status")),s(e("./user-postcount")),s(e("./user-title"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}},{"../../../avatar":6,"../../../user-status":274,"../controls":157,"../select":172,"./user-postcount":168,"./user-title":170,react:"react"}],165:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.title,r=e.rank;return r.is_tab||!!t||!!r.title}},{}],166:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(e.post.poster)return n.default.createElement(o.default,e);return n.default.createElement(a.default,e)};var n=l(e("react")),a=l(e("./anonymous")),o=l(e("./registered"));function l(e){return e&&e.__esModule?e:{default:e}}},{"./anonymous":164,"./registered":167,react:"react"}],167:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.post,r=e.thread,n=t.poster;return a.default.createElement("div",{className:"col-xs-12 col-md-3 post-side post-side-registered"},a.default.createElement(i.default,{post:t,thread:r}),a.default.createElement(u.default,{post:t,thread:r}),a.default.createElement("div",{className:"media"},a.default.createElement("div",{className:"media-left"},a.default.createElement("a",{href:n.url},a.default.createElement(o.default,{className:"poster-avatar",size:100,user:n}))),a.default.createElement("div",{className:"media-body"},a.default.createElement("div",{className:"media-heading"},a.default.createElement("a",{className:"item-title",href:n.url},n.username),a.default.createElement(s.default,{status:n.status},a.default.createElement(s.StatusIcon,{status:n.status}))),a.default.createElement(d.default,{rank:n.rank,title:n.title}),a.default.createElement(f.default,{poster:n}),a.default.createElement(c.default,{poster:n}))))};var a=n(e("react")),o=n(e("../../../avatar")),u=n(e("../controls")),i=n(e("../select")),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../user-status")),c=n(e("./user-postcount")),f=n(e("./user-status")),d=n(e("./user-title"));function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}},{"../../../avatar":6,"../../../user-status":274,"../controls":157,"../select":172,"./user-postcount":168,"./user-status":169,"./user-title":170,react:"react"}],168:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.poster,r=ngettext("%(posts)s post","%(posts)s posts",t.posts),n="user-postcount";(0,o.default)(t)&&(n+=" hidden-xs hidden-sm");return a.default.createElement("span",{className:n},interpolate(r,{posts:t.posts},!0))};var a=n(e("react")),o=n(e("./has-visible-title"));function n(e){return e&&e.__esModule?e:{default:e}}},{"./has-visible-title":165,react:"react"}],169:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.poster,r="hidden-xs";(0,o.default)(t)&&(r+=" hidden-sm");return n.default.createElement("span",{className:r},n.default.createElement(a.default,{status:t.status},n.default.createElement(a.StatusLabel,{status:t.status,user:t})))};var n=i(e("react")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../user-status")),o=i(e("./has-visible-title"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){return e&&e.__esModule?e:{default:e}}},{"../../../user-status":274,"./has-visible-title":165,react:"react"}],170:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.rank,r=e.title||t.title;!r&&t.is_tab&&(r=t.name);if(!r)return null;var n="user-title";t.css_class&&(n+=" user-title-"+t.css_class);if(t.is_tab)return a.default.createElement("div",{className:n},a.default.createElement("a",{href:t.url},r));return a.default.createElement("div",{className:n},r)};var n,a=(n=e("react"))&&n.__esModule?n:{default:n}},{react:"react"}],171:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement("li",{className:"post"},n.default.createElement("div",{className:"post-border"},n.default.createElement("div",{className:"post-avatar"},n.default.createElement(a.default,{size:"100"})),n.default.createElement("div",{className:"post-body"},n.default.createElement("div",{className:"panel panel-default panel-post"},n.default.createElement("div",{className:"panel-heading post-heading"},n.default.createElement("span",{className:"ui-preview-text",style:{width:o.int(30,100)+"px"}}," "),n.default.createElement("span",{className:"ui-preview-text",style:{width:o.int(30,100)+"px"}}," ")),n.default.createElement("div",{className:"panel-body"},n.default.createElement("article",{className:"misago-markup"},n.default.createElement("p",{className:"ui-preview-text",style:{width:o.int(50,100)+"%"}}," "),n.default.createElement("p",{className:"ui-preview-text",style:{width:o.int(50,100)+"%"}}," "),n.default.createElement("p",{className:"ui-preview-text",style:{width:o.int(50,100)+"%"}}," ")))))))};var n=i(e("react")),a=i(e("../../avatar")),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../utils/random"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){return e&&e.__esModule?e:{default:e}}},{"../../../utils/random":388,"../../avatar":6,react:"react"}],172:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isVisible=h,r.default=void 0;var n=a(e("react")),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../reducers/posts")),c=a(e("../../../services/store"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=i(o);return t=l?(e=i(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?p(r):n}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(i,n.default.Component);var e,t,r,u=d(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t,r,n,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=u.call.apply(u,[this].concat(o)),t=p(e),n=function(){e.props.post.isSelected?c.default.dispatch(s.deselect(e.props.post)):c.default.dispatch(s.select(e.props.post))},(r="onClick")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e}return e=i,(t=[{key:"render",value:function(){return this.props.thread.acl.can_merge_posts||h(this.props.post.acl)?n.default.createElement("div",{className:"pull-right hidden-xs"},n.default.createElement("button",{className:"btn btn-default btn-icon",onClick:this.onClick,type:"button"},n.default.createElement("span",{className:"material-icon"},this.props.post.isSelected?"check_box":"check_box_outline_blank"))):null}}])&&o(e.prototype,t),r&&o(e,r),i}();function h(e){return e.can_approve||e.can_hide||e.can_protect||e.can_unhide||e.can_delete||e.can_move}r.default=m},{"../../../reducers/posts":354,"../../../services/store":377,react:"react"}],173:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(e("react")),l=n(e("../../reducers/post")),u=n(e("../../reducers/thread")),i=a(e("../../services/ajax")),s=a(e("../../services/snackbar")),c=a(e("../../services/store"));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r,n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((r=a?Object.getOwnPropertyDescriptor(e,o):null)&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o])}return n.default=e,t&&t.set(e,n),n}function a(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==d(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,o.default.Component);var e,t,r,n=h(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"componentDidMount",value:function(){var n=this;this.props.post.is_read||$(this.documentNode).waypoint({handler:function(e){"down"!==e||n.props.post.is_read||window.setTimeout(function(){var e=n.documentNode.getBoundingClientRect(),t=e.height+e.top,r=document.documentElement.clientHeight;t<5||r<t||(c.default.dispatch(l.patch(n.props.post,{is_read:!0})),i.default.post(n.props.post.api.read).then(function(e){c.default.dispatch(u.update(n.props.thread,{is_read:e.thread_is_read}))},function(e){s.default.apiError(e)}))},1e3)},offset:"bottom-in-view"})}},{key:"render",value:function(){var t=this;return o.default.createElement("div",{className:this.props.className,ref:function(e){t.documentNode=e}},this.props.children)}}])&&p(e.prototype,t),r&&p(e,r),a}();r.default=b},{"../../reducers/post":353,"../../reducers/thread":360,"../../services/ajax":365,"../../services/snackbar":376,"../../services/store":377,react:"react"}],174:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("moment")),l=n(e("react")),u=n(e("../panel-loader")),i=n(e("../panel-message")),s=n(e("../..")),c=n(e("../../services/polls")),f=n(e("../../services/page-title"));function n(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=b(o);return t=l?(e=b(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==d(n)&&"function"!=typeof n?y(r):n}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,l.default.Component);var e,t,r,n=h(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),v(y(t=n.call(this,e)),"update",function(e){e.expires_on&&(e.expires_on=(0,o.default)(e.expires_on)),t.setState({isLoaded:!0,error:null,ban:e})}),v(y(t),"error",function(e){t.setState({isLoaded:!0,error:e.detail,ban:null})}),s.default.has("PROFILE_BAN")?t.initWithPreloadedData(s.default.pop("PROFILE_BAN")):t.initWithoutPreloadedData(),t.startPolling(e.profile.api.ban),t}return e=a,(t=[{key:"initWithPreloadedData",value:function(e){e.expires_on&&(e.expires_on=(0,o.default)(e.expires_on)),this.state={isLoaded:!0,ban:e}}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1}}},{key:"startPolling",value:function(e){c.default.start({poll:"ban-details",url:e,frequency:9e4,update:this.update,error:this.error})}},{key:"componentDidMount",value:function(){f.default.set({title:gettext("Ban details"),parent:this.props.profile.username})}},{key:"componentWillUnmount",value:function(){c.default.stop("ban-details")}},{key:"getUserMessage",value:function(){return this.state.ban.user_message?l.default.createElement("div",{className:"panel-body ban-message ban-user-message"},l.default.createElement("h4",null,gettext("User-shown ban message")),l.default.createElement("div",{className:"lead",dangerouslySetInnerHTML:{__html:this.state.ban.user_message.html}})):null}},{key:"getStaffMessage",value:function(){return this.state.ban.staff_message?l.default.createElement("div",{className:"panel-body ban-message ban-staff-message"},l.default.createElement("h4",null,gettext("Team-shown ban message")),l.default.createElement("div",{className:"lead",dangerouslySetInnerHTML:{__html:this.state.ban.staff_message.html}})):null}},{key:"getExpirationMessage",value:function(){if(this.state.ban.expires_on){if(this.state.ban.expires_on.isAfter((0,o.default)())){var e=interpolate(gettext("This ban expires on %(expires_on)s."),{expires_on:this.state.ban.expires_on.format("LL, LT")},!0),t=interpolate(gettext("This ban expires %(expires_on)s."),{expires_on:this.state.ban.expires_on.fromNow()},!0);return l.default.createElement("abbr",{title:e},t)}return gettext("This ban has expired.")}return interpolate(gettext("%(username)s's ban is permanent."),{username:this.props.profile.username},!0)}},{key:"getPanelBody",value:function(){return this.state.ban?Object.keys(this.state.ban).length?l.default.createElement("div",null,this.getUserMessage(),this.getStaffMessage(),l.default.createElement("div",{className:"panel-body ban-expires"},l.default.createElement("h4",null,gettext("Ban expiration")),l.default.createElement("p",{className:"lead"},this.getExpirationMessage()))):l.default.createElement("div",null,l.default.createElement(i.default,{message:gettext("No ban is active at the moment.")})):this.state.error?l.default.createElement("div",null,l.default.createElement(i.default,{icon:"error_outline",message:this.state.error})):l.default.createElement("div",null,l.default.createElement(u.default,null))}},{key:"render",value:function(){return l.default.createElement("div",{className:"profile-ban-details"},l.default.createElement("div",{className:"panel panel-default"},l.default.createElement("div",{className:"panel-heading"},l.default.createElement("h3",{className:"panel-title"},gettext("Ban details"))),this.getPanelBody()))}}])&&p(e.prototype,t),r&&p(e,r),a}();r.default=a},{"../..":302,"../../services/page-title":373,"../../services/polls":374,"../panel-loader":93,"../panel-message":94,moment:"moment",react:"react"}],175:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.isAuthenticated,r=e.profile,n=null;n=t?gettext("You are not sharing any details with others."):interpolate(gettext("%(username)s is not sharing any details with others."),{username:r.username},!0);return a.default.createElement("div",{className:"panel panel-default"},a.default.createElement("div",{className:"panel-body text-center lead"},n))};var n,a=(n=e("react"))&&n.__esModule?n:{default:n}},{react:"react"}],176:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.html,r=e.text,n=e.url;if(t)return a.default.createElement("div",{className:"form-control-static col-md-9",dangerouslySetInnerHTML:{__html:t}});return a.default.createElement("div",{className:"form-control-static col-md-9"},a.default.createElement(o,{text:r,url:n}))},r.SafeValue=o;var n,a=(n=e("react"))&&n.__esModule?n:{default:n};function o(e){var t=e.text,r=e.url;return r?a.default.createElement("p",null,a.default.createElement("a",{href:r,target:"_blank",rel:"nofollow"},t||r)):t?a.default.createElement("p",null,t):null}},{react:"react"}],177:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement("div",{className:"form-group"},n.default.createElement("strong",{className:"control-label col-md-3"},e.name,":"),n.default.createElement(a.default,e))};var n=o(e("react")),a=o(e("./field-value"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./field-value":176,react:"react"}],178:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.api,r=e.display,n=e.onCancel,a=e.onSuccess;return r?o.default.createElement(l.default,{api:t,onCancel:n,onSuccess:a}):null};var o=n(e("react")),l=n(e("../../edit-details"));function n(e){return e&&e.__esModule?e:{default:e}}},{"../../edit-details":32,react:"react"}],179:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.fields,r=e.name;return l.default.createElement("div",{className:"panel panel-default panel-profile-details-group"},l.default.createElement("div",{className:"panel-heading"},l.default.createElement("h3",{className:"panel-title"},r)),l.default.createElement("div",{className:"panel-body"},l.default.createElement("div",{className:"form-horizontal"},t.map(function(e){var t=e.fieldname,r=e.html,n=e.name,a=e.text,o=e.url;return l.default.createElement(u.default,{key:t,name:n,html:r,text:a,url:o})}))))};var l=n(e("react")),u=n(e("./field"));function n(e){return e&&e.__esModule?e:{default:e}}},{"./field":177,react:"react"}],180:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.display,r=e.groups,n=e.isAuthenticated,a=e.loading,o=e.profile;if(!t)return null;if(a)return l.default.createElement(s.default,null);return r.length?l.default.createElement("div",null,r.map(function(e,t){return l.default.createElement(i.default,{fields:e.fields,key:t,name:e.name})})):l.default.createElement(u.default,{isAuthenticated:n,profile:o})};var l=n(e("react")),u=n(e("./empty-message")),i=n(e("./group")),s=n(e("../../loader"));function n(e){return e&&e.__esModule?e:{default:e}}},{"../../loader":58,"./empty-message":175,"./group":179,react:"react"}],181:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.onEdit,r=e.showEditButton;return a.default.createElement("div",null,a.default.createElement("nav",{className:"toolbar"},a.default.createElement("div",{className:"row"},a.default.createElement("div",{className:"col-sm-8 col-md-10"},a.default.createElement("h3",{className:"md-margin-top-no"},gettext("Details"))),a.default.createElement(o,{onEdit:t,showEditButton:r}))))},r.EditButton=o;var n,a=(n=e("react"))&&n.__esModule?n:{default:n};function o(e){var t=e.onEdit;return e.showEditButton?a.default.createElement("div",{className:"col-sm-4 col-md-2"},a.default.createElement("button",{className:"btn btn-default btn-outline btn-block",onClick:t,type:"button"},gettext("Edit"))):null}},{react:"react"}],182:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=n(e("react")),u=n(e("./form")),i=n(e("./groups-list")),s=n(e("./header")),c=n(e("../../../data/profile-details")),f=e("../../../reducers/profile-details"),o=n(e("../../../services/page-title")),d=n(e("../../../services/snackbar"));function n(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==p(n)&&"function"!=typeof n?b(r):n}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,l.default.Component);var e,t,r,n=y(a);function a(e){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),g(b(l=n.call(this,e)),"onCancel",function(){l.setState({editing:!1})}),g(b(l),"onEdit",function(){l.setState({editing:!0})}),g(b(l),"onSuccess",function(e){var t=l.props,r=t.dispatch,n=t.isAuthenticated,a=t.profile,o=null,o=n?gettext("Your details have been updated."):interpolate(gettext("%(username)s's details have been updated."),{username:a.username},!0);d.default.info(o),r((0,f.load)(e)),l.setState({editing:!1})}),l.state={editing:!1},l}return e=a,(t=[{key:"componentDidMount",value:function(){o.default.set({title:gettext("Details"),parent:this.props.profile.username})}},{key:"render",value:function(){var e=this.props,t=e.dispatch,r=e.isAuthenticated,n=e.profile,a=e.profileDetails,o=a.id!==n.id;return l.default.createElement(c.default,{data:a,dispatch:t,user:n},l.default.createElement("div",{className:"profile-details"},l.default.createElement(s.default,{onEdit:this.onEdit,showEditButton:!!a.edit&&!this.state.editing}),l.default.createElement(i.default,{display:!this.state.editing,groups:a.groups,isAuthenticated:r,loading:o,profile:n}),l.default.createElement(u.default,{api:n.api.edit_details,dispatch:t,display:this.state.editing,onCancel:this.onCancel,onSuccess:this.onSuccess})))}}])&&m(e.prototype,t),r&&m(e,r),a}();r.default=a},{"../../../data/profile-details":301,"../../../reducers/profile-details":355,"../../../services/page-title":373,"../../../services/snackbar":376,"./form":178,"./groups-list":180,"./header":181,react:"react"}],183:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Threads=function(e){var t=null;t=e.user.id===e.profile.id?gettext("You have no started threads."):interpolate(gettext("%(username)s started no threads."),{username:e.profile.username},!0);var r=null;{var n,a;r=e.posts.isLoaded?e.profile.id===e.user.id?(n=ngettext("You have started %(threads)s thread.","You have started %(threads)s threads.",e.profile.threads),interpolate(n,{threads:e.profile.threads},!0)):(a=ngettext("%(username)s has started %(threads)s thread.","%(username)s has started %(threads)s threads.",e.profile.threads),interpolate(a,{username:e.profile.username,threads:e.profile.threads},!0)):gettext("Loading...")}return o.default.createElement(l.default,u({api:e.profile.api.threads,emptyMessage:t,header:r,title:gettext("Threads")},e))},r.Posts=function(e){var t=null;t=e.user.id===e.profile.id?gettext("You have posted no messages."):interpolate(gettext("%(username)s posted no messages."),{username:e.profile.username},!0);var r=null;{var n,a;r=e.posts.isLoaded?e.profile.id===e.user.id?(n=ngettext("You have posted %(posts)s message.","You have posted %(posts)s messages.",e.profile.posts),interpolate(n,{posts:e.profile.posts},!0)):(a=ngettext("%(username)s has posted %(posts)s message.","%(username)s has posted %(posts)s messages.",e.profile.posts),interpolate(a,{username:e.profile.username,posts:e.profile.posts},!0)):gettext("Loading...")}return o.default.createElement(l.default,u({api:e.profile.api.posts,emptyMessage:t,header:r,title:gettext("Posts")},e))};var o=n(e("react")),l=n(e("./route"));function n(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}},{"./route":184,react:"react"}],184:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Feed=E,r.LoadMoreButton=w,r.default=void 0;var n=d(e("react")),a=d(e("../../post-feed")),o=d(e("../../button")),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../reducers/posts")),i=d(e("../../../services/page-title")),s=d(e("../../../services/ajax")),c=d(e("../../../services/snackbar")),f=d(e("../../../services/store"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function d(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=g(o);return t=l?(e=g(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==p(n)&&"function"!=typeof n?v(r):n}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(l,n.default.Component);var e,t,r,o=b(l);function l(e){var t,r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),r=v(t),a=function(){t.setState({isLoading:!0}),t.loadItems(t.props.posts.next)},(n="loadMore")in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,t.state={isLoading:!1},t}return e=l,(t=[{key:"loadItems",value:function(e){var t=this,r=0<arguments.length&&void 0!==e?e:0;s.default.get(this.props.api,{start:r||0}).then(function(e){0===r?f.default.dispatch(u.load(e)):f.default.dispatch(u.append(e)),t.setState({isLoading:!1})},function(e){t.setState({isLoading:!1}),c.default.apiError(e)})}},{key:"componentDidMount",value:function(){i.default.set({title:this.props.title,parent:this.props.profile.username}),this.loadItems()}},{key:"render",value:function(){return n.default.createElement("div",{className:"profile-feed"},n.default.createElement("nav",{className:"toolbar"},n.default.createElement("h3",{className:"toolbar-left"},this.props.header)),n.default.createElement(E,m({isLoading:this.state.isLoading,loadMore:this.loadMore},this.props)))}}])&&h(e.prototype,t),r&&h(e,r),l}();function E(e){return e.posts.results.length?n.default.createElement("div",null,n.default.createElement(a.default,{isReady:e.posts.isLoaded,posts:e.posts.results,poster:e.profile}),n.default.createElement(w,{isLoading:e.isLoading,loadMore:e.loadMore,next:e.posts.next})):n.default.createElement("p",{className:"lead"},e.emptyMessage)}function w(e){return e.next?n.default.createElement("div",{className:"pager-more"},n.default.createElement(o.default,{className:"btn btn-default btn-outline",loading:e.isLoading,onClick:e.loadMore},gettext("Show older activity"))):null}r.default=_},{"../../../reducers/posts":354,"../../../services/ajax":365,"../../../services/page-title":373,"../../../services/snackbar":376,"../../../services/store":377,"../../button":8,"../../post-feed":122,react:"react"}],185:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("react")),a=o(e("../button")),u=e("../../reducers/profile"),i=o(e("../../services/ajax")),s=o(e("../../services/snackbar")),c=o(e("../../services/store"));function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==f(n)&&"function"!=typeof n?h(r):n}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,n.default.Component);var e,t,r,o=m(l);function l(e){var t,r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),r=h(t),a=function(){t.setState({isLoading:!0}),t.props.profile.is_followed?c.default.dispatch((0,u.patch)({is_followed:!1,followers:t.props.profile.followers-1})):c.default.dispatch((0,u.patch)({is_followed:!0,followers:t.props.profile.followers+1})),i.default.post(t.props.profile.api.follow).then(function(e){t.setState({isLoading:!1}),c.default.dispatch((0,u.patch)(e))},function(e){t.setState({isLoading:!1}),s.default.apiError(e)})},(n="action")in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,t.state={isLoading:!1},t}return e=l,(t=[{key:"getClassName",value:function(){return this.props.profile.is_followed?this.props.className+" btn-default btn-following":this.props.className+" btn-default btn-follow"}},{key:"getIcon",value:function(){return this.props.profile.is_followed?"favorite":"favorite_border"}},{key:"getLabel",value:function(){return this.props.profile.is_followed?gettext("Following"):gettext("Follow")}},{key:"render",value:function(){return n.default.createElement(a.default,{className:this.getClassName(),disabled:this.state.isLoading,onClick:this.action},n.default.createElement("span",{className:"material-icon"},this.getIcon()),this.getLabel())}}])&&d(e.prototype,t),r&&d(e,r),l}();r.default=l},{"../../reducers/profile":356,"../../services/ajax":365,"../../services/snackbar":376,"../../services/store":377,"../button":8,react:"react"}],186:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../button")),u=n(e("../quick-search")),i=n(e("../users-list")),s=n(e("../..")),c=e("../../reducers/users"),f=n(e("../../services/ajax")),d=n(e("../../services/snackbar")),p=n(e("../../services/store")),m=n(e("../../services/page-title"));function n(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==h(n)&&"function"!=typeof n?g(r):n}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,o.default.Component);var e,t,r,n=v(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),E(g(t=n.call(this,e)),"loadMore",function(){t.setState({isBusy:!0}),t.loadUsers(t.state.page+1,t.state.search)}),E(g(t),"search",function(e){t.setState({isLoaded:!1,isBusy:!0,search:e.target.value,count:0,more:0,page:1,pages:1}),t.loadUsers(1,e.target.value)}),t.setSpecialProps(),s.default.has(t.PRELOADED_DATA_KEY)?t.initWithPreloadedData(s.default.pop(t.PRELOADED_DATA_KEY)):t.initWithoutPreloadedData(),t}return e=a,(t=[{key:"setSpecialProps",value:function(){this.PRELOADED_DATA_KEY="PROFILE_FOLLOWERS",this.TITLE=gettext("Followers"),this.API_FILTER="followers"}},{key:"initWithPreloadedData",value:function(e){this.state={isLoaded:!0,isBusy:!1,search:"",count:e.count,more:e.more,page:e.page,pages:e.pages},p.default.dispatch((0,c.hydrate)(e.results))}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1,isBusy:!1,search:"",count:0,more:0,page:1,pages:1},this.loadUsers()}},{key:"loadUsers",value:function(e,t){var r=this,n=0<arguments.length&&void 0!==e?e:1,a=1<arguments.length&&void 0!==t?t:null,o=this.props.profile.api[this.API_FILTER];f.default.get(o,{search:a,page:n||1},"user-"+this.API_FILTER).then(function(e){1===n?p.default.dispatch((0,c.hydrate)(e.results)):p.default.dispatch((0,c.append)(e.results)),r.setState({isLoaded:!0,isBusy:!1,count:e.count,more:e.more,page:e.page,pages:e.pages})},function(e){d.default.apiError(e)})}},{key:"componentDidMount",value:function(){m.default.set({title:this.TITLE,parent:this.props.profile.username})}},{key:"getLabel",value:function(){if(this.state.isLoaded){if(this.state.search){var e=ngettext("Found %(users)s user.","Found %(users)s users.",this.state.count);return interpolate(e,{users:this.state.count},!0)}if(this.props.profile.id===this.props.user.id){var t=ngettext("You have %(users)s follower.","You have %(users)s followers.",this.state.count);return interpolate(t,{users:this.state.count},!0)}var r=ngettext("%(username)s has %(users)s follower.","%(username)s has %(users)s followers.",this.state.count);return interpolate(r,{username:this.props.profile.username,users:this.state.count},!0)}return gettext("Loading...")}},{key:"getEmptyMessage",value:function(){return this.state.search?gettext("Search returned no users matching specified criteria."):this.props.user.id===this.props.profile.id?gettext("You have no followers."):interpolate(gettext("%(username)s has no followers."),{username:this.props.profile.username},!0)}},{key:"getMoreButton",value:function(){return this.state.more?o.default.createElement("div",{className:"pager-more"},o.default.createElement(l.default,{className:"btn btn-default btn-outline",loading:this.state.isBusy,onClick:this.loadMore},interpolate(gettext("Show more (%(more)s)"),{more:this.state.more},!0))):null}},{key:"getListBody",value:function(){return this.state.isLoaded&&0===this.state.count?o.default.createElement("p",{className:"lead"},this.getEmptyMessage()):o.default.createElement("div",null,o.default.createElement(i.default,{cols:3,isReady:this.state.isLoaded,users:this.props.users}),this.getMoreButton())}},{key:"getClassName",value:function(){return"profile-"+this.API_FILTER}},{key:"render",value:function(){return o.default.createElement("div",{className:this.getClassName()},o.default.createElement("nav",{className:"toolbar"},o.default.createElement("h3",{className:"toolbar-left"},this.getLabel()),o.default.createElement(u.default,{className:"toolbar-right",value:this.state.search,onChange:this.search,placeholder:gettext("Search users...")})),this.getListBody())}}])&&y(e.prototype,t),r&&y(e,r),a}();r.default=a},{"../..":302,"../../reducers/users":364,"../../services/ajax":365,"../../services/page-title":373,"../../services/snackbar":376,"../../services/store":377,"../button":8,"../quick-search":197,"../users-list":284,react:"react"}],187:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;n(e("react"));var o=n(e("./followers"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(a,o.default);var e,t,r,n=s(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"setSpecialProps",value:function(){this.PRELOADED_DATA_KEY="PROFILE_FOLLOWS",this.TITLE=gettext("Follows"),this.API_FILTER="follows"}},{key:"getLabel",value:function(){if(this.state.isLoaded){if(this.state.search){var e=ngettext("Found %(users)s user.","Found %(users)s users.",this.state.count);return interpolate(e,{users:this.state.count},!0)}if(this.props.profile.id===this.props.user.id){var t=ngettext("You are following %(users)s user.","You are following %(users)s users.",this.state.count);return interpolate(t,{users:this.state.count},!0)}var r=ngettext("%(username)s is following %(users)s user.","%(username)s is following %(users)s users.",this.state.count);return interpolate(r,{username:this.props.profile.username,users:this.state.count},!0)}return gettext("Loading...")}},{key:"getEmptyMessage",value:function(){return this.state.search?gettext("Search returned no users matching specified criteria."):this.props.user.id===this.props.profile.id?gettext("You are not following any users."):interpolate(gettext("%(username)s is not following any users."),{username:this.props.profile.username},!0)}}])&&l(e.prototype,t),r&&l(e,r),a}();r.default=a},{"./followers":186,react:"react"}],188:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IsDisabledMessage=v,r.getColStyle=g,r.default=void 0;var l=n(e("react")),u=n(e("../avatar")),o=(n(e("../dropdown-toggle")),n(e("./follow-button"))),i=n(e("./message-button")),s=n(e("./moderation/nav")),c=e("./navs"),f=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../user-status"));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=b(o);return t=l?(e=b(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==p(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,l.default.Component);var e,t,r,n=y(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"getUserStatus",value:function(){return l.default.createElement("li",{className:"user-status-display"},l.default.createElement(f.default,{user:this.props.profile,status:this.props.profile.status},l.default.createElement(f.StatusIcon,{user:this.props.profile,status:this.props.profile.status}),l.default.createElement(f.StatusLabel,{user:this.props.profile,status:this.props.profile.status,className:"status-label"})))}},{key:"getUserRank",value:function(){return this.props.profile.rank.is_tab?l.default.createElement("li",{className:"user-rank"},l.default.createElement("a",{href:this.props.profile.rank.url,className:"item-title"},this.props.profile.rank.name)):l.default.createElement("li",{className:"user-rank"},l.default.createElement("span",{className:"item-title"},this.props.profile.rank.name))}},{key:"getUserTitle",value:function(){return this.props.profile.title?l.default.createElement("li",{className:"user-title"},this.props.profile.title):this.props.profile.rank.title?l.default.createElement("li",{className:"user-title"},this.props.profile.rank.title):null}},{key:"getJoinedOn",value:function(){var e=interpolate(gettext("Joined on %(joined_on)s"),{joined_on:this.props.profile.joined_on.format("LL, LT")},!0),t=interpolate(gettext("Joined %(joined_on)s"),{joined_on:this.props.profile.joined_on.fromNow()},!0);return l.default.createElement("li",{className:"user-joined-on"},l.default.createElement("abbr",{title:e},t))}},{key:"getEmail",value:function(){return this.props.profile.email?l.default.createElement("li",{className:"user-email"},l.default.createElement("a",{href:"mailto:"+this.props.profile.email,className:"item-title"},this.props.profile.email)):null}},{key:"getFollowButton",value:function(){return this.props.profile.acl.can_follow?l.default.createElement(o.default,{className:"btn btn-block btn-outline",profile:this.props.profile}):null}},{key:"getModerationButton",value:function(){return this.props.profile.acl.can_moderate?l.default.createElement("div",{className:"btn-group btn-group-justified"},l.default.createElement("div",{className:"btn-group"},l.default.createElement("button",{className:"btn btn-default btn-moderate btn-outline dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},l.default.createElement("span",{className:"material-icon"},"tonality"),gettext("Moderation")),l.default.createElement(s.default,{profile:this.props.profile}))):null}},{key:"render",value:function(){var e=this.props.profile.acl.can_follow,t=this.props.profile.acl.can_moderate,r=!(this.props.user.id===this.props.profile.id)&&this.props.user.acl.can_start_private_threads,n=0;e&&(n+=1),t&&(n+=1),r&&(n+=1);var a=n?2*n+1:0,o="page-header";return this.props.profile.rank.css_class&&(o+=" page-header-rank-"+this.props.profile.rank.css_class),l.default.createElement("div",{className:"page-header-bg"},l.default.createElement("div",{className:o},l.default.createElement("div",{className:"container"},l.default.createElement(v,{isActive:this.props.profile.is_active,isDeletingAccount:this.props.profile.is_deleting_account}),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-md-9 col-md-offset-3"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-sm-"+(12-a)},l.default.createElement(u.default,{className:"user-avatar user-avatar-sm",user:this.props.profile,size:"100",size2x:"200"}),l.default.createElement("h1",null,this.props.profile.username)),!!n&&l.default.createElement("div",{className:"col-sm-"+a},l.default.createElement("div",{className:"row xs-margin-top sm-margin-top"},!!r&&l.default.createElement("div",{className:g(n,0)},l.default.createElement(i.default,{className:"btn btn-default btn-block btn-outline",profile:this.props.profile,user:this.props.user})),!!e&&l.default.createElement("div",{className:g(n,1)},this.getFollowButton()),!!t&&l.default.createElement("div",{className:g(n,2)},this.getModerationButton()))))))),l.default.createElement("div",{className:"header-stats"},l.default.createElement("div",{className:"container"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-md-9 col-md-offset-3"},l.default.createElement("ul",{className:"list-inline"},this.getUserStatus(),this.getUserRank(),this.getUserTitle(),this.getJoinedOn(),this.getEmail()))))),l.default.createElement(c.CompactNav,{baseUrl:this.props.baseUrl,pages:this.props.pages,profile:this.props.profile})))}}])&&m(e.prototype,t),r&&m(e,r),a}();function v(e){var t=e.isActive,r=e.isDeletingAccount;if(!1!==t&&!0!==r)return null;var n=null,n=r?gettext("This user is deleting their account."):gettext("This user's account has been disabled by administrator.");return l.default.createElement("div",{className:"alert alert-danger"},l.default.createElement("p",null,n))}function g(e,t){var r=2==e?"col-xs-6 col-sm-6":1==e?"col-xs-12":"";return 3==e&&(2==t?r="col-xs-12 col-sm-4 xs-margin-top":r+="col-xs-6 col-sm-4"),r}r.default=a},{"../avatar":6,"../dropdown-toggle":27,"../user-status":274,"./follow-button":185,"./message-button":189,"./moderation/nav":193,"./navs":194,react:"react"}],189:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("react")),s=a(e("../../services/posting")),c=a(e("../.."));function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=i(o);return t=l?(e=i(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?d(r):n}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,n.default.Component);var e,t,r,u=f(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t,r,n,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=u.call.apply(u,[this].concat(o)),t=d(e),n=function(){s.default.open({mode:"START_PRIVATE",submit:c.default.get("PRIVATE_THREADS_API"),to:[e.props.profile]})},(r="onClick")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e}return e=i,(t=[{key:"render",value:function(){var e=this.props.user.acl.can_start_private_threads,t=this.props.user.id===this.props.profile.id;return!e||t?null:n.default.createElement("button",{className:this.props.className,onClick:this.onClick,type:"button"},n.default.createElement("span",{className:"material-icon"},"comment"),gettext("Message"))}}])&&o(e.prototype,t),r&&o(e,r),i}();r.default=p},{"../..":302,"../../services/posting":375,react:"react"}],190:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../../button")),u=n(e("../../form")),i=n(e("../../form-group")),s=n(e("../../modal-loader")),c=n(e("../../yes-no-switch")),f=n(e("../../modal-message")),d=e("../../../reducers/users"),p=n(e("../../../services/ajax")),m=n(e("../../../services/snackbar")),h=n(e("../../../services/store"));function n(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==y(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(a,u.default);var e,t,r,n=g(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,e)).state={isLoaded:!1,isLoading:!1,error:null,is_avatar_locked:"",avatar_lock_user_message:"",avatar_lock_staff_message:""},t}return e=a,(t=[{key:"componentDidMount",value:function(){var t=this;p.default.get(this.props.profile.api.moderate_avatar).then(function(e){t.setState({isLoaded:!0,is_avatar_locked:e.is_avatar_locked,avatar_lock_user_message:e.avatar_lock_user_message||"",avatar_lock_staff_message:e.avatar_lock_staff_message||""})},function(e){t.setState({isLoaded:!0,error:e.detail})})}},{key:"clean",value:function(){return!!this.isValid()||(m.default.error(this.validate().username[0]),!1)}},{key:"send",value:function(){return p.default.post(this.props.profile.api.moderate_avatar,{is_avatar_locked:this.state.is_avatar_locked,avatar_lock_user_message:this.state.avatar_lock_user_message,avatar_lock_staff_message:this.state.avatar_lock_staff_message})}},{key:"handleSuccess",value:function(e){h.default.dispatch((0,d.updateAvatar)(this.props.profile,e.avatar_hash)),m.default.success(gettext("Avatar controls have been changed."))}},{key:"getFormBody",value:function(){return o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"modal-body"},o.default.createElement(i.default,{label:gettext("Lock avatar"),helpText:gettext("Locking user avatar will prohibit user from changing his avatar and will reset his/her avatar to default one."),for:"id_is_avatar_locked"},o.default.createElement(c.default,{id:"id_is_avatar_locked",disabled:this.state.isLoading,iconOn:"lock_outline",iconOff:"lock_open",labelOn:gettext("Disallow user from changing avatar"),labelOff:gettext("Allow user to change avatar"),onChange:this.bindInput("is_avatar_locked"),value:this.state.is_avatar_locked})),o.default.createElement(i.default,{label:gettext("User message"),helpText:gettext("Optional message for user explaining why he/she is prohibited form changing avatar."),for:"id_avatar_lock_user_message"},o.default.createElement("textarea",{id:"id_avatar_lock_user_message",className:"form-control",rows:"4",disabled:this.state.isLoading,onChange:this.bindInput("avatar_lock_user_message"),value:this.state.avatar_lock_user_message})),o.default.createElement(i.default,{label:gettext("Staff message"),helpText:gettext("Optional message for forum team members explaining why user is prohibited form changing avatar."),for:"id_avatar_lock_staff_message"},o.default.createElement("textarea",{id:"id_avatar_lock_staff_message",className:"form-control",rows:"4",disabled:this.state.isLoading,onChange:this.bindInput("avatar_lock_staff_message"),value:this.state.avatar_lock_staff_message}))),o.default.createElement("div",{className:"modal-footer"},o.default.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},gettext("Close")),o.default.createElement(l.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Save changes"))))}},{key:"getModalBody",value:function(){return this.state.error?o.default.createElement(f.default,{icon:"remove_circle_outline",message:this.state.error}):this.state.isLoaded?this.getFormBody():o.default.createElement(s.default,null)}},{key:"getClassName",value:function(){return this.state.error?"modal-dialog modal-message modal-avatar-controls":"modal-dialog modal-avatar-controls"}},{key:"render",value:function(){return o.default.createElement("div",{className:this.getClassName(),role:"document"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},o.default.createElement("span",{"aria-hidden":"true"},"×")),o.default.createElement("h4",{className:"modal-title"},gettext("Avatar controls"))),this.getModalBody()))}}])&&b(e.prototype,t),r&&b(e,r),a}();r.default=a},{"../../../reducers/users":364,"../../../services/ajax":365,"../../../services/snackbar":376,"../../../services/store":377,"../../button":8,"../../form":56,"../../form-group":55,"../../modal-loader":61,"../../modal-message":62,"../../yes-no-switch":300,react:"react"}],191:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../../button")),u=n(e("../../form")),i=n(e("../../form-group")),s=n(e("../../modal-loader")),c=n(e("../../modal-message")),f=e("../../../reducers/username-history"),d=e("../../../reducers/users"),p=n(e("../../../services/ajax")),m=n(e("../../../services/snackbar")),h=n(e("../../../services/store")),y=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==v(e)&&"function"!=typeof e)return{default:e};var t=b();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../utils/validators"));function b(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return b=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=w(o);return t=l?(e=w(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==v(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(a,u.default);var e,t,r,n=E(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,e)).state={isLoaded:!1,isLoading:!1,error:null,username:"",validators:{username:[y.usernameContent()]}},t}return e=a,(t=[{key:"componentDidMount",value:function(){var t=this;p.default.get(this.props.profile.api.moderate_username).then(function(){t.setState({isLoaded:!0})},function(e){t.setState({isLoaded:!0,error:e.detail})})}},{key:"clean",value:function(){return!!this.isValid()||(m.default.error(this.validate().username[0]),!1)}},{key:"send",value:function(){return p.default.post(this.props.profile.api.moderate_username,{username:this.state.username})}},{key:"handleSuccess",value:function(e){this.setState({username:""}),h.default.dispatch((0,f.addNameChange)(e,this.props.profile,this.props.user)),h.default.dispatch((0,d.updateUsername)(this.props.profile,e.username,e.slug)),m.default.success(gettext("Username has been changed."))}},{key:"getFormBody",value:function(){return o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"modal-body"},o.default.createElement(i.default,{label:gettext("New username"),for:"id_username"},o.default.createElement("input",{type:"text",id:"id_username",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("username"),value:this.state.username}))),o.default.createElement("div",{className:"modal-footer"},o.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel")),o.default.createElement(l.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Change username"))))}},{key:"getModalBody",value:function(){return this.state.error?o.default.createElement(c.default,{icon:"remove_circle_outline",message:this.state.error}):this.state.isLoaded?this.getFormBody():o.default.createElement(s.default,null)}},{key:"getClassName",value:function(){return this.state.error?"modal-dialog modal-message modal-rename-user":"modal-dialog modal-rename-user"}},{key:"render",value:function(){return o.default.createElement("div",{className:this.getClassName(),role:"document"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},o.default.createElement("span",{"aria-hidden":"true"},"×")),o.default.createElement("h4",{className:"modal-title"},gettext("Change username"))),this.getModalBody()))}}])&&g(e.prototype,t),r&&g(e,r),a}();r.default=a},{"../../../reducers/username-history":363,"../../../reducers/users":364,"../../../services/ajax":365,"../../../services/snackbar":376,"../../../services/store":377,"../../../utils/validators":393,"../../button":8,"../../form":56,"../../form-group":55,"../../modal-loader":61,"../../modal-message":62,react:"react"}],192:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("react")),a=o(e("../../button")),u=o(e("../../form")),i=o(e("../../form-group")),s=o(e("../../modal-loader")),c=o(e("../../modal-message")),f=o(e("../../yes-no-switch")),d=o(e("../../..")),p=o(e("../../../services/ajax")),m=o(e("../../../services/polls"));function o(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==h(n)&&"function"!=typeof n?g(r):n}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(l,u.default);var e,t,r,o=v(l);function l(e){var t,r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),r=g(t),a=function(){window.setTimeout(function(){1<t.state.countdown?(t.setState({countdown:t.state.countdown-1}),t.countdown()):t.state.confirm||t.setState({confirm:!0})},1e3)},(n="countdown")in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,t.state={isLoaded:!1,isLoading:!1,isDeleted:!1,error:null,countdown:5,confirm:!1,with_content:!1},t}return e=l,(t=[{key:"componentDidMount",value:function(){var t=this;p.default.get(this.props.profile.api.delete).then(function(){t.setState({isLoaded:!0}),t.countdown()},function(e){t.setState({isLoaded:!0,error:e.detail})})}},{key:"send",value:function(){return p.default.post(this.props.profile.api.delete,{with_content:this.state.with_content})}},{key:"handleSuccess",value:function(){m.default.stop("user-profile"),this.state.with_content?this.setState({isDeleted:interpolate(gettext("%(username)s's account, threads, posts and other content has been deleted."),{username:this.props.profile.username},!0)}):this.setState({isDeleted:interpolate(gettext("%(username)s's account has been deleted and other content has been hidden."),{username:this.props.profile.username},!0)})}},{key:"getButtonLabel",value:function(){return this.state.confirm?interpolate(gettext("Delete %(username)s"),{username:this.props.profile.username},!0):interpolate(gettext("Please wait... (%(countdown)ss)"),{countdown:this.state.countdown},!0)}},{key:"getForm",value:function(){return n.default.createElement("form",{onSubmit:this.handleSubmit},n.default.createElement("div",{className:"modal-body"},n.default.createElement(i.default,{label:gettext("User content"),for:"id_with_content"},n.default.createElement(f.default,{id:"id_with_content",disabled:this.state.isLoading,labelOn:gettext("Delete together with user's account"),labelOff:gettext("Hide after deleting user's account"),onChange:this.bindInput("with_content"),value:this.state.with_content}))),n.default.createElement("div",{className:"modal-footer"},n.default.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},gettext("Cancel")),n.default.createElement(a.default,{className:"btn-danger",loading:this.state.isLoading,disabled:!this.state.confirm},this.getButtonLabel())))}},{key:"getDeletedBody",value:function(){return n.default.createElement("div",{className:"modal-body"},n.default.createElement("div",{className:"message-icon"},n.default.createElement("span",{className:"material-icon"},"info_outline")),n.default.createElement("div",{className:"message-body"},n.default.createElement("p",{className:"lead"},this.state.isDeleted),n.default.createElement("p",null,n.default.createElement("a",{href:d.default.get("USERS_LIST_URL")},gettext("Return to users list")))))}},{key:"getModalBody",value:function(){return this.state.error?n.default.createElement(c.default,{icon:"remove_circle_outline",message:this.state.error}):this.state.isLoaded?this.state.isDeleted?this.getDeletedBody():this.getForm():n.default.createElement(s.default,null)}},{key:"getClassName",value:function(){return this.state.error||this.state.isDeleted?"modal-dialog modal-message modal-delete-account":"modal-dialog modal-delete-account"}},{key:"render",value:function(){return n.default.createElement("div",{className:this.getClassName(),role:"document"},n.default.createElement("div",{className:"modal-content"},n.default.createElement("div",{className:"modal-header"},n.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},n.default.createElement("span",{"aria-hidden":"true"},"×")),n.default.createElement("h4",{className:"modal-title"},gettext("Delete user account"))),this.getModalBody()))}}])&&y(e.prototype,t),r&&y(e,r),l}();r.default=l},{"../../..":302,"../../../services/ajax":365,"../../../services/polls":374,"../../button":8,"../../form":56,"../../form-group":55,"../../modal-loader":61,"../../modal-message":62,"../../yes-no-switch":300,react:"react"}],193:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("react")),l=e("react-redux"),u=a(e("./avatar-controls")),i=a(e("./change-username")),s=a(e("./delete-account")),c=a(e("../../../services/modal"));function a(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==f(n)&&"function"!=typeof n?h(r):n}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){return{tick:e.tick,user:e.auth,profile:e.profile}},o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,n.default.Component);var e,t,r,a=m(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return b(h(e=a.call.apply(a,[this].concat(r))),"showAvatarDialog",function(){c.default.show((0,l.connect)(v)(u.default))}),b(h(e),"showRenameDialog",function(){c.default.show((0,l.connect)(v)(i.default))}),b(h(e),"showDeleteDialog",function(){c.default.show((0,l.connect)(v)(s.default))}),e}return e=o,(t=[{key:"getAvatarButton",value:function(){return this.props.profile.acl.can_moderate_avatar?n.default.createElement("li",null,n.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.showAvatarDialog},n.default.createElement("span",{className:"material-icon"},"portrait"),gettext("Avatar controls"))):null}},{key:"getRenameButton",value:function(){return this.props.profile.acl.can_rename?n.default.createElement("li",null,n.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.showRenameDialog},n.default.createElement("span",{className:"material-icon"},"credit_card"),gettext("Change username"))):null}},{key:"getDeleteButton",value:function(){return this.props.profile.acl.can_delete?n.default.createElement("li",null,n.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.showDeleteDialog},n.default.createElement("span",{className:"material-icon"},"clear"),gettext("Delete account"))):null}},{key:"render",value:function(){return n.default.createElement("ul",{className:"dropdown-menu dropdown-menu-right stick-to-bottom",role:"menu"},this.getAvatarButton(),this.getRenameButton(),this.getDeleteButton())}}])&&d(e.prototype,t),r&&d(e,r),o}();r.default=o},{"../../../services/modal":371,"./avatar-controls":190,"./change-username":191,"./delete-account":192,react:"react","react-redux":"react-redux"}],194:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CompactNav=function(t){return o.default.createElement("div",{className:"page-tabs hidden-md hidden-lg"},o.default.createElement("div",{className:"container"},o.default.createElement("ul",{className:"nav nav-pills",role:"menu"},t.pages.map(function(e){return o.default.createElement(n.default,{path:t.baseUrl+e.component+"/",key:e.component},o.default.createElement(l.Link,{to:t.baseUrl+e.component+"/",onClick:t.hideNav},o.default.createElement("span",{className:"material-icon"},e.icon),e.name))}))))},r.SideNav=void 0;var o=a(e("react")),l=e("react-router"),n=a(e("../li"));a(e("./follow-button")),a(e("../.."));function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,r,n=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){var t=this;return o.default.createElement("div",{className:"list-group nav-side"},this.props.pages.map(function(e){return o.default.createElement(l.Link,{to:t.props.baseUrl+e.component+"/",className:"list-group-item",activeClassName:"active",key:e.component},o.default.createElement("span",{className:"material-icon"},e.icon),e.name)}))}}])&&i(e.prototype,t),r&&i(e,r),a}();r.SideNav=d},{"../..":302,"../li":57,"./follow-button":185,react:"react","react-router":"react-router"}],195:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.select=S,r.paths=function(){var t=[];return h.default.get("PROFILE_PAGES").forEach(function(e){t.push(Object.assign({},e,{path:h.default.get("PROFILE").url+e.component+"/",component:(0,a.connect)(S)(N[e.component])}))}),t},r.default=void 0;var n=g(e("react")),a=e("react-redux"),o=g(e("./ban-details")),l=g(e("./details")),u=e("./feed"),i=g(e("./followers")),s=g(e("./follows")),c=g(e("./username-history")),f=g(e("./header")),d=(g(e("./moderation/nav")),e("./navs")),p=g(e("../avatar")),m=g(e("../with-dropdown")),h=g(e("../..")),y=e("../../reducers/profile"),b=g(e("../../services/polls")),v=g(e("../../services/store"));function g(e){return e&&e.__esModule?e:{default:e}}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=k(o);return t=l?(e=k(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==_(n)&&"function"!=typeof n?P(r):n}}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(l,m.default);var e,t,r,o=O(l);function l(e){var t,r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),r=P(t),a=function(e){v.default.dispatch((0,y.hydrate)(e))},(n="update")in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,t.startPolling(e.profile.api.index),t}return e=l,(t=[{key:"startPolling",value:function(e){b.default.start({poll:"user-profile",url:e,frequency:9e4,update:this.update})}},{key:"render",value:function(){var e=h.default.get("PROFILE").url,t=h.default.get("PROFILE_PAGES");return n.default.createElement("div",{className:"page page-user-profile"},n.default.createElement(f.default,{baseUrl:e,pages:t,profile:this.props.profile,toggleNav:this.toggleNav,toggleModeration:this.toggleModeration,user:this.props.user}),n.default.createElement("div",{className:"container"},n.default.createElement("div",{className:"row"},n.default.createElement("div",{className:"col-md-3 hidden-xs hidden-sm"},n.default.createElement("div",{className:"profile-side-avatar"},n.default.createElement(p.default,{user:this.props.profile,size:"400"})),n.default.createElement(d.SideNav,{baseUrl:e,pages:t,profile:this.props.profile})),n.default.createElement("div",{className:"col-md-9"},this.props.children))))}}])&&E(e.prototype,t),r&&E(e,r),l}();function S(e){return{isAuthenticated:e.auth.user.id===e.profile.id,tick:e.tick.tick,user:e.auth.user,users:e.users,posts:e.posts,profile:e.profile,profileDetails:e["profile-details"],"username-history":e["username-history"]}}r.default=j;var N={posts:u.Posts,threads:u.Threads,followers:i.default,follows:s.default,details:l.default,"username-history":c.default,"ban-details":o.default}},{"../..":302,"../../reducers/profile":356,"../../services/polls":374,"../../services/store":377,"../avatar":6,"../with-dropdown":299,"./ban-details":174,"./details":182,"./feed":183,"./followers":186,"./follows":187,"./header":188,"./moderation/nav":193,"./navs":194,"./username-history":196,react:"react","react-redux":"react-redux"}],196:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../button")),u=n(e("../quick-search")),i=n(e("../username-history/root")),s=n(e("../..")),c=e("../../reducers/username-history"),f=n(e("../../services/ajax")),d=n(e("../../services/snackbar")),p=n(e("../../services/store")),m=n(e("../../services/page-title"));function n(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==h(n)&&"function"!=typeof n?g(r):n}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,o.default.Component);var e,t,r,n=v(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),E(g(t=n.call(this,e)),"loadMore",function(){t.setState({isBusy:!0}),t.loadChanges(t.state.page+1,t.state.search)}),E(g(t),"search",function(e){t.setState({isLoaded:!1,isBusy:!0,search:e.target.value,count:0,more:0,page:1,pages:1}),t.loadChanges(1,e.target.value)}),s.default.has("PROFILE_NAME_HISTORY")?t.initWithPreloadedData(s.default.pop("PROFILE_NAME_HISTORY")):t.initWithoutPreloadedData(),t}return e=a,(t=[{key:"initWithPreloadedData",value:function(e){this.state={isLoaded:!0,isBusy:!1,search:"",count:e.count,more:e.more,page:e.page,pages:e.pages},p.default.dispatch((0,c.hydrate)(e.results))}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1,isBusy:!1,search:"",count:0,more:0,page:1,pages:1},this.loadChanges()}},{key:"loadChanges",value:function(e,t){var r=this,n=0<arguments.length&&void 0!==e?e:1,a=1<arguments.length&&void 0!==t?t:null;f.default.get(s.default.get("USERNAME_CHANGES_API"),{user:this.props.profile.id,search:a,page:n||1},"search-username-history").then(function(e){1===n?p.default.dispatch((0,c.hydrate)(e.results)):p.default.dispatch((0,c.append)(e.results)),r.setState({isLoaded:!0,isBusy:!1,count:e.count,more:e.more,page:e.page,pages:e.pages})},function(e){d.default.apiError(e)})}},{key:"componentDidMount",value:function(){m.default.set({title:gettext("Username history"),parent:this.props.profile.username})}},{key:"getLabel",value:function(){if(this.state.isLoaded){if(this.state.search){var e=ngettext("Found %(changes)s username change.","Found %(changes)s username changes.",this.state.count);return interpolate(e,{changes:this.state.count},!0)}if(this.props.profile.id===this.props.user.id){var t=ngettext("Your username was changed %(changes)s time.","Your username was changed %(changes)s times.",this.state.count);return interpolate(t,{changes:this.state.count},!0)}var r=ngettext("%(username)s's username was changed %(changes)s time.","%(username)s's username was changed %(changes)s times.",this.state.count);return interpolate(r,{username:this.props.profile.username,changes:this.state.count},!0)}return gettext("Loading...")}},{key:"getEmptyMessage",value:function(){return this.state.search?gettext("Search returned no username changes matching specified criteria."):this.props.user.id===this.props.profile.id?gettext("No name changes have been recorded for your account."):interpolate(gettext("%(username)s's username was never changed."),{username:this.props.profile.username},!0)}},{key:"getMoreButton",value:function(){return this.state.more?o.default.createElement("div",{className:"pager-more"},o.default.createElement(l.default,{className:"btn btn-default btn-outline",loading:this.state.isBusy,onClick:this.loadMore},interpolate(gettext("Show older (%(more)s)"),{more:this.state.more},!0))):null}},{key:"render",value:function(){return o.default.createElement("div",{className:"profile-username-history"},o.default.createElement("nav",{className:"toolbar"},o.default.createElement("h3",{className:"toolbar-left"},this.getLabel()),o.default.createElement(u.default,{className:"toolbar-right",value:this.state.search,onChange:this.search,placeholder:gettext("Search history...")})),o.default.createElement(i.default,{isLoaded:this.state.isLoaded,emptyMessage:this.getEmptyMessage(),changes:this.props["username-history"]}),this.getMoreButton())}}])&&y(e.prototype,t),r&&y(e,r),a}();r.default=a},{"../..":302,"../../reducers/username-history":363,"../../services/ajax":365,"../../services/page-title":373,"../../services/snackbar":376,"../../services/store":377,"../button":8,"../quick-search":197,"../username-history/root":280,react:"react"}],197:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("react"))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(a,o.default.Component);var e,t,r,n=s(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"getClassName",value:function(){return this.props.className?"form-search "+this.props.className:"form-search"}},{key:"render",value:function(){return o.default.createElement("div",{className:this.getClassName()},o.default.createElement("input",{type:"text",className:"form-control",value:this.props.value,onChange:this.props.onChange,placeholder:this.props.placeholder||gettext("Search...")}),o.default.createElement("span",{className:"material-icon"},"search"))}}])&&l(e.prototype,t),r&&l(e,r),a}();r.default=a},{react:"react"}],198:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=a(e("react")),n=a(e("./loader")),i=a(e("./register.js")),s=a(e("../services/ajax")),c=a(e("../services/captcha")),f=a(e("../services/modal")),d=a(e("../services/snackbar"));function a(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==p(n)&&"function"!=typeof n?b(r):n}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(l,u.default.Component);var e,t,r,o=y(l);function l(e){var t,r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),r=b(t),a=function(){"closed"===misago.get("SETTINGS").account_activation?d.default.info(gettext("New registrations are currently disabled.")):t.state.isLoaded?f.default.show(u.default.createElement(i.default,{criteria:t.state.criteria})):(t.setState({isLoading:!0}),Promise.all([c.default.load(),s.default.get(misago.get("AUTH_CRITERIA_API"))]).then(function(e){t.setState({isLoading:!1,isLoaded:!0,criteria:e[1]}),f.default.show(u.default.createElement(i.default,{criteria:e[1]}))},function(){t.setState({isLoading:!1}),d.default.error(gettext("Registration is currently unavailable due to an error."))}))},(n="showRegisterForm")in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,t.state={isLoading:!1,isLoaded:!1,criteria:null},t}return e=l,(t=[{key:"getClassName",value:function(){return this.props.className+(this.state.isLoading?" btn-loading":"")}},{key:"render",value:function(){return u.default.createElement("button",{className:"btn "+this.getClassName(),disabled:this.state.isLoading,onClick:this.showRegisterForm,type:"button"},gettext("Register"),this.state.isLoading?u.default.createElement(n.default,null):null)}}])&&m(e.prototype,t),r&&m(e,r),l}();r.default=o},{"../services/ajax":365,"../services/captcha":367,"../services/modal":371,"../services/snackbar":376,"./loader":58,"./register.js":199,react:"react"}],199:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.RegisterComplete=r.RegisterForm=void 0;var a=g(e("react")),n=g(e("./button")),o=g(e("./form")),u=g(e("./form-group")),s=g(e("./password-strength")),c=g(e("./RegisterLegalFootnote")),f=g(e("./StartSocialAuth")),d=g(e("./..")),p=g(e("../services/ajax")),l=g(e("../services/auth")),m=g(e("../services/captcha")),h=g(e("../services/modal")),y=g(e("../services/snackbar")),b=g(e("../utils/banned-page")),v=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../utils/validators"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function g(e){return e&&e.__esModule?e:{default:e}}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function w(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach(function(e){M(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t,r){return t&&k(e.prototype,t),r&&k(e,r),e}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=C(o);return t=l?(e=C(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==_(n)&&"function"!=typeof n?R(r):n}}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=function(){S(i,o.default);var l=x(i);function i(e){var u;P(this,i),M(R(u=l.call(this,e)),"handlePrivacyPolicyChange",function(e){var t=e.target.value;u.handleToggleAgreement("privacyPolicy",t)}),M(R(u),"handleTermsOfServiceChange",function(e){var t=e.target.value;u.handleToggleAgreement("termsOfService",t)}),M(R(u),"handleToggleAgreement",function(o,l){u.setState(function(e,t){if(null===e[o]){var r=O(O({},e.errors),{},M({},o,null));return M({errors:r},o,l)}var n=u.state.validators[o][0],a=O(O({},e.errors),{},M({},o,[n(null)]));return M({errors:a},o,null)})});var t=u.props.criteria,r=t.username,n=t.password,a=0;n.forEach(function(e){"MinimumLengthValidator"===e.name&&(a=e.min_length)});var o={username:[v.usernameContent(),v.usernameMinLength(r.min_length),v.usernameMaxLength(r.max_length)],email:[v.email()],password:[v.passwordMinLength(a)],captcha:m.default.validator()};return d.default.get("TERMS_OF_SERVICE_ID")&&(o.termsOfService=[v.requiredTermsOfService()]),d.default.get("PRIVACY_POLICY_ID")&&(o.privacyPolicy=[v.requiredPrivacyPolicy()]),u.state={isLoading:!1,username:"",email:"",password:"",captcha:"",termsOfService:null,privacyPolicy:null,validators:o,errors:{}},u}return j(i,[{key:"clean",value:function(){return!!this.isValid()||(y.default.error(gettext("Form contains errors.")),this.setState({errors:this.validate()}),!1)}},{key:"send",value:function(){return p.default.post(d.default.get("USERS_API"),{username:this.state.username,email:this.state.email,password:this.state.password,captcha:this.state.captcha,terms_of_service:this.state.termsOfService,privacy_policy:this.state.privacyPolicy})}},{key:"handleSuccess",value:function(e){this.props.callback(e)}},{key:"handleError",value:function(e){400===e.status?(this.setState({errors:Object.assign({},this.state.errors,e)}),e.__all__&&0<e.__all__.length?y.default.error(e.__all__[0]):y.default.error(gettext("Form contains errors."))):403===e.status&&e.ban?((0,b.default)(e.ban),h.default.hide()):y.default.apiError(e)}},{key:"render",value:function(){return a.default.createElement("div",{className:"modal-dialog modal-register",role:"document"},a.default.createElement("div",{className:"modal-content"},a.default.createElement("div",{className:"modal-header"},a.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},a.default.createElement("span",{"aria-hidden":"true"},"×")),a.default.createElement("h4",{className:"modal-title"},gettext("Register"))),a.default.createElement("form",{onSubmit:this.handleSubmit},a.default.createElement("input",{type:"type",style:{display:"none"}}),a.default.createElement("input",{type:"password",style:{display:"none"}}),a.default.createElement("div",{className:"modal-body"},a.default.createElement(f.default,{buttonClassName:"col-xs-12 col-sm-6",buttonLabel:gettext("Join with %(site)s"),formLabel:gettext("Or create forum account:")}),a.default.createElement(u.default,{label:gettext("Username"),for:"id_username",validation:this.state.errors.username},a.default.createElement("input",{type:"text",id:"id_username",className:"form-control","aria-describedby":"id_username_status",disabled:this.state.isLoading,onChange:this.bindInput("username"),value:this.state.username})),a.default.createElement(u.default,{label:gettext("E-mail"),for:"id_email",validation:this.state.errors.email},a.default.createElement("input",{type:"text",id:"id_email",className:"form-control","aria-describedby":"id_email_status",disabled:this.state.isLoading,onChange:this.bindInput("email"),value:this.state.email})),a.default.createElement(u.default,{label:gettext("Password"),for:"id_password",validation:this.state.errors.password,extra:a.default.createElement(s.default,{password:this.state.password,inputs:[this.state.username,this.state.email]})},a.default.createElement("input",{type:"password",id:"id_password",className:"form-control","aria-describedby":"id_password_status",disabled:this.state.isLoading,onChange:this.bindInput("password"),value:this.state.password})),m.default.component({form:this}),a.default.createElement(c.default,{errors:this.state.errors,privacyPolicy:this.state.privacyPolicy,termsOfService:this.state.termsOfService,onPrivacyPolicyChange:this.handlePrivacyPolicyChange,onTermsOfServiceChange:this.handleTermsOfServiceChange})),a.default.createElement("div",{className:"modal-footer"},a.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel")),a.default.createElement(n.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Register account"))))))}}]),i}();r.RegisterForm=T;var D=function(){S(t,a.default.Component);var e=x(t);function t(){return P(this,t),e.apply(this,arguments)}return j(t,[{key:"getLead",value:function(){return"user"===this.props.activation?gettext("%(username)s, your account has been created but you need to activate it before you will be able to sign in."):"admin"===this.props.activation?gettext("%(username)s, your account has been created but board administrator will have to activate it before you will be able to sign in."):void 0}},{key:"getSubscript",value:function(){return"user"===this.props.activation?gettext("We have sent an e-mail to %(email)s with link that you have to click to activate your account."):"admin"===this.props.activation?gettext("We will send an e-mail to %(email)s when this takes place."):void 0}},{key:"render",value:function(){return a.default.createElement("div",{className:"modal-dialog modal-message modal-register",role:"document"},a.default.createElement("div",{className:"modal-content"},a.default.createElement("div",{className:"modal-header"},a.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},a.default.createElement("span",{"aria-hidden":"true"},"×")),a.default.createElement("h4",{className:"modal-title"},gettext("Registration complete"))),a.default.createElement("div",{className:"modal-body"},a.default.createElement("div",{className:"message-icon"},a.default.createElement("span",{className:"material-icon"},"info_outline")),a.default.createElement("div",{className:"message-body"},a.default.createElement("p",{className:"lead"},interpolate(this.getLead(),{username:this.props.username},!0)),a.default.createElement("p",null,interpolate(this.getSubscript(),{email:this.props.email},!0)),a.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},gettext("Ok"))))))}}]),t}();r.RegisterComplete=D;var L=function(){S(n,a.default.Component);var r=x(n);function n(e){var t;return P(this,n),M(R(t=r.call(this,e)),"completeRegistration",function(e){"active"===e.activation?(h.default.hide(),l.default.signIn(e)):t.setState({complete:e})}),t.state={complete:!1},t}return j(n,[{key:"render",value:function(){return this.state.complete?a.default.createElement(D,{activation:this.state.complete.activation,email:this.state.complete.email,username:this.state.complete.username}):a.default.createElement(T,E({callback:this.completeRegistration},this.props))}}]),n}();r.default=L},{"../services/ajax":365,"../services/auth":366,"../services/captcha":367,"../services/modal":371,"../services/snackbar":376,"../utils/banned-page":379,"../utils/validators":393,"./..":302,"./RegisterLegalFootnote":1,"./StartSocialAuth":2,"./button":8,"./form":56,"./form-group":55,"./password-strength":103,react:"react"}],200:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.LinkSent=r.RequestLinkForm=void 0;var a=n(e("react")),o=n(e("./..")),l=n(e("./button")),u=n(e("./form")),i=n(e("../services/ajax")),s=n(e("../services/snackbar")),c=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../utils/validators")),f=n(e("../utils/banned-page"));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=w(o);return t=l?(e=w(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==p(n)&&"function"!=typeof n?E(r):n}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(){v(n,u.default);var r=_(n);function n(e){var t;return h(this,n),(t=r.call(this,e)).state={isLoading:!1,email:"",validators:{email:[c.email()]}},t}return b(n,[{key:"clean",value:function(){return!!this.isValid()||(s.default.error(gettext("Enter a valid email address.")),!1)}},{key:"send",value:function(){return i.default.post(o.default.get("SEND_ACTIVATION_API"),{email:this.state.email})}},{key:"handleSuccess",value:function(e){this.props.callback(e)}},{key:"handleError",value:function(e){-1<["already_active","inactive_admin"].indexOf(e.code)?s.default.info(e.detail):403===e.status&&e.ban?(0,f.default)(e.ban):s.default.apiError(e)}},{key:"render",value:function(){return a.default.createElement("div",{className:"well well-form well-form-request-activation-link"},a.default.createElement("form",{onSubmit:this.handleSubmit},a.default.createElement("div",{className:"form-group"},a.default.createElement("div",{className:"control-input"},a.default.createElement("input",{type:"text",className:"form-control",placeholder:gettext("Your e-mail address"),disabled:this.state.isLoading,onChange:this.bindInput("email"),value:this.state.email}))),a.default.createElement(l.default,{className:"btn-primary btn-block",loading:this.state.isLoading},gettext("Send link"))))}}]),n}();r.RequestLinkForm=O;var P=function(){v(t,a.default.Component);var e=_(t);function t(){return h(this,t),e.apply(this,arguments)}return b(t,[{key:"getMessage",value:function(){return interpolate(gettext("Activation link was sent to %(email)s"),{email:this.props.user.email},!0)}},{key:"render",value:function(){return a.default.createElement("div",{className:"well well-form well-form-request-activation-link well-done"},a.default.createElement("div",{className:"done-message"},a.default.createElement("div",{className:"message-icon"},a.default.createElement("span",{className:"material-icon"},"check")),a.default.createElement("div",{className:"message-body"},a.default.createElement("p",null,this.getMessage())),a.default.createElement("button",{className:"btn btn-primary btn-block",type:"button",onClick:this.props.callback},gettext("Request another link"))))}}]),t}();r.LinkSent=P;var k=function(){v(n,a.default.Component);var r=_(n);function n(e){var t;return h(this,n),m(E(t=r.call(this,e)),"complete",function(e){t.setState({complete:e})}),m(E(t),"reset",function(){t.setState({complete:!1})}),t.state={complete:!1},t}return b(n,[{key:"render",value:function(){return this.state.complete?a.default.createElement(P,{user:this.state.complete,callback:this.reset}):a.default.createElement(O,{callback:this.complete})}}]),n}();r.default=k},{"../services/ajax":365,"../services/snackbar":376,"../utils/banned-page":379,"../utils/validators":393,"./..":302,"./button":8,"./form":56,react:"react"}],201:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.AccountInactivePage=r.LinkSent=r.RequestResetForm=void 0;var a=n(e("react")),o=n(e("react-dom")),l=n(e("./..")),u=n(e("./button")),i=n(e("./form")),s=n(e("../services/ajax")),c=n(e("../services/snackbar")),f=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==m(e)&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../utils/validators")),d=n(e("../utils/banned-page"));function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,r){return t&&b(e.prototype,t),r&&b(e,r),e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=O(o);return t=l?(e=O(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==m(n)&&"function"!=typeof n?w(r):n}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(){g(n,i.default);var r=E(n);function n(e){var t;return y(this,n),(t=r.call(this,e)).state={isLoading:!1,email:"",validators:{email:[f.email()]}},t}return v(n,[{key:"clean",value:function(){return!!this.isValid()||(c.default.error(gettext("Enter a valid email address.")),!1)}},{key:"send",value:function(){return s.default.post(l.default.get("SEND_PASSWORD_RESET_API"),{email:this.state.email})}},{key:"handleSuccess",value:function(e){this.props.callback(e)}},{key:"handleError",value:function(e){-1<["inactive_user","inactive_admin"].indexOf(e.code)?this.props.showInactivePage(e):403===e.status&&e.ban?(0,d.default)(e.ban):c.default.apiError(e)}},{key:"render",value:function(){return a.default.createElement("div",{className:"well well-form well-form-request-password-reset"},a.default.createElement("form",{onSubmit:this.handleSubmit},a.default.createElement("div",{className:"form-group"},a.default.createElement("div",{className:"control-input"},a.default.createElement("input",{type:"text",className:"form-control",placeholder:gettext("Your e-mail address"),disabled:this.state.isLoading,onChange:this.bindInput("email"),value:this.state.email}))),a.default.createElement(u.default,{className:"btn-primary btn-block",loading:this.state.isLoading},gettext("Send link"))))}}]),n}();r.RequestResetForm=P;var k=function(){g(t,a.default.Component);var e=E(t);function t(){return y(this,t),e.apply(this,arguments)}return v(t,[{key:"getMessage",value:function(){return interpolate(gettext("Reset password link was sent to %(email)s"),{email:this.props.user.email},!0)}},{key:"render",value:function(){return a.default.createElement("div",{className:"well well-form well-form-request-password-reset well-done"},a.default.createElement("div",{className:"done-message"},a.default.createElement("div",{className:"message-icon"},a.default.createElement("span",{className:"material-icon"},"check")),a.default.createElement("div",{className:"message-body"},a.default.createElement("p",null,this.getMessage())),a.default.createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:this.props.callback},gettext("Request another link"))))}}]),t}();r.LinkSent=k;var j=function(){g(t,a.default.Component);var e=E(t);function t(){return y(this,t),e.apply(this,arguments)}return v(t,[{key:"getActivateButton",value:function(){return"inactive_user"===this.props.activation?a.default.createElement("p",null,a.default.createElement("a",{href:l.default.get("REQUEST_ACTIVATION_URL")},gettext("Activate your account."))):null}},{key:"render",value:function(){return a.default.createElement("div",{className:"page page-message page-message-info page-forgotten-password-inactive"},a.default.createElement("div",{className:"container"},a.default.createElement("div",{className:"message-panel"},a.default.createElement("div",{className:"message-icon"},a.default.createElement("span",{className:"material-icon"},"info_outline")),a.default.createElement("div",{className:"message-body"},a.default.createElement("p",{className:"lead"},gettext("Your account is inactive.")),a.default.createElement("p",null,this.props.message),this.getActivateButton()))))}}]),t}();r.AccountInactivePage=j;var S=function(){g(n,a.default.Component);var r=E(n);function n(e){var t;return y(this,n),h(w(t=r.call(this,e)),"complete",function(e){t.setState({complete:e})}),h(w(t),"reset",function(){t.setState({complete:!1})}),t.state={complete:!1},t}return v(n,[{key:"showInactivePage",value:function(e){o.default.render(a.default.createElement(j,{activation:e.code,message:e.detail}),document.getElementById("page-mount"))}},{key:"render",value:function(){return this.state.complete?a.default.createElement(k,{callback:this.reset,user:this.state.complete}):a.default.createElement(P,{callback:this.complete,showInactivePage:this.showInactivePage})}}]),n}();r.default=S},{"../services/ajax":365,"../services/snackbar":376,"../utils/banned-page":379,"../utils/validators":393,"./..":302,"./button":8,"./form":56,react:"react","react-dom":"react-dom"}],202:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.PasswordChangedPage=r.ResetPasswordForm=void 0;var s=m(e("react")),c=m(e("react-dom")),a=m(e("./..")),o=m(e("./button")),l=m(e("./form")),n=m(e("./sign-in.js")),u=m(e("../services/ajax")),f=m(e("../services/auth")),i=m(e("../services/modal")),d=m(e("../services/snackbar")),p=m(e("../utils/banned-page"));function m(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,r){return t&&b(e.prototype,t),r&&b(e,r),e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=O(o);return t=l?(e=O(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==h(n)&&"function"!=typeof n?w(r):n}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(){g(n,l.default);var r=E(n);function n(e){var t;return y(this,n),(t=r.call(this,e)).state={isLoading:!1,password:""},t}return v(n,[{key:"clean",value:function(){return!!this.state.password.trim().length||(d.default.error(gettext("Enter new password.")),!1)}},{key:"send",value:function(){return u.default.post(a.default.get("CHANGE_PASSWORD_API"),{password:this.state.password})}},{key:"handleSuccess",value:function(e){this.props.callback(e)}},{key:"handleError",value:function(e){403===e.status&&e.ban?(0,p.default)(e.ban):d.default.apiError(e)}},{key:"render",value:function(){return s.default.createElement("div",{className:"well well-form well-form-reset-password"},s.default.createElement("form",{onSubmit:this.handleSubmit},s.default.createElement("div",{className:"form-group"},s.default.createElement("div",{className:"control-input"},s.default.createElement("input",{type:"password",className:"form-control",placeholder:gettext("Enter new password"),disabled:this.state.isLoading,onChange:this.bindInput("password"),value:this.state.password}))),s.default.createElement(o.default,{className:"btn-primary btn-block",loading:this.state.isLoading},gettext("Change password"))))}}]),n}();r.ResetPasswordForm=P;var k=function(){g(t,s.default.Component);var e=E(t);function t(){return y(this,t),e.apply(this,arguments)}return v(t,[{key:"getMessage",value:function(){return interpolate(gettext("%(username)s, your password has been changed successfully."),{username:this.props.user.username},!0)}},{key:"showSignIn",value:function(){i.default.show(n.default)}},{key:"render",value:function(){return s.default.createElement("div",{className:"page page-message page-message-success page-forgotten-password-changed"},s.default.createElement("div",{className:"container"},s.default.createElement("div",{className:"message-panel"},s.default.createElement("div",{className:"message-icon"},s.default.createElement("span",{className:"material-icon"},"check")),s.default.createElement("div",{className:"message-body"},s.default.createElement("p",{className:"lead"},this.getMessage()),s.default.createElement("p",null,gettext("You will have to sign in using new password before continuing.")),s.default.createElement("p",null,s.default.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.showSignIn},gettext("Sign in")))))))}}]),t}();r.PasswordChangedPage=k;var j=function(){g(i,s.default.Component);var u=E(i);function i(){var e;y(this,i);for(var t,r,n,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=u.call.apply(u,[this].concat(o)),t=w(e),n=function(e){f.default.softSignOut(),$('#hidden-login-form input[name="redirect_to"]').remove(),c.default.render(s.default.createElement(k,{user:e}),document.getElementById("page-mount"))},(r="complete")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e}return v(i,[{key:"render",value:function(){return s.default.createElement(P,{callback:this.complete})}}]),i}();r.default=j},{"../services/ajax":365,"../services/auth":366,"../services/modal":371,"../services/snackbar":376,"../utils/banned-page":379,"./..":302,"./button":8,"./form":56,"./sign-in.js":211,react:"react","react-dom":"react-dom"}],203:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("react")),a=o(e("../..")),u=o(e("../form")),i=e("../../reducers/posts"),s=e("../../reducers/search"),c=e("../../reducers/users"),f=o(e("../../services/ajax")),d=o(e("../../services/snackbar")),p=o(e("../../services/store"));function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=g(o);return t=l?(e=g(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==m(n)&&"function"!=typeof n?v(r):n}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(l,u.default);var e,t,r,o=b(l);function l(e){var t,r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),r=v(t),a=function(e){t.changeValue("query",e.target.value)},(n="onQueryChange")in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,t.state={isLoading:!1,query:e.search.query},t}return e=l,(t=[{key:"componentDidMount",value:function(){this.state.query.length&&this.handleSubmit()}},{key:"clean",value:function(){return!!this.state.query.trim().length||(d.default.error(gettext("You have to enter search query.")),!1)}},{key:"send",value:function(){return p.default.dispatch((0,s.update)({isLoading:!0})),f.default.get(a.default.get("SEARCH_API"),{q:this.state.query.trim()})}},{key:"handleSuccess",value:function(e){p.default.dispatch((0,s.update)({query:this.state.query.trim(),isLoading:!1,providers:e})),e.forEach(function(e){"users"===e.id?p.default.dispatch((0,c.hydrate)(e.results.results)):"threads"===e.id&&p.default.dispatch((0,i.load)(e.results))})}},{key:"handleError",value:function(e){d.default.apiError(e),p.default.dispatch((0,s.update)({isLoading:!1}))}},{key:"render",value:function(){return n.default.createElement("div",{className:"page-header-bg"},n.default.createElement("div",{className:"page-header page-search-form"},n.default.createElement("form",{onSubmit:this.handleSubmit},n.default.createElement("div",{className:"container"},n.default.createElement("div",{className:"row"},n.default.createElement("div",{className:"col-xs-12 col-md-3"},n.default.createElement("h1",null,gettext("Search"))),n.default.createElement("div",{className:"col-xs-12 col-md-9"},n.default.createElement("div",{className:"row xs-margin-top sm-margin-top"},n.default.createElement("div",{className:"col-xs-12 col-sm-8 col-md-9"},n.default.createElement("div",{className:"form-group"},n.default.createElement("input",{className:"form-control",disabled:this.props.search.isLoading||this.state.isLoading,onChange:this.onQueryChange,type:"text",value:this.state.query}))),n.default.createElement("div",{className:"col-xs-12 col-sm-4 col-md-3"},n.default.createElement("button",{className:"btn btn-primary btn-block btn-outline",disabled:this.props.search.isLoading||this.state.isLoading},gettext("Search"))))))))))}}])&&h(e.prototype,t),r&&h(e,r),l}();r.default=l},{"../..":302,"../../reducers/posts":354,"../../reducers/search":357,"../../reducers/users":364,"../../services/ajax":365,"../../services/snackbar":376,"../../services/store":377,"../form":56,react:"react"}],204:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.select=i,r.default=function(e){return e.map(function(e){return{path:e.url,component:(0,n.connect)(i)(u[e.id]),provider:e}})};var n=e("react-redux"),a=l(e("./threads")),o=l(e("./users"));function l(e){return e&&e.__esModule?e:{default:e}}var u={threads:a.default,users:o.default};function i(e){return{posts:e.posts,search:e.search,tick:e.tick.tick,user:e.auth.user,users:e.users}}},{"./threads":207,"./users":209,"react-redux":"react-redux"}],205:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement("div",{className:"page page-search"},n.default.createElement(a.default,{provider:e.provider,search:e.search}),n.default.createElement("div",{className:"container"},n.default.createElement("div",{className:"row"},n.default.createElement("div",{className:"col-md-3"},n.default.createElement(o.default,{providers:e.search.providers})),n.default.createElement("div",{className:"col-md-9"},e.children,n.default.createElement(u,{provider:e.provider,search:e.search})))))},r.SearchTime=u;var n=l(e("react")),a=l(e("./form")),o=l(e("./sidenav"));function l(e){return e&&e.__esModule?e:{default:e}}function u(t){var r=null;if(t.search.providers.forEach(function(e){e.id===t.provider.id&&(r=e.time)}),null===r)return null;var e=gettext("Search took %(time)s s to complete");return n.default.createElement("footer",{className:"search-footer"},n.default.createElement("p",null,interpolate(e,{time:r},!0)))}},{"./form":203,"./sidenav":206,react:"react"}],206:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return a.default.createElement("div",{className:"list-group nav-side"},e.providers.map(function(e){return a.default.createElement(o.Link,{activeClassName:"active",className:"list-group-item",key:e.id,to:e.url},a.default.createElement("span",{className:"material-icon"},e.icon),e.name,a.default.createElement(l,{results:e.results}))}))},r.Badge=l;var n,a=(n=e("react"))&&n.__esModule?n:{default:n},o=e("react-router");function l(e){if(!e.results)return null;var t=e.results.count;return 1e6<t?t=Math.ceil(t/1e6)+"KK":1e3<t&&(t=Math.ceil(t/1e3)+"K"),a.default.createElement("span",{className:"badge"},t)}},{react:"react","react-router":"react-router"}],207:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement(a.default,{provider:e.route.provider,search:e.search},n.default.createElement(i,{query:e.search.query,posts:e.posts},n.default.createElement(o.default,u({provider:e.route.provider,query:e.search.query},e.posts))))},r.Blankslate=i;var n=l(e("react")),a=l(e("../page")),o=l(e("./results"));function l(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e){return e.posts&&e.posts.count?e.children:e.query.length?n.default.createElement("p",{className:"lead"},gettext("No threads matching search query have been found.")):n.default.createElement("p",{className:"lead"},gettext("Enter at least two characters to search threads."))}},{"../page":205,"./results":208,react:"react"}],208:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement("div",null,n.default.createElement(a.default,{isReady:!0,posts:e.results}),n.default.createElement(v,e))},r.LoadMore=void 0;var n=l(e("react")),a=l(e("../../post-feed")),o=l(e("../../button")),s=(l(e("../../misago-markup")),e("../../../reducers/posts")),c=e("../../../reducers/search"),f=l(e("../../../services/ajax")),d=l(e("../../../services/snackbar")),p=l(e("../../../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=i(o);return t=l?(e=i(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?b(r):n}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(i,n.default.Component);var e,t,r,u=y(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t,r,n,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=u.call.apply(u,[this].concat(o)),t=b(e),n=function(){p.default.dispatch((0,s.update)({isBusy:!0})),f.default.get(e.props.provider.api,{q:e.props.query,page:e.props.next}).then(function(e){e.forEach(function(e){"threads"===e.id&&(p.default.dispatch((0,s.append)(e.results)),p.default.dispatch((0,c.updateProvider)(e)))}),p.default.dispatch((0,s.update)({isBusy:!1}))},function(e){d.default.apiError(e),p.default.dispatch((0,s.update)({isBusy:!1}))})},(r="onClick")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e}return e=i,(t=[{key:"render",value:function(){return this.props.more?n.default.createElement("div",{className:"pager-more"},n.default.createElement(o.default,{className:"btn btn-default btn-outline",loading:this.props.isBusy,onClick:this.onClick},gettext("Show more"))):null}}])&&m(e.prototype,t),r&&m(e,r),i}();r.LoadMore=v},{"../../../reducers/posts":354,"../../../reducers/search":357,"../../../services/ajax":365,"../../../services/snackbar":376,"../../../services/store":377,"../../button":8,"../../misago-markup":60,"../../post-feed":122,react:"react"}],209:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement(a.default,{provider:e.route.provider,search:e.search},n.default.createElement(u,{query:e.search.query,users:e.users},n.default.createElement(o.default,{cols:3,isReady:!0,users:e.users})))},r.Blankslate=u;var n=l(e("react")),a=l(e("../page")),o=l(e("../../users-list"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return e.users.length?e.children:e.query.length?n.default.createElement("p",{className:"lead"},gettext("No users matching search query have been found.")):n.default.createElement("p",{className:"lead"},gettext("Enter at least two characters to search users."))}},{"../../users-list":284,"../page":205,react:"react"}],210:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Icon=d,r.default=void 0;var n,a=(n=e("react"))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=i(o);return t=l?(e=i(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?c(r):n}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,a.default.Component);var e,t,r,u=s(i);function i(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var e,r,n,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return t=u.call.apply(u,[this].concat(o)),e=c(t),n=function(e){return function(){t.props.onChange({target:{value:e}})}},(r="change")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=i,(t=[{key:"getChoice",value:function(){var t=this,r=null;return this.props.choices.map(function(e){e.value===t.props.value&&(r=e)}),r}},{key:"getIcon",value:function(){return this.getChoice().icon}},{key:"getLabel",value:function(){return this.getChoice().label}},{key:"render",value:function(){var r=this;return a.default.createElement("div",{className:"btn-group btn-select-group"},a.default.createElement("button",{type:"button",className:"btn btn-select dropdown-toggle",id:this.props.id||null,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false","aria-describedby":this.props["aria-describedby"]||null,disabled:this.props.disabled||!1},a.default.createElement(d,{icon:this.getIcon()}),this.getLabel()),a.default.createElement("ul",{className:"dropdown-menu"},this.props.choices.map(function(e,t){return a.default.createElement("li",{key:t},a.default.createElement("button",{type:"button",className:"btn-link",onClick:r.change(e.value)},a.default.createElement(d,{icon:e.icon}),e.label))})))}}])&&o(e.prototype,t),r&&o(e,r),i}();function d(e){var t=e.icon;return t?a.default.createElement("span",{className:"material-icon"},t):null}r.default=f},{react:"react"}],211:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("./..")),u=n(e("./button")),i=n(e("./form")),s=n(e("./StartSocialAuth")),c=n(e("../services/ajax")),f=n(e("../services/modal")),d=n(e("../services/snackbar")),p=n(e("../utils/banned-page"));function n(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==m(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(a,i.default);var e,t,r,n=b(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,e)).state={isLoading:!1,showActivation:!1,username:"",password:"",validators:{username:[],password:[]}},t}return e=a,(t=[{key:"clean",value:function(){return!!this.isValid()||(d.default.error(gettext("Fill out both fields.")),!1)}},{key:"send",value:function(){return c.default.post(l.default.get("AUTH_API"),{username:this.state.username,password:this.state.password})}},{key:"handleSuccess",value:function(){var e=$("#hidden-login-form");e.append('<input type="text" name="username" />'),e.append('<input type="password" name="password" />'),e.find('input[type="hidden"]').val(c.default.getCsrfToken()),e.find('input[name="redirect_to"]').val(window.location.pathname),e.find('input[name="username"]').val(this.state.username),e.find('input[name="password"]').val(this.state.password),e.submit(),this.setState({isLoading:!0})}},{key:"handleError",value:function(e){400===e.status?"inactive_admin"===e.code?d.default.info(e.detail):"inactive_user"===e.code?(d.default.info(e.detail),this.setState({showActivation:!0})):"banned"===e.code?((0,p.default)(e.detail),f.default.hide()):d.default.error(e.detail):403===e.status&&e.ban?((0,p.default)(e.ban),f.default.hide()):d.default.apiError(e)}},{key:"getActivationButton",value:function(){return this.state.showActivation?o.default.createElement("a",{className:"btn btn-success btn-block",href:l.default.get("REQUEST_ACTIVATION_URL")},gettext("Activate account")):null}},{key:"render",value:function(){return o.default.createElement("div",{className:"modal-dialog modal-sm modal-sign-in",role:"document"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},o.default.createElement("span",{"aria-hidden":"true"},"×")),o.default.createElement("h4",{className:"modal-title"},gettext("Sign in"))),o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"modal-body"},o.default.createElement(s.default,{buttonLabel:gettext("Sign in with %(site)s"),formLabel:gettext("Or use your forum account:"),labelClassName:"text-center"}),o.default.createElement("div",{className:"form-group"},o.default.createElement("div",{className:"control-input"},o.default.createElement("input",{className:"form-control input-lg",disabled:this.state.isLoading,id:"id_username",onChange:this.bindInput("username"),placeholder:gettext("Username or e-mail"),type:"text",value:this.state.username}))),o.default.createElement("div",{className:"form-group"},o.default.createElement("div",{className:"control-input"},o.default.createElement("input",{className:"form-control input-lg",disabled:this.state.isLoading,id:"id_password",onChange:this.bindInput("password"),placeholder:gettext("Password"),type:"password",value:this.state.password})))),o.default.createElement("div",{className:"modal-footer"},this.getActivationButton(),o.default.createElement(u.default,{className:"btn-primary btn-block",loading:this.state.isLoading},gettext("Sign in")),o.default.createElement("a",{className:"btn btn-default btn-block",href:l.default.get("FORGOTTEN_PASSWORD_URL")},gettext("Forgot password?"))))))}}])&&h(e.prototype,t),r&&h(e,r),a}();r.default=a},{"../services/ajax":365,"../services/modal":371,"../services/snackbar":376,"../utils/banned-page":379,"./..":302,"./StartSocialAuth":2,"./button":8,"./form":56,react:"react"}],212:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.select=function(e){return e.snackbar},r.Snackbar=void 0;var n,o=(n=e("react"))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f={info:"alert-info",success:"alert-success",warning:"alert-warning",error:"alert-danger"},a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(a,o.default.Component);var e,t,r,n=s(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"getSnackbarClass",value:function(){var e="alerts-snackbar";return this.props.isVisible?e+=" in":e+=" out",e}},{key:"render",value:function(){return o.default.createElement("div",{className:this.getSnackbarClass()},o.default.createElement("p",{className:"alert "+f[this.props.type]},this.props.message))}}])&&l(e.prototype,t),r&&l(e,r),a}();r.Snackbar=a},{react:"react"}],213:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=n(e("react")),u=n(e("./header")),i=n(e("../.."));function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.activation,r=e.backend_name,n=e.username,a="",o="",o="user"===t?gettext("%(username)s, your account has been created but you need to activate it before you will be able to sign in."):"admin"===t?gettext("%(username)s, your account has been created but board administrator will have to activate it before you will be able to sign in."):gettext("%(username)s, your account has been created and you have been signed in to it."),a="active"===t?"check":"info_outline";return l.default.createElement("div",{className:"page page-social-auth page-social-sauth-register"},l.default.createElement(u.default,{backendName:r}),l.default.createElement("div",{className:"container"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-md-6 col-md-offset-3"},l.default.createElement("div",{className:"panel panel-default panel-form"},l.default.createElement("div",{className:"panel-heading"},l.default.createElement("h3",{className:"panel-title"},gettext("Registration completed!"))),l.default.createElement("div",{className:"panel-body panel-message-body"},l.default.createElement("div",{className:"message-icon"},l.default.createElement("span",{className:"material-icon"},a)),l.default.createElement("div",{className:"message-body"},l.default.createElement("p",{className:"lead"},interpolate(o,{username:n},!0)),l.default.createElement("p",{className:"help-block"},l.default.createElement("a",{className:"btn btn-default",href:i.default.get("MISAGO_PATH")},gettext("Return to forum index"))))))))))}r.default=a},{"../..":302,"./header":214,react:"react"}],214:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,a=(n=e("react"))&&n.__esModule?n:{default:n};function o(e){var t=e.backendName,r=gettext("Sign in with %(backend)s"),n=interpolate(r,{backend:t},!0);return a.default.createElement("div",{className:"page-header-bg"},a.default.createElement("div",{className:"page-header"},a.default.createElement("div",{className:"container"},a.default.createElement("h1",null,n))))}r.default=o},{react:"react"}],215:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("react")),s=n(e("./register")),c=n(e("./complete"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=m(o);return t=l?(e=m(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?p(r):n}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(l,i.default.Component);var e,t,r,a=d(l);function l(e){var o,t,r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),o=a.call(this,e),t=p(o),n=function(e){var t=e.activation,r=e.email,n=e.step,a=e.username;o.setState({activation:t,email:r,step:n,username:a})},(r="handleRegistrationComplete")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,o.state={step:e.step,activation:e.activation||"",email:e.email||"",username:e.username||""},o}return e=l,(t=[{key:"render",value:function(){var e=this.props,t=e.backend_name,r=e.url,n=this.state,a=n.activation,o=n.email,l=n.step,u=n.username;return"register"===l?i.default.createElement(s.default,{backend_name:t,email:o,url:r,username:u,onRegistrationComplete:this.handleRegistrationComplete}):i.default.createElement(c.default,{activation:a,backend_name:t,email:o,url:r,username:u})}}])&&o(e.prototype,t),r&&o(e,r),l}();r.default=a},{"./complete":213,"./register":216,react:"react"}],216:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("react")),o=n(e("../..")),s=n(e("../RegisterLegalFootnote")),c=n(e("../button")),l=n(e("../form")),f=n(e("../form-group")),u=n(e("../../services/ajax")),d=n(e("../../services/snackbar")),p=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==y(e)&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../utils/validators")),m=n(e("./header"));function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach(function(e){O(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=w(o);return t=l?(e=w(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==y(n)&&"function"!=typeof n?E(r):n}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(a,l.default);var e,t,r,n=_(a);function a(e){var u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),O(E(u=n.call(this,e)),"handlePrivacyPolicyChange",function(e){var t=e.target.value;u.handleToggleAgreement("privacyPolicy",t)}),O(E(u),"handleTermsOfServiceChange",function(e){var t=e.target.value;u.handleToggleAgreement("termsOfService",t)}),O(E(u),"handleToggleAgreement",function(o,l){u.setState(function(e,t){if(null===e[o]){var r=b(b({},e.errors),{},O({},o,null));return O({errors:r},o,l)}var n=u.state.validators[o][0],a=b(b({},e.errors),{},O({},o,[n(null)]));return O({errors:a},o,null)})});var t={email:[p.email()],username:[p.usernameContent()]};return o.default.get("TERMS_OF_SERVICE_ID")&&(t.termsOfService=[p.requiredTermsOfService()]),o.default.get("PRIVACY_POLICY_ID")&&(t.privacyPolicy=[p.requiredPrivacyPolicy()]),u.state={email:e.email||"",emailProtected:!!e.email,username:e.username||"",termsOfService:null,privacyPolicy:null,validators:t,errors:{},isLoading:!1},u}return e=a,(t=[{key:"clean",value:function(){this.validate();if(-1!==[this.state.email.trim().length,this.state.username.trim().length].indexOf(0))return d.default.error(gettext("Fill out all fields.")),!1;var e=this.state.validators;return o.default.get("TERMS_OF_SERVICE_ID")&&null===this.state.termsOfService?(d.default.error(e.termsOfService[0](null)),!1):!o.default.get("PRIVACY_POLICY_ID")||null!==this.state.privacyPolicy||(d.default.error(e.privacyPolicy[0](null)),d.default.error(gettext("You need to accept the privacy policy.")),!1)}},{key:"send",value:function(){return u.default.post(this.props.url,{email:this.state.email,username:this.state.username,terms_of_service:this.state.termsOfService,privacy_policy:this.state.privacyPolicy})}},{key:"handleSuccess",value:function(e){(0,this.props.onRegistrationComplete)(e)}},{key:"handleError",value:function(e){var t;200===e.status?(0,this.props.onRegistrationComplete)({activation:"active",step:"done",username:this.state.username}):400===e.status?(t={errors:e},e.email&&(t.emailProtected=!1),this.setState(t)):d.default.apiError(e)}},{key:"render",value:function(){var e,t=this.props.backend_name,r=this.state,n=r.email,a=r.emailProtected,o=r.username,l=r.isLoading,u=null;return a&&(e=gettext("Your e-mail address has been verified by %(backend)s."),u=interpolate(e,{backend:t},!0)),i.default.createElement("div",{className:"page page-social-auth page-social-sauth-register"},i.default.createElement(m.default,{backendName:t}),i.default.createElement("div",{className:"container"},i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-md-6 col-md-offset-3"},i.default.createElement("form",{onSubmit:this.handleSubmit},i.default.createElement("div",{className:"panel panel-default panel-form"},i.default.createElement("div",{className:"panel-heading"},i.default.createElement("h3",{className:"panel-title"},gettext("Complete your details"))),i.default.createElement("div",{className:"panel-body"},i.default.createElement(f.default,{for:"id_username",label:gettext("Username"),validation:this.state.errors.username},i.default.createElement("input",{type:"text",id:"id_username",className:"form-control",disabled:l,onChange:this.bindInput("username"),value:o})),i.default.createElement(f.default,{for:"id_email",label:gettext("E-mail address"),helpText:u,validation:a?null:this.state.errors.email},i.default.createElement("input",{type:"email",id:"id_email",className:"form-control",disabled:l||a,onChange:this.bindInput("email"),value:n})),i.default.createElement(s.default,{errors:this.state.errors,privacyPolicy:this.state.privacyPolicy,termsOfService:this.state.termsOfService,onPrivacyPolicyChange:this.handlePrivacyPolicyChange,onTermsOfServiceChange:this.handleTermsOfServiceChange})),i.default.createElement("div",{className:"panel-footer"},i.default.createElement(c.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Sign in")))))))))}}])&&v(e.prototype,t),r&&v(e,r),a}();r.default=P},{"../..":302,"../../services/ajax":365,"../../services/snackbar":376,"../../utils/validators":393,"../RegisterLegalFootnote":1,"../button":8,"../form":56,"../form-group":55,"./header":214,react:"react"}],217:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return a.default.createElement("div",{className:"page-breadcrumbs"},a.default.createElement("div",{className:"container"},a.default.createElement("ol",{className:"breadcrumb hidden-xs"},e.path.map(function(e){return a.default.createElement(o,{key:e.id,node:e})})),a.default.createElement(l,e)))},r.Breadcrumb=o,r.GoBack=l;var n,a=(n=e("react"))&&n.__esModule?n:{default:n};function o(e){return a.default.createElement("li",null,a.default.createElement("a",{href:e.node.url.index},e.node.name))}function l(e){var t=e.path[e.path.length-1];return a.default.createElement("a",{href:t.url.index,className:"go-back-sm visible-xs-block"},a.default.createElement("span",{className:"material-icon"},"chevron_left"),t.name)}},{react:"react"}],218:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Moderation=P,r.default=void 0;var o=n(e("react")),l=n(e("./breadcrumbs")),u=e("../moderation/thread"),i=n(e("./stats")),s=n(e("../../form")),c=e("../../posting/utils/validators"),f=n(e("../../../services/ajax")),d=n(e("../../../services/snackbar")),p=n(e("../../../services/store")),m=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==y(e)&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../reducers/thread"));function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=w(o);return t=l?(e=w(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==y(n)&&"function"!=typeof n?E(r):n}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(a,s.default);var e,t,r,n=_(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),O(E(t=n.call(this,e)),"onChange",function(e){t.changeValue("title",e.target.value)}),O(E(t),"onEdit",function(){t.setState({isEditing:!0})}),O(E(t),"onCancel",function(){t.setState({title:t.props.thread.title,isEditing:!1})}),t.state={isEditing:!1,isLoading:!1,title:e.thread.title,validators:{title:(0,c.getTitleValidators)()},errors:{}},t}return e=a,(t=[{key:"clean",value:function(){if(!this.state.title.trim().length)return d.default.error(gettext("You have to enter thread title.")),!1;var e=this.validate();return!e.title||(d.default.error(e.title[0]),!1)}},{key:"send",value:function(){return f.default.patch(this.props.thread.api.index,[{op:"replace",path:"title",value:this.state.title}])}},{key:"handleSuccess",value:function(e){p.default.dispatch(m.update(e)),this.setState({isEditing:!1})}},{key:"handleError",value:function(e){400===e.status?d.default.error(e.detail[0]):d.default.apiError(e)}},{key:"render",value:function(){var e=this.props,t=e.thread,r=e.user,n=!!r.id&&(0,u.isModerationVisible)(t);return this.state.isEditing?o.default.createElement("div",{className:"page-header"},o.default.createElement(l.default,{path:t.path}),o.default.createElement("div",{className:"container"},o.default.createElement("div",{className:"row xs-margin-top title-edit-form"},o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"col-sm-6 col-md-6"},o.default.createElement("input",{className:"form-control",type:"text",value:this.state.title,onChange:this.onChange})),o.default.createElement("div",{className:"col-sm-6 col-md-4"},o.default.createElement("div",{className:"row xs-margin-top-half sm-margin-top-no md-margin-top-no"},o.default.createElement("div",{className:"col-xs-6"},o.default.createElement("button",{className:"btn btn-primary btn-block btn-outline",disabled:this.state.isLoading,title:gettext("Change title")},gettext("Save changes"))),o.default.createElement("div",{className:"col-xs-6"},o.default.createElement("button",{className:"btn btn-default btn-block btn-outline",disabled:this.state.isLoading,onClick:this.onCancel,title:gettext("Cancel"),type:"button"},gettext("Cancel")))))))),o.default.createElement(i.default,{thread:t})):r.id&&t.acl.can_edit?o.default.createElement("div",{className:"page-header"},o.default.createElement(l.default,{path:t.path}),o.default.createElement("div",{className:"container"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:n?"col-sm-9 col-md-8":"col-sm-10 col-md-10"},o.default.createElement("h1",null,t.title)),o.default.createElement("div",{className:n?"col-sm-3 col-md-4":"col-sm-3 col-md-2"},o.default.createElement("div",{className:"row xs-margin-top md-margin-top-no"},o.default.createElement("div",{className:n?"col-xs-6":"col-xs-12"},o.default.createElement("button",{className:"btn btn-default btn-block btn-outline",onClick:this.onEdit,title:gettext("Edit title"),type:"button"},o.default.createElement("span",{className:"material-icon"},"edit"),o.default.createElement("span",{className:"hidden-sm"},gettext("Edit")))),n&&o.default.createElement(P,this.props))))),o.default.createElement(i.default,{thread:t})):n?o.default.createElement("div",{className:"page-header"},o.default.createElement(l.default,{path:t.path}),o.default.createElement("div",{className:"container"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-sm-9 col-md-10"},o.default.createElement("h1",null,t.title)),o.default.createElement("div",{className:"col-sm-3 col-md-2"},o.default.createElement("div",{className:"row xs-margin-top md-margin-top-no"},o.default.createElement(P,b({isSingle:!0},this.props)))))),o.default.createElement(i.default,{thread:t})):o.default.createElement("div",{className:"page-header"},o.default.createElement(l.default,{path:t.path}),o.default.createElement("div",{className:"container"},o.default.createElement("h1",null,t.title)),o.default.createElement(i.default,{thread:t}))}}])&&v(e.prototype,t),r&&v(e,r),a}();function P(e){return o.default.createElement("div",{className:e.isSingle?"col-xs-12":"col-xs-6"},o.default.createElement("div",{className:"btn-group btn-group-justified"},o.default.createElement("div",{className:"btn-group"},o.default.createElement("button",{"aria-expanded":"false","aria-haspopup":"true",className:"btn btn-default btn-outline dropdown-toggle","data-toggle":"dropdown",disabled:e.thread.isBusy,type:"button"},o.default.createElement("span",{className:"material-icon"},"settings"),o.default.createElement("span",{className:e.isSingle?"":"hidden-sm"},gettext("Moderation"))),o.default.createElement(u.ModerationControls,{posts:e.posts,thread:e.thread,user:e.user}))))}r.default=a},{"../../../reducers/thread":360,"../../../services/ajax":365,"../../../services/snackbar":376,"../../../services/store":377,"../../form":56,"../../posting/utils/validators":144,"../moderation/thread":227,"./breadcrumbs":217,"./stats":219,react:"react"}],219:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Weight=s,r.Unapproved=c,r.IsHidden=f,r.IsClosed=d,r.Replies=p,r.LastReply=m,r.default=function(e){return a.default.createElement("div",{className:"header-stats"},a.default.createElement("div",{className:"container"},a.default.createElement("ul",{className:"list-inline"},a.default.createElement(s,{thread:e.thread}),a.default.createElement(c,{thread:e.thread}),a.default.createElement(f,{thread:e.thread}),a.default.createElement(d,{thread:e.thread}),a.default.createElement(p,{thread:e.thread}),a.default.createElement(m,{thread:e.thread}))))};var a=n(e("react")),o=n(e("../../../utils/escape-html"));function n(e){return e&&e.__esModule?e:{default:e}}var l='<a href="%(url)s" class="poster-title">%(user)s</a>',u='<span class="poster-title">%(user)s</span>',i='<abbr class="last-title" title="%(absolute)s">%(relative)s</abbr>';function s(e){return 2==e.thread.weight?a.default.createElement("li",{className:"thread-pinned-globally"},a.default.createElement("span",{className:"material-icon"},"bookmark"),a.default.createElement("span",{className:"icon-legend"},gettext("Pinned globally"))):1==e.thread.weight?a.default.createElement("li",{className:"thread-pinned-locally"},a.default.createElement("span",{className:"material-icon"},"bookmark_border"),a.default.createElement("span",{className:"icon-legend"},gettext("Pinned locally"))):null}function c(e){return e.thread.is_unapproved?a.default.createElement("li",{className:"thread-unapproved"},a.default.createElement("span",{className:"material-icon"},"remove_circle"),a.default.createElement("span",{className:"icon-legend"},gettext("Unapproved"))):e.thread.has_unapproved_posts?a.default.createElement("li",{className:"thread-unapproved-posts"},a.default.createElement("span",{className:"material-icon"},"remove_circle_outline"),a.default.createElement("span",{className:"icon-legend"},gettext("Unapproved posts"))):null}function f(e){return e.thread.is_hidden?a.default.createElement("li",{className:"thread-hidden"},a.default.createElement("span",{className:"material-icon"},"visibility_off"),a.default.createElement("span",{className:"icon-legend"},gettext("Hidden"))):null}function d(e){return e.thread.is_closed?a.default.createElement("li",{className:"thread-closed"},a.default.createElement("span",{className:"material-icon"},"lock_outline"),a.default.createElement("span",{className:"icon-legend"},gettext("Closed"))):null}function p(e){var t=ngettext("%(replies)s reply","%(replies)s replies",e.thread.replies),r=interpolate(t,{replies:e.thread.replies},!0);return a.default.createElement("li",{className:"thread-replies"},a.default.createElement("span",{className:"material-icon"},"forum"),a.default.createElement("span",{className:"icon-legend"},r))}function m(e){var t=null,t=e.thread.url.last_poster?interpolate(l,{url:(0,o.default)(e.thread.url.last_poster),user:(0,o.default)(e.thread.last_poster_name)},!0):interpolate(u,{user:(0,o.default)(e.thread.last_poster_name)},!0),r=interpolate(i,{absolute:(0,o.default)(e.thread.last_post_on.format("LLL")),relative:(0,o.default)(e.thread.last_post_on.fromNow())},!0),n=interpolate((0,o.default)(gettext("last reply by %(user)s %(date)s")),{date:r,user:t},!0);return a.default.createElement("li",{className:"thread-last-reply",dangerouslySetInnerHTML:{__html:n}})}},{"../../../utils/escape-html":383,react:"react"}],220:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.approve=function(e){var t=e.selection,r=t.map(function(e){return{id:e.id,is_unapproved:!1}}),n=t.map(function(e){return{id:e.id,is_unapproved:e.is_unapproved}});y(e,[{op:"replace",path:"is-unapproved",value:!1}],r,n)},r.protect=function(e){var t=e.selection,r=t.map(function(e){return{id:e.id,is_protected:!0}}),n=t.map(function(e){return{id:e.id,is_protected:e.is_protected}});y(e,[{op:"replace",path:"is-protected",value:!0}],r,n)},r.unprotect=function(e){var t=e.selection,r=t.map(function(e){return{id:e.id,is_protected:!1}}),n=t.map(function(e){return{id:e.id,is_protected:e.is_protected}});y(e,[{op:"replace",path:"is-protected",value:!1}],r,n)},r.hide=function(t){var e=t.selection,r=e.map(function(e){return{id:e.id,is_hidden:!0,hidden_on:(0,a.default)(),hidden_by_name:t.user.username,url:Object.assign(e.url,{hidden_by:t.user.url})}}),n=e.map(function(e){return{id:e.id,is_hidden:e.is_hidden,hidden_on:e.hidden_on,hidden_by_name:e.hidden_by_name,url:e.url}});y(t,[{op:"replace",path:"is-hidden",value:!0}],r,n)},r.unhide=function(t){var e=t.selection,r=e.map(function(e){return{id:e.id,is_hidden:!1,hidden_on:(0,a.default)(),hidden_by_name:t.user.username,url:Object.assign(e.url,{hidden_by:t.user.url})}}),n=e.map(function(e){return{id:e.id,is_hidden:e.is_hidden,hidden_on:e.hidden_on,hidden_by_name:e.hidden_by_name,url:e.url}});y(t,[{op:"replace",path:"is-hidden",value:!1}],r,n)},r.patch=y,r.merge=function(t){if(!confirm(gettext("Are you sure you want to merge selected posts? This action is not reversible!")))return;t.selection.slice(1).map(function(e){p.default.dispatch(i.patch(e,{isDeleted:!0}))}),c.default.post(t.thread.api.posts.merge,{posts:t.selection.map(function(e){return e.id})}).then(function(e){p.default.dispatch(i.patch(e,i.hydrate(e)))},function(e){400===e.status?d.default.error(e.detail):d.default.apiError(e),t.selection.slice(1).map(function(e){p.default.dispatch(i.patch(e,{isDeleted:!1}))})}),p.default.dispatch(s.deselectAll())},r.remove=function(t){if(!confirm(gettext("Are you sure you want to delete selected posts? This action is not reversible!")))return;t.selection.map(function(e){p.default.dispatch(i.patch(e,{isDeleted:!0}))});var e=t.selection.map(function(e){return e.id});c.default.delete(t.thread.api.posts.index,e).then(function(){},function(e){400===e.status?d.default.error(e.detail):d.default.apiError(e),t.selection.map(function(e){p.default.dispatch(i.patch(e,{isDeleted:!1}))})}),p.default.dispatch(s.deselectAll())};var a=o(e("moment")),u=o(e("react")),i=n(e("../../../../reducers/post")),s=n(e("../../../../reducers/posts")),c=o(e("../../../../services/ajax")),f=o(e("../../../../services/modal")),d=o(e("../../../../services/snackbar")),p=o(e("../../../../services/store")),m=o(e("./errors-list"));function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var r,n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((r=a?Object.getOwnPropertyDescriptor(e,o):null)&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o])}return n.default=e,t&&t.set(e,n),n}function o(e){return e&&e.__esModule?e:{default:e}}function y(e,t,r,a){var o=e.selection,n=e.thread;r.forEach(function(e){i.patch(e,e)}),p.default.dispatch(s.deselectAll());var l={ops:t,ids:o.map(function(e){return e.id})};c.default.patch(n.api.posts.index,l).then(function(e){e.forEach(function(e){p.default.dispatch(i.patch(e,e))})},function(e){if(400!==e.status)return a.forEach(function(e){p.default.dispatch(i.patch(e,e))}),d.default.apiError(e);var t=[],r=[];e.forEach(function(e){e.detail?(t.push(e),r.push(e.id)):p.default.dispatch(i.patch(e,e)),a.forEach(function(e){-1!==r.indexOf(e)&&p.default.dispatch(i.patch(e,e))})});var n={};o.forEach(function(e){n[e.id]=e}),f.default.show(u.default.createElement(m.default,{errors:t,posts:n}))})}},{"../../../../reducers/post":353,"../../../../reducers/posts":354,"../../../../services/ajax":365,"../../../../services/modal":371,"../../../../services/snackbar":376,"../../../../services/store":377,"./errors-list":222,moment:"moment",react:"react"}],221:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return l.default.createElement("ul",{className:"dropdown-menu"},l.default.createElement(_,e),l.default.createElement(E,e),l.default.createElement(w,e),l.default.createElement(O,e),l.default.createElement(P,e),l.default.createElement(k,e),l.default.createElement(S,e),l.default.createElement(j,e),l.default.createElement(N,e))},r.Delete=r.Unhide=r.Hide=r.Unprotect=r.Protect=r.Split=r.Move=r.Merge=r.Approve=void 0;var l=n(e("react")),u=n(e("../../../../services/modal")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("./actions")),s=n(e("./move")),c=n(e("./split"));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==d(n)&&"function"!=typeof n?b(r):n}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=a.call.apply(a,[this].concat(r))),"onClick",function(){i.approve(e.props)}),e}return m(o,[{key:"render",value:function(){return this.props.selection.find(function(e){return e.acl.can_approve&&e.is_unapproved})?l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},l.default.createElement("span",{className:"material-icon"},"done"),gettext("Approve"))):null}}]),o}();r.Approve=_;var E=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=a.call.apply(a,[this].concat(r))),"onClick",function(){i.merge(e.props)}),e}return m(o,[{key:"render",value:function(){return 1<this.props.selection.length&&this.props.selection.find(function(e){return e.acl.can_merge})?l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},l.default.createElement("span",{className:"material-icon"},"call_merge"),gettext("Merge"))):null}}]),o}();r.Merge=E;var w=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=a.call.apply(a,[this].concat(r))),"onClick",function(){u.default.show(l.default.createElement(s.default,e.props))}),e}return m(o,[{key:"render",value:function(){return this.props.selection.find(function(e){return e.acl.can_move})?l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},l.default.createElement("span",{className:"material-icon"},"arrow_forward"),gettext("Move"))):null}}]),o}();r.Move=w;var O=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=a.call.apply(a,[this].concat(r))),"onClick",function(){u.default.show(l.default.createElement(c.default,e.props))}),e}return m(o,[{key:"render",value:function(){return this.props.selection.find(function(e){return e.acl.can_move})?l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},l.default.createElement("span",{className:"material-icon"},"call_split"),gettext("Split"))):null}}]),o}();r.Split=O;var P=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=a.call.apply(a,[this].concat(r))),"onClick",function(){i.protect(e.props)}),e}return m(o,[{key:"render",value:function(){return this.props.selection.find(function(e){return!e.is_protected&&e.acl.can_protect})?l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},l.default.createElement("span",{className:"material-icon"},"lock_outline"),gettext("Protect"))):null}}]),o}();r.Protect=P;var k=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=a.call.apply(a,[this].concat(r))),"onClick",function(){i.unprotect(e.props)}),e}return m(o,[{key:"render",value:function(){return this.props.selection.find(function(e){return e.is_protected&&e.acl.can_protect})?l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},l.default.createElement("span",{className:"material-icon"},"lock_open"),gettext("Unprotect"))):null}}]),o}();r.Unprotect=k;var j=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=a.call.apply(a,[this].concat(r))),"onClick",function(){i.hide(e.props)}),e}return m(o,[{key:"render",value:function(){return this.props.selection.find(function(e){return e.acl.can_hide&&!e.is_hidden})?l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},l.default.createElement("span",{className:"material-icon"},"visibility_off"),gettext("Hide"))):null}}]),o}();r.Hide=j;var S=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=a.call.apply(a,[this].concat(r))),"onClick",function(){i.unhide(e.props)}),e}return m(o,[{key:"render",value:function(){return this.props.selection.find(function(e){return e.acl.can_unhide&&e.is_hidden})?l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},l.default.createElement("span",{className:"material-icon"},"visibility"),gettext("Unhide"))):null}}]),o}();r.Unhide=S;var N=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=a.call.apply(a,[this].concat(r))),"onClick",function(){i.remove(e.props)}),e}return m(o,[{key:"render",value:function(){return this.props.selection.find(function(e){return e.acl.can_delete})?l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},l.default.createElement("span",{className:"material-icon"},"clear"),gettext("Delete"))):null}}]),o}();r.Delete=N},{"../../../../services/modal":371,"./actions":220,"./move":224,"./split":225,react:"react"}],222:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.errors,r=e.posts;return a.default.createElement("div",{className:"modal-dialog",role:"document"},a.default.createElement("div",{className:"modal-content"},a.default.createElement("div",{className:"modal-header"},a.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},a.default.createElement("span",{"aria-hidden":"true"},"×")),a.default.createElement("h4",{className:"modal-title"},gettext("Moderation"))),a.default.createElement("div",{className:"modal-body"},a.default.createElement("p",{className:"lead"},gettext("One or more posts could not be changed:")),a.default.createElement("ul",{className:"list-unstyled list-errored-items"},t.map(function(e){return a.default.createElement(o,{errors:e.detail,key:e.id,post:r[e.id]})})))))},r.PostErrors=o;var n,a=(n=e("react"))&&n.__esModule?n:{default:n};function o(e){var t=e.errors,r=e.post,n=interpolate(gettext("%(username)s on %(posted_on)s"),{posted_on:r.posted_on.format("LL, LT"),username:r.poster_name},!0);return a.default.createElement("li",null,a.default.createElement("h5",null,n,":"),t.map(function(e,t){return a.default.createElement("p",{key:t},e)}))}},{react:"react"}],223:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(!e.user.id||!u(e.thread,e.posts.results))return null;var t=e.posts.results.filter(function(e){return e.isSelected});return n.default.createElement("div",{className:"dropup"},n.default.createElement("button",{"aria-expanded":"true","aria-haspopup":"true",className:"btn btn-default dropdown-toggle btn-block btn-outline","data-toggle":"dropdown",disabled:!t.length,type:"button"},gettext("Posts options")),n.default.createElement(a.default,l({selection:t},e)))},r.isVisible=u;var n=o(e("react")),a=o(e("./dropdown"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){if(e.acl.can_merge_posts&&1<t.length)return!0;var r=!1;return t.forEach(function(e){e.is_event||(e.acl.can_approve&&e.is_unapproved||e.acl.can_delete||!e.is_hidden&&e.acl.can_hide||e.acl.can_move||e.acl.can_merge||e.acl.can_protect||e.is_hidden&&e.acl.can_unhide||e.acl.can_unprotect)&&(r=!0)}),r}},{"./dropdown":221,react:"react"}],224:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ModalHeader=_,r.default=void 0;var n=o(e("react")),a=(o(e("../../../button")),o(e("../../../form"))),u=o(e("../../../form-group")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../../reducers/post")),s=o(e("../../../../services/ajax")),c=o(e("../../../../services/modal")),f=o(e("../../../../services/snackbar")),d=o(e("../../../../services/store"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function o(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==p(n)&&"function"!=typeof n?b(r):n}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(l,a.default);var e,t,r,o=y(l);function l(e){var t,r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),r=b(t),a=function(e){t.changeValue("url",e.target.value)},(n="onUrlChange")in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,t.state={isLoading:!1,url:"",validators:{url:[]},errors:{}},t}return e=l,(t=[{key:"clean",value:function(){return!!this.state.url.trim().length||(f.default.error(gettext("You have to enter link to the other thread.")),!1)}},{key:"send",value:function(){return s.default.post(this.props.thread.api.posts.move,{new_thread:this.state.url,posts:this.props.selection.map(function(e){return e.id})})}},{key:"handleSuccess",value:function(){this.props.selection.forEach(function(e){d.default.dispatch(i.patch(e,{isDeleted:!0}))}),c.default.hide(),f.default.success(gettext("Selected posts were moved to the other thread."))}},{key:"handleError",value:function(e){400===e.status?f.default.error(e.detail):f.default.apiError(e)}},{key:"render",value:function(){return n.default.createElement("div",{className:"modal-dialog",role:"document"},n.default.createElement("form",{onSubmit:this.handleSubmit},n.default.createElement("div",{className:"modal-content"},n.default.createElement(_,null),n.default.createElement("div",{className:"modal-body"},n.default.createElement(u.default,{for:"id_url",label:gettext("Link to thread you want to move posts to")},n.default.createElement("input",{className:"form-control",disabled:this.state.isLoading,id:"id_url",onChange:this.onUrlChange,value:this.state.url}))),n.default.createElement("div",{className:"modal-footer"},n.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel")),n.default.createElement("button",{className:"btn btn-primary",loading:this.state.isLoading},gettext("Move posts"))))))}}])&&m(e.prototype,t),r&&m(e,r),l}();function _(e){return n.default.createElement("div",{className:"modal-header"},n.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},n.default.createElement("span",{"aria-hidden":"true"},"×")),n.default.createElement("h4",{className:"modal-title"},gettext("Move posts")))}r.default=g},{"../../../../reducers/post":353,"../../../../services/ajax":365,"../../../../services/modal":371,"../../../../services/snackbar":376,"../../../../services/store":377,"../../../button":8,"../../../form":56,"../../../form-group":55,react:"react"}],225:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return a.default.createElement(x,N({},e,{Form:R}))},r.Loader=C,r.Error=M,r.Modal=T,r.ModerationForm=r.PostingConfig=void 0;var a=v(e("react")),n=v(e("../../../button")),u=v(e("../../../form")),i=v(e("../../../form-group")),s=v(e("../../../category-select")),o=v(e("../../../modal-loader")),c=v(e("../../../select")),f=b(e("../../../../reducers/post")),d=v(e("../../../../services/ajax")),p=v(e("../../../../services/modal")),m=v(e("../../../../services/snackbar")),h=v(e("../../../../services/store")),y=b(e("../../../../utils/validators"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function b(e){if(e&&e.__esModule)return e;if(null===e||"object"!==g(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r,n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((r=a?Object.getOwnPropertyDescriptor(e,o):null)&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o])}return n.default=e,t&&t.set(e,n),n}function v(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t,r){return t&&E(e.prototype,t),r&&E(e,r),e}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=S(o);return t=l?(e=S(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==g(n)&&"function"!=typeof n?j(r):n}}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var x=function(){O(n,a.default.Component);var r=k(n);function n(e){var t;return _(this,n),(t=r.call(this,e)).state={isLoaded:!1,isError:!1,categories:[]},t}return w(n,[{key:"componentDidMount",value:function(){var r=this;d.default.get(misago.get("THREAD_EDITOR_API")).then(function(e){var t=e.map(function(e){return Object.assign(e,{disabled:!1===e.post,label:e.name,value:e.id,post:e.post})});r.setState({isLoaded:!0,categories:t})},function(e){r.setState({isError:e.detail})})}},{key:"render",value:function(){return this.state.isError?a.default.createElement(M,{message:this.state.isError}):this.state.isLoaded?a.default.createElement(R,N({},this.props,{categories:this.state.categories})):a.default.createElement(C,null)}}]),n}();r.PostingConfig=x;var R=function(){O(l,u.default);var o=k(l);function l(e){var n,t,r,a;return _(this,l),n=o.call(this,e),t=j(n),a=function(e){var t=e.target.value,r={category:t};n.acl[t].can_pin_threads<r.weight&&(r.weight=0),n.acl[t].can_hide_threads||(r.is_hidden=0),n.acl[t].can_close_threads||(r.is_closed=!1),n.setState(r)},(r="onCategoryChange")in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,n.state={isLoading:!1,title:"",category:null,categories:e.categories,weight:0,is_hidden:0,is_closed:!1,validators:{title:[y.required()]},errors:{}},n.isHiddenChoices=[{value:0,icon:"visibility",label:gettext("No")},{value:1,icon:"visibility_off",label:gettext("Yes")}],n.isClosedChoices=[{value:!1,icon:"lock_outline",label:gettext("No")},{value:!0,icon:"lock",label:gettext("Yes")}],n.acl={},n.props.categories.forEach(function(e){e.post&&(n.state.category||(n.state.category=e.id),n.acl[e.id]={can_pin_threads:e.post.pin,can_close_threads:e.post.close,can_hide_threads:e.post.hide})}),n}return w(l,[{key:"clean",value:function(){return!!this.isValid()||(m.default.error(gettext("Form contains errors.")),this.setState({errors:this.validate()}),!1)}},{key:"send",value:function(){return d.default.post(this.props.thread.api.posts.split,{title:this.state.title,category:this.state.category,weight:this.state.weight,is_hidden:this.state.is_hidden,is_closed:this.state.is_closed,posts:this.props.selection.map(function(e){return e.id})})}},{key:"handleSuccess",value:function(){this.props.selection.forEach(function(e){h.default.dispatch(f.patch(e,{isDeleted:!0}))}),p.default.hide(),m.default.success(gettext("Selected posts were split into new thread."))}},{key:"handleError",value:function(e){400===e.status?(this.setState({errors:Object.assign({},this.state.errors,e)}),m.default.error(gettext("Form contains errors."))):403===e.status&&Array.isArray(e)?p.default.show(a.default.createElement(ErrorsModal,{errors:e})):m.default.apiError(e)}},{key:"getWeightChoices",value:function(){var e=[{value:0,icon:"remove",label:gettext("Not pinned")},{value:1,icon:"bookmark_border",label:gettext("Pinned locally")}];return 2==this.acl[this.state.category].can_pin_threads&&e.push({value:2,icon:"bookmark",label:gettext("Pinned globally")}),e}},{key:"renderWeightField",value:function(){return this.acl[this.state.category].can_pin_threads?a.default.createElement(i.default,{label:gettext("Thread weight"),for:"id_weight",labelClass:"col-sm-4",controlClass:"col-sm-8"},a.default.createElement(c.default,{id:"id_weight",onChange:this.bindInput("weight"),value:this.state.weight,choices:this.getWeightChoices()})):null}},{key:"renderHiddenField",value:function(){return this.acl[this.state.category].can_hide_threads?a.default.createElement(i.default,{label:gettext("Hide thread"),for:"id_is_hidden",labelClass:"col-sm-4",controlClass:"col-sm-8"},a.default.createElement(c.default,{id:"id_is_closed",onChange:this.bindInput("is_hidden"),value:this.state.is_hidden,choices:this.isHiddenChoices})):null}},{key:"renderClosedField",value:function(){return this.acl[this.state.category].can_close_threads?a.default.createElement(i.default,{label:gettext("Close thread"),for:"id_is_closed",labelClass:"col-sm-4",controlClass:"col-sm-8"},a.default.createElement(c.default,{id:"id_is_closed",onChange:this.bindInput("is_closed"),value:this.state.is_closed,choices:this.isClosedChoices})):null}},{key:"render",value:function(){return a.default.createElement(T,{className:"modal-dialog"},a.default.createElement("form",{onSubmit:this.handleSubmit},a.default.createElement("div",{className:"modal-body"},a.default.createElement(i.default,{label:gettext("Thread title"),for:"id_title",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.title},a.default.createElement("input",{id:"id_title",className:"form-control",type:"text",onChange:this.bindInput("title"),value:this.state.title})),a.default.createElement("div",{className:"clearfix"}),a.default.createElement(i.default,{label:gettext("Category"),for:"id_category",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.category},a.default.createElement(s.default,{id:"id_category",onChange:this.onCategoryChange,value:this.state.category,choices:this.state.categories})),a.default.createElement("div",{className:"clearfix"}),this.renderWeightField(),this.renderHiddenField(),this.renderClosedField()),a.default.createElement("div",{className:"modal-footer"},a.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel")),a.default.createElement(n.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Split posts")))))}}]),l}();function C(){return a.default.createElement(T,{className:"modal-dialog"},a.default.createElement(o.default,null))}function M(e){return a.default.createElement(T,{className:"modal-dialog modal-message"},a.default.createElement("div",{className:"message-icon"},a.default.createElement("span",{className:"material-icon"},"info_outline")),a.default.createElement("div",{className:"message-body"},a.default.createElement("p",{className:"lead"},gettext("You can't move selected posts at the moment.")),a.default.createElement("p",null,e.message),a.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},gettext("Ok"))))}function T(e){return a.default.createElement("div",{className:e.className,role:"document"},a.default.createElement("div",{className:"modal-content"},a.default.createElement("div",{className:"modal-header"},a.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},a.default.createElement("span",{"aria-hidden":"true"},"×")),a.default.createElement("h4",{className:"modal-title"},gettext("Split posts into new thread"))),e.children))}r.ModerationForm=R},{"../../../../reducers/post":353,"../../../../services/ajax":365,"../../../../services/modal":371,"../../../../services/snackbar":376,"../../../../services/store":377,"../../../../utils/validators":393,"../../../button":8,"../../../category-select":21,"../../../form":56,"../../../form-group":55,"../../../modal-loader":61,"../../../select":210,react:"react"}],226:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=n(e("react")),u=n(e("./merge")),i=n(e("./move")),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==h(e)&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../../reducers/thread")),c=n(e("../../../../services/ajax")),f=n(e("../../../../services/modal")),d=n(e("../../../../services/snackbar")),p=n(e("../../../../services/store"));function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==h(n)&&"function"!=typeof n?g(r):n}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,l.default.Component);var e,t,r,a=v(o);function o(){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return E(g(r=a.call.apply(a,[this].concat(t))),"callApi",function(e,t){p.default.dispatch(s.busy()),e.push({op:"add",path:"acl",value:!0}),c.default.patch(r.props.thread.api.index,e).then(function(e){p.default.dispatch(s.update(e)),p.default.dispatch(s.release()),d.default.success(t)},function(e){p.default.dispatch(s.release()),400===e.status?d.default.error(e.detail[0]):d.default.apiError(e)})}),E(g(r),"pinGlobally",function(){r.callApi([{op:"replace",path:"weight",value:2}],gettext("Thread has been pinned globally."))}),E(g(r),"pinLocally",function(){r.callApi([{op:"replace",path:"weight",value:1}],gettext("Thread has been pinned locally."))}),E(g(r),"unpin",function(){r.callApi([{op:"replace",path:"weight",value:0}],gettext("Thread has been unpinned."))}),E(g(r),"approve",function(){r.callApi([{op:"replace",path:"is-unapproved",value:!1}],gettext("Thread has been approved."))}),E(g(r),"open",function(){r.callApi([{op:"replace",path:"is-closed",value:!1}],gettext("Thread has been opened."))}),E(g(r),"close",function(){r.callApi([{op:"replace",path:"is-closed",value:!0}],gettext("Thread has been closed."))}),E(g(r),"unhide",function(){r.callApi([{op:"replace",path:"is-hidden",value:!1}],gettext("Thread has been made visible."))}),E(g(r),"hide",function(){r.callApi([{op:"replace",path:"is-hidden",value:!0}],gettext("Thread has been made hidden."))}),E(g(r),"move",function(){f.default.show(l.default.createElement(i.default,{posts:r.props.posts,thread:r.props.thread}))}),E(g(r),"merge",function(){f.default.show(l.default.createElement(u.default,{thread:r.props.thread}))}),E(g(r),"delete",function(){confirm(gettext("Are you sure you want to delete this thread?"))&&(p.default.dispatch(s.busy()),c.default.delete(r.props.thread.api.index).then(function(e){d.default.success(gettext("Thread has been deleted.")),window.location=r.props.thread.category.url.index},function(e){p.default.dispatch(s.release()),d.default.apiError(e)}))}),r}return e=o,(t=[{key:"getPinGloballyButton",value:function(){return 2!==this.props.thread.weight&&this.props.thread.acl.can_pin_globally?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.pinGlobally,type:"button"},l.default.createElement("span",{className:"material-icon"},"bookmark"),gettext("Pin globally"))):null}},{key:"getPinLocallyButton",value:function(){return 1!==this.props.thread.weight&&this.props.thread.acl.can_pin?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.pinLocally,type:"button"},l.default.createElement("span",{className:"material-icon"},"bookmark_border"),gettext("Pin locally"))):null}},{key:"getUnpinButton",value:function(){return 0!==this.props.thread.weight&&this.props.thread.acl.can_pin?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.unpin,type:"button"},l.default.createElement("span",{className:"material-icon"},"panorama_fish_eye"),gettext("Unpin"))):null}},{key:"getMoveButton",value:function(){return this.props.thread.acl.can_move?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.move,type:"button"},l.default.createElement("span",{className:"material-icon"},"arrow_forward"),gettext("Move"))):null}},{key:"getMergeButton",value:function(){return this.props.thread.acl.can_merge?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.merge,type:"button"},l.default.createElement("span",{className:"material-icon"},"call_merge"),gettext("Merge"))):null}},{key:"getApproveButton",value:function(){return this.props.thread.is_unapproved&&this.props.thread.acl.can_approve?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.approve,type:"button"},l.default.createElement("span",{className:"material-icon"},"done"),gettext("Approve"))):null}},{key:"getOpenButton",value:function(){return this.props.thread.is_closed&&this.props.thread.acl.can_close?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.open,type:"button"},l.default.createElement("span",{className:"material-icon"},"lock_open"),gettext("Open"))):null}},{key:"getCloseButton",value:function(){return!this.props.thread.is_closed&&this.props.thread.acl.can_close?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.close,type:"button"},l.default.createElement("span",{className:"material-icon"},"lock_outline"),gettext("Close"))):null}},{key:"getUnhideButton",value:function(){return this.props.thread.is_hidden&&this.props.thread.acl.can_unhide?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.unhide,type:"button"},l.default.createElement("span",{className:"material-icon"},"visibility"),gettext("Unhide"))):null}},{key:"getHideButton",value:function(){return!this.props.thread.is_hidden&&this.props.thread.acl.can_hide?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.hide,type:"button"},l.default.createElement("span",{className:"material-icon"},"visibility_off"),gettext("Hide"))):null}},{key:"getDeleteButton",value:function(){return this.props.thread.acl.can_delete?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.delete,type:"button"},l.default.createElement("span",{className:"material-icon"},"clear"),gettext("Delete"))):null}},{key:"render",value:function(){return l.default.createElement("ul",{className:"dropdown-menu dropdown-menu-right stick-to-bottom"},this.getPinGloballyButton(),this.getPinLocallyButton(),this.getUnpinButton(),this.getMoveButton(),this.getMergeButton(),this.getApproveButton(),this.getOpenButton(),this.getCloseButton(),this.getUnhideButton(),this.getHideButton(),this.getDeleteButton())}}])&&y(e.prototype,t),r&&y(e,r),o}();r.default=a},{"../../../../reducers/thread":360,"../../../../services/ajax":365,"../../../../services/modal":371,"../../../../services/snackbar":376,"../../../../services/store":377,"./merge":229,"./move":230,react:"react"}],227:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ModerationControls",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"isModerationVisible",{enumerable:!0,get:function(){return a.default}});var n=o(e("./controls")),a=o(e("./is-visible"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./controls":226,"./is-visible":228}],228:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return!!(e.acl.can_approve&&e.is_unapproved||e.acl.can_close||e.acl.can_delete||e.acl.can_hide||e.acl.can_move||e.acl.can_merge||e.acl.can_pin||e.acl.can_pin_globally&&2!==e.weight||e.acl.can_unhide&&e.is_hidden)}},{}],229:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ModalHeader=w,r.default=void 0;var o=n(e("react")),l=n(e("../../../form")),u=n(e("../../../form-group")),i=n(e("../../../merge-conflict")),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==h(e)&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../../reducers/thread")),c=n(e("../../../../services/ajax")),f=n(e("../../../../services/modal")),d=n(e("../../../../services/snackbar")),p=n(e("../../../../services/store"));function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==h(n)&&"function"!=typeof n?g(r):n}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,l.default);var e,t,r,n=v(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),E(g(t=n.call(this,e)),"handleSuccess",function(e){t.handleSuccessUnmounted(e),t.setState({isLoading:!0})}),E(g(t),"handleSuccessUnmounted",function(e){d.default.success(gettext("Thread has been merged with other one.")),window.location=e.url}),E(g(t),"handleError",function(e){p.default.dispatch(s.release()),400===e.status?e.best_answers||e.polls?f.default.show(o.default.createElement(i.default,{api:t.props.thread.api.merge,bestAnswers:e.best_answers,data:{other_thread:t.state.url},polls:e.polls,onError:t.handleError,onSuccess:t.handleSuccessUnmounted})):e.best_answer?d.default.error(e.best_answer[0]):e.poll?d.default.error(e.poll[0]):d.default.error(e.detail):d.default.apiError(e)}),E(g(t),"onUrlChange",function(e){t.changeValue("url",e.target.value)}),t.state={isLoading:!1,url:"",validators:{url:[]},errors:{}},t}return e=a,(t=[{key:"clean",value:function(){return!!this.state.url.trim().length||(d.default.error(gettext("You have to enter link to the other thread.")),!1)}},{key:"send",value:function(){return p.default.dispatch(s.busy()),c.default.post(this.props.thread.api.merge,{other_thread:this.state.url})}},{key:"render",value:function(){return o.default.createElement("div",{className:"modal-dialog",role:"document"},o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"modal-content"},o.default.createElement(w,null),o.default.createElement("div",{className:"modal-body"},o.default.createElement(u.default,{for:"id_url",label:gettext("Link to thread you want to merge with"),help_text:gettext("Merge will delete current thread and move its contents to the thread specified here.")},o.default.createElement("input",{className:"form-control",disabled:this.state.isLoading||this.props.thread.isBusy,id:"id_url",onChange:this.onUrlChange,value:this.state.url}))),o.default.createElement("div",{className:"modal-footer"},o.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel")),o.default.createElement("button",{className:"btn btn-primary",loading:this.state.isLoading||this.props.thread.isBusy},gettext("Merge thread"))))))}}])&&y(e.prototype,t),r&&y(e,r),a}();function w(e){return o.default.createElement("div",{className:"modal-header"},o.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},o.default.createElement("span",{"aria-hidden":"true"},"×")),o.default.createElement("h4",{className:"modal-title"},gettext("Merge thread")))}r.default=a},{"../../../../reducers/thread":360,"../../../../services/ajax":365,"../../../../services/modal":371,"../../../../services/snackbar":376,"../../../../services/store":377,"../../../form":56,"../../../form-group":55,"../../../merge-conflict":59,react:"react"}],230:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ModalHeader=k,r.ModalLoading=j,r.ModalMessage=S,r.default=void 0;var n=b(e("react")),a=b(e("../../../form")),u=b(e("../../../form-group")),i=b(e("../../../category-select")),o=b(e("../../../modal-loader")),s=y(e("../../../../reducers/posts")),c=y(e("../../../../reducers/thread")),f=b(e("../../../..")),d=b(e("../../../../services/ajax")),p=b(e("../../../../services/modal")),m=b(e("../../../../services/snackbar")),h=b(e("../../../../services/store"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function y(e){if(e&&e.__esModule)return e;if(null===e||"object"!==v(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r,n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((r=a?Object.getOwnPropertyDescriptor(e,o):null)&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o])}return n.default=e,t&&t.set(e,n),n}function b(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=O(o);return t=l?(e=O(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==v(n)&&"function"!=typeof n?w(r):n}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(l,a.default);var e,t,r,o=E(l);function l(e){var t,r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),r=w(t),a=function(e){t.changeValue("category",e.target.value)},(n="onCategoryChange")in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,t.state={isReady:!1,isLoading:!1,isError:!1,category:null,categories:[]},t}return e=l,(t=[{key:"componentDidMount",value:function(){var n=this;d.default.get(f.default.get("THREAD_EDITOR_API")).then(function(e){var t=null,r=e.map(function(e){return!1===e.post||t||(t=e.id),Object.assign(e,{disabled:!1===e.post,label:e.name,value:e.id})});n.setState({isReady:!0,category:t,categories:r})},function(e){n.setState({isError:e.detail})})}},{key:"send",value:function(){return h.default.dispatch(c.busy()),d.default.patch(this.props.thread.api.index,[{op:"replace",path:"category",value:this.state.category}])}},{key:"handleSuccess",value:function(){d.default.get(this.props.thread.api.posts.index,{page:this.props.posts.page}).then(function(e){h.default.dispatch(c.replace(e)),h.default.dispatch(s.load(e.post_set)),h.default.dispatch(c.release()),m.default.success(gettext("Thread has been moved.")),p.default.hide()},function(e){h.default.dispatch(c.release()),m.default.apiError(e)})}},{key:"handleError",value:function(e){400===e.status?m.default.error(e.detail[0]):m.default.apiError(e)}},{key:"render",value:function(){return this.state.isReady?n.default.createElement("div",{className:"modal-dialog",role:"document"},n.default.createElement("form",{onSubmit:this.handleSubmit},n.default.createElement("div",{className:"modal-content"},n.default.createElement(k,null),n.default.createElement("div",{className:"modal-body"},n.default.createElement(u.default,{for:"id_category",label:gettext("New category")},n.default.createElement(i.default,{choices:this.state.categories,disabled:this.state.isLoading||this.props.thread.isBusy,id:"id_category",onChange:this.onCategoryChange,value:this.state.category}))),n.default.createElement("div",{className:"modal-footer"},n.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel")),n.default.createElement("button",{className:"btn btn-primary",loading:this.state.isLoading||this.props.thread.isBusy},gettext("Move thread")))))):this.state.isError?n.default.createElement(S,{message:this.state.isError}):n.default.createElement(j,null)}}])&&g(e.prototype,t),r&&g(e,r),l}();function k(e){return n.default.createElement("div",{className:"modal-header"},n.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},n.default.createElement("span",{"aria-hidden":"true"},"×")),n.default.createElement("h4",{className:"modal-title"},gettext("Move thread")))}function j(e){return n.default.createElement("div",{className:"modal-dialog",role:"document"},n.default.createElement("div",{className:"modal-content"},n.default.createElement(k,null),n.default.createElement(o.default,null)))}function S(e){return n.default.createElement("div",{className:"modal-dialog modal-message",role:"document"},n.default.createElement("div",{className:"modal-content"},n.default.createElement(k,null),n.default.createElement("div",{className:"message-icon"},n.default.createElement("span",{className:"material-icon"},"info_outline")),n.default.createElement("div",{className:"message-body"},n.default.createElement("p",{className:"lead"},gettext("You can't move this thread at the moment.")),n.default.createElement("p",null,e.message),n.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},gettext("Ok")))))}r.default=P},{"../../../..":302,"../../../../reducers/posts":354,"../../../../reducers/thread":360,"../../../../services/ajax":365,"../../../../services/modal":371,"../../../../services/snackbar":376,"../../../../services/store":377,"../../../category-select":21,"../../../form":56,"../../../form-group":55,"../../../modal-loader":61,react:"react"}],231:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return a.default.createElement("nav",{className:"misago-pagination pull-left"},a.default.createElement(l,e),a.default.createElement(f,{more:e.posts.more}))},r.Pager=l,r.FirstPage=u,r.PreviousPage=i,r.NextPage=s,r.LastPage=c,r.More=f;var n,a=(n=e("react"))&&n.__esModule?n:{default:n},o=e("react-router");function l(e){return a.default.createElement("div",{className:"row row-paginator"},a.default.createElement("div",{className:"col-xs-3"},a.default.createElement(u,e)),a.default.createElement("div",{className:"col-xs-3"},a.default.createElement(i,e)),a.default.createElement("div",{className:"col-xs-3"},a.default.createElement(s,e)),a.default.createElement("div",{className:"col-xs-3"},a.default.createElement(c,e)))}function u(e){return e.posts.isLoaded&&e.posts.first?a.default.createElement(o.Link,{className:"btn btn-default btn-block btn-outline btn-icon",to:e.thread.url.index,title:gettext("Go to first page")},a.default.createElement("span",{className:"material-icon"},"first_page")):a.default.createElement("span",{className:"btn btn-default btn-block btn-outline btn-icon disabled",title:gettext("Go to first page")},a.default.createElement("span",{className:"material-icon"},"first_page"))}function i(e){if(e.posts.isLoaded&&1<e.posts.page){var t="";return e.posts.previous&&(t=e.posts.previous+"/"),a.default.createElement(o.Link,{className:"btn btn-default btn-block btn-outline btn-icon",to:e.thread.url.index+t,title:gettext("Go to previous page")},a.default.createElement("span",{className:"material-icon"},"chevron_left"))}return a.default.createElement("span",{className:"btn btn-default btn-block btn-outline btn-icon disabled",title:gettext("Go to previous page")},a.default.createElement("span",{className:"material-icon"},"chevron_left"))}function s(e){if(e.posts.isLoaded&&e.posts.more){var t="";return e.posts.next&&(t=e.posts.next+"/"),a.default.createElement(o.Link,{className:"btn btn-default btn-block btn-outline btn-icon",to:e.thread.url.index+t,title:gettext("Go to next page")},a.default.createElement("span",{className:"material-icon"},"chevron_right"))}return a.default.createElement("span",{className:"btn btn-default btn-block btn-outline btn-icon disabled",title:gettext("Go to next page")},a.default.createElement("span",{className:"material-icon"},"chevron_right"))}function c(e){return e.posts.isLoaded&&e.posts.last?a.default.createElement(o.Link,{className:"btn btn-default btn-block btn-outline btn-icon",to:e.thread.url.index+e.posts.last+"/",title:gettext("Go to last page")},a.default.createElement("span",{className:"material-icon"},"last_page")):a.default.createElement("span",{className:"btn btn-default btn-block btn-outline btn-icon disabled",title:gettext("Go to last page")},a.default.createElement("span",{className:"material-icon"},"last_page"))}function f(e){var t=null,t=e.more?(t=ngettext("There is %(more)s more post in this thread.","There are %(more)s more posts in this thread.",e.more),interpolate(t,{more:e.more},!0)):gettext("There are no more posts in this thread.");return a.default.createElement("p",null,t)}},{react:"react","react-router":"react-router"}],232:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return a.default.createElement("button",{className:e.className||"btn btn-primary btn-outline",onClick:e.onClick,type:"button"},a.default.createElement("span",{className:"material-icon"},"chat"),gettext("Reply"))};var n,a=(n=e("react"))&&n.__esModule?n:{default:n}},{react:"react"}],233:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.select=u,r.paths=function(){var e=o.default.get("THREAD"),t=e.url.index.replace(e.slug+"-"+e.pk,":slug");return[{path:t,component:(0,n.connect)(u)(a.default)},{path:t+":page/",component:(0,n.connect)(u)(a.default)}]};var n=e("react-redux"),a=l(e("./route")),o=l(e("../.."));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return{participants:e.participants,poll:e.poll,posts:e.posts,thread:e.thread,tick:e.tick.tick,user:e.auth.user}}},{"../..":302,"./route":234,"react-redux":"react-redux"}],234:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("react")),l=o(e("../participants")),u=e("../poll"),i=o(e("../posts-list")),s=o(e("./header")),c=o(e("./toolbar-top")),f=o(e("./toolbar-bottom")),d=a(e("../../reducers/participants")),p=a(e("../../reducers/poll")),m=a(e("../../reducers/posts")),h=a(e("../../reducers/thread")),y=o(e("../../services/ajax")),b=o(e("../../services/polls")),v=o(e("../../services/snackbar")),g=o(e("../../services/posting")),_=o(e("../../services/store")),E=o(e("../../services/page-title"));function w(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return w=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!==O(e)&&"function"!=typeof e)return{default:e};var t=w();if(t&&t.has(e))return t.get(e);var r,n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((r=a?Object.getOwnPropertyDescriptor(e,o):null)&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o])}return n.default=e,t&&t.set(e,n),n}function o(e){return e&&e.__esModule?e:{default:e}}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=x(o);return t=l?(e=x(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==O(n)&&"function"!=typeof n?N(r):n}}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(o,n.default.Component);var e,t,r,a=S(o);function o(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return R(N(t=a.call.apply(a,[this].concat(r))),"update",function(e){_.default.dispatch(h.replace(e)),_.default.dispatch(m.load(e.post_set)),e.participants&&_.default.dispatch(d.replace(e.participants)),e.poll&&_.default.dispatch(p.replace(e.poll)),t.setPageTitle()}),R(N(t),"openReplyForm",function(){g.default.open({mode:"REPLY",config:t.props.thread.api.editor,submit:t.props.thread.api.posts.index})}),t}return e=o,(t=[{key:"componentDidMount",value:function(){this.shouldFetchData()&&(this.fetchData(),this.setPageTitle()),this.startPollingApi()}},{key:"componentDidUpdate",value:function(){this.shouldFetchData()&&(this.fetchData(),this.startPollingApi(),this.setPageTitle())}},{key:"componentWillUnmount",value:function(){this.stopPollingApi()}},{key:"shouldFetchData",value:function(){return!!this.props.posts.isLoaded&&+(this.props.params.page||1)!=this.props.posts.page}},{key:"fetchData",value:function(){var t=this;_.default.dispatch(m.unload()),y.default.get(this.props.thread.api.posts.index,{page:this.props.params.page||1},"posts").then(function(e){t.update(e)},function(e){v.default.apiError(e)})}},{key:"startPollingApi",value:function(){b.default.start({poll:"thread-posts",url:this.props.thread.api.posts.index,data:{page:this.props.params.page||1},update:this.update,frequency:12e4,delayed:!0})}},{key:"stopPollingApi",value:function(){b.default.stop("thread-posts")}},{key:"setPageTitle",value:function(){E.default.set({title:this.props.thread.title,parent:this.props.thread.category.name,page:+(this.props.params.page||1)})}},{key:"render",value:function(){var e="page page-thread";return this.props.thread.category.css_class&&(e+=" page-thread-"+this.props.thread.category.css_class),n.default.createElement("div",{className:e},n.default.createElement("div",{className:"page-header-bg"},n.default.createElement(s.default,this.props)),n.default.createElement("div",{className:"container"},n.default.createElement(c.default,P({openReplyForm:this.openReplyForm},this.props)),n.default.createElement(u.Poll,{poll:this.props.poll,thread:this.props.thread,user:this.props.user}),n.default.createElement(l.default,{participants:this.props.participants,thread:this.props.thread,user:this.props.user}),n.default.createElement(i.default,this.props),n.default.createElement(f.default,P({openReplyForm:this.openReplyForm},this.props))))}}])&&k(e.prototype,t),r&&k(e,r),o}();r.default=C},{"../../reducers/participants":351,"../../reducers/poll":352,"../../reducers/posts":354,"../../reducers/thread":360,"../../services/ajax":365,"../../services/page-title":373,"../../services/polls":374,"../../services/posting":375,"../../services/snackbar":376,"../../services/store":377,"../participants":101,"../poll":106,"../posts-list":151,"./header":218,"./toolbar-bottom":236,"./toolbar-top":237,react:"react"}],235:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return e.user.id?n.default.createElement("div",{className:e.className},n.default.createElement("button",{"aria-expanded":"true","aria-haspopup":"true",className:"btn btn-default dropdown-toggle btn-block btn-outline","data-toggle":"dropdown",type:"button"},n.default.createElement("span",{className:"material-icon"},_(e.thread.subscription)),E(e.thread.subscription)),n.default.createElement(w,e)):null},r.getIcon=_,r.getLabel=E,r.Dropdown=w,r.update=j,r.Email=r.Enable=r.Disable=void 0;var n=s(e("react")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==c(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../reducers/thread")),o=s(e("../../services/ajax")),l=s(e("../../services/snackbar")),u=s(e("../../services/store"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==c(n)&&"function"!=typeof n?b(r):n}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){return!0===e?"star":!1===e?"star_half":"star_border"}function E(e){return!0===e?gettext("E-mail"):!1===e?gettext("Enabled"):gettext("Disabled")}function w(e){return n.default.createElement("ul",{className:e.dropdownClassName||"dropdown-menu stick-to-bottom"},n.default.createElement(O,e),n.default.createElement(P,e),n.default.createElement(k,e))}var O=function(){m(o,n.default.Component);var a=y(o);function o(){var e;f(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=a.call.apply(a,[this].concat(r))),"onClick",function(){null!==e.props.thread.subscription&&j(e.props.thread,null,"unsubscribe")}),e}return p(o,[{key:"render",value:function(){return n.default.createElement("li",null,n.default.createElement("button",{className:"btn btn-link",onClick:this.onClick},n.default.createElement("span",{className:"material-icon"},"star_border"),gettext("Unsubscribe")))}}]),o}();r.Disable=O;var P=function(){m(o,n.default.Component);var a=y(o);function o(){var e;f(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=a.call.apply(a,[this].concat(r))),"onClick",function(){!1!==e.props.thread.subscription&&j(e.props.thread,!1,"notify")}),e}return p(o,[{key:"render",value:function(){return n.default.createElement("li",null,n.default.createElement("button",{className:"btn btn-link",onClick:this.onClick},n.default.createElement("span",{className:"material-icon"},"star_half"),gettext("Subscribe")))}}]),o}();r.Enable=P;var k=function(){m(o,n.default.Component);var a=y(o);function o(){var e;f(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=a.call.apply(a,[this].concat(r))),"onClick",function(){!0!==e.props.thread.subscription&&j(e.props.thread,!0,"email")}),e}return p(o,[{key:"render",value:function(){return n.default.createElement("li",null,n.default.createElement("button",{className:"btn btn-link",onClick:this.onClick},n.default.createElement("span",{className:"material-icon"},"star"),gettext("Subscribe with e-mail")))}}]),o}();function j(e,t,r){var n={subscription:e.subscription};u.default.dispatch(a.update({subscription:t})),o.default.patch(e.api.index,[{op:"replace",path:"subscription",value:r}]).then(function(e){u.default.dispatch(a.update(e))},function(e){400===e.status?l.default.error(e.detail[0]):l.default.apiError(e),u.default.dispatch(a.update(n))})}r.Email=k},{"../../reducers/thread":360,"../../services/ajax":365,"../../services/snackbar":376,"../../services/store":377,react:"react"}],236:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement("div",{className:"row row-toolbar"},n.default.createElement("div",{className:"col-xs-12 text-center visible-xs-block"},n.default.createElement(a.More,{more:e.posts.more}),n.default.createElement("div",{className:"toolbar-vertical-spacer"})),n.default.createElement("div",{className:"col-md-7"},n.default.createElement("div",{className:"row"},n.default.createElement("div",{className:"col-sm-4 col-md-5"},n.default.createElement(a.Pager,e)),n.default.createElement("div",{className:"col-sm-8 col-md-7 hidden-xs"},n.default.createElement(a.More,{more:e.posts.more})))),n.default.createElement(c,{visible:!!e.user.id},n.default.createElement("div",{className:"toolbar-vertical-spacer hidden-md hidden-lg"}),n.default.createElement("div",{className:"row"},n.default.createElement(m,e),n.default.createElement(f,e),n.default.createElement(d,e),n.default.createElement(p,{thread:e.thread,onClick:e.openReplyForm}))))},r.Options=c,r.Moderation=f,r.Subscription=d,r.Reply=p,r.Spacer=m;var n=i(e("react")),a=e("./paginator"),o=i(e("./moderation/posts")),l=i(e("./reply-button")),u=i(e("./subscription"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e){return e.visible?n.default.createElement("div",{className:"col-md-5"},e.children):null}function f(e){return e.user.id?n.default.createElement("div",{className:"col-sm-4 hidden-xs"},n.default.createElement(o.default,e)):null}function d(e){var t="col-xs-6";return e.thread.acl.can_reply||(t="col-xs-12"),n.default.createElement("div",{className:t+" col-sm-4"},n.default.createElement(u.default,s({btnClassName:"btn-block",className:"dropup"},e)))}function p(e){return e.thread.acl.can_reply?n.default.createElement("div",{className:"col-xs-6 col-sm-4"},n.default.createElement(l.default,{className:"btn btn-primary btn-block btn-outline",onClick:e.onClick})):null}function m(e){return e.thread.acl.can_reply?null:n.default.createElement("div",{className:"hidden-xs hidden-sm col-sm-4"})}},{"./moderation/posts":223,"./paginator":231,"./reply-button":232,"./subscription":235,react:"react"}],237:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=!e.thread.acl.can_start_poll||e.thread.poll;return n.default.createElement("div",{className:"row row-toolbar row-toolbar-bottom-margin"},n.default.createElement(v,e),n.default.createElement("div",{className:"col-xs-9 col-md-5 col-md-offset-2"},n.default.createElement("div",{className:"row"},n.default.createElement(C,{visible:!e.user.id}),n.default.createElement(C,{visible:t}),n.default.createElement(N,e),n.default.createElement(x,e),n.default.createElement(S,e))))},r.GotoMenu=v,r.GotoNew=g,r.GotoBestAnswer=_,r.GotoUnapproved=E,r.GotoLast=w,r.CompactOptions=O,r.GotoNewCompact=P,r.GotoUnapprovedCompact=k,r.GotoLastCompact=j,r.Reply=S,r.SubscriptionMenu=N,r.Spacer=C,r.StartPollCompact=r.StartPoll=void 0;var n=l(e("react")),a=l(e("./reply-button")),o=l(e("./subscription")),s=l(e("../../services/posting"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?h(r):n}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e){var t="col-xs-3 col-sm-3 col-md-5";return e.user.is_anonymous&&(t="col-xs-12 col-sm-3 col-md-5"),n.default.createElement("div",{className:t},n.default.createElement("div",{className:"row hidden-xs hidden-sm"},n.default.createElement(w,{thread:e.thread}),n.default.createElement(g,{thread:e.thread}),n.default.createElement(_,{thread:e.thread}),n.default.createElement(E,{thread:e.thread})),n.default.createElement(O,e))}function g(e){return e.thread.is_new?n.default.createElement("div",{className:"col-sm-4"},n.default.createElement("a",{href:e.thread.url.new_post,className:"btn btn-default btn-block btn-outline",title:gettext("Go to first new post")},gettext("New"))):null}function _(e){return e.thread.best_answer?n.default.createElement("div",{className:"col-sm-4"},n.default.createElement("a",{href:e.thread.url.best_answer,className:"btn btn-default btn-block btn-outline",title:gettext("Go to best answer")},gettext("Best answer"))):null}function E(e){return e.thread.has_unapproved_posts&&e.thread.acl.can_approve?n.default.createElement("div",{className:"col-sm-4"},n.default.createElement("a",{href:e.thread.url.unapproved_post,className:"btn btn-default btn-block btn-outline",title:gettext("Go to first unapproved post")},gettext("Unapproved"))):null}function w(e){return n.default.createElement("div",{className:"col-sm-4"},n.default.createElement("a",{href:e.thread.url.last_post,className:"btn btn-default btn-block btn-outline",title:gettext("Go to last post")},gettext("Last")))}function O(e){return e.user.is_anonymous?n.default.createElement("div",{className:"visible-xs-block visible-sm-block"},n.default.createElement("a",{href:e.thread.url.last_post,className:"btn btn-default btn-block btn-outline"},gettext("Last post"))):n.default.createElement("div",{className:"dropdown visible-xs-block visible-sm-block"},n.default.createElement("button",{"aria-expanded":"true","aria-haspopup":"true",className:"btn btn-default dropdown-toggle btn-block btn-outline","data-toggle":"dropdown",type:"button"},n.default.createElement("span",{className:"material-icon"},"expand_more"),n.default.createElement("span",{className:"btn-text hidden-xs"},gettext("Options"))),n.default.createElement("ul",{className:"dropdown-menu"},n.default.createElement(R,e),n.default.createElement(P,e),n.default.createElement(k,e),n.default.createElement(j,e)))}function P(e){return e.thread.is_new?n.default.createElement("li",null,n.default.createElement("a",{href:e.thread.url.new_post,className:"btn btn-link"},gettext("Go to first new post"))):null}function k(e){return e.thread.has_unapproved_posts&&e.thread.acl.can_approve?n.default.createElement("li",null,n.default.createElement("a",{href:e.thread.url.unapproved_post,className:"btn btn-link"},gettext("Go to first unapproved post"))):null}function j(e){return n.default.createElement("li",null,n.default.createElement("a",{href:e.thread.url.last_post,className:"btn btn-link"},gettext("Go to last post")))}function S(e){return e.thread.acl.can_reply?n.default.createElement("div",{className:"col-sm-4 hidden-xs"},n.default.createElement(a.default,{className:"btn btn-primary btn-block btn-outline",onClick:e.openReplyForm})):null}function N(e){return e.user.id?n.default.createElement("div",{className:"col-xs-12 col-sm-4"},n.default.createElement(o.default,b({className:"dropdown",dropdownClassName:"dropdown-menu dropdown-menu-right stick-to-bottom"},e))):null}var x=function(){d(i,n.default.Component);var u=m(i);function i(){var e;c(this,i);for(var t,r,n,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=u.call.apply(u,[this].concat(o)),t=h(e),n=function(){s.default.open({mode:"POLL",submit:e.props.thread.api.poll,thread:e.props.thread,poll:null})},(r="onClick")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e}return f(i,[{key:"render",value:function(){return!this.props.thread.acl.can_start_poll||this.props.thread.poll?null:n.default.createElement("div",{className:"col-sm-4 hidden-xs"},n.default.createElement("button",{className:"btn btn-default btn-block btn-outline",onClick:this.onClick,type:"button"},n.default.createElement("span",{className:"material-icon"},"poll"),gettext("Add poll")))}}]),i}();r.StartPoll=x;var R=function(){d(t,x);var e=m(t);function t(){return c(this,t),e.apply(this,arguments)}return f(t,[{key:"render",value:function(){return!this.props.thread.acl.can_start_poll||this.props.thread.poll?null:n.default.createElement("li",null,n.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},gettext("Add poll")))}}]),t}();function C(e){return e.visible?n.default.createElement("div",{className:"col-sm-4 hidden-xs"}):null}r.StartPollCompact=R},{"../../services/posting":375,"./reply-button":232,"./subscription":235,react:"react"}],238:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return e.isLoaded?0!==e.threads.length?n.default.createElement(o.default,{activeCategory:e.category,categories:e.categories,list:e.list,threads:e.threads,diffSize:e.diffSize,applyDiff:e.applyDiff,showOptions:e.showOptions,selection:e.selection,busyThreads:e.busyThreads}):n.default.createElement(a.default,{diffSize:e.diffSize,applyDiff:e.applyDiff},e.children):n.default.createElement(l.default,null)};var n=u(e("react")),a=u(e("./list/empty")),o=u(e("./list/ready")),l=u(e("./list/preview"));function u(e){return e&&e.__esModule?e:{default:e}}},{"./list/empty":240,"./list/preview":241,"./list/ready":242,react:"react"}],239:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.applyDiff,r=e.diffSize;return 0===r?null:a.default.createElement("li",{className:"list-group-item threads-diff-message"},a.default.createElement("button",{type:"button",className:"btn btn-block btn-default",onClick:t},a.default.createElement("span",{className:"material-icon"},"cached"),a.default.createElement("span",{className:"diff-message"},o(r))))},r.getMessage=o;var n,a=(n=e("react"))&&n.__esModule?n:{default:n};function o(e){var t=ngettext("There is %(threads)s new or updated thread. Click this message to show it.","There are %(threads)s new or updated threads. Click this message to show them.",e);return interpolate(t,{threads:e},!0)}},{react:"react"}],240:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("./diff-message"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,r,n=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"getDiffMessage",value:function(){return 0===this.props.diffSize?null:o.default.createElement(l.default,{applyDiff:this.props.applyDiff,diffSize:this.props.diffSize})}},{key:"render",value:function(){return o.default.createElement("div",{className:"threads-list ui-ready"},o.default.createElement("ul",{className:"list-group"},this.getDiffMessage(),this.props.children))}}])&&i(e.prototype,t),r&&i(e,r),a}();r.default=a},{"./diff-message":239,react:"react"}],241:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../thread/preview"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,r,n=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return o.default.createElement("div",{className:"threads-list ui-preview"},o.default.createElement("ul",{className:"list-group"},o.default.createElement(l.default,null)))}}])&&i(e.prototype,t),r&&i(e,r),a}();r.default=a},{"../thread/preview":249,react:"react"}],242:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return n.default.createElement("div",{className:"threads-list ui-ready"},n.default.createElement("ul",{className:"list-group"},n.default.createElement(a.default,{diffSize:t.diffSize,applyDiff:t.applyDiff}),t.threads.map(function(e){return n.default.createElement(o.default,{activeCategory:t.activeCategory,categories:t.categories,list:t.list,thread:e,showOptions:t.showOptions,isSelected:0<=t.selection.indexOf(e.id),isBusy:0<=t.busyThreads.indexOf(e.id),key:e.id})})))};var n=l(e("react")),a=l(e("./diff-message")),o=l(e("../thread/ready"));function l(e){return e&&e.__esModule?e:{default:e}}},{"../thread/ready":250,"./diff-message":239,react:"react"}],243:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.category,r=e.isBusy,n=e.showOptions,a=e.isSelected,o=e.thread,l="col-xs-12 col-sm-12";n&&(l=o.moderation.length?"col-xs-6 col-sm-12":"col-xs-9 col-sm-12");var u=0;o.is_hidden&&(u+=1);o.is_closed&&(u+=1);o.has_poll&&(u+=1);var i="detail-text hidden-xs";n&&3===u&&(i+=" hidden-sm");return s.default.createElement("div",{className:"row thread-details-bottom"},s.default.createElement("div",{className:l},s.default.createElement(c.default,{className:"item-title thread-detail-category hidden-xs",category:t}),s.default.createElement(d,{textClassName:i,display:o.is_hidden}),s.default.createElement(p,{textClassName:i,display:o.is_closed}),s.default.createElement(m,{textClassName:i,display:o.has_poll}),s.default.createElement(h,{thread:o}),s.default.createElement(y,{forceFullText:!n||u<2,replies:o.replies}),s.default.createElement(b,{datetime:o.last_post_on,url:o.url.last_post}),s.default.createElement(v,{posterName:o.last_poster_name,url:o.url.last_poster})),s.default.createElement(f.OptionsXs,{disabled:r,display:n,isSelected:a,thread:o}))},r.HiddenLabel=d,r.ClosedLabel=p,r.PollLabel=m,r.BestAnswerLabel=h,r.RepliesLabel=y,r.LastReplyLabel=b,r.LastPoster=v;var s=n(e("react")),c=n(e("./category")),f=e("../options");function n(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=e.display,r=e.textClassName;return t?s.default.createElement("span",{className:"thread-detail-hidden"},s.default.createElement("span",{className:"material-icon"},"visibility_off"),s.default.createElement("span",{className:r},gettext("Hidden"))):null}function p(e){var t=e.display,r=e.textClassName;return t?s.default.createElement("span",{className:"thread-detail-closed"},s.default.createElement("span",{className:"material-icon"},"lock_outline"),s.default.createElement("span",{className:r},gettext("Closed"))):null}function m(e){var t=e.display,r=e.textClassName;return t?s.default.createElement("span",{className:"thread-detail-poll"},s.default.createElement("span",{className:"material-icon"},"assessment"),s.default.createElement("span",{className:r},gettext("Poll"))):null}function h(e){var t=e.thread;return t.best_answer?s.default.createElement("a",{className:"visible-xs-inline-block thread-detail-answered",href:t.url.best_answer},s.default.createElement("span",{className:"material-icon"},"check_box")):null}function y(e){var t=e.replies,r=e.forceFullText,n=ngettext("%(replies)s reply","%(replies)s replies",t),a="",o="",o=r?(a="detail-text hide","detail-text"):(a="detail-text visible-xs-inline-block","detail-text hidden-xs");return s.default.createElement("span",{className:"thread-detail-replies"},s.default.createElement("span",{className:"material-icon"},"forum"),s.default.createElement("span",{className:a},t),s.default.createElement("span",{className:o},interpolate(n,{replies:t},!0)))}function b(e){var t=e.datetime,r=e.url;return s.default.createElement("a",{className:"visible-sm-inline-block thread-detail-last-reply",href:r,title:t.format("LLL")},t.fromNow(!0))}function v(e){var t=e.posterName,r=e.url,n="visible-sm-inline-block item-title thread-last-poster";return r?s.default.createElement("a",{className:n,href:r},t):s.default.createElement("span",{className:n},t)}},{"../options":248,"./category":244,react:"react"}],244:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.category,r=e.className;if(!t)return null;t.css_class&&(r+=" thread-detail-category-"+t.css_class);return a.default.createElement("a",{className:r,href:t.url.index},t.name)};var n,a=(n=e("react"))&&n.__esModule?n:{default:n}},{react:"react"}],245:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BottomDetails",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"TopDetails",{enumerable:!0,get:function(){return a.default}});var n=o(e("./bottom")),a=o(e("./top"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./bottom":243,"./top":246}],246:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.category,r=e.thread;return l.default.createElement("div",{className:"thread-details-top"},l.default.createElement(o,{isRead:r.is_read,url:r.url.new_post}),l.default.createElement(u,{weight:r.weight}),l.default.createElement(i,{thread:r.is_unapproved,posts:r.has_unapproved_posts}),l.default.createElement(s,{thread:r}),l.default.createElement(n.default,{className:"item-title thread-detail-category visible-xs-inline-block",category:t}),l.default.createElement(c,{datetime:r.last_post_on,url:r.url.last_post}),l.default.createElement(f,{posterName:r.last_poster_name,url:r.url.last_poster}))},r.NewLabel=o,r.PinnedLabel=u,r.UnapprovedLabel=i,r.BestAnswerLabel=s,r.LastReplyLabel=c,r.LastPoster=f;var l=a(e("react")),n=a(e("./category"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.isRead,r=e.url;return t?null:l.default.createElement("a",{className:"thread-detail-new",href:r},l.default.createElement("span",{className:"material-icon"},"comment"),l.default.createElement("span",{className:"detail-text"},gettext("New posts")))}function u(e){var t=e.weight;if(0===t)return null;var r="thread-detail-pinned-globally",n="bookmark",a=gettext("Pinned globally");return 1===t&&(r="thread-detail-pinned-locally",n="bookmark_border",a=gettext("Pinned locally")),l.default.createElement("span",{className:r},l.default.createElement("span",{className:"material-icon"},n),l.default.createElement("span",{className:"detail-text"},a))}function i(e){var t=e.posts,r=e.thread;if(!t&&!r)return null;var n="thread-detail-unapproved-posts",a="remove_circle_outline",o=gettext("Unapproved posts");return r&&(n="thread-detail-unapproved",a="remove_circle",o=gettext("Unapproved")),l.default.createElement("span",{className:n},l.default.createElement("span",{className:"material-icon"},a),l.default.createElement("span",{className:"detail-text"},o))}function s(e){var t=e.thread;return t.best_answer?l.default.createElement("a",{className:"hidden-xs thread-detail-answered",href:t.url.best_answer},l.default.createElement("span",{className:"material-icon"},"check_box"),l.default.createElement("span",{className:"detail-text"},gettext("Answered"))):null}function c(e){var t=e.datetime,r=e.url;return l.default.createElement("a",{className:"visible-xs-inline-block thread-detail-last-reply",href:r,title:t.format("LLL")},t.fromNow(!0))}function f(e){var t=e.posterName,r=e.url;return r?l.default.createElement("a",{className:"visible-xs-inline-block item-title thread-last-poster",href:r},t):l.default.createElement("span",{className:"visible-xs-inline-block item-title thread-last-poster"},t)}},{"./category":244,react:"react"}],247:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.thread;return n.default.createElement("div",{className:"media"},n.default.createElement("div",{className:"media-left"},n.default.createElement(o.default,{className:"thread-last-poster-avatar",title:t.last_poster_name,url:t.url.last_poster},n.default.createElement(a.default,{className:"media-object",size:40,user:t.last_poster}))),n.default.createElement("div",{className:"media-body"},n.default.createElement(o.default,{className:"item-title thread-last-poster",url:t.url.last_poster},t.last_poster_name),n.default.createElement(u,{datetime:t.last_post_on,url:t.url.last_post})))},r.Timestamp=u;var n=l(e("react")),a=l(e("../../avatar")),o=l(e("./user-url"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=e.datetime,r=e.url;return n.default.createElement("a",{className:"thread-last-reply",href:r,title:t.format("LLL")},t.fromNow(!0))}},{"../../avatar":6,"./user-url":255,react:"react"}],248:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Options=function(e){var t=e.display,r=e.disabled,n=e.isSelected,a=e.thread;if(!t)return null;var o="col-sm-2 col-md-2 hidden-xs";a.moderation.length&&(o="col-sm-3 col-md-2 hidden-xs");return l.default.createElement("div",{className:o},l.default.createElement("div",{className:"row thread-options"},l.default.createElement(i.default,{thread:a,disabled:r}),l.default.createElement(u.default,{thread:a,disabled:r}),l.default.createElement(y,{thread:a,disabled:r,isSelected:n})))},r.OptionsXs=function(e){var t=e.display,r=e.disabled,n=e.isSelected,a=e.thread;if(!t)return null;var o="";a.moderation.length?o+="col-xs-6":o+="col-xs-3";return o+=" visible-xs-block thread-options-xs",l.default.createElement("div",{className:o},l.default.createElement("div",{className:"row thread-options"},l.default.createElement(i.default,{thread:a,disabled:r}),l.default.createElement(u.default,{thread:a,disabled:r}),l.default.createElement(y,{thread:a,disabled:r,isSelected:n})))},r.Checkbox=void 0;var l=n(e("react")),u=n(e("./subscription/compact")),i=n(e("./subscription/full")),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../reducers/selection")),c=n(e("../../../services/store"));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=h(o);return t=l?(e=h(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==d(n)&&"function"!=typeof n?m(r):n}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(i,l.default.Component);var e,t,r,u=p(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t,r,n,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=u.call.apply(u,[this].concat(o)),t=m(e),n=function(){c.default.dispatch(s.item(e.props.thread.id))},(r="toggleSelection")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e}return e=i,(t=[{key:"render",value:function(){var e=this.props,t=e.disabled,r=e.isSelected;return e.thread.moderation.length?l.default.createElement("div",{className:"col-xs-6"},l.default.createElement("button",{className:"btn btn-default btn-icon btn-block",onClick:this.toggleSelection,disabled:t},l.default.createElement("span",{className:"material-icon"},r?"check_box":"check_box_outline_blank"))):null}}])&&a(e.prototype,t),r&&a(e,r),i}();r.Checkbox=y},{"../../../reducers/selection":358,"../../../services/store":377,"./subscription/compact":251,"./subscription/full":252,react:"react"}],249:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("react"))&&n.__esModule?n:{default:n},l=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../utils/random"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=d(o);return t=l?(e=d(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==i(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,o.default.Component);var e,t,r,n=f(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return o.default.createElement("li",{className:"list-group-item thread-preview"},o.default.createElement("div",{className:"thread-details-top visible-xs-block"},o.default.createElement("span",{className:"ui-preview-text",style:{width:l.int(30,80)+"px"}}," "),o.default.createElement("span",{className:"ui-preview-text",style:{width:l.int(30,80)+"px"}}," "),o.default.createElement("span",{className:"ui-preview-text",style:{width:l.int(30,80)+"px"}}," ")),o.default.createElement("span",{className:"item-title thread-title"},o.default.createElement("span",{className:"ui-preview-text",style:{width:l.int(60,200)+"px"}}," "),o.default.createElement("span",{className:"ui-preview-text hidden-xs",style:{width:l.int(60,200)+"px"}}," "),o.default.createElement("span",{className:"ui-preview-text hidden-xs",style:{width:l.int(60,200)+"px"}}," ")),o.default.createElement("div",{className:"thread-details-bottom"},o.default.createElement("div",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:l.int(30,80)+"px"}}," "),o.default.createElement("span",{className:"ui-preview-text",style:{width:l.int(30,80)+"px"}}," "),o.default.createElement("span",{className:"ui-preview-text",style:{width:l.int(30,80)+"px"}}," "))))}}])&&s(e.prototype,t),r&&s(e,r),a}();r.default=a},{"../../../utils/random":388,react:"react"}],250:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.activeCategory,r=e.categories,n=(e.list,e.thread),a=e.isBusy,o=e.isSelected,l=e.showOptions,u=null;t.id!==n.category&&(u=r[n.category]);var i=u||t,s="thread-main col-xs-12";l?n.moderation.length?s+=" col-sm-9 col-md-7":s+=" col-sm-10 col-md-7":s+=" col-sm-12 col-md-9";return c.default.createElement("li",{className:y(n.is_read,a,o,i)},c.default.createElement(d.TopDetails,{category:u,thread:n}),c.default.createElement("div",{className:"row thread-row"},c.default.createElement("div",{className:s},c.default.createElement("div",{className:"media"},c.default.createElement("div",{className:"media-left hidden-xs"},c.default.createElement(h.default,{className:"thread-starter-avatar",title:n.starter_name,url:n.url.starter},c.default.createElement(f.default,{size:40,user:n.starter}))),c.default.createElement("div",{className:"media-body"},c.default.createElement("a",{href:n.url.index,className:"item-title thread-title"},n.title),c.default.createElement(d.BottomDetails,{category:u,disabled:a,isSelected:o,showOptions:l,thread:n})))),c.default.createElement("div",{className:"col-md-3 hidden-xs hidden-sm thread-last-action"},c.default.createElement(p.default,{thread:n})),c.default.createElement(m.Options,{disabled:a,display:l,isSelected:o,thread:n})))},r.getClassName=y;var c=n(e("react")),f=n(e("../../avatar")),d=e("./details"),p=n(e("./last-action")),m=e("./options"),h=n(e("./user-url"));function n(e){return e&&e.__esModule?e:{default:e}}function y(e,t,r,n){var a=["list-group-item"];return n&&n.css_class&&(a.push("list-group-category-has-flavor"),a.push("list-group-item-category-"+n.css_class)),e?a.push("thread-read"):a.push("thread-new"),t?a.push("thread-busy"):r&&a.push("thread-selected"),a.join(" ")}},{"../../avatar":6,"./details":245,"./last-action":247,"./options":248,"./user-url":255,react:"react"}],251:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e("react")),n=a(e("./full")),c=a(e("./modal")),f=a(e("../../../../services/modal"));function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=i(o);return t=l?(e=i(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?p(r):n}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,n.default);var e,t,r,u=d(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t,r,n,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=u.call.apply(u,[this].concat(o)),t=p(e),n=function(){f.default.show(s.default.createElement(c.default,{thread:e.props.thread}))},(r="showOptions")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e}return e=i,(t=[{key:"render",value:function(){var e="";return this.props.thread.moderation.length?e+="col-xs-6":e+="col-xs-12",e+=" hidden-md hidden-lg",s.default.createElement("div",{className:e},s.default.createElement("button",{type:"button",className:this.getClassName(),disabled:this.props.disabled,onClick:this.showOptions},s.default.createElement("span",{className:"material-icon"},this.getIcon())))}}])&&o(e.prototype,t),r&&o(e,r),i}();r.default=m},{"../../../../services/modal":371,"./full":252,"./modal":253,react:"react"}],252:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Label=d,r.default=void 0;var o=n(e("react")),l=n(e("./options"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,r,n=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"getIcon",value:function(){return!0===this.props.thread.subscription?"star":!1===this.props.thread.subscription?"star_half":"star_border"}},{key:"getClassName",value:function(){return!0===this.props.thread.subscription?"btn btn-default btn-icon btn-block btn-subscribe btn-subscribe-full dropdown-toggle":!1===this.props.thread.subscription?"btn btn-default btn-icon btn-block btn-subscribe btn-subscribe-half dropdown-toggle":"btn btn-default btn-icon btn-block btn-subscribe dropdown-toggle"}},{key:"render",value:function(){var e=this.props.thread,t=e.moderation,r=e.subscription,n=!t.length?"col-xs-12":"col-xs-6";return n+=" hidden-xs hidden-sm",o.default.createElement("div",{className:n},o.default.createElement("div",{className:"btn-group btn-group-justified"},o.default.createElement("div",{className:"btn-group"},o.default.createElement("button",{type:"button",className:this.getClassName(),disabled:this.props.disabled,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.createElement("span",{className:"material-icon"},this.getIcon()),o.default.createElement(d,{moderation:t,subscription:r})),o.default.createElement(l.default,{className:"dropdown-menu dropdown-menu-right",thread:this.props.thread}))))}}])&&i(e.prototype,t),r&&i(e,r),a}();function d(e){var t=e.moderation,r=e.subscription;if(t.length)return null;var n=gettext("Disabled");return!0===r?n=gettext("E-mail"):!1===r&&(n=gettext("Enabled")),o.default.createElement("span",{className:"btn-text"},n)}r.default=a},{"./options":254,react:"react"}],253:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("./options"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,r,n=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){return o.default.createElement("div",{className:"modal-dialog modal-sm",role:"document"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},o.default.createElement("span",{"aria-hidden":"true"},"×")),o.default.createElement("h4",{className:"modal-title"},gettext("Change subscription"))),o.default.createElement(l.default,{className:"modal-menu",thread:this.props.thread})))}}])&&i(e.prototype,t),r&&i(e,r),a}();r.default=a},{"./options":254,react:"react"}],254:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=(n(e("../../../button")),e("../../../../reducers/threads")),u=n(e("../../../../services/ajax")),i=n(e("../../../../services/modal")),s=n(e("../../../../services/snackbar")),c=n(e("../../../../services/store"));function n(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==f(n)&&"function"!=typeof n?h(r):n}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v={unsubscribe:null,notify:!1,email:!0},a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,o.default.Component);var e,t,r,n=m(a);function a(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),b(h(r=n.call(this,e)),"setSubscription",function(e){i.default.hide(),r.setState({isLoading:!0});var t=r.props.thread.subscription;c.default.dispatch((0,l.patch)(r.props.thread,{subscription:v[e]})),u.default.patch(r.props.thread.api.index,[{op:"replace",path:"subscription",value:e}]).then(function(){r.setState({isLoading:!1})},function(e){r.setState({isLoading:!1}),c.default.dispatch((0,l.patch)(r.props.thread,{subscription:v[t]})),s.default.apiError(e)})}),b(h(r),"unsubscribe",function(){r.setSubscription("unsubscribe")}),b(h(r),"notify",function(){r.setSubscription("notify")}),b(h(r),"email",function(){r.setSubscription("email")}),r.state={isLoading:!1},r}return e=a,(t=[{key:"render",value:function(){return o.default.createElement("ul",{className:this.props.className},o.default.createElement("li",null,o.default.createElement("button",{className:"btn-link",onClick:this.unsubscribe},o.default.createElement("span",{className:"material-icon"},"star_border"),gettext("Unsubscribe"))),o.default.createElement("li",null,o.default.createElement("button",{className:"btn-link",onClick:this.notify},o.default.createElement("span",{className:"material-icon"},"star_half"),gettext("Subscribe"))),o.default.createElement("li",null,o.default.createElement("button",{className:"btn-link",onClick:this.email},o.default.createElement("span",{className:"material-icon"},"star"),gettext("Subscribe with e-mail"))))}}])&&d(e.prototype,t),r&&d(e,r),a}();r.default=a},{"../../../../reducers/threads":361,"../../../../services/ajax":365,"../../../../services/modal":371,"../../../../services/snackbar":376,"../../../../services/store":377,"../../../button":8,react:"react"}],255:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.children,r=e.className,n=e.title,a=e.url;if(a)return o.default.createElement("a",{className:r,href:a,title:n},t);return o.default.createElement("span",{className:r,title:n},t)};var n,o=(n=e("react"))&&n.__esModule?n:{default:n}},{react:"react"}],256:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Subcategory=void 0;var n,a=(n=e("react"))&&n.__esModule?n:{default:n},o=e("react-router");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(){c(t,a.default.Component);var e=d(t);function t(){return l(this,t),e.apply(this,arguments)}return s(t,[{key:"getUrl",value:function(){return this.props.listPath?this.props.category.url.index+this.props.listPath:this.props.category.url.index}},{key:"render",value:function(){return a.default.createElement("li",null,a.default.createElement(o.Link,{to:this.getUrl(),className:"btn btn-link"},this.props.category.name))}}]),t}();r.Subcategory=m;var h=function(){c(t,a.default.Component);var e=d(t);function t(){return l(this,t),e.apply(this,arguments)}return s(t,[{key:"render",value:function(){var t=this;return a.default.createElement("div",{className:"dropdown category-picker"},a.default.createElement("button",{type:"button",className:"btn btn-default btn-outline dropdown-toggle btn-block","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},a.default.createElement("span",{className:"material-icon"},"label_outline"),a.default.createElement("span",{className:"hidden-xs"},gettext("Category"))),a.default.createElement("ul",{className:"dropdown-menu stick-to-bottom categories-menu"},this.props.choices.map(function(e){return t.props.categories[e]?a.default.createElement(m,{category:t.props.categories[e],listPath:t.props.list.path,key:e}):null})))}}]),t}();r.default=h},{react:"react","react-router":"react-router"}],257:[function(e,t,r){"use strict";function n(e,t){return e.last_post>t.last_post?-1:e.last_post<t.last_post?1:0}Object.defineProperty(r,"__esModule",{value:!0}),r.compareLastPostAge=n,r.compareGlobalWeight=function(e,t){return 2===e.weight&&e.weight>t.weight?-1:2===t.weight&&e.weight<t.weight?1:n(e,t)},r.compareWeight=function(e,t){return e.weight>t.weight?-1:e.weight<t.weight?1:n(e,t)}},{}],258:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../page-lead")),u=n(e("./toolbar"));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=d(o);return t=l?(e=d(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==i(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,o.default.Component);var e,t,r,n=f(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"getCategoryDescription",value:function(){return this.props.pageLead?o.default.createElement("div",{className:"category-description"},o.default.createElement("div",{className:"page-lead"},o.default.createElement("p",null,this.props.pageLead))):this.props.route.category.description?o.default.createElement("div",{className:"category-description"},o.default.createElement(l.default,{copy:this.props.route.category.description.html})):null}},{key:"getDisableToolbar",value:function(){return!this.props.isLoaded||this.props.isBusy||this.props.busyThreads.length}},{key:"getToolbar",value:function(){return this.props.subcategories.length||this.props.user.id?o.default.createElement(u.default,{subcategories:this.props.subcategories,categories:this.props.route.categories,categoriesMap:this.props.route.categoriesMap,list:this.props.route.list,threads:this.props.threads,moderation:this.props.moderation,selection:this.props.selection,selectAllThreads:this.props.selectAllThreads,selectNoneThreads:this.props.selectNoneThreads,addThreads:this.props.addThreads,freezeThread:this.props.freezeThread,deleteThread:this.props.deleteThread,updateThread:this.props.updateThread,api:this.props.api,route:this.props.route,disabled:this.getDisableToolbar(),user:this.props.user}):null}},{key:"render",value:function(){return o.default.createElement("div",{className:"container"},this.getCategoryDescription(),this.getToolbar(),this.props.children)}}])&&s(e.prototype,t),r&&s(e,r),a}();r.default=a},{"../page-lead":92,"./toolbar":269,react:"react"}],259:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ParentCategory=b,r.default=void 0;var a=o(e("react")),u=e("react-router"),n=o(e("../button")),i=(o(e("../dropdown-toggle")),o(e("./nav"))),s=(o(e("../../services/ajax")),o(e("../../services/posting"))),c=(o(e("../../services/snackbar")),o(e("../../services/store")),o(e("../..")));function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==f(n)&&"function"!=typeof n?h(r):n}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,a.default.Component);var e,t,r,o=m(l);function l(e){var t,r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),r=h(t),a=function(){s.default.open(t.props.startThread||{mode:"START",config:c.default.get("THREAD_EDITOR_API"),submit:c.default.get("THREADS_API"),category:t.props.route.category.id})},(n="startThread")in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,t.state={isBusy:!1},t}return e=l,(t=[{key:"hasGoBackButton",value:function(){return!!this.props.route.category.parent}},{key:"getGoBackButton",value:function(){if(!this.props.route.category.parent)return null;var e=this.props.categories[this.props.route.category.parent];return a.default.createElement("div",{className:"hidden-xs col-sm-2 col-lg-1"},a.default.createElement(u.Link,{className:"btn btn-default btn-icon btn-aligned btn-go-back btn-block btn-outline",to:e.url.index+this.props.route.list.path},a.default.createElement("span",{className:"material-icon"},"keyboard_arrow_left")))}},{key:"getStartThreadButton",value:function(){return this.props.user.id?a.default.createElement(n.default,{className:"btn-primary btn-block btn-outline",onClick:this.startThread,disabled:this.props.disabled},a.default.createElement("span",{className:"material-icon"},"chat"),gettext("Start thread")):null}},{key:"render",value:function(){var e="col-xs-12";this.hasGoBackButton()&&(e+=" col-sm-10 col-lg-11 sm-align-row-buttons");var t=!!this.props.user.id;return a.default.createElement("div",{className:"page-header-bg"},a.default.createElement("div",{className:"page-header"},a.default.createElement("div",{className:"container"},a.default.createElement("div",{className:"row"},a.default.createElement("div",{className:t?"col-sm-9 col-md-10":"col-xs-12"},a.default.createElement("div",{className:"row"},this.getGoBackButton(),a.default.createElement("div",{className:e},a.default.createElement(b,{categories:this.props.categories,category:this.props.route.category.parent}),a.default.createElement("h1",null,this.props.title)))),t&&a.default.createElement("div",{className:"col-sm-3 col-md-2 xs-margin-top"},this.getStartThreadButton()))),a.default.createElement(i.default,{baseUrl:this.props.route.category.url.index,list:this.props.route.list,lists:this.props.route.lists})))}}])&&d(e.prototype,t),r&&d(e,r),l}();function b(e){var t=e.categories,r=e.category;if(!r)return null;var n=t[r];return a.default.createElement(u.Link,{className:"go-back-sm visible-xs-block",to:n.url.index},a.default.createElement("span",{className:"material-icon"},"chevron_left"),n.parent?n.name:gettext("Threads"))}r.default=l},{"../..":302,"../../services/ajax":365,"../../services/posting":375,"../../services/snackbar":376,"../../services/store":377,"../button":8,"../dropdown-toggle":27,"./nav":266,react:"react","react-router":"react-router"}],260:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("react"))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(a,o.default.Component);var e,t,r,n=s(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){return"all"===this.props.list.type?this.props.emptyMessage?o.default.createElement("li",{className:"list-group-item empty-message"},o.default.createElement("p",{className:"lead"},this.props.emptyMessage),o.default.createElement("p",null,gettext("Why not start one yourself?"))):o.default.createElement("li",{className:"list-group-item empty-message"},o.default.createElement("p",{className:"lead"},this.props.category.special_role?gettext("There are no threads on this forum... yet!"):gettext("There are no threads in this category.")),o.default.createElement("p",null,gettext("Why not start one yourself?"))):o.default.createElement("li",{className:"list-group-item empty-message"},gettext("No threads matching specified criteria were found."))}}])&&l(e.prototype,t),r&&l(e,r),a}();r.default=a},{react:"react"}],261:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=n(e("react")),u=n(e("./errors-list")),i=n(e("./merge")),s=n(e("./move")),c=(function(e){if(e&&e.__esModule)return;if(null===e||"object"!==m(e)&&"function"!=typeof e)return;var t=p();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r)}(e("../../../reducers/selection")),n(e("../../../services/ajax"))),f=n(e("../../../services/modal")),d=n(e("../../../services/snackbar"));n(e("../../../services/store")),n(e("../../../utils/countdown"));function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==m(n)&&"function"!=typeof n?b(r):n}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,l.default.Component);var e,t,r,n=y(a);function a(){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return g(b(o=n.call.apply(n,[this].concat(t))),"callApi",function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;o.props.threads.forEach(function(e){o.props.freezeThread(e.id)});var n=o.props.threads.map(function(e){return e.id});e.push({op:"add",path:"acl",value:!0}),c.default.patch(o.props.api,{ids:n,ops:e}).then(function(e){o.props.threads.forEach(function(e){o.props.freezeThread(e.id)}),e.forEach(function(e){o.props.updateThread(e)}),d.default.success(t),r&&r()},function(e){if(o.props.threads.forEach(function(e){o.props.freezeThread(e.id)}),400!==e.status)return d.default.apiError(e);var n=[],a={};o.props.threads.forEach(function(e){a[e.id]=e}),e.forEach(function(e){var t=e.id,r=e.detail;void 0!==a[t]&&n.push({errors:r,thread:a[t]})}),f.default.show(l.default.createElement(u.default,{errors:n}))})}),g(b(o),"pinGlobally",function(){o.callApi([{op:"replace",path:"weight",value:2}],gettext("Selected threads were pinned globally."))}),g(b(o),"pinLocally",function(){o.callApi([{op:"replace",path:"weight",value:1}],gettext("Selected threads were pinned locally."))}),g(b(o),"unpin",function(){o.callApi([{op:"replace",path:"weight",value:0}],gettext("Selected threads were unpinned."))}),g(b(o),"approve",function(){o.callApi([{op:"replace",path:"is-unapproved",value:!1}],gettext("Selected threads were approved."))}),g(b(o),"open",function(){o.callApi([{op:"replace",path:"is-closed",value:!1}],gettext("Selected threads were opened."))}),g(b(o),"close",function(){o.callApi([{op:"replace",path:"is-closed",value:!0}],gettext("Selected threads were closed."))}),g(b(o),"unhide",function(){o.callApi([{op:"replace",path:"is-hidden",value:!1}],gettext("Selected threads were unhidden."))}),g(b(o),"hide",function(){o.callApi([{op:"replace",path:"is-hidden",value:!0}],gettext("Selected threads were hidden."))}),g(b(o),"move",function(){f.default.show(l.default.createElement(s.default,{callApi:o.callApi,categories:o.props.categories,categoriesMap:o.props.categoriesMap,route:o.props.route,user:o.props.user}))}),g(b(o),"merge",function(){var t=[];if(o.props.threads.forEach(function(e){e.acl.can_merge||t.append({id:e.id,title:e.title,errors:[gettext("You don't have permission to merge this thread with others.")]})}),o.props.threads.length<2)d.default.info(gettext("You have to select at least two threads to merge."));else{if(t.length)return void f.default.show(l.default.createElement(u.default,{errors:t}));f.default.show(l.default.createElement(i.default,o.props))}}),g(b(o),"delete",function(){var e;confirm(gettext("Are you sure you want to delete selected threads?"))&&(o.props.threads.map(function(e){o.props.freezeThread(e.id)}),e=o.props.threads.map(function(e){return e.id}),c.default.delete(o.props.api,e).then(function(){o.props.threads.map(function(e){o.props.freezeThread(e.id),o.props.deleteThread(e)}),d.default.success(gettext("Selected threads were deleted."))},function(e){var t;400===e.status?(t=e.map(function(e){return e.id}),o.props.threads.map(function(e){o.props.freezeThread(e.id),-1===t.indexOf(e.id)&&o.props.deleteThread(e)}),f.default.show(l.default.createElement(u.default,{errors:e}))):d.default.apiError(e)}))}),o}return e=a,(t=[{key:"getPinGloballyButton",value:function(){return this.props.moderation.can_pin_globally?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.pinGlobally,type:"button"},l.default.createElement("span",{className:"material-icon"},"bookmark"),gettext("Pin threads globally"))):null}},{key:"getPinLocallyButton",value:function(){return this.props.moderation.can_pin?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.pinLocally,type:"button"},l.default.createElement("span",{className:"material-icon"},"bookmark_border"),gettext("Pin threads locally"))):null}},{key:"getUnpinButton",value:function(){return this.props.moderation.can_pin?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.unpin,type:"button"},l.default.createElement("span",{className:"material-icon"},"panorama_fish_eye"),gettext("Unpin threads"))):null}},{key:"getMoveButton",value:function(){return this.props.moderation.can_move?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.move,type:"button"},l.default.createElement("span",{className:"material-icon"},"arrow_forward"),gettext("Move threads"))):null}},{key:"getMergeButton",value:function(){return this.props.moderation.can_merge?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.merge,type:"button"},l.default.createElement("span",{className:"material-icon"},"call_merge"),gettext("Merge threads"))):null}},{key:"getApproveButton",value:function(){return this.props.moderation.can_approve?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.approve,type:"button"},l.default.createElement("span",{className:"material-icon"},"done"),gettext("Approve threads"))):null}},{key:"getOpenButton",value:function(){return this.props.moderation.can_close?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.open,type:"button"},l.default.createElement("span",{className:"material-icon"},"lock_open"),gettext("Open threads"))):null}},{key:"getCloseButton",value:function(){return this.props.moderation.can_close?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.close,type:"button"},l.default.createElement("span",{className:"material-icon"},"lock_outline"),gettext("Close threads"))):null}},{key:"getUnhideButton",value:function(){return this.props.moderation.can_unhide?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.unhide,type:"button"},l.default.createElement("span",{className:"material-icon"},"visibility"),gettext("Unhide threads"))):null}},{key:"getHideButton",value:function(){return this.props.moderation.can_hide?l.default.createElement("li",null,l.default.createElement("button",{onClick:this.hide,type:"button",className:"btn btn-link"},l.default.createElement("span",{className:"material-icon"},"visibility_off"),gettext("Hide threads"))):null}},{key:"getDeleteButton",value:function(){return this.props.moderation.can_delete?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.delete,type:"button"},l.default.createElement("span",{className:"material-icon"},"clear"),gettext("Delete threads"))):null}},{key:"render",value:function(){return l.default.createElement("ul",{className:this.props.className},this.getPinGloballyButton(),this.getPinLocallyButton(),this.getUnpinButton(),this.getMoveButton(),this.getMergeButton(),this.getApproveButton(),this.getOpenButton(),this.getCloseButton(),this.getUnhideButton(),this.getHideButton(),this.getDeleteButton())}}])&&o(e.prototype,t),r&&o(e,r),a}();r.default=a},{"../../../reducers/selection":358,"../../../services/ajax":365,"../../../services/modal":371,"../../../services/snackbar":376,"../../../services/store":377,"../../../utils/countdown":382,"./errors-list":262,"./merge":263,"./move":264,react:"react"}],262:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ThreadErrors=f,r.default=void 0;var n,o=(n=e("react"))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(a,o.default.Component);var e,t,r,n=s(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){return o.default.createElement("div",{className:"modal-dialog",role:"document"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},o.default.createElement("span",{"aria-hidden":"true"},"×")),o.default.createElement("h4",{className:"modal-title"},gettext("Threads moderation"))),o.default.createElement("div",{className:"modal-body"},o.default.createElement("p",{className:"lead"},gettext("One or more threads could not be deleted:")),o.default.createElement("ul",{className:"list-unstyled list-errored-items"},this.props.errors.map(function(e){return o.default.createElement(f,{errors:e.errors,key:e.thread.id,thread:e.thread})})))))}}])&&l(e.prototype,t),r&&l(e,r),a}();function f(e){var t=e.errors,r=e.thread;return o.default.createElement("li",null,o.default.createElement("h5",null,r.title),t.map(function(e,t){return o.default.createElement("p",null,e)}))}r.default=a},{react:"react"}],263:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=o(e("react")),n=o(e("../../button")),u=o(e("../../form")),i=o(e("../../form-group")),s=o(e("../../category-select")),c=o(e("../../select")),f=o(e("../../..")),d=e("../../../reducers/threads"),p=a(e("../../../reducers/selection")),m=o(e("./errors-list")),h=o(e("../../merge-conflict")),y=o(e("../../../services/ajax")),b=o(e("../../../services/modal")),v=o(e("../../../services/snackbar")),g=o(e("../../../services/store")),_=a(e("../../../utils/validators"));function E(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return E=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!==w(e)&&"function"!=typeof e)return{default:e};var t=E();if(t&&t.has(e))return t.get(e);var r,n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((r=a?Object.getOwnPropertyDescriptor(e,o):null)&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o])}return n.default=e,t&&t.set(e,n),n}function o(e){return e&&e.__esModule?e:{default:e}}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=S(o);return t=l?(e=S(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==w(n)&&"function"!=typeof n?j(r):n}}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(o,u.default);var e,t,r,a=k(o);function o(e){var n,t;for(var r in!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),N(j(n=a.call(this,e)),"getFormdata",function(){return{threads:n.props.threads.map(function(e){return e.id}),title:n.state.title,category:n.state.category,weight:n.state.weight,is_hidden:n.state.is_hidden,is_closed:n.state.is_closed}}),N(j(n),"handleSuccess",function(e){n.props.threads.forEach(function(e){n.props.freezeThread(e.id),n.props.deleteThread(e)}),g.default.dispatch(p.none()),n.props.addThreads([e]),g.default.dispatch((0,d.filterThreads)(n.props.route.category,n.props.categoriesMap)),b.default.hide()}),N(j(n),"handleError",function(e){400===e.status?e.best_answers||e.polls?b.default.show(l.default.createElement(h.default,{api:f.default.get("MERGE_THREADS_API"),bestAnswers:e.best_answers,data:n.getFormdata(),polls:e.polls,onError:n.handleError,onSuccess:n.handleSuccess})):(n.setState({errors:Object.assign({},n.state.errors,e)}),v.default.error(gettext("Form contains errors."))):403===e.status&&Array.isArray(e)?b.default.show(l.default.createElement(m.default,{errors:e})):e.best_answer?v.default.error(e.best_answer[0]):e.poll?v.default.error(e.poll[0]):v.default.apiError(e)}),N(j(n),"onCategoryChange",function(e){var t=e.target.value,r={category:t};n.acl[t].can_pin_threads<r.weight&&(r.weight=0),n.acl[t].can_hide_threads||(r.is_hidden=0),n.acl[t].can_close_threads||(r.is_closed=!1),n.setState(r)}),n.state={isLoading:!1,title:"",category:null,weight:0,is_hidden:0,is_closed:!1,validators:{title:[_.required()]},errors:{}},n.acl={},e.user.acl.categories){e.user.acl.categories.hasOwnProperty(r)&&(t=e.user.acl.categories[r],n.acl[t.id]=t)}return n.categoryChoices=[],e.categories.forEach(function(e){var t,r;0<e.level&&(r=!(t=n.acl[e.id]).can_start_threads||e.is_closed&&!t.can_close_threads,n.categoryChoices.push({value:e.id,disabled:r,level:e.level-1,label:e.name}),r||n.state.category||(n.state.category=e.id))}),n.isHiddenChoices=[{value:0,icon:"visibility",label:gettext("No")},{value:1,icon:"visibility_off",label:gettext("Yes")}],n.isClosedChoices=[{value:!1,icon:"lock_outline",label:gettext("No")},{value:!0,icon:"lock",label:gettext("Yes")}],n}return e=o,(t=[{key:"clean",value:function(){return!!this.isValid()||(v.default.error(gettext("Form contains errors.")),this.setState({errors:this.validate()}),!1)}},{key:"send",value:function(){return y.default.post(f.default.get("MERGE_THREADS_API"),this.getFormdata())}},{key:"getWeightChoices",value:function(){var e=[{value:0,icon:"remove",label:gettext("Not pinned")},{value:1,icon:"bookmark_border",label:gettext("Pinned locally")}];return 2==this.acl[this.state.category].can_pin_threads&&e.push({value:2,icon:"bookmark",label:gettext("Pinned globally")}),e}},{key:"renderWeightField",value:function(){return this.acl[this.state.category].can_pin_threads?l.default.createElement(i.default,{label:gettext("Thread weight"),for:"id_weight"},l.default.createElement(c.default,{id:"id_weight",onChange:this.bindInput("weight"),value:this.state.weight,choices:this.getWeightChoices()})):null}},{key:"renderHiddenField",value:function(){return this.acl[this.state.category].can_hide_threads?l.default.createElement(i.default,{label:gettext("Hide thread"),for:"id_is_hidden"},l.default.createElement(c.default,{id:"id_is_closed",onChange:this.bindInput("is_hidden"),value:this.state.is_hidden,choices:this.isHiddenChoices})):null}},{key:"renderClosedField",value:function(){return this.acl[this.state.category].can_close_threads?l.default.createElement(i.default,{label:gettext("Close thread"),for:"id_is_closed"},l.default.createElement(c.default,{id:"id_is_closed",onChange:this.bindInput("is_closed"),value:this.state.is_closed,choices:this.isClosedChoices})):null}},{key:"renderForm",value:function(){return l.default.createElement("form",{onSubmit:this.handleSubmit},l.default.createElement("div",{className:"modal-body"},l.default.createElement(i.default,{label:gettext("Thread title"),for:"id_title",validation:this.state.errors.title},l.default.createElement("input",{id:"id_title",className:"form-control",type:"text",onChange:this.bindInput("title"),value:this.state.title})),l.default.createElement("div",{className:"clearfix"}),l.default.createElement(i.default,{label:gettext("Category"),for:"id_category",validation:this.state.errors.category},l.default.createElement(s.default,{id:"id_category",onChange:this.onCategoryChange,value:this.state.category,choices:this.categoryChoices})),l.default.createElement("div",{className:"clearfix"}),this.renderWeightField(),this.renderHiddenField(),this.renderClosedField()),l.default.createElement("div",{className:"modal-footer"},l.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel")),l.default.createElement(n.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Merge threads"))))}},{key:"renderCantMergeMessage",value:function(){return l.default.createElement("div",{className:"modal-body"},l.default.createElement("div",{className:"message-icon"},l.default.createElement("span",{className:"material-icon"},"info_outline")),l.default.createElement("div",{className:"message-body"},l.default.createElement("p",{className:"lead"},gettext("You can't move threads because there are no categories you are allowed to move them to.")),l.default.createElement("p",null,gettext("You need permission to start threads in category to be able to merge threads to it.")),l.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},gettext("Ok"))))}},{key:"getClassName",value:function(){return this.state.category?"modal-dialog":"modal-dialog modal-message"}},{key:"render",value:function(){return l.default.createElement("div",{className:this.getClassName(),role:"document"},l.default.createElement("div",{className:"modal-content"},l.default.createElement("div",{className:"modal-header"},l.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},l.default.createElement("span",{"aria-hidden":"true"},"×")),l.default.createElement("h4",{className:"modal-title"},gettext("Merge threads"))),this.state.category?this.renderForm():this.renderCantMergeMessage()))}}])&&O(e.prototype,t),r&&O(e,r),o}();r.default=x},{"../../..":302,"../../../reducers/selection":358,"../../../reducers/threads":361,"../../../services/ajax":365,"../../../services/modal":371,"../../../services/snackbar":376,"../../../services/store":377,"../../../utils/validators":393,"../../button":8,"../../category-select":21,"../../form":56,"../../form-group":55,"../../merge-conflict":59,"../../select":210,"./errors-list":262,react:"react"}],264:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("react")),a=i(e("../../form")),o=i(e("../../form-group")),l=i(e("../../category-select")),c=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../reducers/selection")),f=e("../../../reducers/threads"),d=i(e("../../../services/modal")),p=i(e("../../../services/store"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?b(r):n}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(s,a.default);var e,t,r,i=y(s);function s(e){var n,t,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),n=i.call(this,e),t=b(n),a=function(e){e.preventDefault(),d.default.hide();n.props.callApi([{op:"replace",path:"category",value:n.state.category},{op:"replace",path:"flatten-categories",value:null},{op:"add",path:"acl",value:!0}],gettext("Selected threads were moved."),function(){p.default.dispatch((0,f.filterThreads)(n.props.route.category,n.props.categoriesMap));var e=p.default.getState(),t=e.threads.map(function(e){return e.id});p.default.dispatch(c.all(e.selection.filter(function(e){return-1!==t.indexOf(e)})))})},(r="handleSubmit")in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,n.state={category:null};var o,l={};for(var u in e.user.acl.categories){e.user.acl.categories.hasOwnProperty(u)&&(o=e.user.acl.categories[u],l[o.id]=o)}return n.categoryChoices=[],e.categories.forEach(function(e){var t,r;0<e.level&&(r=!(t=l[e.id]).can_start_threads||e.is_closed&&!t.can_close_threads,n.categoryChoices.push({value:e.id,disabled:r,level:e.level-1,label:e.name}),r||n.state.category||(n.state.category=e.id))}),n}return e=s,(t=[{key:"getClassName",value:function(){return this.state.category?"modal-dialog":"modal-dialog modal-message"}},{key:"renderForm",value:function(){return n.default.createElement("form",{onSubmit:this.handleSubmit},n.default.createElement("div",{className:"modal-body"},n.default.createElement(o.default,{label:gettext("New category"),for:"id_new_category"},n.default.createElement(l.default,{id:"id_new_category",onChange:this.bindInput("category"),value:this.state.category,choices:this.categoryChoices}))),n.default.createElement("div",{className:"modal-footer"},n.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel")),n.default.createElement("button",{className:"btn btn-primary"},gettext("Move threads"))))}},{key:"renderCantMoveMessage",value:function(){return n.default.createElement("div",{className:"modal-body"},n.default.createElement("div",{className:"message-icon"},n.default.createElement("span",{className:"material-icon"},"info_outline")),n.default.createElement("div",{className:"message-body"},n.default.createElement("p",{className:"lead"},gettext("You can't move threads because there are no categories you are allowed to move them to.")),n.default.createElement("p",null,gettext("You need permission to start threads in category to be able to move threads to it.")),n.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},gettext("Ok"))))}},{key:"render",value:function(){return n.default.createElement("div",{className:this.getClassName(),role:"document"},n.default.createElement("div",{className:"modal-content"},n.default.createElement("div",{className:"modal-header"},n.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},n.default.createElement("span",{"aria-hidden":"true"},"×")),n.default.createElement("h4",{className:"modal-title"},gettext("Move threads"))),this.state.category?this.renderForm():this.renderCantMoveMessage()))}}])&&m(e.prototype,t),r&&m(e,r),s}();r.default=g},{"../../../reducers/selection":358,"../../../reducers/threads":361,"../../../services/modal":371,"../../../services/store":377,"../../category-select":21,"../../form":56,"../../form-group":55,react:"react"}],265:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("react")),l=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../reducers/selection")),u=a(e("../../../services/store"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=m(o);return t=l?(e=m(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?p(r):n}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,n.default.Component);var e,t,r,a=d(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return h(p(e=a.call.apply(a,[this].concat(r))),"selectAll",function(){u.default.dispatch(l.all(e.props.threads.map(function(e){return e.id})))}),h(p(e),"selectNone",function(){u.default.dispatch(l.none())}),e}return e=o,(t=[{key:"render",value:function(){return n.default.createElement("ul",{className:this.props.className},n.default.createElement("li",null,n.default.createElement("button",{className:"btn btn-link",type:"button",onClick:this.selectAll},n.default.createElement("span",{className:"material-icon"},"check_box"),gettext("Select all"))),n.default.createElement("li",null,n.default.createElement("button",{className:"btn btn-link",type:"button",onClick:this.selectNone},n.default.createElement("span",{className:"material-icon"},"check_box_outline_blank"),gettext("Select none"))))}}])&&c(e.prototype,t),r&&c(e,r),o}();r.default=o},{"../../../reducers/selection":358,"../../../services/store":377,react:"react"}],266:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.baseUrl,r=e.list,n=e.lists;return n.length<2?null:a.default.createElement("div",{className:"page-tabs"},a.default.createElement("div",{className:"container"},a.default.createElement("ul",{className:"nav nav-pills"},n.map(function(e){return a.default.createElement(l.default,{isControlled:!0,isActive:e.path===r.path,key:t+e.path},a.default.createElement(o.Link,{to:t+e.path},e.name))}))))};var a=n(e("react")),o=e("react-router"),l=n(e("../li"));function n(e){return e&&e.__esModule?e:{default:e}}},{"../li":57,react:"react","react-router":"react-router"}],267:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSelect=s,r.getLists=c,r.paths=function(e,r){var n=c(e),a=[],o={};return i.default.get("CATEGORIES").forEach(function(t){n.forEach(function(e){o[t.id]=t,a.push({path:t.url.index+e.path,component:(0,l.connect)(s(r))(u.default),categories:i.default.get("CATEGORIES"),categoriesMap:o,category:t,lists:n,list:e})})}),a};var l=e("react-redux"),u=n(e("./route")),i=n(e("../.."));function n(e){return e&&e.__esModule?e:{default:e}}function s(t){return function(e){return{options:t,selection:e.selection,threads:e.threads,tick:e.tick.tick,user:e.auth.user}}}function c(e){var t=[{type:"all",path:"",name:gettext("All"),longName:gettext("All threads")}];return e.id&&(t.push({type:"my",path:"my/",name:gettext("My"),longName:gettext("My threads")}),t.push({type:"new",path:"new/",name:gettext("New"),longName:gettext("New threads")}),t.push({type:"unread",path:"unread/",name:gettext("Unread"),longName:gettext("Unread threads")}),t.push({type:"subscribed",path:"subscribed/",name:gettext("Subscribed"),longName:gettext("Subscribed threads")}),e.acl.can_see_unapproved_content_lists&&t.push({type:"unapproved",path:"unapproved/",name:gettext("Unapproved"),longName:gettext("Unapproved content")})),t}},{"../..":302,"./route":268,"react-redux":"react-redux"}],268:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(e("react")),l=a(e("../button")),u=e("./compare"),i=a(e("./container")),s=a(e("./header")),c=e("./utils"),f=a(e("../threads-list")),d=a(e("./list-empty")),p=a(e("../with-dropdown")),m=a(e("../..")),h=n(e("../../reducers/selection")),y=e("../../reducers/threads"),b=a(e("../../services/ajax")),v=a(e("../../services/polls")),g=a(e("../../services/snackbar")),_=a(e("../../services/store")),E=a(e("../../services/page-title")),w=n(e("../../utils/sets"));function O(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return O=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!==P(e)&&"function"!=typeof e)return{default:e};var t=O();if(t&&t.has(e))return t.get(e);var r,n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((r=a?Object.getOwnPropertyDescriptor(e,o):null)&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o])}return n.default=e,t&&t.set(e,n),n}function a(e){return e&&e.__esModule?e:{default:e}}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=x(o);return t=l?(e=x(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==P(n)&&"function"!=typeof n?N(r):n}}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(a,p.default);var e,t,r,n=S(a);function a(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),R(N(r=n.call(this,e)),"loadMore",function(){r.setState({isBusy:!0}),r.loadThreads(r.getCategory(),r.state.next)}),R(N(r),"pollResponse",function(e){r.setState({diff:Object.assign({},e,{results:(0,c.diffThreads)(r.props.threads,e.results)})})}),R(N(r),"addThreads",function(e){_.default.dispatch((0,y.append)(e,r.getSorting()))}),R(N(r),"applyDiff",function(){r.addThreads(r.state.diff.results),r.setState(Object.assign({},r.state.diff,{moderation:(0,c.getModerationActions)(_.default.getState().threads),diff:{results:[]}}))}),R(N(r),"freezeThread",function(t){r.setState(function(e){return{busyThreads:w.toggle(e.busyThreads,t)}})}),R(N(r),"updateThread",function(e){_.default.dispatch((0,y.patch)(e,e,r.getSorting()))}),R(N(r),"deleteThread",function(e){_.default.dispatch((0,y.deleteThread)(e))}),r.state={isMounted:!0,isLoaded:!1,isBusy:!1,diff:{results:[]},moderation:[],busyThreads:[],dropdown:!1,subcategories:[],next:0};var t=r.getCategory();return m.default.has("THREADS")?r.initWithPreloadedData(t,m.default.get("THREADS")):r.initWithoutPreloadedData(t),r}return e=a,(t=[{key:"getCategory",value:function(){return this.props.route.category.special_role?null:this.props.route.category.id}},{key:"initWithPreloadedData",value:function(e,t){this.state=Object.assign(this.state,{moderation:(0,c.getModerationActions)(t.results),subcategories:t.subcategories,next:t.next}),this.startPolling(e)}},{key:"initWithoutPreloadedData",value:function(e){this.loadThreads(e)}},{key:"loadThreads",value:function(t,e){var r=this,n=1<arguments.length&&void 0!==e?e:0;b.default.get(this.props.options.api,{category:t,list:this.props.route.list.type,start:n||0},"threads").then(function(e){r.state.isMounted&&(0===n?_.default.dispatch((0,y.hydrate)(e.results)):_.default.dispatch((0,y.append)(e.results,r.getSorting())),r.setState({isLoaded:!0,isBusy:!1,moderation:(0,c.getModerationActions)(_.default.getState().threads),subcategories:e.subcategories,next:e.next}),r.startPolling(t))},function(e){g.default.apiError(e)})}},{key:"startPolling",value:function(e){v.default.start({poll:"threads",url:this.props.options.api,data:{category:e,list:this.props.route.list.type},frequency:12e4,update:this.pollResponse})}},{key:"componentDidMount",value:function(){this.setPageTitle(),m.default.has("THREADS")&&(_.default.dispatch((0,y.hydrate)(m.default.pop("THREADS").results)),this.setState({isLoaded:!0})),_.default.dispatch(h.none())}},{key:"componentWillUnmount",value:function(){this.state.isMounted=!1,v.default.stop("threads")}},{key:"getTitle",value:function(){return this.props.options.title?this.props.options.title:(0,c.getTitle)(this.props.route)}},{key:"setPageTitle",value:function(){this.props.route.category.level||!m.default.get("THREADS_ON_INDEX")?E.default.set((0,c.getPageTitle)(this.props.route)):this.props.options.title?E.default.set(this.props.options.title):m.default.get("SETTINGS").index_title?document.title=m.default.get("SETTINGS").index_title:document.title=m.default.get("SETTINGS").forum_name}},{key:"getSorting",value:function(){return this.props.route.category.level?u.compareWeight:u.compareGlobalWeight}},{key:"getMoreButton",value:function(){return this.state.next?o.default.createElement("div",{className:"pager-more"},o.default.createElement(l.default,{className:"btn btn-default btn-outline",loading:this.state.isBusy||this.state.busyThreads.length,onClick:this.loadMore},gettext("Show more"))):null}},{key:"getClassName",value:function(){var e,t="page page-threads";return t+=" page-threads-"+this.props.route.list.type,(e=this.props).route.category.level||!m.default.get("THREADS_ON_INDEX")||e.options.title||(t+=" page-threads-index"),this.props.route.category.css_class&&(t+=" page-threads-"+this.props.route.category.css_class),t}},{key:"render",value:function(){return o.default.createElement("div",{className:this.getClassName()},o.default.createElement(s.default,{categories:this.props.route.categoriesMap,disabled:!this.state.isLoaded,startThread:this.props.options.startThread,threads:this.props.threads,title:this.getTitle(),toggleNav:this.toggleNav,route:this.props.route,user:this.props.user}),o.default.createElement(i.default,{api:this.props.options.api,route:this.props.route,subcategories:this.state.subcategories,user:this.props.user,pageLead:this.props.options.pageLead,threads:this.props.threads,threadsCount:this.state.count,moderation:this.state.moderation,selection:this.props.selection,busyThreads:this.state.busyThreads,addThreads:this.addThreads,freezeThread:this.freezeThread,deleteThread:this.deleteThread,updateThread:this.updateThread,isLoaded:this.state.isLoaded,isBusy:this.state.isBusy},o.default.createElement(f.default,{category:this.props.route.category,categories:this.props.route.categoriesMap,list:this.props.route.list,selection:this.props.selection,threads:this.props.threads,diffSize:this.state.diff.results.length,applyDiff:this.applyDiff,showOptions:!!this.props.user.id,isLoaded:this.state.isLoaded,busyThreads:this.state.busyThreads},o.default.createElement(d.default,{category:this.props.route.category,emptyMessage:this.props.options.emptyMessage,list:this.props.route.list})),this.getMoreButton()))}}])&&k(e.prototype,t),r&&k(e,r),a}();r.default=C},{"../..":302,"../../reducers/selection":358,"../../reducers/threads":361,"../../services/ajax":365,"../../services/page-title":373,"../../services/polls":374,"../../services/snackbar":376,"../../services/store":377,"../../utils/sets":391,"../button":8,"../threads-list":238,"../with-dropdown":299,"./compare":257,"./container":258,"./header":259,"./list-empty":260,"./utils":270,react:"react"}],269:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("./category-picker")),u=n(e("./moderation/controls")),i=n(e("./moderation/selection"));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,o.default.Component);var e,t,r,n=d(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"getCategoryPicker",value:function(){return this.props.subcategories.length?o.default.createElement(l.default,{categories:this.props.categoriesMap,choices:this.props.subcategories,list:this.props.list}):null}},{key:"showModerationOptions",value:function(){return this.props.user.id&&this.props.moderation.allow}},{key:"getSelectedThreads",value:function(){var t=this;return this.props.threads.filter(function(e){return 0<=t.props.selection.indexOf(e.id)})}},{key:"getModerationButton",value:function(){return this.showModerationOptions()?o.default.createElement("div",{className:"col-xs-6 col-sm-3 col-md-2"},o.default.createElement("div",{className:"btn-group btn-group-justified"},o.default.createElement("div",{className:"btn-group dropdown"},o.default.createElement("button",{type:"button",className:"btn btn-default btn-outline dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:this.props.disabled||!this.props.selection.length},o.default.createElement("span",{className:"material-icon"},"settings"),gettext("Options")),o.default.createElement(u.default,{addThreads:this.props.addThreads,api:this.props.api,categories:this.props.categories,categoriesMap:this.props.categoriesMap,className:"dropdown-menu dropdown-menu-right stick-to-bottom",deleteThread:this.props.deleteThread,freezeThread:this.props.freezeThread,moderation:this.props.moderation,route:this.props.route,threads:this.getSelectedThreads(),updateThread:this.props.updateThread,user:this.props.user})))):null}},{key:"getSelectionButton",value:function(){return this.showModerationOptions()?o.default.createElement("div",{className:"col-xs-3 col-sm-2 col-md-1"},o.default.createElement("div",{className:"btn-group btn-group-justified"},o.default.createElement("div",{className:"btn-group dropdown"},o.default.createElement("button",{type:"button",className:"btn btn-default btn-outline btn-icon dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:this.props.disabled},o.default.createElement("span",{className:"material-icon"},"select_all")),o.default.createElement(i.default,{className:"dropdown-menu dropdown-menu-right stick-to-bottom",threads:this.props.threads})))):null}},{key:"render",value:function(){return o.default.createElement("div",{className:"row row-toolbar row-toolbar-bottom-margin"},o.default.createElement("div",{className:"col-xs-3 col-sm-3 col-md-2 dropdown"},this.getCategoryPicker()),o.default.createElement("div",{className:"hidden-xs col-sm-4 col-md-7"}),this.getModerationButton(),this.getSelectionButton())}}])&&c(e.prototype,t),r&&c(e,r),a}();r.default=a},{"./category-picker":256,"./moderation/controls":261,"./moderation/selection":265,react:"react"}],270:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getPageTitle=function(e){return e.category.level?e.list.path?{title:e.list.longName,parent:e.category.name}:{title:e.category.name}:a.default.get("THREADS_ON_INDEX")?e.list.path?{title:e.list.longName}:null:e.list.path?{title:e.list.longName,parent:gettext("Threads")}:{title:gettext("Threads")}},r.getTitle=function(e){return e.category.level?e.category.name:a.default.get("THREADS_ON_INDEX")?a.default.get("SETTINGS").index_header?a.default.get("SETTINGS").index_header:a.default.get("SETTINGS").forum_name:gettext("Threads")},r.isThreadChanged=o,r.diffThreads=function(e,t){var r={};return e.forEach(function(e){r[e.id]=e}),t.filter(function(e){return!r[e.id]||o(r[e.id],e)})},r.getModerationActions=function(e){var t={allow:!1,can_approve:0,can_close:0,can_delete:0,can_hide:0,can_merge:0,can_move:0,can_pin:0,can_pin_globally:0,can_unhide:0};return e.forEach(function(e){e.is_unapproved&&e.acl.can_approve>t.can_approve&&(t.can_approve=e.acl.can_approve),e.acl.can_close>t.can_close&&(t.can_close=e.acl.can_close),e.acl.can_delete>t.can_delete&&(t.can_delete=e.acl.can_delete),e.acl.can_hide>t.can_hide&&(t.can_hide=e.acl.can_hide),e.acl.can_merge>t.can_merge&&(t.can_merge=e.acl.can_merge),e.acl.can_move>t.can_move&&(t.can_move=e.acl.can_move),e.acl.can_pin>t.can_pin&&(t.can_pin=e.acl.can_pin),e.acl.can_pin_globally>t.can_pin_globally&&(t.can_pin_globally=e.acl.can_pin_globally),e.is_hidden&&e.acl.can_unhide>t.can_unhide&&(t.can_unhide=e.acl.can_unhide),t.allow=t.can_approve||t.can_close||t.can_delete||t.can_hide||t.can_merge||t.can_move||t.can_pin||t.can_pin_globally||t.can_unhide}),t};var n,a=(n=e("../.."))&&n.__esModule?n:{default:n};function o(e,t){return 0<=[e.title===t.title,e.weight===t.weight,e.category===t.category,e.last_post===t.last_post,e.last_poster_name===t.last_poster_name].indexOf(!1)}},{"../..":302}],271:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CompactGuestNav=r.GuestNav=r.GuestMenu=void 0;var n=f(e("react")),a=f(e("../avatar")),o=f(e("../navbar-search")),l=f(e("../register-button")),u=f(e("../sign-in.js")),i=f(e("../..")),s=f(e("../../services/mobile-navbar-dropdown")),c=f(e("../../services/modal"));function f(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=g(o);return t=l?(e=g(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==d(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(){y(t,n.default.Component);var e=v(t);function t(){return p(this,t),e.apply(this,arguments)}return h(t,[{key:"showSignInModal",value:function(){c.default.show(u.default)}},{key:"render",value:function(){return n.default.createElement("ul",{className:"dropdown-menu user-dropdown dropdown-menu-right",role:"menu"},n.default.createElement("li",{className:"guest-preview"},n.default.createElement("h4",null,gettext("You are browsing as guest.")),n.default.createElement("p",null,gettext("Sign in or register to start and participate in discussions.")),n.default.createElement("div",{className:"row"},i.default.get("SETTINGS").enable_sso?n.default.createElement("div",{className:"col-xs-12"},n.default.createElement("a",{className:"btn btn-primary btn-register btn-block",href:i.default.get("SETTINGS").SSO_LOGIN_URL},gettext("Sign in"))):n.default.createElement("div",{className:"col-xs-6"},n.default.createElement("button",{className:"btn btn-default btn-sign-in btn-block",onClick:this.showSignInModal,type:"button"},gettext("Sign in"))),!i.default.get("SETTINGS").enable_sso&&n.default.createElement("div",{className:"col-xs-6"},n.default.createElement(l.default,{className:"btn-primary btn-register btn-block"},gettext("Register"))))))}}]),t}();r.GuestMenu=_;var E=function(){y(t,_);var e=v(t);function t(){return p(this,t),e.apply(this,arguments)}return h(t,[{key:"render",value:function(){return n.default.createElement("div",{className:"nav nav-guest"},i.default.get("SETTINGS").enable_sso?n.default.createElement("a",{className:"btn navbar-btn btn-primary btn-register",href:i.default.get("SETTINGS").SSO_LOGIN_URL},gettext("Sign in")):n.default.createElement("button",{className:"btn navbar-btn btn-default btn-sign-in",onClick:this.showSignInModal,type:"button"},gettext("Sign in")),!i.default.get("SETTINGS").enable_sso&&n.default.createElement(l.default,{className:"navbar-btn btn-primary btn-register"},gettext("Register")),n.default.createElement("div",{className:"navbar-left"},n.default.createElement(o.default,null)))}}]),t}();r.GuestNav=E;var w=function(){y(t,n.default.Component);var e=v(t);function t(){return p(this,t),e.apply(this,arguments)}return h(t,[{key:"showGuestMenu",value:function(){s.default.show(_)}},{key:"render",value:function(){return n.default.createElement("button",{type:"button",onClick:this.showGuestMenu},n.default.createElement(a.default,{size:"64"}))}}]),t}();r.CompactGuestNav=w},{"../..":302,"../../services/mobile-navbar-dropdown":370,"../../services/modal":371,"../avatar":6,"../navbar-search":77,"../register-button":198,"../sign-in.js":211,react:"react"}],272:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.select=function(e){return e.auth},r.CompactUserMenu=r.UserMenu=void 0;var n,a=(n=e("react"))&&n.__esModule?n:{default:n},o=e("./guest-nav"),l=e("./user-nav");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=m(o);return t=l?(e=m(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(){f(t,a.default.Component);var e=p(t);function t(){return i(this,t),e.apply(this,arguments)}return c(t,[{key:"render",value:function(){return this.props.isAuthenticated?a.default.createElement(l.UserNav,{user:this.props.user}):a.default.createElement(o.GuestNav,null)}}]),t}();r.UserMenu=h;var y=function(){f(t,a.default.Component);var e=p(t);function t(){return i(this,t),e.apply(this,arguments)}return c(t,[{key:"render",value:function(){return this.props.isAuthenticated?a.default.createElement(l.CompactUserNav,{user:this.props.user}):a.default.createElement(o.CompactGuestNav,null)}}]),t}();r.CompactUserMenu=y},{"./guest-nav":271,"./user-nav":273,react:"react"}],273:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PrivateThreadsBadge=w,r.UserNav=function(e){var t=e.user;return n.default.createElement("ul",{className:"ul nav navbar-nav nav-user"},n.default.createElement("li",null,n.default.createElement(u.default,null)),n.default.createElement(O,{user:t}),n.default.createElement("li",{className:"dropdown"},n.default.createElement("a",{"aria-haspopup":"true","aria-expanded":"false",className:"dropdown-toggle","data-toggle":"dropdown",href:t.url,role:"button"},n.default.createElement(o.default,{user:t,size:"64"})),n.default.createElement(E,{user:t})))},r.UserPrivateThreadsLink=O,r.selectUserMenu=P,r.CompactUserNav=r.UserMenu=void 0;var n=d(e("react")),a=e("react-redux"),o=d(e("../avatar")),l=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../change-avatar/root")),u=d(e("../navbar-search")),i=d(e("../..")),s=d(e("../../services/mobile-navbar-dropdown")),c=d(e("../../services/modal"));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function d(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==p(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(){b(t,n.default.Component);var e=g(t);function t(){return m(this,t),e.apply(this,arguments)}return y(t,[{key:"logout",value:function(){confirm(gettext("Are you sure you want to sign out?"))&&$("#hidden-logout-form").submit()}},{key:"changeAvatar",value:function(){c.default.show((0,a.connect)(l.select)(l.default))}},{key:"render",value:function(){var e=this.props.user;return n.default.createElement("ul",{className:"dropdown-menu user-dropdown dropdown-menu-right",role:"menu"},n.default.createElement("li",{className:"dropdown-header"},n.default.createElement("strong",null,e.username),n.default.createElement("div",{className:"row user-stats"},n.default.createElement("div",{className:"col-sm-3"},n.default.createElement("span",{className:"material-icon"},"message"),e.posts),n.default.createElement("div",{className:"col-sm-3"},n.default.createElement("span",{className:"material-icon"},"forum"),e.threads),n.default.createElement("div",{className:"col-sm-3"},n.default.createElement("span",{className:"material-icon"},"favorite"),e.followers),n.default.createElement("div",{className:"col-sm-3"},n.default.createElement("span",{className:"material-icon"},"favorite_outline"),e.following))),n.default.createElement("li",{className:"divider"}),n.default.createElement("li",null,n.default.createElement("a",{href:e.url},n.default.createElement("span",{className:"material-icon"},"account_circle"),gettext("See your profile"))),n.default.createElement("li",null,n.default.createElement("a",{href:i.default.get("USERCP_URL")},n.default.createElement("span",{className:"material-icon"},"done_all"),gettext("Change options"))),n.default.createElement("li",null,n.default.createElement("button",{className:"btn-link",onClick:this.changeAvatar,type:"button"},n.default.createElement("span",{className:"material-icon"},"portrait"),gettext("Change avatar"))),!!e.acl.can_use_private_threads&&n.default.createElement("li",null,n.default.createElement("a",{href:i.default.get("PRIVATE_THREADS_URL")},n.default.createElement("span",{className:"material-icon"},"message"),gettext("Private threads"),n.default.createElement(w,{user:e}))),n.default.createElement("li",{className:"divider"}),n.default.createElement("li",{className:"dropdown-buttons"},n.default.createElement("button",{className:"btn btn-default btn-block",onClick:this.logout,type:"button"},gettext("Log out"))))}}]),t}();function w(e){var t=e.user;return t.unread_private_threads?n.default.createElement("span",{className:"badge"},t.unread_private_threads):null}function O(e){var t=e.user;if(!t.acl.can_use_private_threads)return null;var r=null,r=t.unread_private_threads?gettext("You have unread private threads!"):gettext("Private threads");return n.default.createElement("li",null,n.default.createElement("a",{className:"navbar-icon",href:i.default.get("PRIVATE_THREADS_URL"),title:r},n.default.createElement("span",{className:"material-icon"},"message"),0<t.unread_private_threads&&n.default.createElement("span",{className:"badge"},t.unread_private_threads)))}function P(e){return{user:e.auth.user}}r.UserMenu=E;var k=function(){b(t,n.default.Component);var e=g(t);function t(){return m(this,t),e.apply(this,arguments)}return y(t,[{key:"showUserMenu",value:function(){s.default.showConnected("user-menu",(0,a.connect)(P)(E))}},{key:"render",value:function(){return n.default.createElement("button",{type:"button",onClick:this.showUserMenu},n.default.createElement(o.default,{user:this.props.user,size:"50"}))}}]),t}();r.CompactUserNav=k},{"../..":302,"../../services/mobile-navbar-dropdown":370,"../../services/modal":371,"../avatar":6,"../change-avatar/root":25,"../navbar-search":77,react:"react","react-redux":"react-redux"}],274:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getStatusClassName=y,r.getStatusDescription=b,r.StatusLabel=r.StatusIcon=r.default=void 0;var n,a=(n=e("react"))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=d(o);return t=l?(e=d(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(){s(t,a.default.Component);var e=f(t);function t(){return o(this,t),e.apply(this,arguments)}return i(t,[{key:"getClass",value:function(){return y(this.props.status)}},{key:"render",value:function(){return a.default.createElement("span",{className:this.getClass()},this.props.children)}}]),t}();r.default=p;var m=function(){s(t,a.default.Component);var e=f(t);function t(){return o(this,t),e.apply(this,arguments)}return i(t,[{key:"getIcon",value:function(){return this.props.status.is_banned?"remove_circle_outline":this.props.status.is_hidden?"help_outline":this.props.status.is_online_hidden?"label":this.props.status.is_offline_hidden?"label_outline":this.props.status.is_online?"lens":this.props.status.is_offline?"panorama_fish_eye":void 0}},{key:"render",value:function(){return a.default.createElement("span",{className:"material-icon status-icon"},this.getIcon())}}]),t}();r.StatusIcon=m;var h=function(){s(t,a.default.Component);var e=f(t);function t(){return o(this,t),e.apply(this,arguments)}return i(t,[{key:"getHelp",value:function(){return b(this.props.user,this.props.status)}},{key:"getLabel",value:function(){return this.props.status.is_banned?gettext("Banned"):this.props.status.is_hidden?gettext("Hidden"):this.props.status.is_online_hidden?gettext("Online (hidden)"):this.props.status.is_offline_hidden?gettext("Offline (hidden)"):this.props.status.is_online?gettext("Online"):this.props.status.is_offline?gettext("Offline"):void 0}},{key:"render",value:function(){return a.default.createElement("span",{className:this.props.className||"status-label",title:this.getHelp()},this.getLabel())}}]),t}();function y(e){var t="";return e.is_banned?t="banned":e.is_hidden?t="offline":e.is_online_hidden?t="online":e.is_offline_hidden?t="offline":e.is_online?t="online":e.is_offline&&(t="offline"),"user-status user-"+t}function b(e,t){return t.is_banned?t.banned_until?interpolate(gettext("%(username)s is banned until %(ban_expires)s"),{username:e.username,ban_expires:t.banned_until.format("LL, LT")},!0):interpolate(gettext("%(username)s is banned"),{username:e.username},!0):t.is_hidden?interpolate(gettext("%(username)s is hiding presence"),{username:e.username},!0):t.is_online_hidden?interpolate(gettext("%(username)s is online (hidden)"),{username:e.username},!0):t.is_offline_hidden?interpolate(gettext("%(username)s was last seen %(last_click)s (hidden)"),{username:e.username,last_click:t.last_click.fromNow()},!0):t.is_online?interpolate(gettext("%(username)s is online"),{username:e.username},!0):t.is_offline?interpolate(gettext("%(username)s was last seen %(last_click)s"),{username:e.username,last_click:t.last_click.fromNow()},!0):void 0}r.StatusLabel=h},{react:"react"}],275:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../avatar")),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../utils/random"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,o.default.Component);var e,t,r,n=d(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"getClassName",value:function(){return this.props.hiddenOnMobile?"list-group-item hidden-xs hidden-sm":"list-group-item"}},{key:"render",value:function(){return o.default.createElement("li",{className:this.getClassName()},o.default.createElement("div",{className:"change-avatar"},o.default.createElement("span",{className:"user-avatar"},o.default.createElement(l.default,{size:"100"}))),o.default.createElement("div",{className:"change-author"},o.default.createElement("span",{className:"ui-preview-text",style:{width:u.int(30,100)+"px"}}," ")),o.default.createElement("div",{className:"change"},o.default.createElement("span",{className:"ui-preview-text",style:{width:u.int(30,70)+"px"}}," "),o.default.createElement("span",{className:"material-icon"},"arrow_forward"),o.default.createElement("span",{className:"ui-preview-text",style:{width:u.int(30,70)+"px"}}," ")),o.default.createElement("div",{className:"change-date"},o.default.createElement("span",{className:"ui-preview-text",style:{width:u.int(80,140)+"px"}}," ")))}}])&&c(e.prototype,t),r&&c(e,r),a}();r.default=a},{"../../utils/random":388,"../avatar":6,react:"react"}],276:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../avatar"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,r,n=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"renderUserAvatar",value:function(){return this.props.change.changed_by?o.default.createElement("a",{href:this.props.change.changed_by.url,className:"user-avatar-wrapper"},o.default.createElement(l.default,{user:this.props.change.changed_by,size:"100"})):o.default.createElement("span",{className:"user-avatar-wrapper"},o.default.createElement(l.default,{size:"100"}))}},{key:"renderUsername",value:function(){return this.props.change.changed_by?o.default.createElement("a",{href:this.props.change.changed_by.url,className:"item-title"},this.props.change.changed_by.username):o.default.createElement("span",{className:"item-title"},this.props.change.changed_by_username)}},{key:"render",value:function(){return o.default.createElement("li",{className:"list-group-item",key:this.props.change.id},o.default.createElement("div",{className:"change-avatar"},this.renderUserAvatar()),o.default.createElement("div",{className:"change-author"},this.renderUsername()),o.default.createElement("div",{className:"change"},o.default.createElement("span",{className:"old-username"},this.props.change.old_username),o.default.createElement("span",{className:"material-icon"},"arrow_forward"),o.default.createElement("span",{className:"new-username"},this.props.change.new_username)),o.default.createElement("div",{className:"change-date"},o.default.createElement("abbr",{title:this.props.change.changed_on.format("LLL")},this.props.change.changed_on.fromNow())))}}])&&i(e.prototype,t),r&&i(e,r),a}();r.default=a},{"../avatar":6,react:"react"}],277:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("react"))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(a,o.default.Component);var e,t,r,n=s(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"getEmptyMessage",value:function(){return this.props.emptyMessage?this.props.emptyMessage:gettext("No name changes have been recorded for your account.")}},{key:"render",value:function(){return o.default.createElement("div",{className:"username-history ui-ready"},o.default.createElement("ul",{className:"list-group"},o.default.createElement("li",{className:"list-group-item empty-message"},this.getEmptyMessage())))}}])&&l(e.prototype,t),r&&l(e,r),a}();r.default=a},{react:"react"}],278:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("./change-preview"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,r,n=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return o.default.createElement("div",{className:"username-history ui-preview"},o.default.createElement("ul",{className:"list-group"},[0,1,2].map(function(e){return o.default.createElement(l.default,{hiddenOnMobile:0<e,key:e})})))}}])&&i(e.prototype,t),r&&i(e,r),a}();r.default=a},{"./change-preview":275,react:"react"}],279:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("./change"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,r,n=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){return o.default.createElement("div",{className:"username-history ui-ready"},o.default.createElement("ul",{className:"list-group"},this.props.changes.map(function(e){return o.default.createElement(l.default,{change:e,key:e.id})})))}}])&&i(e.prototype,t),r&&i(e,r),a}();r.default=a},{"./change":276,react:"react"}],280:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("./list-empty")),u=n(e("./list-ready")),i=n(e("./list-preview"));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,o.default.Component);var e,t,r,n=d(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){return this.props.isLoaded?this.props.changes.length?o.default.createElement(u.default,{changes:this.props.changes}):o.default.createElement(l.default,{emptyMessage:this.props.emptyMessage}):o.default.createElement(i.default,null)}}])&&c(e.prototype,t),r&&c(e,r),a}();r.default=a},{"./list-empty":277,"./list-preview":278,"./list-ready":279,react:"react"}],281:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.showStatus,r=e.user,n=r.rank,a="panel user-card";n.css_class&&(a+=" user-card-"+n.css_class);return o.default.createElement("div",{className:a},o.default.createElement("div",{className:"panel-body"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-xs-3 user-card-left"},o.default.createElement("div",{className:"user-card-small-avatar"},o.default.createElement("a",{href:r.url},o.default.createElement(l.default,{size:"50",size2x:"80",user:r})))),o.default.createElement("div",{className:"col-xs-9 col-sm-12 user-card-body"},o.default.createElement("div",{className:"user-card-avatar"},o.default.createElement("a",{href:r.url},o.default.createElement(l.default,{size:"150",size2x:"200",user:r}))),o.default.createElement("div",{className:"user-card-username"},o.default.createElement("a",{href:r.url},r.username)),o.default.createElement("div",{className:"user-card-title"},o.default.createElement(i.default,{rank:n,title:r.title})),o.default.createElement("div",{className:"user-card-stats"},o.default.createElement(u.default,{showStatus:t,user:r}))))))};var o=n(e("react")),l=n(e("../../avatar")),u=n(e("./stats")),i=n(e("./user-title"));function n(e){return e&&e.__esModule?e:{default:e}}},{"../../avatar":6,"./stats":282,"./user-title":283,react:"react"}],282:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.showStatus,r=e.user;return a.default.createElement("ul",{className:"list-unstyled"},a.default.createElement(i,{showStatus:t,user:r}),a.default.createElement(s,{user:r}),a.default.createElement("li",{className:"user-stat-divider"}),a.default.createElement(c,{user:r}),a.default.createElement(f,{user:r}),a.default.createElement(d,{user:r}))},r.Status=i,r.JoinDate=s,r.Posts=c,r.Threads=f,r.Followers=d,r.getStatClassName=p;var n,a=(n=e("react"))&&n.__esModule?n:{default:n},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../user-status"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){var t=e.showStatus,r=e.user;return t?a.default.createElement("li",{className:"user-stat-status"},a.default.createElement(o.default,{status:r.status},a.default.createElement(o.StatusLabel,{status:r.status,user:r}))):null}function s(e){var t=e.user.joined_on,r=interpolate(gettext("Joined on %(joined_on)s"),{joined_on:t.format("LL, LT")},!0),n=interpolate(gettext("Joined %(joined_on)s"),{joined_on:t.fromNow()},!0);return a.default.createElement("li",{className:"user-stat-join-date"},a.default.createElement("abbr",{title:r},n))}function c(e){var t=e.user,r=p("user-stat-posts",t.posts),n=ngettext("%(posts)s post","%(posts)s posts",t.posts);return a.default.createElement("li",{className:r},interpolate(n,{posts:t.posts},!0))}function f(e){var t=e.user,r=p("user-stat-threads",t.threads),n=ngettext("%(threads)s thread","%(threads)s threads",t.threads);return a.default.createElement("li",{className:r},interpolate(n,{threads:t.threads},!0))}function d(e){var t=e.user,r=p("user-stat-followers",t.followers),n=ngettext("%(followers)s follower","%(followers)s followers",t.followers);return a.default.createElement("li",{className:r},interpolate(n,{followers:t.followers},!0))}function p(e,t){return 0===t?e+" user-stat-empty":e}},{"../../user-status":274,react:"react"}],283:[function(e,t,r){arguments[4][130][0].apply(r,arguments)},{dup:130,react:"react"}],284:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=e.cols,r=e.isReady,n=e.showStatus,a=e.users,o="col-xs-12 col-sm-4";4===t&&(o+=" col-md-3");return r?l.default.createElement("div",{className:"users-cards-list ui-ready"},l.default.createElement("div",{className:"row"},a.map(function(e){return l.default.createElement("div",{className:o,key:e.id},l.default.createElement(u.default,{showStatus:n,user:e}))}))):l.default.createElement(i.default,{colClassName:o,cols:t})};var l=n(e("react")),u=n(e("./card")),i=n(e("./preview"));function n(e){return e&&e.__esModule?e:{default:e}}},{"./card":281,"./preview":286,react:"react"}],285:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../../avatar")),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../utils/random"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,o.default.Component);var e,t,r,n=d(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return o.default.createElement("div",{className:"panel user-card user-card-preview"},o.default.createElement("div",{className:"panel-body"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-xs-3 user-card-left"},o.default.createElement("div",{className:"user-card-small-avatar"},o.default.createElement("span",null,o.default.createElement(l.default,{size:"50",size2x:"80"})))),o.default.createElement("div",{className:"col-xs-9 col-sm-12 user-card-body"},o.default.createElement("div",{className:"user-card-avatar"},o.default.createElement("span",null,o.default.createElement(l.default,{size:"150",size2x:"200"}))),o.default.createElement("div",{className:"user-card-username"},o.default.createElement("span",{className:"ui-preview-text",style:{width:u.int(60,150)+"px"}}," ")),o.default.createElement("div",{className:"user-card-title"},o.default.createElement("span",{className:"ui-preview-text",style:{width:u.int(60,150)+"px"}}," ")),o.default.createElement("div",{className:"user-card-stats"},o.default.createElement("ul",{className:"list-unstyled"},o.default.createElement("li",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:u.int(30,70)+"px"}}," ")),o.default.createElement("li",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:u.int(30,70)+"px"}}," ")),o.default.createElement("li",{className:"user-stat-divider"}),o.default.createElement("li",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:u.int(30,70)+"px"}}," ")),o.default.createElement("li",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:u.int(30,70)+"px"}}," "))))))))}}])&&c(e.prototype,t),r&&c(e,r),a}();r.default=a},{"../../../utils/random":388,"../../avatar":6,react:"react"}],286:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var r=e.colClassName,t=e.cols,n=Array.apply(null,{length:t}).map(Number.call,Number);return a.default.createElement("div",{className:"users-cards-list ui-preview"},a.default.createElement("div",{className:"row"},n.map(function(e){var t=r;return 0!==e&&(t+=" hidden-xs"),3===e&&(t+=" hidden-sm"),a.default.createElement("div",{className:t,key:e},a.default.createElement(o.default,null))})))};var a=n(e("react")),o=n(e("./card"));function n(e){return e&&e.__esModule?e:{default:e}}},{"./card":285,react:"react"}],287:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("react"))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(a,o.default.Component);var e,t,r,n=s(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"getEmptyMessage",value:function(){return interpolate(gettext("No users have posted any new messages during last %(days)s days."),{days:this.props.trackedPeriod},!0)}},{key:"render",value:function(){return o.default.createElement("div",{className:"active-posters-list"},o.default.createElement("div",{className:"container"},o.default.createElement("p",{className:"lead"},this.getEmptyMessage())))}}])&&l(e.prototype,t),r&&l(e,r),a}();r.default=a},{react:"react"}],288:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../../avatar")),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../utils/random"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,o.default.Component);var e,t,r,n=d(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"getClassName",value:function(){return this.props.hiddenOnMobile?"list-group-item hidden-xs hidden-sm":"list-group-item"}},{key:"render",value:function(){return o.default.createElement("li",{className:this.getClassName()},o.default.createElement("div",{className:"rank-user-avatar"},o.default.createElement("span",null,o.default.createElement(l.default,{size:"50"}))),o.default.createElement("div",{className:"rank-user"},o.default.createElement("div",{className:"user-name"},o.default.createElement("span",{className:"item-title"},o.default.createElement("span",{className:"ui-preview-text",style:{width:u.int(30,80)+"px"}}," "))),o.default.createElement("div",{className:"user-details"},o.default.createElement("span",{className:"user-status"},o.default.createElement("span",{className:"status-icon ui-preview-text"}," "),o.default.createElement("span",{className:"status-label ui-preview-text hidden-xs hidden-sm",style:{width:u.int(30,50)+"px"}}," ")),o.default.createElement("span",{className:"rank-name"},o.default.createElement("span",{className:"ui-preview-text",style:{width:u.int(30,50)+"px"}}," ")),o.default.createElement("span",{className:"user-title hidden-xs hidden-sm"},o.default.createElement("span",{className:"ui-preview-text",style:{width:u.int(30,50)+"px"}}," "))),o.default.createElement("div",{className:"user-compact-stats visible-xs-block"},o.default.createElement("span",{className:"rank-position"},o.default.createElement("strong",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:u.int(20,30)+"px"}}," ")),o.default.createElement("small",null,gettext("Rank"))),o.default.createElement("span",{className:"rank-posts-counted"},o.default.createElement("strong",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:u.int(20,30)+"px"}}," ")),o.default.createElement("small",null,gettext("Ranked posts"))))),o.default.createElement("div",{className:"rank-position hidden-xs"},o.default.createElement("strong",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:u.int(20,30)+"px"}}," ")),o.default.createElement("small",null,gettext("Rank"))),o.default.createElement("div",{className:"rank-posts-counted hidden-xs"},o.default.createElement("strong",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:u.int(20,30)+"px"}}," ")),o.default.createElement("small",null,gettext("Ranked posts"))),o.default.createElement("div",{className:"rank-posts-total hidden-xs"},o.default.createElement("strong",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:u.int(20,30)+"px"}}," ")),o.default.createElement("small",null,gettext("Total posts"))))}}])&&c(e.prototype,t),r&&c(e,r),a}();r.default=a},{"../../../utils/random":388,"../../avatar":6,react:"react"}],289:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(e("react")),l=e("react-router"),u=a(e("../../avatar")),i=n(e("../../user-status")),s=a(e("../../..")),c=n(e("../../../utils/random"));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r,n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((r=a?Object.getOwnPropertyDescriptor(e,o):null)&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o])}return n.default=e,t&&t.set(e,n),n}function a(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==d(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,o.default.Component);var e,t,r,n=h(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"getClassName",value:function(){return this.props.rank.css_class?"list-group-item list-group-rank-"+this.props.rank.css_class:"list-group-item"}},{key:"getUserStatus",value:function(){return this.props.user.status?o.default.createElement(i.default,{user:this.props.user,status:this.props.user.status},o.default.createElement(i.StatusIcon,{user:this.props.user,status:this.props.user.status}),o.default.createElement(i.StatusLabel,{user:this.props.user,status:this.props.user.status,className:"status-label hidden-xs hidden-sm"})):o.default.createElement("span",{className:"user-status"},o.default.createElement("span",{className:"status-icon ui-preview-text"}," "),o.default.createElement("span",{className:"status-label ui-preview-text hidden-xs hidden-sm",style:{width:c.int(30,50)+"px"}}," "))}},{key:"getRankName",value:function(){if(!this.props.rank.is_tab)return o.default.createElement("span",{className:"rank-name item-title"},this.props.rank.name);var e=s.default.get("USERS_LIST_URL")+this.props.rank.slug+"/";return o.default.createElement(l.Link,{to:e,className:"rank-name item-title"},this.props.rank.name)}},{key:"getUserTitle",value:function(){return this.props.user.title?o.default.createElement("span",{className:"user-title hidden-xs hidden-sm"},this.props.user.title):null}},{key:"render",value:function(){return o.default.createElement("li",{className:this.getClassName()},o.default.createElement("div",{className:"rank-user-avatar"},o.default.createElement("a",{href:this.props.user.url},o.default.createElement(u.default,{user:this.props.user,size:50,size2x:64}))),o.default.createElement("div",{className:"rank-user"},o.default.createElement("div",{className:"user-name"},o.default.createElement("a",{href:this.props.user.url,className:"item-title"},this.props.user.username)),o.default.createElement("div",{className:"user-details"},this.getUserStatus(),this.getRankName(),this.getUserTitle()),o.default.createElement("div",{className:"user-compact-stats visible-xs-block"},o.default.createElement("span",{className:"rank-position"},o.default.createElement("strong",null,"#",this.props.counter),o.default.createElement("small",null,gettext("Rank"))),o.default.createElement("span",{className:"rank-posts-counted"},o.default.createElement("strong",null,this.props.user.meta.score),o.default.createElement("small",null,gettext("Ranked posts"))))),o.default.createElement("div",{className:"rank-position hidden-xs"},o.default.createElement("strong",null,"#",this.props.counter),o.default.createElement("small",null,gettext("Rank"))),o.default.createElement("div",{className:"rank-posts-counted hidden-xs"},o.default.createElement("strong",null,this.props.user.meta.score),o.default.createElement("small",null,gettext("Ranked posts"))),o.default.createElement("div",{className:"rank-posts-total hidden-xs"},o.default.createElement("strong",null,this.props.user.posts),o.default.createElement("small",null,gettext("Total posts"))))}}])&&p(e.prototype,t),r&&p(e,r),a}();r.default=b},{"../../..":302,"../../../utils/random":388,"../../avatar":6,"../../user-status":274,react:"react","react-router":"react-router"}],290:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("./list-item-preview")),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../../utils/random"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,o.default.Component);var e,t,r,n=d(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return o.default.createElement("div",{className:"active-posters-list"},o.default.createElement("div",{className:"container"},o.default.createElement("p",{className:"lead ui-preview"},o.default.createElement("span",{className:"ui-preview-text",style:{width:u.int(50,220)+"px"}}," ")),o.default.createElement("div",{className:"active-posters ui-preview"},o.default.createElement("ul",{className:"list-group"},[0,1,2].map(function(e){return o.default.createElement(l.default,{hiddenOnMobile:0<e,key:e})})))))}}])&&c(e.prototype,t),r&&c(e,r),a}();r.default=a},{"../../../utils/random":388,"./list-item-preview":288,react:"react"}],291:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("./list-item"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,r,n=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"getLeadMessage",value:function(){var e=ngettext("%(posters)s top poster from last %(days)s days.","%(posters)s top posters from last %(days)s days.",this.props.count);return interpolate(e,{posters:this.props.count,days:this.props.trackedPeriod},!0)}},{key:"render",value:function(){return o.default.createElement("div",{className:"active-posters-list"},o.default.createElement("div",{className:"container"},o.default.createElement("p",{className:"lead"},this.getLeadMessage()),o.default.createElement("div",{className:"active-posters ui-ready"},o.default.createElement("ul",{className:"list-group"},this.props.users.map(function(e,t){return o.default.createElement(l.default,{user:e,rank:e.rank,counter:t+1,key:e.id})})))))}}])&&i(e.prototype,t),r&&i(e,r),a}();r.default=a},{"./list-item":289,react:"react"}],292:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("react")),a=o(e("./list-empty")),u=o(e("./list-preview")),i=o(e("./list-ready")),s=o(e("../../..")),c=e("../../../reducers/users"),f=o(e("../../../services/polls")),d=o(e("../../../services/store")),p=o(e("../../../services/page-title"));function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=g(o);return t=l?(e=g(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==m(n)&&"function"!=typeof n?v(r):n}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(l,n.default.Component);var e,t,r,o=b(l);function l(e){var t,r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),r=v(t),a=function(e){d.default.dispatch((0,c.hydrate)(e.results)),t.setState({isLoaded:!0,trackedPeriod:e.tracked_period,count:e.count})},(n="update")in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,s.default.has("USERS")?t.initWithPreloadedData(s.default.pop("USERS")):t.initWithoutPreloadedData(),t.startPolling(),t}return e=l,(t=[{key:"initWithPreloadedData",value:function(e){this.state={isLoaded:!0,trackedPeriod:e.tracked_period,count:e.count},d.default.dispatch((0,c.hydrate)(e.results))}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1}}},{key:"startPolling",value:function(){f.default.start({poll:"active-posters",url:s.default.get("USERS_API"),data:{list:"active"},frequency:9e4,update:this.update})}},{key:"componentDidMount",value:function(){p.default.set({title:this.props.route.extra.name,parent:gettext("Users")})}},{key:"componentWillUnmount",value:function(){f.default.stop("active-posters")}},{key:"render",value:function(){return this.state.isLoaded?0<this.state.count?n.default.createElement(i.default,{users:this.props.users,trackedPeriod:this.state.trackedPeriod,count:this.state.count}):n.default.createElement(a.default,{trackedPeriod:this.state.trackedPeriod}):n.default.createElement(u.default,null)}}])&&h(e.prototype,t),r&&h(e,r),l}();r.default=l},{"../../..":302,"../../../reducers/users":364,"../../../services/page-title":373,"../../../services/polls":374,"../../../services/store":377,"./list-empty":287,"./list-preview":290,"./list-ready":291,react:"react"}],293:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var r=e.baseUrl,t=e.lists;return n.default.createElement("ul",{className:"nav nav-pills"},t.map(function(e){var t=u(r,e);return n.default.createElement(o.default,{path:t,key:t},n.default.createElement(a.Link,{to:t},e.name))}))};var n=l(e("react")),a=e("react-router"),o=l(e("../li"));l(e("../.."));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e,t){var r=e;return"rank"===t.component?r+=t.slug:r+=t.component,r+"/"}},{"../..":302,"../li":57,react:"react","react-router":"react-router"}],294:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=n(e("../../users-list"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,r,n=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return o.default.createElement("div",null,o.default.createElement(l.default,{cols:4,isReady:!1}))}}])&&i(e.prototype,t),r&&i(e,r),a}();r.default=a},{"../../users-list":284,react:"react"}],295:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.default.createElement("div",null,n.default.createElement(o.default,{cols:4,isReady:!0,showStatus:!0,users:e.users}),n.default.createElement(a.default,e))};var n=l(e("react")),a=l(e("./pager")),o=l(e("../../users-list"));function l(e){return e&&e.__esModule?e:{default:e}}},{"../../users-list":284,"./pager":296,react:"react"}],296:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return 1===e.pages?null:n.default.createElement("div",{className:"row row-toolbar"},n.default.createElement("div",{className:"col-xs-12 text-center visible-xs-block"},n.default.createElement(d,{more:e.more}),n.default.createElement("div",{className:"toolbar-vertical-spacer"})),n.default.createElement("div",{className:"col-md-7"},n.default.createElement("div",{className:"row"},n.default.createElement("div",{className:"col-sm-4 col-md-5"},n.default.createElement(u,e)),n.default.createElement("div",{className:"col-sm-8 col-md-7 hidden-xs"},n.default.createElement(d,{more:e.more})))))},r.Pager=u,r.FirstPage=i,r.PreviousPage=s,r.NextPage=c,r.LastPage=f,r.More=d;var n=l(e("react")),a=e("react-router"),o=l(e("../../../utils/reset-scroll"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return n.default.createElement("div",{className:"row row-paginator"},n.default.createElement("div",{className:"col-xs-3"},n.default.createElement(i,e)),n.default.createElement("div",{className:"col-xs-3"},n.default.createElement(s,e)),n.default.createElement("div",{className:"col-xs-3"},n.default.createElement(c,e)),n.default.createElement("div",{className:"col-xs-3"},n.default.createElement(f,e)))}function i(e){return e.isLoaded&&e.first?n.default.createElement(a.Link,{className:"btn btn-default btn-block btn-icon btn-outline",onClick:o.default,to:e.baseUrl,title:gettext("Go to first page")},n.default.createElement("span",{className:"material-icon"},"first_page")):n.default.createElement("span",{className:"btn btn-default btn-block btn-icon btn-outline disabled",title:gettext("Go to first page")},n.default.createElement("span",{className:"material-icon"},"first_page"))}function s(e){if(e.isLoaded&&1<e.page){var t="";return e.previous&&(t=e.previous+"/"),n.default.createElement(a.Link,{className:"btn btn-default btn-block btn-icon btn-outline",onClick:o.default,to:e.baseUrl+t,title:gettext("Go to previous page")},n.default.createElement("span",{className:"material-icon"},"chevron_left"))}return n.default.createElement("span",{className:"btn btn-default btn-block btn-icon btn-outline disabled",title:gettext("Go to previous page")},n.default.createElement("span",{className:"material-icon"},"chevron_left"))}function c(e){if(e.isLoaded&&e.more){var t="";return e.next&&(t=e.next+"/"),n.default.createElement(a.Link,{className:"btn btn-default btn-block btn-icon btn-outline",onClick:o.default,to:e.baseUrl+t,title:gettext("Go to next page")},n.default.createElement("span",{className:"material-icon"},"chevron_right"))}return n.default.createElement("span",{className:"btn btn-default btn-block btn-icon btn-outline disabled",title:gettext("Go to next page")},n.default.createElement("span",{className:"material-icon"},"chevron_right"))}function f(e){return e.isLoaded&&e.last?n.default.createElement(a.Link,{className:"btn btn-default btn-block btn-icon btn-outline",onClick:o.default,to:e.baseUrl+e.last+"/",title:gettext("Go to last page")},n.default.createElement("span",{className:"material-icon"},"last_page")):n.default.createElement("span",{className:"btn btn-default btn-block btn-icon btn-outline disabled",title:gettext("Go to last page")},n.default.createElement("span",{className:"material-icon"},"last_page"))}function d(e){var t=null,t=e.more?(t=ngettext("There is %(more)s more member with this role.","There are %(more)s more members with this role.",e.more),interpolate(t,{more:e.more},!0)):gettext("There are no more members with this role.");return n.default.createElement("p",null,t)}},{"../../../utils/reset-scroll":389,react:"react","react-router":"react-router"}],297:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("react")),a=o(e("../../page-lead")),u=o(e("./list")),i=o(e("./list-loading")),s=o(e("../../..")),c=e("../../../reducers/users"),f=o(e("../../../services/polls")),d=o(e("../../../services/store")),p=o(e("../../../services/page-title"));function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==m(n)&&"function"!=typeof n?g(r):n}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(l,n.default.Component);var e,t,r,o=v(l);function l(e){var t,r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),r=g(t),a=function(e){d.default.dispatch((0,c.hydrate)(e.results)),e.isLoaded=!0,t.setState(e)},(n="update")in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,s.default.has("USERS")?t.initWithPreloadedData(s.default.pop("USERS")):t.initWithoutPreloadedData(),t.startPolling(e.params.page||1),t}return e=l,(t=[{key:"initWithPreloadedData",value:function(e){this.state=Object.assign(e,{isLoaded:!0}),d.default.dispatch((0,c.hydrate)(e.results))}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1}}},{key:"startPolling",value:function(e){f.default.start({poll:"rank-users",url:s.default.get("USERS_API"),data:{rank:this.props.route.rank.id,page:e},frequency:9e4,update:this.update})}},{key:"componentDidMount",value:function(){p.default.set({title:this.props.route.rank.name,page:this.props.params.page||null,parent:gettext("Users")})}},{key:"componentWillUnmount",value:function(){f.default.stop("rank-users")}},{key:"componentWillReceiveProps",value:function(e){this.props.params.page!==e.params.page&&(p.default.set({title:this.props.route.rank.name,page:e.params.page||null,parent:gettext("Users")}),this.setState({isLoaded:!1}),f.default.stop("rank-users"),this.startPolling(e.params.page))}},{key:"getClassName",value:function(){return this.props.route.rank.css_class?"rank-users-list rank-users-"+this.props.route.rank.css_class:"rank-users-list"}},{key:"getRankDescription",value:function(){return this.props.route.rank.description?n.default.createElement("div",{className:"rank-description"},n.default.createElement(a.default,{copy:this.props.route.rank.description.html})):null}},{key:"getComponent",value:function(){if(this.state.isLoaded){if(0<this.state.count){var e=s.default.get("USERS_LIST_URL")+this.props.route.rank.slug+"/";return n.default.createElement(u.default,h({baseUrl:e,users:this.props.users},this.state))}return n.default.createElement("p",{className:"lead"},gettext("There are no users with this rank at the moment."))}return n.default.createElement(i.default,null)}},{key:"render",value:function(){return n.default.createElement("div",{className:this.getClassName()},n.default.createElement("div",{className:"container"},this.getRankDescription(),this.getComponent()))}}])&&y(e.prototype,t),r&&y(e,r),l}();r.default=l},{"../../..":302,"../../../reducers/users":364,"../../../services/page-title":373,"../../../services/polls":374,"../../../services/store":377,"../../page-lead":92,"./list":295,"./list-loading":294,react:"react"}],298:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.select=b,r.paths=function(){var t=[];return s.default.get("USERS_LISTS").forEach(function(e){"rank"===e.component?(t.push({path:s.default.get("USERS_LIST_URL")+e.slug+"/:page/",component:(0,n.connect)(b)(u.default),rank:e}),t.push({path:s.default.get("USERS_LIST_URL")+e.slug+"/",component:(0,n.connect)(b)(u.default),rank:e})):"active-posters"===e.component&&t.push({path:s.default.get("USERS_LIST_URL")+e.component+"/",component:(0,n.connect)(b)(a.default),extra:{name:e.name}})}),t},r.default=void 0;var o=c(e("react")),n=e("react-redux"),l=(c(e("../dropdown-toggle")),c(e("./nav"))),a=c(e("./active-posters/root")),u=c(e("./rank/root")),i=c(e("../with-dropdown")),s=c(e("../.."));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=h(o);return t=l?(e=h(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==f(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,i.default);var e,t,r,n=m(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){return o.default.createElement("div",{className:"page page-users-lists"},o.default.createElement("div",{className:"page-header-bg"},o.default.createElement("div",{className:"page-header"},o.default.createElement("div",{className:"container"},o.default.createElement("h1",null,gettext("Users"))),o.default.createElement("div",{className:"page-tabs"},o.default.createElement("div",{className:"container"},o.default.createElement(l.default,{lists:s.default.get("USERS_LISTS"),baseUrl:s.default.get("USERS_LIST_URL")}))))),this.props.children)}}])&&d(e.prototype,t),r&&d(e,r),a}();function b(e){return{tick:e.tick.tick,user:e.auth.user,users:e.users}}r.default=y},{"../..":302,"../dropdown-toggle":27,"../with-dropdown":299,"./active-posters/root":292,"./nav":293,"./rank/root":297,react:"react","react-redux":"react-redux"}],299:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("react"))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?c(r):n}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(a,o.default.Component);var e,t,r,n=s(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),d(c(t=n.call(this,e)),"toggleNav",function(){t.setState({dropdown:!t.state.dropdown})}),d(c(t),"hideNav",function(){t.setState({dropdown:!1})}),t.state={dropdown:!1},t}return e=a,(t=[{key:"getCompactNavClassName",value:function(){return this.state.dropdown?"compact-nav open":"compact-nav"}}])&&l(e.prototype,t),r&&l(e,r),a}();r.default=a},{react:"react"}],300:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,a=(n=e("react"))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=i(o);return t=l?(e=i(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?c(r):n}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,a.default.Component);var e,t,r,u=s(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t,r,n,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=u.call.apply(u,[this].concat(o)),t=c(e),n=function(){e.props.onChange({target:{value:!e.props.value}})},(r="toggle")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e}return e=i,(t=[{key:"getClassName",value:function(){return this.props.value?"btn btn-yes-no btn-yes-no-on":"btn btn-yes-no btn-yes-no-off"}},{key:"getIcon",value:function(){return this.props.value?this.props.iconOn||"check_box":this.props.iconOff||"check_box_outline_blank"}},{key:"getLabel",value:function(){return this.props.value?this.props.labelOn||gettext("yes"):this.props.labelOff||gettext("no")}},{key:"render",value:function(){return a.default.createElement("button",{type:"button",onClick:this.toggle,className:this.getClassName(),id:this.props.id||null,"aria-describedby":this.props["aria-describedby"]||null,disabled:this.props.disabled||!1},a.default.createElement("span",{className:"material-icon"},this.getIcon()),a.default.createElement("span",{className:"btn-text"},this.getLabel()))}}])&&o(e.prototype,t),r&&o(e,r),i}();r.default=f},{react:"react"}],301:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),l=e("../reducers/profile-details"),u=n(e("../services/ajax")),i=n(e("../services/snackbar"));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,o.default.Component);var e,t,r,n=d(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"componentDidMount",value:function(){var e=this.props,t=e.data,r=e.dispatch,n=e.user;t&&t.id===n.id||u.default.get(this.props.user.api.details).then(function(e){r((0,l.load)(e))},function(e){i.default.apiError(e)})}},{key:"render",value:function(){return this.props.children}}])&&c(e.prototype,t),r&&c(e,r),a}();r.default=a},{"../reducers/profile-details":355,"../services/ajax":365,"../services/snackbar":376,react:"react"}],302:[function(l,e,u){(function(e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=u.Misago=void 0;var t,a=(t=l("./utils/ordered-list"))&&t.__esModule?t:{default:t};function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initializers=[],this._context={}}var t,r,n;return t=e,(r=[{key:"addInitializer",value:function(e){this._initializers.push({key:e.name,item:e.initializer,after:e.after,before:e.before})}},{key:"init",value:function(e){var t=this;this._context=e,new a.default(this._initializers).orderedValues().forEach(function(e){e(t)})}},{key:"has",value:function(e){return!!this._context[e]}},{key:"get",value:function(e,t){return this.has(e)?this._context[e]:t||void 0}},{key:"pop",value:function(e){if(this.has(e)){var t=this._context[e];return this._context[e]=null,t}}}])&&o(t.prototype,r),n&&o(t,n),e}(),n=new(u.Misago=r);e.misago=n,u.default=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utils/ordered-list":387}],303:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=l;var n=o(e("./..")),a=o(e("../services/ajax"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){a.default.init(n.default.get("CSRF_COOKIE_NAME"))}n.default.addInitializer({name:"ajax",initializer:l})},{"../services/ajax":365,"./..":302}],304:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=c;var n=i(e("./..")),a=e("../reducers/auth"),o=i(e("../services/ajax")),l=i(e("../services/snackbar")),u=i(e("../services/store"));function i(e){return e&&e.__esModule?e:{default:e}}var s=45;function c(e){e.get("isAuthenticated")&&window.setInterval(function(){o.default.get(e.get("AUTH_API")).then(function(e){u.default.dispatch((0,a.patch)(e))},function(e){l.default.apiError(e)})},1e3*s)}n.default.addInitializer({name:"auth-sync",initializer:c,after:"auth"})},{"../reducers/auth":350,"../services/ajax":365,"../services/snackbar":376,"../services/store":377,"./..":302}],305:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var n=i(e("./..")),a=i(e("../services/auth")),o=i(e("../services/modal")),l=i(e("../services/store")),u=i(e("../services/local-storage"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){a.default.init(l.default,u.default,o.default)}n.default.addInitializer({name:"auth",initializer:s,after:"store"})},{"../services/auth":366,"../services/local-storage":369,"../services/modal":371,"../services/store":377,"./..":302}],306:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var n=i(e("./..")),a=i(e("../services/ajax")),o=i(e("../services/captcha")),l=i(e("../services/include")),u=i(e("../services/snackbar"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){o.default.init(e,a.default,l.default,u.default)}n.default.addInitializer({name:"captcha",initializer:s})},{"../services/ajax":365,"../services/captcha":367,"../services/include":368,"../services/snackbar":376,"./..":302}],307:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var n=u(e("react")),a=u(e("../..")),o=u(e("../../components/accept-agreement")),l=u(e("../../utils/mount-component"));function u(e){return e&&e.__esModule?e:{default:e}}function i(e){document.getElementById("required-agreement-mount")&&(0,l.default)(n.default.createElement(o.default,{api:e.get("REQUIRED_AGREEMENT_API")}),"required-agreement-mount",!1)}a.default.addInitializer({name:"component:accept-agreement",initializer:i,after:"store"})},{"../..":302,"../../components/accept-agreement":3,"../../utils/mount-component":386,react:"react"}],308:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=c;var n=e("react-redux"),a=s(e("../..")),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../components/auth-message")),u=s(e("../../utils/mount-component"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function c(){(0,u.default)((0,n.connect)(o.select)(o.default),"auth-message-mount")}a.default.addInitializer({name:"component:auth-message",initializer:c,after:"store"})},{"../..":302,"../../components/auth-message":5,"../../utils/mount-component":386,"react-redux":"react-redux"}],309:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=l;var n=o(e("../..")),a=o(e("../../utils/banned-page"));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){e.has("BAN_MESSAGE")&&(0,a.default)(e.get("BAN_MESSAGE"),!1)}n.default.addInitializer({name:"component:banmed-page",initializer:l,after:"store"})},{"../..":302,"../../utils/banned-page":379}],310:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=c;var n=e("react-redux"),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../components/categories")),o=i(e("../..")),u=i(e("../../utils/mount-component"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(){document.getElementById("categories-mount")&&(0,u.default)((0,n.connect)(a.select)(a.default),"categories-mount")}o.default.addInitializer({name:"component:categories",initializer:c,after:"store"})},{"../..":302,"../../components/categories":20,"../../utils/mount-component":386,"react-redux":"react-redux"}],311:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../components/options/root")),a=u(e("../..")),o=u(e("../../utils/routed-component"));function u(e){return e&&e.__esModule?e:{default:e}}function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){e.has("USER_OPTIONS")&&(0,o.default)({root:a.default.get("USERCP_URL"),component:n.default,paths:(0,n.paths)()})}a.default.addInitializer({name:"component:options",initializer:s,after:"store"})},{"../..":302,"../../components/options/root":87,"../../utils/routed-component":390}],312:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=c;var n=e("react-redux"),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../components/profile/root")),o=i(e("../..")),u=i(e("../../utils/routed-component"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e){e.has("PROFILE")&&e.has("PROFILE_PAGES")&&(0,u.default)({root:o.default.get("PROFILE").url,component:(0,n.connect)(a.select)(a.default),paths:(0,a.paths)()})}o.default.addInitializer({name:"component:profile",initializer:c,after:"reducer:profile-hydrate"})},{"../..":302,"../../components/profile/root":195,"../../utils/routed-component":390,"react-redux":"react-redux"}],313:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var n=l(e("../..")),a=l(e("../../components/request-activation-link")),o=l(e("../../utils/mount-component"));function l(e){return e&&e.__esModule?e:{default:e}}function u(){document.getElementById("request-activation-link-mount")&&(0,o.default)(a.default,"request-activation-link-mount",!1)}n.default.addInitializer({name:"component:request-activation-link",initializer:u,after:"store"})},{"../..":302,"../../components/request-activation-link":200,"../../utils/mount-component":386}],314:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var n=l(e("../..")),a=l(e("../../components/request-password-reset")),o=l(e("../../utils/mount-component"));function l(e){return e&&e.__esModule?e:{default:e}}function u(){document.getElementById("request-password-reset-mount")&&(0,o.default)(a.default,"request-password-reset-mount",!1)}n.default.addInitializer({name:"component:request-password-reset",initializer:u,after:"store"})},{"../..":302,"../../components/request-password-reset":201,"../../utils/mount-component":386}],315:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var n=l(e("../..")),a=l(e("../../components/reset-password-form")),o=l(e("../../utils/mount-component"));function l(e){return e&&e.__esModule?e:{default:e}}function u(){document.getElementById("reset-password-form-mount")&&(0,o.default)(a.default,"reset-password-form-mount",!1)}n.default.addInitializer({name:"component:reset-password-form",initializer:u,after:"store"})},{"../..":302,"../../components/reset-password-form":202,"../../utils/mount-component":386}],316:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var n=l(e("../../components/search")),a=l(e("../..")),o=l(e("../../utils/routed-component"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){"misago:search"===e.get("CURRENT_LINK")&&(0,o.default)({paths:(0,n.default)(a.default.get("SEARCH_PROVIDERS"))})}a.default.addInitializer({name:"component:search",initializer:u,after:"store"})},{"../..":302,"../../components/search":204,"../../utils/routed-component":390}],317:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var n=e("react-redux"),a=u(e("../..")),o=e("../../components/snackbar"),l=u(e("../../utils/mount-component"));function u(e){return e&&e.__esModule?e:{default:e}}function i(){(0,l.default)((0,n.connect)(o.select)(o.Snackbar),"snackbar-mount")}a.default.addInitializer({name:"component:snackbar",initializer:i,after:"snackbar"})},{"../..":302,"../../components/snackbar":212,"../../utils/mount-component":386,"react-redux":"react-redux"}],318:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var n=u(e("react")),a=u(e("../../components/social-auth")),o=u(e("../..")),l=u(e("../../utils/mount-component"));function u(e){return e&&e.__esModule?e:{default:e}}function i(e){var t;"misago:social-complete"===e.get("CURRENT_LINK")&&(t=e.get("SOCIAL_AUTH_FORM"),(0,l.default)(n.default.createElement(a.default,t),"page-mount"))}o.default.addInitializer({name:"component:social-auth",initializer:i,after:"store"})},{"../..":302,"../../components/social-auth":215,"../../utils/mount-component":386,react:"react"}],319:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var n=e("../../components/thread/root"),a=l(e("../..")),o=l(e("../../utils/routed-component"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){e.has("THREAD")&&e.has("POSTS")&&(0,o.default)({paths:(0,n.paths)()})}a.default.addInitializer({name:"component:thread",initializer:u,after:"store"})},{"../..":302,"../../components/thread/root":233,"../../utils/routed-component":390}],320:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=i,r.getListOptions=s;var n=e("../../components/threads/root"),a=l(e("../..")),o=l(e("../../utils/routed-component"));function l(e){return e&&e.__esModule?e:{default:e}}var u="misago:private-threads";function i(e){e.has("THREADS")&&e.has("CATEGORIES")&&(0,o.default)({paths:(0,n.paths)(e.get("user"),s(e))})}function s(e){return e.get("CURRENT_LINK").substr(0,u.length)===u?{api:e.get("PRIVATE_THREADS_API"),startThread:{mode:"START_PRIVATE",submit:a.default.get("PRIVATE_THREADS_API")},title:gettext("Private threads"),pageLead:gettext("Private threads are threads which only those that started them and those they have invited may see and participate in."),emptyMessage:gettext("You aren't participating in any private threads.")}:{api:e.get("THREADS_API")}}a.default.addInitializer({name:"component:threads",initializer:i,after:"store"})},{"../..":302,"../../components/threads/root":267,"../../utils/routed-component":390}],321:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var n=e("react-redux"),a=u(e("../..")),o=e("../../components/user-menu/root"),l=u(e("../../utils/mount-component"));function u(e){return e&&e.__esModule?e:{default:e}}function i(){(0,l.default)((0,n.connect)(o.select)(o.UserMenu),"user-menu-mount"),(0,l.default)((0,n.connect)(o.select)(o.CompactUserMenu),"user-menu-compact-mount")}a.default.addInitializer({name:"component:user-menu",initializer:i,after:"store"})},{"../..":302,"../../components/user-menu/root":272,"../../utils/mount-component":386,"react-redux":"react-redux"}],322:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../components/users/root")),a=u(e("../..")),o=u(e("../../utils/routed-component"));function u(e){return e&&e.__esModule?e:{default:e}}function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){e.has("USERS_LISTS")&&(0,o.default)({root:a.default.get("USERS_LIST_URL"),component:n.default,paths:(0,n.paths)()})}a.default.addInitializer({name:"component:users",initializer:s,after:"store"})},{"../..":302,"../../components/users/root":298,"../../utils/routed-component":390}],323:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=l;var n=o(e("./..")),a=o(e("../services/include"));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){a.default.init(e.get("STATIC_URL"))}n.default.addInitializer({name:"include",initializer:l})},{"../services/include":368,"./..":302}],324:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=l;var n=o(e("./..")),a=o(e("../services/local-storage"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){a.default.init("misago_")}n.default.addInitializer({name:"local-storage",initializer:l})},{"../services/local-storage":369,"./..":302}],325:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=l;var n=o(e("./..")),a=o(e("../services/mobile-navbar-dropdown"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){var e=document.getElementById("mobile-navbar-dropdown-mount");e&&a.default.init(e)}n.default.addInitializer({name:"dropdown",initializer:l,before:"store"})},{"../services/mobile-navbar-dropdown":370,"./..":302}],326:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=l;var n=o(e("./..")),a=o(e("../services/modal"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){var e=document.getElementById("modal-mount");e&&a.default.init(e)}n.default.addInitializer({name:"modal",initializer:l,before:"store"})},{"../services/modal":371,"./..":302}],327:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var n=a(e("moment"));function a(e){return e&&e.__esModule?e:{default:e}}function o(){n.default.locale($("html").attr("lang"))}a(e("./..")).default.addInitializer({name:"moment",initializer:o})},{"./..":302,moment:"moment"}],328:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=l;var n=o(e("./..")),a=o(e("../services/page-title"));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){a.default.init(e.get("SETTINGS").forum_index_title,e.get("SETTINGS").forum_name)}n.default.addInitializer({name:"page-title",initializer:l})},{"../services/page-title":373,"./..":302}],329:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var n=u(e("./..")),a=u(e("../services/ajax")),o=u(e("../services/snackbar")),l=u(e("../services/polls"));function u(e){return e&&e.__esModule?e:{default:e}}function i(){l.default.init(a.default,o.default)}n.default.addInitializer({name:"polls",initializer:i})},{"../services/ajax":365,"../services/polls":374,"../services/snackbar":376,"./..":302}],330:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var n=u(e("./..")),a=u(e("../services/ajax")),o=u(e("../services/posting")),l=u(e("../services/snackbar"));function u(e){return e&&e.__esModule?e:{default:e}}function i(){o.default.init(a.default,l.default,document.getElementById("posting-placeholder"))}n.default.addInitializer({name:"posting",initializer:i})},{"../services/ajax":365,"../services/posting":375,"../services/snackbar":376,"./..":302}],331:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var n=i(e("../..")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../reducers/auth")),o=i(e("../../services/store"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){return e&&e.__esModule?e:{default:e}}function s(e){o.default.addReducer("auth",a.default,Object.assign({isAuthenticated:e.get("isAuthenticated"),isAnonymous:!e.get("isAuthenticated"),user:e.get("user")},a.initialState))}n.default.addInitializer({name:"reducer:auth",initializer:s,before:"store"})},{"../..":302,"../../reducers/auth":350,"../../services/store":377}],332:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var n=l(e("../..")),a=l(e("../../reducers/participants")),o=l(e("../../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function u(){var e=null;n.default.has("THREAD")&&(e=n.default.get("THREAD").participants),o.default.addReducer("participants",a.default,e||[])}n.default.addInitializer({name:"reducer:participants",initializer:u,before:"store"})},{"../..":302,"../../reducers/participants":351,"../../services/store":377}],333:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var n=i(e("../..")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../reducers/poll")),o=i(e("../../services/store"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){return e&&e.__esModule?e:{default:e}}function s(){var e=null,e=n.default.has("THREAD")&&n.default.get("THREAD").poll?(0,a.hydrate)(n.default.get("THREAD").poll):{isBusy:!1};o.default.addReducer("poll",a.default,e)}n.default.addInitializer({name:"reducer:poll",initializer:s,before:"store"})},{"../..":302,"../../reducers/poll":352,"../../services/store":377}],334:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var n=i(e("../..")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../reducers/posts")),o=i(e("../../services/store"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){return e&&e.__esModule?e:{default:e}}function s(){var e=null,e=n.default.has("POSTS")?(0,a.hydrate)(n.default.get("POSTS")):{isLoaded:!1,isBusy:!1};o.default.addReducer("posts",a.default,e)}n.default.addInitializer({name:"reducer:posts",initializer:s,before:"store"})},{"../..":302,"../../reducers/posts":354,"../../services/store":377}],335:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var n=l(e("../..")),a=l(e("../../reducers/profile-details")),o=l(e("../../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function u(){var e=null;n.default.has("PROFILE_DETAILS")&&(e=n.default.get("PROFILE_DETAILS")),o.default.addReducer("profile-details",a.default,e||{})}n.default.addInitializer({name:"reducer:profile-details",initializer:u,before:"store"})},{"../..":302,"../../reducers/profile-details":355,"../../services/store":377}],336:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var n=l(e("../..")),a=e("../../reducers/profile"),o=l(e("../../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function u(){n.default.has("PROFILE")&&o.default.dispatch((0,a.hydrate)(n.default.get("PROFILE")))}n.default.addInitializer({name:"reducer:profile-hydrate",initializer:u,after:"store"})},{"../..":302,"../../reducers/profile":356,"../../services/store":377}],337:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var n=l(e("../..")),a=l(e("../../reducers/profile")),o=l(e("../../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function u(){o.default.addReducer("profile",a.default,{})}n.default.addInitializer({name:"reducer:profile",initializer:u,before:"store"})},{"../..":302,"../../reducers/profile":356,"../../services/store":377}],338:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var n=i(e("../..")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../reducers/search")),o=i(e("../../services/store"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){return e&&e.__esModule?e:{default:e}}function s(){o.default.addReducer("search",a.default,Object.assign({},a.initialState,{providers:n.default.get("SEARCH_PROVIDERS")||[],query:n.default.get("SEARCH_QUERY")||""}))}n.default.addInitializer({name:"reducer:search",initializer:s,before:"store"})},{"../..":302,"../../reducers/search":357,"../../services/store":377}],339:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var n=l(e("../..")),a=l(e("../../reducers/selection")),o=l(e("../../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function u(){o.default.addReducer("selection",a.default,[])}n.default.addInitializer({name:"reducer:selection",initializer:u,before:"store"})},{"../..":302,"../../reducers/selection":358,"../../services/store":377}],340:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var n=i(e("../..")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../reducers/snackbar")),o=i(e("../../services/store"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){return e&&e.__esModule?e:{default:e}}function s(){o.default.addReducer("snackbar",a.default,a.initialState)}n.default.addInitializer({name:"reducer:snackbar",initializer:s,before:"store"})},{"../..":302,"../../reducers/snackbar":359,"../../services/store":377}],341:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var n=i(e("../..")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../reducers/thread")),o=i(e("../../services/store"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){return e&&e.__esModule?e:{default:e}}function s(){var e=null,e=n.default.has("THREAD")?(0,a.hydrate)(n.default.get("THREAD")):{isBusy:!1};o.default.addReducer("thread",a.default,e)}n.default.addInitializer({name:"reducer:thread",initializer:s,before:"store"})},{"../..":302,"../../reducers/thread":360,"../../services/store":377}],342:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var n=l(e("../..")),a=l(e("../../reducers/threads")),o=l(e("../../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function u(){o.default.addReducer("threads",a.default,[])}n.default.addInitializer({name:"reducer:threads",initializer:u,before:"store"})},{"../..":302,"../../reducers/threads":361,"../../services/store":377}],343:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var n=i(e("../..")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("../../reducers/tick")),o=i(e("../../services/store"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){return e&&e.__esModule?e:{default:e}}function s(){o.default.addReducer("tick",a.default,a.initialState)}n.default.addInitializer({name:"reducer:tick",initializer:s,before:"store"})},{"../..":302,"../../reducers/tick":362,"../../services/store":377}],344:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var n=l(e("../..")),a=l(e("../../reducers/username-history")),o=l(e("../../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function u(){o.default.addReducer("username-history",a.default,[])}n.default.addInitializer({name:"reducer:username-history",initializer:u,before:"store"})},{"../..":302,"../../reducers/username-history":363,"../../services/store":377}],345:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var n=l(e("../..")),a=l(e("../../reducers/users")),o=l(e("../../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function u(){o.default.addReducer("users",a.default,[])}n.default.addInitializer({name:"reducer:users",initializer:u,before:"store"})},{"../..":302,"../../reducers/users":364,"../../services/store":377}],346:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var n=l(e("./..")),a=l(e("../services/snackbar")),o=l(e("../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function u(){a.default.init(o.default)}n.default.addInitializer({name:"snackbar",initializer:u,after:"store"})},{"../services/snackbar":376,"../services/store":377,"./..":302}],347:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=l;var n=o(e("./..")),a=o(e("../services/store"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){a.default.init()}n.default.addInitializer({name:"store",initializer:l,before:"_end"})},{"../services/store":377,"./..":302}],348:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var n=l(e("./..")),a=e("../reducers/tick"),o=l(e("../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}var u=5e4;function i(){window.setInterval(function(){o.default.dispatch((0,a.doTick)())},u)}n.default.addInitializer({name:"tick-start",initializer:i,after:"store"})},{"../reducers/tick":362,"../services/store":377,"./..":302}],349:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var n=l(e("./..")),a=l(e("../services/include")),o=l(e("../services/zxcvbn"));function l(e){return e&&e.__esModule?e:{default:e}}function u(){o.default.init(a.default)}n.default.addInitializer({name:"zxcvbn",initializer:u})},{"../services/include":368,"../services/zxcvbn":378,"./..":302}],350:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.patch=function(e){return{type:u,patch:e}},r.signIn=function(e){return{type:i,user:e}},r.signOut=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{type:s,soft:e}},r.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:l,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case u:var r=Object.assign({},e);return r.user=Object.assign({},e.user,t.patch),r;case i:return Object.assign({},e,{signedIn:t.user});case s:return Object.assign({},e,{isAuthenticated:!1,isAnonymous:!0,signedOut:!t.soft});case o.UPDATE_AVATAR:if(e.isAuthenticated&&e.user.id===t.userId){var n=Object.assign({},e);return n.user=Object.assign({},e.user,{avatars:t.avatars}),n}return e;case o.UPDATE_USERNAME:if(e.isAuthenticated&&e.user.id===t.userId){var a=Object.assign({},e);return a.user=Object.assign({},e.user,{username:t.username,slug:t.slug}),a}return e;default:return e}},r.SIGN_OUT=r.SIGN_IN=r.PATCH_USER=r.initialState=void 0;var o=e("./users"),l={signedIn:!1,signedOut:!1};r.initialState=l;var u="PATCH_USER";r.PATCH_USER=u;var i="SIGN_IN";r.SIGN_IN=i;var s="SIGN_OUT";r.SIGN_OUT=s},{"./users":364}],351:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.replace=function(e){return{type:n,state:e}},r.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case n:return t.state;default:return e}},r.REPLACE_PARTICIPANTS=void 0;var n="REPLACE_PARTICIPANTS";r.REPLACE_PARTICIPANTS=n},{}],352:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hydrate=c,r.busy=function(){return{type:o}},r.release=function(){return{type:l}},r.replace=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return{type:i,state:t?e:c(e)}},r.update=function(e){return{type:s,data:e}},r.remove=function(){return{type:u}},r.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case o:return Object.assign({},e,{isBusy:!0});case l:return Object.assign({},e,{isBusy:!1});case u:return{isBusy:!1};case i:return t.state;case s:return Object.assign({},e,t.data);default:return e}},r.UPDATE_POLL=r.REPLACE_POLL=r.REMOVE_POLL=r.RELEASE_POLL=r.BUSY_POLL=void 0;var n,a=(n=e("moment"))&&n.__esModule?n:{default:n};var o="BUSY_POLL";r.BUSY_POLL=o;var l="RELEASE_POLL";r.RELEASE_POLL=l;var u="REMOVE_POLL";r.REMOVE_POLL=u;var i="REPLACE_POLL";r.REPLACE_POLL=i;var s="UPDATE_POLL";function c(e){var t=!1;for(var r in e.choices){if(e.choices[r].selected){t=!0;break}}return Object.assign({},e,{posted_on:(0,a.default)(e.posted_on),hasSelectedChoices:t,endsOn:e.length?(0,a.default)(e.posted_on).add(e.length,"days"):null,isBusy:!1})}r.UPDATE_POLL=s},{moment:"moment"}],353:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hydrate=function(e){return Object.assign({},e,{posted_on:(0,a.default)(e.posted_on),updated_on:(0,a.default)(e.updated_on),hidden_on:(0,a.default)(e.hidden_on),attachments:e.attachments?e.attachments.map(u):null,poster:e.poster?(0,o.hydrateUser)(e.poster):null,isSelected:!1,isBusy:!1,isDeleted:!1})},r.hydrateAttachment=u,r.patch=function(e,t){return{type:l,post:e,patch:t}},r.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case l:return e.id==t.post.id?Object.assign({},e,t.patch):e;default:return e}},r.PATCH_POST=void 0;var n,a=(n=e("moment"))&&n.__esModule?n:{default:n},o=e("./users");var l="PATCH_POST";function u(e){return Object.assign({},e,{uploaded_on:(0,a.default)(e.uploaded_on)})}r.PATCH_POST=l},{"./users":364,moment:"moment"}],354:[function(e,t,r){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.select=function(e){return{type:c,post:e}},r.deselect=function(e){return{type:f,post:e}},r.deselectAll=function(){return{type:d}},r.hydrate=n,r.load=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return{type:p,state:t?e:n(e)}},r.append=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return{type:s,state:t?e:n(e)}},r.unload=function(){return{type:m}},r.update=function(e){return{type:h,update:e}},r.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case c:var r=e.results.map(function(e){return e.id==t.post.id?Object.assign({},e,{isSelected:!0}):e});return Object.assign({},e,{results:r});case f:var n=e.results.map(function(e){return e.id==t.post.id?Object.assign({},e,{isSelected:!1}):e});return Object.assign({},e,{results:n});case d:var a=e.results.map(function(e){return Object.assign({},e,{isSelected:!1})});return Object.assign({},e,{results:a});case s:var o=e.results.slice(),l=e.results.map(function(e){return e.id});return t.state.results.map(function(e){-1===l.indexOf(e.id)&&o.push(e)}),Object.assign({},t.state,{results:o});case p:return t.state;case m:return Object.assign({},e,{isLoaded:!1});case h:return Object.assign({},e,t.update);case i.PATCH_POST:var u=e.results.map(function(e){return(0,i.default)(e,t)});return Object.assign({},e,{results:u});default:return e}},r.UPDATE_POSTS=r.UNLOAD_POSTS=r.LOAD_POSTS=r.DESELECT_POSTS=r.DESELECT_POST=r.SELECT_POST=r.APPEND_POSTS=void 0;var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=n?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a])}r.default=e,t&&t.set(e,r);return r}(e("./post"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}var s="APPEND_POSTS";r.APPEND_POSTS=s;var c="SELECT_POST";r.SELECT_POST=c;var f="DESELECT_POST";r.DESELECT_POST=f;var d="DESELECT_POSTS";r.DESELECT_POSTS=d;var p="LOAD_POSTS";r.LOAD_POSTS=p;var m="UNLOAD_POSTS";r.UNLOAD_POSTS=m;var h="UPDATE_POSTS";function n(e){return Object.assign({},e,{results:e.results.map(i.hydrate),isLoaded:!0,isBusy:!1,isSelected:!1})}r.UPDATE_POSTS=h},{"./post":353}],355:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.load=function(e){return{type:n,newState:e}},r.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case n:return t.newState;default:return e}},r.LOAD_DETAILS=void 0;var n="LOAD_DETAILS";r.LOAD_DETAILS=n},{}],356:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hydrate=function(e){return{type:l,profile:e}},r.patch=function(e){return{type:u,patch:e}},r.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case l:return Object.assign({},t.profile,{joined_on:(0,a.default)(t.profile.joined_on),status:(0,o.hydrateStatus)(t.profile.status)});case u:return Object.assign({},e,t.patch);case o.UPDATE_AVATAR:return e.id===t.userId?Object.assign({},e,{avatars:t.avatars}):e;case o.UPDATE_USERNAME:return e.id===t.userId?Object.assign({},e,{username:t.username,slug:t.slug}):e;default:return e}},r.PATCH_PROFILE=r.HYDRATE_PROFILE=void 0;var n,a=(n=e("moment"))&&n.__esModule?n:{default:n},o=e("./users");var l="HYDRATE_PROFILE";r.HYDRATE_PROFILE=l;var u="PATCH_PROFILE";r.PATCH_PROFILE=u},{"./users":364,moment:"moment"}],357:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.replace=function(e){return{type:n,state:{isLoading:!1,providers:e}}},r.update=function(e){return{type:a,update:e}},r.updateProvider=function(e){return{type:o,provider:e}},r.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case n:return t.state;case a:return Object.assign({},e,t.update);case o:return Object.assign({},e,{providers:e.providers.map(function(e){return e.id===t.provider.id?t.provider:e})});default:return e}},r.initialState=r.UPDATE_SEARCH_PROVIDER=r.UPDATE_SEARCH=r.REPLACE_SEARCH=void 0;var n="REPLACE_SEARCH";r.REPLACE_SEARCH=n;var a="UPDATE_SEARCH";r.UPDATE_SEARCH=a;var o="UPDATE_SEARCH_PROVIDER";r.UPDATE_SEARCH_PROVIDER=o;r.initialState={isLoading:!1,query:"",providers:[]}},{}],358:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.all=function(e){return{type:a,items:e}},r.none=function(){return{type:o}},r.item=function(e){return{type:l,item:e}},r.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case a:return t.items;case o:return[];case l:return(0,n.toggle)(e,t.item);default:return e}},r.SELECT_ITEM=r.SELECT_NONE=r.SELECT_ALL=void 0;var n=e("../utils/sets"),a="SELECT_ALL";r.SELECT_ALL=a;var o="SELECT_NONE";r.SELECT_NONE=o;var l="SELECT_ITEM";r.SELECT_ITEM=l},{"../utils/sets":391}],359:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.showSnackbar=function(e,t){return{type:a,message:e,messageType:t}},r.hideSnackbar=function(){return{type:o}},r.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:n,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return t.type===a?{type:t.messageType,message:t.message,isVisible:!0}:t.type===o?Object.assign({},e,{isVisible:!1}):e},r.HIDE_SNACKBAR=r.SHOW_SNACKBAR=r.initialState=void 0;var n={type:"info",message:"",isVisible:!1};r.initialState=n;var a="SHOW_SNACKBAR";r.SHOW_SNACKBAR=a;var o="HIDE_SNACKBAR";r.HIDE_SNACKBAR=o},{}],360:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hydrate=f,r.busy=function(){return{type:l}},r.release=function(){return{type:u}},r.replace=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return{type:i,state:t?e:f(e)}},r.update=function(e){return{type:s,data:e}},r.updateAcl=function(e){return{type:c,data:e}},r.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case l:return Object.assign({},e,{isBusy:!0});case u:return Object.assign({},e,{isBusy:!1});case o.REMOVE_POLL:return Object.assign({},e,{poll:null});case o.REPLACE_POLL:return Object.assign({},e,{poll:t.state});case i:return t.state;case s:return Object.assign({},e,t.data);case c:var r=Object.assign({},e.acl,t.data);return Object.assign({},e,{acl:r});default:return e}},r.UPDATE_THREAD_ACL=r.UPDATE_THREAD=r.REPLACE_THREAD=r.RELEASE_THREAD=r.BUSY_THREAD=void 0;var n,a=(n=e("moment"))&&n.__esModule?n:{default:n},o=e("./poll");var l="BUSY_THREAD";r.BUSY_THREAD=l;var u="RELEASE_THREAD";r.RELEASE_THREAD=u;var i="REPLACE_THREAD";r.REPLACE_THREAD=i;var s="UPDATE_THREAD";r.UPDATE_THREAD=s;var c="UPDATE_THREAD_ACL";function f(e){return Object.assign({},e,{started_on:(0,a.default)(e.started_on),last_post_on:(0,a.default)(e.last_post_on),best_answer_marked_on:e.best_answer_marked_on?(0,a.default)(e.best_answer_marked_on):null,isBusy:!1})}r.UPDATE_THREAD_ACL=c},{"./poll":352,moment:"moment"}],361:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.append=function(e,t){return{type:l,items:e,sorting:t}},r.deleteThread=function(e){return{type:u,thread:e}},r.filterThreads=function(e,t){return{type:i,category:e,categoriesMap:t}},r.hydrate=function(e){return{type:s,items:e}},r.patch=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return{type:c,thread:e,patch:t,sorting:r}},r.sort=function(e){return{type:f,sorting:e}},r.getThreadModerationOptions=p,r.hydrateThread=m,r.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(r.type){case l:return(0,a.default)(r.items.map(m),e).sort(r.sorting);case u:return e.filter(function(e){return e.id!==r.thread.id});case i:return e.filter(function(e){var t=r.categoriesMap[e.category];return t.lft>=r.category.lft&&t.rght<=r.category.rght||2==e.weight});case s:return r.items.map(m);case c:var t=e.map(function(e){return e.id===r.thread.id?Object.assign({},e,r.patch):e});return r.sorting?t.sort(r.sorting):t;case f:return e.sort(r.sorting);default:return e}},r.MODERATION_PERMISSIONS=r.SORT_THREADS=r.PATCH_THREAD=r.HYDRATE_THREADS=r.FILTER_THREADS=r.DELETE_THREAD=r.APPEND_THREADS=void 0;var n=o(e("moment")),a=o(e("../utils/concat-unique"));function o(e){return e&&e.__esModule?e:{default:e}}var l="APPEND_THREADS";r.APPEND_THREADS=l;var u="DELETE_THREAD";r.DELETE_THREAD=u;var i="FILTER_THREADS";r.FILTER_THREADS=i;var s="HYDRATE_THREADS";r.HYDRATE_THREADS=s;var c="PATCH_THREAD";r.PATCH_THREAD=c;var f="SORT_THREADS";r.SORT_THREADS=f;var d=["can_announce","can_approve","can_close","can_hide","can_move","can_merge","can_pin","can_review"];function p(t){var r=[];return d.forEach(function(e){t[e]&&r.push(e)}),r}function m(e){return Object.assign({},e,{started_on:(0,n.default)(e.started_on),last_post_on:(0,n.default)(e.last_post_on),moderation:p(e.acl)})}r.MODERATION_PERMISSIONS=d},{"../utils/concat-unique":381,moment:"moment"}],362:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.doTick=function(){return{type:a}},r.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:n;return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:null).type===a?Object.assign({},e,{tick:e.tick+1}):e},r.TICK=r.initialState=void 0;var n={tick:0};r.initialState=n;var a="TICK";r.TICK=a},{}],363:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addNameChange=function(e,t,r){return{type:u,change:e,user:t,changedBy:r}},r.append=function(e){return{type:i,items:e}},r.hydrate=function(e){return{type:s,items:e}},r.hydrateNamechange=c,r.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case u:var r=e.slice();return r.unshift({id:Math.floor(Date.now()/1e3),changed_by:t.changedBy,changed_by_username:t.changedBy.username,changed_on:(0,n.default)(),new_username:t.change.username,old_username:t.user.username}),r;case i:return(0,o.default)(e,t.items.map(c));case s:return t.items.map(c);case a.UPDATE_AVATAR:return e.map(function(e){return(e=Object.assign({},e)).changed_by&&e.changed_by.id===t.userId&&(e.changed_by=Object.assign({},e.changed_by,{avatars:t.avatars})),e});case a.UPDATE_USERNAME:return e.map(function(e){return(e=Object.assign({},e)).changed_by&&e.changed_by.id===t.userId&&(e.changed_by=Object.assign({},e.changed_by,{username:t.username,slug:t.slug})),Object.assign({},e)});default:return e}},r.HYDRATE_HISTORY=r.APPEND_HISTORY=r.ADD_NAME_CHANGE=void 0;var n=l(e("moment")),a=e("./users"),o=l(e("../utils/concat-unique"));function l(e){return e&&e.__esModule?e:{default:e}}var u="ADD_NAME_CHANGE";r.ADD_NAME_CHANGE=u;var i="APPEND_HISTORY";r.APPEND_HISTORY=i;var s="HYDRATE_HISTORY";function c(e){return Object.assign({},e,{changed_on:(0,n.default)(e.changed_on)})}r.HYDRATE_HISTORY=s},{"../utils/concat-unique":381,"./users":364,moment:"moment"}],364:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.append=function(e){return{type:l,items:e}},r.hydrate=function(e){return{type:u,items:e}},r.hydrateStatus=c,r.hydrateUser=f,r.updateAvatar=function(e,t){return{type:i,userId:e.id,avatars:t}},r.updateUsername=function(e,t,r){return{type:s,userId:e.id,username:t,slug:r}},r.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case l:return(0,a.default)(e,t.items.map(f));case u:return t.items.map(f);case i:return e.map(function(e){return(e=Object.assign({},e)).id===t.userId&&(e.avatars=t.avatars),e});default:return e}},r.UPDATE_USERNAME=r.UPDATE_AVATAR=r.HYDRATE_USERS=r.APPEND_USERS=void 0;var n=o(e("moment")),a=o(e("../utils/concat-unique"));function o(e){return e&&e.__esModule?e:{default:e}}var l="APPEND_USERS";r.APPEND_USERS=l;var u="HYDRATE_USERS";r.HYDRATE_USERS=u;var i="UPDATE_AVATAR";r.UPDATE_AVATAR=i;var s="UPDATE_USERNAME";function c(e){return e?Object.assign({},e,{last_click:e.last_click?(0,n.default)(e.last_click):null,banned_until:e.banned_until?(0,n.default)(e.banned_until):null}):null}function f(e){return Object.assign({},e,{joined_on:(0,n.default)(e.joined_on),status:c(e.status)})}r.UPDATE_USERNAME=s},{"../utils/concat-unique":381,moment:"moment"}],365:[function(e,t,r){"use strict";function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Ajax=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cookieName=null,this._csrfToken=null,this._locks={}}var t,r,n;return t=e,(r=[{key:"init",value:function(e){this._cookieName=e}},{key:"getCsrfToken",value:function(){if(-1===document.cookie.indexOf(this._cookieName))return null;var e=new RegExp(this._cookieName+"=([^;]*)"),t=document.cookie.match(e)[0];return t?t.split("=")[1]:null}},{key:"request",value:function(n,a,o){var l=this;return new Promise(function(t,r){var e={url:a,method:n,headers:{"X-CSRFToken":l.getCsrfToken()},data:o?JSON.stringify(o):null,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){t(e)},error:function(e){var t=e.responseJSON||{};t.status=e.status,0===t.status&&(t.detail=gettext("Lost connection with application.")),404===t.status&&(t.detail&&"NOT FOUND"!==t.detail||(t.detail=gettext("Action link is invalid."))),500!==t.status||t.detail||(t.detail=gettext("Unknown error has occured.")),t.statusText=e.statusText,r(t)}};$.ajax(e)})}},{key:"get",value:function(o,e,l){if(e&&(o+="?"+$.param(e)),l){var u=this;return this._locks[l]&&(this._locks[l].url=o),this._locks[l]&&this._locks[l].waiter?{then:function(){}}:this._locks[l]&&this._locks[l].wait?(this._locks[l].waiter=!0,new Promise(function(n,a){window.setTimeout(function(){!function t(r){u._locks[l].wait?window.setTimeout(function(){t(r)},300):u._locks[l].url!==r?t(u._locks[l].url):(u._locks[l].waiter=!1,u.request("GET",u._locks[l].url).then(function(e){u._locks[l].url===r?n(e):(u._locks[l].waiter=!0,t(u._locks[l].url))},function(e){u._locks[l].url===r?a(e):(u._locks[l].waiter=!0,t(u._locks[l].url))}))}(o)},300)})):(this._locks[l]={url:o,wait:!0,waiter:!1},new Promise(function(t,r){u.request("GET",o).then(function(e){u._locks[l].wait=!1,u._locks[l].url===o&&t(e)},function(e){u._locks[l].wait=!1,u._locks[l].url===o&&r(e)})}))}return this.request("GET",o)}},{key:"post",value:function(e,t){return this.request("POST",e,t)}},{key:"patch",value:function(e,t){return this.request("PATCH",e,t)}},{key:"put",value:function(e,t){return this.request("PUT",e,t)}},{key:"delete",value:function(e,t){return this.request("DELETE",e,t)}},{key:"upload",value:function(n,a,o){var l=this;return new Promise(function(t,r){var e={url:n,method:"POST",headers:{"X-CSRFToken":l.getCsrfToken()},data:a,contentType:!1,processData:!1,xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){e.lengthComputable&&o(Math.round(e.loaded/e.total*100))},!1),e},success:function(e){t(e)},error:function(e){var t=e.responseJSON||{};t.status=e.status,0===t.status&&(t.detail=gettext("Lost connection with application.")),413!==t.status||t.detail||(t.detail=gettext("Upload was rejected by server as too large.")),404===t.status&&(t.detail&&"NOT FOUND"!==t.detail||(t.detail=gettext("Action link is invalid."))),500!==t.status||t.detail||(t.detail=gettext("Unknown error has occured.")),t.statusText=e.statusText,r(t)}};$.ajax(e)})}}])&&a(t.prototype,r),n&&a(t,n),e}(),o=new(r.Ajax=n);r.default=o},{}],366:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Auth=void 0;var a=e("../reducers/auth");function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"init",value:function(e,t,r){this._store=e,this._local=t,this._modal=r,this.syncSession(),this.watchState()}},{key:"syncSession",value:function(){var e=this._store.getState().auth;e.isAuthenticated?this._local.set("auth",{isAuthenticated:!0,username:e.user.username}):this._local.set("auth",{isAuthenticated:!1})}},{key:"watchState",value:function(){var t=this,r=this._store.getState().auth;this._local.watch("auth",function(e){e.isAuthenticated?t._store.dispatch((0,a.signIn)({username:e.username})):r.isAuthenticated&&t._store.dispatch((0,a.signOut)())}),this._modal.hide()}},{key:"signIn",value:function(e){this._store.dispatch((0,a.signIn)(e)),this._local.set("auth",{isAuthenticated:!0,username:e.username}),this._modal.hide()}},{key:"signOut",value:function(){this._store.dispatch((0,a.signOut)()),this._local.set("auth",{isAuthenticated:!1}),this._modal.hide()}},{key:"softSignOut",value:function(){this._store.dispatch((0,a.signOut)(!0)),this._local.set("auth",{isAuthenticated:!1}),this._modal.hide()}}])&&o(t.prototype,r),n&&o(t,n),e}(),l=new(r.Auth=n);r.default=l},{"../reducers/auth":350}],367:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Captcha=r.ReCaptcha=r.ReCaptchaComponent=r.QACaptcha=r.NoCaptcha=r.BaseCaptcha=void 0;var n=o(e("react")),a=o(e("../components/form-group"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e}var m=function(){function e(){f(this,e)}return p(e,[{key:"init",value:function(e,t,r,n){this._context=e,this._ajax=t,this._include=r,this._snackbar=n}}]),e}();r.BaseCaptcha=m;var h=function(){l(t,m);var e=s(t);function t(){return f(this,t),e.apply(this,arguments)}return p(t,[{key:"load",value:function(){return new Promise(function(e){e()})}},{key:"validator",value:function(){return null}},{key:"component",value:function(){return null}}]),t}();r.NoCaptcha=h;var y=function(){l(t,m);var e=s(t);function t(){return f(this,t),e.apply(this,arguments)}return p(t,[{key:"load",value:function(){var r=this;return new Promise(function(t,e){r._ajax.get(r._context.get("CAPTCHA_API")).then(function(e){r.question=e.question,r.helpText=e.help_text,t()},function(){r._snackbar.error(gettext("Failed to load CAPTCHA.")),e()})})}},{key:"validator",value:function(){return[]}},{key:"component",value:function(e){return n.default.createElement(a.default,{label:this.question,for:"id_captcha",labelClass:e.labelClass||"",controlClass:e.controlClass||"",validation:e.form.state.errors.captcha,helpText:this.helpText||null},n.default.createElement("input",{"aria-describedby":"id_captcha_status",className:"form-control",disabled:e.form.state.isLoading,id:"id_captcha",onChange:e.form.bindInput("captcha"),type:"text",value:e.form.state.captcha}))}}]),t}();r.QACaptcha=y;var b=function(){l(t,n.default.Component);var e=s(t);function t(){return f(this,t),e.apply(this,arguments)}return p(t,[{key:"componentDidMount",value:function(){var t=this;grecaptcha.render("recaptcha",{sitekey:this.props.siteKey,callback:function(e){t.props.binding({target:{value:e}})}})}},{key:"render",value:function(){return n.default.createElement("div",{id:"recaptcha"})}}]),t}();r.ReCaptchaComponent=b;var v=function(){l(t,m);var e=s(t);function t(){return f(this,t),e.apply(this,arguments)}return p(t,[{key:"load",value:function(){return this._include.include("https://www.google.com/recaptcha/api.js",!0),new Promise(function(t){!function e(){"undefined"==typeof grecaptcha?window.setTimeout(function(){e()},200):t()}()})}},{key:"validator",value:function(){return[]}},{key:"component",value:function(e){return n.default.createElement(a.default,{label:gettext("Please solve the quick test"),for:"id_captcha",labelClass:e.labelClass||"",controlClass:e.controlClass||"",validation:e.form.state.errors.captcha,helpText:gettext("This test helps us prevent automated spam registrations on our site.")},n.default.createElement(b,{binding:e.form.bindInput("captcha"),siteKey:this._context.get("SETTINGS").recaptcha_site_key}))}}]),t}();r.ReCaptcha=v;var g=function(){function e(){f(this,e)}return p(e,[{key:"init",value:function(e,t,r,n){switch(e.get("SETTINGS").captcha_type){case"no":this._captcha=new h;break;case"qa":this._captcha=new y;break;case"re":this._captcha=new v}this._captcha.init(e,t,r,n)}},{key:"load",value:function(){return this._captcha.load()}},{key:"validator",value:function(){return this._captcha.validator()}},{key:"component",value:function(e){return this._captcha.component(e)}}]),e}(),_=new(r.Captcha=g);r.default=_},{"../components/form-group":55,react:"react"}],368:[function(e,t,r){"use strict";function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Include=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"init",value:function(e){this._staticUrl=e,this._included=[]}},{key:"include",value:function(e,t){var r=1<arguments.length&&void 0!==t&&t;-1===this._included.indexOf(e)&&(this._included.push(e),this._include(e,r))}},{key:"_include",value:function(e,t){$.ajax({url:(t?"":this._staticUrl)+e,cache:!0,dataType:"script"})}}])&&a(t.prototype,r),n&&a(t,n),e}(),o=new(r.Include=n);r.default=o},{}],369:[function(e,t,r){"use strict";function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.LocalStorage=void 0;var o=window.localStorage,n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"init",value:function(e){var n=this;this._prefix=e,this._watchers=[],window.addEventListener("storage",function(t){var r=JSON.parse(t.newValue);n._watchers.forEach(function(e){e.key===t.key&&t.oldValue!==t.newValue&&e.callback(r)})})}},{key:"set",value:function(e,t){o.setItem(this._prefix+e,JSON.stringify(t))}},{key:"get",value:function(e){var t=o.getItem(this._prefix+e);return t?JSON.parse(t):null}},{key:"watch",value:function(e,t){this._watchers.push({key:this._prefix+e,callback:t})}}])&&a(t.prototype,r),n&&a(t,n),e}(),l=new(r.LocalStorage=n);r.default=l},{}],370:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.MobileNavbarDropdown=void 0;var n,a=(n=e("../utils/mount-component"))&&n.__esModule?n:{default:n};function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"init",value:function(e){this._element=e,this._component=null}},{key:"show",value:function(e){this._component===e?this.hide():(this._component=e,(0,a.default)(e,this._element.id),$(this._element).addClass("open"))}},{key:"showConnected",value:function(e,t){this._component===e?this.hide():(this._component=e,(0,a.default)(t,this._element.id,!0),$(this._element).addClass("open"))}},{key:"hide",value:function(){$(this._element).removeClass("open"),this._component=null}}])&&o(t.prototype,r),n&&o(t,n),e}(),u=new(r.MobileNavbarDropdown=l);r.default=u},{"../utils/mount-component":386}],371:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Modal=void 0;var a=n(e("react-dom")),o=n(e("../utils/mount-component"));function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"init",value:function(e){var t=this;this._element=e,this._modal=$(e).modal({show:!1}),this._modal.on("hidden.bs.modal",function(){a.default.unmountComponentAtNode(t._element)})}},{key:"show",value:function(e){(0,o.default)(e,this._element.id),this._modal.modal("show")}},{key:"hide",value:function(){this._modal.modal("hide")}}])&&l(t.prototype,r),n&&l(t,n),e}(),i=new(r.Modal=u);r.default=i},{"../utils/mount-component":386,"react-dom":"react-dom"}],372:[function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.parseYoutubeUrl=u,r.cleanUrl=i,r.getVideoIdFromUrl=s,r.default=r.OneBox=void 0;var a=new RegExp("^.*(?:(?:youtu.be/|v/|vi/|u/w/|embed/)|(?:(?:watch)??v(?:i)?=|&v(?:i)?=))([^#&?]*).*"),o=function(){function a(){var e,t,r,n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r=function(e){e&&(n.highlightCode(e),n.embedYoutubePlayers(e))},(t="render")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,this._youtube={}}var e,t,r;return e=a,(t=[{key:"highlightCode",value:function(e){for(var t=e.querySelectorAll("pre>code"),r=0;r<t.length;r++){var n=t[r];hljs.highlightBlock(n)}}},{key:"embedYoutubePlayers",value:function(e){for(var t=e.querySelectorAll("p>a"),r=0;r<t.length;r++){var n=t[r],a=1===n.parentNode.childNodes.length;this._youtube[n.href]||(this._youtube[n.href]=u(n.href));var o=this._youtube[n.href];a&&o&&!1!==o.data&&this.swapYoutubePlayer(n,o)}}},{key:"swapYoutubePlayer",value:function(e,t){var r="https://www.youtube.com/embed/";r+=t.video,r+="?rel=0",t.start&&(r+="&start="+t.start);var n=$('<iframe class="embed-responsive-item" src="'+r+'" allowfullscreen></iframe>');$(e).replaceWith(n),n.wrap('<div class="embed-responsive embed-responsive-16by9"></div>')}}])&&n(e.prototype,t),r&&n(e,r),a}(),l=new(r.OneBox=o);function u(e){var t=i(e),r=s(t);if(!r)return null;var n,a,o=0;return 0<t.indexOf("?")&&((n=t.substr(t.indexOf("?")+1).split("&").filter(function(e){return"t="===e.substr(0,2)})[0])&&("s"===(a=n.substr(2).split("m"))[0].substr(-1)?o+=parseInt(a[0].substr(0,a[0].length-1)):(o+=60*parseInt(a[0]),a[1]&&"s"===a[1].substr(-1)&&(o+=parseInt(a[1].substr(0,a[1].length-1)))))),{start:o,video:r}}function i(e){var t=e;return"https://"===e.substr(0,8)?t=t.substr(8):"http://"===e.substr(0,7)&&(t=t.substr(7)),"www."===t.substr(0,4)&&(t=t.substr(4)),t}function s(e){if(-1===e.indexOf("youtu"))return null;var t=e.match(a);return t?t[1]:null}r.default=l},{}],373:[function(e,t,r){"use strict";function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.PageTitle=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"init",value:function(e,t){this._indexTitle=e,this._forumName=t}},{key:"set",value:function(e){var t;e?("string"==typeof e&&(e={title:e}),t=e.title,1<e.page&&(t+=" ("+interpolate(gettext("page: %(page)s"),{page:e.page},!0)+")"),e.parent&&(t+=" | "+e.parent),document.title=t+" | "+this._forumName):document.title=this._indexTitle||this._forumName}}])&&a(t.prototype,r),n&&a(t,n),e}(),o=new(r.PageTitle=n);r.default=o},{}],374:[function(e,t,r){"use strict";function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Polls=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"init",value:function(e,t){this._ajax=e,this._snackbar=t,this._polls={}}},{key:"start",value:function(t){var r=this;this.stop(t.poll);function n(){r._polls[t.poll]=t,r._ajax.get(t.url,t.data||null).then(function(e){r._polls[t.poll]._stopped||(t.update(e),r._polls[t.poll].timeout=window.setTimeout(n,t.frequency))},function(e){r._polls[t.poll]._stopped||(t.error?t.error(e):r._snackbar.apiError(e))})}t.delayed?this._polls[t.poll]={timeout:window.setTimeout(n,t.frequency)}:n()}},{key:"stop",value:function(e){this._polls[e]&&(window.clearTimeout(this._polls[e].timeout),this._polls[e]._stopped=!0)}}])&&a(t.prototype,r),n&&a(t,n),e}(),o=new(r.Polls=n);r.default=o},{}],375:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Posting=void 0;var n=a(e("react")),o=a(e("react-dom")),l=e("../components/poll"),u=a(e("../components/posting")),i=a(e("../utils/mount-component"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function a(){var e,t,r,n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r=function(){n._isOpen&&!n._isClosing&&(n._isClosing=!0,n._placeholder.removeClass("slide-in"),window.setTimeout(function(){o.default.unmountComponentAtNode(document.getElementById("posting-mount")),n._isClosing=!1,n._isOpen=!1},300))},(t="close")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}var e,t,r;return e=a,(t=[{key:"init",value:function(e,t,r){this._ajax=e,this._snackbar=t,this._placeholder=$(r),this._mode=null,this._isOpen=!1,this._isClosing=!1}},{key:"open",value:function(e){var t;!1===this._isOpen?(this._mode=e.mode,this._isOpen=e.submit,this._realOpen(e)):this._isOpen!==e.submit?(t=gettext("You are already working on other message. Do you want to discard it?"),"POLL"==this._mode&&(t=gettext("You are already working on a poll. Do you want to discard it?")),confirm(t)&&(this._mode=e.mode,this._isOpen=e.submit,this._realOpen(e))):"REPLY"==this._mode&&"REPLY"==e.mode&&this._realOpen(e)}},{key:"_realOpen",value:function(e){"POLL"==e.mode?(0,i.default)(n.default.createElement(l.PollForm,e),"posting-mount"):(0,i.default)(n.default.createElement(u.default,e),"posting-mount"),this._placeholder.addClass("slide-in"),$("html, body").animate({scrollTop:this._placeholder.offset().top},1e3)}}])&&s(e.prototype,t),r&&s(e,r),a}(),f=new(r.Posting=c);r.default=f},{"../components/poll":106,"../components/posting":134,"../utils/mount-component":386,react:"react","react-dom":"react-dom"}],376:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Snackbar=void 0;var a=e("../reducers/snackbar");function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"init",value:function(e){this._store=e,this._timeout=null}},{key:"alert",value:function(e,t){var r=this;this._timeout?(window.clearTimeout(this._timeout),this._store.dispatch((0,a.hideSnackbar)()),this._timeout=window.setTimeout(function(){r._timeout=null,r.alert(e,t)},300)):(this._store.dispatch((0,a.showSnackbar)(e,t)),this._timeout=window.setTimeout(function(){r._store.dispatch((0,a.hideSnackbar)()),r._timeout=null},5e3))}},{key:"info",value:function(e){this.alert(e,"info")}},{key:"success",value:function(e){this.alert(e,"success")}},{key:"warning",value:function(e){this.alert(e,"warning")}},{key:"error",value:function(e){this.alert(e,"error")}},{key:"apiError",value:function(e){var t=(t=e.detail)||(404===e.status?gettext("Action link is invalid."):gettext("Unknown error has occured."));403===e.status&&"Permission denied"===t&&(t=gettext("You don't have permission to perform this action.")),this.error(t)}}])&&o(t.prototype,r),n&&o(t,n),e}(),l=new(r.Snackbar=n);r.default=l},{"../reducers/snackbar":359}],377:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.StoreWrapper=void 0;var a=e("redux");function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._store=null,this._reducers={},this._initialState={}}var t,r,n;return t=e,(r=[{key:"addReducer",value:function(e,t,r){this._reducers[e]=t,this._initialState[e]=r}},{key:"init",value:function(){this._store=(0,a.createStore)((0,a.combineReducers)(this._reducers),this._initialState)}},{key:"getStore",value:function(){return this._store}},{key:"getState",value:function(){return this._store.getState()}},{key:"dispatch",value:function(e){return this._store.dispatch(e)}}])&&o(t.prototype,r),n&&o(t,n),e}(),l=new(r.StoreWrapper=n);r.default=l},{redux:"redux"}],378:[function(e,t,r){"use strict";function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Zxcvbn=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"init",value:function(e){this._include=e,this._isLoaded=!1}},{key:"scorePassword",value:function(e,t){return this._isLoaded?zxcvbn(e,t).score:0}},{key:"load",value:function(){return this._isLoaded?this._loadedPromise():(this._include.include("misago/js/zxcvbn.js"),this._loadingPromise())}},{key:"_loadingPromise",value:function(){var o=this;return new Promise(function(n,a){!function e(t){var r=0<arguments.length&&void 0!==t?t:0;200<(r+=1)?a():"undefined"==typeof zxcvbn?window.setTimeout(function(){e(r)},200):(o._isLoaded=!0,n())}()})}},{key:"_loadedPromise",value:function(){return new Promise(function(e){e()})}}])&&a(t.prototype,r),n&&a(t,n),e}(),o=new(r.Zxcvbn=n);r.default=o},{}],379:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){{var r;o.default.render(a.default.createElement(l.Provider,{store:s.default.getStore()},a.default.createElement(f,{message:e.message,expires:e.expires_on?(0,n.default)(e.expires_on):null})),document.getElementById("page-mount")),void 0!==t&&!t||(r=i.default.get("SETTINGS").forum_name,document.title=gettext("You are banned")+" | "+r,window.history.pushState({},"",i.default.get("BANNED_URL")))}};var n=c(e("moment")),a=c(e("react")),o=c(e("react-dom")),l=e("react-redux"),u=c(e("../components/banned-page")),i=c(e("./..")),s=c(e("../services/store"));function c(e){return e&&e.__esModule?e:{default:e}}var f=(0,l.connect)(function(e){return e.tick})(u.default)},{"../components/banned-page":7,"../services/store":377,"./..":302,moment:"moment",react:"react","react-dom":"react-dom","react-redux":"react-redux"}],380:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=[],a=[];if(e.forEach(function(e){a.push(e),a.length===t&&(n.push(a),a=[])}),!1!==r&&0<a.length&&a.length<t)for(var o=a.length;o<t;o++)a.push(r);a.length&&n.push(a);return n}},{}],381:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r=[];return e.concat(t).filter(function(e){return-1===r.indexOf(e.id)&&(r.push(e.id),!0)})}},{}],382:[function(e,t,r){"use strict";function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this._callback=e,this._count=t}var e,t,n;return e=r,(t=[{key:"count",value:function(){--this._count,0===this._count&&this._callback()}}])&&a(e.prototype,t),n&&a(e,n),r}();r.default=n},{}],383:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return e.replace(/[&<>"']/g,function(e){return n[e]})};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"}},{}],384:[function(e,t,r){"use strict";function n(e){return e.toFixed(1)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return 1073741824<e?n(e/1073741824)+" GB":1048576<e?n(e/1048576)+" MB":1024<e?n(e/1024)+" KB":n(e)+" B"},r.roundSize=n},{}],385:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n.test($.trim(e))};var n=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i")},{}],386:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],n=document.getElementById(t),a=e.props?e:o.default.createElement(e,null);n&&(r?l.default.render(o.default.createElement(u.Provider,{store:i.default.getStore()},a),n):l.default.render(a,n))};var o=n(e("react")),l=n(e("react-dom")),u=e("react-redux"),i=n(e("../services/store"));function n(e){return e&&e.__esModule?e:{default:e}}},{"../services/store":377,react:"react","react-dom":"react-dom","react-redux":"react-redux"}],387:[function(e,t,r){"use strict";function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.isOrdered=!1,this._items=e||[]}var e,r,n;return e=t,(r=[{key:"add",value:function(e,t,r){this._items.push({key:e,item:t,after:r&&r.after||null,before:r&&r.before||null})}},{key:"get",value:function(e,t){for(var r=0;r<this._items.length;r++)if(this._items[r].key===e)return this._items[r].item;return t}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"values",value:function(){for(var e=[],t=0;t<this._items.length;t++)e.push(this._items[t].item);return e}},{key:"order",value:function(e){return this.isOrdered||(this._items=this._order(this._items),this.isOrdered=!0),e||void 0===e?this.values():this._items}},{key:"orderedValues",value:function(){return this.order(!0)}},{key:"_order",value:function(e){var t=[];e.forEach(function(e){t.push(e.key)});var r=[],n=[];function a(e){var t=-1;-1===n.indexOf(e.key)&&(e.after?-1!==(t=n.indexOf(e.after))&&(t+=1):e.before&&(t=n.indexOf(e.before)),-1!==t&&(r.splice(t,0,e),n.splice(t,0,e.key)))}e.forEach(function(e){e.after||e.before||(r.push(e),n.push(e.key))}),e.forEach(function(e){"_end"===e.before&&(r.push(e),n.push(e.key))});for(var o=200;0<o&&t.length!==n.length;)--o,e.forEach(a);return r}}])&&a(e.prototype,r),n&&a(e,n),t}();r.default=n},{}],388:[function(e,t,r){"use strict";function a(e,t){return Math.floor(Math.random()*(t-e+1))+e}Object.defineProperty(r,"__esModule",{value:!0}),r.int=a,r.range=function(e,t){for(var r=new Array(a(e,t)),n=0;n<r.length;n++)r[n]=n;return r}},{}],389:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){window.scrollTo(0,0)}},{}],390:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(r){var e={component:r.component||null,childRoutes:[]};r.root?e.childRoutes=[{path:r.root,onEnter:function(e,t){t(null,r.paths[0].path)}}].concat(r.paths):e.childRoutes=r.paths;a.default.render(n.default.createElement(o.Provider,{store:u.default.getStore()},n.default.createElement(l.Router,{routes:e,history:l.browserHistory})),s)};var n=i(e("react")),a=i(e("react-dom")),o=e("react-redux"),l=e("react-router"),u=i(e("../services/store"));function i(e){return e&&e.__esModule?e:{default:e}}var s=document.getElementById("page-mount")},{"../services/store":377,react:"react","react-dom":"react-dom","react-redux":"react-redux","react-router":"react-router"}],391:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.push=function(e,t){{if(-1!==e.indexOf(t))return e;var r=e.slice();return r.push(t),r}},r.remove=function(e,t){return 0<=e.indexOf(t)?e.filter(function(e){return e!==t}):e},r.toggle=function(e,t){{if(-1!==e.indexOf(t))return e.filter(function(e){return e!==t});var r=e.slice();return r.push(t),r}}},{}],392:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if(e=(e+"").toLowerCase(),(t=(t+"").toLowerCase()).length<=0)return 0;var r=0,n=0,a=t.length;for(;0<=(n=e.indexOf(t,n));)r+=1,n+=a;return r}},{}],393:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.required=o,r.requiredTermsOfService=function(e){var t=gettext("You have to accept the terms of service.");return o(e||t)},r.requiredPrivacyPolicy=function(e){var t=gettext("You have to accept the privacy policy.");return o(e||t)},r.email=function(t){return function(e){if(!n.test(e))return t||gettext("Enter a valid email address.")}},r.minLength=l,r.maxLength=u,r.usernameMinLength=function(e){return l(e,function(e){return ngettext("Username must be at least %(limit_value)s character long.","Username must be at least %(limit_value)s characters long.",e)})},r.usernameMaxLength=function(e){return u(e,function(e){return ngettext("Username cannot be longer than %(limit_value)s character.","Username cannot be longer than %(limit_value)s characters.",e)})},r.usernameContent=function(){return function(e){if(!a.test($.trim(e)))return gettext("Username can only contain latin alphabet letters and digits.")}},r.passwordMinLength=function(n){return function(e){var t=e.length;if(t<n){var r=ngettext("Valid password must be at least %(limit_value)s character long.","Valid password must be at least %(limit_value)s characters long.",n);return interpolate(r,{limit_value:n,show_value:t},!0)}}};var n=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,a=new RegExp("^[0-9a-z]+$","i");function o(t){return function(e){if(!1===e||null===e||0===$.trim(e).length)return t||gettext("This field is required.")}}function l(n,a){return function(e){var t="",r=$.trim(e).length;if(r<n)return t=a?a(n,r):ngettext("Ensure this value has at least %(limit_value)s character (it has %(show_value)s).","Ensure this value has at least %(limit_value)s characters (it has %(show_value)s).",n),interpolate(t,{limit_value:n,show_value:r},!0)}}function u(n,a){return function(e){var t="",r=$.trim(e).length;if(n<r)return t=a?a(n,r):ngettext("Ensure this value has at most %(limit_value)s character (it has %(show_value)s).","Ensure this value has at most %(limit_value)s characters (it has %(show_value)s).",n),interpolate(t,{limit_value:n,show_value:r},!0)}}},{}]},{},[302,303,304,305,306,323,324,325,326,327,328,329,330,346,347,348,349,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345]);
//# sourceMappingURL=misago.js.map
