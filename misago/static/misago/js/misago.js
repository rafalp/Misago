(()=>{var e,t,a,n={39602:()=>{var e=document.getElementById("misago-ajax-indicator"),t=0,a=null;function n(t){a&&window.clearTimeout(a),t?(e.classList.add("busy"),e.classList.remove("complete")):(e.classList.remove("busy"),e.classList.add("complete"),a=setTimeout((function(){e.classList.remove("complete")}),1500))}document.addEventListener("htmx:beforeSend",(function(){n(0!==(t+=1))})),document.addEventListener("htmx:afterOnLoad",(function(){n(0!=(t-=1))})),document.addEventListener("htmx:sendError",(function(){n(0!=(t-=1))}))},60642:(e,t,a)=>{"use strict";a.d(t,{b:()=>m,D:()=>f});var n=a(15861),i=a(15671),s=a(43144),o=a(97326),r=a(79340),l=a(6215),c=a(61120),u=a(4942),d=a(64687),p=a.n(d),h=a(57588),v=a.n(h);var m=function(e){(0,r.Z)(h,e);var t,a,d=(t=h,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function h(e){var t;return(0,i.Z)(this,h),t=d.call(this,e),(0,u.Z)((0,o.Z)(t),"hasCache",(function(e){return t.props.cache&&t.props.cache[e]})),(0,u.Z)((0,o.Z)(t),"getCache",function(){var e=(0,n.Z)(p().mark((function e(a){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props.cache[a],t.setState({loading:!1,error:null,data:n}),!t.props.onData){e.next=5;break}return e.next=5,t.props.onData(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,u.Z)((0,o.Z)(t),"setCache",(function(e,a){t.props.cache&&(t.props.cache[e]=a)})),(0,u.Z)((0,o.Z)(t),"request",(function(e){t.setState({loading:!0}),fetch(e,{method:"GET",credentials:"include",signal:t.signal}).then(function(){var a=(0,n.Z)(p().mark((function a(n){var i,s;return p().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e!==t.props.url){a.next=18;break}if(200!=n.status){a.next=12;break}return a.next=4,n.json();case 4:if(i=a.sent,t.setState({loading:!1,error:null,data:i}),t.setCache(e,i),!t.props.onData){a.next=10;break}return a.next=10,t.props.onData(i);case 10:a.next=18;break;case 12:if(s={status:n.status},"application/json"!==n.headers.get("Content-Type")){a.next=17;break}return a.next=16,n.json();case 16:s.data=a.sent;case 17:t.setState({loading:!1,error:s});case 18:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),(function(a){e===t.props.url&&t.setState({loading:!1,error:{status:0,rejection:a}})}))})),(0,u.Z)((0,o.Z)(t),"refetch",(function(){t.request(t.props.url)})),(0,u.Z)((0,o.Z)(t),"update",(function(e){t.setState((function(t){return{data:e(t.data)}}))})),t.state={data:null,loading:!1,error:null},t.controller=new AbortController,t.signal=t.controller.signal,t}return(0,s.Z)(h,[{key:"componentDidMount",value:function(){this.props.url&&!this.props.disabled&&this.request(this.props.url)}},{key:"componentDidUpdate",value:function(e){var t=this.props.url,a=t&&t!==e.url,n=this.props.disabled!=e.disabled;(a||n)&&(this.props.disabled?this.controller.abort():this.hasCache(t)?this.getCache(t):(this.controller.abort(),this.controller=new AbortController,this.signal=this.controller.signal,this.request(t)))}},{key:"componentWillUnmount",value:function(){this.controller.abort()}},{key:"render",value:function(){return this.props.children(Object.assign({refetch:this.refetch,update:this.update},this.state))}}]),h}(v().Component);var f=function(e){(0,r.Z)(h,e);var t,a,d=(t=h,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function h(e){var t;return(0,i.Z)(this,h),t=d.call(this,e),(0,u.Z)((0,o.Z)(t),"mutate",(function(e){t.setState({loading:!0}),fetch(t.props.url,{method:t.props.method||"POST",credentials:"include",headers:Z(e),body:g(e)}).then(function(){var a=(0,n.Z)(p().mark((function a(n){var i,s;return p().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(200!=n.status){a.next=10;break}return a.next=3,n.json();case 3:if(i=a.sent,t.setState({loading:!1,data:i}),!e.onSuccess){a.next=8;break}return a.next=8,e.onSuccess(i);case 8:a.next=26;break;case 10:if(204!=n.status){a.next=17;break}if(t.setState({loading:!1}),!e.onSuccess){a.next=15;break}return a.next=15,e.onSuccess();case 15:a.next=26;break;case 17:if(s={status:n.status},"application/json"!==n.headers.get("Content-Type")){a.next=22;break}return a.next=21,n.json();case 21:s.data=a.sent;case 22:if(t.setState({loading:!1,error:s}),!e.onError){a.next=26;break}return a.next=26,e.onError(s);case 26:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),function(){var a=(0,n.Z)(p().mark((function a(n){var i;return p().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i={status:0,rejection:n},t.setState({loading:!1,error:i}),!e.onError){a.next=5;break}return a.next=5,e.onError(i);case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())})),t.state={data:null,loading:!1,error:null},t}return(0,s.Z)(h,[{key:"render",value:function(){return this.props.children(this.mutate,this.state)}}]),h}(v().Component);function Z(e){return e.json?{"Content-Type":"application/json; charset=utf-8","X-CSRFToken":b()}:{"X-CSRFToken":b()}}function g(e){if(e.json)return JSON.stringify(e.json)}function b(){var e=window.misago_csrf;if(-1!==document.cookie.indexOf(e)){var t=new RegExp(e+"=([^;]*)"),a=document.cookie.match(t)[0];return a?a.split("=")[1]:null}return null}},49021:(e,t,a)=>{"use strict";a.d(t,{Lt:()=>v,YV:()=>Z,kE:()=>g,Aw:()=>b,Xi:()=>y,KE:()=>_,iC:()=>N});var n=a(15671),i=a(43144),s=a(97326),o=a(79340),r=a(6215),l=a(61120),c=a(4942),u=a(94184),d=a.n(u),p=a(57588),h=a.n(p);var v=function(e){(0,o.Z)(p,e);var t,a,u=(t=p,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(a){var i=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,r.Z)(this,e)});function p(e){var t;return(0,n.Z)(this,p),t=u.call(this,e),(0,c.Z)((0,s.Z)(t),"handleClick",(function(e){t.state.isOpen&&(!t.root.contains(e.target)||t.menu.contains(e.target)&&e.target.closest("a"))&&t.setState({isOpen:!1})})),(0,c.Z)((0,s.Z)(t),"toggle",(function(){t.setState((function(e){return{isOpen:!e.isOpen}}))})),(0,c.Z)((0,s.Z)(t),"close",(function(){t.setState({isOpen:!1})})),t.state={isOpen:!1},t.root=null,t.dropdown=null,t}return(0,i.Z)(p,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleClick)}},{key:"componentDidUpdate",value:function(e,t){t.isOpen!==this.state.isOpen&&(this.state.isOpen&&this.props.onOpen&&this.props.onOpen(this.root),!this.state.isOpen&&this.props.onClose&&this.props.onClose(this.root))}},{key:"render",value:function(){var e=this,t=this.state.isOpen;return h().createElement("div",{id:this.props.id,className:d()("dropdown",{open:t},this.props.className),ref:function(t){t&&!e.element&&(e.root=t)}},this.props.toggle({isOpen:t,toggle:this.toggle,aria:m(t)}),h().createElement("div",{className:d()("dropdown-menu",{"dropdown-menu-right":this.props.menuAlignRight},this.props.menuClassName),ref:function(t){t&&!e.menu&&(e.menu=t)},role:"menu"},this.props.children({isOpen:t,close:this.close})))}}]),p}(h().Component);function m(e){return{"aria-haspopup":"true","aria-expanded":e?"true":"false"}}var f=a(22928);function Z(e){var t=e.className;return(0,f.Z)("li",{className:d()("divider",t)})}function g(e){var t=e.children;return e.listItem?(0,f.Z)("li",{className:"dropdown-footer"},void 0,t):(0,f.Z)("div",{className:"dropdown-footer"},void 0,t)}function b(e){var t=e.className,a=e.children;return(0,f.Z)("div",{className:d()("dropdown-header",t)},void 0,a)}function y(e){var t=e.className,a=e.children;return(0,f.Z)("li",{className:d()("dropdown-menu-item",t)},void 0,a)}function _(e){var t=e.className,a=e.children;return(0,f.Z)("div",{className:d()("dropdown-pills",t)},void 0,a)}function N(e){var t=e.className,a=e.children;return(0,f.Z)("li",{className:d()("dropdown-subheader",t)},void 0,a)}},98936:(e,t,a)=>{"use strict";a.d(t,{gq:()=>o,Z6:()=>r,kw:()=>l});var n=a(22928),i=a(94184),s=a.n(i);a(57588);const o=function(e){var t=e.children,a=e.className;return(0,n.Z)("div",{className:s()("flex-row",a)},void 0,t)},r=function(e){var t=e.children,a=e.className,i=e.shrink;return(0,n.Z)("div",{className:s()("flex-row-col",a,{"flex-row-col-shrink":i})},void 0,t)},l=function(e){var t=e.auto,a=e.children,i=e.className;return(0,n.Z)("div",{className:s()("flex-row-section",{"flex-row-section-auto":t},i)},void 0,a)}},66398:(e,t,a)=>{"use strict";a.d(t,{NX:()=>r,PB:()=>c,Zn:()=>u,WI:()=>l,WE:()=>d,j0:()=>p});var n,i=a(22928),s=a(94184),o=a.n(s);function r(e){var t=e.className,a=e.children;return(0,i.Z)("ul",{className:o()("list-group",t)},void 0,a)}function l(e){var t=e.className,a=e.children;return(0,i.Z)("li",{className:o()("list-group-item",t)},void 0,a)}function c(e){var t=e.className,a=e.icon,n=e.message;return(0,i.Z)(l,{className:o()("list-group-empty",t)},void 0,!!a&&(0,i.Z)("div",{className:"list-group-empty-icon"},void 0,(0,i.Z)("span",{className:"material-icon"},void 0,a)),(0,i.Z)("p",{className:"list-group-empty-message"},void 0,n))}function u(e){var t=e.className,a=e.icon,n=e.message,s=e.detail;return(0,i.Z)(l,{className:o()("list-group-error",t)},void 0,!!a&&(0,i.Z)("div",{className:"list-group-error-icon"},void 0,(0,i.Z)("span",{className:"material-icon"},void 0,a)),(0,i.Z)("p",{className:"list-group-error-message"},void 0,n),!!s&&(0,i.Z)("p",{className:"list-group-error-detail"},void 0,s))}function d(e){var t=e.className,a=e.message;return(0,i.Z)(l,{className:o()("list-group-loading",t)},void 0,(0,i.Z)("p",{className:"list-group-loading-message"},void 0,a),n||(n=(0,i.Z)("div",{className:"list-group-loading-progress"},void 0,(0,i.Z)("div",{className:"list-group-loading-progress-bar"}))))}function p(e){var t=e.className,a=e.icon,n=e.message,s=e.detail;return(0,i.Z)(l,{className:o()("list-group-message",t)},void 0,!!a&&(0,i.Z)("div",{className:"list-group-message-icon"},void 0,(0,i.Z)("span",{className:"material-icon"},void 0,a)),(0,i.Z)("p",{className:"list-group-message-message"},void 0,n),!!s&&(0,i.Z)("p",{className:"list-group-message-detail"},void 0,s))}a(57588)},4517:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var n=a(22928),i=(a(57588),a(37424)),s=a(35486),o=a(60642);function r(e,t){var a=misago.get("NOTIFICATIONS_API")+"?limit=30";return a+="&filter="+e,t&&(t.after&&(a+="&after="+t.after),t.before&&(a+="&before="+t.before)),a}const l=(0,i.$j)((function(e){var t=e.auth;return t.user?{unreadNotifications:t.user.unreadNotifications}:{unreadNotifications:null}}))((function(e){var t=e.children,a=e.filter,i=e.query,l=e.dispatch,c=e.unreadNotifications,u=e.disabled;return(0,n.Z)(o.b,{url:r(a,i),disabled:u,onData:function(e){e.unreadNotifications!=c&&l((0,s.yH)({unreadNotifications:e.unreadNotifications}))}},void 0,(function(e){var a=e.data,n=e.loading,i=e.error,s=e.refetch;return t({data:a,loading:n,error:i,refetch:s})}))}))},63026:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const n=a(4517).Z},66462:(e,t,a)=>{"use strict";a.d(t,{uE:()=>y,lb:()=>_,Pu:()=>N});var n=a(22928),i=(a(57588),a(66398));function s(e){var t=e.filter;return(0,n.Z)(i.PB,{icon:"unread"===t?"sentiment_very_satisfied":"notifications_none",message:o(t)})}function o(e){return"read"===e?pgettext("notifications list","You don't have any read notifications."):"unread"===e?pgettext("notifications list","You don't have any unread notifications."):pgettext("notifications list","You don't have any notifications.")}var r=a(94184),l=a.n(r);function c(e){var t=e.className,a=e.children;return(0,n.Z)("div",{className:l()("notifications-list",t)},void 0,(0,n.Z)(i.NX,{},void 0,a))}var u,d,p,h=a(19605);function v(e){var t=e.notification;return t.actor?(0,n.Z)("a",{href:t.actor.url,className:"notifications-list-item-actor",title:t.actor.username},void 0,(0,n.Z)(h.ZP,{size:30,user:t.actor})):(0,n.Z)("span",{className:"threads-list-item-last-poster",title:t.actor_name||null},void 0,u||(u=(0,n.Z)(h.ZP,{size:30})))}function m(e){var t=e.notification;return(0,n.Z)("a",{href:t.url,className:l()("notification-message",{"notification-message-read":t.isRead,"notification-message-unread":!t.isRead}),dangerouslySetInnerHTML:{__html:t.message}})}function f(e){return e.notification.isRead?(0,n.Z)("div",{className:"notifications-list-item-read-status",title:pgettext("notification status","Read notification")},void 0,d||(d=(0,n.Z)("span",{className:"notification-read-icon"}))):(0,n.Z)("div",{className:"notifications-list-item-read-status",title:pgettext("notification status","Unread notification")},void 0,p||(p=(0,n.Z)("span",{className:"notification-unread-icon"})))}var Z=a(16069);function g(e){var t=e.notification;return(0,n.Z)("div",{className:"notifications-list-item-timestamp"},void 0,(0,n.Z)(Z.Z,{datetime:t.createdAt}))}function b(e){var t=e.notification;return(0,n.Z)(i.WI,{className:l()("notifications-list-item",{"notifications-list-item-read":t.isRead,"notifications-list-item-unread":!t.isRead})},t.id,(0,n.Z)("div",{className:"notifications-list-item-left-col"},void 0,(0,n.Z)("div",{className:"notifications-list-item-col-actor"},void 0,(0,n.Z)(v,{notification:t})),(0,n.Z)("div",{className:"notifications-list-item-col-read-icon"},void 0,(0,n.Z)(f,{notification:t}))),(0,n.Z)("div",{className:"notifications-list-item-right-col"},void 0,(0,n.Z)("div",{className:"notifications-list-item-col-message"},void 0,(0,n.Z)(m,{notification:t})),(0,n.Z)("div",{className:"notifications-list-item-col-timestamp"},void 0,(0,n.Z)(g,{notification:t}))))}function y(e){var t=e.filter,a=e.items;return(0,n.Z)(c,{className:a.length>0?"notifications-list-ready":"notifications-list-pending"},void 0,0===a.length&&(0,n.Z)(s,{filter:t}),a.map((function(e){return(0,n.Z)(b,{notification:e},e.id)})))}function _(e){var t,a=0===(t=e.error).status?gettext("Check your internet connection and try refreshing the site."):t.data&&t.data.detail?t.data.detail:void 0;return(0,n.Z)(c,{className:"notifications-list-pending"},void 0,(0,n.Z)(i.Zn,{icon:"notifications_off",message:pgettext("notifications list","Notifications could not be loaded."),detail:a}))}function N(){return(0,n.Z)(c,{className:"notifications-list-pending"},void 0,(0,n.Z)(i.WE,{message:pgettext("notifications list","Loading notifications...")}))}},64836:(e,t,a)=>{"use strict";a.d(t,{a:()=>b,i:()=>_});var n=a(22928),i=a(15671),s=a(43144),o=a(97326),r=a(79340),l=a(6215),c=a(61120),u=a(4942),d=a(94184),p=a.n(d),h=a(57588),v=a.n(h),m=a(37424),f=a(993);var Z="has-overlay",g=function(e){(0,r.Z)(h,e);var t,a,d=(t=h,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function h(e){var t;return(0,i.Z)(this,h),t=d.call(this,e),(0,u.Z)((0,o.Z)(t),"closeOnNavigation",(function(e){e.target.closest("a")&&t.props.dispatch((0,f.xv)())})),t.scrollOrigin=null,t}return(0,s.Z)(h,[{key:"componentDidUpdate",value:function(e){e.open!==this.props.open&&(this.props.open?(this.scrollOrigin=window.pageYOffset,document.body.classList.add(Z),this.props.onOpen&&this.props.onOpen()):(document.body.classList.remove(Z),window.scrollTo(0,this.scrollOrigin),this.scrollOrigin=null))}},{key:"render",value:function(){return(0,n.Z)("div",{className:p()("overlay",this.props.className,{"overlay-open":this.props.open}),onClick:this.closeOnNavigation},void 0,this.props.children)}}]),h}(v().Component);const b=(0,m.$j)()(g);var y;const _=(0,m.$j)()((function(e){var t=e.children,a=e.dispatch;return(0,n.Z)("div",{className:"overlay-header"},void 0,(0,n.Z)("div",{className:"overlay-header-caption"},void 0,t),(0,n.Z)("button",{className:"btn btn-overlay-close",title:pgettext("modal","Close"),type:"button",onClick:function(){return a((0,f.xv)())}},void 0,y||(y=(0,n.Z)("span",{className:"material-icon"},void 0,"close"))))}))},59131:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(22928);a(57588);const i=function(e){var t=e.children;return(0,n.Z)("div",{className:"container page-container"},void 0,t)}},99755:(e,t,a)=>{"use strict";a.d(t,{mr:()=>r,gC:()=>l,sP:()=>c,eA:()=>u,Ql:()=>d,bM:()=>p,Iv:()=>h});var n,i=a(22928),s=a(94184),o=a.n(s);a(57588);const r=function(e){var t=e.children,a=e.className,s=e.styleName;return(0,i.Z)("div",{className:o()("page-header",a,s&&"page-header-"+s)},void 0,(0,i.Z)("div",{className:"page-header-bg-image"},void 0,(0,i.Z)("div",{className:"page-header-bg-overlay"},void 0,n||(n=(0,i.Z)("div",{className:"page-header-image"})),t)))},l=function(e){var t=e.children,a=e.className,n=e.styleName;return(0,i.Z)("div",{className:o()("page-header-banner",a,n&&"page-header-banner-"+n)},void 0,(0,i.Z)("div",{className:"page-header-banner-bg-image"},void 0,(0,i.Z)("div",{className:"page-header-banner-bg-overlay"},void 0,t)))},c=function(e){var t=e.children;return(0,i.Z)("div",{className:"container page-header-container"},void 0,t)},u=function(e){var t=e.children,a=e.className;return(0,i.Z)("div",{className:o()("page-header-details",a)},void 0,t)},d=function(e){var t=e.className,a=e.message;return(0,i.Z)("div",{className:o()("page-header-message",t),dangerouslySetInnerHTML:{__html:a}})},p=function(e){var t=e.children,a=e.className;return(0,i.Z)("div",{className:o()("page-header-message",a)},void 0,t)},h=function(e){var t=e.styleName,a=e.header,n=e.message;return(0,i.Z)(c,{},void 0,(0,i.Z)(r,{styleName:t},void 0,(0,i.Z)(l,{styleName:t},void 0,(0,i.Z)("h1",{},void 0,a)),n&&(0,i.Z)(u,{styleName:t},void 0,n)))}},40689:(e,t,a)=>{"use strict";a.d(t,{Z:()=>H});var n=a(22928),i=a(15671),s=a(43144),o=a(97326),r=a(79340),l=a(6215),c=a(61120),u=a(4942),d=a(94184),p=a.n(d),h=a(57588),v=a.n(h),m=a(78657),f=a(93825),Z=a(59801),g=a(53904),b=a(37848),y=a(87462),_=a(82211),N=a(43345),k=a(96359),x=a(59940);var w,C,R,E=["progress-bar-danger","progress-bar-warning","progress-bar-warning","progress-bar-primary","progress-bar-success"],S=[pgettext("password strength indicator","Entered password is very weak."),pgettext("password strength indicator","Entered password is weak."),pgettext("password strength indicator","Entered password is average."),pgettext("password strength indicator","Entered password is strong."),pgettext("password strength indicator","Entered password is very strong.")],O=function(e){(0,r.Z)(u,e);var t,a,o=(t=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function u(e){var t;return(0,i.Z)(this,u),(t=o.call(this,e))._score=0,t._password=null,t._inputs=[],t.state={loaded:!1},t}return(0,s.Z)(u,[{key:"componentDidMount",value:function(){var e=this;x.Z.load().then((function(){e.setState({loaded:!0})}))}},{key:"getScore",value:function(e,t){var a=this,n=!1;return e!==this._password&&(n=!0),t.length!==this._inputs.length?n=!0:t.map((function(e,t){e.trim()!==a._inputs[t]&&(n=!0)})),n&&(this._score=x.Z.scorePassword(e,t),this._password=e,this._inputs=t.map((function(e){return e.trim()}))),this._score}},{key:"render",value:function(){if(!this.state.loaded)return null;var e=this.getScore(this.props.password,this.props.inputs);return(0,n.Z)("div",{className:"help-block password-strength"},void 0,(0,n.Z)("div",{className:"progress"},void 0,(0,n.Z)("div",{className:"progress-bar "+E[e],style:{width:20+20*e+"%"},role:"progress-bar","aria-valuenow":e,"aria-valuemin":"0","aria-valuemax":"4"},void 0,(0,n.Z)("span",{className:"sr-only"},void 0,S[e]))),(0,n.Z)("p",{className:"text-small"},void 0,S[e]))}}]),u}(v().Component),T=a(26106),P=a(47235),L=a(54385),A=a(98274),I=a(93051),B=a(55210);function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){(0,u.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,l.Z)(this,a)}}var U,M=function(e){(0,r.Z)(a,e);var t=z(a);function a(e){var n;(0,i.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,o.Z)(n),"handlePrivacyPolicyChange",(function(e){var t=e.target.value;n.handleToggleAgreement("privacyPolicy",t)})),(0,u.Z)((0,o.Z)(n),"handleTermsOfServiceChange",(function(e){var t=e.target.value;n.handleToggleAgreement("termsOfService",t)})),(0,u.Z)((0,o.Z)(n),"handleToggleAgreement",(function(e,t){n.setState((function(a,i){if(null===a[e]){var s=D(D({},a.errors),{},(0,u.Z)({},e,null));return(0,u.Z)({errors:s},e,t)}var o=n.state.validators[e][0],r=D(D({},a.errors),{},(0,u.Z)({},e,[o(null)]));return(0,u.Z)({errors:r},e,null)}))}));var s=n.props.criteria,r=s.username,l=s.password,c=0;l.forEach((function(e){"MinimumLengthValidator"===e.name&&(c=e.min_length)}));var d={username:[B.lG(),B.HR(r.min_length),B.gS(r.max_length)],email:[B.Do()],password:[B.Vb(c)],captcha:f.ZP.validator()};return L.Z.get("TERMS_OF_SERVICE_ID")&&(d.termsOfService=[B.fT()]),L.Z.get("PRIVACY_POLICY_ID")&&(d.privacyPolicy=[B.jA()]),n.state={isLoading:!1,username:"",email:"",password:"",captcha:"",termsOfService:null,privacyPolicy:null,validators:d,errors:{}},n}return(0,s.Z)(a,[{key:"clean",value:function(){return!!this.isValid()||(g.Z.error(gettext("Form contains errors.")),this.setState({errors:this.validate()}),!1)}},{key:"send",value:function(){return m.Z.post(L.Z.get("USERS_API"),{username:this.state.username,email:this.state.email,password:this.state.password,captcha:this.state.captcha,terms_of_service:this.state.termsOfService,privacy_policy:this.state.privacyPolicy})}},{key:"handleSuccess",value:function(e){this.props.callback(e)}},{key:"handleError",value:function(e){400===e.status?(this.setState({errors:Object.assign({},this.state.errors,e)}),e.__all__&&e.__all__.length>0?g.Z.error(e.__all__[0]):g.Z.error(gettext("Form contains errors."))):403===e.status&&e.ban?((0,I.Z)(e.ban),Z.Z.hide()):g.Z.apiError(e)}},{key:"render",value:function(){return(0,n.Z)("div",{className:"modal-dialog modal-register",role:"document"},void 0,(0,n.Z)("div",{className:"modal-content"},void 0,(0,n.Z)("div",{className:"modal-header"},void 0,(0,n.Z)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":pgettext("modal","Close")},void 0,w||(w=(0,n.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,n.Z)("h4",{className:"modal-title"},void 0,pgettext("register modal title","Register"))),(0,n.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,n.Z)("input",{type:"type",style:{display:"none"}}),(0,n.Z)("input",{type:"password",style:{display:"none"}}),(0,n.Z)("div",{className:"modal-body"},void 0,(0,n.Z)(P.Z,{buttonClassName:"col-xs-12 col-sm-6",buttonLabel:pgettext("register modal field","Join with %(site)s"),formLabel:pgettext("register modal field","Or create forum account:")}),(0,n.Z)(k.Z,{label:pgettext("register modal field","Username"),for:"id_username",validation:this.state.errors.username},void 0,(0,n.Z)("input",{type:"text",id:"id_username",className:"form-control","aria-describedby":"id_username_status",disabled:this.state.isLoading,onChange:this.bindInput("username"),value:this.state.username})),(0,n.Z)(k.Z,{label:pgettext("register modal field","E-mail"),for:"id_email",validation:this.state.errors.email},void 0,(0,n.Z)("input",{type:"text",id:"id_email",className:"form-control","aria-describedby":"id_email_status",disabled:this.state.isLoading,onChange:this.bindInput("email"),value:this.state.email})),(0,n.Z)(k.Z,{label:pgettext("register modal field","Password"),for:"id_password",validation:this.state.errors.password,extra:(0,n.Z)(O,{password:this.state.password,inputs:[this.state.username,this.state.email]})},void 0,(0,n.Z)("input",{type:"password",id:"id_password",className:"form-control","aria-describedby":"id_password_status",disabled:this.state.isLoading,onChange:this.bindInput("password"),value:this.state.password})),f.ZP.component({form:this}),(0,n.Z)(T.Z,{errors:this.state.errors,privacyPolicy:this.state.privacyPolicy,termsOfService:this.state.termsOfService,onPrivacyPolicyChange:this.handlePrivacyPolicyChange,onTermsOfServiceChange:this.handleTermsOfServiceChange})),(0,n.Z)("div",{className:"modal-footer"},void 0,(0,n.Z)("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},void 0,pgettext("register modal btn","Cancel")),(0,n.Z)(_.Z,{className:"btn-primary",loading:this.state.isLoading},void 0,pgettext("register modal btn","Register account"))))))}}]),a}(N.Z),q=function(e){(0,r.Z)(a,e);var t=z(a);function a(){return(0,i.Z)(this,a),t.apply(this,arguments)}return(0,s.Z)(a,[{key:"getLead",value:function(){return"user"===this.props.activation?pgettext("account activation required","%(username)s, your account has been created but you need to activate it before you will be able to sign in."):"admin"===this.props.activation?pgettext("account activation required","%(username)s, your account has been created but the site administrator will have to activate it before you will be able to sign in."):void 0}},{key:"getSubscript",value:function(){return"user"===this.props.activation?pgettext("account activation required","We have sent an e-mail to %(email)s with link that you have to click to activate your account."):"admin"===this.props.activation?pgettext("account activation required","We will send an e-mail to %(email)s when this takes place."):void 0}},{key:"render",value:function(){return(0,n.Z)("div",{className:"modal-dialog modal-message modal-register",role:"document"},void 0,(0,n.Z)("div",{className:"modal-content"},void 0,(0,n.Z)("div",{className:"modal-header"},void 0,(0,n.Z)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":pgettext("modal","Close")},void 0,C||(C=(0,n.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,n.Z)("h4",{className:"modal-title"},void 0,pgettext("register modal title","Registration complete"))),(0,n.Z)("div",{className:"modal-body"},void 0,R||(R=(0,n.Z)("div",{className:"message-icon"},void 0,(0,n.Z)("span",{className:"material-icon"},void 0,"info_outline"))),(0,n.Z)("div",{className:"message-body"},void 0,(0,n.Z)("p",{className:"lead"},void 0,interpolate(this.getLead(),{username:this.props.username},!0)),(0,n.Z)("p",{},void 0,interpolate(this.getSubscript(),{email:this.props.email},!0)),(0,n.Z)("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},void 0,pgettext("register modal dismiss","Ok"))))))}}]),a}(v().Component),F=function(e){(0,r.Z)(a,e);var t=z(a);function a(e){var n;return(0,i.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,o.Z)(n),"completeRegistration",(function(e){"active"===e.activation?(Z.Z.hide(),A.Z.signIn(e)):n.setState({complete:e})})),n.state={complete:!1},n}return(0,s.Z)(a,[{key:"render",value:function(){return this.state.complete?(0,n.Z)(q,{activation:this.state.complete.activation,email:this.state.complete.email,username:this.state.complete.username}):v().createElement(M,(0,y.Z)({callback:this.completeRegistration},this.props))}}]),a}(v().Component);const H=function(e){(0,r.Z)(h,e);var t,a,d=(t=h,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function h(e){var t;return(0,i.Z)(this,h),t=d.call(this,e),(0,u.Z)((0,o.Z)(t),"showRegisterForm",(function(){t.props.onClick&&t.props.onClick(),"closed"===misago.get("SETTINGS").account_activation?g.Z.info(pgettext("register form","Registration form is currently disabled by the site administrator.")):t.state.isLoaded?Z.Z.show((0,n.Z)(F,{criteria:t.state.criteria})):(t.setState({isLoading:!0}),Promise.all([f.ZP.load(),m.Z.get(misago.get("AUTH_CRITERIA_API"))]).then((function(e){t.setState({isLoading:!1,isLoaded:!0,criteria:e[1]}),Z.Z.show((0,n.Z)(F,{criteria:e[1]}))}),(function(){t.setState({isLoading:!1}),g.Z.error(pgettext("register form","Registration form is currently unavailable due to an error."))})))})),t.state={isLoading:!1,isLoaded:!1,criteria:null},t}return(0,s.Z)(h,[{key:"render",value:function(){return(0,n.Z)("button",{className:p()("btn btn-register",this.props.className,{"btn-block":this.props.block,"btn-loading":this.state.isLoading}),disabled:this.state.isLoading,onClick:this.showRegisterForm,type:"button"},void 0,pgettext("cta","Register"),this.state.isLoading?U||(U=(0,n.Z)(b.Z,{})):null)}}]),h}(v().Component)},26106:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(22928),i=(a(57588),a(54385)),s=a(89627),o=function(e){var t=e.agreement,a=e.checked,i=e.errors,o=e.url,r=e.value,l=e.onChange;if(!o)return null;var c=interpolate('<a href="%(url)s" target="_blank">%(agreement)s</a>',{agreement:(0,s.Z)(t),url:(0,s.Z)(o)},!0),u=interpolate(pgettext("register form agreement prompt","I have read and accept %(agreement)s."),{agreement:c},!0);return(0,n.Z)("div",{className:"checkbox legal-footnote"},void 0,(0,n.Z)("label",{},void 0,(0,n.Z)("input",{checked:a,type:"checkbox",value:r,onChange:l}),(0,n.Z)("span",{dangerouslySetInnerHTML:{__html:u}})),i&&i.map((function(e,t){return(0,n.Z)("div",{className:"help-block errors"},t,e)})))};const r=function(e){var t=e.errors,a=e.privacyPolicy,s=e.termsOfService,r=e.onPrivacyPolicyChange,l=e.onTermsOfServiceChange,c=i.Z.get("TERMS_OF_SERVICE_ID"),u=i.Z.get("TERMS_OF_SERVICE_URL"),d=i.Z.get("PRIVACY_POLICY_ID"),p=i.Z.get("PRIVACY_POLICY_URL");return c||d?(0,n.Z)("div",{},void 0,(0,n.Z)(o,{agreement:pgettext("register form agreement prompt","the terms of service"),checked:null!==s,errors:t.termsOfService,url:u,value:c,onChange:l}),(0,n.Z)(o,{agreement:pgettext("register form agreement prompt","the privacy policy"),checked:null!==a,errors:t.privacyPolicy,url:p,value:d,onChange:r})):null}},62989:(e,t,a)=>{"use strict";a.d(t,{E:()=>L,F:()=>B});var n=a(22928),i=a(57588),s=a.n(i),o=a(15671),r=a(43144),l=a(79340),c=a(6215),u=a(61120),d=a(60642),p=a(66398);function h(e){var t=e.children;return(0,n.Z)(p.NX,{className:"search-results-list"},void 0,t)}function v(){return(0,n.Z)(h,{},void 0,(0,n.Z)(p.j0,{message:pgettext("search cta","Enter search query (at least 3 characters).")}))}var m=a(16069);function f(e){var t=e.post;return(0,n.Z)(p.WI,{className:"search-result"},void 0,(0,n.Z)("a",{href:t.url.index},void 0,(0,n.Z)("div",{className:"search-result-card"},void 0,(0,n.Z)("div",{className:"search-result-name"},void 0,t.thread.title),(0,n.Z)("div",{className:"search-result-summary",dangerouslySetInnerHTML:{__html:t.content}}),(0,n.Z)("ul",{className:"search-result-details"},void 0,(0,n.Z)("li",{},void 0,(0,n.Z)("b",{},void 0,t.category.name)),(0,n.Z)("li",{},void 0,t.poster?t.poster.username:t.poster_name),(0,n.Z)("li",{},void 0,(0,n.Z)(m.Z,{datetime:t.posted_on}))))))}var Z,g,b,y=a(19605);function _(e){var t=e.user,a=t.title||t.rank.title;return(0,n.Z)(p.WI,{className:"search-result"},void 0,(0,n.Z)("a",{href:t.url},void 0,(0,n.Z)(y.ZP,{user:t,size:32}),(0,n.Z)("div",{className:"search-result-card"},void 0,(0,n.Z)("div",{className:"search-result-name"},void 0,t.username),(0,n.Z)("ul",{className:"search-result-details"},void 0,!!a&&(0,n.Z)("li",{},void 0,(0,n.Z)("b",{},void 0,a)),(0,n.Z)("li",{},void 0,t.rank.name),(0,n.Z)("li",{},void 0,(0,n.Z)(m.Z,{datetime:t.joined_on}))))))}function N(e){var t=e.query,a=e.results,i=a[0],s=a[1],o=i.results.count;return(0,n.Z)(h,{},void 0,s.results.results.map((function(e){return(0,n.Z)(_,{user:e},e.id)})),i.results.results.map((function(e){return(0,n.Z)(f,{post:e},e.id)})),o>0&&(0,n.Z)(p.WI,{},void 0,(0,n.Z)("a",{href:i.url+"?q="+encodeURIComponent(t),className:"btn btn-default btn-block"},void 0,npgettext("search results list","See all %(count)s result.","See all %(count)s results.",i.results.count).replace("%(count)s",i.results.count))))}function k(){return(0,n.Z)(h,{},void 0,(0,n.Z)(p.PB,{message:pgettext("search results","The search returned no results.")}))}function x(e){var t=e.error;return(0,n.Z)(h,{},void 0,(0,n.Z)(p.Zn,{message:pgettext("search results","The search could not be completed."),detail:w(t)}))}function w(e){return 0===e.status?gettext("Check your internet connection and try refreshing the site."):e.data&&e.data.detail?e.data.detail:void 0}function C(){return(0,n.Z)(h,{},void 0,(0,n.Z)(p.WE,{message:pgettext("search results","Searching...")}))}var R={},E=function(e){(0,l.Z)(s,e);var t,a,i=(t=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(a){var i=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function s(e){var t;return(0,o.Z)(this,s),(t=i.call(this,e)).state={query:t.props.query.trim()},t.debounce=null,t}return(0,r.Z)(s,[{key:"componentDidUpdate",value:function(){var e=this,t=this.props.query.trim();this.state.query!=t&&(this.debounce&&window.clearTimeout(this.debounce),this.debounce=window.setTimeout((function(){e.setState({query:t})}),750))}},{key:"componentWillUnmount",value:function(){this.debounce&&window.clearTimeout(this.debounce)}},{key:"render",value:function(){var e,t=this;return(0,n.Z)(d.b,{url:(e=this.state.query,misago.get("SEARCH_API")+"?q="+encodeURIComponent(e)),cache:R,disabled:this.state.query.length<3},void 0,(function(e){var a=e.data,i=e.loading,s=e.error;return t.state.query.length<3?Z||(Z=(0,n.Z)(v,{})):i?g||(g=(0,n.Z)(C,{})):s?(0,n.Z)(x,{error:s}):function(e){if(null===e)return!0;var t=0;return e.forEach((function(e){t+=e.results.count})),0===t}(a)?b||(b=(0,n.Z)(k,{})):null!==a?(0,n.Z)(N,{query:t.state.query,results:a}):null}))}}]),s}(s().Component);function S(e){var t=e.query,a=e.setQuery;return(0,n.Z)("div",{className:"search-input"},void 0,(0,n.Z)("input",{className:"form-control form-control-search",type:"text",placeholder:pgettext("cta","Search"),value:t,onChange:function(e){return a(e.target.value)}}))}var O=a(97326),T=a(4942);var P=function(e){(0,l.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(a){var i=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),t=n.call(this,e),(0,T.Z)((0,O.Z)(t),"setQuery",(function(e){t.setState({query:e})})),t.state={query:""},t}return(0,r.Z)(i,[{key:"render",value:function(){return this.props.children({query:this.state.query,setQuery:this.setQuery})}}]),i}(s().Component);function L(){return(0,n.Z)(P,{},void 0,(function(e){var t=e.query,a=e.setQuery;return(0,n.Z)("div",{className:"search-dropdown-body"},void 0,(0,n.Z)(S,{query:t,setQuery:a}),(0,n.Z)(E,{query:t}))}))}var A=a(37424),I=a(64836);const B=(0,A.$j)((function(e){return{open:e.overlay.search}}))((function(e){var t=e.open;return(0,n.Z)(I.a,{open:t,onOpen:function(){window.setTimeout((function(){document.querySelector("#search-mount .form-control-search").focus()}),0)}},void 0,(0,n.Z)(I.i,{},void 0,pgettext("cta","Search")),(0,n.Z)(P,{},void 0,(function(e){var t=e.query,a=e.setQuery;return(0,n.Z)("div",{className:"search-overlay-body"},void 0,(0,n.Z)(S,{query:t,setQuery:a}),(0,n.Z)("div",{className:"search-results-container"},void 0,(0,n.Z)(E,{query:t})))})))}))},80261:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var n,i=a(22928),s=a(94184),o=a.n(s),r=(a(57588),a(59801)),l=a(14467);const c=function(e){var t=e.block,a=e.className,s=e.onClick,c=misago.get("SETTINGS");return c.DELEGATE_AUTH?(0,i.Z)("a",{className:o()("btn btn-sign-in",a,{"btn-block":t}),href:c.LOGIN_URL,onClick:s},void 0,pgettext("cta","Sign in")):(0,i.Z)("button",{className:o()("btn btn-sign-in",a,{"btn-block":t}),type:"button",onClick:function(){s&&s(),r.Z.show(n||(n=(0,i.Z)(l.Z,{})))}},void 0,pgettext("cta","Sign in"))}},6333:(e,t,a)=>{"use strict";a.d(t,{bS:()=>m,Or:()=>g});var n,i,s,o=a(22928),r=a(94184),l=a.n(r),c=(a(57588),a(37424)),u=a(49021),d=a(40689),p=a(80261),h=(0,c.$j)((function(e){return{isAnonymous:!e.auth.user.id}}))((function(e){var t=e.isAnonymous,a=e.close,r=e.dropdown,c=e.overlay,h=misago.get("MISAGO_PATH"),v=misago.get("SETTINGS"),m=misago.get("extraMenuItems"),f=misago.get("extraFooterItems"),Z=misago.get("categoriesMap"),g=misago.get("usersLists"),b=v.enable_oauth2_client,y=[];misago.get("THREADS_ON_INDEX")?(y.push({title:pgettext("site nav","Threads"),url:h}),y.push({title:pgettext("site nav","Categories"),url:h+"categories/"})):(y.push({title:pgettext("site nav","Categories"),url:h}),y.push({title:pgettext("site nav","Threads"),url:h+"threads/"})),y.push({title:pgettext("site nav","Search"),url:h+"search/"});var _=[],N=misago.get("TERMS_OF_SERVICE_TITLE"),k=misago.get("TERMS_OF_SERVICE_URL");N&&k&&_.push({title:N,url:k});var x=misago.get("PRIVACY_POLICY_TITLE"),w=misago.get("PRIVACY_POLICY_URL");return x&&w&&_.push({title:x,url:w}),(0,o.Z)("ul",{className:l()("site-nav-menu",{"dropdown-menu-list":r,"overlay-menu-list":c})},void 0,t&&(0,o.Z)(u.Aw,{className:"site-nav-sign-in-message"},void 0,pgettext("cta","You are not signed in")),t&&(0,o.Z)(u.KE,{className:"site-nav-sign-in-options"},void 0,(0,o.Z)(p.Z,{onClick:a}),!b&&(0,o.Z)(d.Z,{onClick:a})),(0,o.Z)(u.iC,{},void 0,v.forum_name),y.map((function(e){return(0,o.Z)(u.Xi,{},e.url,(0,o.Z)("a",{href:e.url},void 0,e.title))})),m.map((function(e,t){return(0,o.Z)(u.Xi,{className:e.className},t,(0,o.Z)("a",{href:e.url,target:e.targetBlank?"_blank":null,rel:e.rel},void 0,e.title))})),!!g.length&&(n||(n=(0,o.Z)(u.YV,{className:"site-nav-users-divider"}))),!!g.length&&(0,o.Z)(u.iC,{className:"site-nav-users"},void 0,pgettext("site nav section","Users")),g.map((function(e){return(0,o.Z)(u.Xi,{},e.url,(0,o.Z)("a",{href:e.url},void 0,e.name))})),i||(i=(0,o.Z)(u.YV,{className:"site-nav-categories-divider"})),(0,o.Z)(u.iC,{className:"site-nav-categories"},void 0,pgettext("site nav section","Categories")),Z.map((function(e){return(0,o.Z)(u.Xi,{className:"site-nav-category"},e.id,(0,o.Z)("a",{href:e.url},void 0,(0,o.Z)("span",{},void 0,e.name),(0,o.Z)("span",{className:l()("threads-list-item-category threads-list-category-label",{"threads-list-category-label-color":!!e.color}),style:{"--label-color":e.color}},void 0,e.shortName||e.name)))})),(!!_.length||!!f.length)&&(s||(s=(0,o.Z)(u.YV,{className:"site-nav-footer-divider"}))),(!!_.length||!!f.length)&&(0,o.Z)(u.iC,{className:"site-nav-footer"},void 0,pgettext("site nav section","Footer")),f.map((function(e,t){return(0,o.Z)(u.Xi,{className:e.className},t,(0,o.Z)("a",{href:e.url,target:e.targetBlank?"_blank":null,rel:e.rel},void 0,e.title))})),_.map((function(e){return(0,o.Z)(u.Xi,{},e.url,(0,o.Z)("a",{href:e.url},void 0,e.title))})))}));const v=h;function m(e){var t=e.close;return(0,o.Z)(v,{close:t,dropdown:!0})}var f=a(993),Z=a(64836);const g=(0,c.$j)((function(e){return{isOpen:e.overlay.siteNav}}))((function(e){var t=e.dispatch,a=e.isOpen;return(0,o.Z)(Z.a,{open:a},void 0,(0,o.Z)(Z.i,{},void 0,pgettext("site nav title","Menu")),(0,o.Z)(v,{close:function(){return t((0,f.xv)())},overlay:!0}))}))},47235:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n,i=a(22928),s=(a(57588),a(54385)),o=function(e){var t=e.className,a=e.text;return a?(0,i.Z)("h5",{className:t||""},void 0,a):null};const r=function(e){var t=e.buttonClassName,a=e.buttonLabel,r=e.formLabel,l=e.header,c=e.labelClassName,u=s.Z.get("SOCIAL_AUTH");return 0===u.length?null:(0,i.Z)("div",{className:"form-group form-social-auth"},void 0,(0,i.Z)(o,{className:c,text:l}),(0,i.Z)("div",{className:"row"},void 0,u.map((function(e){var n=e.pk,s=e.name,o=e.button_text,r=e.button_color,l=e.url,c="btn btn-block btn-default btn-social-"+n,u=r?{color:r}:null,d=o||interpolate(a,{site:s},!0);return(0,i.Z)("div",{className:t||"col-xs-12"},n,(0,i.Z)("a",{className:c,style:u,href:l},void 0,d))}))),n||(n=(0,i.Z)("hr",{})),(0,i.Z)(o,{className:c,text:r}))}},50366:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var n,i,s,o,r,l,c,u=a(22928);a(57588);const d=function(e){var t=e.thread;return(0,u.Z)("ul",{className:"thread-flags"},void 0,2==t.weight&&(0,u.Z)("li",{className:"thread-flag-pinned-globally",title:pgettext("thread flag","Pinned globally")},void 0,n||(n=(0,u.Z)("span",{className:"material-icon"},void 0,"bookmark"))),1==t.weight&&(0,u.Z)("li",{className:"thread-flag-pinned-locally",title:pgettext("thread flag","Pinned in category")},void 0,i||(i=(0,u.Z)("span",{className:"material-icon"},void 0,"bookmark_outline"))),t.best_answer&&(0,u.Z)("li",{className:"thread-flag-answered",title:pgettext("thread flag","Answered")},void 0,s||(s=(0,u.Z)("span",{className:"material-icon"},void 0,"check_circle"))),t.has_poll&&(0,u.Z)("li",{className:"thread-flag-poll",title:pgettext("thread flag","Poll")},void 0,o||(o=(0,u.Z)("span",{className:"material-icon"},void 0,"poll"))),(t.is_unapproved||t.has_unapproved_posts)&&(0,u.Z)("li",{className:"thread-flag-unapproved",title:t.is_unapproved?pgettext("thread flag","Awaiting approval"):pgettext("thread flag","Has unapproved posts")},void 0,r||(r=(0,u.Z)("span",{className:"material-icon"},void 0,"visibility"))),t.is_closed&&(0,u.Z)("li",{className:"thread-flag-closed",title:pgettext("thread flag","Closed")},void 0,l||(l=(0,u.Z)("span",{className:"material-icon"},void 0,"lock"))),t.is_hidden&&(0,u.Z)("li",{className:"thread-flag-hidden",title:pgettext("thread flag","Hidden")},void 0,c||(c=(0,u.Z)("span",{className:"material-icon"},void 0,"visibility_off"))))}},16768:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n,i=a(22928);a(57588);const s=function(e){var t=e.thread;return(0,i.Z)("span",{className:"threads-replies",title:interpolate(npgettext("thread replies stat","%(replies)s reply","%(replies)s replies",t.replies),{replies:t.replies},!0)},void 0,n||(n=(0,i.Z)("span",{className:"material-icon"},void 0,"chat_bubble_outline")),t.replies>980?Math.round(t.replies/1e3)+"K":t.replies)}},16069:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var n=a(22928),i=a(15671),s=a(43144),o=a(97326),r=a(79340),l=a(6215),c=a(61120),u=a(4942),d=a(57588),p=a.n(d),h=a(35983);function v(e){return{tick:e.tick+1}}const m=function(e){(0,r.Z)(p,e);var t,a,d=(t=p,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function p(e){var t;return(0,i.Z)(this,p),t=d.call(this,e),(0,u.Z)((0,o.Z)(t),"scheduleNextUpdate",(function(){var e=new Date,a=Math.ceil(Math.abs(Math.round((t.date-e)/1e3)));a<3600?t.timeout=window.setTimeout((function(){t.setState(v),t.scheduleNextUpdate()}),5e4):a<86400&&(t.timeout=window.setTimeout((function(){t.setState(v)}),24e5))})),t.state={tick:0},t.date=new Date(e.datetime),t.timeout=null,t}return(0,s.Z)(p,[{key:"componentDidMount",value:function(){this.scheduleNextUpdate()}},{key:"componentWillUnmount",value:function(){this.timeout&&window.clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this.props.narrow?(0,h.wS)(this.date):(0,h.lY)(this.date);return(0,n.Z)("attr",{title:this.props.title?this.props.title.replace("%(timestamp)s",h.ry.format(this.date)):h.ry.format(this.date)},void 0,e)}}]),p}(p().Component)},92490:(e,t,a)=>{"use strict";a.d(t,{o8:()=>o,Eg:()=>r,Z2:()=>l,tw:()=>c});var n=a(22928),i=a(94184),s=a.n(i);a(57588);const o=function(e){var t=e.children,a=e.className;return(0,n.Z)("nav",{className:s()("toolbar",a)},void 0,t)},r=function(e){var t=e.children,a=e.className,i=e.shrink;return(0,n.Z)("div",{className:s()("toolbar-item",a,{"toolbar-item-shrink":i})},void 0,t)},l=function(e){var t=e.auto,a=e.children,i=e.className;return(0,n.Z)("div",{className:s()("toolbar-section",{"toolbar-section-auto":t},i)},void 0,a)},c=function(e){var t=e.className;return(0,n.Z)("div",{className:s()("toolbar-spacer",t)})}},28166:(e,t,a)=>{"use strict";a.d(t,{o4:()=>ie,Qm:()=>re});var n,i=a(42982),s=a(22928),o=a(15671),r=a(43144),l=a(97326),c=a(79340),u=a(6215),d=a(61120),p=a(4942),h=a(94184),v=a.n(h),m=a(57588),f=a.n(m),Z=a(37424),g=a(59801),b=a(19605),y=a(82211),_=a(37848),N=a(78657),k=a(53904);var x,w=function(e){(0,c.Z)(h,e);var t,a,i=(t=h,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function h(e){var t;return(0,o.Z)(this,h),t=i.call(this,e),(0,p.Z)((0,l.Z)(t),"setGravatar",(function(){t.callApi("gravatar")})),(0,p.Z)((0,l.Z)(t),"setGenerated",(function(){t.callApi("generated")})),t.state={isLoading:!1},t}return(0,r.Z)(h,[{key:"callApi",value:function(e){var t=this;if(this.state.isLoading)return!1;this.setState({isLoading:!0}),N.Z.post(this.props.user.api.avatar,{avatar:e}).then((function(e){t.setState({isLoading:!1}),k.Z.success(e.detail),t.props.onComplete(e)}),(function(e){400===e.status?(k.Z.error(e.detail),t.setState({isLoading:!1})):t.props.showError(e)}))}},{key:"getGravatarButton",value:function(){return this.props.options.gravatar?(0,s.Z)(y.Z,{onClick:this.setGravatar,disabled:this.state.isLoading,className:"btn-default btn-block btn-avatar-gravatar"},void 0,pgettext("avatar modal btn","Download my Gravatar")):null}},{key:"getCropButton",value:function(){return this.props.options.crop_src?(0,s.Z)(y.Z,{className:"btn-default btn-block btn-avatar-crop",disabled:this.state.isLoading,onClick:this.props.showCrop},void 0,pgettext("avatar modal btn","Re-crop uploaded image")):null}},{key:"getUploadButton",value:function(){return this.props.options.upload?(0,s.Z)(y.Z,{className:"btn-default btn-block btn-avatar-upload",disabled:this.state.isLoading,onClick:this.props.showUpload},void 0,pgettext("avatar modal btn","Upload new image")):null}},{key:"getGalleryButton",value:function(){return this.props.options.galleries?(0,s.Z)(y.Z,{className:"btn-default btn-block btn-avatar-gallery",disabled:this.state.isLoading,onClick:this.props.showGallery},void 0,pgettext("avatar modal btn","Pick avatar from gallery")):null}},{key:"getAvatarPreview",value:function(){var e={id:this.props.user.id,avatars:this.props.options.avatars};return this.state.isLoading?(0,s.Z)("div",{className:"avatar-preview preview-loading"},void 0,(0,s.Z)(b.ZP,{size:"200",user:e}),n||(n=(0,s.Z)(_.Z,{}))):(0,s.Z)("div",{className:"avatar-preview"},void 0,(0,s.Z)(b.ZP,{size:"200",user:e}))}},{key:"render",value:function(){return(0,s.Z)("div",{className:"modal-body modal-avatar-index"},void 0,(0,s.Z)("div",{className:"row"},void 0,(0,s.Z)("div",{className:"col-md-5"},void 0,this.getAvatarPreview()),(0,s.Z)("div",{className:"col-md-7"},void 0,this.getGravatarButton(),(0,s.Z)(y.Z,{onClick:this.setGenerated,disabled:this.state.isLoading,className:"btn-default btn-block btn-avatar-generate"},void 0,pgettext("avatar modal btn","Generate my individual avatar")),this.getCropButton(),this.getUploadButton(),this.getGalleryButton())))}}]),h}(f().Component),C=a(19755);var R,E=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),t=n.call(this,e),(0,p.Z)((0,l.Z)(t),"cropAvatar",(function(){if(t.state.isLoading)return!1;t.setState({isLoading:!0});var e=t.props.upload?"crop_tmp":"crop_src",a=C(".crop-form"),n=a.cropit("exportZoom"),i=a.cropit("offset");N.Z.post(t.props.user.api.avatar,{avatar:e,crop:{offset:{x:i.x*n,y:i.y*n},zoom:a.cropit("zoom")*n}}).then((function(e){t.props.onComplete(e),k.Z.success(e.detail)}),(function(e){400===e.status?(k.Z.error(e.detail),t.setState({isLoading:!1})):t.props.showError(e)}))})),t.state={isLoading:!1,deviceRatio:1},t}return(0,r.Z)(i,[{key:"getAvatarSize",value:function(){return this.props.upload?this.props.options.crop_tmp.size:this.props.options.crop_src.size}},{key:"getImagePath",value:function(){return this.props.upload?this.props.dataUrl:this.props.options.crop_src.url}},{key:"componentDidMount",value:function(){for(var e=this,t=C(".crop-form"),a=this.getAvatarSize(),n=t.width();n<a;)a/=2;var i=this.getAvatarSize()/a;t.width(a),t.cropit({width:a,height:a,exportZoom:i,imageState:{src:this.getImagePath()},onImageLoaded:function(){if(e.props.upload){var a=t.cropit("zoom"),n=t.cropit("imageSize");if(n.width>n.height){var i=(n.width*a-e.getAvatarSize())/-2;t.cropit("offset",{x:i,y:0})}else if(n.width<n.height){var s=(n.height*a-e.getAvatarSize())/-2;t.cropit("offset",{x:0,y:s})}else t.cropit("offset",{x:0,y:0})}else{var o=e.props.options.crop_src.crop;o&&(t.cropit("zoom",o.zoom),t.cropit("offset",{x:o.x,y:o.y}))}}})}},{key:"componentWillUnmount",value:function(){C(".crop-form").cropit("disable")}},{key:"render",value:function(){return(0,s.Z)("div",{},void 0,x||(x=(0,s.Z)("div",{className:"modal-body modal-avatar-crop"},void 0,(0,s.Z)("div",{className:"crop-form"},void 0,(0,s.Z)("div",{className:"cropit-preview"}),(0,s.Z)("input",{type:"range",className:"cropit-image-zoom-input"})))),(0,s.Z)("div",{className:"modal-footer"},void 0,(0,s.Z)("div",{className:"col-md-6 col-md-offset-3"},void 0,(0,s.Z)(y.Z,{onClick:this.cropAvatar,loading:this.state.isLoading,className:"btn-primary btn-block"},void 0,this.props.upload?pgettext("avatar crop modal btn","Set avatar"):pgettext("avatar crop modal btn","Crop image")),(0,s.Z)(y.Z,{onClick:this.props.showIndex,disabled:this.state.isLoading,className:"btn-default btn-block"},void 0,pgettext("avatar crop modal btn","Cancel")))))}}]),i}(f().Component),S=a(48772);var O,T=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),t=n.call(this,e),(0,p.Z)((0,l.Z)(t),"pickFile",(function(){document.getElementById("avatar-hidden-upload").click()})),(0,p.Z)((0,l.Z)(t),"uploadFile",(function(){var e=document.getElementById("avatar-hidden-upload").files[0];if(e){var a=t.validateFile(e);if(a)k.Z.error(a);else{t.setState({image:e,preview:URL.createObjectURL(e),progress:0});var n=new FormData;n.append("avatar","upload"),n.append("image",e),N.Z.upload(t.props.user.api.avatar,n,(function(e){t.setState({progress:e})})).then((function(e){t.setState({options:e,uploaded:e.detail}),k.Z.info(pgettext("avatar upload modal","Your image has been uploaded and you may now crop it."))}),(function(e){400===e.status||413===e.status?(k.Z.error(e.detail),t.setState({isLoading:!1,image:null,progress:0})):t.props.showError(e)}))}}})),t.state={image:null,preview:null,progress:0,uploaded:null,dataUrl:null},t}return(0,r.Z)(i,[{key:"validateFile",value:function(e){if(e.size>this.props.options.upload.limit)return interpolate(pgettext("avatar upload modal","Selected file is too big. (%(filesize)s)"),{filesize:(0,S.Z)(e.size)},!0);var t=pgettext("avatar upload modal","Selected file type is not supported.");if(-1===this.props.options.upload.allowed_mime_types.indexOf(e.type))return t;var a=!1,n=e.name.toLowerCase();return this.props.options.upload.allowed_extensions.map((function(e){n.substr(-1*e.length)===e&&(a=!0)})),!a&&t}},{key:"getUploadRequirements",value:function(e){var t=e.allowed_extensions.map((function(e){return e.substr(1)}));return interpolate(pgettext("avatar upload modal","%(files)s files smaller than %(limit)s"),{files:t.join(", "),limit:(0,S.Z)(e.limit)},!0)}},{key:"getUploadButton",value:function(){return(0,s.Z)("div",{className:"modal-body modal-avatar-upload"},void 0,(0,s.Z)(y.Z,{className:"btn-pick-file",onClick:this.pickFile},void 0,R||(R=(0,s.Z)("div",{className:"material-icon"},void 0,"input")),pgettext("avatar upload modal field","Select file")),(0,s.Z)("p",{className:"text-muted"},void 0,this.getUploadRequirements(this.props.options.upload)))}},{key:"getUploadProgressLabel",value:function(){return interpolate(pgettext("avatar upload modal field","%(progress)s % complete"),{progress:this.state.progress},!0)}},{key:"getUploadProgress",value:function(){return(0,s.Z)("div",{className:"modal-body modal-avatar-upload"},void 0,(0,s.Z)("div",{className:"upload-progress"},void 0,(0,s.Z)("img",{src:this.state.preview}),(0,s.Z)("div",{className:"progress"},void 0,(0,s.Z)("div",{className:"progress-bar",role:"progressbar","aria-valuenow":"{this.state.progress}","aria-valuemin":"0","aria-valuemax":"100",style:{width:this.state.progress+"%"}},void 0,(0,s.Z)("span",{className:"sr-only"},void 0,this.getUploadProgressLabel())))))}},{key:"renderUpload",value:function(){return(0,s.Z)("div",{},void 0,(0,s.Z)("input",{type:"file",id:"avatar-hidden-upload",className:"hidden-file-upload",onChange:this.uploadFile}),this.state.image?this.getUploadProgress():this.getUploadButton(),(0,s.Z)("div",{className:"modal-footer"},void 0,(0,s.Z)("div",{className:"col-md-6 col-md-offset-3"},void 0,(0,s.Z)(y.Z,{onClick:this.props.showIndex,disabled:!!this.state.image,className:"btn-default btn-block"},void 0,pgettext("avatar upload modal btn","Cancel")))))}},{key:"renderCrop",value:function(){return(0,s.Z)(E,{options:this.state.options,user:this.props.user,upload:this.state.uploaded,dataUrl:this.state.preview,onComplete:this.props.onComplete,showError:this.props.showError,showIndex:this.props.showIndex})}},{key:"render",value:function(){return this.state.uploaded?this.renderCrop():this.renderUpload()}}]),i}(f().Component),P=a(87462),L=(a(54385),a(69130));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.Z)(e);if(t){var i=(0,d.Z)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,u.Z)(this,a)}}var I,B,j,D=function(e){(0,c.Z)(a,e);var t=A(a);function a(){var e;(0,o.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,p.Z)((0,l.Z)(e),"select",(function(){e.props.select(e.props.id)})),e}return(0,r.Z)(a,[{key:"getClassName",value:function(){return this.props.selection===this.props.id?this.props.disabled?"btn btn-avatar btn-disabled avatar-selected":"btn btn-avatar avatar-selected":this.props.disabled?"btn btn-avatar btn-disabled":"btn btn-avatar"}},{key:"render",value:function(){return(0,s.Z)("button",{type:"button",className:this.getClassName(),disabled:this.props.disabled,onClick:this.select},void 0,(0,s.Z)("img",{src:this.props.url}))}}]),a}(f().Component),z=function(e){(0,c.Z)(a,e);var t=A(a);function a(){return(0,o.Z)(this,a),t.apply(this,arguments)}return(0,r.Z)(a,[{key:"render",value:function(){var e=this;return(0,s.Z)("div",{className:"avatars-gallery"},void 0,(0,s.Z)("h3",{},void 0,this.props.name),(0,s.Z)("div",{className:"avatars-gallery-images"},void 0,(0,L.Z)(this.props.images,4,null).map((function(t,a){return(0,s.Z)("div",{className:"row"},a,t.map((function(t,a){return(0,s.Z)("div",{className:"col-xs-3"},a,t?f().createElement(D,(0,P.Z)({disabled:e.props.disabled,select:e.props.select,selection:e.props.selection},t)):O||(O=(0,s.Z)("div",{className:"blank-avatar"})))})))}))))}}]),a}(f().Component),U=function(e){(0,c.Z)(a,e);var t=A(a);function a(e){var n;return(0,o.Z)(this,a),n=t.call(this,e),(0,p.Z)((0,l.Z)(n),"select",(function(e){n.setState({selection:e})})),(0,p.Z)((0,l.Z)(n),"save",(function(){if(n.state.isLoading)return!1;n.setState({isLoading:!0}),N.Z.post(n.props.user.api.avatar,{avatar:"galleries",image:n.state.selection}).then((function(e){n.setState({isLoading:!1}),k.Z.success(e.detail),n.props.onComplete(e),n.props.showIndex()}),(function(e){400===e.status?(k.Z.error(e.detail),n.setState({isLoading:!1})):n.props.showError(e)}))})),n.state={selection:null,isLoading:!1},n}return(0,r.Z)(a,[{key:"render",value:function(){var e=this;return(0,s.Z)("div",{},void 0,(0,s.Z)("div",{className:"modal-body modal-avatar-gallery"},void 0,this.props.options.galleries.map((function(t,a){return(0,s.Z)(z,{name:t.name,images:t.images,selection:e.state.selection,disabled:e.state.isLoading,select:e.select},a)}))),(0,s.Z)("div",{className:"modal-footer"},void 0,(0,s.Z)("div",{className:"row"},void 0,(0,s.Z)("div",{className:"col-md-6 col-md-offset-3"},void 0,(0,s.Z)(y.Z,{onClick:this.save,loading:this.state.isLoading,disabled:!this.state.selection,className:"btn-primary btn-block"},void 0,this.state.selection?pgettext("avatar gallery modal btn","Save choice"):pgettext("avatar gallery modal btn","Select avatar")),(0,s.Z)(y.Z,{onClick:this.props.showIndex,disabled:this.state.isLoading,className:"btn-default btn-block"},void 0,pgettext("avatar gallery modal btn","Cancel"))))))}}]),a}(f().Component),M=a(3784),q=a(6935),F=a(90287);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.Z)(e);if(t){var i=(0,d.Z)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,u.Z)(this,a)}}var Y=function(e){(0,c.Z)(a,e);var t=H(a);function a(){return(0,o.Z)(this,a),t.apply(this,arguments)}return(0,r.Z)(a,[{key:"getErrorReason",value:function(){return this.props.reason?(0,s.Z)("p",{dangerouslySetInnerHTML:{__html:this.props.reason}}):null}},{key:"render",value:function(){return(0,s.Z)("div",{className:"modal-body"},void 0,I||(I=(0,s.Z)("div",{className:"message-icon"},void 0,(0,s.Z)("span",{className:"material-icon"},void 0,"remove_circle_outline"))),(0,s.Z)("div",{className:"message-body"},void 0,(0,s.Z)("p",{className:"lead"},void 0,this.props.message),this.getErrorReason(),(0,s.Z)("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},void 0,pgettext("avatar modal dismiss","Ok"))))}}]),a}(f().Component),V=function(e){(0,c.Z)(a,e);var t=H(a);function a(){var e;(0,o.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,p.Z)((0,l.Z)(e),"showError",(function(t){e.setState({error:t})})),(0,p.Z)((0,l.Z)(e),"showIndex",(function(){e.setState({component:w})})),(0,p.Z)((0,l.Z)(e),"showUpload",(function(){e.setState({component:T})})),(0,p.Z)((0,l.Z)(e),"showCrop",(function(){e.setState({component:E})})),(0,p.Z)((0,l.Z)(e),"showGallery",(function(){e.setState({component:U})})),(0,p.Z)((0,l.Z)(e),"completeFlow",(function(t){F.Z.dispatch((0,q.n1)(e.props.user,t.avatars)),e.setState({component:w,options:t})})),e}return(0,r.Z)(a,[{key:"componentDidMount",value:function(){var e=this;N.Z.get(this.props.user.api.avatar).then((function(t){e.setState({component:w,options:t,error:null})}),(function(t){e.showError(t)}))}},{key:"getBody",value:function(){return this.state?this.state.error?(0,s.Z)(Y,{message:this.state.error.detail,reason:this.state.error.reason}):(0,s.Z)(this.state.component,{options:this.state.options,user:this.props.user,onComplete:this.completeFlow,showError:this.showError,showIndex:this.showIndex,showCrop:this.showCrop,showUpload:this.showUpload,showGallery:this.showGallery}):B||(B=(0,s.Z)(M.Z,{}))}},{key:"getClassName",value:function(){return this.state&&this.state.error?"modal-dialog modal-message modal-change-avatar":"modal-dialog modal-change-avatar"}},{key:"render",value:function(){return(0,s.Z)("div",{className:this.getClassName(),role:"document"},void 0,(0,s.Z)("div",{className:"modal-content"},void 0,(0,s.Z)("div",{className:"modal-header"},void 0,(0,s.Z)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":pgettext("modal","Close")},void 0,j||(j=(0,s.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,s.Z)("h4",{className:"modal-title"},void 0,pgettext("avatar modal title","Change your avatar"))),this.getBody()))}}]),a}(f().Component);function G(e){return{user:e.auth.user}}var $,W,Q,X,K,J,ee=a(49021);function te(){document.getElementById("hidden-logout-form").submit()}var ae=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),t=n.call(this,e),(0,p.Z)((0,l.Z)(t),"changeAvatar",(function(){t.props.close(),g.Z.show((0,Z.$j)(G)(V))})),(0,p.Z)((0,l.Z)(t),"revealOptions",(function(){t.setState({options:t.props.options,optionsMore:!1})})),e.dropdown?t.state={options:e.options.slice(0,2),optionsMore:e.options.length>2}:t.state={options:e.options,optionsMore:!1},t}return(0,r.Z)(i,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.close,n=e.dropdown,i=e.overlay;if(!t)return null;var o=misago.get("ADMIN_URL");return(0,s.Z)("ul",{className:v()("user-nav-menu",{"dropdown-menu-list":n,"overlay-menu-list":i})},void 0,(0,s.Z)("li",{className:"dropdown-menu-item"},void 0,(0,s.Z)("a",{href:t.url,className:"user-nav-profile"},void 0,(0,s.Z)("strong",{},void 0,t.username),(0,s.Z)("small",{},void 0,pgettext("user nav","Go to your profile")))),$||($=(0,s.Z)(ee.YV,{})),(0,s.Z)(ee.Xi,{},void 0,(0,s.Z)("a",{href:misago.get("NOTIFICATIONS_URL")},void 0,(0,s.Z)("span",{className:"material-icon"},void 0,t.unreadNotifications?"notifications_active":"notifications_none"),pgettext("user nav","Notifications"),!!t.unreadNotifications&&(0,s.Z)("span",{className:"badge"},void 0,t.unreadNotifications))),!!t.showPrivateThreads&&(0,s.Z)(ee.Xi,{},void 0,(0,s.Z)("a",{href:misago.get("PRIVATE_THREADS_URL")},void 0,W||(W=(0,s.Z)("span",{className:"material-icon"},void 0,"inbox")),pgettext("user nav","Private threads"),!!t.unreadPrivateThreads&&(0,s.Z)("span",{className:"badge"},void 0,t.unreadPrivateThreads))),!!o&&(0,s.Z)(ee.Xi,{},void 0,(0,s.Z)("a",{href:o,target:"_blank"},void 0,Q||(Q=(0,s.Z)("span",{className:"material-icon"},void 0,"security")),pgettext("user nav","Admin control panel"))),X||(X=(0,s.Z)(ee.YV,{})),(0,s.Z)(ee.iC,{className:"user-nav-options"},void 0,pgettext("user nav section","Account settings")),(0,s.Z)(ee.Xi,{},void 0,(0,s.Z)("button",{className:"btn-link",onClick:this.changeAvatar,type:"button"},void 0,K||(K=(0,s.Z)("span",{className:"material-icon"},void 0,"portrait")),pgettext("user nav","Change avatar"))),this.state.options.map((function(e){return(0,s.Z)(ee.Xi,{},e.icon,(0,s.Z)("a",{href:e.url},void 0,(0,s.Z)("span",{className:"material-icon"},void 0,e.icon),e.name))})),(0,s.Z)(ee.Xi,{},void 0,(0,s.Z)("button",{className:v()("btn-link",{"d-none":!this.state.optionsMore}),onClick:this.revealOptions,type:"button"},void 0,J||(J=(0,s.Z)("span",{className:"material-icon"},void 0,"more_vertical")),pgettext("user nav","See more"))),!!n&&(0,s.Z)(ee.kE,{listItem:!0},void 0,(0,s.Z)("button",{className:"btn btn-default btn-block",onClick:function(){te(),a()},type:"button"},void 0,pgettext("user nav","Log out"))))}}]),i}(f().Component);const ne=(0,Z.$j)((function(e){var t=e.auth.user;return t.id?{user:{username:t.username,unreadNotifications:t.unreadNotifications,unreadPrivateThreads:t.unread_private_threads,showPrivateThreads:t.acl.can_use_private_threads,url:t.url},options:(0,i.Z)(misago.get("userOptions"))}:{user:null}}))(ae);function ie(e){var t=e.close;return(0,s.Z)(ne,{close:t,dropdown:!0})}var se=a(993),oe=a(64836);const re=(0,Z.$j)((function(e){return{isOpen:e.overlay.userNav}}))((function(e){var t=e.dispatch,a=e.isOpen;return(0,s.Z)(oe.a,{open:a},void 0,(0,s.Z)(oe.i,{},void 0,pgettext("user nav title","Your options")),(0,s.Z)(ne,{close:function(){return t((0,se.xv)())},overlay:!0}),(0,s.Z)(ee.kE,{},void 0,(0,s.Z)("button",{className:"btn btn-default btn-block",onClick:function(){te(),t((0,se.xv)())},type:"button"},void 0,pgettext("user nav","Log out"))))}))},19605:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>s});var n=a(22928),i=(a(57588),a(54385));function s(e){var t=e.size||100,a=e.size2x||2*t;return(0,n.Z)("img",{alt:"",className:e.className||"user-avatar",src:o(e.user,t),srcSet:o(e.user,a),width:e.height||t,height:e.height||t})}function o(e,t){return e&&e.id?function(e,t){var a=e[0];return e.forEach((function(e){e.size>=t&&(a=e)})),a}(e.avatars,t).url:i.Z.get("BLANK_AVATAR_URL")}},82211:(e,t,a)=>{"use strict";a.d(t,{Z:()=>h});var n,i=a(22928),s=a(15671),o=a(43144),r=a(79340),l=a(6215),c=a(61120),u=a(57588),d=a.n(u),p=a(37848);var h=function(e){(0,r.Z)(d,e);var t,a,u=(t=d,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function d(){return(0,s.Z)(this,d),u.apply(this,arguments)}return(0,o.Z)(d,[{key:"render",value:function(){var e="btn "+this.props.className,t=this.props.disabled;return this.props.loading&&(e+=" btn-loading",t=!0),(0,i.Z)("button",{className:e,disabled:t,onClick:this.props.onClick,type:this.props.onClick?"button":"submit"},void 0,this.props.children,this.props.loading?n||(n=(0,i.Z)(p.Z,{})):null)}}]),d}(d().Component);h.defaultProps={className:"btn-default",type:"submit",loading:!1,disabled:!1,onClick:null}},57026:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(22928);function i(e){return(0,n.Z)("select",{className:e.className||"form-control",disabled:e.disabled||!1,id:e.id||null,onChange:e.onChange,value:e.value},void 0,e.choices.map((function(e){return(0,n.Z)("option",{disabled:e.disabled||!1,value:e.value},e.value,"- - ".repeat(e.level)+e.label)})))}a(57588)},96359:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var n=a(22928),i=a(15671),s=a(43144),o=a(79340),r=a(6215),l=a(61120),c=a(57588);var u=function(e){(0,o.Z)(u,e);var t,a,c=(t=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(a){var i=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,r.Z)(this,e)});function u(){return(0,i.Z)(this,u),c.apply(this,arguments)}return(0,s.Z)(u,[{key:"isValidated",value:function(){return void 0!==this.props.validation}},{key:"getClassName",value:function(){var e="form-group";return this.isValidated()&&(e+=" has-feedback",null===this.props.validation?e+=" has-success":e+=" has-error"),e}},{key:"getFeedback",value:function(){var e=this;return this.props.validation?(0,n.Z)("div",{className:"help-block errors"},void 0,this.props.validation.map((function(t,a){return(0,n.Z)("p",{},e.props.for+"FeedbackItem"+a,t)}))):null}},{key:"getFeedbackDescription",value:function(){return this.isValidated()?(0,n.Z)("span",{id:this.props.for+"_status",className:"sr-only"},void 0,this.props.validation?pgettext("field validation status","(error)"):pgettext("field validation status","(success)")):null}},{key:"getHelpText",value:function(){return this.props.helpText?(0,n.Z)("p",{className:"help-block"},void 0,this.props.helpText):null}},{key:"render",value:function(){return(0,n.Z)("div",{className:this.getClassName()},void 0,(0,n.Z)("label",{className:"control-label "+(this.props.labelClass||""),htmlFor:this.props.for||""},void 0,this.props.label+":"),(0,n.Z)("div",{className:this.props.controlClass||""},void 0,this.props.children,this.getFeedbackDescription(),this.getFeedback(),this.getHelpText(),this.props.extra||null))}}]),u}(a.n(c)().Component)},43345:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var n=a(15671),i=a(43144),s=a(97326),o=a(79340),r=a(6215),l=a(61120),c=a(4942),u=a(57588),d=a.n(u),p=a(55210),h=a(53904);var v=(0,p.C1)(),m=function(e){(0,o.Z)(d,e);var t,a,u=(t=d,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(a){var i=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,r.Z)(this,e)});function d(){var e;(0,n.Z)(this,d);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return e=u.call.apply(u,[this].concat(a)),(0,c.Z)((0,s.Z)(e),"bindInput",(function(t){return function(a){e.changeValue(t,a.target.value)}})),(0,c.Z)((0,s.Z)(e),"changeValue",(function(t,a){var n=(0,c.Z)({},t,a),i=e.state.errors||{};i[t]=e.validateField(t,n[t]),n.errors=i,e.setState(n)})),(0,c.Z)((0,s.Z)(e),"handleSubmit",(function(t){if(t&&t.preventDefault(),!e.state.isLoading&&e.clean()){e.setState({isLoading:!0});var a=e.send();a?a.then((function(t){e.setState({isLoading:!1}),e.handleSuccess(t)}),(function(t){e.setState({isLoading:!1}),e.handleError(t)})):e.setState({isLoading:!1})}})),e}return(0,i.Z)(d,[{key:"validate",value:function(){var e={};if(!this.state.validators)return e;var t={required:this.state.validators.required||this.state.validators,optional:this.state.validators.optional||{}},a=[];for(var n in t.required)t.required.hasOwnProperty(n)&&t.required[n]&&a.push(n);for(var i in t.optional)t.optional.hasOwnProperty(i)&&t.optional[i]&&a.push(i);for(var s in a){var o=a[s],r=this.validateField(o,this.state[o]);null===r?e[o]=null:r&&(e[o]=r)}return e}},{key:"isValid",value:function(){var e=this.validate();for(var t in e)if(e.hasOwnProperty(t)&&null!==e[t])return!1;return!0}},{key:"validateField",value:function(e,t){var a=[];if(!this.state.validators)return a;var n={required:(this.state.validators.required||this.state.validators)[e],optional:(this.state.validators.optional||{})[e]},i=v(t)||!1;if(n.required){if(i)a=[i];else for(var s in n.required){var o=n.required[s](t);o&&a.push(o)}return a.length?a:null}if(!1===i&&n.optional){for(var r in n.optional){var l=n.optional[r](t);l&&a.push(l)}return a.length?a:null}return!1}},{key:"clean",value:function(){return!0}},{key:"send",value:function(){return null}},{key:"handleSuccess",value:function(e){}},{key:"handleError",value:function(e){h.Z.apiError(e)}}]),d}(d().Component)},94417:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var n=a(22928),i=a(15671),s=a(43144),o=a(79340),r=a(6215),l=a(61120),c=a(57588);var u=function(e){(0,o.Z)(u,e);var t,a,c=(t=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(a){var i=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,r.Z)(this,e)});function u(){return(0,i.Z)(this,u),c.apply(this,arguments)}return(0,s.Z)(u,[{key:"isActive",value:function(){return this.props.isControlled?this.props.isActive:!!this.props.path&&0===document.location.pathname.indexOf(this.props.path)}},{key:"getClassName",value:function(){return this.isActive()?(this.props.className||"")+" "+(this.props.activeClassName||"active"):this.props.className||""}},{key:"render",value:function(){return(0,n.Z)("li",{className:this.getClassName()},void 0,this.props.children)}}]),u}(a.n(c)().Component)},37848:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n,i=a(22928);function s(e){return(0,i.Z)("div",{className:e.className||"loader"},void 0,n||(n=(0,i.Z)("div",{className:"loader-spinning-wheel"})))}a(57588)},52753:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>Z});var n,i=a(22928),s=a(15671),o=a(43144),r=a(97326),l=a(79340),c=a(6215),u=a(61120),d=a(4942),p=(a(57588),a(82211)),h=a(43345),v=a(96359),m=a(78657),f=a(59801);var Z=function(e){(0,l.Z)(v,e);var t,a,h=(t=v,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(a){var i=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function v(e){var t;return(0,s.Z)(this,v),t=h.call(this,e),(0,d.Z)((0,r.Z)(t),"handleSuccess",(function(e){t.props.onSuccess(e),f.Z.hide()})),(0,d.Z)((0,r.Z)(t),"handleError",(function(e){t.props.onError(e)})),(0,d.Z)((0,r.Z)(t),"onBestAnswerChange",(function(e){t.changeValue("bestAnswer",e.target.value)})),(0,d.Z)((0,r.Z)(t),"onPollChange",(function(e){t.changeValue("poll",e.target.value)})),t.state={isLoading:!1,bestAnswer:"0",poll:"0"},t}return(0,o.Z)(v,[{key:"clean",value:function(){return!this.props.polls||"0"!==this.state.poll||window.confirm(pgettext("merge threads conflict form","Are you sure you want to delete all polls?"))}},{key:"send",value:function(){var e=Object.assign({},this.props.data,{best_answer:this.state.bestAnswer,poll:this.state.poll});return m.Z.post(this.props.api,e)}},{key:"render",value:function(){return(0,i.Z)("div",{className:"modal-dialog",role:"document"},void 0,(0,i.Z)("div",{className:"modal-content"},void 0,(0,i.Z)("div",{className:"modal-header"},void 0,(0,i.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,n||(n=(0,i.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,i.Z)("h4",{className:"modal-title"},void 0,pgettext("merge threads conflict modal title","Merge threads"))),(0,i.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,i.Z)("div",{className:"modal-body"},void 0,(0,i.Z)(g,{choices:this.props.bestAnswers,onChange:this.onBestAnswerChange,value:this.state.bestAnswer}),(0,i.Z)(b,{choices:this.props.polls,onChange:this.onPollChange,value:this.state.poll})),(0,i.Z)("div",{className:"modal-footer"},void 0,(0,i.Z)("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},void 0,pgettext("merge threads conflict btn","Cancel")),(0,i.Z)(p.Z,{className:"btn-primary",loading:this.state.isLoading},void 0,pgettext("merge threads conflict btn","Merge threads"))))))}}]),v}(h.Z);function g(e){var t=e.choices,a=e.onChange,n=e.value;return t?(0,i.Z)(v.Z,{label:pgettext("merge threads conflict best answer","Best answer"),helpText:pgettext("merge threads conflict best answer","Select the best answer for your newly merged thread. No posts will be deleted during the merge."),for:"id_best_answer"},void 0,(0,i.Z)("select",{className:"form-control",id:"id_best_answer",onChange:a,value:n},void 0,t.map((function(e){return(0,i.Z)("option",{value:e[0]},e[0],e[1])})))):null}function b(e){var t=e.choices,a=e.onChange,n=e.value;return t?(0,i.Z)(v.Z,{label:pgettext("merge threads conflict poll","Poll"),helpText:pgettext("merge threads conflict poll","Select the poll for your newly merged thread. Rejected polls will be permanently deleted and cannot be recovered."),for:"id_poll"},void 0,(0,i.Z)("select",{className:"form-control",id:"id_poll",onChange:a,value:n},void 0,t.map((function(e){return(0,i.Z)("option",{value:e[0]},e[0],e[1])})))):null}},69092:(e,t,a)=>{"use strict";a.d(t,{Z:()=>g});var n=a(15671),i=a(43144),s=a(79340),o=a(6215),r=a(61120),l=a(94184),c=a.n(l),u=a(57588),d=a.n(u),p=a(4942),h=a(19755),v=new RegExp("^.*(?:(?:youtu.be/|v/|vi/|u/w/|embed/)|(?:(?:watch)??v(?:i)?=|&v(?:i)?=))([^#&?]*).*");const m=new(function(){function e(){var t=this;(0,n.Z)(this,e),(0,p.Z)(this,"render",(function(e){e&&(t.highlightCode(e),t.embedYoutubePlayers(e))})),this._youtube={}}return(0,i.Z)(e,[{key:"highlightCode",value:function(e){a.e(417).then(a.bind(a,15739)).then((function(t){for(var a=t.default,n=e.querySelectorAll("pre>code"),i=0;i<n.length;i++)a.highlightElement(n[i])}))}},{key:"embedYoutubePlayers",value:function(e){for(var t=e.querySelectorAll("p>a"),a=0;a<t.length;a++){var n=t[a],i=1===n.parentNode.childNodes.length;this._youtube[n.href]||(this._youtube[n.href]=f(n.href));var s=this._youtube[n.href];i&&s&&!1!==s.data&&this.swapYoutubePlayer(n,s)}}},{key:"swapYoutubePlayer",value:function(e,t){var a="https://www.youtube.com/embed/";a+=t.video,a+="?feature=oembed",t.start&&(a+="&start="+t.start);var n=h('<iframe class="embed-responsive-item" frameborder="0" src="'+a+'" allow="encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>');h(e).replaceWith(n),n.wrap('<div class="embed-responsive embed-responsive-16by9"></div>')}}]),e}());function f(e){var t=function(e){var t=e;return"https://"===e.substr(0,8)?t=t.substr(8):"http://"===e.substr(0,7)&&(t=t.substr(7)),"www."===t.substr(0,4)&&(t=t.substr(4)),t}(e),a=function(e){if(-1===e.indexOf("youtu"))return null;var t=e.match(v);return t?t[1]:null}(t);if(!a)return null;var n=0;if(t.indexOf("?")>0){var i=t.substr(t.indexOf("?")+1).split("&").filter((function(e){return"t="===e.substr(0,2)}))[0];if(i){var s=i.substr(2).split("m");"s"===s[0].substr(-1)?n+=parseInt(s[0].substr(0,s[0].length-1)):(n+=60*parseInt(s[0]),s[1]&&"s"===s[1].substr(-1)&&(n+=parseInt(s[1].substr(0,s[1].length-1))))}}return{start:n,video:a}}var Z=a(19755);var g=function(e){(0,s.Z)(u,e);var t,a,l=(t=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,r.Z)(t);if(a){var i=(0,r.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,o.Z)(this,e)});function u(){return(0,n.Z)(this,u),l.apply(this,arguments)}return(0,i.Z)(u,[{key:"componentDidMount",value:function(){m.render(this.documentNode),Z(this.documentNode).find(".spoiler-reveal").click(b)}},{key:"componentDidUpdate",value:function(e,t){m.render(this.documentNode),Z(this.documentNode).find(".spoiler-reveal").click(b)}},{key:"shouldComponentUpdate",value:function(e,t){return e.markup!==this.props.markup}},{key:"render",value:function(){var e=this;return d().createElement("article",{className:c()("misago-markup",this.props.className),dangerouslySetInnerHTML:{__html:this.props.markup},"data-author":this.props.author||void 0,ref:function(t){e.documentNode=t}})}}]),u}(d().Component);function b(e){var t=e.target;Z(t).parent().parent().addClass("revealed")}},3784:(e,t,a)=>{"use strict";a.d(t,{Z:()=>h});var n,i=a(22928),s=a(15671),o=a(43144),r=a(79340),l=a(6215),c=a(61120),u=a(57588),d=a.n(u),p=a(37848);var h=function(e){(0,r.Z)(d,e);var t,a,u=(t=d,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function d(){return(0,s.Z)(this,d),u.apply(this,arguments)}return(0,o.Z)(d,[{key:"render",value:function(){return n||(n=(0,i.Z)("div",{className:"modal-body modal-loader"},void 0,(0,i.Z)(p.Z,{})))}}]),d}(d().Component)},30337:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var n=a(22928),i=a(15671),s=a(43144),o=a(79340),r=a(6215),l=a(61120);a(57588);var c=function(e){(0,o.Z)(u,e);var t,a,c=(t=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(a){var i=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,r.Z)(this,e)});function u(){return(0,i.Z)(this,u),c.apply(this,arguments)}return(0,s.Z)(u,[{key:"getHelpText",value:function(){return this.props.helpText?(0,n.Z)("p",{className:"help-block"},void 0,this.props.helpText):null}},{key:"render",value:function(){return(0,n.Z)("div",{className:"modal-body"},void 0,(0,n.Z)("div",{className:"message-icon"},void 0,(0,n.Z)("span",{className:"material-icon"},void 0,this.props.icon||"info_outline")),(0,n.Z)("div",{className:"message-body"},void 0,(0,n.Z)("p",{className:"lead"},void 0,this.props.message),this.getHelpText(),(0,n.Z)("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},void 0,pgettext("modal message dismiss btn","Ok"))))}}]),u}(a(33556).Z)},33556:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var n=a(22928),i=a(15671),s=a(43144),o=a(79340),r=a(6215),l=a(61120),c=a(57588);var u=function(e){(0,o.Z)(u,e);var t,a,c=(t=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(a){var i=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,r.Z)(this,e)});function u(){return(0,i.Z)(this,u),c.apply(this,arguments)}return(0,s.Z)(u,[{key:"getHelpText",value:function(){return this.props.helpText?(0,n.Z)("p",{className:"help-block"},void 0,this.props.helpText):null}},{key:"render",value:function(){return(0,n.Z)("div",{className:"panel-body panel-message-body"},void 0,(0,n.Z)("div",{className:"message-icon"},void 0,(0,n.Z)("span",{className:"material-icon"},void 0,this.props.icon||"info_outline")),(0,n.Z)("div",{className:"message-body"},void 0,(0,n.Z)("p",{className:"lead"},void 0,this.props.message),this.getHelpText()))}}]),u}(a.n(c)().Component)},11005:(e,t,a)=>{"use strict";a.d(t,{Z:()=>x});var n=a(22928),i=a(57588),s=a.n(i),o=a(69092);function r(e){return e.post.content?s().createElement(l,e):s().createElement(c,e)}function l(e){return(0,n.Z)("div",{className:"post-body"},void 0,(0,n.Z)(o.Z,{markup:e.post.content}))}function c(e){return(0,n.Z)("div",{className:"post-body post-body-invalid"},void 0,(0,n.Z)("p",{className:"lead"},void 0,pgettext("post body invalid","This post's contents cannot be displayed.")),(0,n.Z)("p",{className:"text-muted"},void 0,pgettext("post body invalid","This error is caused by invalid post content manipulation.")))}function u(e){var t=e.post,a=t.category,i=t.thread,s=interpolate(pgettext("posts feed item header","posted %(posted_on)s"),{posted_on:t.posted_on.format("LL, LT")},!0);return(0,n.Z)("div",{className:"post-heading"},void 0,(0,n.Z)("a",{className:"btn btn-link item-title",href:i.url},void 0,i.title),(0,n.Z)("a",{className:"btn btn-link post-category",href:a.url.index},void 0,a.name),(0,n.Z)("a",{href:t.url.index,className:"btn btn-link posted-on",title:s},void 0,t.posted_on.fromNow()))}var d,p,h=a(19605);function v(e){var t=e.post;return(0,n.Z)("a",{className:"btn btn-default btn-icon pull-right",href:t.url.index},void 0,(0,n.Z)("span",{className:"btn-text-left hidden-xs"},void 0,pgettext("go to post link","See post")),d||(d=(0,n.Z)("span",{className:"material-icon"},void 0,"chevron_right")))}function m(e){var t=e.post;return(0,n.Z)("div",{className:"post-side post-side-anonymous"},void 0,(0,n.Z)(v,{post:t}),(0,n.Z)("div",{className:"media"},void 0,p||(p=(0,n.Z)("div",{className:"media-left"},void 0,(0,n.Z)("span",{},void 0,(0,n.Z)(h.ZP,{className:"poster-avatar",size:50})))),(0,n.Z)("div",{className:"media-body"},void 0,(0,n.Z)("div",{className:"media-heading"},void 0,(0,n.Z)("span",{className:"item-title"},void 0,t.poster_name)),(0,n.Z)("span",{className:"user-title user-title-anonymous"},void 0,pgettext("post removed poster username","Removed user")))))}function f(e){var t=e.rank,a=e.title||t.title||t.name,i="user-title";return t.css_class&&(i+=" user-title-"+t.css_class),t.is_tab?(0,n.Z)("a",{className:i,href:t.url},void 0,a):(0,n.Z)("span",{className:i},void 0,a)}function Z(e){var t=e.post,a=e.poster;return(0,n.Z)("div",{className:"post-side post-side-registered"},void 0,(0,n.Z)(v,{post:t}),(0,n.Z)("div",{className:"media"},void 0,(0,n.Z)("div",{className:"media-left"},void 0,(0,n.Z)("a",{href:a.url},void 0,(0,n.Z)(h.ZP,{className:"poster-avatar",size:50,user:a}))),(0,n.Z)("div",{className:"media-body"},void 0,(0,n.Z)("div",{className:"media-heading"},void 0,(0,n.Z)("a",{className:"item-title",href:a.url},void 0,a.username)),(0,n.Z)(f,{title:a.title,rank:a.rank}))))}function g(e){var t=e.post,a=e.poster;return a&&a.id?(0,n.Z)(Z,{post:t,poster:a}):(0,n.Z)(m,{post:t})}function b(e){var t=e.post,a=e.poster||t.poster,i="post";return a&&a.rank.css_class&&(i+=" post-"+a.rank.css_class),(0,n.Z)("li",{className:i,id:"post-"+t.id},void 0,(0,n.Z)("div",{className:"panel panel-default panel-post"},void 0,(0,n.Z)("div",{className:"panel-body"},void 0,(0,n.Z)("div",{className:"panel-content"},void 0,(0,n.Z)(g,{post:t,poster:a}),(0,n.Z)(u,{post:t}),(0,n.Z)(r,{post:t})))))}var y,_,N=a(44039);function k(){return(0,n.Z)("ul",{className:"posts-list post-feed ui-preview"},void 0,(0,n.Z)("li",{className:"post"},void 0,(0,n.Z)("div",{className:"panel panel-default panel-post"},void 0,(0,n.Z)("div",{className:"panel-body"},void 0,(0,n.Z)("div",{className:"panel-content"},void 0,(0,n.Z)("div",{className:"post-side post-side-anonymous"},void 0,(0,n.Z)("div",{className:"media"},void 0,y||(y=(0,n.Z)("div",{className:"media-left"},void 0,(0,n.Z)("span",{},void 0,(0,n.Z)(h.ZP,{className:"poster-avatar",size:50})))),(0,n.Z)("div",{className:"media-body"},void 0,(0,n.Z)("div",{className:"media-heading"},void 0,(0,n.Z)("span",{className:"item-title"},void 0,(0,n.Z)("span",{className:"ui-preview-text",style:{width:N.e(30,200)+"px"}},void 0," "))),(0,n.Z)("span",{className:"user-title user-title-anonymous"},void 0,(0,n.Z)("span",{className:"ui-preview-text",style:{width:N.e(30,200)+"px"}},void 0," "))))),(0,n.Z)("div",{className:"post-heading"},void 0,(0,n.Z)("span",{className:"ui-preview-text",style:{width:N.e(30,200)+"px"}},void 0," ")),(0,n.Z)("div",{className:"post-body"},void 0,(0,n.Z)("article",{className:"misago-markup"},void 0,(0,n.Z)("p",{},void 0,(0,n.Z)("span",{className:"ui-preview-text",style:{width:N.e(30,200)+"px"}},void 0," ")," ",(0,n.Z)("span",{className:"ui-preview-text",style:{width:N.e(30,200)+"px"}},void 0," ")," ",(0,n.Z)("span",{className:"ui-preview-text",style:{width:N.e(30,200)+"px"}},void 0," ")))))))))}function x(e){var t=e.isReady,a=e.posts,i=e.poster;return t?(0,n.Z)("ul",{className:"posts-list post-feed ui-ready"},void 0,a.map((function(e){return(0,n.Z)(b,{post:e,poster:i},e.id)}))):_||(_=(0,n.Z)(k,{}))}},9771:(e,t,a)=>{"use strict";a.d(t,{mv:()=>m,ZP:()=>la,MO:()=>A,Fi:()=>k});var n,i=a(57588),s=a.n(i),o=a(22928),r=a(43144),l=a(15671),c=a(97326),u=a(79340),d=a(6215),p=a(61120),h=a(4942),v=a(64646);var m=function(e){(0,u.Z)(m,e);var t,a,i=(t=m,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function m(e){var t;return(0,l.Z)(this,m),t=i.call(this,e),(0,h.Z)((0,c.Z)(t),"selected",(function(){if(t.element){var e=Z(t.element)||null,a=e?e.getBoundingClientRect():null;t.setState({range:e,rect:a})}})),(0,h.Z)((0,c.Z)(t),"reply",(function(){if(v.Z.isOpen()){var e=A();e&&!e.disabled&&(e.quote(k(t.state.range)),t.setState({range:null,rect:null}),f())}else{var a=k(t.state.range);v.Z.open(Object.assign({},t.props.posting,{default:a})),t.setState({range:null,rect:null}),window.setTimeout(f,1e3)}})),(0,h.Z)((0,c.Z)(t),"render",(function(){return(0,o.Z)("div",{},void 0,s().createElement("div",{ref:function(e){e&&(t.element=e)},onMouseUp:t.selected,onTouchEnd:t.selected},t.props.children),!!t.state.rect&&(0,o.Z)("div",{className:"quote-control",style:{position:"absolute",left:t.state.rect.left+window.scrollX,top:t.state.rect.bottom+window.scrollY}},void 0,n||(n=(0,o.Z)("div",{className:"quote-control-arrow"})),(0,o.Z)("div",{className:"quote-control-inner"},void 0,(0,o.Z)("button",{className:"btn quote-control-btn",type:"button",onClick:t.reply},void 0,pgettext("post reply","Quote")))))})),t.state={range:null,rect:null},t.element=null,t}return(0,r.Z)(m)}(s().Component);function f(){var e=document.querySelector("#posting-mount textarea");e.focus(),e.selectionStart=e.selectionEnd=e.value.length}var Z=function(e){if(void 0!==window.getSelection){var t=window.getSelection();if(t&&"Range"===t.type&&1===t.rangeCount){var a=t.getRangeAt(0);if(g(a,e)&&b(a)&&y(a.cloneContents()))return a}}},g=function(e,t){var a=e.commonAncestorContainer;if(a===t)return!0;for(var n=a.parentNode;n;){if(n===t)return!0;n=n.parentNode}return!1},b=function(e){var t=e.commonAncestorContainer;if("ARTICLE"===t.nodeName)return!0;if(t.dataset&&"1"===t.dataset.noquote)return!1;for(var a=t.parentNode;a;){if(a.dataset&&"1"===a.dataset.noquote)return!1;if("ARTICLE"===a.nodeName)return!0;a=a.parentNode}return!1},y=function e(t){for(var a=0;a<t.childNodes.length;a++){var n=t.childNodes[a];if(n.nodeType===Node.TEXT_NODE&&n.textContent&&n.textContent.trim().length>0)return!0;if("IMG"===n.nodeName)return!0;if(e(n))return!0}return!1},_=a(42982),N=a(70885);const k=function(e){var t=x(e),a=T(e.cloneContents().childNodes,[]),n=t?'[quote="'.concat(t,'"]\n'):"[quote]\n",i="\n[/quote]\n\n",s=R(e);return s?(n+=s.syntax?"[code=".concat(s.syntax,"]\n"):"[code]\n",i="\n[/code]"+i):S(e)?(a=a.trim(),n+="`",i="`"+i):a=a.trim(),n+a+i};var x=function(e){var t=e.commonAncestorContainer;if(w(t))return C(t);for(var a=t.parentNode;a;){if(w(a))return C(a);a=a.parentNode}return""},w=function(e){return e.nodeType===Node.ELEMENT_NODE&&("ARTICLE"===e.nodeName||"BLOCKQUOTE"===e.nodeName&&e.dataset&&"quote"===e.dataset.block)},C=function(e){return e.dataset&&e.dataset.author||null},R=function(e){var t=e.commonAncestorContainer;if(E(t))return O(t);for(var a=t.parentNode;a;){if(E(a))return O(a);a=a.parentNode}return null},E=function(e){return"PRE"===e.nodeName},S=function(e){var t=e.commonAncestorContainer;if("CODE"===t.nodeName)return!0;for(var a=t.parentNode;a;){if(w(a))return!1;if("CODE"===a.nodeName)return!0;a=a.parentNode}return!1},O=function(e){return e.dataset?{syntax:e.dataset.syntax||null}:{syntax:null}},T=function(e,t){for(var a="",n=0;n<e.length;n++){var i=e[n];a+=L(i,t)}return a},P={H1:["\n\n# ",""],H2:["\n\n## ",""],H3:["\n\n### ",""],H4:["\n\n#### ",""],H5:["\n\n##### ",""],H6:["\n\n###### ",""],STRONG:["**","**"],EM:["*","*"],DEL:["~~","~~"],B:["[b]","[/b]"],U:["[u]","[/u]"],I:["[i]","[/i]"],SUB:["[sub]","[/sub]"],SUP:["[sup]","[/sup]"]},L=function(e,t){var a=e.dataset||{};if(e.nodeType===Node.TEXT_NODE)return e.textContent||"";if(e.nodeType===Node.ELEMENT_NODE){if(a.quote)return a.quote||"";if("1"===a.noquote)return""}if(e.nodeType===Node.ELEMENT_NODE&&a.quote&&a.quote.trim())return"";if("HR"===e.nodeName)return"\n\n- - -";if(P[e.nodeName]){var n=(0,N.Z)(P[e.nodeName],2),i=n[0],s=n[1];return i+T(e.childNodes,[].concat((0,_.Z)(t),[e.nodeName]))+s}if("A"===e.nodeName){var o=e.href,r=T(e.childNodes,[].concat((0,_.Z)(t),[e.nodeName]));return r?"[".concat(r,"](").concat(o,")"):"!(".concat(o,")")}if("IMG"===e.nodeName){var l=e.src,c=e.alt;return c?"![".concat(c,"](").concat(l,")"):"!(".concat(l,")")}if("DIV"===e.nodeName||"ASIDE"===e.nodeName){var u=a.block&&a.block.toUpperCase();if(u&&P[u]){var d=(0,N.Z)(P[u],2),p=d[0],h=d[1];return p+T(e.childNodes,[].concat((0,_.Z)(t),[u]))+h}return T(e.childNodes,t)}if("BLOCKQUOTE"===e.nodeName){if("spoiler"===a.block){var v=T(e.childNodes,[].concat((0,_.Z)(t),["SPOILER"])).trim();if(!v)return"";var m="\n[spoiler]\n";return(m+=v)+"\n[/spoiler]"}var f=T(e.childNodes,[].concat((0,_.Z)(t),["QUOTE"])).trim();if(!f)return"";var Z=C(e),g=Z?"\n[quote=".concat(Z,"]\n"):"\n\n[quote]\n";return(g+=f)+"\n[/quote]"}if("PRE"===e.nodeName){var b=a.syntax||null,y=e.querySelector("code"),k=y&&y.innerText||"";return k.trim()?"\n[code"+(b?"="+b:"")+"]"+k+"[/code]":""}if("CODE"===e.nodeName)return"`"+e.innerText+"`";if("P"===e.nodeName)return"\n"+T(e.childNodes,[].concat((0,_.Z)(t),[e.nodeName]));if("UL"===e.nodeName||"OL"===e.nodeName)return(0===t.filter((function(e){return"OL"===e||"UL"===e})).length?"\n":"")+T(e.childNodes,[].concat((0,_.Z)(t),[e.nodeName]));if("LI"===e.nodeName){for(var x="",w=t.filter((function(e){return"OL"===e||"UL"===e})).length,R=1;R<w;R++)x+="    ";x+="OL"===t[t.length-1]?a.index?a.index+". ":"1. ":"- ";var E=T(e.childNodes,[].concat((0,_.Z)(t),[e.nodeName]));return E.trim()?"\n"+x+E:""}return"SPAN"===e.nodeName?T(e.childNodes,t):""};function A(){return window.misagoReply}function I(e,t){window.misagoReply={disabled:e,quote:t}}function B(){window.misagoReply=null}var j=a(57026),D=a(43345),z=a(30381),U=a.n(z);function M(e){return e.filter((function(e){return e.id&&!e.isRemoved})).map((function(e){return e.id}))}var q,F=a(12891),H=a(78657),Y=a(53904),V=a(94184),G=a.n(V),$=a(54385),W=a(69092),Q=a(59801),X=a(48772);function K(e){var t=e.attachment;return(0,o.Z)("div",{className:"modal-dialog modal-lg",role:"document"},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,(0,o.Z)("div",{className:"modal-header"},void 0,(0,o.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,q||(q=(0,o.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,o.Z)("h4",{className:"modal-title"},void 0,pgettext("markup editor","Attachment details"))),(0,o.Z)("div",{className:"modal-body"},void 0,!!t.is_image&&(0,o.Z)("div",{className:"markup-editor-attachment-modal-preview"},void 0,(0,o.Z)("a",{href:t.url.index+"?shva=1",target:"_blank"},void 0,(0,o.Z)("img",{src:t.url.index+"?shva=1",alt:""}))),(0,o.Z)("div",{className:"markup-editor-attachment-modal-filename"},void 0,t.filename),(0,o.Z)("div",{className:"row markup-editor-attachment-modal-details"},void 0,(0,o.Z)("div",{className:"col-xs-12 col-md-3"},void 0,(0,o.Z)("strong",{},void 0,t.filetype+", "+(0,X.Z)(t.size)),(0,o.Z)("div",{className:"text-muted"},void 0,(0,o.Z)("small",{},void 0,pgettext("markup editor","Type and size")))),(0,o.Z)("div",{className:"col-xs-12 col-md-4"},void 0,(0,o.Z)("strong",{},void 0,(0,o.Z)("abbr",{title:t.uploaded_on.format("LLL")},void 0,t.uploaded_on.fromNow())),(0,o.Z)("div",{className:"text-muted"},void 0,(0,o.Z)("small",{},void 0,pgettext("markup editor","Uploaded at")))),(0,o.Z)("div",{className:"col-xs-12 col-md-3"},void 0,t.url.uploader?(0,o.Z)("a",{href:t.url.uploader,target:"_blank",className:"item-title"},void 0,t.uploader_name):(0,o.Z)("span",{className:"item-title"},void 0,t.uploader_name),(0,o.Z)("div",{className:"text-muted"},void 0,(0,o.Z)("small",{},void 0,pgettext("markup editor","Uploader")))))),(0,o.Z)("div",{className:"modal-footer"},void 0,(0,o.Z)("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},void 0,pgettext("modal","Close")))))}var J,ee,te,ae,ne=function(e,t,a,n,i){var s=e.text||i||"",o=e.prefix;o+=a+s+n,t(o+=e.suffix),window.setTimeout((function(){re(e.textarea);var t=e.start+a.length;e.textarea.setSelectionRange(t,t+s.length)}),250)},ie=function(e,t,a){var n=e.prefix;n+=a,t(n+=e.suffix),window.setTimeout((function(){re(e.textarea);var t=e.end+a.length;e.textarea.setSelectionRange(t,t)}),250)},se=function(e){if(document.selection){e.focus();var t=document.selection.createRange(),a=t.text.length;return t.moveStart("character",-e.value.length),oe(e,t.text.length-a,t.text.length)}if(e.selectionStart||"0"==e.selectionStart)return oe(e,e.selectionStart,e.selectionEnd)},oe=function(e,t,a){return{textarea:e,start:t,end:a,text:e.value.substring(t,a),prefix:e.value.substring(0,t),suffix:e.value.substring(a)}};function re(e){var t=e.scrollTop;e.focus(),e.scrollTop=t}const le=function(e){var t,a=e.attachment,n=e.disabled,i=e.element,s=e.setState,r=e.update;return(0,o.Z)("div",{className:"markup-editor-attachments-item"},void 0,(0,o.Z)("div",{className:"markup-editor-attachment"},void 0,(0,o.Z)("div",{className:"markup-editor-attachment-details"},void 0,a.id?(0,o.Z)("a",{className:"item-title",href:a.url.index+"?shva=1",target:"_blank",onClick:function(e){e.preventDefault(),Q.Z.show(t||(t=(0,o.Z)(K,{attachment:a})))}},void 0,a.filename):(0,o.Z)("strong",{className:"item-title"},void 0,a.filename),(0,o.Z)("div",{className:"text-muted"},void 0,(0,o.Z)("ul",{className:"list-unstyled list-inline"},void 0,!a.id&&(0,o.Z)("li",{},void 0,a.progress+"%"),!!a.filetype&&(0,o.Z)("li",{},void 0,a.filetype),a.size>0&&(0,o.Z)("li",{},void 0,(0,X.Z)(a.size))))),!!a.id&&(0,o.Z)("div",{className:"markup-editor-attachment-buttons"},void 0,(0,o.Z)("button",{className:"btn btn-markup-editor-attachment btn-icon",title:pgettext("markup editor","Insert into message"),type:"button",disabled:n,onClick:function(){var e=function(e){var t="[";return e.is_image?(t+="!["+e.filename+"]",t+="("+(e.url.thumb||e.url.index)+"?shva=1)"):t+=e.filename,t+"]("+e.url.index+"?shva=1)"}(a),t=se(i);ie(t,r,e)}},void 0,J||(J=(0,o.Z)("span",{className:"material-icon"},void 0,"flip_to_front"))),(0,o.Z)("button",{className:"btn btn-markup-editor-attachment btn-icon",title:pgettext("markup editor","Remove attachment"),type:"button",disabled:n,onClick:function(){s((function(e){var t=e.attachments;if(window.confirm(pgettext("markup editor","Remove this attachment?")))return{attachments:t.filter((function(e){return e.id!==a.id}))}}))}},void 0,ee||(ee=(0,o.Z)("span",{className:"material-icon"},void 0,"close")))),!a.id&&!!a.key&&(0,o.Z)("div",{className:"markup-editor-attachment-buttons"},void 0,a.error&&(0,o.Z)("button",{className:"btn btn-markup-editor-attachment btn-icon",title:pgettext("markup editor","See error"),type:"button",onClick:function(){Y.Z.error(interpolate(pgettext("markup editor","%(filename)s: %(error)s"),{filename:a.filename,error:a.error},!0))}},void 0,te||(te=(0,o.Z)("span",{className:"material-icon"},void 0,"warning"))),(0,o.Z)("button",{className:"btn btn-markup-editor-attachment btn-icon",title:pgettext("markup editor","Remove attachment"),type:"button",disabled:n,onClick:function(){s((function(e){return{attachments:e.attachments.filter((function(e){return e.key!==a.key}))}}))}},void 0,ae||(ae=(0,o.Z)("span",{className:"material-icon"},void 0,"close"))))))},ce=function(e){var t=e.attachments,a=e.disabled,n=e.element,i=e.setState,s=e.update;return(0,o.Z)("div",{className:"markup-editor-attachments"},void 0,(0,o.Z)("div",{className:"markup-editor-attachments-container"},void 0,t.map((function(e){return(0,o.Z)(le,{attachment:e,disabled:a,element:n,setState:i,update:s},e.key||e.id)}))))};var ue,de=a(82211);const pe=function(e){var t=e.canProtect,a=e.disabled,n=e.empty,i=e.preview,s=e.isProtected,r=e.submitText,l=e.showPreview,c=e.closePreview,u=e.enableProtection,d=e.disableProtection;return(0,o.Z)("div",{className:"markup-editor-footer"},void 0,!!t&&(0,o.Z)(de.Z,{className:"btn-default btn-icon hidden-sm hidden-md hidden-lg",title:s?pgettext("markup editor","Protected"):pgettext("markup editor","Protect"),type:"button",disabled:a,onClick:function(){s?d():u()}},void 0,(0,o.Z)("span",{className:"material-icon"},void 0,s?"lock":"lock_open")),!!t&&(0,o.Z)("div",{},void 0,(0,o.Z)(de.Z,{className:"btn-default hidden-xs",type:"button",disabled:a,onClick:function(){s?d():u()}},void 0,(0,o.Z)("span",{className:"material-icon"},void 0,s?"lock":"lock_open"),s?pgettext("markup editor","Protected"):pgettext("markup editor","Protect"))),ue||(ue=(0,o.Z)("div",{className:"markup-editor-spacer"})),i?(0,o.Z)(de.Z,{className:"btn-default btn-auto",type:"button",onClick:c},void 0,pgettext("markup editor","Edit")):(0,o.Z)(de.Z,{className:"btn-default btn-auto",disabled:a||n,type:"button",onClick:l},void 0,pgettext("markup editor","Preview")),(0,o.Z)(de.Z,{className:"btn-primary btn-auto",disabled:a||n},void 0,r||pgettext("markup editor","Post")))};var he,ve=a(96359);var me=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,l.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"handleSubmit",(function(e){e.preventDefault();var a=t.props,n=a.selection,i=a.update,s=t.state.syntax.trim(),o=t.state.text.trim();if(0===o.length)return t.setState({error:gettext("This field is required.")}),!1;var r=n.prefix.trim().length?"\n\n":"";return ie(Object.assign({},n,{text:o}),i,r+"```"+s+"\n"+o+"\n```\n\n"),Q.Z.hide(),!1})),t.state={error:null,syntax:"",text:e.selection.text},t}return(0,r.Z)(i,[{key:"render",value:function(){var e=this;return(0,o.Z)("div",{className:"modal-dialog modal-lg",role:"document"},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,(0,o.Z)("div",{className:"modal-header"},void 0,(0,o.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,he||(he=(0,o.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,o.Z)("h4",{className:"modal-title"},void 0,pgettext("markup editor","Code"))),(0,o.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,o.Z)("div",{className:"modal-body"},void 0,(0,o.Z)(ve.Z,{for:"markup_code_syntax",label:pgettext("markup editor","Syntax highlighting")},void 0,(0,o.Z)("select",{id:"markup_code_syntax",className:"form-control",value:this.state.syntax,onChange:function(t){return e.setState({syntax:t.target.value})}},void 0,(0,o.Z)("option",{value:""},void 0,pgettext("markup editor","No syntax highlighting")),fe.map((function(e){var t=e.value,a=e.name;return(0,o.Z)("option",{value:t},t,a)})))),(0,o.Z)(ve.Z,{for:"markup_code_text",label:pgettext("markup editor","Code to insert"),validation:this.state.error?[this.state.error]:void 0},void 0,(0,o.Z)("textarea",{id:"markup_code_text",className:"form-control",rows:"8",value:this.state.text,onChange:function(t){return e.setState({text:t.target.value})}}))),(0,o.Z)("div",{className:"modal-footer"},void 0,(0,o.Z)("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},void 0,pgettext("markup editor","Cancel")),(0,o.Z)("button",{className:"btn btn-primary"},void 0,pgettext("markup editor","Insert code"))))))}}]),i}(s().Component),fe=[{value:"bash",name:"Bash"},{value:"c",name:"C"},{value:"c#",name:"C#"},{value:"c++",name:"C++"},{value:"css",name:"CSS"},{value:"diff",name:"Diff"},{value:"go",name:"Go"},{value:"graphql",name:"GraphQL"},{value:"html,",name:"HTML"},{value:"xml",name:"XML"},{value:"json",name:"JSON"},{value:"java",name:"Java"},{value:"javascript",name:"JavaScript"},{value:"kotlin",name:"Kotlin"},{value:"less",name:"Less"},{value:"lua",name:"Lua"},{value:"makefile",name:"Makefile"},{value:"markdown",name:"Markdown"},{value:"objective-C",name:"Objective-C"},{value:"php",name:"PHP"},{value:"perl",name:"Perl"},{value:"plain",name:"Plain"},{value:"text",name:"text"},{value:"python",name:"Python"},{value:"repl",name:"REPL"},{value:"r",name:"R"},{value:"ruby",name:"Ruby"},{value:"rust",name:"Rust"},{value:"scss",name:"SCSS"},{value:"sql",name:"SQL"},{value:"shell",name:"Shell Session"},{value:"swift",name:"Swift"},{value:"toml",name:"TOML"},{value:"ini",name:"INI"},{value:"typescript",name:"TypeScript"},{value:"visualbasic",name:"Visual Basic .NET"},{value:"webassembly",name:"WebAssembly"},{value:"yaml",name:"YAML"}];const Ze=me;var ge,be,ye,_e,Ne,ke,xe,we,Ce,Re,Ee,Se,Oe,Te,Pe,Le,Ae,Ie,Be,je,De,ze,Ue,Me,qe,Fe,He,Ye,Ve,Ge,$e,We,Qe,Xe,Ke,Je,et,tt,at,nt,it,st,ot,rt,lt;function ct(){return(0,o.Z)("div",{className:"modal-dialog modal-lg",role:"document"},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,(0,o.Z)("div",{className:"modal-header"},void 0,(0,o.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,ge||(ge=(0,o.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,o.Z)("h4",{className:"modal-title"},void 0,pgettext("markup help","Formatting help"))),(0,o.Z)("div",{className:"modal-body formatting-help"},void 0,(0,o.Z)("h4",{},void 0,pgettext("markup help","Emphasis text")),(0,o.Z)(ut,{markup:pgettext("markup help","_This text will have emphasis_"),result:(0,o.Z)("p",{},void 0,(0,o.Z)("em",{},void 0,pgettext("markup help","This text will have emphasis")))}),be||(be=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Bold text")),(0,o.Z)(ut,{markup:pgettext("markup help","**This text will be bold**"),result:(0,o.Z)("p",{},void 0,(0,o.Z)("strong",{},void 0,pgettext("markup help","This text will be bold")))}),ye||(ye=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Removed text")),(0,o.Z)(ut,{markup:pgettext("markup help","~~This text will be removed~~"),result:(0,o.Z)("p",{},void 0,(0,o.Z)("del",{},void 0,pgettext("markup help","This text will be removed")))}),_e||(_e=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Bold text (BBCode)")),(0,o.Z)(ut,{markup:pgettext("markup help","[b]This text will be bold[/b]"),result:(0,o.Z)("p",{},void 0,(0,o.Z)("b",{},void 0,pgettext("markup help","This text will be bold")))}),Ne||(Ne=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Underlined text (BBCode)")),(0,o.Z)(ut,{markup:pgettext("markup help","[u]This text will be underlined[/u]"),result:(0,o.Z)("p",{},void 0,(0,o.Z)("u",{},void 0,pgettext("markup help","This text will be underlined")))}),ke||(ke=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Italics text (BBCode)")),(0,o.Z)(ut,{markup:pgettext("markup help","[i]This text will be in italics[/i]"),result:(0,o.Z)("p",{},void 0,(0,o.Z)("i",{},void 0,pgettext("markup help","This text will be in italics")))}),xe||(xe=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Link")),we||(we=(0,o.Z)(ut,{markup:"<http://example.com>",result:(0,o.Z)("p",{},void 0,(0,o.Z)("a",{href:"#"},void 0,"example.com"))})),Ce||(Ce=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Link with text")),(0,o.Z)(ut,{markup:"["+pgettext("markup help","Link text")+"](http://example.com)",result:(0,o.Z)("p",{},void 0,(0,o.Z)("a",{href:"#"},void 0,pgettext("markup help","Link text")))}),Re||(Re=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Link (BBCode)")),Ee||(Ee=(0,o.Z)(ut,{markup:"[url]http://example.com[/url]",result:(0,o.Z)("p",{},void 0,(0,o.Z)("a",{href:"#"},void 0,"example.com"))})),Se||(Se=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Link with text (BBCode)")),(0,o.Z)(ut,{markup:"[url=http://example.com]"+pgettext("markup help","Link text")+"[/url]",result:(0,o.Z)("p",{},void 0,(0,o.Z)("a",{href:"#"},void 0,pgettext("markup help","Link text")))}),Oe||(Oe=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Image")),Te||(Te=(0,o.Z)(ut,{markup:"!(http://dummyimage.com/38/38)",result:(0,o.Z)("p",{},void 0,(0,o.Z)("img",{alt:"",src:"http://dummyimage.com/38/38"}))})),Pe||(Pe=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Image with alternate text")),(0,o.Z)(ut,{markup:"!["+pgettext("markup help","Image text")+"](http://dummyimage.com/38/38)",result:(0,o.Z)("p",{},void 0,(0,o.Z)("img",{alt:pgettext("markup help","Image text"),src:"http://dummyimage.com/38/38"}))}),Le||(Le=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Image (BBCode)")),Ae||(Ae=(0,o.Z)(ut,{markup:"[img]http://dummyimage.com/38/38[/img]",result:(0,o.Z)("p",{},void 0,(0,o.Z)("img",{alt:"",src:"http://dummyimage.com/38/38"}))})),Ie||(Ie=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Mention user by their name")),Be||(Be=(0,o.Z)(ut,{markup:"@username",result:(0,o.Z)("p",{},void 0,(0,o.Z)("a",{href:"#"},void 0,"@username"))})),je||(je=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Heading 1")),(0,o.Z)(ut,{markup:pgettext("markup help","# First level heading"),result:(0,o.Z)("h1",{},void 0,pgettext("markup help","First level heading"))}),De||(De=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Heading 2")),(0,o.Z)(ut,{markup:pgettext("markup help","## Second level heading"),result:(0,o.Z)("h2",{},void 0,pgettext("markup help","Second level heading"))}),ze||(ze=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Heading 3")),(0,o.Z)(ut,{markup:pgettext("markup help","### Third level heading"),result:(0,o.Z)("h3",{},void 0,pgettext("markup help","Third level heading"))}),Ue||(Ue=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Heading 4")),(0,o.Z)(ut,{markup:pgettext("markup help","#### Fourth level heading"),result:(0,o.Z)("h4",{},void 0,pgettext("markup help","Fourth level heading"))}),Me||(Me=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Heading 5")),(0,o.Z)(ut,{markup:pgettext("markup help","##### Fifth level heading"),result:(0,o.Z)("h5",{},void 0,pgettext("markup help","Fifth level heading"))}),qe||(qe=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Unordered list")),Fe||(Fe=(0,o.Z)(ut,{markup:"- Lorem ipsum\n- Dolor met\n- Vulputate lectus",result:(0,o.Z)("ul",{},void 0,(0,o.Z)("li",{},void 0,"Lorem ipsum"),(0,o.Z)("li",{},void 0,"Dolor met"),(0,o.Z)("li",{},void 0,"Vulputate lectus"))})),He||(He=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Ordered list")),Ye||(Ye=(0,o.Z)(ut,{markup:"1. Lorem ipsum\n2. Dolor met\n3. Vulputate lectus",result:(0,o.Z)("ol",{},void 0,(0,o.Z)("li",{},void 0,"Lorem ipsum"),(0,o.Z)("li",{},void 0,"Dolor met"),(0,o.Z)("li",{},void 0,"Vulputate lectus"))})),Ve||(Ve=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Quote text")),(0,o.Z)(ut,{markup:"> "+pgettext("markup help","Quoted text"),result:(0,o.Z)("blockquote",{},void 0,(0,o.Z)("p",{},void 0,pgettext("markup help","Quoted text")))}),Ge||(Ge=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Quote text (BBCode)")),(0,o.Z)(ut,{markup:"[quote]\n"+pgettext("markup help","Quoted text")+"\n[/quote]",result:(0,o.Z)("aside",{className:"quote-block"},void 0,(0,o.Z)("div",{className:"quote-heading"},void 0,gettext("Quoted message:")),(0,o.Z)("blockquote",{className:"quote-body"},void 0,(0,o.Z)("p",{},void 0,pgettext("markup help","Quoted text"))))}),$e||($e=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Quote text with author (BBCode)")),(0,o.Z)(ut,{markup:'[quote="'+pgettext("markup help","Quote author")+'"]\n'+pgettext("markup help","Quoted text")+"\n[/quote]",result:(0,o.Z)("aside",{className:"quote-block"},void 0,(0,o.Z)("div",{className:"quote-heading"},void 0,pgettext("markup help","Quote author has written:")),(0,o.Z)("blockquote",{className:"quote-body"},void 0,(0,o.Z)("p",{},void 0,pgettext("markup help","Quoted text"))))}),We||(We=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Spoiler")),(0,o.Z)(ut,{markup:"[spoiler]\n"+pgettext("markup help","Secret text")+"\n[/spoiler]",result:(0,o.Z)(pt,{},void 0,pgettext("markup help","Secret text"))}),Qe||(Qe=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Inline code")),(0,o.Z)(ut,{markup:pgettext("markup help","`Inline code`"),result:(0,o.Z)("p",{},void 0,(0,o.Z)("code",{},void 0,pgettext("markup help","Inline code")))}),Xe||(Xe=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Code block")),Ke||(Ke=(0,o.Z)(ut,{markup:'```\nalert("Hello world!");\n```',result:(0,o.Z)("pre",{},void 0,(0,o.Z)("code",{className:"hljs"},void 0,'alert("Hello world!");'))})),Je||(Je=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Code block with syntax highlighting")),et||(et=(0,o.Z)(ut,{markup:'```python\nprint("Hello world!");\n```',result:(0,o.Z)("pre",{},void 0,(0,o.Z)("code",{className:"hljs language-python"},void 0,(0,o.Z)("span",{className:"hljs-built_in"},void 0,"print"),'("Hello world!");'))})),tt||(tt=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Code block (BBCode)")),at||(at=(0,o.Z)(ut,{markup:'[code]\nalert("Hello world!");\n[/code]',result:(0,o.Z)("pre",{},void 0,(0,o.Z)("code",{className:"hljs"},void 0,'alert("Hello world!");'))})),nt||(nt=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Code block with syntax highlighting (BBCode)")),it||(it=(0,o.Z)(ut,{markup:'[code="python"]\nprint("Hello world!");\n[/code]',result:(0,o.Z)("pre",{},void 0,(0,o.Z)("code",{className:"hljs language-python"},void 0,(0,o.Z)("span",{className:"hljs-built_in"},void 0,"print"),'("Hello world!");'))})),st||(st=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Horizontal rule")),ot||(ot=(0,o.Z)(ut,{markup:"Lorem ipsum\n- - -\nDolor met",result:(0,o.Z)("div",{},void 0,(0,o.Z)("p",{},void 0,"Lorem ipsum"),(0,o.Z)("hr",{}),(0,o.Z)("p",{},void 0,"Dolor met"))})),rt||(rt=(0,o.Z)("hr",{})),(0,o.Z)("h4",{},void 0,pgettext("markup help","Horizontal rule (BBCode)")),lt||(lt=(0,o.Z)(ut,{markup:"Lorem ipsum\n[hr]\nDolor met",result:(0,o.Z)("div",{},void 0,(0,o.Z)("p",{},void 0,"Lorem ipsum"),(0,o.Z)("hr",{}),(0,o.Z)("p",{},void 0,"Dolor met"))}))),(0,o.Z)("div",{className:"modal-footer"},void 0,(0,o.Z)("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},void 0,pgettext("modal","Close")))))}function ut(e){var t=e.markup,a=e.result;return(0,o.Z)("div",{className:"formatting-help-item"},void 0,(0,o.Z)("div",{className:"formatting-help-item-markup"},void 0,(0,o.Z)("pre",{},void 0,(0,o.Z)("code",{},void 0,t))),(0,o.Z)("div",{className:"formatting-help-item-preview"},void 0,(0,o.Z)("article",{className:"misago-markup"},void 0,a)))}var dt,pt=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,l.Z)(this,i),(t=n.call(this,e)).state={reveal:!1},t}return(0,r.Z)(i,[{key:"render",value:function(){var e=this;return(0,o.Z)("aside",{className:this.state.reveal?"spoiler-block revealed":"spoiler-block"},void 0,(0,o.Z)("blockquote",{className:"spoiler-body"},void 0,(0,o.Z)("p",{},void 0,this.props.children)),!this.state.reveal&&(0,o.Z)("div",{className:"spoiler-overlay"},void 0,(0,o.Z)("button",{className:"spoiler-reveal",type:"button",onClick:function(){e.setState({reveal:!0})}},void 0,gettext("Reveal spoiler"))))}}]),i}(s().Component),ht=new RegExp("^(((ftps?)|(https?))://)","i");function vt(e){return ht.test(e.trim())}const mt=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;(0,l.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"handleSubmit",(function(e){e.preventDefault();var a=t.props,n=a.selection,i=a.update,s=t.state.text.trim(),o=t.state.url.trim();return 0===o.length?(t.setState({error:gettext("This field is required.")}),!1):(s.length>0?ie(n,i,"!["+s+"]("+o+")"):ie(n,i,"!("+o+")"),Q.Z.hide(),!1)}));var a=e.selection.text.trim(),s=vt(a);return t.state={error:null,text:s?"":a,url:s?a:""},t}return(0,r.Z)(i,[{key:"render",value:function(){var e=this;return(0,o.Z)("div",{className:"modal-dialog",role:"document"},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,(0,o.Z)("div",{className:"modal-header"},void 0,(0,o.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,dt||(dt=(0,o.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,o.Z)("h4",{className:"modal-title"},void 0,pgettext("markup editor","Image"))),(0,o.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,o.Z)("div",{className:"modal-body"},void 0,(0,o.Z)(ve.Z,{for:"markup_image_text",label:pgettext("markup editor","Image description"),helpText:pgettext("markup editor","Optional but recommended . Will be displayed instead of image when it fails to load.")},void 0,(0,o.Z)("input",{id:"markup_image_text",className:"form-control",type:"text",value:this.state.text,onChange:function(t){return e.setState({text:t.target.value})}})),(0,o.Z)(ve.Z,{for:"markup_image_url",label:pgettext("markup editor","Image URL"),validation:this.state.error?[this.state.error]:void 0},void 0,(0,o.Z)("input",{id:"markup_image_url",className:"form-control",type:"text",value:this.state.url,placeholder:"http://domain.com/image.png",onChange:function(t){return e.setState({url:t.target.value})}}))),(0,o.Z)("div",{className:"modal-footer"},void 0,(0,o.Z)("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},void 0,pgettext("markup editor","Cancel")),(0,o.Z)("button",{className:"btn btn-primary"},void 0,pgettext("markup editor","Insert image"))))))}}]),i}(s().Component);var ft;const Zt=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;(0,l.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"handleSubmit",(function(e){e.preventDefault();var a=t.props,n=a.selection,i=a.update,s=t.state.text.trim(),o=t.state.url.trim();return 0===o.length?(t.setState({error:gettext("This field is required.")}),!1):(s.length>0?ie(n,i,"["+s+"]("+o+")"):ie(n,i,"<"+o+">"),Q.Z.hide(),!1)}));var a=e.selection.text.trim(),s=vt(a);return t.state={error:null,text:s?"":a,url:s?a:""},t}return(0,r.Z)(i,[{key:"render",value:function(){var e=this;return(0,o.Z)("div",{className:"modal-dialog",role:"document"},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,(0,o.Z)("div",{className:"modal-header"},void 0,(0,o.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,ft||(ft=(0,o.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,o.Z)("h4",{className:"modal-title"},void 0,pgettext("markup editor","Link"))),(0,o.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,o.Z)("div",{className:"modal-body"},void 0,(0,o.Z)(ve.Z,{for:"markup_link_url",label:pgettext("markup editor","Link text"),helpText:pgettext("markup editor","Optional. Will be displayed instead of link's address.")},void 0,(0,o.Z)("input",{id:"markup_link_text",className:"form-control",type:"text",value:this.state.text,onChange:function(t){return e.setState({text:t.target.value})}})),(0,o.Z)(ve.Z,{for:"markup_link_url",label:pgettext("markup editor","Link address"),validation:this.state.error?[this.state.error]:void 0},void 0,(0,o.Z)("input",{id:"markup_link_url",className:"form-control",type:"text",value:this.state.url,onChange:function(t){return e.setState({url:t.target.value})}}))),(0,o.Z)("div",{className:"modal-footer"},void 0,(0,o.Z)("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},void 0,pgettext("markup editor","Cancel")),(0,o.Z)("button",{className:"btn btn-primary"},void 0,pgettext("markup editor","Insert link"))))))}}]),i}(s().Component);var gt;const bt=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,l.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"handleSubmit",(function(e){e.preventDefault();var a=t.props,n=a.selection,i=a.update,s=t.state.author.trim(),o=t.state.text.trim();if(0===o.length)return t.setState({error:gettext("This field is required.")}),!1;var r=n.prefix.trim().length?"\n\n":"";return ie(n,i,s?r+'[quote="'+s+'"]\n'+o+"\n[/quote]\n\n":r+"[quote]\n"+o+"\n[/quote]\n\n"),Q.Z.hide(),!1})),t.state={error:null,author:"",text:e.selection.text},t}return(0,r.Z)(i,[{key:"render",value:function(){var e=this;return(0,o.Z)("div",{className:"modal-dialog modal-lg",role:"document"},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,(0,o.Z)("div",{className:"modal-header"},void 0,(0,o.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,gt||(gt=(0,o.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,o.Z)("h4",{className:"modal-title"},void 0,pgettext("markup editor","Quote"))),(0,o.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,o.Z)("div",{className:"modal-body"},void 0,(0,o.Z)(ve.Z,{for:"markup_quote_author",label:pgettext("markup editor","Quote's author or source"),helpText:pgettext("markup editor",'Optional. If it\'s username, put "@" before it ("@JohnDoe").')},void 0,(0,o.Z)("input",{id:"markup_quote_author",className:"form-control",type:"text",value:this.state.author,onChange:function(t){return e.setState({author:t.target.value})}})),(0,o.Z)(ve.Z,{for:"markup_quote_text",label:pgettext("markup editor","Quoted text"),validation:this.state.error?[this.state.error]:void 0},void 0,(0,o.Z)("textarea",{id:"markup_quote_text",className:"form-control",rows:"8",value:this.state.text,onChange:function(t){return e.setState({text:t.target.value})}}))),(0,o.Z)("div",{className:"modal-footer"},void 0,(0,o.Z)("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},void 0,pgettext("markup editor","Cancel")),(0,o.Z)("button",{className:"btn btn-primary"},void 0,pgettext("markup editor","Insert quote"))))))}}]),i}(s().Component),yt=function(e){var t=e.disabled,a=e.icon,n=e.title,i=e.onClick;return(0,o.Z)("button",{className:"btn btn-markup-editor",title:n,type:"button",disabled:t,onClick:i},void 0,(0,o.Z)("span",{className:"material-icon"},void 0,a))};var _t=a(54031);const Nt=function(e,t){var a=1024*$.Z.get("user").acl.max_attachment_size;if(e.size>a)Y.Z.error(interpolate(pgettext("markup editor","File %(filename)s is bigger than %(limit)s."),{filename:e.name,limit:(0,X.Z)(a)},!0));else{var n={id:null,key:(0,_t.ZP)(32),error:null,uploaded_on:null,progress:0,filename:e.name,filetype:null,is_image:!1,size:e.size,url:null,uploader_name:null};t((function(e){var t=e.attachments;return{attachments:[n].concat(t)}}));var i=function(){t((function(e){return{attachments:e.attachments.concat()}}))},s=new FormData;s.append("upload",e),H.Z.upload($.Z.get("ATTACHMENTS_API"),s,(function(e){n.progress=e,i()})).then((function(e){Object.assign(n,e,{uploaded_on:U()(e.uploaded_on)}),i()}),(function(e){400===e.status||413===e.status?(n.error=e.detail,Y.Z.error(e.detail),i()):Y.Z.apiError(e)}))}};var kt,xt;const wt=function(e){var t=e.disabled,a=e.element,n=e.update,i=e.updateAttachments,s=[{name:pgettext("markup editor","Strong"),icon:"format_bold",onClick:function(){ne(se(a),n,"**","**",pgettext("example markup","Strong text"))}},{name:pgettext("markup editor","Emphasis"),icon:"format_italic",onClick:function(){ne(se(a),n,"*","*",pgettext("example markup","Text with emphasis"))}},{name:pgettext("markup editor","Strikethrough"),icon:"format_strikethrough",onClick:function(){ne(se(a),n,"~~","~~",pgettext("example markup","Text with strikethrough"))}},{name:pgettext("markup editor","Horizontal ruler"),icon:"remove",onClick:function(){ie(se(a),n,"\n\n- - -\n\n")}},{name:pgettext("markup editor","Link"),icon:"insert_link",onClick:function(){var e=se(a);Q.Z.show((0,o.Z)(Zt,{selection:e,element:a,update:n}))}},{name:pgettext("markup editor","Image"),icon:"insert_photo",onClick:function(){var e=se(a);Q.Z.show((0,o.Z)(mt,{selection:e,element:a,update:n}))}},{name:pgettext("markup editor","Quote"),icon:"format_quote",onClick:function(){var e=se(a);Q.Z.show((0,o.Z)(bt,{selection:e,element:a,update:n}))}},{name:pgettext("markup editor","Spoiler"),icon:"visibility_off",onClick:function(){!function(e,t){var a=se(e),n=a.prefix.trim().length?"\n\n":"";ne(a,t,n+"[spoiler]\n","\n[/spoiler]\n\n",pgettext("markup editor","Spoiler text"))}(a,n)}},{name:pgettext("markup editor","Code"),icon:"code",onClick:function(){var e=se(a);Q.Z.show((0,o.Z)(Ze,{selection:e,element:a,update:n}))}}];return $.Z.get("user").acl.max_attachment_size&&s.push({name:pgettext("markup editor","Upload file"),icon:"file_upload",onClick:function(){return e=i,(t=document.createElement("input")).type="file",t.multiple="multiple",t.addEventListener("change",(function(){for(var a=0;a<t.files.length;a++)Nt(t.files[a],e)})),void t.click();var e,t}}),(0,o.Z)("div",{className:"markup-editor-toolbar"},void 0,(0,o.Z)("div",{className:"markup-editor-toolbar-left"},void 0,s.map((function(e){var n=e.name,i=e.icon,s=e.onClick;return(0,o.Z)(yt,{title:n,icon:i,disabled:t||!a,onClick:s},i)}))),(0,o.Z)("div",{className:"markup-editor-toolbar-right"},void 0,(0,o.Z)("div",{className:"markup-editor-controls-dropdown"},void 0,(0,o.Z)("button",{type:"button",className:"btn btn-markup-editor dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:t||!a},void 0,kt||(kt=(0,o.Z)("span",{className:"material-icon"},void 0,"more_vert"))),(0,o.Z)("ul",{className:"dropdown-menu dropdown-menu-right stick-to-bottom"},void 0,s.map((function(e){var n=e.name,i=e.icon,s=e.onClick;return(0,o.Z)("li",{},i,(0,o.Z)("button",{type:"button",className:"btn-link",disabled:t||!a,onClick:s},void 0,(0,o.Z)("span",{className:"material-icon"},void 0,i),n))})))),(0,o.Z)(yt,{title:pgettext("markup editor","Open formatting help"),icon:"help_outline",onClick:function(){Q.Z.show(xt||(xt=(0,o.Z)(ct,{})))}})))};var Ct=a(19755);const Rt=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,l.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"showPreview",(function(){t.state.loading||(t.setState({loading:!0,preview:!0,element:null}),H.Z.post($.Z.get("PARSE_MARKUP_API"),{post:t.props.value}).then((function(e){t.setState({loading:!1,parsed:e.parsed})}),(function(e){400===e.status?Y.Z.error(e.detail):Y.Z.apiError(e),t.setState({loading:!1,preview:!1})})))})),(0,h.Z)((0,c.Z)(t),"closePreview",(function(){t.setState({loading:!1,preview:!1})})),(0,h.Z)((0,c.Z)(t),"onDrop",(function(e){if(e.preventDefault(),e.stopPropagation(),e.dataTransfer.files){var a=t.props.onAttachmentsChange;if($.Z.get("user").acl.max_attachment_size)for(var n=0;n<e.dataTransfer.files.length;n++){var i=e.dataTransfer.files[n];Nt(i,a)}}})),(0,h.Z)((0,c.Z)(t),"onPaste",(function(e){for(var a=t.props.onAttachmentsChange,n=[],i=0;i<e.clipboardData.items.length;i++){var s=e.clipboardData.items[i];"file"===s.kind&&n.push(s.getAsFile())}if(n.length&&(e.preventDefault(),e.stopPropagation(),$.Z.get("user").acl.max_attachment_size))for(var o=0;o<n.length;o++)Nt(n[o],a)})),(0,h.Z)((0,c.Z)(t),"render",(function(){return(0,o.Z)("div",{className:G()("markup-editor",{"markup-editor-focused":t.state.focused&&!t.state.preview})},void 0,(0,o.Z)(wt,{disabled:t.props.disabled||t.state.preview,element:t.state.element,update:function(e){return t.props.onChange({target:{value:e}})},updateAttachments:t.props.onAttachmentsChange}),t.state.preview?(0,o.Z)("div",{className:"markup-editor-preview"},void 0,t.state.loading?(0,o.Z)("div",{className:"markup-editor-preview-loading"},void 0,(0,o.Z)("div",{className:"ui-preview"},void 0,(0,o.Z)("span",{className:"ui-preview-text",style:{width:"240px"}}))):(0,o.Z)(W.Z,{className:"markup-editor-preview-contents",markup:t.state.parsed})):s().createElement("textarea",{className:"markup-editor-textarea form-control",placeholder:t.props.placeholder,value:t.props.value,disabled:t.props.disabled||t.state.loading,rows:6,ref:function(e){e&&t.state.element!==e&&(t.setState({element:e}),function(e,t){Ct(t).atwho({at:"@",displayTpl:'<li><img src="${avatar}" alt="">${username}</li>',insertTpl:"@${username}",searchKey:"username",callbacks:{remoteFilter:function(e,t){Ct.getJSON($.Z.get("MENTION_API"),{q:e},t)}}}),Ct(t).on("inserted.atwho",(function(t,a,n,i){var s=i.query,o=n.target.innerText.trim(),r=t.target.value.substr(0,s.headPos),l=t.target.value.substr(s.endPos);t.target.value=r+o+l,e.onChange(t);var c=s.headPos+o.length;t.target.setSelectionRange(c,c),t.target.focus()}))}(t.props,e))},onChange:t.props.onChange,onDrop:t.onDrop,onFocus:function(){return t.setState({focused:!0})},onPaste:t.onPaste,onBlur:function(){return t.setState({focused:!1})}}),t.props.attachments.length>0&&(0,o.Z)(ce,{attachments:t.props.attachments,disabled:t.props.disabled||t.state.preview,element:t.state.element,setState:t.props.onAttachmentsChange,update:function(e){return t.props.onChange({target:{value:e}})}}),(0,o.Z)(pe,{preview:t.state.preview,canProtect:t.props.canProtect,isProtected:t.props.isProtected,disabled:t.props.disabled,empty:t.props.value.trim().length<$.Z.get("SETTINGS").post_length_min||t.state.loading,enableProtection:t.props.enableProtection,disableProtection:t.props.disableProtection,showPreview:t.showPreview,closePreview:t.closePreview,submitText:t.props.submitText}))})),t.state={element:null,focused:!1,loading:!1,preview:!1,parsed:null},t}return(0,r.Z)(i)}(s().Component);var Et=a(92490);var St="posting-active",Ot="posting-default",Tt="posting-minimized",Pt="posting-fullscreen";const Lt=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(){return(0,l.Z)(this,i),n.apply(this,arguments)}return(0,r.Z)(i,[{key:"componentDidMount",value:function(){document.body.classList.add(St,Ot)}},{key:"componentWillUnmount",value:function(){document.body.classList.remove(St,Ot,Tt,Pt)}},{key:"componentWillReceiveProps",value:function(e){var t=e.fullscreen;e.minimized?(document.body.classList.remove(Ot,Pt),document.body.classList.add(Tt)):t?(document.body.classList.remove(Ot,Tt),document.body.classList.add(Pt)):(document.body.classList.remove(Pt,Tt),document.body.classList.add(Ot))}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.fullscreen,n=e.minimized;return(0,o.Z)("div",{className:G()("posting-dialog",{"posting-dialog-minimized":n,"posting-dialog-fullscreen":a&&!n})},void 0,(0,o.Z)("div",{className:"posting-dialog-container"},void 0,t))}}]),i}(s().Component),At=function(e){var t=e.children;return(0,o.Z)("div",{className:"posting-dialog-body"},void 0,t)};var It;const Bt=function(e){var t=e.close,a=e.message;return(0,o.Z)("div",{className:"posting-dialog-error"},void 0,It||(It=(0,o.Z)("div",{className:"posting-dialog-error-icon"},void 0,(0,o.Z)("span",{className:"material-icon"},void 0,"error_outlined"))),(0,o.Z)("div",{className:"posting-dialog-error-detail"},void 0,(0,o.Z)("p",{},void 0,a),(0,o.Z)("button",{type:"button",className:"btn btn-default",onClick:t},void 0,pgettext("modal","Close"))))};var jt,Dt,zt,Ut,Mt;const qt=function(e){var t=e.children,a=e.close,n=e.fullscreen,i=e.minimize,s=e.minimized,r=e.fullscreenEnter,l=e.fullscreenExit,c=e.open;return(0,o.Z)("div",{className:"posting-dialog-header"},void 0,(0,o.Z)("div",{className:"posting-dialog-caption"},void 0,t),s?(0,o.Z)("button",{className:"btn btn-posting-dialog",title:pgettext("dialog","Open"),type:"button",onClick:c},void 0,jt||(jt=(0,o.Z)("span",{className:"material-icon"},void 0,"expand_less"))):(0,o.Z)("button",{className:"btn btn-posting-dialog",title:pgettext("dialog","Minimize"),type:"button",onClick:i},void 0,Dt||(Dt=(0,o.Z)("span",{className:"material-icon"},void 0,"expand_more"))),n?(0,o.Z)("button",{className:"btn btn-posting-dialog hidden-xs",title:pgettext("dialog","Exit the fullscreen mode"),type:"button",onClick:l},void 0,zt||(zt=(0,o.Z)("span",{className:"material-icon"},void 0,"fullscreen_exit"))):(0,o.Z)("button",{className:"btn btn-posting-dialog hidden-xs",title:pgettext("dialog","Enter the fullscreen mode"),type:"button",onClick:r},void 0,Ut||(Ut=(0,o.Z)("span",{className:"material-icon"},void 0,"fullscreen"))),(0,o.Z)("button",{className:"btn btn-posting-dialog",title:pgettext("dialog","Cancel"),type:"button",onClick:a},void 0,Mt||(Mt=(0,o.Z)("span",{className:"material-icon"},void 0,"close"))))};var Ft,Ht,Yt,Vt,Gt,$t,Wt,Qt,Xt;function Kt(e){var t=e.isClosed,a=e.isHidden,n=e.isPinned,i=e.disabled,s=e.options,r=e.close,l=e.open,c=e.hide,u=e.unhide,d=e.pinGlobally,p=e.pinLocally,h=e.unpin,v=function(e,t,a){var n=[];return 2===a&&n.push("bookmark"),1===a&&n.push("bookmark_outline"),e&&n.push("lock"),t&&n.push("visibility_off"),n}(t,a,n);return(0,o.Z)("div",{className:"dropdown"},void 0,(0,o.Z)("button",{className:"btn btn-default btn-outline btn-icon",title:pgettext("post thread","Options"),"aria-expanded":"true","aria-haspopup":"true","data-toggle":"dropdown",type:"button",disabled:i},void 0,v.length>0?(0,o.Z)("span",{className:"btn-icons-family"},void 0,v.map((function(e){return(0,o.Z)("span",{className:"material-icon"},e,e)}))):Ft||(Ft=(0,o.Z)("span",{className:"material-icon"},void 0,"more_horiz"))),(0,o.Z)("ul",{className:"dropdown-menu dropdown-menu-right stick-to-bottom"},void 0,2===s.pin&&2!==n&&(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:d,type:"button",disabled:i},void 0,Ht||(Ht=(0,o.Z)("span",{className:"material-icon"},void 0,"bookmark")),pgettext("post thread","Pinned globally"))),s.pin>=n&&1!==n&&(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:p,type:"button",disabled:i},void 0,Yt||(Yt=(0,o.Z)("span",{className:"material-icon"},void 0,"bookmark_outline")),pgettext("post thread","Pinned in category"))),s.pin>=n&&0!==n&&(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:h,type:"button",disabled:i},void 0,Vt||(Vt=(0,o.Z)("span",{className:"material-icon"},void 0,"radio_button_unchecked")),pgettext("post thread","Not pinned"))),s.close&&!!t&&(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:l,type:"button",disabled:i},void 0,Gt||(Gt=(0,o.Z)("span",{className:"material-icon"},void 0,"lock_outline")),pgettext("post thread","Open"))),s.close&&!t&&(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:r,type:"button",disabled:i},void 0,$t||($t=(0,o.Z)("span",{className:"material-icon"},void 0,"lock")),pgettext("post thread","Closed"))),s.hide&&!!a&&(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:u,type:"button",disabled:i},void 0,Wt||(Wt=(0,o.Z)("span",{className:"material-icon"},void 0,"visibility")),pgettext("post thread","Visible"))),s.hide&&!a&&(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:c,type:"button",disabled:i},void 0,Qt||(Qt=(0,o.Z)("span",{className:"material-icon"},void 0,"visibility_off")),pgettext("post thread","Hidden")))))}var Jt=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,l.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"loadSuccess",(function(e){var a=null,n=null,i=e.map((function(e){return!1===e.post||a&&e.id!=t.state.category||(a=e.id,n=e.post),Object.assign(e,{disabled:!1===e.post,label:e.name,value:e.id})}));t.setState({isReady:!0,options:n,categories:i,category:a})})),(0,h.Z)((0,c.Z)(t),"loadError",(function(e){t.setState({error:e.detail})})),(0,h.Z)((0,c.Z)(t),"onCancel",(function(){if(0===t.state.post.length&&0===t.state.title.length&&0===t.state.attachments.length)return t.minimize(),v.Z.close();window.confirm(pgettext("post thread","Are you sure you want to discard thread?"))&&(t.minimize(),v.Z.close())})),(0,h.Z)((0,c.Z)(t),"onTitleChange",(function(e){t.changeValue("title",e.target.value)})),(0,h.Z)((0,c.Z)(t),"onCategoryChange",(function(e){var a=t.state.categories.find((function(t){return e.target.value==t.value})),n=t.state.pin;a.post.pin&&a.post.pin<n&&(n=a.post.pin),t.setState({category:a.id,categoryOptions:a.post,pin:n})})),(0,h.Z)((0,c.Z)(t),"onPostChange",(function(e){t.changeValue("post",e.target.value)})),(0,h.Z)((0,c.Z)(t),"onAttachmentsChange",(function(e){t.setState(e)})),(0,h.Z)((0,c.Z)(t),"onClose",(function(){t.changeValue("close",!0)})),(0,h.Z)((0,c.Z)(t),"onOpen",(function(){t.changeValue("close",!1)})),(0,h.Z)((0,c.Z)(t),"onPinGlobally",(function(){t.changeValue("pin",2)})),(0,h.Z)((0,c.Z)(t),"onPinLocally",(function(){t.changeValue("pin",1)})),(0,h.Z)((0,c.Z)(t),"onUnpin",(function(){t.changeValue("pin",0)})),(0,h.Z)((0,c.Z)(t),"onHide",(function(){t.changeValue("hide",!0)})),(0,h.Z)((0,c.Z)(t),"onUnhide",(function(){t.changeValue("hide",!1)})),(0,h.Z)((0,c.Z)(t),"close",(function(){t.minimize(),v.Z.close()})),(0,h.Z)((0,c.Z)(t),"minimize",(function(){t.setState({fullscreen:!1,minimized:!0})})),(0,h.Z)((0,c.Z)(t),"open",(function(){t.setState({minimized:!1}),t.state.fullscreen})),(0,h.Z)((0,c.Z)(t),"fullscreenEnter",(function(){t.setState({fullscreen:!0,minimized:!1})})),(0,h.Z)((0,c.Z)(t),"fullscreenExit",(function(){t.setState({fullscreen:!1,minimized:!1})})),t.state={isReady:!1,isLoading:!1,error:null,minimized:!1,fullscreen:!1,options:null,title:"",category:e.category||null,categories:[],post:"",attachments:[],close:!1,hide:!1,pin:0,validators:{title:(0,F.jn)(),post:(0,F.Jh)()},errors:{}},t}return(0,r.Z)(i,[{key:"componentDidMount",value:function(){H.Z.get(this.props.config).then(this.loadSuccess,this.loadError)}},{key:"clean",value:function(){if(!this.state.title.trim().length)return Y.Z.error(pgettext("posting form","You have to enter thread title.")),!1;if(!this.state.post.trim().length)return Y.Z.error(pgettext("posting form","You have to enter a message.")),!1;var e=this.validate();return e.title?(Y.Z.error(e.title[0]),!1):!e.post||(Y.Z.error(e.post[0]),!1)}},{key:"send",value:function(){return H.Z.post(this.props.submit,{title:this.state.title,category:this.state.category,post:this.state.post,attachments:M(this.state.attachments),close:this.state.close,hide:this.state.hide,pin:this.state.pin})}},{key:"handleSuccess",value:function(e){this.setState({isLoading:!0}),this.close(),Y.Z.success(pgettext("post thread","Your thread has been posted.")),window.location=e.url}},{key:"handleError",value:function(e){if(400===e.status){var t=[].concat(e.non_field_errors||[],e.category||[],e.title||[],e.post||[],e.attachments||[]);Y.Z.error(t[0])}else Y.Z.apiError(e)}},{key:"render",value:function(){var e={minimized:this.state.minimized,minimize:this.minimize,open:this.open,fullscreen:this.state.fullscreen,fullscreenEnter:this.fullscreenEnter,fullscreenExit:this.fullscreenExit,close:this.onCancel};if(this.state.error)return s().createElement(ea,e,(0,o.Z)(Bt,{message:this.state.error,close:this.close}));if(!this.state.isReady)return s().createElement(ea,e,(0,o.Z)("div",{className:"posting-loading ui-preview"},void 0,Xt||(Xt=(0,o.Z)(Et.o8,{className:"posting-dialog-toolbar"},void 0,(0,o.Z)(Et.Z2,{className:"posting-dialog-thread-title",auto:!0},void 0,(0,o.Z)(Et.Eg,{auto:!0},void 0,(0,o.Z)("input",{className:"form-control",disabled:!0,type:"text"}))),(0,o.Z)(Et.Z2,{className:"posting-dialog-category-select",auto:!0},void 0,(0,o.Z)(Et.Eg,{},void 0,(0,o.Z)("input",{className:"form-control",disabled:!0,type:"text"}))))),(0,o.Z)(Rt,{attachments:[],value:"",submitText:pgettext("post thread submit","Start thread"),disabled:!0,onAttachmentsChange:function(){},onChange:function(){}})));var t=!!(this.state.options.close||this.state.options.hide||this.state.options.pin);return s().createElement(ea,e,(0,o.Z)("form",{className:"posting-dialog-form",onSubmit:this.handleSubmit},void 0,(0,o.Z)(Et.o8,{className:"posting-dialog-toolbar"},void 0,(0,o.Z)(Et.Z2,{className:"posting-dialog-thread-title",auto:!0},void 0,(0,o.Z)(Et.Eg,{auto:!0},void 0,(0,o.Z)("input",{className:"form-control",disabled:this.state.isLoading,onChange:this.onTitleChange,placeholder:pgettext("post thread","Thread title"),type:"text",value:this.state.title}))),(0,o.Z)(Et.Z2,{className:"posting-dialog-category-select",auto:!0},void 0,(0,o.Z)(Et.Eg,{},void 0,(0,o.Z)(j.Z,{choices:this.state.categories,disabled:this.state.isLoading,onChange:this.onCategoryChange,value:this.state.category})),t&&(0,o.Z)(Et.Eg,{shrink:!0},void 0,(0,o.Z)(Kt,{isClosed:this.state.close,isHidden:this.state.hide,isPinned:this.state.pin,disabled:this.state.isLoading,options:this.state.options,close:this.onClose,open:this.onOpen,hide:this.onHide,unhide:this.onUnhide,pinGlobally:this.onPinGlobally,pinLocally:this.onPinLocally,unpin:this.onUnpin})))),(0,o.Z)(Rt,{attachments:this.state.attachments,value:this.state.post,submitText:pgettext("post thread submit","Start thread"),disabled:this.state.isLoading,onAttachmentsChange:this.onAttachmentsChange,onChange:this.onPostChange})))}}]),i}(D.Z),ea=function(e){var t=e.children,a=e.close,n=e.minimized,i=e.minimize,s=e.open,r=e.fullscreen,l=e.fullscreenEnter,c=e.fullscreenExit;return(0,o.Z)(Lt,{fullscreen:r,minimized:n},void 0,(0,o.Z)(qt,{fullscreen:r,fullscreenEnter:l,fullscreenExit:c,minimized:n,minimize:i,open:s,close:a},void 0,pgettext("post thread","Start new thread")),(0,o.Z)(At,{},void 0,t))};function ta(e){var t=e.split(",").map((function(e){return e.trim().toLowerCase()})).filter((function(e){return e.length>0}));return t.filter((function(e,a){return t.indexOf(e)==a}))}var aa=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;(0,l.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"onCancel",(function(){if(0===t.state.post.length&&0===t.state.title.length&&0===t.state.to.length&&0===t.state.attachments.length)return t.close();window.confirm(pgettext("post thread","Are you sure you want to discard private thread?"))&&t.close()})),(0,h.Z)((0,c.Z)(t),"onToChange",(function(e){t.changeValue("to",e.target.value)})),(0,h.Z)((0,c.Z)(t),"onTitleChange",(function(e){t.changeValue("title",e.target.value)})),(0,h.Z)((0,c.Z)(t),"onPostChange",(function(e){t.changeValue("post",e.target.value)})),(0,h.Z)((0,c.Z)(t),"onAttachmentsChange",(function(e){t.setState(e)})),(0,h.Z)((0,c.Z)(t),"close",(function(){t.minimize(),v.Z.close()})),(0,h.Z)((0,c.Z)(t),"minimize",(function(){t.setState({fullscreen:!1,minimized:!0})})),(0,h.Z)((0,c.Z)(t),"open",(function(){t.setState({minimized:!1}),t.state.fullscreen})),(0,h.Z)((0,c.Z)(t),"fullscreenEnter",(function(){t.setState({fullscreen:!0,minimized:!1})})),(0,h.Z)((0,c.Z)(t),"fullscreenExit",(function(){t.setState({fullscreen:!1,minimized:!1})}));var a=(e.to||[]).map((function(e){return e.username})).join(", ");return t.state={isLoading:!1,error:null,minimized:!1,fullscreen:!1,to:a,title:"",post:"",attachments:[],validators:{title:(0,F.jn)(),post:(0,F.Jh)()},errors:{}},t}return(0,r.Z)(i,[{key:"clean",value:function(){if(!ta(this.state.to).length)return Y.Z.error(pgettext("posting form","You have to enter at least one recipient.")),!1;if(!this.state.title.trim().length)return Y.Z.error(pgettext("posting form","You have to enter thread title.")),!1;if(!this.state.post.trim().length)return Y.Z.error(pgettext("posting form","You have to enter a message.")),!1;var e=this.validate();return e.title?(Y.Z.error(e.title[0]),!1):!e.post||(Y.Z.error(e.post[0]),!1)}},{key:"send",value:function(){return H.Z.post(this.props.submit,{to:ta(this.state.to),title:this.state.title,post:this.state.post,attachments:M(this.state.attachments)})}},{key:"handleSuccess",value:function(e){this.setState({isLoading:!0}),this.close(),Y.Z.success(pgettext("post thread","Your thread has been posted.")),window.location=e.url}},{key:"handleError",value:function(e){if(400===e.status){var t=[].concat(e.non_field_errors||[],e.to||[],e.title||[],e.post||[],e.attachments||[]);Y.Z.error(t[0])}else Y.Z.apiError(e)}},{key:"render",value:function(){var e={minimized:this.state.minimized,minimize:this.minimize,open:this.open,fullscreen:this.state.fullscreen,fullscreenEnter:this.fullscreenEnter,fullscreenExit:this.fullscreenExit,close:this.onCancel};return s().createElement(na,e,(0,o.Z)("form",{className:"posting-dialog-form",onSubmit:this.handleSubmit},void 0,(0,o.Z)(Et.o8,{className:"posting-dialog-toolbar"},void 0,(0,o.Z)(Et.Z2,{className:"posting-dialog-thread-recipients",auto:!0},void 0,(0,o.Z)(Et.Eg,{auto:!0},void 0,(0,o.Z)("input",{className:"form-control",disabled:this.state.isLoading,onChange:this.onToChange,placeholder:pgettext("post thread","Recipients, eg.: Danny, Lisa, Alice"),type:"text",value:this.state.to}))),(0,o.Z)(Et.Z2,{className:"posting-dialog-thread-title",auto:!0},void 0,(0,o.Z)(Et.Eg,{auto:!0},void 0,(0,o.Z)("input",{className:"form-control",disabled:this.state.isLoading,onChange:this.onTitleChange,placeholder:pgettext("post thread","Thread title"),type:"text",value:this.state.title})))),(0,o.Z)(Rt,{attachments:this.state.attachments,value:this.state.post,submitText:pgettext("post thread submit","Start thread"),disabled:this.state.isLoading,onAttachmentsChange:this.onAttachmentsChange,onChange:this.onPostChange})))}}]),i}(D.Z),na=function(e){var t=e.children,a=e.close,n=e.minimized,i=e.minimize,s=e.open,r=e.fullscreen,l=e.fullscreenEnter,c=e.fullscreenExit;return(0,o.Z)(Lt,{fullscreen:r,minimized:n},void 0,(0,o.Z)(qt,{fullscreen:r,fullscreenEnter:l,fullscreenExit:c,minimized:n,minimize:i,open:s,close:a},void 0,pgettext("post thread","Start private thread")),(0,o.Z)(At,{},void 0,t))};var ia=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,l.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"loadSuccess",(function(e){t.setState({isReady:!0,post:e.post?'[quote="@'+e.poster+'"]\n'+e.post+"\n[/quote]":t.state.post}),t.quoteText=e.post?'[quote="@'+e.poster+'"]\n'+e.post+"\n[/quote]":t.state.post})),(0,h.Z)((0,c.Z)(t),"loadError",(function(e){t.setState({error:e.detail})})),(0,h.Z)((0,c.Z)(t),"appendData",(function(e){var a=e.post?'[quote="@'+e.poster+'"]\n'+e.post+"\n[/quote]\n\n":"";t.setState((function(e,t){return e.post.length>0?{post:e.post.trim()+"\n\n"+a}:{post:a}})),t.open()})),(0,h.Z)((0,c.Z)(t),"onCancel",(function(){if(t.state.post===t.quoteText&&0===t.state.attachments.length)return t.close();window.confirm(pgettext("post reply","Are you sure you want to discard your reply?"))&&t.close()})),(0,h.Z)((0,c.Z)(t),"onPostChange",(function(e){t.changeValue("post",e.target.value)})),(0,h.Z)((0,c.Z)(t),"onAttachmentsChange",(function(e){t.setState(e)})),(0,h.Z)((0,c.Z)(t),"onQuote",(function(e){t.setState((function(t){var a=t.post;return a.length>0?{post:a.trim()+"\n\n"+e}:{post:e}})),t.open()})),(0,h.Z)((0,c.Z)(t),"close",(function(){t.minimize(),v.Z.close()})),(0,h.Z)((0,c.Z)(t),"minimize",(function(){t.setState({fullscreen:!1,minimized:!0})})),(0,h.Z)((0,c.Z)(t),"open",(function(){t.setState({minimized:!1}),t.state.fullscreen})),(0,h.Z)((0,c.Z)(t),"fullscreenEnter",(function(){t.setState({fullscreen:!0,minimized:!1})})),(0,h.Z)((0,c.Z)(t),"fullscreenExit",(function(){t.setState({fullscreen:!1,minimized:!1})})),t.state={isReady:!1,isLoading:!1,error:null,minimized:!1,fullscreen:!1,post:t.props.default||"",attachments:[],validators:{post:(0,F.Jh)()},errors:{}},t.quoteText="",t}return(0,r.Z)(i,[{key:"componentDidMount",value:function(){H.Z.get(this.props.config,this.props.context||null).then(this.loadSuccess,this.loadError),I(!1,this.onQuote)}},{key:"componentWillUnmount",value:function(){B()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.context,a=e.context;t&&a&&!a.reply||H.Z.get(e.config,e.context||null).then(this.appendData,Y.Z.apiError)}},{key:"clean",value:function(){if(!this.state.post.trim().length)return Y.Z.error(pgettext("posting form","You have to enter a message.")),!1;var e=this.validate();return!e.post||(Y.Z.error(e.post[0]),!1)}},{key:"send",value:function(){return I(!0,this.onQuote),H.Z.post(this.props.submit,{post:this.state.post,attachments:M(this.state.attachments)})}},{key:"handleSuccess",value:function(e){this.setState({isLoading:!0}),this.close(),I(!1,this.onQuote),Y.Z.success(pgettext("post reply","Your reply has been posted.")),window.location=e.url.index}},{key:"handleError",value:function(e){if(400===e.status){var t=[].concat(e.non_field_errors||[],e.post||[],e.attachments||[]);Y.Z.error(t[0])}else Y.Z.apiError(e);I(!1,this.onQuote)}},{key:"render",value:function(){var e={thread:this.props.thread,minimized:this.state.minimized,minimize:this.minimize,open:this.open,fullscreen:this.state.fullscreen,fullscreenEnter:this.fullscreenEnter,fullscreenExit:this.fullscreenExit,close:this.onCancel};return this.state.error?s().createElement(sa,e,(0,o.Z)(Bt,{message:this.state.error,close:this.close})):this.state.isReady?s().createElement(sa,e,(0,o.Z)("form",{className:"posting-dialog-form",method:"POST",onSubmit:this.handleSubmit},void 0,(0,o.Z)(Rt,{attachments:this.state.attachments,value:this.state.post,submitText:pgettext("post reply submit","Post reply"),disabled:this.state.isLoading,onAttachmentsChange:this.onAttachmentsChange,onChange:this.onPostChange}))):s().createElement(sa,e,(0,o.Z)("div",{className:"posting-loading ui-preview"},void 0,(0,o.Z)(Rt,{attachments:[],value:"",submitText:pgettext("post reply submit","Post reply"),disabled:!0,onAttachmentsChange:function(){},onChange:function(){}})))}}]),i}(D.Z),sa=function(e){var t=e.children,a=e.close,n=e.minimized,i=e.minimize,s=e.open,r=e.fullscreen,l=e.fullscreenEnter,c=e.fullscreenExit,u=e.thread;return(0,o.Z)(Lt,{fullscreen:r,minimized:n},void 0,(0,o.Z)(qt,{fullscreen:r,fullscreenEnter:l,fullscreenExit:c,minimized:n,minimize:i,open:s,close:a},void 0,interpolate(pgettext("post reply","Reply to: %(thread)s"),{thread:u.title},!0)),(0,o.Z)(At,{},void 0,t))};var oa=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,l.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"loadSuccess",(function(e){var a;t.originalPost=e.post,t.setState({isReady:!0,post:e.post,attachments:(a=e.attachments,a.map((function(e){return Object.assign({},e,{uploaded_on:U()(e.uploaded_on)})}))),protect:e.is_protected,canProtect:e.can_protect})})),(0,h.Z)((0,c.Z)(t),"loadError",(function(e){t.setState({error:e.detail})})),(0,h.Z)((0,c.Z)(t),"appendData",(function(e){var a=e.post?'[quote="@'+e.poster+'"]\n'+e.post+"\n[/quote]\n\n":"";t.setState((function(e,t){return e.post.length>0?{post:e.post.trim()+"\n\n"+a}:{post:a}})),t.open()})),(0,h.Z)((0,c.Z)(t),"onCancel",(function(){var e=t.state.originalPost===t.state.post,a=0===t.state.attachments.length;if(e&&a)return t.close();window.confirm(pgettext("edit reply","Are you sure you want to discard changes?"))&&t.close()})),(0,h.Z)((0,c.Z)(t),"onProtect",(function(){t.setState({protect:!0})})),(0,h.Z)((0,c.Z)(t),"onUnprotect",(function(){t.setState({protect:!1})})),(0,h.Z)((0,c.Z)(t),"onPostChange",(function(e){t.changeValue("post",e.target.value)})),(0,h.Z)((0,c.Z)(t),"onAttachmentsChange",(function(e){t.setState(e)})),(0,h.Z)((0,c.Z)(t),"onQuote",(function(e){t.setState((function(t){var a=t.post;return a.length>0?{post:a.trim()+"\n\n"+e}:{post:e}})),t.open()})),(0,h.Z)((0,c.Z)(t),"close",(function(){t.minimize(),v.Z.close()})),(0,h.Z)((0,c.Z)(t),"minimize",(function(){t.setState({fullscreen:!1,minimized:!0})})),(0,h.Z)((0,c.Z)(t),"open",(function(){t.setState({minimized:!1}),t.state.fullscreen})),(0,h.Z)((0,c.Z)(t),"fullscreenEnter",(function(){t.setState({fullscreen:!0,minimized:!1})})),(0,h.Z)((0,c.Z)(t),"fullscreenExit",(function(){t.setState({fullscreen:!1,minimized:!1})})),t.state={isReady:!1,isLoading:!1,error:!1,minimized:!1,fullscreen:!1,post:"",attachments:[],protect:!1,canProtect:!1,validators:{post:(0,F.Jh)()},errors:{}},t.originalPost="",t}return(0,r.Z)(i,[{key:"componentDidMount",value:function(){H.Z.get(this.props.config).then(this.loadSuccess,this.loadError),I(!1,this.onQuote)}},{key:"componentWillUnmount",value:function(){B()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.context,a=e.context;t&&a&&t.reply===a.reply||H.Z.get(e.config,e.context||null).then(this.appendData,Y.Z.apiError)}},{key:"clean",value:function(){if(!this.state.post.trim().length)return Y.Z.error(pgettext("posting form","You have to enter a message.")),!1;var e=this.validate();return!e.post||(Y.Z.error(e.post[0]),!1)}},{key:"send",value:function(){return I(!0,this.onQuote),H.Z.put(this.props.submit,{post:this.state.post,attachments:M(this.state.attachments),protect:this.state.protect})}},{key:"handleSuccess",value:function(e){this.setState({isLoading:!0}),this.close(),I(!1,this.onQuote),Y.Z.success(pgettext("edit reply","Reply has been edited.")),window.location=e.url.index}},{key:"handleError",value:function(e){if(400===e.status){var t=[].concat(e.non_field_errors||[],e.category||[],e.title||[],e.post||[],e.attachments||[]);Y.Z.error(t[0])}else Y.Z.apiError(e);I(!1,this.onQuote)}},{key:"render",value:function(){var e=this,t={post:this.props.post,minimized:this.state.minimized,minimize:this.minimize,open:this.open,fullscreen:this.state.fullscreen,fullscreenEnter:this.fullscreenEnter,fullscreenExit:this.fullscreenExit,close:this.onCancel};return this.state.error?s().createElement(ra,t,(0,o.Z)(Bt,{message:this.state.error,close:this.close})):this.state.isReady?s().createElement(ra,t,(0,o.Z)("form",{className:"posting-dialog-form",method:"POST",onSubmit:this.handleSubmit},void 0,(0,o.Z)(Rt,{attachments:this.state.attachments,canProtect:this.state.canProtect,isProtected:this.state.protect,enableProtection:function(){return e.setState({protect:!0})},disableProtection:function(){return e.setState({protect:!1})},value:this.state.post,submitText:pgettext("edit reply submit","Edit reply"),disabled:this.state.isLoading,onAttachmentsChange:this.onAttachmentsChange,onChange:this.onPostChange}))):s().createElement(ra,t,(0,o.Z)("div",{className:"posting-loading ui-preview"},void 0,(0,o.Z)(Rt,{attachments:[],value:"",submitText:pgettext("edit reply submit","Edit reply"),disabled:!0,onAttachmentsChange:function(){},onChange:function(){}})))}}]),i}(D.Z),ra=function(e){var t=e.children,a=e.close,n=e.minimized,i=e.minimize,s=e.open,r=e.fullscreen,l=e.fullscreenEnter,c=e.fullscreenExit,u=e.post;return(0,o.Z)(Lt,{fullscreen:r,minimized:n},void 0,(0,o.Z)(qt,{fullscreen:r,fullscreenEnter:l,fullscreenExit:c,minimized:n,minimize:i,open:s,close:a},void 0,interpolate(pgettext("edit reply","Edit reply by %(poster)s from %(date)s"),{poster:u.poster?u.poster.username:u.poster_name,date:u.posted_on.fromNow()},!0)),(0,o.Z)(At,{},void 0,t))};function la(e){switch(e.mode){case"START":return s().createElement(Jt,e);case"START_PRIVATE":return s().createElement(aa,e);case"REPLY":return s().createElement(ia,e);case"EDIT":return s().createElement(oa,e);default:return null}}},12891:(e,t,a)=>{"use strict";a.d(t,{Jh:()=>o,jn:()=>s});var n=a(55210),i=a(54385);function s(){return[(0,n.Ei)(i.Z.get("SETTINGS").thread_title_length_min,(function(e,t){var a=npgettext("thread title length validator","Thread title should be at least %(limit_value)s character long (it has %(show_value)s).","Thread title should be at least %(limit_value)s characters long (it has %(show_value)s).",e);return interpolate(a,{limit_value:e,show_value:t},!0)})),(0,n.BS)(i.Z.get("SETTINGS").thread_title_length_max,(function(e,t){var a=npgettext("thread title length validator","Thread title cannot be longer than %(limit_value)s character (it has %(show_value)s).","Thread title cannot be longer than %(limit_value)s characters (it has %(show_value)s).",e);return interpolate(a,{limit_value:e,show_value:t},!0)}))]}function o(){return i.Z.get("SETTINGS").post_length_max?[r(),(0,n.BS)(i.Z.get("SETTINGS").post_length_max||1e6,(function(e,t){var a=npgettext("post length validator","Posted message cannot be longer than %(limit_value)s character (it has %(show_value)s).","Posted message cannot be longer than %(limit_value)s characters (it has %(show_value)s).",e);return interpolate(a,{limit_value:e,show_value:t},!0)}))]:[r()]}function r(){return(0,n.Ei)(i.Z.get("SETTINGS").post_length_min,(function(e,t){var a=npgettext("post length validator","Posted message should be at least %(limit_value)s character long (it has %(show_value)s).","Posted message should be at least %(limit_value)s characters long (it has %(show_value)s).",e);return interpolate(a,{limit_value:e,show_value:t},!0)}))}},60471:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var n=a(22928),i=a(15671),s=a(43144),o=a(97326),r=a(79340),l=a(6215),c=a(61120),u=a(4942),d=a(57588);var p=function(e){(0,r.Z)(p,e);var t,a,d=(t=p,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function p(){var e;(0,i.Z)(this,p);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return e=d.call.apply(d,[this].concat(a)),(0,u.Z)((0,o.Z)(e),"change",(function(t){return function(){e.props.onChange({target:{value:t}})}})),e}return(0,s.Z)(p,[{key:"getChoice",value:function(){var e=this,t=null;return this.props.choices.map((function(a){a.value===e.props.value&&(t=a)})),t}},{key:"getIcon",value:function(){return this.getChoice().icon}},{key:"getLabel",value:function(){return this.getChoice().label}},{key:"render",value:function(){var e=this;return(0,n.Z)("div",{className:"btn-group btn-select-group"},void 0,(0,n.Z)("button",{type:"button",className:"btn btn-select dropdown-toggle",id:this.props.id||null,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false","aria-describedby":this.props["aria-describedby"]||null,disabled:this.props.disabled||!1},void 0,(0,n.Z)(h,{icon:this.getIcon()}),this.getLabel()),(0,n.Z)("ul",{className:"dropdown-menu"},void 0,this.props.choices.map((function(t,a){return(0,n.Z)("li",{},a,(0,n.Z)("button",{type:"button",className:"btn-link",onClick:e.change(t.value)},void 0,(0,n.Z)(h,{icon:t.icon}),t.label))}))))}}]),p}(a.n(d)().Component);function h(e){var t=e.icon;return t?(0,n.Z)("span",{className:"material-icon"},void 0,t):null}},14467:(e,t,a)=>{"use strict";a.d(t,{Z:()=>b});var n,i=a(22928),s=a(15671),o=a(43144),r=a(79340),l=a(6215),c=a(61120),u=(a(57588),a(54385)),d=a(82211),p=a(43345),h=a(47235),v=a(78657),m=a(59801),f=a(53904),Z=a(93051),g=a(19755);var b=function(e){(0,r.Z)(b,e);var t,a,p=(t=b,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function b(e){var t;return(0,s.Z)(this,b),(t=p.call(this,e)).state={isLoading:!1,showActivation:!1,username:"",password:"",validators:{username:[],password:[]}},t}return(0,o.Z)(b,[{key:"clean",value:function(){return!!this.isValid()||(f.Z.error(pgettext("sign in modal","Fill out both fields.")),!1)}},{key:"send",value:function(){return v.Z.post(u.Z.get("AUTH_API"),{username:this.state.username,password:this.state.password})}},{key:"handleSuccess",value:function(){var e=g("#hidden-login-form");e.append('<input type="text" name="username" />'),e.append('<input type="password" name="password" />'),e.find('input[type="hidden"]').val(v.Z.getCsrfToken()),e.find('input[name="redirect_to"]').val(window.location.pathname),e.find('input[name="username"]').val(this.state.username),e.find('input[name="password"]').val(this.state.password),e.submit(),this.setState({isLoading:!0})}},{key:"handleError",value:function(e){400===e.status?"inactive_admin"===e.code?f.Z.info(e.detail):"inactive_user"===e.code?(f.Z.info(e.detail),this.setState({showActivation:!0})):"banned"===e.code?((0,Z.Z)(e.detail),m.Z.hide()):f.Z.error(e.detail):403===e.status&&e.ban?((0,Z.Z)(e.ban),m.Z.hide()):f.Z.apiError(e)}},{key:"getActivationButton",value:function(){return this.state.showActivation?(0,i.Z)("a",{className:"btn btn-success btn-block",href:u.Z.get("REQUEST_ACTIVATION_URL")},void 0,pgettext("sign in modal btn","Activate account")):null}},{key:"render",value:function(){return(0,i.Z)("div",{className:"modal-dialog modal-sm modal-sign-in",role:"document"},void 0,(0,i.Z)("div",{className:"modal-content"},void 0,(0,i.Z)("div",{className:"modal-header"},void 0,(0,i.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,n||(n=(0,i.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,i.Z)("h4",{className:"modal-title"},void 0,pgettext("sign in modal title","Sign in"))),(0,i.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,i.Z)("div",{className:"modal-body"},void 0,(0,i.Z)(h.Z,{buttonLabel:pgettext("sign in modal","Sign in with %(site)s"),formLabel:pgettext("sign in modal","Or use your forum account:"),labelClassName:"text-center"}),(0,i.Z)("div",{className:"form-group"},void 0,(0,i.Z)("div",{className:"control-input"},void 0,(0,i.Z)("input",{className:"form-control input-lg",disabled:this.state.isLoading,id:"id_username",onChange:this.bindInput("username"),placeholder:pgettext("sign in modal field","Username or e-mail"),type:"text",value:this.state.username}))),(0,i.Z)("div",{className:"form-group"},void 0,(0,i.Z)("div",{className:"control-input"},void 0,(0,i.Z)("input",{className:"form-control input-lg",disabled:this.state.isLoading,id:"id_password",onChange:this.bindInput("password"),placeholder:pgettext("sign in modal field","Password"),type:"password",value:this.state.password})))),(0,i.Z)("div",{className:"modal-footer"},void 0,this.getActivationButton(),(0,i.Z)(d.Z,{className:"btn-primary btn-block",loading:this.state.isLoading},void 0,pgettext("sign in modal btn","Sign in")),(0,i.Z)("a",{className:"btn btn-default btn-block",href:u.Z.get("FORGOTTEN_PASSWORD_URL")},void 0,pgettext("sign in modal btn","Forgot password?"))))))}}]),b}(p.Z)},24678:(e,t,a)=>{"use strict";a.d(t,{Jj:()=>h,ZP:()=>p,pg:()=>v});var n=a(22928),i=a(15671),s=a(43144),o=a(79340),r=a(6215),l=a(61120),c=a(57588),u=a.n(c);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,r.Z)(this,a)}}var p=function(e){(0,o.Z)(a,e);var t=d(a);function a(){return(0,i.Z)(this,a),t.apply(this,arguments)}return(0,s.Z)(a,[{key:"getClass",value:function(){return e=this.props.status,t="",e.is_banned?t="banned":e.is_hidden?t="offline":e.is_online_hidden?t="online":e.is_offline_hidden?t="offline":e.is_online?t="online":e.is_offline&&(t="offline"),"user-status user-"+t;var e,t}},{key:"render",value:function(){return(0,n.Z)("span",{className:this.getClass()},void 0,this.props.children)}}]),a}(u().Component),h=function(e){(0,o.Z)(a,e);var t=d(a);function a(){return(0,i.Z)(this,a),t.apply(this,arguments)}return(0,s.Z)(a,[{key:"getIcon",value:function(){return this.props.status.is_banned?"remove_circle_outline":this.props.status.is_hidden?"help_outline":this.props.status.is_online_hidden?"label":this.props.status.is_offline_hidden?"label_outline":this.props.status.is_online?"lens":this.props.status.is_offline?"panorama_fish_eye":void 0}},{key:"render",value:function(){return(0,n.Z)("span",{className:"material-icon status-icon"},void 0,this.getIcon())}}]),a}(u().Component),v=function(e){(0,o.Z)(a,e);var t=d(a);function a(){return(0,i.Z)(this,a),t.apply(this,arguments)}return(0,s.Z)(a,[{key:"getHelp",value:function(){return e=this.props.user,(t=this.props.status).is_banned?t.banned_until?interpolate(pgettext("user status","%(username)s is banned until %(ban_expires)s"),{username:e.username,ban_expires:t.banned_until.format("LL, LT")},!0):interpolate(pgettext("user status","%(username)s is banned"),{username:e.username},!0):t.is_hidden?interpolate(pgettext("user status","%(username)s is hiding presence"),{username:e.username},!0):t.is_online_hidden?interpolate(pgettext("user status","%(username)s is online (hidden)"),{username:e.username},!0):t.is_offline_hidden?interpolate(pgettext("user status","%(username)s was last seen %(last_click)s (hidden)"),{username:e.username,last_click:t.last_click.fromNow()},!0):t.is_online?interpolate(pgettext("user status","%(username)s is online"),{username:e.username},!0):t.is_offline?interpolate(pgettext("user status","%(username)s was last seen %(last_click)s"),{username:e.username,last_click:t.last_click.fromNow()},!0):void 0;var e,t}},{key:"getLabel",value:function(){return this.props.status.is_banned?pgettext("user status","Banned"):this.props.status.is_hidden?pgettext("user status","Hidden"):this.props.status.is_online_hidden?pgettext("user status","Online (hidden)"):this.props.status.is_offline_hidden?pgettext("user status","Offline (hidden)"):this.props.status.is_online?pgettext("user status","Online"):this.props.status.is_offline?pgettext("user status","Offline"):void 0}},{key:"render",value:function(){return(0,n.Z)("span",{className:this.props.className||"status-label",title:this.getHelp()},void 0,this.getLabel())}}]),a}(u().Component)},40429:(e,t,a)=>{"use strict";a.d(t,{Z:()=>O});var n,i=a(22928),s=a(57588),o=a.n(s),r=a(19605),l=a(24678);function c(e){var t=e.showStatus,a=e.user;return(0,i.Z)("ul",{className:"list-unstyled"},void 0,(0,i.Z)(u,{showStatus:t,user:a}),(0,i.Z)(d,{user:a}),n||(n=(0,i.Z)("li",{className:"user-stat-divider"})),(0,i.Z)(p,{user:a}),(0,i.Z)(h,{user:a}),(0,i.Z)(v,{user:a}))}function u(e){var t=e.showStatus,a=e.user;return t?(0,i.Z)("li",{className:"user-stat-status"},void 0,(0,i.Z)(l.ZP,{status:a.status},void 0,(0,i.Z)(l.pg,{status:a.status,user:a}))):null}function d(e){var t=e.user.joined_on,a=interpolate(pgettext("users list item","Joined on %(joined_on)s"),{joined_on:t.format("LL, LT")},!0),n=interpolate(pgettext("users list item","Joined %(joined_on)s"),{joined_on:t.fromNow()},!0);return(0,i.Z)("li",{className:"user-stat-join-date"},void 0,(0,i.Z)("abbr",{title:a},void 0,n))}function p(e){var t=e.user,a=m("user-stat-posts",t.posts),n=npgettext("users list item","%(posts)s post","%(posts)s posts",t.posts);return(0,i.Z)("li",{className:a},void 0,interpolate(n,{posts:t.posts},!0))}function h(e){var t=e.user,a=m("user-stat-threads",t.threads),n=npgettext("users list item","%(threads)s thread","%(threads)s threads",t.threads);return(0,i.Z)("li",{className:a},void 0,interpolate(n,{threads:t.threads},!0))}function v(e){var t=e.user,a=m("user-stat-followers",t.followers),n=npgettext("users list item","%(followers)s follower","%(followers)s followers",t.followers);return(0,i.Z)("li",{className:a},void 0,interpolate(n,{followers:t.followers},!0))}function m(e,t){return 0===t?e+" user-stat-empty":e}function f(e){var t=e.rank,a=e.title||t.title||t.name,n="user-title";return t.css_class&&(n+=" user-title-"+t.css_class),t.is_tab?(0,i.Z)("a",{className:n,href:t.url},void 0,a):(0,i.Z)("span",{className:n},void 0,a)}function Z(e){var t=e.showStatus,a=e.user,n=a.rank,s="panel user-card";return n.css_class&&(s+=" user-card-"+n.css_class),(0,i.Z)("div",{className:s},void 0,(0,i.Z)("div",{className:"panel-body"},void 0,(0,i.Z)("div",{className:"row"},void 0,(0,i.Z)("div",{className:"col-xs-3 user-card-left"},void 0,(0,i.Z)("div",{className:"user-card-small-avatar"},void 0,(0,i.Z)("a",{href:a.url},void 0,(0,i.Z)(r.ZP,{size:"50",size2x:"80",user:a})))),(0,i.Z)("div",{className:"col-xs-9 col-sm-12 user-card-body"},void 0,(0,i.Z)("div",{className:"user-card-avatar"},void 0,(0,i.Z)("a",{href:a.url},void 0,(0,i.Z)(r.ZP,{size:"150",size2x:"200",user:a}))),(0,i.Z)("div",{className:"user-card-username"},void 0,(0,i.Z)("a",{href:a.url},void 0,a.username)),(0,i.Z)("div",{className:"user-card-title"},void 0,(0,i.Z)(f,{rank:n,title:a.title})),(0,i.Z)("div",{className:"user-card-stats"},void 0,(0,i.Z)(c,{showStatus:t,user:a}))))))}var g,b,y,_=a(15671),N=a(43144),k=a(79340),x=a(6215),w=a(61120),C=a(44039);var R,E=function(e){(0,k.Z)(s,e);var t,a,n=(t=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,w.Z)(t);if(a){var i=(0,w.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,x.Z)(this,e)});function s(){return(0,_.Z)(this,s),n.apply(this,arguments)}return(0,N.Z)(s,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return(0,i.Z)("div",{className:"panel user-card user-card-preview"},void 0,(0,i.Z)("div",{className:"panel-body"},void 0,(0,i.Z)("div",{className:"row"},void 0,g||(g=(0,i.Z)("div",{className:"col-xs-3 user-card-left"},void 0,(0,i.Z)("div",{className:"user-card-small-avatar"},void 0,(0,i.Z)("span",{},void 0,(0,i.Z)(r.ZP,{size:"50",size2x:"80"}))))),(0,i.Z)("div",{className:"col-xs-9 col-sm-12 user-card-body"},void 0,b||(b=(0,i.Z)("div",{className:"user-card-avatar"},void 0,(0,i.Z)("span",{},void 0,(0,i.Z)(r.ZP,{size:"150",size2x:"200"})))),(0,i.Z)("div",{className:"user-card-username"},void 0,(0,i.Z)("span",{className:"ui-preview-text",style:{width:C.e(60,150)+"px"}},void 0," ")),(0,i.Z)("div",{className:"user-card-title"},void 0,(0,i.Z)("span",{className:"ui-preview-text",style:{width:C.e(60,150)+"px"}},void 0," ")),(0,i.Z)("div",{className:"user-card-stats"},void 0,(0,i.Z)("ul",{className:"list-unstyled"},void 0,(0,i.Z)("li",{},void 0,(0,i.Z)("span",{className:"ui-preview-text",style:{width:C.e(30,70)+"px"}},void 0," ")),(0,i.Z)("li",{},void 0,(0,i.Z)("span",{className:"ui-preview-text",style:{width:C.e(30,70)+"px"}},void 0," ")),y||(y=(0,i.Z)("li",{className:"user-stat-divider"})),(0,i.Z)("li",{},void 0,(0,i.Z)("span",{className:"ui-preview-text",style:{width:C.e(30,70)+"px"}},void 0," ")),(0,i.Z)("li",{},void 0,(0,i.Z)("span",{className:"ui-preview-text",style:{width:C.e(30,70)+"px"}},void 0," "))))))))}}]),s}(o().Component);function S(e){var t=e.colClassName,a=e.cols,n=Array.apply(null,{length:a}).map(Number.call,Number);return(0,i.Z)("div",{className:"users-cards-list ui-preview"},void 0,(0,i.Z)("div",{className:"row"},void 0,n.map((function(e){var a=t;return 0!==e&&(a+=" hidden-xs"),3===e&&(a+=" hidden-sm"),(0,i.Z)("div",{className:a},e,R||(R=(0,i.Z)(E,{})))}))))}function O(e){var t=e.cols,a=e.isReady,n=e.showStatus,s=e.users,o="col-xs-12 col-sm-4";return 4===t&&(o+=" col-md-3"),a?(0,i.Z)("div",{className:"users-cards-list ui-ready"},void 0,(0,i.Z)("div",{className:"row"},void 0,s.map((function(e){return(0,i.Z)("div",{className:o},e.id,(0,i.Z)(Z,{showStatus:n,user:e}))})))):(0,i.Z)(S,{colClassName:o,cols:t})}},82125:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var n=a(15671),i=a(43144),s=a(97326),o=a(79340),r=a(6215),l=a(61120),c=a(4942),u=a(57588);var d=function(e){(0,o.Z)(d,e);var t,a,u=(t=d,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(a){var i=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,r.Z)(this,e)});function d(e){var t;return(0,n.Z)(this,d),t=u.call(this,e),(0,c.Z)((0,s.Z)(t),"toggleNav",(function(){t.setState({dropdown:!t.state.dropdown})})),(0,c.Z)((0,s.Z)(t),"hideNav",(function(){t.setState({dropdown:!1})})),t.state={dropdown:!1},t}return(0,i.Z)(d,[{key:"getCompactNavClassName",value:function(){return this.state.dropdown?"compact-nav open":"compact-nav"}}]),d}(a.n(u)().Component)},7227:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var n=a(22928),i=a(15671),s=a(43144),o=a(97326),r=a(79340),l=a(6215),c=a(61120),u=a(4942),d=a(57588);var p=function(e){(0,r.Z)(p,e);var t,a,d=(t=p,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function p(){var e;(0,i.Z)(this,p);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return e=d.call.apply(d,[this].concat(a)),(0,u.Z)((0,o.Z)(e),"toggle",(function(){e.props.onChange({target:{value:!e.props.value}})})),e}return(0,s.Z)(p,[{key:"getClassName",value:function(){return this.props.value?"btn btn-yes-no btn-yes-no-on":"btn btn-yes-no btn-yes-no-off"}},{key:"getIcon",value:function(){return this.props.value?this.props.iconOn||"check_box":this.props.iconOff||"check_box_outline_blank"}},{key:"getLabel",value:function(){return this.props.value?this.props.labelOn||pgettext("yesno switch choice","yes"):this.props.labelOff||pgettext("yesno switch choice","no")}},{key:"render",value:function(){return(0,n.Z)("button",{type:"button",onClick:this.toggle,className:this.getClassName(),id:this.props.id||null,"aria-describedby":this.props["aria-describedby"]||null,disabled:this.props.disabled||!1},void 0,(0,n.Z)("span",{className:"material-icon"},void 0,this.getIcon()),(0,n.Z)("span",{className:"btn-text"},void 0,this.getLabel()))}}]),p}(a.n(d)().Component)},35983:(e,t,a)=>{"use strict";a.d(t,{lY:()=>N,ry:()=>v,wS:()=>_});var n=window.misago_locale||"en-us",i=pgettext("time ago","moment ago"),s=pgettext("time ago","now"),o=pgettext("day at time","%(day)s at %(time)s"),r=pgettext("day at time","at %(time)s"),l=pgettext("day at time","Tomorrow at %(time)s"),c=pgettext("day at time","Yesterday at %(time)s"),u=pgettext("short minutes","%(time)sm"),d=pgettext("short hours","%(time)sh"),p=pgettext("short days","%(time)sd"),h=new Intl.RelativeTimeFormat(n,{numeric:"always",style:"long"}),v=(new Intl.RelativeTimeFormat(n,{numeric:"auto",style:"long"}),new Intl.DateTimeFormat(n,{dateStyle:"full",timeStyle:"medium"})),m=new Intl.DateTimeFormat(n,{month:"long",day:"numeric"}),f=new Intl.DateTimeFormat(n,{month:"short",day:"numeric"}),Z=new Intl.DateTimeFormat(n,{year:"numeric",month:"long",day:"numeric"}),g=new Intl.DateTimeFormat(n,{year:"2-digit",month:"short"}),b=new Intl.DateTimeFormat(n,{weekday:"long"}),y=new Intl.DateTimeFormat(n,{timeStyle:"short"});function _(e){var t=new Date,a=Math.abs(Math.round((e-t)/1e3));if(a<60)return s;if(a<3300){var n=Math.ceil(a/60);return u.replace("%(time)s",n)}if(a<86400){var i=Math.ceil(a/3600);return d.replace("%(time)s",i)}if(a<604800){var o=Math.ceil(a/86400);return p.replace("%(time)s",o)}return e.getFullYear()===t.getFullYear()?f.format(e):g.format(e)}function N(e){var t=new Date,a=Math.round((e-t)/1e3),n=Math.abs(a),s=a<1?-1:1;if(n<90)return i;if(n<2820){var u=Math.ceil(n/60)*s;return h.format(u,"minute")}if(n<10800){var d=Math.ceil(n/3600)*s;return h.format(d,"hour")}return k(t,e)?a>0?r.replace("%(time)s",y.format(e)):y.format(e):function(e){var t=new Date;return t.setDate(t.getDate()-1),k(t,e)}(e)?c.replace("%(time)s",y.format(e)):function(e){var t=new Date;return t.setDate(t.getDate()+1),k(t,e)}(e)?l.replace("%(time)s",y.format(e)):a<0&&n<518400?function(e,t){return o.replace("%(day)s",e).replace("%(time)s",y.format(t))}(b.format(e),e):t.getFullYear()==e.getFullYear()?m.format(e):Z.format(e)}function k(e,t){return e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()}},54385:(e,t,a)=>{"use strict";a.d(t,{Z:()=>E});var n=a(15671),i=a(43144);a(58294),a(95377),a(68852),a(39737),a(14316),a(43204),a(7023),a(94028);const s=function(){function e(t){(0,n.Z)(this,e),this.isOrdered=!1,this._items=t||[]}return(0,i.Z)(e,[{key:"add",value:function(e,t,a){this._items.push({key:e,item:t,after:a&&a.after||null,before:a&&a.before||null})}},{key:"get",value:function(e,t){for(var a=0;a<this._items.length;a++)if(this._items[a].key===e)return this._items[a].item;return t}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"values",value:function(){for(var e=[],t=0;t<this._items.length;t++)e.push(this._items[t].item);return e}},{key:"order",value:function(e){return this.isOrdered||(this._items=this._order(this._items),this.isOrdered=!0),e||void 0===e?this.values():this._items}},{key:"orderedValues",value:function(){return this.order(!0)}},{key:"_order",value:function(e){var t=[];e.forEach((function(e){t.push(e.key)}));var a=[],n=[];function i(e){var t=-1;-1===n.indexOf(e.key)&&(e.after?-1!==(t=n.indexOf(e.after))&&(t+=1):e.before&&(t=n.indexOf(e.before)),-1!==t&&(a.splice(t,0,e),n.splice(t,0,e.key)))}e.forEach((function(e){e.after||e.before||(a.push(e),n.push(e.key))})),e.forEach((function(e){"_end"===e.before&&(a.push(e),n.push(e.key))}));for(var s=200;s>0&&t.length!==n.length;)s-=1,e.forEach(i);return a}}]),e}();a(39602);var o=a(15861),r=a(64687),l=a.n(r),c={};function u(e){if(!e.getAttribute("misago-validate-active")){var t=e.getAttribute("misago-validate"),a=e.getAttribute("misago-validate-user"),n="false"!=e.getAttribute("misago-validate-strip"),i=e.querySelector("input"),s=i.closest("form").querySelector("input[type=hidden]");if(t&&i){c[t]||(c[t]={}),e.setAttribute("misago-validate-active","true");var r=null;i.addEventListener("keyup",(function(u){var v=u.target.value;n&&(v=v.trim()),0!==v.trim().length?c[t][v]?d(e,i,c[t][v]):(r&&window.clearTimeout(r),r=window.setTimeout((0,o.Z)(l().mark((function n(){var o,r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h(t,s,v,a);case 2:o=n.sent,r=o.errors,c[t][v]=r,d(e,i,r);case 6:case"end":return n.stop()}}),n)}))),1e3)):function(e){e.classList.remove("has-error"),e.classList.remove("has-success"),p(e)}(e)}))}}}function d(e,t,a){a.length?function(e,t,a){e.classList.remove("has-success"),e.classList.add("has-error"),p(e),a.forEach((function(e){var a=document.createElement("p");a.className="help-block",a.setAttribute("misago-dynamic-message","true"),a.innerText=e,t.after(a)}))}(e,t,a):function(e){e.classList.remove("has-error"),e.classList.add("has-success"),p(e)}(e)}function p(e){e.querySelectorAll("[misago-dynamic-message]").forEach((function(e){return e.remove()}))}function h(e,t,a,n){return v.apply(this,arguments)}function v(){return(v=(0,o.Z)(l().mark((function e(t,a,n,i){var s,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=new FormData).set(a.name,a.value),s.set("value",n),i&&s.set("user",i),e.next=6,fetch(t,{method:"POST",mode:"cors",credentials:"same-origin",body:s});case 6:return o=e.sent,e.next=9,o.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){(e||document).querySelectorAll("[misago-validate]").forEach(u)}var f=document.getElementById("misago-snackbars"),Z=null;function g(){f.replaceChildren()}function b(){Z&&window.clearTimeout(Z),f.querySelectorAll(".snackbar").forEach((function(e){e.classList.add("in")})),Z=window.setTimeout((function(){f.querySelectorAll(".snackbar").forEach((function(e){e.classList.add("out"),Z=window.setTimeout(g,1e3)}))}),6e3)}function y(e,t){g(),Z&&window.clearTimeout(Z);var a=document.createElement("div");a.classList.add("snackbar"),a.classList.add("snackbar-"+e),a.innerText=t,a.role="alert",f.appendChild(a),Z=window.setTimeout(b,100)}function _(e){y("danger",e)}function N(e){var t,a,n=e.detail;return!("true"===(t=n.target,a=t.closest("[hx-silent]"),a?a.getAttribute("hx-silent"):null)&&"get"===n.requestConfig.verb)}document.addEventListener("htmx:afterSettle",b);var k=a(35983),x={};function w(e){var t=e.getAttribute("misago-timestamp");x[t]||(x[t]=new Date(t)),e.hasAttribute("title")||e.setAttribute("title",k.ry.format(x[t])),e.textContent=(0,k.lY)(x[t])}function C(e){(e||document).querySelectorAll("[misago-timestamp]").forEach(w)}var R=new(function(){function e(){(0,n.Z)(this,e),this._initializers=[],this._context={}}return(0,i.Z)(e,[{key:"addInitializer",value:function(e){this._initializers.push({key:e.name,item:e.initializer,after:e.after,before:e.before})}},{key:"init",value:function(e){var t=this;this._context=e,new s(this._initializers).orderedValues().forEach((function(e){e(t)}))}},{key:"has",value:function(e){return!!this._context[e]}},{key:"get",value:function(e,t){return this.has(e)?this._context[e]:t||void 0}},{key:"pop",value:function(e){if(this.has(e)){var t=this._context[e];return this._context[e]=null,t}}},{key:"snackbar",value:function(e,t){y(e,t)}},{key:"snackbarInfo",value:function(e){!function(e){y("info",e)}(e)}},{key:"snackbarSuccess",value:function(e){!function(e){y("success",e)}(e)}},{key:"snackbarWarning",value:function(e){!function(e){y("warning",e)}(e)}},{key:"snackbarError",value:function(e){_(e)}}]),e}());window.misago=R;const E=R;document.addEventListener("htmx:responseError",(function(e){N(e)&&_(function(e){if("application/json"===e.getResponseHeader("content-type")){var t=JSON.parse(e.response);if(t.error)return t.error}return 404===e.status?pgettext("htmx response error","Not found"):403===e.status?pgettext("htmx response error","Permission denied"):pgettext("htmx response error","Unexpected error")}(e.detail.xhr))})),document.addEventListener("htmx:sendError",(function(e){N(e)&&_(pgettext("htmx response error","Site could not be reached"))})),document.addEventListener("htmx:timeout",(function(e){N(e)&&_(pgettext("htmx response error","Site took too long to reply"))})),document.querySelectorAll("[misago-timestamp]").forEach(w),C(),window.setInterval(C,55e3),m(),document.addEventListener("htmx:afterSwap",(function(e){var t=e.detail;m(t.elt),C(t.elt)}))},58339:(e,t,a)=>{"use strict";var n=a(54385),i=a(78657);n.Z.addInitializer({name:"ajax",initializer:function(){i.Z.init(n.Z.get("CSRF_COOKIE_NAME"))}})},64109:(e,t,a)=>{"use strict";var n=a(54385),i=a(35486),s=a(78657),o=a(53904),r=a(90287);n.Z.addInitializer({name:"auth-sync",initializer:function(e){e.get("isAuthenticated")&&window.setInterval((function(){s.Z.get(e.get("AUTH_API")).then((function(e){r.Z.dispatch((0,i.r$)(e))}),(function(e){o.Z.apiError(e)}))}),45e3)},after:"auth"})},46226:(e,t,a)=>{"use strict";var n=a(54385),i=a(98274),s=a(59801),o=a(90287),r=a(62833);n.Z.addInitializer({name:"auth",initializer:function(){i.Z.init(o.Z,r.Z,s.Z)},after:"store"})},93240:(e,t,a)=>{"use strict";var n=a(54385),i=a(78657),s=a(93825),o=a(96142),r=a(53904);n.Z.addInitializer({name:"captcha",initializer:function(e){s.ZP.init(e,i.Z,o.Z,r.Z)}})},75147:(e,t,a)=>{"use strict";var n=a(22928),i=a(57588),s=a.n(i),o=a(54385),r=a(15671),l=a(43144),c=a(97326),u=a(79340),d=a(6215),p=a(61120),h=a(4942),v=a(78657);var m=function(e){(0,u.Z)(s,e);var t,a,i=(t=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function s(e){var t;return(0,r.Z)(this,s),t=i.call(this,e),(0,h.Z)((0,c.Z)(t),"handleDecline",(function(){t.state.submiting||window.confirm(pgettext("accept agreement prompt","Declining will result in immediate deactivation and deletion of your account. This action is not reversible."))&&(t.setState({submiting:!0}),v.Z.post(t.props.api,{accept:!1}).then((function(){window.location.reload(!0)})))})),(0,h.Z)((0,c.Z)(t),"handleAccept",(function(){t.state.submiting||(t.setState({submiting:!0}),v.Z.post(t.props.api,{accept:!0}).then((function(){window.location.reload(!0)})))})),t.state={submiting:!1},t}return(0,l.Z)(s,[{key:"render",value:function(){return(0,n.Z)("div",{},void 0,(0,n.Z)("button",{className:"btn btn-default",disabled:this.state.submiting,type:"buton",onClick:this.handleDecline},void 0,pgettext("accept agreement choice","Decline")),(0,n.Z)("button",{className:"btn btn-primary",disabled:this.state.submiting,type:"buton",onClick:this.handleAccept},void 0,pgettext("accept agreement choice","Accept and continue")))}}]),s}(s().Component),f=a(4869);o.Z.addInitializer({name:"component:accept-agreement",initializer:function(e){document.getElementById("required-agreement-mount")&&(0,f.Z)((0,n.Z)(m,{api:e.get("REQUIRED_AGREEMENT_API")}),"required-agreement-mount",!1)},after:"store"})},4894:(e,t,a)=>{"use strict";var n=a(37424),i=a(54385),s=a(22928),o=a(15671),r=a(43144),l=a(79340),c=a(6215),u=a(61120),d=a(57588);var p=function(e){(0,l.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(a){var i=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function i(){return(0,o.Z)(this,i),n.apply(this,arguments)}return(0,r.Z)(i,[{key:"refresh",value:function(){window.location.reload()}},{key:"getMessage",value:function(){return this.props.signedIn?interpolate(pgettext("auth message","You have signed in as %(username)s. Please refresh the page before continuing."),{username:this.props.signedIn.username},!0):this.props.signedOut?interpolate(pgettext("auth message","%(username)s, you have been signed out. Please refresh the page before continuing."),{username:this.props.user.username},!0):void 0}},{key:"render",value:function(){var e="auth-message";return(this.props.signedIn||this.props.signedOut)&&(e+=" show"),(0,s.Z)("div",{className:e},void 0,(0,s.Z)("div",{className:"container"},void 0,(0,s.Z)("p",{className:"lead"},void 0,this.getMessage()),(0,s.Z)("p",{},void 0,(0,s.Z)("button",{className:"btn btn-default",type:"button",onClick:this.refresh},void 0,pgettext("auth message","Reload page")),(0,s.Z)("span",{className:"hidden-xs hidden-sm"},void 0," "+pgettext("auth message","or press F5 key.")))))}}]),i}(a.n(d)().Component);function h(e){return{user:e.auth.user,signedIn:e.auth.signedIn,signedOut:e.auth.signedOut}}var v=a(4869);i.Z.addInitializer({name:"component:auth-message",initializer:function(){(0,v.Z)((0,n.$j)(h)(p),"auth-message-mount")},after:"store"})},29223:(e,t,a)=>{"use strict";var n=a(54385),i=a(93051);n.Z.addInitializer({name:"component:banmed-page",initializer:function(e){e.has("BAN_MESSAGE")&&(0,i.Z)(e.get("BAN_MESSAGE"),!1)},after:"store"})},73806:(e,t,a)=>{"use strict";var n,i=a(22928),s=a(57588),o=a.n(s),r=a(73935),l=a.n(r),c=a(37424),u=a(993),d=a(40689),p=a(80261),h=a(15671),v=a(43144),m=a(79340),f=a(6215),Z=a(61120),g=a(59801),b=a(14467);const y=function(e){(0,m.Z)(o,e);var t,a,s=(t=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,Z.Z)(t);if(a){var i=(0,Z.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,f.Z)(this,e)});function o(){return(0,h.Z)(this,o),s.apply(this,arguments)}return(0,v.Z)(o,[{key:"componentDidMount",value:function(){"?modal=login"===window.document.location.search&&window.setTimeout((function(){return g.Z.show(n||(n=(0,i.Z)(b.Z,{})))}),300)}},{key:"render",value:function(){return null}}]),o}(o().Component);function _(e){var t=e.logo,a=e.logoXs,n=e.text,s=e.url;return t?(0,i.Z)("div",{className:"navbar-branding"},void 0,(0,i.Z)("a",{href:s,className:"navbar-branding-logo"},void 0,(0,i.Z)("img",{src:t,alt:n}))):(0,i.Z)("div",{className:"navbar-branding"},void 0,!!a&&(0,i.Z)("a",{href:s,className:"navbar-branding-logo-xs"},void 0,(0,i.Z)("img",{src:a,alt:n})),!!n&&(0,i.Z)("a",{href:s,className:"navbar-branding-text"},void 0,n))}function N(e){var t=e.items;return(0,i.Z)("ul",{className:"navbar-extra-menu",role:"nav"},void 0,t.map((function(e,t){return(0,i.Z)("li",{className:e.className},t,(0,i.Z)("a",{href:e.url,target:e.targetBlank?"_blank":null,rel:e.rel},void 0,e.title))})))}var k,x=a(49021),w=a(97326),C=a(4942),R=a(63026),E=a(66462),S=a(94184),O=a.n(S);function T(e){var t=e.children,a=e.showAll,n=e.showUnread,s=e.unread;return(0,i.Z)("div",{className:"notifications-dropdown-body"},void 0,(0,i.Z)(x.Aw,{},void 0,pgettext("notifications title","Notifications")),(0,i.Z)(x.KE,{},void 0,(0,i.Z)(P,{active:!s,onClick:a},void 0,pgettext("notifications dropdown","All")),(0,i.Z)(P,{active:s,onClick:n},void 0,pgettext("notifications dropdown","Unread"))),t,(0,i.Z)(x.kE,{},void 0,(0,i.Z)("a",{className:"btn btn-default btn-block",href:misago.get("NOTIFICATIONS_URL")},void 0,pgettext("notifications","See all notifications"))))}function P(e){var t=e.active,a=e.children,n=e.onClick;return(0,i.Z)("button",{className:O()("btn",{"btn-primary":t,"btn-default":!t}),type:"button",onClick:n},void 0,a)}const L=function(e){(0,m.Z)(s,e);var t,a,n=(t=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,Z.Z)(t);if(a){var i=(0,Z.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,f.Z)(this,e)});function s(e){var t;return(0,h.Z)(this,s),t=n.call(this,e),(0,C.Z)((0,w.Z)(t),"render",(function(){return(0,i.Z)(T,{unread:t.state.unread,showAll:function(){return t.setState({unread:!1})},showUnread:function(){return t.setState({unread:!0})}},void 0,(0,i.Z)(R.Z,{filter:t.state.unread?"unread":"all",disabled:!t.props.active},void 0,(function(e){var a=e.data,n=e.loading,s=e.error;return n?k||(k=(0,i.Z)(E.Pu,{})):s?(0,i.Z)(E.lb,{error:s}):(0,i.Z)(E.uE,{filter:t.state.unread?"unread":"all",items:a?a.results:[]})})))})),t.state={unread:!1,url:""},t}return(0,v.Z)(s,[{key:"getApiUrl",value:function(){return misago.get("NOTIFICATIONS_API")+"?limit=20"+(this.state.unread?"&filter=unread":"")}}]),s}(o().Component);function A(e){var t=e.id,a=e.className,n=e.badge,s=e.url,o=e.active,r=e.onClick,l=n?pgettext("navbar","You have unread notifications!"):pgettext("navbar","Open notifications");return(0,i.Z)("a",{id:t,className:O()("btn btn-navbar-icon",a,{active:o}),href:s,title:l,onClick:r},void 0,!!n&&(0,i.Z)("span",{className:"navbar-item-badge"},void 0,n),(0,i.Z)("span",{className:"material-icon"},void 0,n?"notifications_active":"notifications_none"))}function I(e){var t=e.id,a=e.className,n=e.badge,s=e.url;return(0,i.Z)(x.Lt,{id:t,toggle:function(e){var t=e.isOpen,o=e.toggle;return(0,i.Z)(A,{className:a,active:t,badge:n,url:s,onClick:function(e){e.preventDefault(),o()}})},menuClassName:"notifications-dropdown",menuAlignRight:!0},void 0,(function(e){var t=e.isOpen;return(0,i.Z)(L,{active:t})}))}var B;function j(e){var t=e.id,a=e.className,n=e.badge,s=e.url,o=e.active,r=e.onClick,l=n?pgettext("navbar","You have unread private threads!"):pgettext("navbar","Open private threads");return(0,i.Z)("a",{id:t,className:O()("btn btn-navbar-icon",a,{active:o}),href:s,title:l,onClick:r},void 0,!!n&&(0,i.Z)("span",{className:"navbar-item-badge"},void 0,n),B||(B=(0,i.Z)("span",{className:"material-icon"},void 0,"inbox")))}var D,z,U,M=a(62989);function q(e){var t=e.id,a=e.className,n=e.url,s=e.active,o=e.onClick;return(0,i.Z)("a",{id:t,className:O()("btn btn-navbar-icon",a,{active:s}),href:n,title:pgettext("navbar","Open search"),onClick:o},void 0,D||(D=(0,i.Z)("span",{className:"material-icon"},void 0,"search")))}function F(e){var t=e.id,a=e.className,n=e.url;return(0,i.Z)(x.Lt,{id:t,toggle:function(e){var t=e.isOpen,s=e.toggle;return(0,i.Z)(q,{className:a,active:t,url:n,onClick:function(e){e.preventDefault(),s(),window.setTimeout((function(){document.querySelector(".search-dropdown .form-control-search").focus()}),0)}})},menuClassName:"search-dropdown",menuAlignRight:!0},void 0,(function(){return z||(z=(0,i.Z)(M.E,{}))}))}function H(e){var t=e.id,a=e.className,n=e.active,s=e.onClick;return(0,i.Z)("button",{id:t,className:O()("btn btn-navbar-icon",a,{active:n}),title:pgettext("navbar","Open menu"),type:"button",onClick:s},void 0,U||(U=(0,i.Z)("span",{className:"material-icon"},void 0,"menu")))}var Y=a(6333);function V(e){var t=e.id,a=e.className;return(0,i.Z)(x.Lt,{id:t,toggle:function(e){var t=e.isOpen,n=e.toggle;return(0,i.Z)(H,{className:a,active:t,onClick:n})},menuClassName:"site-nav-dropdown",menuAlignRight:!0},void 0,(function(e){e.isOpen;var t=e.close;return(0,i.Z)(Y.bS,{close:t})}))}var G=a(19605);function $(e){var t=e.id,a=e.className,n=e.user,s=e.active,o=e.onClick;return(0,i.Z)("a",{id:t,className:O()("btn-navbar-image",a,{active:s}),href:n.url,title:pgettext("navbar","Open your options"),onClick:o},void 0,(0,i.Z)(G.ZP,{user:n,size:34}))}var W,Q,X,K,J=a(28166);function ee(e){var t=e.id,a=e.className,n=e.user;return(0,i.Z)(x.Lt,{id:t,toggle:function(e){var t=e.isOpen,s=e.toggle;return(0,i.Z)($,{className:a,active:t,user:n,onClick:function(e){e.preventDefault(),s()}})},menuClassName:"user-nav-dropdown",menuAlignRight:!0},void 0,(function(e){e.isOpen;var t=e.close;return(0,i.Z)(J.o4,{close:t})}))}const te=(0,c.$j)((function(e){var t=misago.get("SETTINGS"),a=e.auth.user;return{branding:{logo:t.logo,logoXs:t.logo_small,text:t.logo_text,url:misago.get("MISAGO_PATH")},extraMenuItems:misago.get("extraMenuItems"),user:a.id?{id:a.id,username:a.username,email:a.email,avatars:a.avatars,unreadNotifications:a.unreadNotifications,unreadPrivateThreads:a.unread_private_threads,url:a.url}:null,searchUrl:misago.get("SEARCH_URL"),notificationsUrl:misago.get("NOTIFICATIONS_URL"),privateThreadsUrl:misago.get("PRIVATE_THREADS_URL"),authDelegated:t.enable_oauth2_client,showSearch:!!a.acl.can_search,showPrivateThreads:!!a&&!!a.acl.can_use_private_threads}}))((function(e){var t=e.dispatch,a=e.branding,n=e.extraMenuItems,s=e.authDelegated,r=e.user,l=e.searchUrl,c=e.notificationsUrl,h=e.privateThreadsUrl,v=e.showSearch,m=e.showPrivateThreads;return(0,i.Z)("div",{className:"container navbar-container"},void 0,o().createElement(_,a),(0,i.Z)("div",{className:"navbar-right"},void 0,n.length>0&&(0,i.Z)(N,{items:n}),!!v&&(0,i.Z)(F,{id:"navbar-search-dropdown",url:l}),!!v&&(0,i.Z)(q,{id:"navbar-search-overlay",url:l,onClick:function(e){t(u.UL()),e.preventDefault()}}),W||(W=(0,i.Z)(V,{id:"navbar-site-nav-dropdown"})),(0,i.Z)(H,{id:"navbar-site-nav-overlay",onClick:function(){t(u.AU())}}),!!m&&(0,i.Z)(j,{id:"navbar-private-threads",badge:r.unreadPrivateThreads,url:h}),!!r&&(0,i.Z)(I,{id:"navbar-notifications-dropdown",badge:r.unreadNotifications,url:c}),!!r&&(0,i.Z)(A,{id:"navbar-notifications-overlay",badge:r.unreadNotifications,url:c,onClick:function(e){t(u.hN()),e.preventDefault()}}),!!r&&(0,i.Z)(ee,{id:"navbar-user-nav-dropdown",user:r}),!!r&&(0,i.Z)($,{id:"navbar-user-nav-overlay",user:r,onClick:function(e){t(u.T5()),e.preventDefault()}}),!r&&(Q||(Q=(0,i.Z)(p.Z,{className:"btn-navbar-sign-in"}))),!r&&!s&&(X||(X=(0,i.Z)(d.Z,{className:"btn-navbar-register"}))),!r&&!s&&(K||(K=(0,i.Z)(y,{})))))}));var ae,ne=a(90287);misago.addInitializer({name:"component:navbar",initializer:function(e){var t=document.getElementById("misago-navbar");l().render((0,i.Z)(c.zt,{store:ne.Z.getStore()},void 0,ae||(ae=(0,i.Z)(te,{}))),t)},after:"store"})},27015:(e,t,a)=>{"use strict";var n,i=a(22928),s=a(57588),o=a.n(s),r=a(73935),l=a.n(r),c=a(37424),u=a(15671),d=a(43144),p=a(97326),h=a(79340),v=a(6215),m=a(61120),f=a(4942),Z=a(63026),g=a(66462),b=a(94184),y=a.n(b),_=a(49021),N=a(64836);function k(e){var t=e.children,a=e.open,n=e.showAll,s=e.showUnread,o=e.unread;return(0,i.Z)(N.a,{open:a},void 0,(0,i.Z)(N.i,{},void 0,pgettext("notifications title","Notifications")),(0,i.Z)(_.KE,{},void 0,(0,i.Z)(x,{active:!o,onClick:n},void 0,pgettext("notifications dropdown","All")),(0,i.Z)(x,{active:o,onClick:s},void 0,pgettext("notifications dropdown","Unread"))),t,(0,i.Z)(_.kE,{},void 0,(0,i.Z)("a",{className:"btn btn-default btn-block",href:misago.get("NOTIFICATIONS_URL")},void 0,pgettext("notifications","See all notifications"))))}function x(e){var t=e.active,a=e.children,n=e.onClick;return(0,i.Z)("button",{className:y()("btn",{"btn-primary":t,"btn-default":!t}),type:"button",onClick:n},void 0,a)}var w=function(e){(0,h.Z)(o,e);var t,a,s=(t=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,m.Z)(t);if(a){var i=(0,m.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,v.Z)(this,e)});function o(e){var t;return(0,u.Z)(this,o),t=s.call(this,e),(0,f.Z)((0,p.Z)(t),"render",(function(){return(0,i.Z)(k,{open:t.props.open,unread:t.state.unread,showAll:function(){return t.setState({unread:!1})},showUnread:function(){return t.setState({unread:!0})}},void 0,(0,i.Z)(Z.Z,{filter:t.state.unread?"unread":"all",disabled:!t.props.open},void 0,(function(e){var a=e.data,s=e.loading,o=e.error;return s?n||(n=(0,i.Z)(g.Pu,{})):o?(0,i.Z)(g.lb,{error:o}):(0,i.Z)(g.uE,{filter:t.state.unread?"unread":"all",items:a?a.results:[]})})))})),t.body=document.body,t.state={unread:!1,url:""},t}return(0,d.Z)(o,[{key:"getApiUrl",value:function(){return misago.get("NOTIFICATIONS_API")+"?limit=20"+(this.state.unread?"&filter=unread":"")}},{key:"componentDidUpdate",value:function(e,t){e.open!==this.props.open&&(this.props.open?this.body.classList.add("notifications-fullscreen"):this.body.classList.remove("notifications-fullscreen"))}}]),o}(o().Component);const C=(0,c.$j)((function(e){return{open:e.overlay.notifications}}))(w);var R,E=a(90287);misago.addInitializer({name:"component:notifications-overlay",initializer:function(e){if(e.get("isAuthenticated")){var t=document.getElementById("notifications-mount");l().render((0,i.Z)(c.zt,{store:E.Z.getStore()},void 0,R||(R=(0,i.Z)(C,{}))),t)}},after:"store"})},88097:(e,t,a)=>{"use strict";var n=a(22928),i=a(57588),s=a.n(i),o=a(73935),r=a.n(o),l=a(37424),c=a(69987),u=a(99755);function d(){return(0,n.Z)(u.Iv,{header:pgettext("notifications title","Notifications"),styleName:"notifications"})}var p=a(87462),h=a(15861),v=a(64687),m=a.n(v),f=a(35486),Z=a(53904),g=a(60642),b=a(63026);const y=function(e){var t=e.title,a=e.subtitle,n=[];return a&&n.push(a),t&&n.push(t),n.push(misago.get("SETTINGS").forum_name),document.title=n.join(" | "),null};var _=a(59131),N=a(66462);function k(e){var t=e.children;return(0,n.Z)("ul",{className:"nav nav-pills"},void 0,t)}var x=a(94184),w=a.n(x);function C(e){var t=e.active,a=e.link,i=e.icon,s=e.children;return(0,n.Z)("li",{className:w()({active:t})},void 0,(0,n.Z)(c.rU,{to:a,activeClassName:""},void 0,!!i&&(0,n.Z)("span",{className:"material-icon"},void 0,i),s))}var R=a(92490);function E(e){var t=e.filter,a=misago.get("NOTIFICATIONS_URL");return(0,n.Z)(R.o8,{},void 0,(0,n.Z)(R.Z2,{auto:!0},void 0,(0,n.Z)(R.Eg,{},void 0,(0,n.Z)(k,{},void 0,(0,n.Z)(C,{active:"all"===t,link:a},void 0,pgettext("notifications nav","All")),(0,n.Z)(C,{active:"unread"===t,link:a+"unread/"},void 0,pgettext("notifications nav","Unread")),(0,n.Z)(C,{active:"read"===t,link:a+"read/"},void 0,pgettext("notifications nav","Read"))))))}var S,O,T,P=a(82211);function L(e){var t=e.baseUrl,a=e.data,i=e.disabled;return(0,n.Z)("div",{className:"misago-pagination"},void 0,(0,n.Z)(A,{url:t,disabled:i||!a||!a.hasPrevious},void 0,pgettext("notifications pagination","Latest")),(0,n.Z)(A,{url:t+"?before="+(a?a.firstCursor:""),disabled:i||!a||!a.hasPrevious},void 0,pgettext("notifications pagination","Newer")),(0,n.Z)(A,{url:t+"?after="+(a?a.lastCursor:""),disabled:i||!a||!a.hasNext},void 0,pgettext("notifications pagination","Older")))}function A(e){var t=e.disabled,a=e.children,i=e.url;return t?(0,n.Z)("button",{className:"btn btn-default",type:"disabled",disabled:!0},void 0,a):(0,n.Z)(c.rU,{to:i,className:"btn btn-default",activeClassName:""},void 0,a)}function I(e){var t=e.baseUrl,a=e.data,i=e.disabled,s=e.bottom,o=e.markAllAsRead;return(0,n.Z)(R.o8,{},void 0,(0,n.Z)(R.Z2,{},void 0,(0,n.Z)(R.Eg,{},void 0,(0,n.Z)(L,{baseUrl:t,data:a,disabled:i}))),S||(S=(0,n.Z)(R.tw,{})),(0,n.Z)(R.Z2,{className:w()({"hidden-xs":!s})},void 0,(0,n.Z)(R.Eg,{},void 0,(0,n.Z)(P.Z,{className:"btn-default btn-block",type:"button",disabled:i||!a||!a.unreadNotifications,onClick:o},void 0,O||(O=(0,n.Z)("span",{className:"material-icon"},void 0,"done_all")),pgettext("notifications","Mark all as read")))))}function B(e){return"unread"===e?pgettext("notifications title","Unread notifications"):"read"===e?pgettext("notifications title","Read notifications"):null}const j=(0,l.$j)()((function(e){var t=e.dispatch,a=e.location,i=e.route,o=a.query,r=i.props.filter,l=function(e){var t=misago.get("NOTIFICATIONS_URL");return"all"!==e&&(t+=e+"/"),t}(r);return(0,n.Z)(_.Z,{},void 0,(0,n.Z)(y,{title:pgettext("notifications title","Notifications"),subtitle:B(r)}),(0,n.Z)(E,{filter:r}),(0,n.Z)(b.Z,{filter:r,query:o},void 0,(function(e){var a,i=e.data,c=e.loading,u=e.error,d=e.refetch;return(0,n.Z)(g.D,{url:misago.get("NOTIFICATIONS_API")+"read-all/"},void 0,(function(e,v){var g,b=v.loading,y={baseUrl:l,data:i,disabled:c||b||!i||0===i.results.length,markAllAsRead:(g=(0,h.Z)(m().mark((function a(){return m().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:window.confirm(pgettext("notifications","Mark all notifications as read?"))&&e({onSuccess:function(){var e=(0,h.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(),t((0,f.yH)({unreadNotifications:null})),Z.Z.success(pgettext("notifications","All notifications have been marked as read."));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onError:Z.Z.apiError});case 2:case"end":return a.stop()}}),a)}))),function(){return g.apply(this,arguments)})};return c||b?(0,n.Z)("div",{},void 0,s().createElement(I,y),T||(T=(0,n.Z)(N.Pu,{})),s().createElement(I,(0,p.Z)({},y,{bottom:!0}))):u?(0,n.Z)("div",{},void 0,s().createElement(I,y),a||(a=(0,n.Z)(N.lb,{error:u})),s().createElement(I,(0,p.Z)({},y,{bottom:!0}))):i?(!i.hasPrevious&&o&&window.history.replaceState({},"",l),(0,n.Z)("div",{},void 0,s().createElement(I,y),(0,n.Z)(N.uE,{filter:r,items:i.results,hasNext:i.hasNext,hasPrevious:i.hasPrevious}),s().createElement(I,(0,p.Z)({},y,{bottom:!0})))):null}))})))}));var D;a(4517);const z=function(){var e=misago.get("NOTIFICATIONS_URL");return(0,n.Z)("div",{className:"page page-notifications"},void 0,D||(D=(0,n.Z)(d,{})),(0,n.Z)(c.F0,{history:c.mW,routes:[{path:e,component:j,props:{filter:"all"}},{path:e+"unread/",component:j,props:{filter:"unread"}},{path:e+"read/",component:j,props:{filter:"read"}}]}))};var U,M=a(90287);misago.addInitializer({name:"component:notifications",initializer:function(e){var t=misago.get("NOTIFICATIONS_URL");if(document.location.pathname.startsWith(t)&&!document.location.pathname.startsWith(t+"disable-email/")&&e.get("isAuthenticated")){var a=document.getElementById("page-mount");r().render((0,n.Z)(l.zt,{store:M.Z.getStore()},void 0,U||(U=(0,n.Z)(z,{}))),a)}},after:"store"})},46016:(e,t,a)=>{"use strict";var n,i=a(37424),s=a(22928),o=a(15671),r=a(43144),l=a(97326),c=a(79340),u=a(6215),d=a(61120),p=a(4942),h=a(57588),v=a.n(h),m=a(30381),f=a.n(m),Z=a(37848);var g,b=function(e){(0,c.Z)(l,e);var t,a,i=(t=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function l(){return(0,o.Z)(this,l),i.apply(this,arguments)}return(0,r.Z)(l,[{key:"render",value:function(){return n||(n=(0,s.Z)("div",{className:"panel-body panel-body-loading"},void 0,(0,s.Z)(Z.Z,{className:"loader loader-spaced"})))}}]),l}(v().Component),y=a(33556),_=a(54385),N=a(55547),k=a(53328);var x,w=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),t=n.call(this,e),(0,p.Z)((0,l.Z)(t),"update",(function(e){e.expires_on&&(e.expires_on=f()(e.expires_on)),t.setState({isLoaded:!0,error:null,ban:e})})),(0,p.Z)((0,l.Z)(t),"error",(function(e){t.setState({isLoaded:!0,error:e.detail,ban:null})})),_.Z.has("PROFILE_BAN")?t.initWithPreloadedData(_.Z.pop("PROFILE_BAN")):t.initWithoutPreloadedData(),t.startPolling(e.profile.api.ban),t}return(0,r.Z)(i,[{key:"initWithPreloadedData",value:function(e){e.expires_on&&(e.expires_on=f()(e.expires_on)),this.state={isLoaded:!0,ban:e}}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1}}},{key:"startPolling",value:function(e){N.Z.start({poll:"ban-details",url:e,frequency:9e4,update:this.update,error:this.error})}},{key:"componentDidMount",value:function(){k.Z.set({title:pgettext("profile ban details title","Ban details"),parent:this.props.profile.username})}},{key:"componentWillUnmount",value:function(){N.Z.stop("ban-details")}},{key:"getUserMessage",value:function(){return this.state.ban.user_message?(0,s.Z)("div",{className:"panel-body ban-message ban-user-message"},void 0,(0,s.Z)("h4",{},void 0,pgettext("profile ban details","User-shown ban message")),(0,s.Z)("div",{className:"lead",dangerouslySetInnerHTML:{__html:this.state.ban.user_message.html}})):null}},{key:"getStaffMessage",value:function(){return this.state.ban.staff_message?(0,s.Z)("div",{className:"panel-body ban-message ban-staff-message"},void 0,(0,s.Z)("h4",{},void 0,pgettext("profile ban details","Team-shown ban message")),(0,s.Z)("div",{className:"lead",dangerouslySetInnerHTML:{__html:this.state.ban.staff_message.html}})):null}},{key:"getExpirationMessage",value:function(){if(this.state.ban.expires_on){if(this.state.ban.expires_on.isAfter(f()())){var e=interpolate(pgettext("profile ban details","This ban expires on %(expires_on)s."),{expires_on:this.state.ban.expires_on.format("LL, LT")},!0),t=interpolate(pgettext("profile ban details","This ban expires %(expires_on)s."),{expires_on:this.state.ban.expires_on.fromNow()},!0);return(0,s.Z)("abbr",{title:e},void 0,t)}return pgettext("profile ban details","This ban has expired.")}return interpolate(pgettext("profile ban details","%(username)s's ban is permanent."),{username:this.props.profile.username},!0)}},{key:"getPanelBody",value:function(){return this.state.ban?Object.keys(this.state.ban).length?(0,s.Z)("div",{},void 0,this.getUserMessage(),this.getStaffMessage(),(0,s.Z)("div",{className:"panel-body ban-expires"},void 0,(0,s.Z)("h4",{},void 0,pgettext("profile ban details","Ban expiration")),(0,s.Z)("p",{className:"lead"},void 0,this.getExpirationMessage()))):(0,s.Z)("div",{},void 0,(0,s.Z)(y.Z,{message:pgettext("profile ban details","No ban is active at the moment.")})):this.state.error?(0,s.Z)("div",{},void 0,(0,s.Z)(y.Z,{icon:"error_outline",message:this.state.error})):g||(g=(0,s.Z)("div",{},void 0,(0,s.Z)(b,{})))}},{key:"render",value:function(){return(0,s.Z)("div",{className:"profile-ban-details"},void 0,(0,s.Z)("div",{className:"panel panel-default"},void 0,(0,s.Z)("div",{className:"panel-heading"},void 0,(0,s.Z)("h3",{className:"panel-title"},void 0,pgettext("profile ban details title","Ban details"))),this.getPanelBody()))}}]),i}(v().Component);function C(e){return e.display?(0,s.Z)(y.Z,{helpText:pgettext("user profile details","No profile details are editable at this time."),message:pgettext("user profile details","This option is currently unavailable.")}):null}function R(e){return e.display?x||(x=(0,s.Z)("div",{className:"panel-body"},void 0,(0,s.Z)(Z.Z,{}))):null}var E=a(60471);var S=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(){var e;(0,o.Z)(this,i);for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e=n.call.apply(n,[this].concat(a)),(0,p.Z)((0,l.Z)(e),"onChange",(function(t){var a=e.props,n=a.field;(0,a.onChange)(n.fieldname,t.target.value)})),e}return(0,r.Z)(i,[{key:"render",value:function(){var e=this.props,t=e.disabled,a=e.field,n=e.value,i=a.input;return"select"===i.type?(0,s.Z)(E.Z,{choices:i.choices,disabled:t,id:"id_"+a.fieldname,onChange:this.onChange,value:n}):"textarea"===i.type?(0,s.Z)("textarea",{className:"form-control",disabled:t,id:"id_"+a.fieldname,onChange:this.onChange,rows:"4",type:"text",value:n}):"text"===i.type?(0,s.Z)("input",{className:"form-control",disabled:t,id:"id_"+a.fieldname,onChange:this.onChange,type:"text",value:n}):null}}]),i}(v().Component),O=a(96359);function T(e){var t=e.disabled,a=e.errors,n=e.fields,i=e.name,o=e.onChange,r=e.value;return(0,s.Z)("fieldset",{},void 0,(0,s.Z)("legend",{},void 0,i),n.map((function(e){return(0,s.Z)(O.Z,{for:"id_"+e.fieldname,helpText:e.help_text,label:e.label,validation:a[e.fieldname]},e.fieldname,(0,s.Z)(S,{disabled:t,field:e,onChange:o,value:r[e.fieldname]}))})))}var P=a(82211),L=a(43345),A=a(78657),I=a(53904);var B=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(e){var t;(0,o.Z)(this,i),t=n.call(this,e),(0,p.Z)((0,l.Z)(t),"onChange",(function(e,a){t.setState((0,p.Z)({},e,a))})),t.state={isLoading:!1,errors:{}};for(var a=e.groups.length,s=0;s<a;s++)for(var r=e.groups[s],c=r.fields.length,u=0;u<c;u++){var d=r.fields[u].fieldname,h=r.fields[u].initial;t.state[d]=h}return t}return(0,r.Z)(i,[{key:"send",value:function(){var e=Object.assign({},this.state,{errors:null,isLoading:null});return A.Z.post(this.props.api,e)}},{key:"handleSuccess",value:function(e){this.props.onSuccess(e)}},{key:"handleError",value:function(e){400===e.status?(I.Z.error(gettext("Form contains errors.")),this.setState({errors:e})):I.Z.apiError(e)}},{key:"render",value:function(){var e=this;return(0,s.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,s.Z)("div",{className:"panel-body"},void 0,this.props.groups.map((function(t,a){return(0,s.Z)(T,{disabled:e.state.isLoading,errors:e.state.errors,fields:t.fields,name:t.name,onChange:e.onChange,value:e.state},a)}))),(0,s.Z)("div",{className:"panel-footer text-right"},void 0,(0,s.Z)(j,{disabled:this.state.isLoading,onCancel:this.props.onCancel})," ",(0,s.Z)(P.Z,{className:"btn-primary",loading:this.state.isLoading},void 0,pgettext("user profile details form btn","Save changes"))))}}]),i}(L.Z);function j(e){var t=e.onCancel,a=e.disabled;return t?(0,s.Z)("button",{className:"btn btn-default",disabled:a,onClick:t,type:"button"},void 0,pgettext("user profile details form btn","Cancel")):null}var D,z=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),(t=n.call(this,e)).state={loading:!0,groups:null},t}return(0,r.Z)(i,[{key:"componentDidMount",value:function(){var e=this;A.Z.get(this.props.api).then((function(t){e.setState({loading:!1,groups:t})}),(function(t){I.Z.apiError(t),e.props.cancel&&e.props.cancel()}))}},{key:"render",value:function(){var e=this.state,t=e.groups,a=e.loading;return(0,s.Z)("div",{className:"panel panel-default panel-form"},void 0,(0,s.Z)("div",{className:"panel-heading"},void 0,(0,s.Z)("h3",{className:"panel-title"},void 0,pgettext("user profile details form title","Edit details"))),(0,s.Z)(R,{display:a}),(0,s.Z)(C,{display:!a&&!t.length}),(0,s.Z)(U,{api:this.props.api,display:!a&&t.length,groups:t,onCancel:this.props.onCancel,onSuccess:this.props.onSuccess}))}}]),i}(v().Component);function U(e){var t=e.api,a=e.display,n=e.groups,i=e.onCancel,o=e.onSuccess;return a?(0,s.Z)(B,{api:t,groups:n,onCancel:i,onSuccess:o}):null}function M(e){var t=e.api,a=e.display,n=e.onCancel,i=e.onSuccess;return a?(0,s.Z)(z,{api:t,onCancel:n,onSuccess:i}):null}function q(e){var t,a=e.isAuthenticated,n=e.profile;return t=a?pgettext("profile details empty","You are not sharing any details with others."):interpolate(pgettext("profile details empty","%(username)s is not sharing any details with others."),{username:n.username},!0),(0,s.Z)("div",{className:"panel panel-default"},void 0,(0,s.Z)("div",{className:"panel-body text-center lead"},void 0,t))}function F(e){var t=e.html,a=e.text,n=e.url;return t?(0,s.Z)("div",{className:"form-control-static col-md-9",dangerouslySetInnerHTML:{__html:t}}):(0,s.Z)("div",{className:"form-control-static col-md-9"},void 0,(0,s.Z)(H,{text:a,url:n}))}function H(e){var t=e.text,a=e.url;return a?(0,s.Z)("p",{},void 0,(0,s.Z)("a",{href:a,target:"_blank",rel:"nofollow"},void 0,t||a)):t?(0,s.Z)("p",{},void 0,t):null}function Y(e){return(0,s.Z)("div",{className:"form-group"},void 0,(0,s.Z)("strong",{className:"control-label col-md-3"},void 0,e.name,":"),v().createElement(F,e))}function V(e){var t=e.fields,a=e.name;return(0,s.Z)("div",{className:"panel panel-default panel-profile-details-group"},void 0,(0,s.Z)("div",{className:"panel-heading"},void 0,(0,s.Z)("h3",{className:"panel-title"},void 0,a)),(0,s.Z)("div",{className:"panel-body"},void 0,(0,s.Z)("div",{className:"form-horizontal"},void 0,t.map((function(e){var t=e.fieldname,a=e.html,n=e.name,i=e.text,o=e.url;return(0,s.Z)(Y,{name:n,html:a,text:i,url:o},t)})))))}function G(e){var t=e.display,a=e.groups,n=e.isAuthenticated,i=e.loading,o=e.profile;return t?i?D||(D=(0,s.Z)(Z.Z,{})):a.length?(0,s.Z)("div",{},void 0,a.map((function(e,t){return(0,s.Z)(V,{fields:e.fields,name:e.name},t)}))):(0,s.Z)(q,{isAuthenticated:n,profile:o}):null}var $=a(92490);const W=function(e){var t=e.onEdit,a=e.showEditButton;return(0,s.Z)($.o8,{},void 0,(0,s.Z)($.Z2,{auto:!0},void 0,(0,s.Z)($.Eg,{auto:!0},void 0,(0,s.Z)("h3",{},void 0,pgettext("profile details title","Details")))),a&&(0,s.Z)($.Z2,{},void 0,(0,s.Z)($.Eg,{},void 0,(0,s.Z)("button",{className:"btn btn-default btn-outline btn-block",onClick:t,type:"button"},void 0,pgettext("profile details edit btn","Edit")))))};var Q=a(58598);var X=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(){return(0,o.Z)(this,i),n.apply(this,arguments)}return(0,r.Z)(i,[{key:"componentDidMount",value:function(){var e=this.props,t=e.data,a=e.dispatch,n=e.user;t&&t.id===n.id||A.Z.get(this.props.user.api.details).then((function(e){a((0,Q.zD)(e))}),(function(e){I.Z.apiError(e)}))}},{key:"render",value:function(){return this.props.children}}]),i}(v().Component);var K=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),t=n.call(this,e),(0,p.Z)((0,l.Z)(t),"onCancel",(function(){t.setState({editing:!1})})),(0,p.Z)((0,l.Z)(t),"onEdit",(function(){t.setState({editing:!0})})),(0,p.Z)((0,l.Z)(t),"onSuccess",(function(e){var a,n=t.props,i=n.dispatch,s=n.isAuthenticated,o=n.profile;a=s?pgettext("profile details form","Your details have been changed."):interpolate(pgettext("profile details form","%(username)s's details have been changed."),{username:o.username},!0),I.Z.info(a),i((0,Q.zD)(e)),t.setState({editing:!1})})),t.state={editing:!1},t}return(0,r.Z)(i,[{key:"componentDidMount",value:function(){k.Z.set({title:pgettext("profile details title","Details"),parent:this.props.profile.username})}},{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.isAuthenticated,n=e.profile,i=e.profileDetails,o=i.id!==n.id;return(0,s.Z)(X,{data:i,dispatch:t,user:n},void 0,(0,s.Z)("div",{className:"profile-details"},void 0,(0,s.Z)(W,{onEdit:this.onEdit,showEditButton:!!i.edit&&!this.state.editing}),(0,s.Z)(G,{display:!this.state.editing,groups:i.groups,isAuthenticated:a,loading:o,profile:n}),(0,s.Z)(M,{api:n.api.edit_details,dispatch:t,display:this.state.editing,onCancel:this.onCancel,onSuccess:this.onSuccess})))}}]),i}(v().Component),J=a(87462),ee=a(11005),te=a(21981),ae=a(90287);var ne,ie=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),t=n.call(this,e),(0,p.Z)((0,l.Z)(t),"loadMore",(function(){t.setState({isLoading:!0}),t.loadItems(t.props.posts.next)})),t.state={isLoading:!1},t}return(0,r.Z)(i,[{key:"loadItems",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;A.Z.get(this.props.api,{start:t||0}).then((function(a){0===t?ae.Z.dispatch(te.zD(a)):ae.Z.dispatch(te.R3(a)),e.setState({isLoading:!1})}),(function(t){e.setState({isLoading:!1}),I.Z.apiError(t)}))}},{key:"componentDidMount",value:function(){k.Z.set({title:this.props.title,parent:this.props.profile.username}),this.loadItems()}},{key:"render",value:function(){return(0,s.Z)("div",{className:"profile-feed"},void 0,(0,s.Z)($.o8,{},void 0,(0,s.Z)($.Z2,{auto:!0},void 0,(0,s.Z)($.Eg,{auto:!0},void 0,(0,s.Z)("h3",{},void 0,this.props.header)))),v().createElement(se,(0,J.Z)({isLoading:this.state.isLoading,loadMore:this.loadMore},this.props)))}}]),i}(v().Component);function se(e){return e.posts.isLoaded&&!e.posts.results.length?(0,s.Z)("p",{className:"lead"},void 0,e.emptyMessage):(0,s.Z)("div",{},void 0,(0,s.Z)(ee.Z,{isReady:e.posts.isLoaded,posts:e.posts.results,poster:e.profile}),(0,s.Z)(oe,{isLoading:e.isLoading,loadMore:e.loadMore,next:e.posts.next}))}function oe(e){return e.next?(0,s.Z)("div",{className:"pager-more"},void 0,(0,s.Z)(P.Z,{className:"btn btn-default btn-outline",loading:e.isLoading,onClick:e.loadMore},void 0,pgettext("profile load more btn","Show older activity"))):null}var re=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(){return(0,o.Z)(this,i),n.apply(this,arguments)}return(0,r.Z)(i,[{key:"getClassName",value:function(){return this.props.className?"form-search "+this.props.className:"form-search"}},{key:"render",value:function(){return(0,s.Z)("div",{className:this.getClassName()},void 0,(0,s.Z)("input",{type:"text",className:"form-control",value:this.props.value,onChange:this.props.onChange,placeholder:this.props.placeholder||pgettext("quick search placeholder","Search...")}),ne||(ne=(0,s.Z)("span",{className:"material-icon"},void 0,"search")))}}]),i}(v().Component),le=a(40429),ce=a(6935);var ue=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),t=n.call(this,e),(0,p.Z)((0,l.Z)(t),"loadMore",(function(){t.setState({isBusy:!0}),t.loadUsers(t.state.page+1,t.state.search)})),(0,p.Z)((0,l.Z)(t),"search",(function(e){t.setState({isLoaded:!1,isBusy:!0,search:e.target.value,count:0,more:0,page:1,pages:1}),t.loadUsers(1,e.target.value)})),t.setSpecialProps(),_.Z.has(t.PRELOADED_DATA_KEY)?t.initWithPreloadedData(_.Z.pop(t.PRELOADED_DATA_KEY)):t.initWithoutPreloadedData(),t}return(0,r.Z)(i,[{key:"setSpecialProps",value:function(){this.PRELOADED_DATA_KEY="PROFILE_FOLLOWERS",this.TITLE=pgettext("profile followers title","Followers"),this.API_FILTER="followers"}},{key:"initWithPreloadedData",value:function(e){this.state={isLoaded:!0,isBusy:!1,search:"",count:e.count,more:e.more,page:e.page,pages:e.pages},ae.Z.dispatch((0,ce.ZB)(e.results))}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1,isBusy:!1,search:"",count:0,more:0,page:1,pages:1},this.loadUsers()}},{key:"loadUsers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.props.profile.api[this.API_FILTER];A.Z.get(n,{search:a,page:t||1},"user-"+this.API_FILTER).then((function(a){1===t?ae.Z.dispatch((0,ce.ZB)(a.results)):ae.Z.dispatch((0,ce.R3)(a.results)),e.setState({isLoaded:!0,isBusy:!1,count:a.count,more:a.more,page:a.page,pages:a.pages})}),(function(e){I.Z.apiError(e)}))}},{key:"componentDidMount",value:function(){k.Z.set({title:this.TITLE,parent:this.props.profile.username})}},{key:"getLabel",value:function(){if(this.state.isLoaded){if(this.state.search){var e=npgettext("profile followers","Found %(users)s user.","Found %(users)s users.",this.state.count);return interpolate(e,{users:this.state.count},!0)}if(this.props.profile.id===this.props.user.id){var t=npgettext("profile followers","You have %(users)s follower.","You have %(users)s followers.",this.state.count);return interpolate(t,{users:this.state.count},!0)}var a=npgettext("profile followers","%(username)s has %(users)s follower.","%(username)s has %(users)s followers.",this.state.count);return interpolate(a,{username:this.props.profile.username,users:this.state.count},!0)}return pgettext("Loading...")}},{key:"getEmptyMessage",value:function(){return this.state.search?pgettext("profile followers","Search returned no users matching specified criteria."):this.props.user.id===this.props.profile.id?pgettext("profile followers","You have no followers."):interpolate(pgettext("profile followers","%(username)s has no followers."),{username:this.props.profile.username},!0)}},{key:"getMoreButton",value:function(){return this.state.more?(0,s.Z)("div",{className:"pager-more"},void 0,(0,s.Z)(P.Z,{className:"btn btn-default btn-outline",loading:this.state.isBusy,onClick:this.loadMore},void 0,interpolate(pgettext("profile followers","Show more (%(more)s)"),{more:this.state.more},!0))):null}},{key:"getListBody",value:function(){return this.state.isLoaded&&0===this.state.count?(0,s.Z)("p",{className:"lead"},void 0,this.getEmptyMessage()):(0,s.Z)("div",{},void 0,(0,s.Z)(le.Z,{cols:3,isReady:this.state.isLoaded,users:this.props.users}),this.getMoreButton())}},{key:"getClassName",value:function(){return"profile-"+this.API_FILTER}},{key:"render",value:function(){return(0,s.Z)("div",{className:this.getClassName()},void 0,(0,s.Z)($.o8,{},void 0,(0,s.Z)($.Z2,{auto:!0},void 0,(0,s.Z)($.Eg,{auto:!0},void 0,(0,s.Z)("h3",{},void 0,this.getLabel()))),(0,s.Z)($.Z2,{},void 0,(0,s.Z)($.Eg,{},void 0,(0,s.Z)(re,{value:this.state.search,onChange:this.search,placeholder:pgettext("profile followers search","Search users...")})))),this.getListBody())}}]),i}(v().Component);var de=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(){return(0,o.Z)(this,i),n.apply(this,arguments)}return(0,r.Z)(i,[{key:"setSpecialProps",value:function(){this.PRELOADED_DATA_KEY="PROFILE_FOLLOWS",this.TITLE=pgettext("profile follows title","Follows"),this.API_FILTER="follows"}},{key:"getLabel",value:function(){if(this.state.isLoaded){if(this.state.search){var e=npgettext("profile follows","Found %(users)s user.","Found %(users)s users.",this.state.count);return interpolate(e,{users:this.state.count},!0)}if(this.props.profile.id===this.props.user.id){var t=npgettext("profile follows","You are following %(users)s user.","You are following %(users)s users.",this.state.count);return interpolate(t,{users:this.state.count},!0)}var a=npgettext("profile follows","%(username)s is following %(users)s user.","%(username)s is following %(users)s users.",this.state.count);return interpolate(a,{username:this.props.profile.username,users:this.state.count},!0)}return pgettext("profile follows","Loading...")}},{key:"getEmptyMessage",value:function(){return this.state.search?pgettext("profile follows","Search returned no users matching specified criteria."):this.props.user.id===this.props.profile.id?pgettext("profile follows","You are not following any users."):interpolate(pgettext("profile follows","%(username)s is not following any users."),{username:this.props.profile.username},!0)}}]),i}(ue);var pe,he,ve=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(){return(0,o.Z)(this,i),n.apply(this,arguments)}return(0,r.Z)(i,[{key:"getEmptyMessage",value:function(){return this.props.emptyMessage?this.props.emptyMessage:pgettext("username history empty","Your account has no history of name changes.")}},{key:"render",value:function(){return(0,s.Z)("div",{className:"username-history ui-ready"},void 0,(0,s.Z)("ul",{className:"list-group"},void 0,(0,s.Z)("li",{className:"list-group-item empty-message"},void 0,this.getEmptyMessage())))}}]),i}(v().Component),me=a(19605);var fe=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(){return(0,o.Z)(this,i),n.apply(this,arguments)}return(0,r.Z)(i,[{key:"renderUserAvatar",value:function(){return this.props.change.changed_by?(0,s.Z)("a",{href:this.props.change.changed_by.url,className:"user-avatar-wrapper"},void 0,(0,s.Z)(me.ZP,{user:this.props.change.changed_by,size:"100"})):pe||(pe=(0,s.Z)("span",{className:"user-avatar-wrapper"},void 0,(0,s.Z)(me.ZP,{size:"100"})))}},{key:"renderUsername",value:function(){return this.props.change.changed_by?(0,s.Z)("a",{href:this.props.change.changed_by.url,className:"item-title"},void 0,this.props.change.changed_by.username):(0,s.Z)("span",{className:"item-title"},void 0,this.props.change.changed_by_username)}},{key:"render",value:function(){return(0,s.Z)("li",{className:"list-group-item"},this.props.change.id,(0,s.Z)("div",{className:"change-avatar"},void 0,this.renderUserAvatar()),(0,s.Z)("div",{className:"change-author"},void 0,this.renderUsername()),(0,s.Z)("div",{className:"change"},void 0,(0,s.Z)("span",{className:"old-username"},void 0,this.props.change.old_username),he||(he=(0,s.Z)("span",{className:"material-icon"},void 0,"arrow_forward")),(0,s.Z)("span",{className:"new-username"},void 0,this.props.change.new_username)),(0,s.Z)("div",{className:"change-date"},void 0,(0,s.Z)("abbr",{title:this.props.change.changed_on.format("LLL")},void 0,this.props.change.changed_on.fromNow())))}}]),i}(v().Component);var Ze,ge,be=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(){return(0,o.Z)(this,i),n.apply(this,arguments)}return(0,r.Z)(i,[{key:"render",value:function(){return(0,s.Z)("div",{className:"username-history ui-ready"},void 0,(0,s.Z)("ul",{className:"list-group"},void 0,this.props.changes.map((function(e){return(0,s.Z)(fe,{change:e},e.id)}))))}}]),i}(v().Component),ye=a(44039);var _e=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(){return(0,o.Z)(this,i),n.apply(this,arguments)}return(0,r.Z)(i,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"getClassName",value:function(){return this.props.hiddenOnMobile?"list-group-item hidden-xs hidden-sm":"list-group-item"}},{key:"render",value:function(){return(0,s.Z)("li",{className:this.getClassName()},void 0,Ze||(Ze=(0,s.Z)("div",{className:"change-avatar"},void 0,(0,s.Z)("span",{className:"user-avatar"},void 0,(0,s.Z)(me.ZP,{size:"100"})))),(0,s.Z)("div",{className:"change-author"},void 0,(0,s.Z)("span",{className:"ui-preview-text",style:{width:ye.e(30,100)+"px"}},void 0," ")),(0,s.Z)("div",{className:"change"},void 0,(0,s.Z)("span",{className:"ui-preview-text",style:{width:ye.e(30,70)+"px"}},void 0," "),ge||(ge=(0,s.Z)("span",{className:"material-icon"},void 0,"arrow_forward")),(0,s.Z)("span",{className:"ui-preview-text",style:{width:ye.e(30,70)+"px"}},void 0," ")),(0,s.Z)("div",{className:"change-date"},void 0,(0,s.Z)("span",{className:"ui-preview-text",style:{width:ye.e(80,140)+"px"}},void 0," ")))}}]),i}(v().Component);var Ne,ke=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(){return(0,o.Z)(this,i),n.apply(this,arguments)}return(0,r.Z)(i,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return(0,s.Z)("div",{className:"username-history ui-preview"},void 0,(0,s.Z)("ul",{className:"list-group"},void 0,[0,1,2].map((function(e){return(0,s.Z)(_e,{hiddenOnMobile:e>0},e)}))))}}]),i}(v().Component);var xe=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(){return(0,o.Z)(this,i),n.apply(this,arguments)}return(0,r.Z)(i,[{key:"render",value:function(){return this.props.isLoaded?this.props.changes.length?(0,s.Z)(be,{changes:this.props.changes}):(0,s.Z)(ve,{emptyMessage:this.props.emptyMessage}):Ne||(Ne=(0,s.Z)(ke,{}))}}]),i}(v().Component),we=a(48927);var Ce=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),t=n.call(this,e),(0,p.Z)((0,l.Z)(t),"loadMore",(function(){t.setState({isBusy:!0}),t.loadChanges(t.state.page+1,t.state.search)})),(0,p.Z)((0,l.Z)(t),"search",(function(e){t.setState({isLoaded:!1,isBusy:!0,search:e.target.value,count:0,more:0,page:1,pages:1}),t.loadChanges(1,e.target.value)})),_.Z.has("PROFILE_NAME_HISTORY")?t.initWithPreloadedData(_.Z.pop("PROFILE_NAME_HISTORY")):t.initWithoutPreloadedData(),t}return(0,r.Z)(i,[{key:"initWithPreloadedData",value:function(e){this.state={isLoaded:!0,isBusy:!1,search:"",count:e.count,more:e.more,page:e.page,pages:e.pages},ae.Z.dispatch((0,we.ZB)(e.results))}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1,isBusy:!1,search:"",count:0,more:0,page:1,pages:1},this.loadChanges()}},{key:"loadChanges",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;A.Z.get(_.Z.get("USERNAME_CHANGES_API"),{user:this.props.profile.id,search:a,page:t||1},"search-username-history").then((function(a){1===t?ae.Z.dispatch((0,we.ZB)(a.results)):ae.Z.dispatch((0,we.R3)(a.results)),e.setState({isLoaded:!0,isBusy:!1,count:a.count,more:a.more,page:a.page,pages:a.pages})}),(function(e){I.Z.apiError(e)}))}},{key:"componentDidMount",value:function(){k.Z.set({title:pgettext("profile username history title","Username history"),parent:this.props.profile.username})}},{key:"getLabel",value:function(){if(this.state.isLoaded){if(this.state.search){var e=npgettext("profile username history","Found %(changes)s username change.","Found %(changes)s username changes.",this.state.count);return interpolate(e,{changes:this.state.count},!0)}if(this.props.profile.id===this.props.user.id){var t=npgettext("profile username history","Your username was changed %(changes)s time.","Your username was changed %(changes)s times.",this.state.count);return interpolate(t,{changes:this.state.count},!0)}var a=npgettext("profile username history","%(username)s's username was changed %(changes)s time.","%(username)s's username was changed %(changes)s times.",this.state.count);return interpolate(a,{username:this.props.profile.username,changes:this.state.count},!0)}return pgettext("profile username history","Loading...")}},{key:"getEmptyMessage",value:function(){return this.state.search?pgettext("profile username history","Search returned no username changes matching specified criteria."):this.props.user.id===this.props.profile.id?pgettext("username history empty","Your account has no history of name changes."):interpolate(pgettext("profile username history","%(username)s's username was never changed."),{username:this.props.profile.username},!0)}},{key:"getMoreButton",value:function(){return this.state.more?(0,s.Z)("div",{className:"pager-more"},void 0,(0,s.Z)(P.Z,{className:"btn btn-default btn-outline",loading:this.state.isBusy,onClick:this.loadMore},void 0,interpolate(pgettext("profile username history","Show older (%(more)s)"),{more:this.state.more},!0))):null}},{key:"render",value:function(){return(0,s.Z)("div",{className:"profile-username-history"},void 0,(0,s.Z)($.o8,{},void 0,(0,s.Z)($.Z2,{auto:!0},void 0,(0,s.Z)($.Eg,{auto:!0},void 0,(0,s.Z)("h3",{},void 0,this.getLabel()))),(0,s.Z)($.Z2,{},void 0,(0,s.Z)($.Eg,{},void 0,(0,s.Z)(re,{value:this.state.search,onChange:this.search,placeholder:pgettext("profile username history search input","Search history...")})))),(0,s.Z)(xe,{isLoaded:this.state.isLoaded,emptyMessage:this.getEmptyMessage(),changes:this.props["username-history"]}),this.getMoreButton())}}]),i}(v().Component),Re=a(82125),Ee=a(27519),Se=a(59131),Oe=a(98936),Te=a(99755);var Pe,Le=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),t=n.call(this,e),(0,p.Z)((0,l.Z)(t),"action",(function(){t.setState({isLoading:!0}),t.props.profile.is_followed?ae.Z.dispatch((0,Ee.r$)({is_followed:!1,followers:t.props.profile.followers-1})):ae.Z.dispatch((0,Ee.r$)({is_followed:!0,followers:t.props.profile.followers+1})),A.Z.post(t.props.profile.api.follow).then((function(e){t.setState({isLoading:!1}),ae.Z.dispatch((0,Ee.r$)(e))}),(function(e){t.setState({isLoading:!1}),I.Z.apiError(e)}))})),t.state={isLoading:!1},t}return(0,r.Z)(i,[{key:"getClassName",value:function(){return this.props.profile.is_followed?this.props.className+" btn-default btn-following":this.props.className+" btn-default btn-follow"}},{key:"getIcon",value:function(){return this.props.profile.is_followed?"favorite":"favorite_border"}},{key:"getLabel",value:function(){return this.props.profile.is_followed?pgettext("user profile follow btn","Following"):pgettext("user profile follow btn","Follow")}},{key:"render",value:function(){return(0,s.Z)(P.Z,{className:this.getClassName(),disabled:this.state.isLoading,onClick:this.action},void 0,(0,s.Z)("span",{className:"material-icon"},void 0,this.getIcon()),this.getLabel())}}]),i}(v().Component),Ae=a(64646);var Ie,Be,je=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(){var e;(0,o.Z)(this,i);for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e=n.call.apply(n,[this].concat(a)),(0,p.Z)((0,l.Z)(e),"onClick",(function(){Ae.Z.open({mode:"START_PRIVATE",submit:_.Z.get("PRIVATE_THREADS_API"),to:[e.props.profile]})})),e}return(0,r.Z)(i,[{key:"render",value:function(){var e=this.props.user.acl.can_start_private_threads,t=this.props.user.id===this.props.profile.id;return!e||t?null:(0,s.Z)("button",{className:this.props.className,onClick:this.onClick,type:"button"},void 0,Pe||(Pe=(0,s.Z)("span",{className:"material-icon"},void 0,"comment")),pgettext("profile message btn","Message"))}}]),i}(v().Component),De=a(3784),ze=a(7227),Ue=a(30337);var Me,qe,Fe=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),(t=n.call(this,e)).state={isLoaded:!1,isLoading:!1,error:null,is_avatar_locked:"",avatar_lock_user_message:"",avatar_lock_staff_message:""},t}return(0,r.Z)(i,[{key:"componentDidMount",value:function(){var e=this;A.Z.get(this.props.profile.api.moderate_avatar).then((function(t){e.setState({isLoaded:!0,is_avatar_locked:t.is_avatar_locked,avatar_lock_user_message:t.avatar_lock_user_message||"",avatar_lock_staff_message:t.avatar_lock_staff_message||""})}),(function(t){e.setState({isLoaded:!0,error:t.detail})}))}},{key:"clean",value:function(){return!!this.isValid()||(I.Z.error(this.validate().username[0]),!1)}},{key:"send",value:function(){return A.Z.post(this.props.profile.api.moderate_avatar,{is_avatar_locked:this.state.is_avatar_locked,avatar_lock_user_message:this.state.avatar_lock_user_message,avatar_lock_staff_message:this.state.avatar_lock_staff_message})}},{key:"handleSuccess",value:function(e){ae.Z.dispatch((0,ce.n1)(this.props.profile,e.avatar_hash)),I.Z.success(pgettext("profile avatar moderation","Avatar controls have been changed."))}},{key:"getFormBody",value:function(){return(0,s.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,s.Z)("div",{className:"modal-body"},void 0,(0,s.Z)(O.Z,{label:pgettext("profile avatar moderation field","Lock avatar"),helpText:pgettext("profile avatar moderation field","Locking user avatar will prohibit user from changing his avatar and will reset his/her avatar to default one."),for:"id_is_avatar_locked"},void 0,(0,s.Z)(ze.Z,{id:"id_is_avatar_locked",disabled:this.state.isLoading,iconOn:"lock_outline",iconOff:"lock_open",labelOn:pgettext("profile avatar moderation field","Disallow user from changing avatar"),labelOff:pgettext("profile avatar moderation field","Allow user to change avatar"),onChange:this.bindInput("is_avatar_locked"),value:this.state.is_avatar_locked})),(0,s.Z)(O.Z,{label:pgettext("profile avatar moderation field","User message"),helpText:pgettext("profile avatar moderation field","Optional message for user explaining why they are prohibited from changing their avatar."),for:"id_avatar_lock_user_message"},void 0,(0,s.Z)("textarea",{id:"id_avatar_lock_user_message",className:"form-control",rows:"4",disabled:this.state.isLoading,onChange:this.bindInput("avatar_lock_user_message"),value:this.state.avatar_lock_user_message})),(0,s.Z)(O.Z,{label:pgettext("profile avatar moderation field","Staff message"),helpText:pgettext("profile avatar moderation field","Optional message for forum team members explaining why the user is prohibited form changing their avatar."),for:"id_avatar_lock_staff_message"},void 0,(0,s.Z)("textarea",{id:"id_avatar_lock_staff_message",className:"form-control",rows:"4",disabled:this.state.isLoading,onChange:this.bindInput("avatar_lock_staff_message"),value:this.state.avatar_lock_staff_message}))),(0,s.Z)("div",{className:"modal-footer"},void 0,(0,s.Z)("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},void 0,pgettext("profile avatar moderation btn","Close")),(0,s.Z)(P.Z,{className:"btn-primary",loading:this.state.isLoading},void 0,pgettext("profile avatar moderation btn","Save changes"))))}},{key:"getModalBody",value:function(){return this.state.error?(0,s.Z)(Ue.Z,{icon:"remove_circle_outline",message:this.state.error}):this.state.isLoaded?this.getFormBody():Ie||(Ie=(0,s.Z)(De.Z,{}))}},{key:"getClassName",value:function(){return this.state.error?"modal-dialog modal-message modal-avatar-controls":"modal-dialog modal-avatar-controls"}},{key:"render",value:function(){return(0,s.Z)("div",{className:this.getClassName(),role:"document"},void 0,(0,s.Z)("div",{className:"modal-content"},void 0,(0,s.Z)("div",{className:"modal-header"},void 0,(0,s.Z)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":pgettext("modal","Close")},void 0,Be||(Be=(0,s.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,s.Z)("h4",{className:"modal-title"},void 0,pgettext("profile avatar moderation title","Avatar controls"))),this.getModalBody()))}}]),i}(L.Z),He=a(55210);var Ye,Ve,Ge,$e=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),(t=n.call(this,e)).state={isLoaded:!1,isLoading:!1,error:null,username:"",validators:{username:[He.lG()]}},t}return(0,r.Z)(i,[{key:"componentDidMount",value:function(){var e=this;A.Z.get(this.props.profile.api.moderate_username).then((function(){e.setState({isLoaded:!0})}),(function(t){e.setState({isLoaded:!0,error:t.detail})}))}},{key:"clean",value:function(){return!!this.isValid()||(I.Z.error(this.validate().username[0]),!1)}},{key:"send",value:function(){return A.Z.post(this.props.profile.api.moderate_username,{username:this.state.username})}},{key:"handleSuccess",value:function(e){this.setState({username:""}),ae.Z.dispatch((0,we.KP)(e,this.props.profile,this.props.user)),ae.Z.dispatch((0,ce._S)(this.props.profile,e.username,e.slug)),I.Z.success(pgettext("profile username moderation","Username has been changed."))}},{key:"getFormBody",value:function(){return(0,s.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,s.Z)("div",{className:"modal-body"},void 0,(0,s.Z)(O.Z,{label:pgettext("profile username moderation field","New username"),for:"id_username"},void 0,(0,s.Z)("input",{type:"text",id:"id_username",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("username"),value:this.state.username}))),(0,s.Z)("div",{className:"modal-footer"},void 0,(0,s.Z)("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},void 0,pgettext("profile username moderation btn","Cancel")),(0,s.Z)(P.Z,{className:"btn-primary",loading:this.state.isLoading},void 0,pgettext("profile username moderation btn","Change username"))))}},{key:"getModalBody",value:function(){return this.state.error?(0,s.Z)(Ue.Z,{icon:"remove_circle_outline",message:this.state.error}):this.state.isLoaded?this.getFormBody():Me||(Me=(0,s.Z)(De.Z,{}))}},{key:"getClassName",value:function(){return this.state.error?"modal-dialog modal-message modal-rename-user":"modal-dialog modal-rename-user"}},{key:"render",value:function(){return(0,s.Z)("div",{className:this.getClassName(),role:"document"},void 0,(0,s.Z)("div",{className:"modal-content"},void 0,(0,s.Z)("div",{className:"modal-header"},void 0,(0,s.Z)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":pgettext("modal","Close")},void 0,qe||(qe=(0,s.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,s.Z)("h4",{className:"modal-title"},void 0,pgettext("profile username moderation title","Change username"))),this.getModalBody()))}}]),i}(L.Z);var We,Qe,Xe,Ke=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),t=n.call(this,e),(0,p.Z)((0,l.Z)(t),"countdown",(function(){window.setTimeout((function(){t.state.countdown>1?(t.setState({countdown:t.state.countdown-1}),t.countdown()):t.state.confirm||t.setState({confirm:!0})}),1e3)})),t.state={isLoaded:!1,isLoading:!1,isDeleted:!1,error:null,countdown:5,confirm:!1,with_content:!1},t}return(0,r.Z)(i,[{key:"componentDidMount",value:function(){var e=this;A.Z.get(this.props.profile.api.delete).then((function(){e.setState({isLoaded:!0}),e.countdown()}),(function(t){e.setState({isLoaded:!0,error:t.detail})}))}},{key:"send",value:function(){return A.Z.post(this.props.profile.api.delete,{with_content:this.state.with_content})}},{key:"handleSuccess",value:function(){N.Z.stop("user-profile"),this.state.with_content?this.setState({isDeleted:interpolate(pgettext("profile delete","%(username)s's account, threads, posts and other content has been deleted."),{username:this.props.profile.username},!0)}):this.setState({isDeleted:interpolate(pgettext("profile delete","%(username)s's account has been deleted and other content has been hidden."),{username:this.props.profile.username},!0)})}},{key:"getButtonLabel",value:function(){return this.state.confirm?interpolate(pgettext("profile delete btn","Delete %(username)s"),{username:this.props.profile.username},!0):interpolate(pgettext("profile delete btn","Please wait... (%(countdown)ss)"),{countdown:this.state.countdown},!0)}},{key:"getForm",value:function(){return(0,s.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,s.Z)("div",{className:"modal-body"},void 0,(0,s.Z)(O.Z,{label:pgettext("profile delete","User content"),for:"id_with_content"},void 0,(0,s.Z)(ze.Z,{id:"id_with_content",disabled:this.state.isLoading,labelOn:pgettext("profile delete content","Delete together with user's account"),labelOff:pgettext("profile delete content","Hide after deleting user's account"),onChange:this.bindInput("with_content"),value:this.state.with_content}))),(0,s.Z)("div",{className:"modal-footer"},void 0,(0,s.Z)("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},void 0,pgettext("profile delete btn","Cancel")),(0,s.Z)(P.Z,{className:"btn-danger",loading:this.state.isLoading,disabled:!this.state.confirm},void 0,this.getButtonLabel())))}},{key:"getDeletedBody",value:function(){return(0,s.Z)("div",{className:"modal-body"},void 0,Ye||(Ye=(0,s.Z)("div",{className:"message-icon"},void 0,(0,s.Z)("span",{className:"material-icon"},void 0,"info_outline"))),(0,s.Z)("div",{className:"message-body"},void 0,(0,s.Z)("p",{className:"lead"},void 0,this.state.isDeleted),(0,s.Z)("p",{},void 0,(0,s.Z)("a",{href:_.Z.get("USERS_LIST_URL")},void 0,pgettext("profile delete link","Return to users list")))))}},{key:"getModalBody",value:function(){return this.state.error?(0,s.Z)(Ue.Z,{icon:"remove_circle_outline",message:this.state.error}):this.state.isLoaded?this.state.isDeleted?this.getDeletedBody():this.getForm():Ve||(Ve=(0,s.Z)(De.Z,{}))}},{key:"getClassName",value:function(){return this.state.error||this.state.isDeleted?"modal-dialog modal-message modal-delete-account":"modal-dialog modal-delete-account"}},{key:"render",value:function(){return(0,s.Z)("div",{className:this.getClassName(),role:"document"},void 0,(0,s.Z)("div",{className:"modal-content"},void 0,(0,s.Z)("div",{className:"modal-header"},void 0,(0,s.Z)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":pgettext("modal","Close")},void 0,Ge||(Ge=(0,s.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,s.Z)("h4",{className:"modal-title"},void 0,pgettext("profile delete title","Delete user account"))),this.getModalBody()))}}]),i}(L.Z),Je=a(59801);var et=function(e){return{tick:e.tick,user:e.auth,profile:e.profile}},tt=function(e){(0,c.Z)(h,e);var t,a,n=(t=h,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function h(){var e;(0,o.Z)(this,h);for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e=n.call.apply(n,[this].concat(a)),(0,p.Z)((0,l.Z)(e),"showAvatarDialog",(function(){Je.Z.show((0,i.$j)(et)(Fe))})),(0,p.Z)((0,l.Z)(e),"showRenameDialog",(function(){Je.Z.show((0,i.$j)(et)($e))})),(0,p.Z)((0,l.Z)(e),"showDeleteDialog",(function(){Je.Z.show((0,i.$j)(et)(Ke))})),e}return(0,r.Z)(h,[{key:"render",value:function(){var e=this.props.moderation;return(0,s.Z)("ul",{className:"dropdown-menu dropdown-menu-right",role:"menu"},void 0,!!e.avatar&&(0,s.Z)("li",{},void 0,(0,s.Z)("button",{type:"button",className:"btn btn-link",onClick:this.showAvatarDialog},void 0,We||(We=(0,s.Z)("span",{className:"material-icon"},void 0,"portrait")),pgettext("profile moderation menu","Avatar controls"))),!!e.rename&&(0,s.Z)("li",{},void 0,(0,s.Z)("button",{type:"button",className:"btn btn-link",onClick:this.showRenameDialog},void 0,Qe||(Qe=(0,s.Z)("span",{className:"material-icon"},void 0,"credit_card")),pgettext("profile moderation menu","Change username"))),!!e.delete&&(0,s.Z)("li",{},void 0,(0,s.Z)("button",{type:"button",className:"btn btn-link",onClick:this.showDeleteDialog},void 0,Xe||(Xe=(0,s.Z)("span",{className:"material-icon"},void 0,"clear")),pgettext("profile moderation menu","Delete account"))))}}]),h}(v().Component),at=a(24678);const nt=function(e){var t=e.profile;return(0,s.Z)("ul",{className:"profile-data-list"},void 0,!1===t.is_active&&(0,s.Z)("li",{className:"user-account-disabled"},void 0,(0,s.Z)("abbr",{title:pgettext("profile data list","This user's account has been disabled by administrator.")},void 0,pgettext("profile data list","Account disabled"))),(0,s.Z)("li",{className:"user-status-display"},void 0,(0,s.Z)(at.ZP,{user:t,status:t.status},void 0,(0,s.Z)(at.Jj,{user:t,status:t.status}),(0,s.Z)(at.pg,{user:t,status:t.status,className:"status-label"}))),t.rank.is_tab?(0,s.Z)("li",{className:"user-rank"},void 0,(0,s.Z)("a",{href:t.rank.url,className:"item-title"},void 0,t.rank.name)):(0,s.Z)("li",{className:"user-rank"},void 0,(0,s.Z)("span",{className:"item-title"},void 0,t.rank.name)),(t.title||t.rank.title)&&(0,s.Z)("li",{className:"user-title"},void 0,t.title||t.rank.title),(0,s.Z)("li",{className:"user-joined-on"},void 0,(0,s.Z)("abbr",{title:interpolate(pgettext("profile data list","Joined on %(joined_on)s"),{joined_on:t.joined_on.format("LL, LT")},!0)},void 0,interpolate(pgettext("profile data list","Joined %(joined_on)s"),{joined_on:t.joined_on.fromNow()},!0))),t.email&&(0,s.Z)("li",{className:"user-email"},void 0,(0,s.Z)("a",{href:"mailto:"+t.email,className:"item-title"},void 0,t.email)))};var it,st,ot,rt,lt,ct=function(){return(0,s.Z)("button",{className:"btn btn-default btn-icon btn-outline dropdown-toggle",type:"button",title:pgettext("profile options btn","Options"),"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},void 0,lt||(lt=(0,s.Z)("span",{className:"material-icon"},void 0,"settings")))};const ut=function(e){var t=e.profile,a=e.user,n=e.moderation,i=e.message,o=e.follow;return(0,s.Z)(Te.sP,{},void 0,(0,s.Z)(Te.mr,{styleName:t.rank.css_class?"rank-"+t.rank.css_class:"profile"},void 0,(0,s.Z)(Te.gC,{styleName:t.rank.css_class?"rank-"+t.rank.css_class:"profile"},void 0,(0,s.Z)("div",{className:"profile-page-header"},void 0,(0,s.Z)("div",{className:"profile-page-header-avatar"},void 0,(0,s.Z)(me.ZP,{className:"user-avatar hidden-sm hidden-md hidden-lg",user:t,size:200,size2x:400}),(0,s.Z)(me.ZP,{className:"user-avatar hidden-xs hidden-md hidden-lg",user:t,size:64,size2x:128}),(0,s.Z)(me.ZP,{className:"user-avatar hidden-xs hidden-sm",user:t,size:128,size2x:256})),(0,s.Z)("h1",{},void 0,t.username))),(0,s.Z)(Te.eA,{className:"profile-page-header-details"},void 0,(0,s.Z)(Oe.gq,{},void 0,(0,s.Z)(Oe.kw,{auto:!0},void 0,(0,s.Z)(Oe.Z6,{},void 0,(0,s.Z)(nt,{profile:t}))),i&&(0,s.Z)(Oe.kw,{},void 0,(0,s.Z)(Oe.Z6,{},void 0,(0,s.Z)(je,{className:"btn btn-default btn-block btn-outline",profile:t,user:a})),n.available&&!o&&(0,s.Z)(Oe.Z6,{shrink:!0},void 0,(0,s.Z)("div",{className:"dropdown"},void 0,it||(it=(0,s.Z)(ct,{})),(0,s.Z)(tt,{profile:t,moderation:n})))),o&&(0,s.Z)(Oe.kw,{},void 0,(0,s.Z)(Oe.Z6,{},void 0,(0,s.Z)(Le,{className:"btn btn-block btn-outline",profile:t})),n.available&&(0,s.Z)(Oe.Z6,{shrink:!0},void 0,(0,s.Z)("div",{className:"dropdown"},void 0,st||(st=(0,s.Z)(ct,{})),(0,s.Z)(tt,{profile:t,moderation:n})))),n.available&&!o&&!i&&(0,s.Z)(Oe.kw,{},void 0,(0,s.Z)(Oe.Z6,{className:"hidden-xs",shrink:!0},void 0,(0,s.Z)("div",{className:"dropdown"},void 0,ot||(ot=(0,s.Z)(ct,{})),(0,s.Z)(tt,{profile:t,moderation:n}))),(0,s.Z)(Oe.Z6,{className:"hidden-sm hidden-md hidden-lg"},void 0,(0,s.Z)("div",{className:"dropdown"},void 0,(0,s.Z)("button",{className:"btn btn-default btn-block btn-outline dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},void 0,rt||(rt=(0,s.Z)("span",{className:"material-icon"},void 0,"settings")),pgettext("profile options btn","Options")),(0,s.Z)(tt,{profile:t,moderation:n}))))))))};var dt=a(69987),pt=a(94417);const ht=function(e){var t=e.baseUrl,a=e.page,n=e.pages;return(0,s.Z)("div",{className:"nav-container"},void 0,(0,s.Z)("div",{className:"dropdown hidden-sm hidden-md hidden-lg"},void 0,(0,s.Z)("button",{className:"btn btn-default btn-block btn-outline dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},void 0,(0,s.Z)("span",{className:"material-icon"},void 0,a.icon),a.name),(0,s.Z)("ul",{className:"dropdown-menu stick-to-bottom"},void 0,n.map((function(e){return(0,s.Z)("li",{},e.component,(0,s.Z)(dt.rU,{to:t+e.component+"/"},void 0,(0,s.Z)("span",{className:"material-icon"},void 0,e.icon),e.name))})))),(0,s.Z)("ul",{className:"nav nav-pills hidden-xs",role:"menu"},void 0,n.map((function(e){return(0,s.Z)(pt.Z,{path:t+e.component+"/"},e.component,(0,s.Z)(dt.rU,{to:t+e.component+"/"},void 0,(0,s.Z)("span",{className:"material-icon"},void 0,e.icon),e.name))}))))};var vt=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),t=n.call(this,e),(0,p.Z)((0,l.Z)(t),"update",(function(e){ae.Z.dispatch((0,Ee.ZB)(e))})),t.startPolling(e.profile.api.index),t}return(0,r.Z)(i,[{key:"startPolling",value:function(e){N.Z.start({poll:"user-profile",url:e,frequency:9e4,update:this.update})}},{key:"render",value:function(){var e=this,t=_.Z.get("PROFILE").url,a=_.Z.get("PROFILE_PAGES"),n=a.filter((function(a){var n=t+a.component+"/";return e.props.location.pathname===n}))[0],i=this.props,o=i.profile,r=i.user,l=mt(o,r),c=!!r.acl.can_start_private_threads&&o.id!==r.id,u=!!o.acl.can_follow&&o.id!==r.id;return(0,s.Z)("div",{className:"page page-user-profile"},void 0,(0,s.Z)(ut,{profile:this.props.profile,user:this.props.user,moderation:l,message:c,follow:u}),(0,s.Z)(Se.Z,{},void 0,(0,s.Z)(ht,{baseUrl:t,page:n,pages:a}),this.props.children))}}]),i}(Re.Z),mt=function(e,t){var a={available:!1,rename:!1,avatar:!1,delete:!1};return t.is_anonymous||(a.rename=e.acl.can_rename,a.avatar=e.acl.can_moderate_avatar,a.delete=e.acl.can_delete,a.available=!!(a.rename||a.avatar||a.delete)),a};function ft(e){return{isAuthenticated:e.auth.user.id===e.profile.id,tick:e.tick.tick,user:e.auth.user,users:e.users,posts:e.posts,profile:e.profile,profileDetails:e["profile-details"],"username-history":e["username-history"]}}var Zt={posts:function(e){var t;t=e.user.id===e.profile.id?pgettext("profile posts","You have posted no messages."):interpolate(pgettext("profile posts","%(username)s posted no messages."),{username:e.profile.username},!0);var a=null;if(e.posts.isLoaded)if(e.profile.id===e.user.id){var n=npgettext("profile posts","You have posted %(posts)s message.","You have posted %(posts)s messages.",e.profile.posts);a=interpolate(n,{posts:e.profile.posts},!0)}else{var i=npgettext("profile posts","%(username)s has posted %(posts)s message.","%(username)s has posted %(posts)s messages.",e.profile.posts);a=interpolate(i,{username:e.profile.username,posts:e.profile.posts},!0)}else a=pgettext("profile posts","Loading...");return v().createElement(ie,(0,J.Z)({api:e.profile.api.posts,emptyMessage:t,header:a,title:pgettext("profile posts title","Posts")},e))},threads:function(e){var t;t=e.user.id===e.profile.id?pgettext("profile threads","You haven't started any threads."):interpolate(pgettext("profile threads","%(username)s hasn't started any threads"),{username:e.profile.username},!0);var a=null;if(e.posts.isLoaded)if(e.profile.id===e.user.id){var n=npgettext("profile threads","You have started %(threads)s thread.","You have started %(threads)s threads.",e.profile.threads);a=interpolate(n,{threads:e.profile.threads},!0)}else{var i=npgettext("profile threads","%(username)s has started %(threads)s thread.","%(username)s has started %(threads)s threads.",e.profile.threads);a=interpolate(i,{username:e.profile.username,threads:e.profile.threads},!0)}else a=pgettext("profile threads","Loading...");return v().createElement(ie,(0,J.Z)({api:e.profile.api.threads,emptyMessage:t,header:a,title:pgettext("profile threads title","Threads")},e))},followers:ue,follows:de,details:K,"username-history":Ce,"ban-details":w};function gt(){var e=[];return _.Z.get("PROFILE_PAGES").forEach((function(t){e.push(Object.assign({},t,{path:_.Z.get("PROFILE").url+t.component+"/",component:(0,i.$j)(ft)(Zt[t.component])}))})),e}var bt=a(39633);_.Z.addInitializer({name:"component:profile",initializer:function(e){e.has("PROFILE")&&e.has("PROFILE_PAGES")&&(0,bt.Z)({root:_.Z.get("PROFILE").url,component:(0,i.$j)(ft)(vt),paths:gt()})},after:"reducer:profile-hydrate"})},32488:(e,t,a)=>{"use strict";var n,i=a(54385),s=a(97326),o=a(4942),r=a(22928),l=a(15671),c=a(43144),u=a(79340),d=a(6215),p=a(61120),h=a(57588),v=a.n(h),m=a(82211),f=a(43345),Z=a(78657),g=a(53904),b=a(55210),y=a(93051);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}var N=function(e){(0,u.Z)(a,e);var t=_(a);function a(e){var n;return(0,l.Z)(this,a),(n=t.call(this,e)).state={isLoading:!1,email:"",validators:{email:[b.Do()]}},n}return(0,c.Z)(a,[{key:"clean",value:function(){return!!this.isValid()||(g.Z.error(pgettext("request activation link form","Enter a valid e-mail address.")),!1)}},{key:"send",value:function(){return Z.Z.post(i.Z.get("SEND_ACTIVATION_API"),{email:this.state.email})}},{key:"handleSuccess",value:function(e){this.props.callback(e)}},{key:"handleError",value:function(e){["already_active","inactive_admin"].indexOf(e.code)>-1?g.Z.info(e.detail):403===e.status&&e.ban?(0,y.Z)(e.ban):g.Z.apiError(e)}},{key:"render",value:function(){return(0,r.Z)("div",{className:"well well-form well-form-request-activation-link"},void 0,(0,r.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,r.Z)("div",{className:"form-group"},void 0,(0,r.Z)("div",{className:"control-input"},void 0,(0,r.Z)("input",{type:"text",className:"form-control",placeholder:pgettext("request activation link form field","Your e-mail address"),disabled:this.state.isLoading,onChange:this.bindInput("email"),value:this.state.email}))),(0,r.Z)(m.Z,{className:"btn-primary btn-block",loading:this.state.isLoading},void 0,pgettext("request activation link form btn","Send link"))))}}]),a}(f.Z),k=function(e){(0,u.Z)(a,e);var t=_(a);function a(){return(0,l.Z)(this,a),t.apply(this,arguments)}return(0,c.Z)(a,[{key:"getMessage",value:function(){return interpolate(pgettext("request activation link form","Activation link was sent to %(email)s"),{email:this.props.user.email},!0)}},{key:"render",value:function(){return(0,r.Z)("div",{className:"well well-form well-form-request-activation-link well-done"},void 0,(0,r.Z)("div",{className:"done-message"},void 0,n||(n=(0,r.Z)("div",{className:"message-icon"},void 0,(0,r.Z)("span",{className:"material-icon"},void 0,"check"))),(0,r.Z)("div",{className:"message-body"},void 0,(0,r.Z)("p",{},void 0,this.getMessage())),(0,r.Z)("button",{className:"btn btn-primary btn-block",type:"button",onClick:this.props.callback},void 0,pgettext("request activation link form btn","Request another link"))))}}]),a}(v().Component),x=function(e){(0,u.Z)(a,e);var t=_(a);function a(e){var n;return(0,l.Z)(this,a),n=t.call(this,e),(0,o.Z)((0,s.Z)(n),"complete",(function(e){n.setState({complete:e})})),(0,o.Z)((0,s.Z)(n),"reset",(function(){n.setState({complete:!1})})),n.state={complete:!1},n}return(0,c.Z)(a,[{key:"render",value:function(){return this.state.complete?(0,r.Z)(k,{user:this.state.complete,callback:this.reset}):(0,r.Z)(N,{callback:this.complete})}}]),a}(v().Component),w=a(4869);i.Z.addInitializer({name:"component:request-activation-link",initializer:function(){document.getElementById("request-activation-link-mount")&&(0,w.Z)(x,"request-activation-link-mount",!1)},after:"store"})},11768:(e,t,a)=>{"use strict";var n,i,s=a(54385),o=a(97326),r=a(4942),l=a(22928),c=a(15671),u=a(43144),d=a(79340),p=a(6215),h=a(61120),v=a(57588),m=a.n(v),f=a(73935),Z=a.n(f),g=a(82211),b=a(43345),y=a(78657),_=a(53904),N=a(55210),k=a(93051);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,h.Z)(e);if(t){var i=(0,h.Z)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,p.Z)(this,a)}}var w=function(e){(0,d.Z)(a,e);var t=x(a);function a(e){var n;return(0,c.Z)(this,a),(n=t.call(this,e)).state={isLoading:!1,email:"",validators:{email:[N.Do()]}},n}return(0,u.Z)(a,[{key:"clean",value:function(){return!!this.isValid()||(_.Z.error(pgettext("request password reset form","Enter a valid e-mail address.")),!1)}},{key:"send",value:function(){return y.Z.post(s.Z.get("SEND_PASSWORD_RESET_API"),{email:this.state.email})}},{key:"handleSuccess",value:function(e){this.props.callback(e)}},{key:"handleError",value:function(e){["inactive_user","inactive_admin"].indexOf(e.code)>-1?this.props.showInactivePage(e):403===e.status&&e.ban?(0,k.Z)(e.ban):_.Z.apiError(e)}},{key:"render",value:function(){return(0,l.Z)("div",{className:"well well-form well-form-request-password-reset"},void 0,(0,l.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,l.Z)("div",{className:"form-group"},void 0,(0,l.Z)("div",{className:"control-input"},void 0,(0,l.Z)("input",{type:"text",className:"form-control",placeholder:pgettext("request password reset form field","Your e-mail address"),disabled:this.state.isLoading,onChange:this.bindInput("email"),value:this.state.email}))),(0,l.Z)(g.Z,{className:"btn-primary btn-block",loading:this.state.isLoading},void 0,pgettext("request password reset form btn","Send link"))))}}]),a}(b.Z),C=function(e){(0,d.Z)(a,e);var t=x(a);function a(){return(0,c.Z)(this,a),t.apply(this,arguments)}return(0,u.Z)(a,[{key:"getMessage",value:function(){return interpolate(pgettext("request password reset form","Reset password link was sent to %(email)s"),{email:this.props.user.email},!0)}},{key:"render",value:function(){return(0,l.Z)("div",{className:"well well-form well-form-request-password-reset well-done"},void 0,(0,l.Z)("div",{className:"done-message"},void 0,n||(n=(0,l.Z)("div",{className:"message-icon"},void 0,(0,l.Z)("span",{className:"material-icon"},void 0,"check"))),(0,l.Z)("div",{className:"message-body"},void 0,(0,l.Z)("p",{},void 0,this.getMessage())),(0,l.Z)("button",{type:"button",className:"btn btn-primary btn-block",onClick:this.props.callback},void 0,pgettext("request password reset form btn","Request another link"))))}}]),a}(m().Component),R=function(e){(0,d.Z)(a,e);var t=x(a);function a(){return(0,c.Z)(this,a),t.apply(this,arguments)}return(0,u.Z)(a,[{key:"getActivateButton",value:function(){return"inactive_user"===this.props.activation?(0,l.Z)("p",{},void 0,(0,l.Z)("a",{href:s.Z.get("REQUEST_ACTIVATION_URL")},void 0,pgettext("request password reset form error","Activate your account."))):null}},{key:"render",value:function(){return(0,l.Z)("div",{className:"page page-message page-message-info page-forgotten-password-inactive"},void 0,(0,l.Z)("div",{className:"container"},void 0,(0,l.Z)("div",{className:"message-panel"},void 0,i||(i=(0,l.Z)("div",{className:"message-icon"},void 0,(0,l.Z)("span",{className:"material-icon"},void 0,"info_outline"))),(0,l.Z)("div",{className:"message-body"},void 0,(0,l.Z)("p",{className:"lead"},void 0,pgettext("request password reset form error","Your account is inactive.")),(0,l.Z)("p",{},void 0,this.props.message),this.getActivateButton()))))}}]),a}(m().Component),E=function(e){(0,d.Z)(a,e);var t=x(a);function a(e){var n;return(0,c.Z)(this,a),n=t.call(this,e),(0,r.Z)((0,o.Z)(n),"complete",(function(e){n.setState({complete:e})})),(0,r.Z)((0,o.Z)(n),"reset",(function(){n.setState({complete:!1})})),n.state={complete:!1},n}return(0,u.Z)(a,[{key:"showInactivePage",value:function(e){Z().render((0,l.Z)(R,{activation:e.code,message:e.detail}),document.getElementById("page-mount"))}},{key:"render",value:function(){return this.state.complete?(0,l.Z)(C,{callback:this.reset,user:this.state.complete}):(0,l.Z)(w,{callback:this.complete,showInactivePage:this.showInactivePage})}}]),a}(m().Component),S=a(4869);s.Z.addInitializer({name:"component:request-password-reset",initializer:function(){document.getElementById("request-password-reset-mount")&&(0,S.Z)(E,"request-password-reset-mount",!1)},after:"store"})},61323:(e,t,a)=>{"use strict";var n,i=a(54385),s=a(97326),o=a(4942),r=a(22928),l=a(15671),c=a(43144),u=a(79340),d=a(6215),p=a(61120),h=a(57588),v=a.n(h),m=a(73935),f=a.n(m),Z=a(82211),g=a(43345),b=a(14467),y=a(78657),_=a(98274),N=a(59801),k=a(53904),x=a(93051),w=a(19755);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}var R=function(e){(0,u.Z)(a,e);var t=C(a);function a(e){var n;return(0,l.Z)(this,a),(n=t.call(this,e)).state={isLoading:!1,password:""},n}return(0,c.Z)(a,[{key:"clean",value:function(){return!!this.state.password.trim().length||(k.Z.error(pgettext("password reset form","Enter new password.")),!1)}},{key:"send",value:function(){return y.Z.post(i.Z.get("CHANGE_PASSWORD_API"),{password:this.state.password})}},{key:"handleSuccess",value:function(e){this.props.callback(e)}},{key:"handleError",value:function(e){403===e.status&&e.ban?(0,x.Z)(e.ban):k.Z.apiError(e)}},{key:"render",value:function(){return(0,r.Z)("div",{className:"well well-form well-form-reset-password"},void 0,(0,r.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,r.Z)("div",{className:"form-group"},void 0,(0,r.Z)("div",{className:"control-input"},void 0,(0,r.Z)("input",{type:"password",className:"form-control",placeholder:pgettext("password reset form field","Enter new password"),disabled:this.state.isLoading,onChange:this.bindInput("password"),value:this.state.password}))),(0,r.Z)(Z.Z,{className:"btn-primary btn-block",loading:this.state.isLoading},void 0,pgettext("password reset form btn","Change password"))))}}]),a}(g.Z),E=function(e){(0,u.Z)(a,e);var t=C(a);function a(){return(0,l.Z)(this,a),t.apply(this,arguments)}return(0,c.Z)(a,[{key:"getMessage",value:function(){return interpolate(pgettext("password reset form","%(username)s, your password has been changed."),{username:this.props.user.username},!0)}},{key:"showSignIn",value:function(){N.Z.show(b.Z)}},{key:"render",value:function(){return(0,r.Z)("div",{className:"page page-message page-message-success page-forgotten-password-changed"},void 0,(0,r.Z)("div",{className:"container"},void 0,(0,r.Z)("div",{className:"message-panel"},void 0,n||(n=(0,r.Z)("div",{className:"message-icon"},void 0,(0,r.Z)("span",{className:"material-icon"},void 0,"check"))),(0,r.Z)("div",{className:"message-body"},void 0,(0,r.Z)("p",{className:"lead"},void 0,this.getMessage()),(0,r.Z)("p",{},void 0,pgettext("password reset form","Sign in using new password to continue.")),(0,r.Z)("p",{},void 0,(0,r.Z)("button",{type:"button",className:"btn btn-primary",onClick:this.showSignIn},void 0,pgettext("password reset form btn","Sign in")))))))}}]),a}(v().Component),S=function(e){(0,u.Z)(a,e);var t=C(a);function a(){var e;(0,l.Z)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),(0,o.Z)((0,s.Z)(e),"complete",(function(e){_.Z.softSignOut(),w('#hidden-login-form input[name="redirect_to"]').remove(),f().render((0,r.Z)(E,{user:e}),document.getElementById("page-mount"))})),e}return(0,c.Z)(a,[{key:"render",value:function(){return(0,r.Z)(R,{callback:this.complete})}}]),a}(v().Component),O=a(4869);i.Z.addInitializer({name:"component:reset-password-form",initializer:function(){document.getElementById("reset-password-form-mount")&&(0,O.Z)(S,"reset-password-form-mount",!1)},after:"store"})},64752:(e,t,a)=>{"use strict";var n,i=a(22928),s=(a(57588),a(73935)),o=a.n(s),r=a(37424),l=a(62989),c=a(90287);misago.addInitializer({name:"component:search-overlay",initializer:function(e){var t=document.getElementById("search-mount");o().render((0,i.Z)(r.zt,{store:c.Z.getStore()},void 0,n||(n=(0,i.Z)(l.F,{}))),t)},after:"store"})},40949:(e,t,a)=>{"use strict";var n,i=a(37424),s=a(22928),o=a(87462),r=a(57588),l=a.n(r),c=a(59131),u=a(15671),d=a(43144),p=a(97326),h=a(79340),v=a(6215),m=a(61120),f=a(4942),Z=a(54385),g=a(43345),b=a(21981),y=a(16427),_=a(6935),N=a(78657),k=a(53904),x=a(90287),w=a(98936),C=a(99755);var R=function(e){(0,h.Z)(o,e);var t,a,i=(t=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,m.Z)(t);if(a){var i=(0,m.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,v.Z)(this,e)});function o(e){var t;return(0,u.Z)(this,o),t=i.call(this,e),(0,f.Z)((0,p.Z)(t),"onQueryChange",(function(e){t.changeValue("query",e.target.value)})),t.state={isLoading:!1,query:e.search.query},t}return(0,d.Z)(o,[{key:"componentDidMount",value:function(){this.state.query.length&&this.handleSubmit()}},{key:"clean",value:function(){return!!this.state.query.trim().length||(k.Z.error(pgettext("search form","You have to enter search query.")),!1)}},{key:"send",value:function(){x.Z.dispatch((0,y.Vx)({isLoading:!0}));var e=this.state.query.trim(),t=window.location.href,a=t.indexOf("?q=");return a>0&&(t=t.substring(0,a+3)),window.history.pushState({},"",t+encodeURIComponent(e)),N.Z.get(Z.Z.get("SEARCH_API"),{q:e})}},{key:"handleSuccess",value:function(e){x.Z.dispatch((0,y.Vx)({query:this.state.query.trim(),isLoading:!1,providers:e})),e.forEach((function(e){"users"===e.id?x.Z.dispatch((0,_.ZB)(e.results.results)):"threads"===e.id&&x.Z.dispatch((0,b.zD)(e.results))}))}},{key:"handleError",value:function(e){k.Z.apiError(e),x.Z.dispatch((0,y.Vx)({isLoading:!1}))}},{key:"render",value:function(){return(0,s.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,s.Z)(C.sP,{},void 0,(0,s.Z)(C.mr,{styleName:"site-search"},void 0,(0,s.Z)(C.gC,{styleName:"site-search"},void 0,(0,s.Z)("h1",{},void 0,pgettext("search form title","Search"))),(0,s.Z)(C.eA,{className:"page-header-search-form"},void 0,(0,s.Z)(w.gq,{},void 0,(0,s.Z)(w.kw,{auto:!0},void 0,(0,s.Z)(w.Z6,{},void 0,(0,s.Z)("input",{className:"form-control",disabled:this.state.isLoading,type:"text",value:this.state.query,placeholder:pgettext("search form input","Search"),onChange:this.onQueryChange})),(0,s.Z)(w.Z6,{shrink:!0},void 0,(0,s.Z)("button",{className:"btn btn-secondary btn-icon btn-outline",title:pgettext("search form btn","Search"),disabled:this.state.isLoading},void 0,n||(n=(0,s.Z)("span",{className:"material-icon"},void 0,"search"))))))))))}}]),o}(g.Z),E=a(69987);function S(e){return(0,s.Z)("div",{className:"list-group nav-side"},void 0,e.providers.map((function(e){return(0,s.Z)(E.rU,{activeClassName:"active",className:"list-group-item",to:e.url},e.id,(0,s.Z)("span",{className:"material-icon"},void 0,e.icon),e.name,(0,s.Z)(O,{results:e.results}))})))}function O(e){if(!e.results)return null;var t=e.results.count;return t>1e6?t=Math.ceil(t/1e6)+"KK":t>1e3&&(t=Math.ceil(t/1e3)+"K"),(0,s.Z)("span",{className:"badge"},void 0,t)}function T(e){return(0,s.Z)("div",{className:"page page-search"},void 0,(0,s.Z)(R,{provider:e.provider,search:e.search}),(0,s.Z)(c.Z,{},void 0,(0,s.Z)("div",{className:"row"},void 0,(0,s.Z)("div",{className:"col-md-3"},void 0,(0,s.Z)(S,{providers:e.search.providers})),(0,s.Z)("div",{className:"col-md-9"},void 0,e.children,(0,s.Z)(P,{provider:e.provider,search:e.search})))))}function P(e){var t=null;if(e.search.providers.forEach((function(a){a.id===e.provider.id&&(t=a.time)})),null===t)return null;var a=pgettext("search time","Search took %(time)s s");return(0,s.Z)("footer",{className:"search-footer"},void 0,(0,s.Z)("p",{},void 0,interpolate(a,{time:t},!0)))}var L=a(11005),A=a(82211);function I(e){return(0,s.Z)("div",{},void 0,(0,s.Z)(L.Z,{isReady:!0,posts:e.results}),l().createElement(B,e))}a(69092);var B=function(e){(0,h.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,m.Z)(t);if(a){var i=(0,m.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,v.Z)(this,e)});function i(){var e;(0,u.Z)(this,i);for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e=n.call.apply(n,[this].concat(a)),(0,f.Z)((0,p.Z)(e),"onClick",(function(){x.Z.dispatch((0,b.Vx)({isBusy:!0})),N.Z.get(e.props.provider.api,{q:e.props.query,page:e.props.next}).then((function(e){e.forEach((function(e){"threads"===e.id&&(x.Z.dispatch((0,b.R3)(e.results)),x.Z.dispatch((0,y.P0)(e)))})),x.Z.dispatch((0,b.Vx)({isBusy:!1}))}),(function(e){k.Z.apiError(e),x.Z.dispatch((0,b.Vx)({isBusy:!1}))}))})),e}return(0,d.Z)(i,[{key:"render",value:function(){return this.props.more?(0,s.Z)("div",{className:"pager-more"},void 0,(0,s.Z)(A.Z,{className:"btn btn-default btn-outline",loading:this.props.isBusy,onClick:this.onClick},void 0,pgettext("search threads btn","Show more"))):null}}]),i}(l().Component);function j(e){var t=e.children,a=e.loading,n=e.posts,i=e.query;return n&&n.count?t:i.length?(0,s.Z)("p",{className:"lead"},void 0,a?pgettext("search threads","Loading results..."):pgettext("search threads","No threads matching search query have been found.")):(0,s.Z)("p",{className:"lead"},void 0,pgettext("search threads","Enter at least two characters to search threads."))}var D=a(40429);function z(e){var t=e.children,a=e.loading,n=e.query;return e.users.length?t:n.length?(0,s.Z)("p",{className:"lead"},void 0,a?pgettext("search users","Loading results..."):pgettext("search users","No users matching search query have been found.")):(0,s.Z)("p",{className:"lead"},void 0,pgettext("search users","Enter at least two characters to search users."))}var U={threads:function(e){return(0,s.Z)(T,{provider:e.route.provider,search:e.search},void 0,(0,s.Z)(j,{loading:e.search.isLoading,query:e.search.query,posts:e.posts},void 0,l().createElement(I,(0,o.Z)({provider:e.route.provider,query:e.search.query},e.posts))))},users:function(e){return(0,s.Z)(T,{provider:e.route.provider,search:e.search},void 0,(0,s.Z)(z,{loading:e.search.isLoading,query:e.search.query,users:e.users},void 0,(0,s.Z)(D.Z,{cols:3,isReady:!e.search.isLoading,users:e.users})))}};function M(e){return{posts:e.posts,search:e.search,tick:e.tick.tick,user:e.auth.user,users:e.users}}var q=a(39633);Z.Z.addInitializer({name:"component:search",initializer:function(e){var t;"misago:search"===e.get("CURRENT_LINK")&&(0,q.Z)({paths:(t=Z.Z.get("SEARCH_PROVIDERS"),t.map((function(e){return{path:e.url,component:(0,i.$j)(M)(U[e.id]),provider:e}})))})},after:"store"})},78679:(e,t,a)=>{"use strict";var n,i=a(22928),s=(a(57588),a(73935)),o=a.n(s),r=a(37424),l=a(6333),c=a(90287);misago.addInitializer({name:"component:site-nav-overlay",initializer:function(e){var t=document.getElementById("site-nav-mount");o().render((0,i.Z)(r.zt,{store:c.Z.getStore()},void 0,n||(n=(0,i.Z)(l.Or,{}))),t)},after:"store"})},61814:(e,t,a)=>{"use strict";var n=a(37424),i=a(54385),s=a(22928),o=a(15671),r=a(43144),l=a(79340),c=a(6215),u=a(61120),d=a(57588);var p={info:"alert-info",success:"alert-success",warning:"alert-warning",error:"alert-danger"},h=function(e){(0,l.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(a){var i=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function i(){return(0,o.Z)(this,i),n.apply(this,arguments)}return(0,r.Z)(i,[{key:"getSnackbarClass",value:function(){var e="alerts-snackbar";return this.props.isVisible?e+=" in":e+=" out",e}},{key:"render",value:function(){return(0,s.Z)("div",{className:this.getSnackbarClass()},void 0,(0,s.Z)("p",{className:"alert "+p[this.props.type]},void 0,this.props.message))}}]),i}(a.n(d)().Component);function v(e){return e.snackbar}var m=a(4869);i.Z.addInitializer({name:"component:snackbar",initializer:function(){(0,m.Z)((0,n.$j)(v)(h),"snackbar-mount")},after:"snackbar"})},95920:(e,t,a)=>{"use strict";var n=a(57588),i=a.n(n),s=a(22928),o=a(15671),r=a(43144),l=a(97326),c=a(79340),u=a(6215),d=a(61120),p=a(4942),h=a(54385),v=a(26106),m=a(82211),f=a(43345),Z=a(96359),g=a(78657),b=a(53904),y=a(55210),_=a(59131),N=a(99755);const k=function(e){var t=e.backendName,a=pgettext("social auth title","Sign in with %(backend)s"),n=interpolate(a,{backend:t},!0);return(0,s.Z)(N.sP,{},void 0,(0,s.Z)(N.mr,{styleName:"social-auth"},void 0,(0,s.Z)(N.gC,{styleName:"social-auth"},void 0,(0,s.Z)("h1",{},void 0,n))))};function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){(0,p.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var C=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(e){var t;(0,o.Z)(this,i),t=n.call(this,e),(0,p.Z)((0,l.Z)(t),"handlePrivacyPolicyChange",(function(e){var a=e.target.value;t.handleToggleAgreement("privacyPolicy",a)})),(0,p.Z)((0,l.Z)(t),"handleTermsOfServiceChange",(function(e){var a=e.target.value;t.handleToggleAgreement("termsOfService",a)})),(0,p.Z)((0,l.Z)(t),"handleToggleAgreement",(function(e,a){t.setState((function(n,i){if(null===n[e]){var s=w(w({},n.errors),{},(0,p.Z)({},e,null));return(0,p.Z)({errors:s},e,a)}var o=t.state.validators[e][0],r=w(w({},n.errors),{},(0,p.Z)({},e,[o(null)]));return(0,p.Z)({errors:r},e,null)}))}));var a={email:[y.Do()],username:[y.lG()]};return h.Z.get("TERMS_OF_SERVICE_ID")&&(a.termsOfService=[y.fT()]),h.Z.get("PRIVACY_POLICY_ID")&&(a.privacyPolicy=[y.jA()]),t.state={email:e.email||"",emailProtected:!!e.email,username:e.username||"",termsOfService:null,privacyPolicy:null,validators:a,errors:{},isLoading:!1},t}return(0,r.Z)(i,[{key:"clean",value:function(){if(this.validate(),-1!==[this.state.email.trim().length,this.state.username.trim().length].indexOf(0))return b.Z.error(pgettext("social auth form","Fill out all fields.")),!1;var e=this.state.validators;return h.Z.get("TERMS_OF_SERVICE_ID")&&null===this.state.termsOfService?(b.Z.error(e.termsOfService[0](null)),!1):!h.Z.get("PRIVACY_POLICY_ID")||null!==this.state.privacyPolicy||(b.Z.error(e.privacyPolicy[0](null)),!1)}},{key:"send",value:function(){return g.Z.post(this.props.url,{email:this.state.email,username:this.state.username,terms_of_service:this.state.termsOfService,privacy_policy:this.state.privacyPolicy})}},{key:"handleSuccess",value:function(e){(0,this.props.onRegistrationComplete)(e)}},{key:"handleError",value:function(e){if(200===e.status)(0,this.props.onRegistrationComplete)({activation:"active",step:"done",username:this.state.username});else if(400===e.status){var t={errors:e};e.email&&(t.emailProtected=!1),this.setState(t)}else b.Z.apiError(e)}},{key:"render",value:function(){var e=this.props.backend_name,t=this.state,a=t.email,n=t.emailProtected,i=t.username,o=t.isLoading,r=null;if(n){var l=pgettext("social auth form","Your e-mail address has been verified by %(backend)s.");r=interpolate(l,{backend:e},!0)}return(0,s.Z)("div",{className:"page page-social-auth page-social-auth-register"},void 0,(0,s.Z)(k,{backendName:e}),(0,s.Z)(_.Z,{},void 0,(0,s.Z)("div",{className:"row"},void 0,(0,s.Z)("div",{className:"col-md-6 col-md-offset-3"},void 0,(0,s.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,s.Z)("div",{className:"panel panel-default panel-form"},void 0,(0,s.Z)("div",{className:"panel-heading"},void 0,(0,s.Z)("h3",{className:"panel-title"},void 0,pgettext("social auth form title","Complete your account"))),(0,s.Z)("div",{className:"panel-body"},void 0,(0,s.Z)(Z.Z,{for:"id_username",label:pgettext("social auth form field","Username"),validation:this.state.errors.username},void 0,(0,s.Z)("input",{type:"text",id:"id_username",className:"form-control",disabled:o,onChange:this.bindInput("username"),value:i})),(0,s.Z)(Z.Z,{for:"id_email",label:pgettext("social auth form field","E-mail address"),helpText:r,validation:n?null:this.state.errors.email},void 0,(0,s.Z)("input",{type:"email",id:"id_email",className:"form-control",disabled:o||n,onChange:this.bindInput("email"),value:a})),(0,s.Z)(v.Z,{errors:this.state.errors,privacyPolicy:this.state.privacyPolicy,termsOfService:this.state.termsOfService,onPrivacyPolicyChange:this.handlePrivacyPolicyChange,onTermsOfServiceChange:this.handleTermsOfServiceChange})),(0,s.Z)("div",{className:"panel-footer"},void 0,(0,s.Z)(m.Z,{className:"btn-primary",loading:this.state.isLoading},void 0,pgettext("social auth form btn","Sign in")))))))))}}]),i}(f.Z);const R=function(e){var t,a,n=e.activation,i=e.backend_name,o=e.username;return a="user"===n?pgettext("account activation required","%(username)s, your account has been created but you need to activate it before you will be able to sign in."):"admin"===n?pgettext("account activation required","%(username)s, your account has been created but the site administrator will have to activate it before you will be able to sign in."):pgettext("social auth complete","%(username)s, your account has been created and you have been signed in to it."),t="active"===n?"check":"info_outline",(0,s.Z)("div",{className:"page page-social-auth page-social-auth-register"},void 0,(0,s.Z)(k,{backendName:i}),(0,s.Z)(_.Z,{},void 0,(0,s.Z)("div",{className:"row"},void 0,(0,s.Z)("div",{className:"col-md-6 col-md-offset-3"},void 0,(0,s.Z)("div",{className:"panel panel-default panel-form"},void 0,(0,s.Z)("div",{className:"panel-heading"},void 0,(0,s.Z)("h3",{className:"panel-title"},void 0,pgettext("social auth complete title","Registration completed!"))),(0,s.Z)("div",{className:"panel-body panel-message-body"},void 0,(0,s.Z)("div",{className:"message-icon"},void 0,(0,s.Z)("span",{className:"material-icon"},void 0,t)),(0,s.Z)("div",{className:"message-body"},void 0,(0,s.Z)("p",{className:"lead"},void 0,interpolate(a,{username:o},!0)),(0,s.Z)("p",{className:"help-block"},void 0,(0,s.Z)("a",{className:"btn btn-default",href:h.Z.get("MISAGO_PATH")},void 0,pgettext("social auth complete link","Return to forum index"))))))))))};var E=function(e){(0,c.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(a){var i=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),t=n.call(this,e),(0,p.Z)((0,l.Z)(t),"handleRegistrationComplete",(function(e){var a=e.activation,n=e.email,i=e.step,s=e.username;t.setState({activation:a,email:n,step:i,username:s})})),t.state={step:e.step,activation:e.activation||"",email:e.email||"",username:e.username||""},t}return(0,r.Z)(i,[{key:"render",value:function(){var e=this.props,t=e.backend_name,a=e.url,n=this.state,i=n.activation,o=n.email,r=n.step,l=n.username;return"register"===r?(0,s.Z)(C,{backend_name:t,email:o,url:a,username:l,onRegistrationComplete:this.handleRegistrationComplete}):(0,s.Z)(R,{activation:i,backend_name:t,email:o,url:a,username:l})}}]),i}(i().Component),S=a(4869);h.Z.addInitializer({name:"component:social-auth",initializer:function(e){if("misago:social-complete"===e.get("CURRENT_LINK")){var t=e.get("SOCIAL_AUTH_FORM");(0,S.Z)(i().createElement(E,t),"page-mount")}},after:"store"})},84333:(e,t,a)=>{"use strict";var n,i,s=a(37424),o=a(22928),r=a(15671),l=a(43144),c=a(97326),u=a(79340),d=a(6215),p=a(61120),h=a(4942),v=a(57588),m=a.n(v),f=a(87462),Z=a(43345),g=a(96359),b=a(8154),y=a(7738),_=a(78657),N=a(59801),k=a(53904),x=a(90287);var w,C=function(e){(0,u.Z)(s,e);var t,a,i=(t=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function s(e){var t;return(0,r.Z)(this,s),t=i.call(this,e),(0,h.Z)((0,c.Z)(t),"onUsernameChange",(function(e){t.changeValue("username",e.target.value)})),t.state={isLoading:!1,username:""},t}return(0,l.Z)(s,[{key:"clean",value:function(){return!!this.state.username.trim().length||(k.Z.error(pgettext("add private thread participant","You have to enter user name.")),!1)}},{key:"send",value:function(){return _.Z.patch(this.props.thread.api.index,[{op:"add",path:"participants",value:this.state.username},{op:"add",path:"acl",value:1}])}},{key:"handleSuccess",value:function(e){x.Z.dispatch((0,y.y8)(e)),x.Z.dispatch(b.gx(e.participants)),k.Z.success(pgettext("add private thread participant","New participant has been added to thread.")),N.Z.hide()}},{key:"render",value:function(){return(0,o.Z)("div",{className:"modal-dialog modal-sm",role:"document"},void 0,(0,o.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,n||(n=(0,o.Z)(R,{})),(0,o.Z)("div",{className:"modal-body"},void 0,(0,o.Z)(g.Z,{for:"id_username",label:pgettext("add private thread participant field","User to add")},void 0,(0,o.Z)("input",{id:"id_username",className:"form-control",disabled:this.state.isLoading,onChange:this.onUsernameChange,type:"text",value:this.state.username}))),(0,o.Z)("div",{className:"modal-footer"},void 0,(0,o.Z)("button",{className:"btn btn-block btn-primary",disabled:this.state.isLoading},void 0,pgettext("add private thread participant btn","Add participant")),(0,o.Z)("button",{className:"btn btn-block btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},void 0,pgettext("add private thread participant btn","Cancel"))))))}}]),s}(Z.Z);function R(e){return(0,o.Z)("div",{className:"modal-header"},void 0,(0,o.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,i||(i=(0,o.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,o.Z)("h4",{className:"modal-title"},void 0,pgettext("add private thread participant modal title","Add participant")))}var E=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(){var e;(0,r.Z)(this,i);for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e=n.call.apply(n,[this].concat(a)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){N.Z.show((0,o.Z)(C,{thread:e.props.thread}))})),e}return(0,l.Z)(i,[{key:"render",value:function(){return this.props.thread.acl.can_add_participants?(0,o.Z)("div",{className:"col-xs-12 col-sm-3"},void 0,(0,o.Z)("button",{className:"btn btn-default btn-block",onClick:this.onClick,type:"button"},void 0,w||(w=(0,o.Z)("span",{className:"material-icon"},void 0,"person_add")),pgettext("add participant btn","Add participant"))):null}}]),i}(m().Component),S=a(54385);var O=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,r.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"onClick",(function(){var e,a,n=!1;if(t.isUser)n=window.confirm(pgettext("private thread owner change","Are you sure you want to take over this thread?"));else{var i=pgettext("private thread owner change","Are you sure you want to change thread owner to %(user)s?");n=window.confirm(interpolate(i,{user:t.props.participant.username},!0))}n&&(e=t.props.thread,a=t.props.participant,_.Z.patch(e.api.index,[{op:"replace",path:"owner",value:a.id},{op:"add",path:"acl",value:1}]).then((function(e){x.Z.dispatch((0,y.y8)(e)),x.Z.dispatch(b.gx(e.participants));var t=pgettext("thread participants actions","%(user)s has been made new thread owner.");k.Z.success(interpolate(t,{user:a.username},!0))}),(function(e){k.Z.apiError(e)})))})),t.isUser=e.participant.id===e.user.id,t}return(0,l.Z)(i,[{key:"render",value:function(){return this.props.participant.is_owner?null:this.props.thread.acl.can_change_owner?(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},void 0,pgettext("private thread owner change btn","Make owner"))):null}}]),i}(m().Component);var T,P,L,A=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,r.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"onClick",(function(){var e,a,n=!1;if(t.isUser)n=window.confirm(pgettext("private thread leave","Are you sure you want to leave this thread?"));else{var i=pgettext("private thread leave","Are you sure you want to remove %(user)s from this thread?");n=window.confirm(interpolate(i,{user:t.props.participant.username},!0))}n&&(t.isUser?(e=t.props.thread,a=t.props.participant,_.Z.patch(e.api.index,[{op:"remove",path:"participants",value:a.id}]).then((function(){k.Z.success(pgettext("thread participants actions","You have left this thread.")),window.setTimeout((function(){window.location=S.Z.get("PRIVATE_THREADS_URL")}),3e3)}),(function(e){k.Z.apiError(e)}))):function(e,t){_.Z.patch(e.api.index,[{op:"remove",path:"participants",value:t.id},{op:"add",path:"acl",value:1}]).then((function(e){x.Z.dispatch((0,y.y8)(e)),x.Z.dispatch(b.gx(e.participants));var a=pgettext("thread participants actions","%(user)s has been removed from this thread.");k.Z.success(interpolate(a,{user:t.username},!0))}),(function(e){k.Z.apiError(e)}))}(t.props.thread,t.props.participant))})),t.isUser=e.participant.id===e.user.id,t}return(0,l.Z)(i,[{key:"render",value:function(){var e=this.props.user.acl.can_moderate_private_threads;return this.props.userIsOwner||this.isUser||e?(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},void 0,this.isUser?pgettext("private thread leave btn","Leave thread"):pgettext("private thread leave btn","Remove"))):null}}]),i}(m().Component),I=a(19605);function B(e){var t=e.participant,a="btn btn-default";return t.is_owner&&(a="btn btn-primary"),a+=" btn-user btn-block",(0,o.Z)("div",{className:"col-xs-12 col-sm-3 col-md-2 participant-card"},void 0,(0,o.Z)("div",{className:"dropdown"},void 0,(0,o.Z)("button",{"aria-haspopup":"true","aria-expanded":"false",className:a,"data-toggle":"dropdown",type:"button"},void 0,(0,o.Z)(I.ZP,{size:"34",user:t}),(0,o.Z)("span",{className:"btn-text"},void 0,t.username)),(0,o.Z)("ul",{className:"dropdown-menu stick-to-bottom"},void 0,(0,o.Z)(j,{isOwner:t.is_owner}),T||(T=(0,o.Z)("li",{className:"dropdown-header"})),(0,o.Z)("li",{},void 0,(0,o.Z)("a",{href:t.url},void 0,pgettext("thread participants profile link","See profile"))),P||(P=(0,o.Z)("li",{role:"separator",className:"divider"})),m().createElement(O,e),m().createElement(A,e))))}function j(e){return e.isOwner?(0,o.Z)("li",{className:"dropdown-header dropdown-header-owner"},void 0,L||(L=(0,o.Z)("span",{className:"material-icon"},void 0,"start")),(0,o.Z)("span",{className:"icon-text"},void 0,pgettext("thread participants owner status","Thread owner"))):null}function D(e){var t=e.participants,a=e.thread,n=e.user,i=e.userIsOwner;return(0,o.Z)("div",{className:"participants-cards"},void 0,(0,o.Z)("div",{className:"row"},void 0,t.map((function(e){return(0,o.Z)(B,{participant:e,thread:a,user:n,userIsOwner:i},e.id)}))))}function z(e){return e.participants.length?(0,o.Z)("div",{className:"panel panel-default panel-participants"},void 0,(0,o.Z)("div",{className:"panel-body"},void 0,m().createElement(D,(0,f.Z)({userIsOwner:U(e.user,e.participants)},e)),(0,o.Z)("div",{className:"row"},void 0,(0,o.Z)(E,{thread:e.thread}),(0,o.Z)("div",{className:"col-xs-12 col-sm-9"},void 0,(0,o.Z)("p",{},void 0,function(e){var t=e.length,a=npgettext("thread participants stat","This thread has %(users)s participant.","This thread has %(users)s participants.",t);return interpolate(a,{users:t},!0)}(e.participants)))))):null}function U(e,t){return t[0].id===e.id}var M,q=a(30381),F=a.n(q);function H(e){return(0,o.Z)("div",{className:"poll-choices-bars"},void 0,e.poll.choices.map((function(t){return(0,o.Z)(Y,{choice:t,poll:e.poll},t.hash)})))}function Y(e){var t=0;return e.choice.votes&&e.poll.votes&&(t=Math.ceil(100*e.choice.votes/e.poll.votes)),(0,o.Z)("dl",{className:"dl-horizontal"},void 0,(0,o.Z)("dt",{},void 0,e.choice.label),(0,o.Z)("dd",{},void 0,(0,o.Z)("div",{className:"progress"},void 0,(0,o.Z)("div",{className:"progress-bar",role:"progressbar","aria-valuenow":t,"aria-valuemin":"0","aria-valuemax":"100",style:{width:t+"%"}},void 0,(0,o.Z)("span",{className:"sr-only"},void 0,G(e.votes,e.proc)))),(0,o.Z)("ul",{className:"list-unstyled list-inline poll-chart"},void 0,(0,o.Z)(V,{proc:t,votes:e.choice.votes}),(0,o.Z)($,{selected:e.choice.selected}))))}function V(e){return(0,o.Z)("li",{className:"poll-chart-votes"},void 0,G(e.votes,e.proc))}function G(e,t){var a=npgettext("thread poll","%(votes)s vote, %(proc)s% of total.","%(votes)s votes, %(proc)s% of total.",e);return interpolate(a,{votes:e,proc:t},!0)}function $(e){return e.selected?(0,o.Z)("li",{className:"poll-chart-selected"},void 0,M||(M=(0,o.Z)("span",{className:"material-icon"},void 0,"check_box")),pgettext("thread poll","You've voted on this choice.")):null}var W,Q,X,K=a(30337),J=a(3784);var ee=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,r.Z)(this,i),(t=n.call(this,e)).state={isLoading:!0,error:null,data:[]},t}return(0,l.Z)(i,[{key:"componentDidMount",value:function(){var e=this;_.Z.get(this.props.poll.api.votes).then((function(t){var a=t.map((function(e){return Object.assign({},e,{voters:e.voters.map((function(e){return Object.assign({},e,{voted_on:F()(e.voted_on)})}))})}));e.setState({isLoading:!1,data:a})}),(function(t){e.setState({isLoading:!1,error:t.detail})}))}},{key:"render",value:function(){return(0,o.Z)("div",{className:"modal-dialog"+(this.state.error?" modal-message":" modal-sm"),role:"document"},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,(0,o.Z)("div",{className:"modal-header"},void 0,(0,o.Z)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":pgettext("modal","Close")},void 0,W||(W=(0,o.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,o.Z)("h4",{className:"modal-title"},void 0,pgettext("thread poll","Poll votes"))),(0,o.Z)(te,{data:this.state.data,error:this.state.error,isLoading:this.state.isLoading})))}}]),i}(m().Component);function te(e){return e.isLoading?Q||(Q=(0,o.Z)(J.Z,{})):e.error?(0,o.Z)(K.Z,{icon:"error_outline",message:e.error}):(0,o.Z)(ae,{data:e.data})}function ae(e){return(0,o.Z)("div",{className:"modal-body modal-poll-votes"},void 0,(0,o.Z)("ul",{className:"list-unstyled votes-details"},void 0,e.data.map((function(e){return m().createElement(ne,(0,f.Z)({key:e.hash},e))}))))}function ne(e){return(0,o.Z)("li",{},void 0,(0,o.Z)("h4",{},void 0,e.label),(0,o.Z)(ie,{votes:e.votes}),(0,o.Z)(se,{voters:e.voters}),X||(X=(0,o.Z)("hr",{})))}function ie(e){var t=npgettext("thread poll","%(votes)s user has voted for this choice.","%(votes)s users have voted for this choice.",e.votes),a=interpolate(t,{votes:e.votes},!0);return(0,o.Z)("p",{},void 0,a)}function se(e){return e.voters.length?(0,o.Z)("ul",{className:"list-unstyled"},void 0,e.voters.map((function(e){return m().createElement(oe,(0,f.Z)({key:e.username},e))}))):null}function oe(e){return e.url?(0,o.Z)("li",{},void 0,(0,o.Z)("a",{className:"item-title",href:e.url},void 0,e.username)," ",(0,o.Z)(re,{voted_on:e.voted_on})):(0,o.Z)("li",{},void 0,(0,o.Z)("strong",{},void 0,e.username)," ",(0,o.Z)(re,{voted_on:e.voted_on}))}function re(e){return(0,o.Z)("abbr",{className:"text-muted",title:e.voted_on.format("LLL")},void 0,e.voted_on.fromNow())}var le=a(59752),ce=a(64646);function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}function de(e){var t=e.isPollOver,a=e.poll,n=e.showVoting,i=e.thread;if(!function(e,t,a){return a.is_public||t.can_delete||t.can_edit||t.can_see_votes||t.can_vote&&!e&&(!a.hasSelectedChoices||a.allow_revotes)}(t,a.acl,a))return null;var s=[],r=a.acl.can_vote,l=!a.hasSelectedChoices||a.allow_revotes;return r&&l&&s.push(0),(a.is_public||a.acl.can_see_votes)&&s.push(1),a.acl.can_edit&&s.push(2),a.acl.can_delete&&s.push(3),(0,o.Z)("div",{className:"row poll-options"},void 0,(0,o.Z)(he,{controls:s,isPollOver:t,poll:a,showVoting:n}),(0,o.Z)(ve,{controls:s,poll:a}),(0,o.Z)(me,{controls:s,poll:a,thread:i,onClick:e.edit}),(0,o.Z)(fe,{controls:s,poll:a}))}function pe(e,t){var a="col-xs-6";return 1===e.length&&(a="col-xs-12"),3===e.length&&e[0]===t&&(a="col-xs-12"),a+" col-sm-3 col-md-2"}function he(e){var t=e.poll.acl.can_vote,a=!e.poll.hasSelectedChoices||e.poll.allow_revotes;return t&&a?(0,o.Z)("div",{className:pe(e.controls,0)},void 0,(0,o.Z)("button",{className:"btn btn-default btn-block btn-sm",disabled:e.poll.isBusy,onClick:e.showVoting,type:"button"},void 0,pgettext("thread poll","Vote"))):null}var ve=function(e){(0,u.Z)(a,e);var t=ue(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){N.Z.show((0,o.Z)(ee,{poll:e.props.poll}))})),e}return(0,l.Z)(a,[{key:"render",value:function(){return this.props.poll.is_public||this.props.poll.acl.can_see_votes?(0,o.Z)("div",{className:pe(this.props.controls,1)},void 0,(0,o.Z)("button",{className:"btn btn-default btn-block btn-sm",disabled:this.props.poll.isBusy,onClick:this.onClick,type:"button"},void 0,pgettext("thread poll","See votes"))):null}}]),a}(m().Component);function me(e){return e.poll.acl.can_edit?(0,o.Z)("div",{className:pe(e.controls,2)},void 0,(0,o.Z)("button",{className:"btn btn-default btn-block btn-sm",disabled:e.poll.isBusy,onClick:e.onClick,type:"button"},void 0,pgettext("thread poll","Edit"))):null}var fe=function(e){(0,u.Z)(a,e);var t=ue(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){if(!window.confirm(pgettext("thread poll","Are you sure you want to delete this poll? This action is not reversible.")))return!1;x.Z.dispatch(le.n6()),_.Z.delete(e.props.poll.api.index).then(e.handleSuccess,e.handleError)})),(0,h.Z)((0,c.Z)(e),"handleSuccess",(function(e){k.Z.success(pgettext("thread poll","Poll has been deleted")),x.Z.dispatch(le.Od()),x.Z.dispatch(y.y8(e))})),(0,h.Z)((0,c.Z)(e),"handleError",(function(e){k.Z.apiError(e),x.Z.dispatch(le.Ar())})),e}return(0,l.Z)(a,[{key:"render",value:function(){return this.props.poll.acl.can_delete?(0,o.Z)("div",{className:pe(this.props.controls,3)},void 0,(0,o.Z)("button",{className:"btn btn-default btn-block btn-sm",disabled:this.props.poll.isBusy,onClick:this.onClick,type:"button"},void 0,pgettext("thread poll","Delete"))):null}}]),a}(m().Component),Ze=a(89627),ge='<abbr title="%(absolute)s">%(relative)s</abbr>';function be(e){return(0,o.Z)("ul",{className:"list-unstyled list-inline poll-details"},void 0,(0,o.Z)(we,{votes:e.poll.votes}),(0,o.Z)(ke,{poll:e.poll}),(0,o.Z)(Ce,{poll:e.poll}),(0,o.Z)(ye,{poll:e.poll}))}function ye(e){var t=interpolate((0,Ze.Z)(pgettext("thread poll","Started by %(poster)s %(posted_on)s.")),{poster:_e(e.poll),posted_on:Ne(e.poll)},!0);return(0,o.Z)("li",{className:"poll-info-creation",dangerouslySetInnerHTML:{__html:t}})}function _e(e){return e.url.poster?interpolate('<a href="%(url)s" class="item-title">%(user)s</a>',{url:(0,Ze.Z)(e.url.poster),user:(0,Ze.Z)(e.poster_name)},!0):interpolate('<span class="item-title">%(user)s</span>',{user:(0,Ze.Z)(e.poster_name)},!0)}function Ne(e){return interpolate(ge,{absolute:(0,Ze.Z)(e.posted_on.format("LLL")),relative:(0,Ze.Z)(e.posted_on.fromNow())},!0)}function ke(e){if(!e.poll.length)return null;var t=interpolate((0,Ze.Z)(pgettext("thread poll","Voting ends %(ends_on)s.")),{ends_on:xe(e.poll)},!0);return(0,o.Z)("li",{className:"poll-info-ends-on",dangerouslySetInnerHTML:{__html:t}})}function xe(e){return interpolate(ge,{absolute:(0,Ze.Z)(e.endsOn.format("LLL")),relative:(0,Ze.Z)(e.endsOn.fromNow())},!0)}function we(e){var t=npgettext("thread poll","%(votes)s vote.","%(votes)s votes.",e.votes),a=interpolate(t,{votes:e.votes},!0);return(0,o.Z)("li",{className:"poll-info-votes"},void 0,a)}function Ce(e){return e.poll.is_public?(0,o.Z)("li",{className:"poll-info-public"},void 0,pgettext("thread poll","Voting is public.")):null}function Re(e){return(0,o.Z)("div",{className:"panel panel-default panel-poll"},void 0,(0,o.Z)("div",{className:"panel-body"},void 0,(0,o.Z)("h2",{},void 0,e.poll.question),(0,o.Z)(be,{poll:e.poll}),(0,o.Z)(H,{poll:e.poll}),(0,o.Z)(de,{isPollOver:e.isPollOver,poll:e.poll,edit:e.edit,showVoting:e.showVoting,thread:e.thread})))}function Ee(e){return(0,o.Z)("ul",{className:"list-unstyled list-inline poll-help"},void 0,(0,o.Z)(Se,{choicesLeft:e.choicesLeft}),(0,o.Z)(Oe,{poll:e.poll}))}function Se(e){var t=e.choicesLeft;if(0===t)return(0,o.Z)("li",{className:"poll-help-choices-left"},void 0,pgettext("thread poll","You can't select any more choices."));var a=npgettext("thread poll","You can select %(choices)s more choice.","You can select %(choices)s more choices.",t),n=interpolate(a,{choices:t},!0);return(0,o.Z)("li",{className:"poll-help-choices-left"},void 0,n)}function Oe(e){return e.poll.allow_revotes?(0,o.Z)("li",{className:"poll-help-allow-revotes"},void 0,pgettext("thread poll","You can change your vote later.")):(0,o.Z)("li",{className:"poll-help-no-revotes"},void 0,pgettext("thread poll","Votes are final."))}function Te(e){return(0,o.Z)("ul",{className:"list-unstyled poll-select-choices"},void 0,e.choices.map((function(t){return(0,o.Z)(Pe,{choice:t,toggleChoice:e.toggleChoice},t.hash)})))}var Pe=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(){var e;(0,r.Z)(this,i);for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e=n.call.apply(n,[this].concat(a)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){e.props.toggleChoice(e.props.choice.hash)})),e}return(0,l.Z)(i,[{key:"render",value:function(){return(0,o.Z)("li",{className:"poll-select-choice"},void 0,(0,o.Z)("button",{className:this.props.choice.selected?"btn btn-selected":"btn",onClick:this.onClick,type:"button"},void 0,(0,o.Z)("span",{className:"material-icon"},void 0,this.props.choice.selected?"check_box":"check_box_outline_blank"),(0,o.Z)("strong",{},void 0,this.props.choice.label)))}}]),i}(m().Component);function Le(e,t){var a=[];for(var n in t){var i=t[n];i.selected&&a.push(i)}return e.allowed_choices-a.length}var Ae=a(82211);var Ie=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,r.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"toggleChoice",(function(e){var a,n=function(e,t){for(var a in e){var n=e[a];if(n.hash===t)return n}return null}(t.state.choices,e);a=n.selected?t.deselectChoice(n,e):t.selectChoice(n,e),t.setState({choices:a,choicesLeft:Le(t.props.poll,a)})})),(0,h.Z)((0,c.Z)(t),"selectChoice",(function(e,a){if(!Le(t.props.poll,t.state.choices))for(var n in t.state.choices.slice()){var i=t.state.choices[n];if(i.selected&&i.hash!=a){i.selected=!1;break}}return t.state.choices.map((function(e){return Object.assign({},e,{selected:e.hash==a||e.selected})}))})),(0,h.Z)((0,c.Z)(t),"deselectChoice",(function(e,a){return t.state.choices.map((function(e){return Object.assign({},e,{selected:e.hash!=a&&e.selected})}))})),t.state={isLoading:!1,choices:e.poll.choices,choicesLeft:Le(e.poll,e.poll.choices)},t}return(0,l.Z)(i,[{key:"clean",value:function(){return this.state.choicesLeft!==this.props.poll.allowed_choices||(k.Z.error(pgettext("thread poll vote","You need to select at least one choice.")),!1)}},{key:"send",value:function(){var e=[];for(var t in this.state.choices.slice()){var a=this.state.choices[t];a.selected&&e.push(a.hash)}return _.Z.post(this.props.poll.api.votes,e)}},{key:"handleSuccess",value:function(e){x.Z.dispatch(le.gx(e)),k.Z.success(pgettext("thread poll vote","Your vote has been saved.")),this.props.showResults()}},{key:"handleError",value:function(e){400===e.status?k.Z.error(e.detail):k.Z.apiError(e)}},{key:"render",value:function(){var e=[];return this.props.poll.acl.can_vote&&e.push(0),(this.props.poll.is_public||this.props.poll.acl.can_see_votes)&&e.push(1),this.props.poll.acl.can_edit&&e.push(2),this.props.poll.acl.can_delete&&e.push(3),(0,o.Z)("div",{className:"panel panel-default panel-poll"},void 0,(0,o.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,o.Z)("div",{className:"panel-body"},void 0,(0,o.Z)("h2",{},void 0,this.props.poll.question),(0,o.Z)(be,{poll:this.props.poll}),(0,o.Z)(Te,{choices:this.state.choices,toggleChoice:this.toggleChoice}),(0,o.Z)(Ee,{choicesLeft:this.state.choicesLeft,poll:this.props.poll})),(0,o.Z)("div",{className:"panel-footer"},void 0,(0,o.Z)("div",{className:"row"},void 0,(0,o.Z)("div",{className:pe(e,0)},void 0,(0,o.Z)(Ae.Z,{className:"btn-primary btn-block btn-sm",loading:this.state.isLoading},void 0,pgettext("thread poll vote btn","Save your vote"))),(0,o.Z)("div",{className:pe(e,1)},void 0,(0,o.Z)("button",{className:"btn btn-default btn-block btn-sm",disabled:this.state.isLoading,onClick:this.props.showResults,type:"button"},void 0,pgettext("thread poll vote btn","See results"))),(0,o.Z)(me,{controls:e,poll:this.props.poll,thread:this.props.thread,onClick:this.props.edit}),(0,o.Z)(fe,{controls:e,poll:this.props.poll})))))}}]),i}(Z.Z);var Be,je=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;(0,r.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"showResults",(function(){t.setState({showResults:!0})})),(0,h.Z)((0,c.Z)(t),"showVoting",(function(){t.setState({showResults:!1})}));var a=!0;return e.user.id&&!e.poll.hasSelectedChoices&&(a=!1),t.state={showResults:a},t}return(0,l.Z)(i,[{key:"render",value:function(){if(!this.props.thread.poll)return null;var e=function(e){return!!e.length&&F()().isAfter(e.endsOn)}(this.props.poll);return e||!this.props.poll.acl.can_vote||this.state.showResults?m().createElement(Re,(0,f.Z)({isPollOver:e,showVoting:this.showVoting},this.props)):m().createElement(Ie,(0,f.Z)({showResults:this.showResults},this.props))}}]),i}(m().Component),De=a(54031);function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}var Ue=function(e){(0,u.Z)(a,e);var t=ze(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onAdd",(function(){var t=e.props.choices.slice();t.push({hash:(0,De.ZP)(12),label:""}),e.props.setChoices(t)})),(0,h.Z)((0,c.Z)(e),"onChange",(function(t,a){var n=e.props.choices.map((function(e){return e.hash===t&&(e.label=a),e}));e.props.setChoices(n)})),(0,h.Z)((0,c.Z)(e),"onDelete",(function(t){var a=e.props.choices.filter((function(e){return e.hash!==t}));e.props.setChoices(a)})),e}return(0,l.Z)(a,[{key:"render",value:function(){var e=this;return(0,o.Z)("div",{className:"poll-choices-control"},void 0,(0,o.Z)("ul",{className:"list-group"},void 0,this.props.choices.map((function(t){return(0,o.Z)(Me,{canDelete:e.props.choices.length>2,choice:t,disabled:e.props.disabled,onChange:e.onChange,onDelete:e.onDelete},t.hash)}))),(0,o.Z)("button",{className:"btn btn-default btn-sm",disabled:this.props.disabled,onClick:this.onAdd,type:"button"},void 0,pgettext("thread poll","Add choice")))}}]),a}(m().Component),Me=function(e){(0,u.Z)(a,e);var t=ze(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onChange",(function(t){e.props.onChange(e.props.choice.hash,t.target.value)})),(0,h.Z)((0,c.Z)(e),"onDelete",(function(){(0===e.props.choice.label.length||window.confirm(pgettext("thread poll","Are you sure you want to remove this choice?")))&&e.props.onDelete(e.props.choice.hash)})),e}return(0,l.Z)(a,[{key:"render",value:function(){return(0,o.Z)("li",{className:"list-group-item"},void 0,(0,o.Z)("button",{className:"btn",disabled:!this.props.canDelete||this.props.disabled,onClick:this.onDelete,title:pgettext("thread poll","Remove this choice"),type:"button"},void 0,Be||(Be=(0,o.Z)("span",{className:"material-icon"},void 0,"close"))),(0,o.Z)("input",{disabled:this.props.disabled,maxLength:"255",placeholder:pgettext("thread poll","Poll choice"),type:"text",onChange:this.onChange,value:this.props.choice.label}))}}]),a}(m().Component),qe=a(7227);var Fe=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;(0,r.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"setChoices",(function(e){t.setState((function(t){return{choices:e,errors:Object.assign({},t.errors,{choices:null})}}))})),(0,h.Z)((0,c.Z)(t),"onCancel",(function(){if(""===t.state.question&&t.state.choices&&t.state.choices.every((function(e){return""===e.label}))&&0===t.state.length&&1===t.state.allowed_choices)return t.props.close();(t.props.poll?window.confirm(pgettext("thread poll","Are you sure you want to discard changes?")):window.confirm(pgettext("thread poll","Are you sure you want to discard new poll?")))&&t.props.close()}));var a=e.poll.id?e.poll:{question:"",choices:[{hash:"choice-10000",label:""},{hash:"choice-20000",label:""}],length:0,allowed_choices:1,allow_revotes:0,is_public:0};return t.state={isLoading:!1,isEdit:!!a.id,question:a.question,choices:a.choices,length:a.length,allowed_choices:a.allowed_choices,allow_revotes:a.allow_revotes,is_public:a.is_public,validators:{question:[],choices:[],length:[],allowed_choices:[]},errors:{}},t}return(0,l.Z)(i,[{key:"send",value:function(){var e={question:this.state.question,choices:this.state.choices,length:this.state.length,allowed_choices:this.state.allowed_choices,allow_revotes:this.state.allow_revotes,is_public:this.state.is_public};return this.state.isEdit?_.Z.put(this.props.poll.api.index,e):_.Z.post(this.props.thread.api.poll,e)}},{key:"handleSuccess",value:function(e){x.Z.dispatch(le.gx(e)),this.state.isEdit?k.Z.success(pgettext("thread poll","Poll has been edited.")):k.Z.success(pgettext("thread poll","Poll has been posted.")),this.props.close()}},{key:"handleError",value:function(e){400===e.status?(e.non_field_errors&&(e.allowed_choices=e.non_field_errors),this.setState({errors:Object.assign({},e)}),k.Z.error(gettext("Form contains errors."))):k.Z.apiError(e)}},{key:"render",value:function(){return(0,o.Z)("div",{className:"poll-form"},void 0,(0,o.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,o.Z)("div",{className:"panel panel-default panel-form"},void 0,(0,o.Z)("div",{className:"panel-heading"},void 0,(0,o.Z)("h3",{className:"panel-title"},void 0,this.state.isEdit?pgettext("thread poll","Edit poll"):pgettext("thread poll","Add poll"))),(0,o.Z)("div",{className:"panel-body"},void 0,(0,o.Z)("fieldset",{},void 0,(0,o.Z)("legend",{},void 0,pgettext("thread poll","Question and choices")),(0,o.Z)(g.Z,{label:pgettext("thread poll","Poll question"),for:"id_questions",validation:this.state.errors.question},void 0,(0,o.Z)("input",{className:"form-control",disabled:this.state.isLoading,id:"id_questions",onChange:this.bindInput("question"),type:"text",maxLength:"255",value:this.state.question})),(0,o.Z)(g.Z,{label:pgettext("thread poll","Available choices"),validation:this.state.errors.choices},void 0,(0,o.Z)(Ue,{choices:this.state.choices,disabled:this.state.isLoading,setChoices:this.setChoices}))),(0,o.Z)("fieldset",{},void 0,(0,o.Z)("legend",{},void 0,pgettext("thread poll","Voting")),(0,o.Z)("div",{className:"row"},void 0,(0,o.Z)("div",{className:"col-xs-12 col-sm-6"},void 0,(0,o.Z)(g.Z,{label:pgettext("thread poll","Poll length"),helpText:pgettext("thread poll","Enter number of days for which voting in this poll should be possible or zero to run this poll indefinitely."),for:"id_length",validation:this.state.errors.length},void 0,(0,o.Z)("input",{className:"form-control",disabled:this.state.isLoading,id:"id_length",onChange:this.bindInput("length"),type:"text",value:this.state.length}))),(0,o.Z)("div",{className:"col-xs-12 col-sm-6"},void 0,(0,o.Z)(g.Z,{label:pgettext("thread poll","Allowed choices"),for:"id_allowed_choices",validation:this.state.errors.allowed_choices},void 0,(0,o.Z)("input",{className:"form-control",disabled:this.state.isLoading,id:"id_allowed_choices",onChange:this.bindInput("allowed_choices"),type:"text",maxLength:"255",value:this.state.allowed_choices})))),(0,o.Z)("div",{className:"row"},void 0,(0,o.Z)(He,{bindInput:this.bindInput,disabled:this.state.isLoading,isEdit:this.state.isEdit,value:this.state.is_public}),(0,o.Z)("div",{className:"col-xs-12 col-sm-6"},void 0,(0,o.Z)(g.Z,{label:pgettext("thread poll","Allow vote changes"),for:"id_allow_revotes"},void 0,(0,o.Z)(qe.Z,{id:"id_allow_revotes",disabled:this.state.isLoading,iconOn:"check",iconOff:"close",labelOn:pgettext("thread poll","Allow participants to change their vote"),labelOff:pgettext("thread poll","Don't allow participants to change their vote"),onChange:this.bindInput("allow_revotes"),value:this.state.allow_revotes})))))),(0,o.Z)("div",{className:"panel-footer text-right"},void 0,(0,o.Z)("button",{className:"btn btn-default",disabled:this.state.isLoading,onClick:this.onCancel,type:"button"},void 0,pgettext("thread poll","Cancel"))," ",(0,o.Z)(Ae.Z,{className:"btn-primary",loading:this.state.isLoading},void 0,this.state.isEdit?pgettext("thread poll","Save changes"):pgettext("thread poll","Post poll"))))))}}]),i}(Z.Z);function He(e){return e.isEdit?null:(0,o.Z)("div",{className:"col-xs-12 col-sm-6"},void 0,(0,o.Z)(g.Z,{label:pgettext("thread poll","Make voting public"),helpText:pgettext("thread poll","Making voting public will allow everyone to access detailed list of votes, showing which users voted for which choices and at which times. This option can't be changed after poll's creation. Moderators may see voting details for all polls."),for:"id_is_public"},void 0,(0,o.Z)(qe.Z,{id:"id_is_public",disabled:e.disabled,iconOn:"visibility",iconOff:"visibility_off",labelOn:pgettext("thread poll","Votes are public"),labelOff:pgettext("thread poll","Votes are hidden"),onChange:e.bindInput("is_public"),value:e.value})))}var Ye={changed_title:"edit",pinned_globally:"bookmark",pinned_locally:"bookmark_border",unpinned:"panorama_fish_eye",moved:"arrow_forward",merged:"call_merge",approved:"done",opened:"lock_open",closed:"lock_outline",unhid:"visibility",hid:"visibility_off",changed_owner:"grade",tookover:"grade",added_participant:"person_add",owner_left:"person_outline",participant_left:"person_outline",removed_participant:"remove_circle_outline"};const Ve=function(e){return(0,o.Z)("span",{className:"event-icon-bg"},void 0,(0,o.Z)("span",{className:"material-icon"},void 0,Ye[e.post.event_type]))};var Ge=a(92747);function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}function We(e){return e.post.acl.can_hide?(0,o.Z)("li",{className:"event-controls"},void 0,m().createElement(Qe,e),m().createElement(Xe,e),m().createElement(Ke,e)):null}var Qe=function(e){(0,u.Z)(a,e);var t=$e(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){x.Z.dispatch(Ge.r$(e.props.post,{is_hidden:!0,hidden_on:F()(),hidden_by_name:e.props.user.username,url:Object.assign(e.props.post.url,{hidden_by:e.props.user.url})})),_.Z.patch(e.props.post.api.index,[{op:"replace",path:"is-hidden",value:!0}]).then((function(t){x.Z.dispatch(Ge.r$(e.props.post,t))}),(function(t){400===t.status?k.Z.error(t.detail[0]):k.Z.apiError(t),x.Z.dispatch(Ge.r$(e.props.post,{is_hidden:!1}))}))})),e}return(0,l.Z)(a,[{key:"render",value:function(){return this.props.post.is_hidden?null:(0,o.Z)("button",{type:"button",className:"btn btn-link",onClick:this.onClick},void 0,pgettext("event hide btn","Hide"))}}]),a}(m().Component),Xe=function(e){(0,u.Z)(a,e);var t=$e(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){x.Z.dispatch(Ge.r$(e.props.post,{is_hidden:!1})),_.Z.patch(e.props.post.api.index,[{op:"replace",path:"is-hidden",value:!1}]).then((function(t){x.Z.dispatch(Ge.r$(e.props.post,t))}),(function(t){400===t.status?k.Z.error(t.detail[0]):k.Z.apiError(t),x.Z.dispatch(Ge.r$(e.props.post,{is_hidden:!0}))}))})),e}return(0,l.Z)(a,[{key:"render",value:function(){return this.props.post.is_hidden?(0,o.Z)("button",{type:"button",className:"btn btn-link",onClick:this.onClick},void 0,pgettext("event reveal btn","Unhide")):null}}]),a}(m().Component),Ke=function(e){(0,u.Z)(a,e);var t=$e(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){window.confirm(pgettext("event delete","Are you sure you wish to delete this event? This action is not reversible!"))&&e.delete()})),(0,h.Z)((0,c.Z)(e),"delete",(function(){x.Z.dispatch(Ge.r$(e.props.post,{isDeleted:!0})),_.Z.delete(e.props.post.api.index).then((function(){k.Z.success(pgettext("event delete","Event has been deleted."))}),(function(t){400===t.status?k.Z.error(t.detail[0]):k.Z.apiError(t),x.Z.dispatch(Ge.r$(e.props.post,{isDeleted:!1}))}))})),e}return(0,l.Z)(a,[{key:"render",value:function(){return(0,o.Z)("button",{type:"button",className:"btn btn-link",onClick:this.onClick},void 0,pgettext("event delete btn","Delete"))}}]),a}(m().Component),Je='<span class="item-title">%(user)s</span>',et='<a href="%(url)s" class="item-title">%(user)s</a>';function tt(e){return(0,o.Z)("ul",{className:"list-inline event-info"},void 0,m().createElement(at,e),m().createElement(nt,e),m().createElement(We,e))}function at(e){if(e.post.is_hidden){var t;t=e.post.url.hidden_by?interpolate(et,{url:(0,Ze.Z)(e.post.url.hidden_by),user:(0,Ze.Z)(e.post.hidden_by_name)},!0):interpolate(Je,{user:(0,Ze.Z)(e.post.hidden_by_name)},!0);var a=interpolate('<abbr title="%(absolute)s">%(relative)s</abbr>',{absolute:(0,Ze.Z)(e.post.hidden_on.format("LLL")),relative:(0,Ze.Z)(e.post.hidden_on.fromNow())},!0),n=interpolate((0,Ze.Z)(pgettext("event info","Hidden by %(event_by)s %(event_on)s.")),{event_by:t,event_on:a},!0);return(0,o.Z)("li",{className:"event-hidden-message",dangerouslySetInnerHTML:{__html:n}})}return null}function nt(e){var t;t=e.post.poster?interpolate(et,{url:(0,Ze.Z)(e.post.poster.url),user:(0,Ze.Z)(e.post.poster_name)},!0):interpolate(Je,{user:(0,Ze.Z)(e.post.poster_name)},!0);var a=interpolate('<a href="%(url)s" title="%(absolute)s">%(relative)s</a>',{url:(0,Ze.Z)(e.post.url.index),absolute:(0,Ze.Z)(e.post.posted_on.format("LLL")),relative:(0,Ze.Z)(e.post.posted_on.fromNow())},!0),n=interpolate((0,Ze.Z)(pgettext("event info","By %(event_by)s %(event_on)s.")),{event_by:t,event_on:a},!0);return(0,o.Z)("li",{className:"event-posters",dangerouslySetInnerHTML:{__html:n}})}var it={pinned_globally:pgettext("event message","Thread has been pinned globally."),pinned_locally:pgettext("event message","Thread has been pinned in category."),unpinned:pgettext("event message","Thread has been unpinned."),approved:pgettext("event message","Thread has been approved."),opened:pgettext("event message","Thread has been opened."),closed:pgettext("event message","Thread has been closed."),unhid:pgettext("event message","Thread has been revealed."),hid:pgettext("event message","Thread has been made hidden."),tookover:pgettext("event message","Took thread over."),owner_left:pgettext("event message","Owner has left thread. This thread is now closed."),participant_left:pgettext("event message","Participant has left thread.")},st='<a href="%(url)s" class="item-title">%(name)s</a>',ot='<span class="item-title">%(name)s</span>';function rt(e){return it[e.post.event_type]?(0,o.Z)("p",{className:"event-message"},void 0,it[e.post.event_type]):"changed_title"===e.post.event_type?m().createElement(lt,e):"moved"===e.post.event_type?m().createElement(ct,e):"merged"===e.post.event_type?m().createElement(ut,e):"changed_owner"===e.post.event_type?m().createElement(dt,e):"added_participant"===e.post.event_type?m().createElement(pt,e):"removed_participant"===e.post.event_type?m().createElement(ht,e):null}function lt(e){var t=(0,Ze.Z)(pgettext("event message","Thread title has been changed from %(old_title)s.")),a=interpolate(ot,{name:(0,Ze.Z)(e.post.event_context.old_title)},!0),n=interpolate(t,{old_title:a},!0);return(0,o.Z)("p",{className:"event-message",dangerouslySetInnerHTML:{__html:n}})}function ct(e){var t=(0,Ze.Z)(pgettext("event message","Thread has been moved from %(from_category)s.")),a=interpolate(st,{url:(0,Ze.Z)(e.post.event_context.from_category.url),name:(0,Ze.Z)(e.post.event_context.from_category.name)},!0),n=interpolate(t,{from_category:a},!0);return(0,o.Z)("p",{className:"event-message",dangerouslySetInnerHTML:{__html:n}})}function ut(e){var t=(0,Ze.Z)(pgettext("event message","The %(merged_thread)s thread has been merged into this thread.")),a=interpolate(ot,{name:(0,Ze.Z)(e.post.event_context.merged_thread)},!0),n=interpolate(t,{merged_thread:a},!0);return(0,o.Z)("p",{className:"event-message",dangerouslySetInnerHTML:{__html:n}})}function dt(e){var t=(0,Ze.Z)(pgettext("event message","Changed thread owner to %(user)s.")),a=interpolate(st,{url:(0,Ze.Z)(e.post.event_context.user.url),name:(0,Ze.Z)(e.post.event_context.user.username)},!0),n=interpolate(t,{user:a},!0);return(0,o.Z)("p",{className:"event-message",dangerouslySetInnerHTML:{__html:n}})}function pt(e){var t=(0,Ze.Z)(pgettext("event message","Added %(user)s to thread.")),a=interpolate(st,{url:(0,Ze.Z)(e.post.event_context.user.url),name:(0,Ze.Z)(e.post.event_context.user.username)},!0),n=interpolate(t,{user:a},!0);return(0,o.Z)("p",{className:"event-message",dangerouslySetInnerHTML:{__html:n}})}function ht(e){var t=(0,Ze.Z)(pgettext("event message","Removed %(user)s from thread.")),a=interpolate(st,{url:(0,Ze.Z)(e.post.event_context.user.url),name:(0,Ze.Z)(e.post.event_context.user.username)},!0),n=interpolate(t,{user:a},!0);return(0,o.Z)("p",{className:"event-message",dangerouslySetInnerHTML:{__html:n}})}function vt(e){return e.post.is_read?null:(0,o.Z)("div",{className:"event-label"},void 0,(0,o.Z)("span",{className:"label label-unread"},void 0,pgettext("event unread label","New event")))}var mt=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,r.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"initialize",(function(e){t.initialized=!0,t.observer=new IntersectionObserver((function(e){return e.forEach(t.callback)})),t.observer.observe(e)})),(0,h.Z)((0,c.Z)(t),"callback",(function(e){!e.isIntersecting||t.props.post.is_read||t.primed||(window.setTimeout((function(){_.Z.post(t.props.post.api.read)}),0),t.primed=!0,t.destroy())})),t.initialized=!1,t.primed=!1,t.observer=null,t}return(0,l.Z)(i,[{key:"destroy",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null)}},{key:"componentWillUnmount",value:function(){this.destroy()}},{key:"render",value:function(){var e=this,t=!this.initialized&&!this.primed&&!this.props.post.is_read;return m().createElement("div",{className:this.props.className,ref:function(a){a&&t&&e.initialize(a)}},this.props.children)}}]),i}(m().Component);function ft(e){var t="event";return e.post.isDeleted?t="hide":e.post.is_hidden&&(t="event post-hidden"),(0,o.Z)("li",{id:"post-"+e.post.id,className:t},void 0,(0,o.Z)(vt,{post:e.post}),(0,o.Z)("div",{className:"event-body"},void 0,(0,o.Z)("div",{className:"event-icon"},void 0,m().createElement(Ve,e)),(0,o.Z)(mt,{className:"event-content",post:e.post},void 0,m().createElement(rt,e),m().createElement(tt,e))))}var Zt=a(69130),gt=a(48772);function bt(e){return(0,o.Z)("div",{className:"col-xs-12 col-md-6"},void 0,m().createElement(yt,e),(0,o.Z)("div",{className:"post-attachment"},void 0,(0,o.Z)("a",{href:e.attachment.url.index,className:"attachment-name item-title",target:"_blank"},void 0,e.attachment.filename),m().createElement(kt,e)))}function yt(e){return e.attachment.is_image?(0,o.Z)("div",{className:"post-attachment-preview"},void 0,m().createElement(Nt,e)):(0,o.Z)("div",{className:"post-attachment-preview"},void 0,m().createElement(_t,e))}function _t(e){return(0,o.Z)("a",{href:e.attachment.url.index,className:"material-icon"},void 0,"insert_drive_file")}function Nt(e){var t=e.attachment.url.thumb||e.attachment.url.index;return(0,o.Z)("a",{className:"post-thumbnail",href:e.attachment.url.index,target:"_blank",style:{backgroundImage:'url("'+(0,Ze.Z)(t)+'")'}})}function kt(e){var t;t=e.attachment.url.uploader?interpolate('<a href="%(url)s" class="item-title">%(user)s</a>',{url:(0,Ze.Z)(e.attachment.url.uploader),user:(0,Ze.Z)(e.attachment.uploader_name)},!0):interpolate('<span class="item-title">%(user)s</span>',{user:(0,Ze.Z)(e.attachment.uploader_name)},!0);var a=interpolate('<abbr title="%(absolute)s">%(relative)s</abbr>',{absolute:(0,Ze.Z)(e.attachment.uploaded_on.format("LLL")),relative:(0,Ze.Z)(e.attachment.uploaded_on.fromNow())},!0),n=interpolate((0,Ze.Z)(pgettext("post attachment","%(filetype)s, %(size)s, uploaded by %(uploader)s %(uploaded_on)s.")),{filetype:e.attachment.filetype,size:(0,gt.Z)(e.attachment.size),uploader:t,uploaded_on:a},!0);return(0,o.Z)("p",{className:"post-attachment-description",dangerouslySetInnerHTML:{__html:n}})}function xt(e){return function(e){return(!e.is_hidden||e.acl.can_see_hidden)&&e.attachments}(e.post)?(0,o.Z)("div",{className:"post-attachments"},void 0,(0,Zt.Z)(e.post.attachments,2).map((function(e){var t=e.map((function(e){return e?e.id:0})).join("_");return(0,o.Z)(wt,{row:e},t)}))):null}function wt(e){return(0,o.Z)("div",{className:"row"},void 0,e.row.map((function(e){return(0,o.Z)(bt,{attachment:e},e?e.id:0)})))}var Ct,Rt,Et,St,Ot,Tt,Pt,Lt=a(69092);function At(e){return e.post.is_hidden&&!e.post.acl.can_see_hidden?m().createElement(Bt,e):e.post.content?m().createElement(It,e):m().createElement(jt,e)}function It(e){var t=e.post,a="@"+(t.poster?t.poster.username:t.poster_name);return(0,o.Z)(mt,{className:"post-body",post:t},void 0,(0,o.Z)(Lt.Z,{author:a,markup:t.content}))}function Bt(e){var t;t=e.post.hidden_by?interpolate('<a href="%(url)s" class="item-title">%(user)s</a>',{url:(0,Ze.Z)(e.post.url.hidden_by),user:(0,Ze.Z)(e.post.hidden_by_name)},!0):interpolate('<span class="item-title">%(user)s</span>',{user:(0,Ze.Z)(e.post.hidden_by_name)},!0);var a=interpolate('<abbr class="last-title" title="%(absolute)s">%(relative)s</abbr>',{absolute:(0,Ze.Z)(e.post.hidden_on.format("LLL")),relative:(0,Ze.Z)(e.post.hidden_on.fromNow())},!0),n=interpolate((0,Ze.Z)(pgettext("post body hidden","Hidden by %(hidden_by)s %(hidden_on)s.")),{hidden_by:t,hidden_on:a},!0);return(0,o.Z)(mt,{className:"post-body post-body-hidden",post:e.post},void 0,(0,o.Z)("p",{className:"lead"},void 0,pgettext("post body hidden","This post is hidden. You cannot see its contents.")),(0,o.Z)("p",{className:"text-muted",dangerouslySetInnerHTML:{__html:n}}))}function jt(e){return(0,o.Z)(mt,{className:"post-body post-body-invalid",post:e.post},void 0,(0,o.Z)("p",{className:"lead"},void 0,pgettext("post body invalid","This post's contents cannot be displayed.")),(0,o.Z)("p",{className:"text-muted"},void 0,pgettext("post body invalid","This error is caused by invalid post content manipulation.")))}function Dt(e){var t=e.post,a=e.thread,n=e.user;if(!qt(t)||t.id!==a.best_answer)return null;var i;return i=n.id&&a.best_answer_marked_by===n.id?interpolate(pgettext("post best answer flag","Marked as best answer by you %(marked_on)s."),{marked_on:a.best_answer_marked_on.fromNow()},!0):interpolate(pgettext("post best answer flag","Marked as best answer by %(marked_by)s %(marked_on)s."),{marked_by:a.best_answer_marked_by_name,marked_on:a.best_answer_marked_on.fromNow()},!0),(0,o.Z)("div",{className:"post-status-message post-status-best-answer"},void 0,Ct||(Ct=(0,o.Z)("span",{className:"material-icon"},void 0,"check_box")),(0,o.Z)("p",{},void 0,i))}function zt(e){return qt(e.post)&&e.post.is_hidden?(0,o.Z)("div",{className:"post-status-message post-status-hidden"},void 0,Rt||(Rt=(0,o.Z)("span",{className:"material-icon"},void 0,"visibility_off")),(0,o.Z)("p",{},void 0,pgettext("post hidden flag","This post is hidden. Only users with permission may see its contents."))):null}function Ut(e){return qt(e.post)&&e.post.is_unapproved?(0,o.Z)("div",{className:"post-status-message post-status-unapproved"},void 0,Et||(Et=(0,o.Z)("span",{className:"material-icon"},void 0,"remove_circle_outline")),(0,o.Z)("p",{},void 0,pgettext("post unapproved flag","This post is unapproved. Only users with permission to approve posts and its author may see its contents."))):null}function Mt(e){return qt(e.post)&&e.post.is_protected?(0,o.Z)("div",{className:"post-status-message post-status-protected visible-xs-block"},void 0,St||(St=(0,o.Z)("span",{className:"material-icon"},void 0,"lock_outline")),(0,o.Z)("p",{},void 0,pgettext("post protected flag","This post is protected. Only moderators may change it."))):null}function qt(e){return!e.is_hidden||e.acl.can_see_hidden}function Ft(e){x.Z.dispatch(Ge.r$(e.post,{is_unapproved:!1})),Qt(e,[{op:"replace",path:"is-unapproved",value:!1}],{is_unapproved:e.post.is_unapproved})}function Ht(e){x.Z.dispatch(Ge.r$(e.post,{is_protected:!0})),Qt(e,[{op:"replace",path:"is-protected",value:!0}],{is_protected:e.post.is_protected})}function Yt(e){x.Z.dispatch(Ge.r$(e.post,{is_protected:!1})),Qt(e,[{op:"replace",path:"is-protected",value:!1}],{is_protected:e.post.is_protected})}function Vt(e){x.Z.dispatch(Ge.r$(e.post,{is_hidden:!0,hidden_on:F()(),hidden_by_name:e.user.username,url:Object.assign(e.post.url,{hidden_by:e.user.url})})),Qt(e,[{op:"replace",path:"is-hidden",value:!0}],{is_hidden:e.post.is_hidden,hidden_on:e.post.hidden_on,hidden_by_name:e.post.hidden_by_name,url:e.post.url})}function Gt(e){x.Z.dispatch(Ge.r$(e.post,{is_hidden:!1})),Qt(e,[{op:"replace",path:"is-hidden",value:!1}],{is_hidden:e.post.is_hidden})}function $t(e){var t=e.post.last_likes||[],a=[e.user].concat(t),n=a.length>3?a.slice(0,-1):a;x.Z.dispatch(Ge.r$(e.post,{is_liked:!0,likes:e.post.likes+1,last_likes:n})),Qt(e,[{op:"replace",path:"is-liked",value:!0}],{is_liked:e.post.is_liked,likes:e.post.likes,last_likes:e.post.last_likes})}function Wt(e){x.Z.dispatch(Ge.r$(e.post,{is_liked:!1,likes:e.post.likes-1,last_likes:e.post.last_likes.filter((function(t){return!t.id||t.id!==e.user.id}))}));var t={is_liked:e.post.is_liked,likes:e.post.likes,last_likes:e.post.last_likes};Qt(e,[{op:"replace",path:"is-liked",value:!1}],t)}function Qt(e,t,a){_.Z.patch(e.post.api.index,t).then((function(t){x.Z.dispatch(Ge.r$(e.post,t))}),(function(t){400===t.status?k.Z.error(t.detail[0]):k.Z.apiError(t),x.Z.dispatch(Ge.r$(e.post,a))}))}function Xt(e){window.confirm(pgettext("post delete","Are you sure you want to delete this post? This action is not reversible!"))&&(x.Z.dispatch(Ge.r$(e.post,{isDeleted:!0})),_.Z.delete(e.post.api.index).then((function(){k.Z.success(pgettext("post delete","Post has been deleted."))}),(function(t){400===t.status?k.Z.error(t.detail):k.Z.apiError(t),x.Z.dispatch(Ge.r$(e.post,{isDeleted:!1}))})))}function Kt(e){var t=e.post,a=e.user;x.Z.dispatch(y.Vx({best_answer:t.id,best_answer_is_protected:t.is_protected,best_answer_marked_on:F()(),best_answer_marked_by:a.id,best_answer_marked_by_name:a.username,best_answer_marked_by_slug:a.slug})),ea(e,[{op:"replace",path:"best-answer",value:t.id},{op:"add",path:"acl",value:!0}],{best_answer:e.thread.best_answer,best_answer_is_protected:e.thread.best_answer_is_protected,best_answer_marked_on:e.thread.best_answer_marked_on,best_answer_marked_by:e.thread.best_answer_marked_by,best_answer_marked_by_name:e.thread.best_answer_marked_by_name,best_answer_marked_by_slug:e.thread.best_answer_marked_by_slug})}function Jt(e){var t=e.post;x.Z.dispatch(y.Vx({best_answer:null,best_answer_is_protected:!1,best_answer_marked_on:null,best_answer_marked_by:null,best_answer_marked_by_name:null,best_answer_marked_by_slug:null})),ea(e,[{op:"remove",path:"best-answer",value:t.id},{op:"add",path:"acl",value:!0}],{best_answer:e.thread.best_answer,best_answer_is_protected:e.thread.best_answer_is_protected,best_answer_marked_on:e.thread.best_answer_marked_on,best_answer_marked_by:e.thread.best_answer_marked_by,best_answer_marked_by_name:e.thread.best_answer_marked_by_name,best_answer_marked_by_slug:e.thread.best_answer_marked_by_slug})}function ea(e,t,a){_.Z.patch(e.thread.api.index,t).then((function(e){e.best_answer_marked_on&&(e.best_answer_marked_on=F()(e.best_answer_marked_on)),x.Z.dispatch(y.Vx(e))}),(function(e){400===e.status?k.Z.error(e.detail[0]):k.Z.apiError(e),x.Z.dispatch(y.Vx(a))}))}var ta,aa,na,ia,sa=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,r.Z)(this,i),(t=n.call(this,e)).state={isReady:!1,error:null,likes:[]},t}return(0,l.Z)(i,[{key:"componentDidMount",value:function(){var e=this;_.Z.get(this.props.post.api.likes).then((function(t){e.setState({isReady:!0,likes:t.map(oa)})}),(function(t){e.setState({isReady:!0,error:t.detail})}))}},{key:"render",value:function(){return this.state.error?(0,o.Z)(ra,{className:"modal-message"},void 0,(0,o.Z)(K.Z,{message:this.state.error})):this.state.isReady?this.state.likes.length?(0,o.Z)(ra,{className:"modal-sm",likes:this.state.likes},void 0,(0,o.Z)(la,{likes:this.state.likes})):(0,o.Z)(ra,{className:"modal-message"},void 0,(0,o.Z)(K.Z,{message:pgettext("post likes modal","No users have liked this post.")})):Ot||(Ot=(0,o.Z)(ra,{className:"modal-sm"},void 0,(0,o.Z)(J.Z,{})))}}]),i}(m().Component);function oa(e){return Object.assign({},e,{liked_on:F()(e.liked_on)})}function ra(e){var t=e.className,a=e.children,n=e.likes,i=pgettext("post likes modal title","Post Likes");if(n){var s=n.length,r=npgettext("post likes modal","%(likes)s like","%(likes)s likes",s);i=interpolate(r,{likes:s},!0)}return(0,o.Z)("div",{className:"modal-dialog "+(t||""),role:"document"},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,(0,o.Z)("div",{className:"modal-header"},void 0,(0,o.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,Tt||(Tt=(0,o.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,o.Z)("h4",{className:"modal-title"},void 0,i)),a))}function la(e){return(0,o.Z)("div",{className:"modal-body modal-post-likers"},void 0,(0,o.Z)("ul",{className:"media-list"},void 0,e.likes.map((function(e){return m().createElement(ca,(0,f.Z)({key:e.id},e))}))))}function ca(e){if(e.url){var t={id:e.liker_id,avatars:e.avatars};return(0,o.Z)("li",{className:"media"},void 0,(0,o.Z)("div",{className:"media-left"},void 0,(0,o.Z)("a",{className:"user-avatar",href:e.url},void 0,(0,o.Z)(I.ZP,{size:"50",user:t}))),(0,o.Z)("div",{className:"media-body"},void 0,(0,o.Z)("a",{className:"item-title",href:e.url},void 0,e.username)," ",(0,o.Z)(ua,{likedOn:e.liked_on})))}return(0,o.Z)("li",{className:"media"},void 0,Pt||(Pt=(0,o.Z)("div",{className:"media-left"},void 0,(0,o.Z)("span",{className:"user-avatar"},void 0,(0,o.Z)(I.ZP,{size:"50"})))),(0,o.Z)("div",{className:"media-body"},void 0,(0,o.Z)("strong",{},void 0,e.username)," ",(0,o.Z)(ua,{likedOn:e.liked_on})))}function ua(e){return(0,o.Z)("span",{className:"text-muted",title:e.likedOn.format("LLL")},void 0,e.likedOn.fromNow())}function da(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}function pa(e){return function(e){return(!e.is_hidden||e.acl.can_see_hidden)&&(e.acl.can_reply||e.acl.can_edit||e.acl.can_see_likes&&(e.last_likes||[]).length||e.acl.can_like)}(e.post)?(0,o.Z)("div",{className:"post-footer"},void 0,m().createElement(ha,e),m().createElement(va,e),m().createElement(ma,e),m().createElement(fa,(0,f.Z)({lastLikes:e.post.last_likes,likes:e.post.likes},e)),m().createElement(Za,(0,f.Z)({likes:e.post.likes},e)),m().createElement(_a,e),m().createElement(Na,e),m().createElement(ka,e)):null}var ha=function(e){(0,u.Z)(a,e);var t=da(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){Kt(e.props)})),e}return(0,l.Z)(a,[{key:"render",value:function(){var e=this.props,t=e.post,a=e.thread;return a.acl.can_mark_best_answer&&t.acl.can_mark_as_best_answer?a.best_answer&&!a.acl.can_change_best_answer?null:(0,o.Z)("button",{className:"hidden-xs btn btn-default btn-sm pull-left",disabled:this.props.post.isBusy||t.id===a.best_answer,onClick:this.onClick,type:"button"},void 0,ta||(ta=(0,o.Z)("span",{className:"material-icon"},void 0,"check_box")),pgettext("post footer btn","Best answer")):null}}]),a}(m().Component),va=function(e){(0,u.Z)(a,e);var t=da(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){Kt(e.props)})),e}return(0,l.Z)(a,[{key:"render",value:function(){var e=this.props,t=e.post,a=e.thread;return a.acl.can_mark_best_answer&&t.acl.can_mark_as_best_answer?a.best_answer&&!a.acl.can_change_best_answer?null:(0,o.Z)("button",{className:"visible-xs-inline-block btn btn-default btn-sm pull-left",disabled:this.props.post.isBusy||t.id===a.best_answer,onClick:this.onClick,type:"button"},void 0,aa||(aa=(0,o.Z)("span",{className:"material-icon"},void 0,"check_box"))):null}}]),a}(m().Component),ma=function(e){(0,u.Z)(a,e);var t=da(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){e.props.post.is_liked?Wt(e.props):$t(e.props)})),e}return(0,l.Z)(a,[{key:"render",value:function(){if(!this.props.post.acl.can_like)return null;var e="btn btn-default btn-sm pull-left";return this.props.post.is_liked&&(e="btn btn-success btn-sm pull-left"),(0,o.Z)("button",{className:e,disabled:this.props.post.isBusy,onClick:this.onClick,type:"button"},void 0,this.props.post.is_liked?pgettext("post footer btn","Liked"):pgettext("post footer btn","Like"))}}]),a}(m().Component),fa=function(e){(0,u.Z)(a,e);var t=da(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){N.Z.show((0,o.Z)(sa,{post:e.props.post}))})),e}return(0,l.Z)(a,[{key:"render",value:function(){var e=(this.props.post.last_likes||[]).length>0;return this.props.post.acl.can_see_likes&&e?2===this.props.post.acl.can_see_likes?(0,o.Z)("button",{className:"btn btn-link btn-sm pull-left hidden-xs",onClick:this.onClick,type:"button"},void 0,ga(this.props.likes,this.props.lastLikes)):(0,o.Z)("p",{className:"pull-left hidden-xs"},void 0,ga(this.props.likes,this.props.lastLikes)):null}}]),a}(m().Component),Za=function(e){(0,u.Z)(a,e);var t=da(a);function a(){return(0,r.Z)(this,a),t.apply(this,arguments)}return(0,l.Z)(a,[{key:"render",value:function(){var e=(this.props.post.last_likes||[]).length>0;return this.props.post.acl.can_see_likes&&e?2===this.props.post.acl.can_see_likes?(0,o.Z)("button",{className:"btn btn-link btn-sm likes-compact pull-left visible-xs-block",onClick:this.onClick,type:"button"},void 0,na||(na=(0,o.Z)("span",{className:"material-icon"},void 0,"favorite")),this.props.likes):(0,o.Z)("p",{className:"likes-compact pull-left visible-xs-block"},void 0,ia||(ia=(0,o.Z)("span",{className:"material-icon"},void 0,"favorite")),this.props.likes):null}}]),a}(fa);function ga(e,t){var a=t.slice(0,3).map((function(e){return e.username}));if(1==a.length)return interpolate(pgettext("post likes","%(user)s likes this."),{user:a[0]},!0);var n=e-a.length,i=a.slice(0,-1).join(", "),s=a.slice(-1)[0],o=interpolate(pgettext("post likes","%(users)s and %(last_user)s"),{users:i,last_user:s},!0);if(0===n)return interpolate(pgettext("post likes","%(users)s like this."),{users:o},!0);var r=npgettext("post likes","%(users)s and %(likes)s other user like this.","%(users)s and %(likes)s other users like this.",n);return interpolate(r,{users:a.join(", "),likes:n},!0)}var ba,ya,_a=function(e){(0,u.Z)(a,e);var t=da(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){ce.Z.open({mode:"REPLY",thread:e.props.thread,config:e.props.thread.api.editor,submit:e.props.thread.api.posts.index})})),e}return(0,l.Z)(a,[{key:"render",value:function(){return this.props.post.acl.can_reply?(0,o.Z)("button",{className:"btn btn-default btn-sm pull-right",type:"button",onClick:this.onClick},void 0,pgettext("post footer btn","Reply")):null}}]),a}(m().Component),Na=function(e){(0,u.Z)(a,e);var t=da(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){ce.Z.open({mode:"QUOTE",thread:e.props.thread,config:e.props.thread.api.editor,submit:e.props.thread.api.posts.index,context:{reply:e.props.post.id}})})),e}return(0,l.Z)(a,[{key:"render",value:function(){return this.props.post.acl.can_reply?(0,o.Z)("button",{className:"btn btn-default btn-sm pull-right",type:"button",onClick:this.onClick},void 0,pgettext("post footer btn","Quote")):null}}]),a}(m().Component),ka=function(e){(0,u.Z)(a,e);var t=da(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){ce.Z.open({mode:"EDIT",thread:e.props.thread,post:e.props.post,config:e.props.post.api.editor,submit:e.props.post.api.index})})),e}return(0,l.Z)(a,[{key:"render",value:function(){return this.props.post.acl.can_edit?(0,o.Z)("button",{className:"hidden-xs btn btn-default btn-sm pull-right",type:"button",onClick:this.onClick},void 0,pgettext("post footer btn","Edit")):null}}]),a}(m().Component);var xa=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,r.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"onUrlChange",(function(e){t.changeValue("url",e.target.value)})),t.state={isLoading:!1,url:"",validators:{url:[]},errors:{}},t}return(0,l.Z)(i,[{key:"clean",value:function(){return!!this.state.url.trim().length||(k.Z.error(pgettext("post move modal","You have to enter link to the other thread.")),!1)}},{key:"send",value:function(){return _.Z.post(this.props.thread.api.posts.move,{new_thread:this.state.url,posts:[this.props.post.id]})}},{key:"handleSuccess",value:function(e){x.Z.dispatch(Ge.r$(this.props.post,{isDeleted:!0})),N.Z.hide(),k.Z.success(pgettext("post move modal","Selected post was moved to the other thread."))}},{key:"handleError",value:function(e){400===e.status?k.Z.error(e.detail):k.Z.apiError(e)}},{key:"render",value:function(){return(0,o.Z)("div",{className:"modal-dialog",role:"document"},void 0,(0,o.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,ba||(ba=(0,o.Z)(wa,{})),(0,o.Z)("div",{className:"modal-body"},void 0,(0,o.Z)(g.Z,{for:"id_url",label:pgettext("post move modal field","Link to thread you want to move post to")},void 0,(0,o.Z)("input",{className:"form-control",disabled:this.state.isLoading,id:"id_url",onChange:this.onUrlChange,value:this.state.url}))),(0,o.Z)("div",{className:"modal-footer"},void 0,(0,o.Z)("button",{className:"btn btn-primary",disabled:this.state.isLoading},void 0,pgettext("post move modal btn","Move post"))))))}}]),i}(Z.Z);function wa(e){return(0,o.Z)("div",{className:"modal-header"},void 0,(0,o.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,ya||(ya=(0,o.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,o.Z)("h4",{className:"modal-title"},void 0,pgettext("post move modal title","Move post")))}function Ca(e){return(0,o.Z)("div",{className:"modal-body post-changelog-diff"},void 0,(0,o.Z)("ul",{className:"list-unstyled"},void 0,e.diff.map((function(e,t){return(0,o.Z)(Ra,{item:e},t)}))))}function Ra(e){return"?"===e.item[0]?null:(0,o.Z)("li",{className:(t=e.item,a="diff-item","-"===t[0]?a+=" diff-item-sub":"+"===t[0]&&(a+=" diff-item-add"),a)},void 0,e.item.substr(2));var t,a}var Ea,Sa,Oa,Ta=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(){var e;(0,r.Z)(this,i);for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e=n.call.apply(n,[this].concat(a)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){e.props.revertEdit(e.props.edit.id)})),e}return(0,l.Z)(i,[{key:"render",value:function(){return this.props.canRevert?(0,o.Z)("div",{className:"modal-footer visible-xs-block"},void 0,(0,o.Z)(Ae.Z,{className:"btn-default btn-sm btn-block",disabled:this.props.disabled,onClick:this.onClick,title:pgettext("post revert btn","Revert post to state from before this edit.")},void 0,pgettext("post revert btn","Revert"))):null}}]),i}(m().Component);var Pa,La,Aa=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(){var e;(0,r.Z)(this,i);for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e=n.call.apply(n,[this].concat(a)),(0,h.Z)((0,c.Z)(e),"goLast",(function(){e.props.goToEdit()})),(0,h.Z)((0,c.Z)(e),"goForward",(function(){e.props.goToEdit(e.props.edit.next)})),(0,h.Z)((0,c.Z)(e),"goBack",(function(){e.props.goToEdit(e.props.edit.previous)})),(0,h.Z)((0,c.Z)(e),"revertEdit",(function(){e.props.revertEdit(e.props.edit.id)})),e}return(0,l.Z)(i,[{key:"render",value:function(){return(0,o.Z)("div",{className:"modal-toolbar post-changelog-toolbar"},void 0,(0,o.Z)("div",{className:"row"},void 0,(0,o.Z)("div",{className:"col-xs-12 col-sm-4"},void 0,(0,o.Z)("div",{className:"row"},void 0,(0,o.Z)("div",{className:"col-xs-4"},void 0,(0,o.Z)(Ia,{disabled:this.props.disabled,edit:this.props.edit,onClick:this.goBack})),(0,o.Z)("div",{className:"col-xs-4"},void 0,(0,o.Z)(Ba,{disabled:this.props.disabled,edit:this.props.edit,onClick:this.goForward})),(0,o.Z)("div",{className:"col-xs-4"},void 0,(0,o.Z)(ja,{disabled:this.props.disabled,edit:this.props.edit,onClick:this.goLast})))),(0,o.Z)("div",{className:"col-xs-12 col-sm-5 xs-margin-top-half post-change-label"},void 0,(0,o.Z)(za,{edit:this.props.edit})),(0,o.Z)(Da,{canRevert:this.props.canRevert,disabled:this.props.disabled,onClick:this.revertEdit})))}}]),i}(m().Component);function Ia(e){return(0,o.Z)(Ae.Z,{className:"btn-default btn-block btn-icon btn-sm",disabled:e.disabled||!e.edit.previous,onClick:e.onClick,title:pgettext("post history modal btn","See previous change")},void 0,Ea||(Ea=(0,o.Z)("span",{className:"material-icon"},void 0,"chevron_left")))}function Ba(e){return(0,o.Z)(Ae.Z,{className:"btn-default btn-block btn-icon btn-sm",disabled:e.disabled||!e.edit.next,onClick:e.onClick,title:pgettext("post history modal btn","See next change")},void 0,Sa||(Sa=(0,o.Z)("span",{className:"material-icon"},void 0,"chevron_right")))}function ja(e){return(0,o.Z)(Ae.Z,{className:"btn-default btn-block btn-icon btn-sm",disabled:e.disabled||!e.edit.next,onClick:e.onClick,title:pgettext("post history modal btn","See previous change")},void 0,Oa||(Oa=(0,o.Z)("span",{className:"material-icon"},void 0,"last_page")))}function Da(e){return e.canRevert?(0,o.Z)("div",{className:"col-sm-3 hidden-xs"},void 0,(0,o.Z)(Ae.Z,{className:"btn-default btn-sm btn-block",disabled:e.disabled,onClick:e.onClick,title:pgettext("post revert btn","Revert post to state from before this edit.")},void 0,pgettext("post revert btn","Revert"))):null}function za(e){var t;t=e.edit.url.editor?interpolate('<a href="%(url)s" class="item-title">%(user)s</a>',{url:(0,Ze.Z)(e.edit.url.editor),user:(0,Ze.Z)(e.edit.editor_name)},!0):interpolate('<span class="item-title">%(user)s</span>',{user:(0,Ze.Z)(e.edit.editor_name)},!0);var a=interpolate('<abbr title="%(absolute)s">%(relative)s</abbr>',{absolute:(0,Ze.Z)(e.edit.edited_on.format("LLL")),relative:(0,Ze.Z)(e.edit.edited_on.fromNow())},!0),n=interpolate((0,Ze.Z)(pgettext("post history modal","By %(edited_by)s %(edited_on)s.")),{edited_by:t,edited_on:a},!0);return(0,o.Z)("p",{dangerouslySetInnerHTML:{__html:n}})}function Ua(e){return Object.assign({},e,{edited_on:F()(e.edited_on)})}var Ma=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,r.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"goToEdit",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.setState({isBusy:!0});var a=t.props.post.api.edits;null!==e&&(a+="?edit="+e),_.Z.get(a).then((function(e){t.setState({isReady:!0,isBusy:!1,edit:Ua(e)})}),(function(e){t.setState({isReady:!0,isBusy:!1,error:e.detail})}))})),(0,h.Z)((0,c.Z)(t),"revertEdit",(function(e){if(!t.state.isBusy&&window.confirm(pgettext("post revert","Are you sure you with to revert this post to the state from before this edit?"))){t.setState({isBusy:!0});var a=t.props.post.api.edits+"?edit="+e;_.Z.post(a).then((function(e){var t=Ge.ZB(e);x.Z.dispatch(Ge.r$(e,t)),k.Z.success(pgettext("post revert","Post has been reverted to previous state.")),N.Z.hide()}),(function(e){k.Z.apiError(e),t.setState({isBusy:!1})}))}})),t.state={isReady:!1,isBusy:!0,canRevert:e.post.acl.can_edit,error:null,edit:null},t}return(0,l.Z)(i,[{key:"componentDidMount",value:function(){this.goToEdit()}},{key:"render",value:function(){return this.state.error?(0,o.Z)(qa,{className:"modal-dialog modal-message"},void 0,(0,o.Z)(K.Z,{message:this.state.error})):this.state.isReady?(0,o.Z)(qa,{},void 0,(0,o.Z)(Aa,{canRevert:this.state.canRevert,disabled:this.state.isBusy,edit:this.state.edit,goToEdit:this.goToEdit,revertEdit:this.revertEdit}),(0,o.Z)(Ca,{diff:this.state.edit.diff}),(0,o.Z)(Ta,{canRevert:this.state.canRevert,disabled:this.state.isBusy,edit:this.state.edit,revertEdit:this.revertEdit})):Pa||(Pa=(0,o.Z)(qa,{},void 0,(0,o.Z)(J.Z,{})))}}]),i}(m().Component);function qa(e){return(0,o.Z)("div",{className:e.className||"modal-dialog",role:"document"},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,(0,o.Z)("div",{className:"modal-header"},void 0,(0,o.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,La||(La=(0,o.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,o.Z)("h4",{className:"modal-title"},void 0,pgettext("post history modal title","Post edits history"))),e.children))}var Fa,Ha,Ya,Va,Ga,$a,Wa=a(57026),Qa=a(60471),Xa=a(55210);function Ka(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}function Ja(e){return m().createElement(vn,(0,f.Z)({},e,{Form:mn}))}var en,tn,an,nn,sn,on,rn,ln,cn,un,dn,pn,hn,vn=function(e){(0,u.Z)(a,e);var t=Ka(a);function a(e){var n;return(0,r.Z)(this,a),(n=t.call(this,e)).state={isLoaded:!1,isError:!1,categories:[]},n}return(0,l.Z)(a,[{key:"componentDidMount",value:function(){var e=this;_.Z.get(misago.get("THREAD_EDITOR_API")).then((function(t){var a=t.map((function(e){return Object.assign(e,{disabled:!1===e.post,label:e.name,value:e.id,post:e.post})}));e.setState({isLoaded:!0,categories:a})}),(function(t){e.setState({isError:t.detail})}))}},{key:"render",value:function(){return this.state.isError?(0,o.Z)(Zn,{message:this.state.isError}):this.state.isLoaded?m().createElement(mn,(0,f.Z)({},this.props,{categories:this.state.categories})):Fa||(Fa=(0,o.Z)(fn,{}))}}]),a}(m().Component),mn=function(e){(0,u.Z)(a,e);var t=Ka(a);function a(e){var n;return(0,r.Z)(this,a),n=t.call(this,e),(0,h.Z)((0,c.Z)(n),"onCategoryChange",(function(e){var t=e.target.value,a={category:t};n.acl[t].can_pin_threads<a.weight&&(a.weight=0),n.acl[t].can_hide_threads||(a.is_hidden=0),n.acl[t].can_close_threads||(a.is_closed=!1),n.setState(a)})),n.state={isLoading:!1,title:"",category:null,categories:e.categories,weight:0,is_hidden:0,is_closed:!1,validators:{title:[Xa.C1()]},errors:{}},n.isHiddenChoices=[{value:0,icon:"visibility",label:pgettext("thread hidden switch choice","No")},{value:1,icon:"visibility_off",label:pgettext("thread hidden switch choice","Yes")}],n.isClosedChoices=[{value:!1,icon:"lock_outline",label:pgettext("thread closed switch choice","No")},{value:!0,icon:"lock",label:pgettext("thread closed switch choice","Yes")}],n.acl={},n.props.categories.forEach((function(e){e.post&&(n.state.category||(n.state.category=e.id),n.acl[e.id]={can_pin_threads:e.post.pin,can_close_threads:e.post.close,can_hide_threads:e.post.hide})})),n}return(0,l.Z)(a,[{key:"clean",value:function(){return!!this.isValid()||(k.Z.error(gettext("Form contains errors.")),this.setState({errors:this.validate()}),!1)}},{key:"send",value:function(){return _.Z.post(this.props.thread.api.posts.split,{title:this.state.title,category:this.state.category,weight:this.state.weight,is_hidden:this.state.is_hidden,is_closed:this.state.is_closed,posts:[this.props.post.id]})}},{key:"handleSuccess",value:function(e){x.Z.dispatch(Ge.r$(this.props.post,{isDeleted:!0})),N.Z.hide(),k.Z.success(pgettext("post split modal","Selected post was split into new thread."))}},{key:"handleError",value:function(e){400===e.status?(this.setState({errors:Object.assign({},this.state.errors,e)}),k.Z.error(gettext("Form contains errors."))):k.Z.apiError(e)}},{key:"getWeightChoices",value:function(){var e=[{value:0,icon:"remove",label:pgettext("thread weight choice","Not pinned")},{value:1,icon:"bookmark_border",label:pgettext("thread weight choice","Pinned in category")}];return 2==this.acl[this.state.category].can_pin_threads&&e.push({value:2,icon:"bookmark",label:pgettext("thread weight choice","Pinned globally")}),e}},{key:"renderWeightField",value:function(){return this.acl[this.state.category].can_pin_threads?(0,o.Z)(g.Z,{label:pgettext("posts split modal field","Thread weight"),for:"id_weight",labelClass:"col-sm-4",controlClass:"col-sm-8"},void 0,(0,o.Z)(Qa.Z,{id:"id_weight",onChange:this.bindInput("weight"),value:this.state.weight,choices:this.getWeightChoices()})):null}},{key:"renderHiddenField",value:function(){return this.acl[this.state.category].can_hide_threads?(0,o.Z)(g.Z,{label:pgettext("posts split modal field","Hide thread"),for:"id_is_hidden",labelClass:"col-sm-4",controlClass:"col-sm-8"},void 0,(0,o.Z)(Qa.Z,{id:"id_is_closed",onChange:this.bindInput("is_hidden"),value:this.state.is_hidden,choices:this.isHiddenChoices})):null}},{key:"renderClosedField",value:function(){return this.acl[this.state.category].can_close_threads?(0,o.Z)(g.Z,{label:pgettext("posts split modal field","Close thread"),for:"id_is_closed",labelClass:"col-sm-4",controlClass:"col-sm-8"},void 0,(0,o.Z)(Qa.Z,{id:"id_is_closed",onChange:this.bindInput("is_closed"),value:this.state.is_closed,choices:this.isClosedChoices})):null}},{key:"render",value:function(){return(0,o.Z)(gn,{className:"modal-dialog"},void 0,(0,o.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,o.Z)("div",{className:"modal-body"},void 0,(0,o.Z)(g.Z,{label:pgettext("posts split modal field","Thread title"),for:"id_title",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.title},void 0,(0,o.Z)("input",{id:"id_title",className:"form-control",type:"text",onChange:this.bindInput("title"),value:this.state.title})),Ha||(Ha=(0,o.Z)("div",{className:"clearfix"})),(0,o.Z)(g.Z,{label:pgettext("posts split modal field","Category"),for:"id_category",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.category},void 0,(0,o.Z)(Wa.Z,{id:"id_category",onChange:this.onCategoryChange,value:this.state.category,choices:this.state.categories})),Ya||(Ya=(0,o.Z)("div",{className:"clearfix"})),this.renderWeightField(),this.renderHiddenField(),this.renderClosedField()),(0,o.Z)("div",{className:"modal-footer"},void 0,(0,o.Z)(Ae.Z,{className:"btn-primary",loading:this.state.isLoading},void 0,pgettext("posts split modal btn","Split post")))))}}]),a}(Z.Z);function fn(){return Va||(Va=(0,o.Z)(gn,{className:"modal-dialog"},void 0,(0,o.Z)(J.Z,{})))}function Zn(e){return(0,o.Z)(gn,{className:"modal-dialog modal-message"},void 0,Ga||(Ga=(0,o.Z)("div",{className:"message-icon"},void 0,(0,o.Z)("span",{className:"material-icon"},void 0,"info_outline"))),(0,o.Z)("div",{className:"message-body"},void 0,(0,o.Z)("p",{className:"lead"},void 0,pgettext("post split modal","You can't move this post at the moment.")),(0,o.Z)("p",{},void 0,e.message)))}function gn(e){return(0,o.Z)("div",{className:e.className,role:"document"},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,(0,o.Z)("div",{className:"modal-header"},void 0,(0,o.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,$a||($a=(0,o.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,o.Z)("h4",{className:"modal-title"},void 0,pgettext("posts split modal title","Split post into new thread"))),e.children))}function bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}function yn(e){return(0,o.Z)("ul",{className:"dropdown-menu dropdown-menu-right stick-to-bottom"},void 0,m().createElement(Nn,e),m().createElement(kn,e),m().createElement(xn,e),m().createElement(wn,e),m().createElement(Cn,e),m().createElement(Rn,e),m().createElement(En,e),m().createElement(Sn,e),m().createElement(On,e),m().createElement(Tn,e),m().createElement(Pn,e),m().createElement(Ln,e),m().createElement(An,e))}var _n,Nn=function(e){(0,u.Z)(a,e);var t=bn(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){var t=window.location.protocol+"//";t+=window.location.host,t+=e.props.post.url.index,prompt(pgettext("post permalink","Permament link to this post:"),t)})),e}return(0,l.Z)(a,[{key:"render",value:function(){return(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},void 0,en||(en=(0,o.Z)("span",{className:"material-icon"},void 0,"link")),pgettext("post options permalink btn","Permament link")))}}]),a}(m().Component),kn=function(e){(0,u.Z)(a,e);var t=bn(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){ce.Z.open({mode:"EDIT",thread:e.props.thread,post:e.props.post,config:e.props.post.api.editor,submit:e.props.post.api.index})})),e}return(0,l.Z)(a,[{key:"render",value:function(){return this.props.post.acl.can_edit?(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},void 0,tn||(tn=(0,o.Z)("span",{className:"material-icon"},void 0,"edit")),pgettext("post options edit btn","Edit"))):null}}]),a}(m().Component),xn=function(e){(0,u.Z)(a,e);var t=bn(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){Kt(e.props)})),e}return(0,l.Z)(a,[{key:"render",value:function(){var e=this.props,t=e.post,a=e.thread;return a.acl.can_mark_best_answer&&t.acl.can_mark_as_best_answer?t.id===a.best_answer||a.best_answer&&!a.acl.can_change_best_answer?null:(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},void 0,an||(an=(0,o.Z)("span",{className:"material-icon"},void 0,"check_box")),pgettext("post options best answer btn","Mark as best answer"))):null}}]),a}(m().Component),wn=function(e){(0,u.Z)(a,e);var t=bn(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){Jt(e.props)})),e}return(0,l.Z)(a,[{key:"render",value:function(){var e=this.props,t=e.post,a=e.thread;return t.id!==a.best_answer?null:a.acl.can_unmark_best_answer?(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},void 0,nn||(nn=(0,o.Z)("span",{className:"material-icon"},void 0,"check_box_outline_blank")),pgettext("post options best answer btn","Unmark best answer"))):null}}]),a}(m().Component),Cn=function(e){(0,u.Z)(a,e);var t=bn(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){N.Z.show((0,o.Z)(Ma,{post:e.props.post}))})),e}return(0,l.Z)(a,[{key:"render",value:function(){var e=this.props.post.is_hidden&&!this.props.post.acl.can_see_hidden,t=0===this.props.post.edits;if(e||t)return null;var a=npgettext("post edits","This post was edited %(edits)s time.","This post was edited %(edits)s times.",this.props.post.edits);return interpolate(a,{edits:this.props.post.edits},!0),(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},void 0,sn||(sn=(0,o.Z)("span",{className:"material-icon"},void 0,"edit")),pgettext("post options edit btn","Changes history")))}}]),a}(m().Component),Rn=function(e){(0,u.Z)(a,e);var t=bn(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){Ft(e.props)})),e}return(0,l.Z)(a,[{key:"render",value:function(){return this.props.post.acl.can_approve&&this.props.post.is_unapproved?(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},void 0,on||(on=(0,o.Z)("span",{className:"material-icon"},void 0,"done")),pgettext("post options approve btn","Approve"))):null}}]),a}(m().Component),En=function(e){(0,u.Z)(a,e);var t=bn(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){N.Z.show(m().createElement(xa,e.props))})),e}return(0,l.Z)(a,[{key:"render",value:function(){return this.props.post.acl.can_move?(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},void 0,rn||(rn=(0,o.Z)("span",{className:"material-icon"},void 0,"arrow_forward")),pgettext("post options move btn","Move"))):null}}]),a}(m().Component),Sn=function(e){(0,u.Z)(a,e);var t=bn(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){N.Z.show(m().createElement(Ja,e.props))})),e}return(0,l.Z)(a,[{key:"render",value:function(){return this.props.post.acl.can_move?(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},void 0,ln||(ln=(0,o.Z)("span",{className:"material-icon"},void 0,"call_split")),pgettext("post options split btn","Split"))):null}}]),a}(m().Component),On=function(e){(0,u.Z)(a,e);var t=bn(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){Ht(e.props)})),e}return(0,l.Z)(a,[{key:"render",value:function(){return this.props.post.acl.can_protect?this.props.post.is_protected?null:(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},void 0,cn||(cn=(0,o.Z)("span",{className:"material-icon"},void 0,"lock_outline")),pgettext("post options protect btn","Protect"))):null}}]),a}(m().Component),Tn=function(e){(0,u.Z)(a,e);var t=bn(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){Yt(e.props)})),e}return(0,l.Z)(a,[{key:"render",value:function(){return this.props.post.acl.can_protect&&this.props.post.is_protected?(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},void 0,un||(un=(0,o.Z)("span",{className:"material-icon"},void 0,"lock_open")),pgettext("post options protect btn","Remove protection"))):null}}]),a}(m().Component),Pn=function(e){(0,u.Z)(a,e);var t=bn(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){Vt(e.props)})),e}return(0,l.Z)(a,[{key:"render",value:function(){var e=this.props,t=e.post,a=e.thread;return t.id===a.best_answer?null:t.acl.can_hide?t.is_hidden?null:(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},void 0,dn||(dn=(0,o.Z)("span",{className:"material-icon"},void 0,"visibility_off")),pgettext("post options hide btn","Hide"))):null}}]),a}(m().Component),Ln=function(e){(0,u.Z)(a,e);var t=bn(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){Gt(e.props)})),e}return(0,l.Z)(a,[{key:"render",value:function(){return this.props.post.acl.can_unhide&&this.props.post.is_hidden?(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},void 0,pn||(pn=(0,o.Z)("span",{className:"material-icon"},void 0,"visibility")),pgettext("post options hide btn","Unhide"))):null}}]),a}(m().Component),An=function(e){(0,u.Z)(a,e);var t=bn(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){Xt(e.props)})),e}return(0,l.Z)(a,[{key:"render",value:function(){var e=this.props,t=e.post,a=e.thread;return t.id===a.best_answer?null:t.acl.can_delete?(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},void 0,hn||(hn=(0,o.Z)("span",{className:"material-icon"},void 0,"clear")),pgettext("post options delete btn","Delete"))):null}}]),a}(m().Component);function In(e){return(0,o.Z)("div",{className:"pull-right dropdown"},void 0,_n||(_n=(0,o.Z)("button",{"aria-expanded":"true","aria-haspopup":"true",className:"btn btn-default btn-icon dropdown-toggle","data-toggle":"dropdown",type:"button"},void 0,(0,o.Z)("span",{className:"material-icon"},void 0,"expand_more"))),m().createElement(yn,e))}var Bn=a(21981);var jn,Dn=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(){var e;(0,r.Z)(this,i);for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e=n.call.apply(n,[this].concat(a)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){e.props.post.isSelected?x.Z.dispatch(Bn._H(e.props.post)):x.Z.dispatch(Bn.Ys(e.props.post))})),e}return(0,l.Z)(i,[{key:"render",value:function(){return this.props.thread.acl.can_merge_posts||(e=this.props.post.acl).can_approve||e.can_hide||e.can_protect||e.can_unhide||e.can_delete||e.can_move?(0,o.Z)("div",{className:"pull-right"},void 0,(0,o.Z)("button",{className:"btn btn-default btn-icon",onClick:this.onClick,type:"button"},void 0,(0,o.Z)("span",{className:"material-icon"},void 0,this.props.post.isSelected?"check_box":"check_box_outline_blank"))):null;var e}}]),i}(m().Component),zn=a(24678);function Un(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}function Mn(e){return(0,o.Z)("div",{className:"post-heading"},void 0,m().createElement(qn,e),m().createElement(Fn,e),m().createElement(Hn,e),m().createElement(Yn,e),m().createElement($n,e),m().createElement(Wn,e),m().createElement(Qn,e),m().createElement(Dn,e),m().createElement(In,e))}function qn(e){return e.post.is_read?null:(0,o.Z)("span",{className:"label label-unread hidden-xs"},void 0,pgettext("post unread label","New post"))}function Fn(e){return e.post.is_read?null:(0,o.Z)("span",{className:"label label-unread visible-xs-inline-block"},void 0,pgettext("post unread label","New"))}function Hn(e){var t=interpolate(pgettext("post timestamp","posted %(posted_on)s"),{posted_on:e.post.posted_on.format("LL, LT")},!0);return(0,o.Z)("a",{href:e.post.url.index,className:"btn btn-link posted-on hidden-xs",title:t},void 0,e.post.posted_on.fromNow())}function Yn(e){return(0,o.Z)("a",{href:e.post.url.index,className:"btn btn-link posted-on visible-xs-inline-block"},void 0,e.post.posted_on.fromNow())}var Vn,Gn,$n=function(e){(0,u.Z)(a,e);var t=Un(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){N.Z.show((0,o.Z)(Ma,{post:e.props.post}))})),e}return(0,l.Z)(a,[{key:"render",value:function(){var e=this.props.post.is_hidden&&!this.props.post.acl.can_see_hidden,t=0===this.props.post.edits;if(e||t)return null;var a=npgettext("post edits stat","This post was edited %(edits)s time.","This post was edited %(edits)s times.",this.props.post.edits),n=interpolate(a,{edits:this.props.post.edits},!0),i=npgettext("post edits stat","edited %(edits)s time","edited %(edits)s times",this.props.post.edits);return(0,o.Z)("button",{className:"btn btn-link btn-see-edits hidden-xs",onClick:this.onClick,title:n,type:"button"},void 0,interpolate(i,{edits:this.props.post.edits},!0))}}]),a}(m().Component),Wn=function(e){(0,u.Z)(a,e);var t=Un(a);function a(){return(0,r.Z)(this,a),t.apply(this,arguments)}return(0,l.Z)(a,[{key:"render",value:function(){var e=this.props.post.is_hidden&&!this.props.post.acl.can_see_hidden,t=0===this.props.post.edits;if(e||t)return null;var a=npgettext("post edits stat","%(edits)s edit","%(edits)s edits",this.props.post.edits);return(0,o.Z)("button",{className:"btn btn-link btn-see-edits visible-xs-inline-block",onClick:this.onClick,type:"button"},void 0,interpolate(a,{edits:this.props.post.edits},!0))}}]),a}($n);function Qn(e){var t=e.post.poster&&e.post.poster.id===e.user.id,a=e.post.acl.can_protect;return e.user.id&&e.post.is_protected&&(t||a)?(0,o.Z)("span",{className:"label label-protected hidden-xs",title:pgettext("post protected label","This post is protected and may not be edited.")},void 0,jn||(jn=(0,o.Z)("span",{className:"material-icon"},void 0,"lock_outline")),pgettext("post protected label","protected")):null}function Xn(e){var t=e.post,a=e.thread;return(0,o.Z)("div",{className:"post-side post-side-anonymous"},void 0,(0,o.Z)(Dn,{post:t,thread:a}),(0,o.Z)(In,{post:t,thread:a}),(0,o.Z)("div",{className:"media"},void 0,Vn||(Vn=(0,o.Z)("div",{className:"media-left"},void 0,(0,o.Z)("span",{},void 0,(0,o.Z)(I.ZP,{className:"poster-avatar",size:100})))),(0,o.Z)("div",{className:"media-body"},void 0,(0,o.Z)("span",{className:"media-heading item-title"},void 0,t.poster_name),(0,o.Z)("span",{className:"user-title user-title-anonymous"},void 0,pgettext("post removed poster username","Removed user")))))}function Kn(e){var t=e.title,a=e.rank;return a.is_tab||!!t||!!a.title}function Jn(e){var t=e.poster,a=npgettext("poster stats","%(posts)s post","%(posts)s posts",t.posts),n="user-postcount";return Kn(t)&&(n+=" hidden-xs hidden-sm"),(0,o.Z)("span",{className:n},void 0,interpolate(a,{posts:t.posts},!0))}function ei(e){var t=e.poster,a="hidden-xs";return Kn(t)&&(a+=" hidden-sm"),(0,o.Z)("span",{className:a},void 0,(0,o.Z)(zn.ZP,{status:t.status},void 0,(0,o.Z)(zn.pg,{status:t.status,user:t})))}function ti(e){var t=e.rank,a=e.title||t.title;if(!a&&t.is_tab&&(a=t.name),!a)return null;var n="user-title";return t.css_class&&(n+=" user-title-"+t.css_class),t.is_tab?(0,o.Z)("div",{className:n},void 0,(0,o.Z)("a",{href:t.url},void 0,a)):(0,o.Z)("div",{className:n},void 0,a)}function ai(e){var t=e.post,a=e.thread,n=t.poster;return(0,o.Z)("div",{className:"post-side post-side-registered"},void 0,(0,o.Z)(Dn,{post:t,thread:a}),(0,o.Z)(In,{post:t,thread:a}),(0,o.Z)("div",{className:"media"},void 0,(0,o.Z)("div",{className:"media-left"},void 0,(0,o.Z)("a",{href:n.url},void 0,(0,o.Z)(I.ZP,{className:"poster-avatar",size:100,user:n}))),(0,o.Z)("div",{className:"media-body"},void 0,(0,o.Z)("div",{className:"media-heading"},void 0,(0,o.Z)("a",{className:"item-title",href:n.url},void 0,n.username),(0,o.Z)(zn.ZP,{status:n.status},void 0,(0,o.Z)(zn.Jj,{status:n.status}))),(0,o.Z)(ti,{rank:n.rank,title:n.title}),(0,o.Z)(ei,{poster:n}),(0,o.Z)(Jn,{poster:n}))))}function ni(e){return e.post.poster?m().createElement(ai,e):m().createElement(Xn,e)}function ii(e){var t="post";return e.post.isDeleted?t="hide":e.post.is_hidden&&!e.post.acl.can_see_hidden&&(t="post post-hidden"),e.post.poster&&e.post.poster.rank.css_class&&(t+=" post-"+e.post.poster.rank.css_class),e.post.is_read||(t+=" post-new"),(0,o.Z)("li",{id:"post-"+e.post.id,className:t},void 0,(0,o.Z)("div",{className:"panel panel-default panel-post"},void 0,(0,o.Z)("div",{className:"panel-body"},void 0,m().createElement(ni,e),(0,o.Z)("div",{className:"panel-content"},void 0,m().createElement(Mn,e),m().createElement(Dt,e),m().createElement(Ut,e),m().createElement(Mt,e),m().createElement(zt,e),m().createElement(At,e),m().createElement(xt,e),m().createElement(pa,e)))))}const si=function(){return(0,o.Z)("li",{className:"post"},void 0,(0,o.Z)("div",{className:"panel panel-default panel-post"},void 0,(0,o.Z)("div",{className:"panel-body"},void 0,(0,o.Z)("div",{className:"post-side post-side-registered"},void 0,(0,o.Z)("div",{className:"media"},void 0,Gn||(Gn=(0,o.Z)("div",{className:"media-left"},void 0,(0,o.Z)("span",{},void 0,(0,o.Z)(I.ZP,{className:"poster-avatar",size:"100"})))),(0,o.Z)("div",{className:"media-body"},void 0,(0,o.Z)("span",{className:"media-heading item-title"},void 0,(0,o.Z)("span",{className:"ui-preview-text",style:{width:"80px"}},void 0," ")),(0,o.Z)("span",{className:"user-title user-title-anonymous"},void 0,(0,o.Z)("span",{className:"ui-preview-text",style:{width:"60px"}},void 0," "))))),(0,o.Z)("div",{className:"panel-content"},void 0,(0,o.Z)("div",{className:"post-body"},void 0,(0,o.Z)("article",{className:"misago-markup"},void 0,(0,o.Z)("p",{className:"ui-preview-text",style:{width:"100%"}},void 0," "),(0,o.Z)("p",{className:"ui-preview-text",style:{width:"70%"}},void 0," "),(0,o.Z)("p",{className:"ui-preview-text hidden-xs hidden-sm",style:{width:"85%"}},void 0," ")))))))};var oi;function ri(e){return e.posts.isLoaded?(0,o.Z)("ul",{className:"posts-list ui-ready"},void 0,e.posts.results.map((function(t){return m().createElement(li,(0,f.Z)({key:t.id,post:t},e))}))):oi||(oi=(0,o.Z)("ul",{className:"posts-list ui-preview"},void 0,(0,o.Z)(si,{})))}function li(e){return e.post.is_event?m().createElement(ft,e):m().createElement(ii,e)}var ci,ui=a(55547),di=a(53328),pi=a(9771),hi=a(59131),vi=a(98936),mi=a(50366),fi=a(16768);const Zi=function(e){var t=e.thread;return(0,o.Z)("div",{className:"thread-user-card"},void 0,(0,o.Z)("div",{className:"thread-user-card-media"},void 0,t.starter?(0,o.Z)("a",{href:t.url.starter},void 0,(0,o.Z)(I.ZP,{size:40,user:t.starter})):ci||(ci=(0,o.Z)(I.ZP,{size:40}))),(0,o.Z)("div",{className:"thread-user-card-body"},void 0,(0,o.Z)("div",{className:"thread-user-card-header"},void 0,t.starter?(0,o.Z)("a",{className:"item-title",href:t.url.starter,title:pgettext("thread starter info","Thread author")},void 0,t.starter.username):(0,o.Z)("span",{className:"item-title",title:pgettext("thread starter info","Thread author")},void 0,t.starter_name)),(0,o.Z)("div",{},void 0,(0,o.Z)("span",{className:"text-muted",title:interpolate(pgettext("thread starter info","Started on: %(timestamp)s"),{timestamp:t.started_on.format("LLL")},!0)},void 0,t.started_on.fromNow()))))};var gi,bi,yi=a(99755),_i=a(12891);var Ni=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,r.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"handleSuccess",(function(e){t.handleSuccessUnmounted(e),t.setState({isLoading:!0}),N.Z.hide()})),(0,h.Z)((0,c.Z)(t),"handleSuccessUnmounted",(function(e){x.Z.dispatch(y.Ar()),x.Z.dispatch(y.Vx(e))})),(0,h.Z)((0,c.Z)(t),"handleError",(function(e){x.Z.dispatch(y.Ar()),400===e.status?k.Z.error(e.detail[0]):k.Z.apiError(e)})),(0,h.Z)((0,c.Z)(t),"onChange",(function(e){t.changeValue("title",e.target.value)})),t.state={isLoading:!1,title:e.thread.title,validators:{title:(0,_i.jn)()},errors:{}},t}return(0,l.Z)(i,[{key:"clean",value:function(){if(!this.state.title.trim().length)return k.Z.error(pgettext("thread title form","You have to enter thread title.")),!1;var e=this.validate();return!e.title||(k.Z.error(e.title[0]),!1)}},{key:"send",value:function(){return x.Z.dispatch(y.n6()),_.Z.patch(this.props.thread.api.index,[{op:"replace",path:"title",value:this.state.title}])}},{key:"render",value:function(){return(0,o.Z)("div",{className:"modal-dialog modal-lg",role:"document"},void 0,(0,o.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,gi||(gi=(0,o.Z)(ki,{})),(0,o.Z)("div",{className:"modal-body"},void 0,(0,o.Z)(g.Z,{for:"id_modal_title",label:pgettext("thread title form field","Thread title")},void 0,(0,o.Z)("input",{className:"form-control",disabled:this.state.isLoading||this.props.thread.isBusy,id:"id_modal_title",onChange:this.onChange,value:this.state.title}))),(0,o.Z)("div",{className:"modal-footer"},void 0,(0,o.Z)("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},void 0,pgettext("thread title form btn","Cancel")),(0,o.Z)("button",{className:"btn btn-primary",disabled:this.state.isLoading||this.props.thread.isBusy},void 0,pgettext("thread title form btn","Change title"))))))}}]),i}(Z.Z);function ki(e){return(0,o.Z)("div",{className:"modal-header"},void 0,(0,o.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,bi||(bi=(0,o.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,o.Z)("h4",{className:"modal-title"},void 0,pgettext("thread title form title","Change title")))}var xi,wi,Ci=a(52753);var Ri,Ei,Si,Oi,Ti,Pi,Li=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,r.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"handleSuccess",(function(e){t.handleSuccessUnmounted(e),t.setState({isLoading:!0})})),(0,h.Z)((0,c.Z)(t),"handleSuccessUnmounted",(function(e){k.Z.success(pgettext("thread merge form","Thread has been merged with other one.")),window.location=e.url})),(0,h.Z)((0,c.Z)(t),"handleError",(function(e){x.Z.dispatch(y.Ar()),400===e.status?e.best_answers||e.polls?N.Z.show((0,o.Z)(Ci.ZP,{api:t.props.thread.api.merge,bestAnswers:e.best_answers,data:{other_thread:t.state.url},polls:e.polls,onError:t.handleError,onSuccess:t.handleSuccessUnmounted})):e.best_answer?k.Z.error(e.best_answer[0]):e.poll?k.Z.error(e.poll[0]):k.Z.error(e.detail):k.Z.apiError(e)})),(0,h.Z)((0,c.Z)(t),"onUrlChange",(function(e){t.changeValue("url",e.target.value)})),t.state={isLoading:!1,url:"",validators:{url:[]},errors:{}},t}return(0,l.Z)(i,[{key:"clean",value:function(){return!!this.state.url.trim().length||(k.Z.error(pgettext("thread merge form","You have to enter link to the other thread.")),!1)}},{key:"send",value:function(){return x.Z.dispatch(y.n6()),_.Z.post(this.props.thread.api.merge,{other_thread:this.state.url})}},{key:"render",value:function(){return(0,o.Z)("div",{className:"modal-dialog",role:"document"},void 0,(0,o.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,xi||(xi=(0,o.Z)(Ai,{})),(0,o.Z)("div",{className:"modal-body"},void 0,(0,o.Z)(g.Z,{for:"id_url",label:pgettext("thread merge form field","Link to thread you want to merge with"),help_text:pgettext("thread merge form field","Merge will delete current thread and move its contents to the thread specified here.")},void 0,(0,o.Z)("input",{className:"form-control",disabled:this.state.isLoading||this.props.thread.isBusy,id:"id_url",onChange:this.onUrlChange,value:this.state.url}))),(0,o.Z)("div",{className:"modal-footer"},void 0,(0,o.Z)("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},void 0,pgettext("thread merge form btn","Cancel")),(0,o.Z)("button",{className:"btn btn-primary",disabled:this.state.isLoading||this.props.thread.isBusy},void 0,pgettext("thread merge form btn","Merge thread"))))))}}]),i}(Z.Z);function Ai(e){return(0,o.Z)("div",{className:"modal-header"},void 0,(0,o.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,wi||(wi=(0,o.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,o.Z)("h4",{className:"modal-title"},void 0,pgettext("thread merge form title","Merge thread")))}var Ii,Bi,ji,Di,zi,Ui,Mi,qi,Fi,Hi,Yi,Vi,Gi=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,r.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"onCategoryChange",(function(e){t.changeValue("category",e.target.value)})),t.state={isReady:!1,isLoading:!1,isError:!1,category:null,categories:[]},t}return(0,l.Z)(i,[{key:"componentDidMount",value:function(){var e=this;_.Z.get(S.Z.get("THREAD_EDITOR_API")).then((function(t){var a=null,n=t.map((function(e){return!1===e.post||a||(a=e.id),Object.assign(e,{disabled:!1===e.post,label:e.name,value:e.id})}));e.setState({isReady:!0,category:a,categories:n})}),(function(t){e.setState({isError:t.detail})}))}},{key:"send",value:function(){return x.Z.dispatch(y.n6()),_.Z.patch(this.props.thread.api.index,[{op:"replace",path:"category",value:this.state.category}])}},{key:"handleSuccess",value:function(){_.Z.get(this.props.thread.api.posts.index,{page:this.props.posts.page}).then((function(e){x.Z.dispatch(y.gx(e)),x.Z.dispatch(Bn.zD(e.post_set)),x.Z.dispatch(y.Ar()),k.Z.success(pgettext("thread move form","Thread has been moved.")),N.Z.hide()}),(function(e){x.Z.dispatch(y.Ar()),k.Z.apiError(e)}))}},{key:"handleError",value:function(e){400===e.status?k.Z.error(e.detail[0]):k.Z.apiError(e)}},{key:"render",value:function(){return this.state.isReady?(0,o.Z)("div",{className:"modal-dialog",role:"document"},void 0,(0,o.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,Ri||(Ri=(0,o.Z)($i,{})),(0,o.Z)("div",{className:"modal-body"},void 0,(0,o.Z)(g.Z,{for:"id_category",label:pgettext("thread move form field","New category")},void 0,(0,o.Z)(Wa.Z,{choices:this.state.categories,disabled:this.state.isLoading||this.props.thread.isBusy,id:"id_category",onChange:this.onCategoryChange,value:this.state.category}))),(0,o.Z)("div",{className:"modal-footer"},void 0,(0,o.Z)("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},void 0,pgettext("thread move form btn","Cancel")),(0,o.Z)("button",{className:"btn btn-primary",disabled:this.state.isLoading||this.props.thread.isBusy},void 0,pgettext("thread move form btn","Move thread")))))):this.state.isError?(0,o.Z)(Qi,{message:this.state.isError}):Ei||(Ei=(0,o.Z)(Wi,{}))}}]),i}(Z.Z);function $i(e){return(0,o.Z)("div",{className:"modal-header"},void 0,(0,o.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,Si||(Si=(0,o.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,o.Z)("h4",{className:"modal-title"},void 0,pgettext("thread move form title","Move thread")))}function Wi(e){return Oi||(Oi=(0,o.Z)("div",{className:"modal-dialog",role:"document"},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,(0,o.Z)($i,{}),(0,o.Z)(J.Z,{}))))}function Qi(e){return(0,o.Z)("div",{className:"modal-dialog modal-message",role:"document"},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,Ti||(Ti=(0,o.Z)($i,{})),Pi||(Pi=(0,o.Z)("div",{className:"message-icon"},void 0,(0,o.Z)("span",{className:"material-icon"},void 0,"info_outline"))),(0,o.Z)("div",{className:"message-body"},void 0,(0,o.Z)("p",{className:"lead"},void 0,pgettext("thread move form","You can't move this thread at the moment.")),(0,o.Z)("p",{},void 0,e.message),(0,o.Z)("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},void 0,pgettext("thread move form dismiss btn","Ok")))))}var Xi=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(){var e;(0,r.Z)(this,i);for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e=n.call.apply(n,[this].concat(a)),(0,h.Z)((0,c.Z)(e),"callApi",(function(t,a){x.Z.dispatch(y.n6()),t.push({op:"add",path:"acl",value:!0}),_.Z.patch(e.props.thread.api.index,t).then((function(e){x.Z.dispatch(y.Vx(e)),x.Z.dispatch(y.Ar()),k.Z.success(a)}),(function(e){x.Z.dispatch(y.Ar()),400===e.status?k.Z.error(e.detail[0]):k.Z.apiError(e)}))})),(0,h.Z)((0,c.Z)(e),"changeTitle",(function(){N.Z.show((0,o.Z)(Ni,{thread:e.props.thread}))})),(0,h.Z)((0,c.Z)(e),"pinGlobally",(function(){e.callApi([{op:"replace",path:"weight",value:2}],pgettext("thread moderation","Thread has been pinned globally."))})),(0,h.Z)((0,c.Z)(e),"pinLocally",(function(){e.callApi([{op:"replace",path:"weight",value:1}],pgettext("thread moderation","Thread has been pinned in category."))})),(0,h.Z)((0,c.Z)(e),"unpin",(function(){e.callApi([{op:"replace",path:"weight",value:0}],pgettext("thread moderation","Thread has been unpinned."))})),(0,h.Z)((0,c.Z)(e),"approve",(function(){e.callApi([{op:"replace",path:"is-unapproved",value:!1}],pgettext("thread moderation","Thread has been approved."))})),(0,h.Z)((0,c.Z)(e),"open",(function(){e.callApi([{op:"replace",path:"is-closed",value:!1}],gettext("Thread has been opened."))})),(0,h.Z)((0,c.Z)(e),"close",(function(){e.callApi([{op:"replace",path:"is-closed",value:!0}],pgettext("thread moderation","Thread has been closed."))})),(0,h.Z)((0,c.Z)(e),"unhide",(function(){e.callApi([{op:"replace",path:"is-hidden",value:!1}],pgettext("thread moderation","Thread has been made visible."))})),(0,h.Z)((0,c.Z)(e),"hide",(function(){e.callApi([{op:"replace",path:"is-hidden",value:!0}],pgettext("thread moderation","Thread has been made hidden."))})),(0,h.Z)((0,c.Z)(e),"move",(function(){N.Z.show((0,o.Z)(Gi,{posts:e.props.posts,thread:e.props.thread}))})),(0,h.Z)((0,c.Z)(e),"merge",(function(){N.Z.show((0,o.Z)(Li,{thread:e.props.thread}))})),(0,h.Z)((0,c.Z)(e),"delete",(function(){window.confirm(pgettext("thread moderation","Are you sure you want to delete this thread?"))&&(x.Z.dispatch(y.n6()),_.Z.delete(e.props.thread.api.index).then((function(t){k.Z.success(pgettext("thread moderation","Thread has been deleted.")),window.location=e.props.thread.category.url.index}),(function(e){x.Z.dispatch(y.Ar()),k.Z.apiError(e)})))})),e}return(0,l.Z)(i,[{key:"render",value:function(){var e=this.props.moderation;return(0,o.Z)("ul",{className:"dropdown-menu dropdown-menu-right stick-to-bottom"},void 0,!!e.edit&&(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.changeTitle,type:"button"},void 0,Ii||(Ii=(0,o.Z)("span",{className:"material-icon"},void 0,"edit")),pgettext("thread moderation btn","Change title"))),!!e.pinGlobally&&(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.pinGlobally,type:"button"},void 0,Bi||(Bi=(0,o.Z)("span",{className:"material-icon"},void 0,"bookmark")),pgettext("thread moderation btn","Pin globally"))),!!e.pinLocally&&(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.pinLocally,type:"button"},void 0,ji||(ji=(0,o.Z)("span",{className:"material-icon"},void 0,"bookmark_border")),pgettext("thread moderation btn","Pin in category"))),!!e.unpin&&(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.unpin,type:"button"},void 0,Di||(Di=(0,o.Z)("span",{className:"material-icon"},void 0,"panorama_fish_eye")),pgettext("thread moderation btn","Unpin"))),!!e.move&&(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.move,type:"button"},void 0,zi||(zi=(0,o.Z)("span",{className:"material-icon"},void 0,"arrow_forward")),pgettext("thread moderation btn","Move"))),!!e.merge&&(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.merge,type:"button"},void 0,Ui||(Ui=(0,o.Z)("span",{className:"material-icon"},void 0,"call_merge")),pgettext("thread moderation btn","Merge"))),!!e.approve&&(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.approve,type:"button"},void 0,Mi||(Mi=(0,o.Z)("span",{className:"material-icon"},void 0,"done")),pgettext("thread moderation btn","Approve"))),!!e.open&&(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.open,type:"button"},void 0,qi||(qi=(0,o.Z)("span",{className:"material-icon"},void 0,"lock_open")),pgettext("thread moderation btn","Open"))),!!e.close&&(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.close,type:"button"},void 0,Fi||(Fi=(0,o.Z)("span",{className:"material-icon"},void 0,"lock_outline")),pgettext("thread moderation btn","Close"))),!!e.unhide&&(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.unhide,type:"button"},void 0,Hi||(Hi=(0,o.Z)("span",{className:"material-icon"},void 0,"visibility")),pgettext("thread moderation btn","Unhide"))),!!e.hide&&(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.hide,type:"button"},void 0,Yi||(Yi=(0,o.Z)("span",{className:"material-icon"},void 0,"visibility_off")),pgettext("thread moderation btn","Hide"))),!!e.delete&&(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",onClick:this.delete,type:"button"},void 0,Vi||(Vi=(0,o.Z)("span",{className:"material-icon"},void 0,"clear")),pgettext("thread moderation btn","Delete"))))}}]),i}(m().Component);const Ki=Xi;var Ji;const es=function(e){var t=e.thread,a=e.posts,n=e.moderation;return(0,o.Z)("div",{className:"dropdown"},void 0,(0,o.Z)("button",{type:"button",className:"btn btn-default btn-outline btn-icon dropdown-toggle",title:pgettext("thread options btn","Thread options"),"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:t.isBusy},void 0,Ji||(Ji=(0,o.Z)("span",{className:"material-icon"},void 0,"settings"))),(0,o.Z)(Ki,{thread:t,posts:a,moderation:n}))};var ts,as,ns,is=a(94184),ss=a.n(is),os=a(60642),rs=a(49021);const ls=(0,s.$j)()((function(e){var t=e.dispatch,a=e.dropup,n=e.stickToBottom,i=e.thread;return(0,o.Z)(os.D,{url:i.api.watch},void 0,(function(e,s){var r,l=s.loading;function c(a){i.notifications!==a&&(t((0,y.Vx)({notifications:a})),e({json:{notifications:a},onError:function(e){k.Z.apiError(e),t((0,y.Vx)({notifications:i.notifications}))}}))}return(0,o.Z)("div",{className:a?"dropup":"dropdown"},void 0,(0,o.Z)("button",{className:"btn btn-default btn-outline btn-block","aria-expanded":"true","aria-haspopup":"true","data-toggle":"dropdown",type:"button"},void 0,(0,o.Z)("span",{className:"material-icon"},void 0,2===(r=i.notifications)?"mail":1===r?"notifications_active":"notifications_none"),function(e){return e?pgettext("watch thread","Watching"):pgettext("watch thread","Watch")}(i.notifications)),(0,o.Z)("ul",{className:ss()("dropdown-menu dropdown-menu-right",{"stick-to-bottom":n})},void 0,(0,o.Z)(rs.iC,{},void 0,pgettext("watch thread","Notify about new replies")),(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",disabled:l,onClick:function(){return c(2)}},void 0,ts||(ts=(0,o.Z)("span",{className:"material-icon"},void 0,"mail")),pgettext("watch thread","On site and with e-mail"))),(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",disabled:l,onClick:function(){return c(1)}},void 0,as||(as=(0,o.Z)("span",{className:"material-icon"},void 0,"notifications_active")),pgettext("watch thread","On site only"))),(0,o.Z)("li",{},void 0,(0,o.Z)("button",{className:"btn btn-link",disabled:l,onClick:function(){return c(0)}},void 0,ns||(ns=(0,o.Z)("span",{className:"material-icon"},void 0,"notifications_none")),pgettext("watch thread","Don't notify")))))}))})),cs=function(e){var t=e.children,a=e.className;return(0,o.Z)("ul",{className:ss()("breadcrumbs",a)},void 0,t)},us=function(e){var t=e.category,a=e.className;return(0,o.Z)("li",{className:ss()("breadcrumbs-item",a)},void 0,(0,o.Z)("a",{href:t.url.index},void 0,(0,o.Z)("span",{className:"material-icon",style:{color:t.color||"inherit"}},void 0,"label"),!!t.short_name&&(0,o.Z)("span",{className:"breadcrumbs-item-name hidden-sm hidden-md hidden-lg",title:t.name},void 0,t.short_name),!!t.short_name&&(0,o.Z)("span",{className:"breadcrumbs-item-name hidden-xs"},void 0,t.name),!t.short_name&&(0,o.Z)("span",{className:"breadcrumbs-item-name"},void 0,t.name)))};var ds;const ps=function(e){var t=e.category,a=e.className;return(0,o.Z)("li",{className:ss()("breadcrumbs-item",a)},void 0,(0,o.Z)("a",{href:t.url.index},void 0,ds||(ds=(0,o.Z)("span",{className:"material-icon"},void 0,"chevron_right")),(0,o.Z)("span",{className:"breadcrumbs-item-name"},void 0,"root_category"===t.special_role?pgettext("breadcrumb","Threads"):pgettext("breadcrumb","Private threads"))))},hs=function(e){var t=e.breadcrumbs;return(0,o.Z)(cs,{},void 0,t.map((function(e){return e.special_role?(0,o.Z)(ps,{category:e},e.id):(0,o.Z)(us,{category:e},e.id)})))};var vs;const ms=function(e){var t=e.styleName,a=e.thread,n=e.posts,i=e.user,s=e.moderation;return(0,o.Z)(yi.sP,{},void 0,(0,o.Z)(yi.mr,{styleName:t},void 0,(0,o.Z)(yi.gC,{styleName:t},void 0,(0,o.Z)(hs,{breadcrumbs:a.path}),(0,o.Z)("h1",{},void 0,a.title)),(0,o.Z)(yi.eA,{className:"page-header-thread-details"},void 0,(0,o.Z)(vi.gq,{},void 0,(0,o.Z)(vi.kw,{auto:!0},void 0,(0,o.Z)(vi.Z6,{shrink:!0},void 0,(0,o.Z)(Zi,{thread:a})),vs||(vs=(0,o.Z)(vi.Z6,{auto:!0})),a.replies>0&&(0,o.Z)(vi.Z6,{shrink:!0},void 0,(0,o.Z)(fi.Z,{thread:a})),function(e){return e.is_closed||e.is_hidden||e.is_unapproved||e.weight>0||e.best_answer||e.has_poll||e.has_unapproved_posts}(a)&&(0,o.Z)(vi.Z6,{shrink:!0},void 0,(0,o.Z)(mi.Z,{thread:a}))),i.is_authenticated&&(0,o.Z)(vi.kw,{},void 0,(0,o.Z)(vi.Z6,{},void 0,(0,o.Z)(ls,{thread:a})),s.enabled&&(0,o.Z)(vi.Z6,{shrink:!0},void 0,(0,o.Z)(es,{thread:a,posts:n,moderation:s})))))))};var fs,Zs,gs,bs,ys,_s,Ns,ks,xs=a(92490),ws=a(69987);function Cs(){window.scrollTo(0,0)}var Rs=(0,ws.EN)((function(e){var t=e.router,a=e.baseUrl,n=e.posts,i=e.scrollToTop;return(0,o.Z)("div",{className:"thread-paginator"},void 0,n.isLoaded&&n.first?(0,o.Z)(ws.rU,{className:"btn btn-default btn-outline btn-icon",to:a,title:pgettext("paginator","Go to first page"),onClick:i?Cs:null},void 0,fs||(fs=(0,o.Z)("span",{className:"material-icon"},void 0,"first_page"))):(0,o.Z)("button",{className:"btn btn-default btn-outline btn-icon",title:pgettext("paginator","Go to first page"),type:"button",disabled:!0},void 0,Zs||(Zs=(0,o.Z)("span",{className:"material-icon"},void 0,"first_page"))),n.isLoaded&&n.previous?(0,o.Z)(ws.rU,{className:"btn btn-default btn-outline btn-icon",to:a+(n.previous>1?n.previous+"/":""),title:pgettext("paginator","Go to previous page"),onClick:i?Cs:null},void 0,gs||(gs=(0,o.Z)("span",{className:"material-icon"},void 0,"chevron_left"))):(0,o.Z)("button",{className:"btn btn-default btn-outline btn-icon",title:pgettext("paginator","Go to previous page"),type:"button",disabled:!0},void 0,bs||(bs=(0,o.Z)("span",{className:"material-icon"},void 0,"chevron_left"))),(0,o.Z)(rs.Lt,{toggle:function(e){var t,a,i=e.aria,s=e.toggle;return m().createElement("button",(0,f.Z)({},i,{className:"btn btn-default btn-block btn-outline",type:"button",disabled:!n.isLoaded,onClick:s}),(t=n.page,a=n.pages,pgettext("paginator","Page %(page)s of %(pages)s").replace("%(page)s",t).replace("%(pages)s",a)))},onOpen:function(e){e.querySelector("input").focus()}},void 0,(function(e){var s=e.close;return(0,o.Z)("form",{className:"thread-paginator-form",onSubmit:function(e){if(n.isLoaded){var o=new FormData(e.target),r=parseInt(o.get("page"));if(r&&r!=n.page&&r>=1&&r<=n.pages){var l=r>1?a+r+"/":a;t.push({pathname:l})}}e.preventDefault(),s(),i&&Cs()}},void 0,(0,o.Z)("input",{className:"form-control",name:"page",type:"number",min:1,max:n.pages,placeholder:pgettext("paginator input","Page"),disabled:!n.isLoaded}),(0,o.Z)("button",{className:"btn btn-primary",type:"submit",disabled:!n.isLoaded},void 0,pgettext("paginator","Go")))})),n.isLoaded&&n.next?(0,o.Z)(ws.rU,{className:"btn btn-default btn-outline btn-icon",to:a+n.next+"/",title:pgettext("paginator","Go to next page"),onClick:i?Cs:null},void 0,ys||(ys=(0,o.Z)("span",{className:"material-icon"},void 0,"chevron_right"))):(0,o.Z)("button",{className:"btn btn-default btn-outline btn-icon",title:pgettext("paginator","Go to next page"),type:"button",disabled:!0},void 0,_s||(_s=(0,o.Z)("span",{className:"material-icon"},void 0,"chevron_right"))),n.isLoaded&&n.last?(0,o.Z)(ws.rU,{className:"btn btn-default btn-outline btn-icon",to:a+n.last+"/",title:pgettext("paginator","Go to last page"),onClick:i?Cs:null},void 0,Ns||(Ns=(0,o.Z)("span",{className:"material-icon"},void 0,"last_page"))):(0,o.Z)("button",{className:"btn btn-default btn-outline btn-icon",title:pgettext("paginator","Go to last page"),type:"button",disabled:!0},void 0,ks||(ks=(0,o.Z)("span",{className:"material-icon"},void 0,"last_page"))))}));const Es=Rs;var Ss,Os,Ts;function Ps(e){var t=e.errors,a=e.posts;return(0,o.Z)("div",{className:"modal-dialog",role:"document"},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,(0,o.Z)("div",{className:"modal-header"},void 0,(0,o.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,Ss||(Ss=(0,o.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,o.Z)("h4",{className:"modal-title"},void 0,pgettext("thread posts moderation modal title","Moderation"))),(0,o.Z)("div",{className:"modal-body"},void 0,(0,o.Z)("p",{className:"lead"},void 0,pgettext("thread posts moderation modal","One or more posts could not be changed:")),(0,o.Z)("ul",{className:"list-unstyled list-errored-items"},void 0,t.map((function(e){return(0,o.Z)(Ls,{errors:e.detail,post:a[e.id]},e.id)}))))))}function Ls(e){var t=e.errors,a=e.post,n=interpolate(pgettext("thread posts moderation modal","%(username)s on %(posted_on)s"),{posted_on:a.posted_on.format("LL, LT"),username:a.poster_name},!0);return(0,o.Z)("li",{},void 0,(0,o.Z)("h5",{},void 0,n,":"),t.map((function(e,t){return(0,o.Z)("p",{},t,e)})))}function As(e){var t=e.selection,a=t.map((function(e){return{id:e.id,is_unapproved:!1}})),n=t.map((function(e){return{id:e.id,is_unapproved:e.is_unapproved}}));zs(e,[{op:"replace",path:"is-unapproved",value:!1}],a,n)}function Is(e){var t=e.selection,a=t.map((function(e){return{id:e.id,is_protected:!0}})),n=t.map((function(e){return{id:e.id,is_protected:e.is_protected}}));zs(e,[{op:"replace",path:"is-protected",value:!0}],a,n)}function Bs(e){var t=e.selection,a=t.map((function(e){return{id:e.id,is_protected:!1}})),n=t.map((function(e){return{id:e.id,is_protected:e.is_protected}}));zs(e,[{op:"replace",path:"is-protected",value:!1}],a,n)}function js(e){var t=e.selection,a=t.map((function(t){return{id:t.id,is_hidden:!0,hidden_on:F()(),hidden_by_name:e.user.username,url:Object.assign(t.url,{hidden_by:e.user.url})}})),n=t.map((function(e){return{id:e.id,is_hidden:e.is_hidden,hidden_on:e.hidden_on,hidden_by_name:e.hidden_by_name,url:e.url}}));zs(e,[{op:"replace",path:"is-hidden",value:!0}],a,n)}function Ds(e){var t=e.selection,a=t.map((function(t){return{id:t.id,is_hidden:!1,hidden_on:F()(),hidden_by_name:e.user.username,url:Object.assign(t.url,{hidden_by:e.user.url})}})),n=t.map((function(e){return{id:e.id,is_hidden:e.is_hidden,hidden_on:e.hidden_on,hidden_by_name:e.hidden_by_name,url:e.url}}));zs(e,[{op:"replace",path:"is-hidden",value:!1}],a,n)}function zs(e,t,a,n){var i=e.selection,s=e.thread;a.forEach((function(e){Ge.r$(e,e)})),x.Z.dispatch(Bn.kR());var r={ops:t,ids:i.map((function(e){return e.id}))};_.Z.patch(s.api.posts.index,r).then((function(e){e.forEach((function(e){x.Z.dispatch(Ge.r$(e,e))}))}),(function(e){if(400!==e.status)return n.forEach((function(e){x.Z.dispatch(Ge.r$(e,e))})),k.Z.apiError(e);var t=[],a=[];e.forEach((function(e){e.detail?(t.push(e),a.push(e.id)):x.Z.dispatch(Ge.r$(e,e)),n.forEach((function(e){-1!==a.indexOf(e)&&x.Z.dispatch(Ge.r$(e,e))}))}));var s={};i.forEach((function(e){s[e.id]=e})),N.Z.show((0,o.Z)(Ps,{errors:t,posts:s}))}))}function Us(e){window.confirm(pgettext("merge posts","Are you sure you want to merge selected posts? This action is not reversible!"))&&(e.selection.slice(1).map((function(e){x.Z.dispatch(Ge.r$(e,{isDeleted:!0}))})),_.Z.post(e.thread.api.posts.merge,{posts:e.selection.map((function(e){return e.id}))}).then((function(e){x.Z.dispatch(Ge.r$(e,Ge.ZB(e)))}),(function(t){400===t.status?k.Z.error(t.detail):k.Z.apiError(t),e.selection.slice(1).map((function(e){x.Z.dispatch(Ge.r$(e,{isDeleted:!1}))}))})),x.Z.dispatch(Bn.kR()))}function Ms(e){if(window.confirm(pgettext("delete posts","Are you sure you want to delete selected posts? This action is not reversible!"))){e.selection.map((function(e){x.Z.dispatch(Ge.r$(e,{isDeleted:!0}))}));var t=e.selection.map((function(e){return e.id}));_.Z.delete(e.thread.api.posts.index,t).then((function(){}),(function(t){400===t.status?k.Z.error(t.detail):k.Z.apiError(t),e.selection.map((function(e){x.Z.dispatch(Ge.r$(e,{isDeleted:!1}))}))})),x.Z.dispatch(Bn.kR())}}var qs,Fs,Hs,Ys,Vs,Gs,$s=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,r.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"onUrlChange",(function(e){t.changeValue("url",e.target.value)})),t.state={isLoading:!1,url:"",validators:{url:[]},errors:{}},t}return(0,l.Z)(i,[{key:"clean",value:function(){return!!this.state.url.trim().length||(k.Z.error(pgettext("thread posts moderation move","You have to enter link to the other thread.")),!1)}},{key:"send",value:function(){return _.Z.post(this.props.thread.api.posts.move,{new_thread:this.state.url,posts:this.props.selection.map((function(e){return e.id}))})}},{key:"handleSuccess",value:function(e){this.props.selection.forEach((function(e){x.Z.dispatch(Ge.r$(e,{isDeleted:!0}))})),N.Z.hide(),k.Z.success(pgettext("thread posts moderation move","Selected posts were moved to the other thread."))}},{key:"handleError",value:function(e){400===e.status?k.Z.error(e.detail):k.Z.apiError(e)}},{key:"render",value:function(){return(0,o.Z)("div",{className:"modal-dialog",role:"document"},void 0,(0,o.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,Os||(Os=(0,o.Z)(Ws,{})),(0,o.Z)("div",{className:"modal-body"},void 0,(0,o.Z)(g.Z,{for:"id_url",label:pgettext("thread posts moderation move","Link to thread you want to move posts to")},void 0,(0,o.Z)("input",{className:"form-control",disabled:this.state.isLoading,id:"id_url",onChange:this.onUrlChange,value:this.state.url}))),(0,o.Z)("div",{className:"modal-footer"},void 0,(0,o.Z)("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},void 0,pgettext("thread posts moderation move btn","Cancel")),(0,o.Z)("button",{className:"btn btn-primary",disabled:this.state.isLoading},void 0,pgettext("thread posts moderation move btn","Move posts"))))))}}]),i}(Z.Z);function Ws(e){return(0,o.Z)("div",{className:"modal-header"},void 0,(0,o.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,Ts||(Ts=(0,o.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,o.Z)("h4",{className:"modal-title"},void 0,pgettext("thread posts moderation move title","Move posts")))}function Qs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}function Xs(e){return m().createElement(ro,(0,f.Z)({},e,{Form:lo}))}var Ks,Js,eo,to,ao,no,io,so,oo,ro=function(e){(0,u.Z)(a,e);var t=Qs(a);function a(e){var n;return(0,r.Z)(this,a),(n=t.call(this,e)).state={isLoaded:!1,isError:!1,categories:[]},n}return(0,l.Z)(a,[{key:"componentDidMount",value:function(){var e=this;_.Z.get(misago.get("THREAD_EDITOR_API")).then((function(t){var a=t.map((function(e){return Object.assign(e,{disabled:!1===e.post,label:e.name,value:e.id,post:e.post})}));e.setState({isLoaded:!0,categories:a})}),(function(t){e.setState({isError:t.detail})}))}},{key:"render",value:function(){return this.state.isError?(0,o.Z)(uo,{message:this.state.isError}):this.state.isLoaded?m().createElement(lo,(0,f.Z)({},this.props,{categories:this.state.categories})):qs||(qs=(0,o.Z)(co,{}))}}]),a}(m().Component),lo=function(e){(0,u.Z)(a,e);var t=Qs(a);function a(e){var n;return(0,r.Z)(this,a),n=t.call(this,e),(0,h.Z)((0,c.Z)(n),"onCategoryChange",(function(e){var t=e.target.value,a={category:t};n.acl[t].can_pin_threads<a.weight&&(a.weight=0),n.acl[t].can_hide_threads||(a.is_hidden=0),n.acl[t].can_close_threads||(a.is_closed=!1),n.setState(a)})),n.state={isLoading:!1,title:"",category:null,categories:e.categories,weight:0,is_hidden:0,is_closed:!1,validators:{title:[Xa.C1()]},errors:{}},n.isHiddenChoices=[{value:0,icon:"visibility",label:pgettext("thread hidden switch choice","No")},{value:1,icon:"visibility_off",label:pgettext("thread hidden switch choice","Yes")}],n.isClosedChoices=[{value:!1,icon:"lock_outline",label:pgettext("thread closed switch choice","No")},{value:!0,icon:"lock",label:pgettext("thread closed switch choice","Yes")}],n.acl={},n.props.categories.forEach((function(e){e.post&&(n.state.category||(n.state.category=e.id),n.acl[e.id]={can_pin_threads:e.post.pin,can_close_threads:e.post.close,can_hide_threads:e.post.hide})})),n}return(0,l.Z)(a,[{key:"clean",value:function(){return!!this.isValid()||(k.Z.error(gettext("Form contains errors.")),this.setState({errors:this.validate()}),!1)}},{key:"send",value:function(){return _.Z.post(this.props.thread.api.posts.split,{title:this.state.title,category:this.state.category,weight:this.state.weight,is_hidden:this.state.is_hidden,is_closed:this.state.is_closed,posts:this.props.selection.map((function(e){return e.id}))})}},{key:"handleSuccess",value:function(e){this.props.selection.forEach((function(e){x.Z.dispatch(Ge.r$(e,{isDeleted:!0}))})),N.Z.hide(),k.Z.success(pgettext("posts moderation split","Selected posts were split into new thread."))}},{key:"handleError",value:function(e){400===e.status?(this.setState({errors:Object.assign({},this.state.errors,e)}),k.Z.error(gettext("Form contains errors."))):403===e.status&&Array.isArray(e)?N.Z.show((0,o.Z)(Ps,{errors:e})):k.Z.apiError(e)}},{key:"getWeightChoices",value:function(){var e=[{value:0,icon:"remove",label:pgettext("thread weight choice","Not pinned")},{value:1,icon:"bookmark_border",label:pgettext("thread weight choice","Pinned in category")}];return 2==this.acl[this.state.category].can_pin_threads&&e.push({value:2,icon:"bookmark",label:pgettext("thread weight choice","Pinned globally")}),e}},{key:"renderWeightField",value:function(){return this.acl[this.state.category].can_pin_threads?(0,o.Z)(g.Z,{label:pgettext("posts moderation split field","Thread weight"),for:"id_weight",labelClass:"col-sm-4",controlClass:"col-sm-8"},void 0,(0,o.Z)(Qa.Z,{id:"id_weight",onChange:this.bindInput("weight"),value:this.state.weight,choices:this.getWeightChoices()})):null}},{key:"renderHiddenField",value:function(){return this.acl[this.state.category].can_hide_threads?(0,o.Z)(g.Z,{label:pgettext("posts moderation split field","Hide thread"),for:"id_is_hidden",labelClass:"col-sm-4",controlClass:"col-sm-8"},void 0,(0,o.Z)(Qa.Z,{id:"id_is_closed",onChange:this.bindInput("is_hidden"),value:this.state.is_hidden,choices:this.isHiddenChoices})):null}},{key:"renderClosedField",value:function(){return this.acl[this.state.category].can_close_threads?(0,o.Z)(g.Z,{label:pgettext("posts moderation split field","Close thread"),for:"id_is_closed",labelClass:"col-sm-4",controlClass:"col-sm-8"},void 0,(0,o.Z)(Qa.Z,{id:"id_is_closed",onChange:this.bindInput("is_closed"),value:this.state.is_closed,choices:this.isClosedChoices})):null}},{key:"render",value:function(){return(0,o.Z)(po,{className:"modal-dialog"},void 0,(0,o.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,o.Z)("div",{className:"modal-body"},void 0,(0,o.Z)(g.Z,{label:pgettext("posts moderation split field","Thread title"),for:"id_title",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.title},void 0,(0,o.Z)("input",{id:"id_title",className:"form-control",type:"text",onChange:this.bindInput("title"),value:this.state.title})),Fs||(Fs=(0,o.Z)("div",{className:"clearfix"})),(0,o.Z)(g.Z,{label:pgettext("posts moderation split field","Category"),for:"id_category",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.category},void 0,(0,o.Z)(Wa.Z,{id:"id_category",onChange:this.onCategoryChange,value:this.state.category,choices:this.state.categories})),Hs||(Hs=(0,o.Z)("div",{className:"clearfix"})),this.renderWeightField(),this.renderHiddenField(),this.renderClosedField()),(0,o.Z)("div",{className:"modal-footer"},void 0,(0,o.Z)("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},void 0,pgettext("posts moderation split btn","Cancel")),(0,o.Z)(Ae.Z,{className:"btn-primary",loading:this.state.isLoading},void 0,pgettext("posts moderation split btn","Split posts")))))}}]),a}(Z.Z);function co(){return Ys||(Ys=(0,o.Z)(po,{className:"modal-dialog"},void 0,(0,o.Z)(J.Z,{})))}function uo(e){return(0,o.Z)(po,{className:"modal-dialog modal-message"},void 0,Vs||(Vs=(0,o.Z)("div",{className:"message-icon"},void 0,(0,o.Z)("span",{className:"material-icon"},void 0,"info_outline"))),(0,o.Z)("div",{className:"message-body"},void 0,(0,o.Z)("p",{className:"lead"},void 0,pgettext("posts moderation split","You can't move selected posts at the moment.")),(0,o.Z)("p",{},void 0,e.message),(0,o.Z)("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},void 0,pgettext("posts moderation split dismiss btn","Ok"))))}function po(e){return(0,o.Z)("div",{className:e.className,role:"document"},void 0,(0,o.Z)("div",{className:"modal-content"},void 0,(0,o.Z)("div",{className:"modal-header"},void 0,(0,o.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,Gs||(Gs=(0,o.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,o.Z)("h4",{className:"modal-title"},void 0,pgettext("posts moderation split title","Split posts into new thread"))),e.children))}function ho(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.Z)(e);if(t){var i=(0,p.Z)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}function vo(e){return(0,o.Z)("ul",{className:"dropdown-menu dropdown-menu-right stick-to-bottom"},void 0,m().createElement(fo,e),m().createElement(Zo,e),m().createElement(go,e),m().createElement(bo,e),m().createElement(yo,e),m().createElement(_o,e),m().createElement(ko,e),m().createElement(No,e),m().createElement(xo,e))}var mo,fo=function(e){(0,u.Z)(a,e);var t=ho(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){As(e.props)})),e}return(0,l.Z)(a,[{key:"render",value:function(){var e=this.props.selection.find((function(e){return e.acl.can_approve&&e.is_unapproved}));return e?(0,o.Z)("li",{},void 0,(0,o.Z)("button",{type:"button",className:"btn btn-link",onClick:this.onClick},void 0,Ks||(Ks=(0,o.Z)("span",{className:"material-icon"},void 0,"done")),pgettext("thread posts moderation","Approve"))):null}}]),a}(m().Component),Zo=function(e){(0,u.Z)(a,e);var t=ho(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){Us(e.props)})),e}return(0,l.Z)(a,[{key:"render",value:function(){var e=this.props.selection.length>1&&this.props.selection.find((function(e){return e.acl.can_merge}));return e?(0,o.Z)("li",{},void 0,(0,o.Z)("button",{type:"button",className:"btn btn-link",onClick:this.onClick},void 0,Js||(Js=(0,o.Z)("span",{className:"material-icon"},void 0,"call_merge")),pgettext("thread posts moderation","Merge"))):null}}]),a}(m().Component),go=function(e){(0,u.Z)(a,e);var t=ho(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){N.Z.show(m().createElement($s,e.props))})),e}return(0,l.Z)(a,[{key:"render",value:function(){var e=this.props.selection.find((function(e){return e.acl.can_move}));return e?(0,o.Z)("li",{},void 0,(0,o.Z)("button",{type:"button",className:"btn btn-link",onClick:this.onClick},void 0,eo||(eo=(0,o.Z)("span",{className:"material-icon"},void 0,"arrow_forward")),pgettext("thread posts moderation","Move"))):null}}]),a}(m().Component),bo=function(e){(0,u.Z)(a,e);var t=ho(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){N.Z.show(m().createElement(Xs,e.props))})),e}return(0,l.Z)(a,[{key:"render",value:function(){var e=this.props.selection.find((function(e){return e.acl.can_move}));return e?(0,o.Z)("li",{},void 0,(0,o.Z)("button",{type:"button",className:"btn btn-link",onClick:this.onClick},void 0,to||(to=(0,o.Z)("span",{className:"material-icon"},void 0,"call_split")),pgettext("thread posts moderation","Split"))):null}}]),a}(m().Component),yo=function(e){(0,u.Z)(a,e);var t=ho(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){Is(e.props)})),e}return(0,l.Z)(a,[{key:"render",value:function(){var e=this.props.selection.find((function(e){return!e.is_protected&&e.acl.can_protect}));return e?(0,o.Z)("li",{},void 0,(0,o.Z)("button",{type:"button",className:"btn btn-link",onClick:this.onClick},void 0,ao||(ao=(0,o.Z)("span",{className:"material-icon"},void 0,"lock_outline")),pgettext("thread posts moderation","Protect"))):null}}]),a}(m().Component),_o=function(e){(0,u.Z)(a,e);var t=ho(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){Bs(e.props)})),e}return(0,l.Z)(a,[{key:"render",value:function(){var e=this.props.selection.find((function(e){return e.is_protected&&e.acl.can_protect}));return e?(0,o.Z)("li",{},void 0,(0,o.Z)("button",{type:"button",className:"btn btn-link",onClick:this.onClick},void 0,no||(no=(0,o.Z)("span",{className:"material-icon"},void 0,"lock_open")),pgettext("thread posts moderation","Unprotect"))):null}}]),a}(m().Component),No=function(e){(0,u.Z)(a,e);var t=ho(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){js(e.props)})),e}return(0,l.Z)(a,[{key:"render",value:function(){var e=this.props.selection.find((function(e){return e.acl.can_hide&&!e.is_hidden}));return e?(0,o.Z)("li",{},void 0,(0,o.Z)("button",{type:"button",className:"btn btn-link",onClick:this.onClick},void 0,io||(io=(0,o.Z)("span",{className:"material-icon"},void 0,"visibility_off")),pgettext("thread posts moderation","Hide"))):null}}]),a}(m().Component),ko=function(e){(0,u.Z)(a,e);var t=ho(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){Ds(e.props)})),e}return(0,l.Z)(a,[{key:"render",value:function(){var e=this.props.selection.find((function(e){return e.acl.can_unhide&&e.is_hidden}));return e?(0,o.Z)("li",{},void 0,(0,o.Z)("button",{type:"button",className:"btn btn-link",onClick:this.onClick},void 0,so||(so=(0,o.Z)("span",{className:"material-icon"},void 0,"visibility")),pgettext("thread posts moderation","Unhide"))):null}}]),a}(m().Component),xo=function(e){(0,u.Z)(a,e);var t=ho(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,c.Z)(e),"onClick",(function(){Ms(e.props)})),e}return(0,l.Z)(a,[{key:"render",value:function(){var e=this.props.selection.find((function(e){return e.acl.can_delete}));return e?(0,o.Z)("li",{},void 0,(0,o.Z)("button",{type:"button",className:"btn btn-link",onClick:this.onClick},void 0,oo||(oo=(0,o.Z)("span",{className:"material-icon"},void 0,"clear")),pgettext("thread posts moderation","Delete"))):null}}]),a}(m().Component);const wo=function(e){var t=e.thread,a=e.user,n=e.selection,i=e.dropup;return(0,o.Z)("div",{className:i?"dropup":"dropdown"},void 0,(0,o.Z)("button",{type:"button",className:"btn btn-default btn-outline btn-icon dropdown-toggle",title:pgettext("post options btn","Posts options"),"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:0===n.length},void 0,mo||(mo=(0,o.Z)("span",{className:"material-icon"},void 0,"settings"))),(0,o.Z)(vo,{thread:t,user:a,selection:n}))};var Co;const Ro=function(e){var t=e.onClick;return(0,o.Z)("button",{className:"btn btn-primary btn-outline btn-block",type:"button",onClick:t},void 0,Co||(Co=(0,o.Z)("span",{className:"material-icon"},void 0,"chat")),pgettext("thread reply btn","Reply"))};var Eo;const So=function(e){var t=e.thread,a=e.posts,n=e.user,i=e.selection,s=e.moderation,r=e.onReply;return(0,o.Z)(xs.o8,{},void 0,a.pages>1&&(0,o.Z)(xs.Z2,{},void 0,(0,o.Z)(xs.Eg,{},void 0,(0,o.Z)(Es,{baseUrl:t.url.index,posts:a,scrollToTop:!0}))),Eo||(Eo=(0,o.Z)(xs.tw,{})),n.is_authenticated&&(0,o.Z)(xs.Z2,{},void 0,(0,o.Z)(xs.Eg,{className:"hidden-xs"},void 0,(0,o.Z)(ls,{thread:t,dropup:!0})),t.acl.can_reply&&(0,o.Z)(xs.Eg,{},void 0,(0,o.Z)(Ro,{onClick:r})),s.enabled&&(0,o.Z)(xs.Eg,{shrink:!0},void 0,(0,o.Z)(wo,{thread:t,user:n,selection:i,dropup:!0}))),n.is_authenticated&&(0,o.Z)(xs.Z2,{className:"hidden-sm hidden-md hidden-lg"},void 0,(0,o.Z)(xs.Eg,{},void 0,(0,o.Z)(ls,{thread:t,dropup:!0}))))};var Oo,To;const Po=function(){return(0,o.Z)(xs.o8,{className:"thread-toolbar-third"},void 0,Oo||(Oo=(0,o.Z)(xs.tw,{})),(0,o.Z)(xs.Z2,{},void 0,(0,o.Z)(xs.Eg,{},void 0,(0,o.Z)("button",{className:"btn btn-muted btn-block",type:"button",onClick:function(){return window.scrollTo(0,0)}},void 0,To||(To=(0,o.Z)("span",{className:"material-icon"},void 0,"arrow_upward")),pgettext("go up","Go to top")))))};var Lo;const Ao=function(e){var t=e.compact,a=e.disabled,n=e.onClick;return(0,o.Z)("button",{className:ss()("btn btn-default btn-outline",{"btn-block":!t,"btn-icon":t}),type:"button",title:t?pgettext("thread poll btn","Add poll"):null,disabled:a,onClick:n},void 0,Lo||(Lo=(0,o.Z)("span",{className:"material-icon"},void 0,"poll")),!t&&pgettext("thread poll btn","Add poll"))};var Io,Bo,jo,Do,zo,Uo;const Mo=function(e){var t=e.user,a=e.thread,n=e.posts;return(0,o.Z)("div",{className:"dropdown"},void 0,(0,o.Z)("button",{className:"btn btn-default btn-outline btn-icon",title:pgettext("thread shortcuts btn","Shortcuts"),"aria-expanded":"true","aria-haspopup":"true","data-toggle":"dropdown",type:"button"},void 0,Io||(Io=(0,o.Z)("span",{className:"material-icon"},void 0,"bookmark"))),(0,o.Z)("ul",{className:"dropdown-menu"},void 0,!!n.first&&(0,o.Z)("li",{},void 0,(0,o.Z)(ws.rU,{className:"btn btn-link",href:a.url.index},void 0,Bo||(Bo=(0,o.Z)("span",{className:"material-icon"},void 0,"place")),pgettext("thread shortcut btn","Go to first post"))),t.is_authenticated&&a.is_new&&(0,o.Z)("li",{},void 0,(0,o.Z)("a",{className:"btn btn-link",href:a.url.new_post},void 0,jo||(jo=(0,o.Z)("span",{className:"material-icon"},void 0,"comment")),pgettext("thread shortcut btn","Go to new post"))),a.best_answer&&(0,o.Z)("li",{},void 0,(0,o.Z)("a",{className:"btn btn-link",href:a.url.best_answer},void 0,Do||(Do=(0,o.Z)("span",{className:"material-icon"},void 0,"check_circle")),pgettext("thread shortcut btn","Go to best answer"))),a.has_unapproved_posts&&a.acl.can_approve&&(0,o.Z)("li",{},void 0,(0,o.Z)("a",{className:"btn btn-link",href:a.url.unapproved_post},void 0,zo||(zo=(0,o.Z)("span",{className:"material-icon"},void 0,"visibility")),pgettext("thread shortcut btn","Go to unapproved post"))),(0,o.Z)("li",{},void 0,(0,o.Z)("a",{className:"btn btn-link",href:a.url.last_post},void 0,Uo||(Uo=(0,o.Z)("span",{className:"material-icon"},void 0,"reply")),pgettext("thread shortcut btn","Go to last post")))))};var qo;const Fo=function(e){var t=e.thread,a=e.posts,n=e.user,i=e.pollDisabled,s=e.selection,r=e.moderation,l=e.onPoll,c=e.onReply;return(0,o.Z)(xs.o8,{},void 0,(0,o.Z)(xs.Z2,{className:"hidden-xs"},void 0,(0,o.Z)(xs.Eg,{},void 0,(0,o.Z)(Mo,{posts:a,thread:t,user:n})),a.pages>1&&(0,o.Z)(xs.Eg,{},void 0,(0,o.Z)(Es,{baseUrl:t.url.index,posts:a}))),qo||(qo=(0,o.Z)(xs.tw,{})),t.acl.can_start_poll&&!t.poll&&(0,o.Z)(xs.Z2,{className:"hidden-xs"},void 0,(0,o.Z)(xs.Eg,{},void 0,(0,o.Z)(Ao,{disabled:i,onClick:l}))),t.acl.can_reply?(0,o.Z)(xs.Z2,{},void 0,(0,o.Z)(xs.Eg,{className:"hidden-sm hidden-md hidden-lg",shrink:!0},void 0,(0,o.Z)(Mo,{posts:a,thread:t,user:n})),(0,o.Z)(xs.Eg,{},void 0,(0,o.Z)(Ro,{onClick:c})),t.acl.can_start_poll&&!t.poll&&(0,o.Z)(xs.Eg,{className:"hidden-sm hidden-md hidden-lg",shrink:!0},void 0,(0,o.Z)(Ao,{disabled:i,onClick:l,compact:!0})),r.enabled&&(0,o.Z)(xs.Eg,{className:"hidden-xs",shrink:!0},void 0,(0,o.Z)(wo,{thread:t,user:n,selection:s}))):(0,o.Z)(xs.Z2,{},void 0,(0,o.Z)(xs.Eg,{className:"hidden-sm hidden-md hidden-lg",shrink:!0},void 0,(0,o.Z)(Mo,{posts:a,thread:t,user:n})),t.acl.can_start_poll&&!t.poll&&(0,o.Z)(xs.Eg,{},void 0,(0,o.Z)(Ao,{disabled:i,onClick:l})),r.enabled&&(0,o.Z)(xs.Eg,{shrink:!0},void 0,(0,o.Z)(wo,{thread:t,user:n,selection:s}))),a.pages>1&&(0,o.Z)(xs.Z2,{className:"hidden-sm hidden-md hidden-lg"},void 0,(0,o.Z)(xs.Eg,{},void 0,(0,o.Z)(Es,{baseUrl:t.url.index,posts:a}))))};var Ho;var Yo=function(e){(0,u.Z)(i,e);var t,a,n=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(a){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,r.Z)(this,i),t=n.call(this,e),(0,h.Z)((0,c.Z)(t),"update",(function(e){x.Z.dispatch(y.gx(e)),x.Z.dispatch(Bn.zD(e.post_set)),e.participants&&x.Z.dispatch(b.gx(e.participants)),e.poll&&x.Z.dispatch(le.gx(e.poll)),t.setPageTitle()})),(0,h.Z)((0,c.Z)(t),"openPollForm",(function(){t.setState({editPoll:!0})})),(0,h.Z)((0,c.Z)(t),"closePollForm",(function(){t.setState({editPoll:!1})})),(0,h.Z)((0,c.Z)(t),"openReplyForm",(function(){ce.Z.open({mode:"REPLY",thread:t.props.thread,config:t.props.thread.api.editor,submit:t.props.thread.api.posts.index})})),t.state={editPoll:!1},t}return(0,l.Z)(i,[{key:"componentDidMount",value:function(){this.shouldFetchData()&&(this.fetchData(),this.setPageTitle()),this.startPollingApi()}},{key:"componentDidUpdate",value:function(){this.shouldFetchData()&&(this.fetchData(),this.startPollingApi(),this.setPageTitle())}},{key:"componentWillUnmount",value:function(){this.stopPollingApi()}},{key:"shouldFetchData",value:function(){return!!this.props.posts.isLoaded&&1*(this.props.params.page||1)!=this.props.posts.page}},{key:"fetchData",value:function(){var e=this;x.Z.dispatch(Bn.Rz()),_.Z.get(this.props.thread.api.posts.index,{page:this.props.params.page||1},"posts").then((function(t){e.update(t)}),(function(e){k.Z.apiError(e)}))}},{key:"startPollingApi",value:function(){ui.Z.start({poll:"thread-posts",url:this.props.thread.api.posts.index,data:{page:this.props.params.page||1},update:this.update,frequency:12e4,delayed:!0})}},{key:"stopPollingApi",value:function(){ui.Z.stop("thread-posts")}},{key:"setPageTitle",value:function(){di.Z.set({title:this.props.thread.title,parent:this.props.thread.category.name,page:1*(this.props.params.page||1)})}},{key:"render",value:function(){var e=this.props.thread.category,t="page page-thread";e.css_class&&(t+=" page-thread-"+e.css_class);var a="private_threads"===e.special_role?"private-threads":e.css_class||"category-threads",n=Vo(this.props.thread,this.props.user),i=Go(this.props.posts.results,this.props.user),s=this.props.posts.results.filter((function(e){return e.isSelected}));return(0,o.Z)("div",{className:t},void 0,(0,o.Z)(ms,{styleName:a,thread:this.props.thread,posts:this.props.posts,user:this.props.user,moderation:n}),(0,o.Z)(hi.Z,{},void 0,(0,o.Z)(z,{participants:this.props.participants,thread:this.props.thread,user:this.props.user}),(0,o.Z)(Fo,{thread:this.props.thread,posts:this.props.posts,user:this.props.user,selection:s,moderation:i,pollDisabled:this.state.editPoll,onPoll:this.openPollForm,onReply:this.openReplyForm}),this.state.editPoll?(0,o.Z)(Fe,{poll:this.props.poll,thread:this.props.thread,close:this.closePollForm}):(0,o.Z)(je,{poll:this.props.poll,thread:this.props.thread,user:this.props.user,edit:this.openPollForm}),this.props.thread.acl.can_reply?(0,o.Z)(pi.mv,{posting:{mode:"REPLY",thread:this.props.thread,config:this.props.thread.api.editor,submit:this.props.thread.api.posts.index}},void 0,m().createElement(ri,this.props)):m().createElement(ri,this.props),(0,o.Z)(So,{thread:this.props.thread,posts:this.props.posts,user:this.props.user,selection:s,moderation:i,onReply:this.openReplyForm}),Ho||(Ho=(0,o.Z)(Po,{}))))}}]),i}(m().Component),Vo=function(e,t){var a={enabled:!1,edit:!1,approve:!1,close:!1,open:!1,hide:!1,unhide:!1,move:!1,merge:!1,pinGlobally:!1,pinLocally:!1,unpin:!1,delete:!1};return t.is_authenticated?(a.edit=e.acl.can_edit,a.approve=e.acl.can_approve&&e.is_unapproved,a.close=e.acl.can_close&&!e.is_closed,a.open=e.acl.can_close&&e.is_closed,a.hide=e.acl.can_hide&&!e.is_hidden,a.unhide=e.acl.can_unhide&&e.is_hidden,a.move=e.acl.can_move,a.merge=e.acl.can_merge,a.pinGlobally=e.acl.can_pin_globally&&e.weight<2,a.pinLocally=e.acl.can_pin&&1!==e.weight,a.unpin=e.acl.can_pin&&1===e.weight||e.acl.can_pin_globally&&2===e.weight,a.delete=e.acl.can_delete,a.enabled=a.edit||a.approve||a.close||a.open||a.hide||a.unhide||a.move||a.merge||a.pinGlobally||a.pinLocally||a.unpin||a.delete,a):a},Go=function(e,t){var a={enabled:!1,approve:!1,move:!1,merge:!1,protect:!1,hide:!1,delete:!1};return t.is_authenticated?(e.forEach((function(e){e.is_event||(e.acl.can_approve&&e.is_unapproved&&(a.approve=!0),e.acl.can_move&&(a.move=!0),e.acl.can_merge&&(a.merge=!0),(e.acl.can_protect||e.acl.can_unprotect)&&(a.protect=!0),(e.acl.can_hide||e.acl.can_unhide)&&(a.hide=!0),e.acl.can_delete&&(a.delete=!0),(a.approve||a.move||a.merge||a.protect||a.hide||a.delete)&&(a.enabled=!0))})),a):a};function $o(e){return{participants:e.participants,poll:e.poll,posts:e.posts,thread:e.thread,tick:e.tick.tick,user:e.auth.user}}var Wo=a(39633);S.Z.addInitializer({name:"component:thread",initializer:function(e){var t,a;e.has("THREAD")&&e.has("POSTS")&&(0,Wo.Z)({paths:(t=S.Z.get("THREAD"),a=t.url.index.replace(t.slug+"-"+t.pk,":slug"),[{path:a,component:(0,s.$j)($o)(Yo)},{path:a+":page/",component:(0,s.$j)($o)(Yo)}])})},after:"store"})},62419:(e,t,a)=>{"use strict";var n=a(37424),i=a(22928),s=a(15671),o=a(43144),r=a(97326),l=a(79340),c=a(6215),u=a(61120),d=a(4942),p=a(57588),h=a.n(p),v=a(82211);function m(e,t){return e.last_post>t.last_post?-1:e.last_post<t.last_post?1:0}function f(e,t){return 2===e.weight&&e.weight>t.weight?-1:2===t.weight&&e.weight<t.weight?1:m(e,t)}function Z(e,t){return e.weight>t.weight?-1:e.weight<t.weight?1:m(e,t)}var g,b=a(59131),y=a(64646),_=a(92490),N=a(69987);const k=function(e){var t=e.allItems,a=e.parentUrl,n=e.category,s=e.categories,o=e.list;return(0,i.Z)("div",{className:"dropdown threads-category-picker"},void 0,(0,i.Z)("button",{type:"button",className:"btn btn-default btn-outline dropdown-toggle btn-block text-ellipsis","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},void 0,n&&(0,i.Z)("span",{className:"material-icon",style:{color:n.color||"inherit"}},void 0,"label"),n&&n.short_name&&(0,i.Z)("span",{className:n.short_name&&"hidden-md hidden-lg"},void 0,n.short_name),n?(0,i.Z)("span",{className:n.short_name&&"hidden-xs hidden-sm"},void 0,n.name):t),(0,i.Z)("ul",{className:"dropdown-menu"},void 0,(0,i.Z)("li",{},void 0,(0,i.Z)(N.rU,{to:a+o.path},void 0,t)),g||(g=(0,i.Z)("li",{role:"separator",className:"divider"})),s.map((function(e){return(0,i.Z)("li",{},e.id,(0,i.Z)(N.rU,{to:e.url.index+o.path},void 0,(0,i.Z)("span",{className:"material-icon",style:{color:e.color||"inherit"}},void 0,"label"),e.name))}))))},x=function(e){var t=e.baseUrl,a=e.list,n=e.lists;return(0,i.Z)("div",{className:"dropdown threads-list-picker"},void 0,(0,i.Z)("button",{type:"button",className:"btn btn-default btn-outline dropdown-toggle btn-block","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},void 0,a.longName),(0,i.Z)("ul",{className:"dropdown-menu stick-to-bottom"},void 0,n.map((function(e){return(0,i.Z)("li",{},e.type,(0,i.Z)(N.rU,{to:t+e.path},void 0,e.longName))}))))};var w;var C=function(e){(0,l.Z)(r,e);var t,a,n=(t=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(a){var i=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function r(){return(0,s.Z)(this,r),n.apply(this,arguments)}return(0,o.Z)(r,[{key:"render",value:function(){return(0,i.Z)("div",{className:"modal-dialog",role:"document"},void 0,(0,i.Z)("div",{className:"modal-content"},void 0,(0,i.Z)("div",{className:"modal-header"},void 0,(0,i.Z)("button",{"aria-label":pgettext("modal","Close"),className:"close","data-dismiss":"modal",type:"button"},void 0,w||(w=(0,i.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,i.Z)("h4",{className:"modal-title"},void 0,pgettext("threads moderation title","Threads moderation"))),(0,i.Z)("div",{className:"modal-body"},void 0,(0,i.Z)("p",{className:"lead"},void 0,pgettext("threads moderation","One or more threads could not be deleted:")),(0,i.Z)("ul",{className:"list-unstyled list-errored-items"},void 0,this.props.errors.map((function(e){return(0,i.Z)(R,{errors:e.errors,thread:e.thread},e.thread.id)}))))))}}]),r}(h().Component);function R(e){var t=e.errors,a=e.thread;return(0,i.Z)("li",{},void 0,(0,i.Z)("h5",{},void 0,a.title),t.map((function(e,t){return(0,i.Z)("p",{},void 0,e)})))}var E,S,O,T,P=a(43345),L=a(96359),A=a(57026),I=a(60471),B=a(54385),j=a(61340),D=a(77751),z=a(52753),U=a(78657),M=a(59801),q=a(53904),F=a(90287),H=a(55210);var Y,V,G=function(e){(0,l.Z)(p,e);var t,a,n=(t=p,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(a){var i=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function p(e){var t;for(var a in(0,s.Z)(this,p),t=n.call(this,e),(0,d.Z)((0,r.Z)(t),"getFormdata",(function(){return{threads:t.props.threads.map((function(e){return e.id})),title:t.state.title,category:t.state.category,weight:t.state.weight,is_hidden:t.state.is_hidden,is_closed:t.state.is_closed}})),(0,d.Z)((0,r.Z)(t),"handleSuccess",(function(e){t.props.threads.forEach((function(e){t.props.freezeThread(e.id),t.props.deleteThread(e)})),F.Z.dispatch(D.YP()),t.props.addThreads([e]),F.Z.dispatch((0,j.V8)(t.props.route.category,t.props.categoriesMap)),M.Z.hide()})),(0,d.Z)((0,r.Z)(t),"handleError",(function(e){400===e.status?e.best_answers||e.polls?M.Z.show((0,i.Z)(z.ZP,{api:B.Z.get("MERGE_THREADS_API"),bestAnswers:e.best_answers,data:t.getFormdata(),polls:e.polls,onError:t.handleError,onSuccess:t.handleSuccess})):(t.setState({errors:Object.assign({},t.state.errors,e)}),q.Z.error(gettext("Form contains errors."))):403===e.status&&Array.isArray(e)?M.Z.show((0,i.Z)(C,{errors:e})):e.best_answer?q.Z.error(e.best_answer[0]):e.poll?q.Z.error(e.poll[0]):q.Z.apiError(e)})),(0,d.Z)((0,r.Z)(t),"onCategoryChange",(function(e){var a=e.target.value,n={category:a};t.acl[a].can_pin_threads<n.weight&&(n.weight=0),t.acl[a].can_hide_threads||(n.is_hidden=0),t.acl[a].can_close_threads||(n.is_closed=!1),t.setState(n)})),t.state={isLoading:!1,title:"",category:null,weight:0,is_hidden:0,is_closed:!1,validators:{title:[H.C1()]},errors:{}},t.acl={},e.user.acl.categories)if(e.user.acl.categories.hasOwnProperty(a)){var o=e.user.acl.categories[a];t.acl[o.id]=o}return t.categoryChoices=[],e.categories.forEach((function(e){if(e.level>0){var a=t.acl[e.id],n=!a.can_start_threads||e.is_closed&&!a.can_close_threads;t.categoryChoices.push({value:e.id,disabled:n,level:e.level-1,label:e.name}),n||t.state.category||(t.state.category=e.id)}})),t.isHiddenChoices=[{value:0,icon:"visibility",label:pgettext("thread hidden switch choice","No")},{value:1,icon:"visibility_off",label:pgettext("thread hidden switch choice","Yes")}],t.isClosedChoices=[{value:!1,icon:"lock_outline",label:pgettext("thread closed switch choice","No")},{value:!0,icon:"lock",label:pgettext("thread closed switch choice","Yes")}],t}return(0,o.Z)(p,[{key:"clean",value:function(){return!!this.isValid()||(q.Z.error(gettext("Form contains errors.")),this.setState({errors:this.validate()}),!1)}},{key:"send",value:function(){return U.Z.post(B.Z.get("MERGE_THREADS_API"),this.getFormdata())}},{key:"getWeightChoices",value:function(){var e=[{value:0,icon:"remove",label:pgettext("thread weight choice","Not pinned")},{value:1,icon:"bookmark_border",label:pgettext("thread weight choice","Pinned in category")}];return 2==this.acl[this.state.category].can_pin_threads&&e.push({value:2,icon:"bookmark",label:pgettext("thread weight choice","Pinned globally")}),e}},{key:"renderWeightField",value:function(){return this.acl[this.state.category].can_pin_threads?(0,i.Z)(L.Z,{label:pgettext("threads moderation merge field","Thread weight"),for:"id_weight"},void 0,(0,i.Z)(I.Z,{id:"id_weight",onChange:this.bindInput("weight"),value:this.state.weight,choices:this.getWeightChoices()})):null}},{key:"renderHiddenField",value:function(){return this.acl[this.state.category].can_hide_threads?(0,i.Z)(L.Z,{label:pgettext("threads moderation merge field","Hide thread"),for:"id_is_hidden"},void 0,(0,i.Z)(I.Z,{id:"id_is_closed",onChange:this.bindInput("is_hidden"),value:this.state.is_hidden,choices:this.isHiddenChoices})):null}},{key:"renderClosedField",value:function(){return this.acl[this.state.category].can_close_threads?(0,i.Z)(L.Z,{label:pgettext("threads moderation merge field","Close thread"),for:"id_is_closed"},void 0,(0,i.Z)(I.Z,{id:"id_is_closed",onChange:this.bindInput("is_closed"),value:this.state.is_closed,choices:this.isClosedChoices})):null}},{key:"renderForm",value:function(){return(0,i.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,i.Z)("div",{className:"modal-body"},void 0,(0,i.Z)(L.Z,{label:pgettext("threads moderation merge field","Thread title"),for:"id_title",validation:this.state.errors.title},void 0,(0,i.Z)("input",{id:"id_title",className:"form-control",type:"text",onChange:this.bindInput("title"),value:this.state.title})),E||(E=(0,i.Z)("div",{className:"clearfix"})),(0,i.Z)(L.Z,{label:pgettext("threads moderation merge field","Category"),for:"id_category",validation:this.state.errors.category},void 0,(0,i.Z)(A.Z,{id:"id_category",onChange:this.onCategoryChange,value:this.state.category,choices:this.categoryChoices})),S||(S=(0,i.Z)("div",{className:"clearfix"})),this.renderWeightField(),this.renderHiddenField(),this.renderClosedField()),(0,i.Z)("div",{className:"modal-footer"},void 0,(0,i.Z)("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},void 0,pgettext("threads moderation merge btn","Cancel")),(0,i.Z)(v.Z,{className:"btn-primary",loading:this.state.isLoading},void 0,pgettext("threads moderation merge btn","Merge threads"))))}},{key:"renderCantMergeMessage",value:function(){return(0,i.Z)("div",{className:"modal-body"},void 0,O||(O=(0,i.Z)("div",{className:"message-icon"},void 0,(0,i.Z)("span",{className:"material-icon"},void 0,"info_outline"))),(0,i.Z)("div",{className:"message-body"},void 0,(0,i.Z)("p",{className:"lead"},void 0,pgettext("threads moderation merge","You can't merge threads because there are no categories you are allowed to move them to.")),(0,i.Z)("p",{},void 0,pgettext("threads moderation merge","You need permission to start threads in category to be able to merge threads to it.")),(0,i.Z)("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},void 0,pgettext("threads moderation merge dismiss btn","Ok"))))}},{key:"getClassName",value:function(){return this.state.category?"modal-dialog":"modal-dialog modal-message"}},{key:"render",value:function(){return(0,i.Z)("div",{className:this.getClassName(),role:"document"},void 0,(0,i.Z)("div",{className:"modal-content"},void 0,(0,i.Z)("div",{className:"modal-header"},void 0,(0,i.Z)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":pgettext("modal","Close")},void 0,T||(T=(0,i.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,i.Z)("h4",{className:"modal-title"},void 0,pgettext("threads moderation merge title","Merge threads"))),this.state.category?this.renderForm():this.renderCantMergeMessage()))}}]),p}(P.Z);var $,W,Q,X,K,J,ee,te,ae,ne,ie,se,oe,re,le=function(e){(0,l.Z)(p,e);var t,a,n=(t=p,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(a){var i=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function p(e){var t;(0,s.Z)(this,p),t=n.call(this,e),(0,d.Z)((0,r.Z)(t),"handleSubmit",(function(e){e.preventDefault(),M.Z.hide(),t.props.callApi([{op:"replace",path:"category",value:t.state.category},{op:"replace",path:"flatten-categories",value:null},{op:"add",path:"acl",value:!0}],pgettext("threads moderation move","Selected threads were moved."),(function(){F.Z.dispatch((0,j.V8)(t.props.route.category,t.props.categoriesMap));var e=F.Z.getState(),a=e.threads.map((function(e){return e.id}));F.Z.dispatch(D.$6(e.selection.filter((function(e){return-1!==a.indexOf(e)}))))}))})),t.state={category:null};var a={};for(var i in e.user.acl.categories)if(e.user.acl.categories.hasOwnProperty(i)){var o=e.user.acl.categories[i];a[o.id]=o}return t.categoryChoices=[],e.categories.forEach((function(e){if(e.level>0){var n=a[e.id],i=!n.can_start_threads||e.is_closed&&!n.can_close_threads;t.categoryChoices.push({value:e.id,disabled:i,level:e.level-1,label:e.name}),i||t.state.category||(t.state.category=e.id)}})),t}return(0,o.Z)(p,[{key:"getClassName",value:function(){return this.state.category?"modal-dialog":"modal-dialog modal-message"}},{key:"renderForm",value:function(){return(0,i.Z)("form",{onSubmit:this.handleSubmit},void 0,(0,i.Z)("div",{className:"modal-body"},void 0,(0,i.Z)(L.Z,{label:pgettext("threads moderation move field","New category"),for:"id_new_category"},void 0,(0,i.Z)(A.Z,{id:"id_new_category",onChange:this.bindInput("category"),value:this.state.category,choices:this.categoryChoices}))),(0,i.Z)("div",{className:"modal-footer"},void 0,(0,i.Z)("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},void 0,pgettext("threads moderation move btn","Cancel")),(0,i.Z)("button",{className:"btn btn-primary"},void 0,pgettext("threads moderation move btn","Move threads"))))}},{key:"renderCantMoveMessage",value:function(){return(0,i.Z)("div",{className:"modal-body"},void 0,Y||(Y=(0,i.Z)("div",{className:"message-icon"},void 0,(0,i.Z)("span",{className:"material-icon"},void 0,"info_outline"))),(0,i.Z)("div",{className:"message-body"},void 0,(0,i.Z)("p",{className:"lead"},void 0,pgettext("threads moderation move","You can't move threads because there are no categories you are allowed to move them to.")),(0,i.Z)("p",{},void 0,pgettext("threads moderation move","You need permission to start threads in category to be able to move threads to it.")),(0,i.Z)("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},void 0,pgettext("threads moderation move dismiss btn","Ok"))))}},{key:"render",value:function(){return(0,i.Z)("div",{className:this.getClassName(),role:"document"},void 0,(0,i.Z)("div",{className:"modal-content"},void 0,(0,i.Z)("div",{className:"modal-header"},void 0,(0,i.Z)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":pgettext("modal","Close")},void 0,V||(V=(0,i.Z)("span",{"aria-hidden":"true"},void 0,"×"))),(0,i.Z)("h4",{className:"modal-title"},void 0,pgettext("threads moderation move title","Move threads"))),this.state.category?this.renderForm():this.renderCantMoveMessage()))}}]),p}(P.Z);var ce,ue=function(e){(0,l.Z)(p,e);var t,a,n=(t=p,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(a){var i=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function p(){var e;(0,s.Z)(this,p);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),(0,d.Z)((0,r.Z)(e),"callApi",(function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.props.threads.forEach((function(t){e.props.freezeThread(t.id)}));var s=e.props.threads.map((function(e){return e.id}));t.push({op:"add",path:"acl",value:!0}),U.Z.patch(e.props.api,{ids:s,ops:t}).then((function(t){e.props.threads.forEach((function(t){e.props.freezeThread(t.id)})),t.forEach((function(t){e.props.updateThread(t)})),q.Z.success(a),n&&n()}),(function(t){if(e.props.threads.forEach((function(t){e.props.freezeThread(t.id)})),400!==t.status)return q.Z.apiError(t);var a=[],n={};e.props.threads.forEach((function(e){n[e.id]=e})),t.forEach((function(e){var t=e.id,i=e.detail;void 0!==n[t]&&a.push({errors:i,thread:n[t]})})),M.Z.show((0,i.Z)(C,{errors:a}))}))})),(0,d.Z)((0,r.Z)(e),"pinGlobally",(function(){e.callApi([{op:"replace",path:"weight",value:2}],pgettext("threads moderation","Selected threads were pinned globally."))})),(0,d.Z)((0,r.Z)(e),"pinLocally",(function(){e.callApi([{op:"replace",path:"weight",value:1}],pgettext("threads moderation","Selected threads were pinned in category."))})),(0,d.Z)((0,r.Z)(e),"unpin",(function(){e.callApi([{op:"replace",path:"weight",value:0}],pgettext("threads moderation","Selected threads were unpinned."))})),(0,d.Z)((0,r.Z)(e),"approve",(function(){e.callApi([{op:"replace",path:"is-unapproved",value:!1}],pgettext("threads moderation","Selected threads were approved."))})),(0,d.Z)((0,r.Z)(e),"open",(function(){e.callApi([{op:"replace",path:"is-closed",value:!1}],pgettext("threads moderation","Selected threads were opened."))})),(0,d.Z)((0,r.Z)(e),"close",(function(){e.callApi([{op:"replace",path:"is-closed",value:!0}],pgettext("threads moderation","Selected threads were closed."))})),(0,d.Z)((0,r.Z)(e),"unhide",(function(){e.callApi([{op:"replace",path:"is-hidden",value:!1}],pgettext("threads moderation","Selected threads were unhidden."))})),(0,d.Z)((0,r.Z)(e),"hide",(function(){e.callApi([{op:"replace",path:"is-hidden",value:!0}],pgettext("threads moderation","Selected threads were hidden."))})),(0,d.Z)((0,r.Z)(e),"move",(function(){M.Z.show((0,i.Z)(le,{callApi:e.callApi,categories:e.props.categories,categoriesMap:e.props.categoriesMap,route:e.props.route,user:e.props.user}))})),(0,d.Z)((0,r.Z)(e),"merge",(function(){var t=[];if(e.props.threads.forEach((function(e){e.acl.can_merge||t.append({id:e.id,title:e.title,errors:[pgettext("threads moderation","You don't have permission to merge this thread with others.")]})})),e.props.threads.length<2)q.Z.info(pgettext("threads moderation","You have to select at least two threads to merge."));else{if(t.length)return void M.Z.show((0,i.Z)(C,{errors:t}));M.Z.show(h().createElement(G,e.props))}})),(0,d.Z)((0,r.Z)(e),"delete",(function(){if(window.confirm(pgettext("threads moderation","Are you sure you want to delete selected threads?"))){e.props.threads.map((function(t){e.props.freezeThread(t.id)}));var t=e.props.threads.map((function(e){return e.id}));U.Z.delete(e.props.api,t).then((function(){e.props.threads.map((function(t){e.props.freezeThread(t.id),e.props.deleteThread(t)})),q.Z.success(pgettext("threads moderation","Selected threads were deleted."))}),(function(t){if(400===t.status){var a=t.map((function(e){return e.id}));e.props.threads.map((function(t){e.props.freezeThread(t.id),-1===a.indexOf(t.id)&&e.props.deleteThread(t)})),M.Z.show((0,i.Z)(C,{errors:t}))}else q.Z.apiError(t)}))}})),e}return(0,o.Z)(p,[{key:"render",value:function(){var e=this.props,t=e.moderation,a=e.threads,n=0==this.props.selection.length;return(0,i.Z)("ul",{className:"dropdown-menu dropdown-menu-right stick-to-bottom"},void 0,(0,i.Z)("li",{},void 0,(0,i.Z)("button",{className:"btn btn-link",type:"button",onClick:function(){return F.Z.dispatch(D.$6(a.map((function(e){return e.id}))))}},void 0,$||($=(0,i.Z)("span",{className:"material-icon"},void 0,"check_box")),pgettext("threads moderation btn","Select all"))),(0,i.Z)("li",{},void 0,(0,i.Z)("button",{className:"btn btn-link",type:"button",disabled:n,onClick:function(){return F.Z.dispatch(D.YP())}},void 0,W||(W=(0,i.Z)("span",{className:"material-icon"},void 0,"check_box_outline_blank")),pgettext("threads moderation btn","Select none"))),Q||(Q=(0,i.Z)("li",{role:"separator",className:"divider"})),!!t.can_pin_globally&&(0,i.Z)("li",{},void 0,(0,i.Z)("button",{className:"btn btn-link",type:"button",disabled:n,onClick:this.pinGlobally},void 0,X||(X=(0,i.Z)("span",{className:"material-icon"},void 0,"bookmark")),pgettext("threads moderation btn","Pin threads globally"))),!!t.can_pin&&(0,i.Z)("li",{},void 0,(0,i.Z)("button",{className:"btn btn-link",type:"button",disabled:n,onClick:this.pinLocally},void 0,K||(K=(0,i.Z)("span",{className:"material-icon"},void 0,"bookmark_border")),pgettext("threads moderation btn","Pin threads in categories"))),!!t.can_pin&&(0,i.Z)("li",{},void 0,(0,i.Z)("button",{className:"btn btn-link",type:"button",disabled:n,onClick:this.unpin},void 0,J||(J=(0,i.Z)("span",{className:"material-icon"},void 0,"panorama_fish_eye")),pgettext("threads moderation btn","Unpin threads"))),!!t.can_move&&(0,i.Z)("li",{},void 0,(0,i.Z)("button",{className:"btn btn-link",type:"button",disabled:n,onClick:this.move},void 0,ee||(ee=(0,i.Z)("span",{className:"material-icon"},void 0,"arrow_forward")),pgettext("threads moderation btn","Move threads"))),!!t.can_merge&&(0,i.Z)("li",{},void 0,(0,i.Z)("button",{className:"btn btn-link",type:"button",disabled:n,onClick:this.merge},void 0,te||(te=(0,i.Z)("span",{className:"material-icon"},void 0,"call_merge")),pgettext("threads moderation btn","Merge threads"))),!!t.can_approve&&(0,i.Z)("li",{},void 0,(0,i.Z)("button",{className:"btn btn-link",type:"button",disabled:n,onClick:this.approve},void 0,ae||(ae=(0,i.Z)("span",{className:"material-icon"},void 0,"done")),pgettext("threads moderation btn","Approve threads"))),!!t.can_close&&(0,i.Z)("li",{},void 0,(0,i.Z)("button",{className:"btn btn-link",type:"button",disabled:n,onClick:this.open},void 0,ne||(ne=(0,i.Z)("span",{className:"material-icon"},void 0,"lock_open")),pgettext("threads moderation btn","Open threads"))),!!t.can_close&&(0,i.Z)("li",{},void 0,(0,i.Z)("button",{className:"btn btn-link",type:"button",disabled:n,onClick:this.close},void 0,ie||(ie=(0,i.Z)("span",{className:"material-icon"},void 0,"lock_outline")),pgettext("threads moderation btn","Close threads"))),!!t.can_unhide&&(0,i.Z)("li",{},void 0,(0,i.Z)("button",{className:"btn btn-link",type:"button",disabled:n,onClick:this.unhide},void 0,se||(se=(0,i.Z)("span",{className:"material-icon"},void 0,"visibility")),pgettext("threads moderation btn","Unhide threads"))),!!t.can_hide&&(0,i.Z)("li",{},void 0,(0,i.Z)("button",{className:"btn btn-link",type:"button",disabled:n,onClick:this.hide},void 0,oe||(oe=(0,i.Z)("span",{className:"material-icon"},void 0,"visibility_off")),pgettext("threads moderation btn","Hide threads"))),!!t.can_delete&&(0,i.Z)("li",{},void 0,(0,i.Z)("button",{className:"btn btn-link",type:"button",disabled:n,onClick:this.delete},void 0,re||(re=(0,i.Z)("span",{className:"material-icon"},void 0,"clear")),pgettext("threads moderation btn","Delete threads"))))}}]),p}(h().Component);const de=function(e){var t=e.api,a=e.categoriesMap,n=e.categories,s=e.threads,o=e.addThreads,r=e.freezeThread,l=e.updateThread,c=e.deleteThread,u=e.selection,d=e.moderation,p=e.route,h=e.user,v=e.disabled;return(0,i.Z)("div",{className:"dropdown threads-moderation"},void 0,(0,i.Z)("button",{type:"button",className:"btn btn-default btn-outline btn-icon dropdown-toggle",title:pgettext("threads list nav","Moderation"),"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:v},void 0,ce||(ce=(0,i.Z)("span",{className:"material-icon"},void 0,"settings"))),(0,i.Z)(ue,{api:t,categories:n,categoriesMap:a,threads:s,addThreads:o,freezeThread:r,updateThread:l,deleteThread:c,selection:u,moderation:d,route:p,user:h,disabled:v}))};var pe,he;const ve=function(e){var t=e.api,a=e.baseUrl,n=e.category,s=e.categories,o=e.categoriesMap,r=e.topCategory,l=e.topCategories,c=e.subCategory,u=e.subCategories,d=e.list,p=e.lists,h=e.threads,m=e.addThreads,f=e.startThread,Z=e.freezeThread,g=e.updateThread,b=e.deleteThread,N=e.selection,w=e.moderation,C=e.route,R=e.user,E=e.disabled;return(0,i.Z)(_.o8,{},void 0,l.length>0&&(0,i.Z)(_.Z2,{},void 0,(0,i.Z)(_.Eg,{},void 0,(0,i.Z)(k,{allItems:pgettext("threads list nav","All categories"),parentUrl:d.path,category:r,categories:l,list:d})),r&&u.length>0&&(0,i.Z)(_.Eg,{},void 0,(0,i.Z)(k,{allItems:pgettext("threads list nav","All subcategories"),parentUrl:r.url.index,category:c,categories:u,list:d}))),p.length>1&&(0,i.Z)(_.Z2,{className:"hidden-xs"},void 0,(0,i.Z)(_.Eg,{},void 0,(0,i.Z)(x,{baseUrl:a,list:d,lists:p}))),pe||(pe=(0,i.Z)(_.tw,{})),!!R.id&&(0,i.Z)(_.Z2,{},void 0,(0,i.Z)(_.Eg,{},void 0,(0,i.Z)(v.Z,{className:"btn-primary btn-outline btn-block",disabled:E,onClick:function(){y.Z.open(f||{mode:"START",config:misago.get("THREAD_EDITOR_API"),submit:misago.get("THREADS_API"),category:n.id})}},void 0,he||(he=(0,i.Z)("span",{className:"material-icon"},void 0,"chat")),pgettext("threads list nav","Start thread"))),!!w.allow&&(0,i.Z)(_.Eg,{shrink:!0},void 0,(0,i.Z)(de,{api:t,categories:s,categoriesMap:o,threads:h.filter((function(e){return-1!==N.indexOf(e.id)})),addThreads:m,freezeThread:Z,updateThread:g,deleteThread:b,selection:N,moderation:w,route:C,user:R,disabled:E}))))};var me=function(e){(0,l.Z)(r,e);var t,a,n=(t=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(a){var i=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function r(){return(0,s.Z)(this,r),n.apply(this,arguments)}return(0,o.Z)(r,[{key:"render",value:function(){var e=this.props.root,t=this.props.route,a=t.category,n=t.categories,s=t.categoriesMap,o=fe(e,a,s);return(0,i.Z)(b.Z,{},void 0,(0,i.Z)(ve,{api:this.props.api,baseUrl:a.url.index,category:a,categories:n,categoriesMap:s,topCategory:o,topCategories:n.filter((function(t){return t.parent===e.id})),subCategories:o?n.filter((function(e){return e.parent===o.id})):[],subCategory:2===a.level?a:null,subcategories:this.props.subcategories,list:this.props.route.list,lists:this.props.route.lists,threads:this.props.threads,addThreads:this.props.addThreads,startThread:this.props.startThread,freezeThread:this.props.freezeThread,deleteThread:this.props.deleteThread,updateThread:this.props.updateThread,selection:this.props.selection,moderation:this.props.moderation,route:this.props.route,user:this.props.user,disabled:!this.props.isLoaded||this.props.isBusy||this.props.busyThreads.length}),this.props.children)}}]),r}(h().Component),fe=function(e,t,a){return t.parent?t.parent===e.id?t:a[t.parent]:null};function Ze(e){var t={allow:!1,can_approve:0,can_close:0,can_delete:0,can_hide:0,can_merge:0,can_move:0,can_pin:0,can_pin_globally:0,can_unhide:0};return e.forEach((function(e){e.is_unapproved&&e.acl.can_approve>t.can_approve&&(t.can_approve=e.acl.can_approve),e.acl.can_close>t.can_close&&(t.can_close=e.acl.can_close),e.acl.can_delete>t.can_delete&&(t.can_delete=e.acl.can_delete),e.acl.can_hide>t.can_hide&&(t.can_hide=e.acl.can_hide),e.acl.can_merge>t.can_merge&&(t.can_merge=e.acl.can_merge),e.acl.can_move>t.can_move&&(t.can_move=e.acl.can_move),e.acl.can_pin>t.can_pin&&(t.can_pin=e.acl.can_pin),e.acl.can_pin_globally>t.can_pin_globally&&(t.can_pin_globally=e.acl.can_pin_globally),e.is_hidden&&e.acl.can_unhide>t.can_unhide&&(t.can_unhide=e.acl.can_unhide),t.allow=t.can_approve||t.can_close||t.can_delete||t.can_hide||t.can_merge||t.can_move||t.can_pin||t.can_pin_globally||t.can_unhide})),t}const ge=function(e){var t=e.category,a=e.list,n=e.message;return"all"===a.type?n?(0,i.Z)("li",{className:"list-group-item empty-message"},void 0,(0,i.Z)("p",{className:"lead"},void 0,n)):(0,i.Z)("li",{className:"list-group-item empty-message"},void 0,(0,i.Z)("p",{className:"lead"},void 0,t.special_role?pgettext("threads list empty","There are no threads on this site yet."):pgettext("threads list empty","There are no threads in this category."))):(0,i.Z)("li",{className:"list-group-item empty-message"},void 0,(0,i.Z)("p",{className:"lead"},void 0,pgettext("threads list empty","No threads matching specified criteria were found.")))};var be=a(94184),ye=a.n(be),_e=a(50366),Ne=a(16768),ke=a(16069);const xe=function(e){var t=e.thread;return(0,i.Z)("a",{href:t.url.last_post,className:"threads-list-item-last-activity"},void 0,(0,i.Z)(ke.Z,{datetime:t.last_post_on,title:pgettext("threads list","%(timestamp)s - latest activity"),narrow:!0}))};var we=function(e){var t="threads-list-item-category threads-list-category-label";return e.color&&(t+=" threads-list-category-label-color"),t};const Ce=function(e){var t=e.parent,a=e.category;return(0,i.Z)("span",{},void 0,t&&(0,i.Z)("a",{href:t.url.index,className:we(t)+" threads-list-item-parent-category",style:t.color?{"--label-color":t.color}:null,title:t.short_name?t.name:null},void 0,t.short_name||t.name),(0,i.Z)("a",{href:a.url.index,className:we(a),style:a.color?{"--label-color":a.color}:null,title:a.short_name?a.name:null},void 0,a.short_name||a.name))},Re=function(e){var t=e.checked,a=e.disabled,n=e.thread;return(0,i.Z)("button",{className:"btn btn-default btn-icon",type:"button",disabled:a,onClick:function(){return F.Z.dispatch(D.wc(n.id))}},void 0,(0,i.Z)("span",{className:"material-icon"},void 0,t?"check_box":"check_box_outline_blank"))};var Ee,Se=a(19605);const Oe=function(e){var t=e.thread;return t.last_poster?(0,i.Z)("a",{href:t.url.last_poster,className:"threads-list-item-last-poster",title:interpolate(pgettext("threads list","%(poster)s - latest poster"),{poster:t.last_poster.username},!0)},void 0,(0,i.Z)(Se.ZP,{size:30,user:t.last_poster})):(0,i.Z)("span",{className:"threads-list-item-last-poster",title:interpolate(pgettext("threads list","%(poster)s - latest poster"),{poster:t.last_poster_name},!0)},void 0,Ee||(Ee=(0,i.Z)(Se.ZP,{size:30})))};var Te,Pe,Le,Ae=a(60642),Ie=a(49021);const Be=(0,n.$j)()((function(e){var t=e.dispatch,a=e.disabled,n=e.thread;return(0,i.Z)(Ae.D,{url:n.api.watch},void 0,(function(e,s){var o,r=s.loading;function l(a){n.notifications!==a&&(t((0,j.r$)(n,{notifications:a})),e({json:{notifications:a},onError:function(e){q.Z.apiError(e),t((0,j.r$)(n,{notifications:n.notifications}))}}))}return(0,i.Z)("div",{className:"dropdown"},void 0,(0,i.Z)("button",{className:"btn btn-default btn-icon",type:"button",title:(o=n.notifications,2===o?pgettext("watch thread","Send e-mail notifications"):1===o?pgettext("watch thread","Without e-mail notifications"):gettext("Not watching")),"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},void 0,(0,i.Z)("span",{className:"material-icon"},void 0,function(e){return 2===e?"mail":1===e?"notifications_active":"notifications_none"}(n.notifications))),(0,i.Z)("ul",{className:"dropdown-menu dropdown-menu-right stick-to-bottom"},void 0,(0,i.Z)(Ie.iC,{},void 0,pgettext("watch thread","Notify about new replies")),(0,i.Z)("li",{},void 0,(0,i.Z)("button",{className:"btn btn-link",disabled:a||r,onClick:function(){return l(2)}},void 0,Te||(Te=(0,i.Z)("span",{className:"material-icon"},void 0,"mail")),pgettext("watch thread","On site and with e-mail"))),(0,i.Z)("li",{},void 0,(0,i.Z)("button",{className:"btn btn-link",disabled:a||r,onClick:function(){return l(1)}},void 0,Pe||(Pe=(0,i.Z)("span",{className:"material-icon"},void 0,"notifications_active")),pgettext("watch thread","On site only"))),(0,i.Z)("li",{},void 0,(0,i.Z)("button",{className:"btn btn-link",disabled:a||r,onClick:function(){return l(0)}},void 0,Le||(Le=(0,i.Z)("span",{className:"material-icon"},void 0,"notifications_none")),pgettext("watch thread","Don't notify")))))}))}));var je,De;const ze=function(e){var t=e.thread;return t&&!t.is_read?(0,i.Z)("div",{className:"threads-list-item-read-status",title:pgettext("threads list","Contains unread posts")},void 0,je||(je=(0,i.Z)("span",{className:"threads-list-unread-icon"}))):(0,i.Z)("div",{className:"threads-list-item-read-status",title:pgettext("threads list","No unread posts")},void 0,De||(De=(0,i.Z)("span",{className:"threads-list-read-icon"})))};var Ue;const Me=function(e){var t=e.thread;return t.starter?(0,i.Z)("a",{href:t.url.starter,className:"threads-list-item-starter",title:interpolate(pgettext("threads list","%(starter)s - original poster"),{starter:t.starter.username},!0)},void 0,(0,i.Z)(Se.ZP,{size:30,user:t.starter})):(0,i.Z)("span",{className:"threads-list-item-starter",title:interpolate(pgettext("threads list","%(starter)s - original poster"),{starter:t.starter_name},!0)},void 0,Ue||(Ue=(0,i.Z)(Se.ZP,{size:30})))},qe=function(e){var t,a,n=e.thread,s=e.isNew;return(0,i.Z)("div",{className:"threads-list-item-col-title"},void 0,(0,i.Z)("a",{href:s?n.url.new_post:n.url.index,className:ye()("threads-list-item-title",{"threads-list-item-title-new":s})},void 0,n.title),(t=n.pages,a=[],t>3&&a.push(t-2),t>2&&a.push(t-1),t>1&&a.push(t),a).map((function(e){return(0,i.Z)("a",{href:n.url.index+e+"/",className:"threads-list-item-goto-page",title:pgettext("threads list","Go to page: %(page)s").replace("%(page)s",e)},e,e)})))},Fe=function(e){var t=e.activeCategory,a=e.categories,n=e.showOptions,s=e.showNotifications,o=e.thread,r=e.isBusy,l=e.isSelected,c=null,u=null;t.id!==o.category&&(u=a[o.category]).parent&&u.parent!==t.id&&a[u.parent]&&!a[u.parent].special_role&&(c=a[u.parent]);var d=o.is_closed||o.is_hidden||o.is_unapproved||o.weight>0||o.best_answer||o.has_poll||o.has_unapproved_posts,p=!!n&&o.is_new;return(0,i.Z)("li",{className:ye()("list-group-item threads-list-item",{"threads-list-item-is-busy":r})},void 0,(0,i.Z)("div",{className:"threads-list-item-col-starter"},void 0,(0,i.Z)(Me,{thread:o})),n&&(0,i.Z)("div",{className:"threads-list-item-col-read-status"},void 0,(0,i.Z)(ze,{thread:o})),(0,i.Z)("div",{className:"threads-list-item-right-col"},void 0,(0,i.Z)("div",{className:"threads-list-item-top-row"},void 0,(0,i.Z)(qe,{thread:o,isNew:p}),n&&o.moderation.length>0&&(0,i.Z)("div",{className:"threads-list-item-col-checkbox-sm"},void 0,(0,i.Z)(Re,{checked:l,disabled:r,thread:o}))),(0,i.Z)("div",{className:"threads-list-item-bottom-row"},void 0,(0,i.Z)("div",{className:"threads-list-item-bottom-left"},void 0,(0,i.Z)("div",{className:"threads-list-item-col-starter-sm"},void 0,(0,i.Z)(Me,{thread:o})),d&&(0,i.Z)("div",{className:"threads-list-item-col-flags"},void 0,(0,i.Z)(_e.Z,{thread:o})),!!u&&(0,i.Z)("div",{className:"threads-list-item-col-category"},void 0,(0,i.Z)(Ce,{parent:c,category:u}))),(0,i.Z)("div",{className:"threads-list-item-bottom-right"},void 0,(0,i.Z)("div",{className:ye()("threads-list-item-col-replies",{"threads-list-item-col-replies-zero":0===o.replies})},void 0,(0,i.Z)(Ne.Z,{thread:o})),(0,i.Z)("div",{className:"threads-list-item-col-last-poster"},void 0,(0,i.Z)(Oe,{thread:o})),(0,i.Z)("div",{className:"threads-list-item-col-last-activity"},void 0,(0,i.Z)(xe,{thread:o})),(0,i.Z)("div",{className:"threads-list-item-col-last-poster-sm"},void 0,(0,i.Z)(Oe,{thread:o})),n&&s&&(0,i.Z)("div",{className:"threads-list-item-col-notifications"},void 0,(0,i.Z)(Be,{disabled:r,thread:o})),n&&o.moderation.length>0&&(0,i.Z)("div",{className:"threads-list-item-col-checkbox"},void 0,(0,i.Z)(Re,{checked:l,disabled:r,thread:o}))))))},He=function(e){var t=e.width;return(0,i.Z)("span",{className:"ui-preview-text",style:{width:t+"px"}},void 0," ")};var Ye,Ve,Ge,$e,We,Qe,Xe,Ke,Je,et,tt,at,nt,it,st;const ot=function(e){var t=e.showOptions;return(0,i.Z)("div",{className:"threads-list threads-list-loader"},void 0,(0,i.Z)("ul",{className:"list-group"},void 0,(0,i.Z)("li",{className:"list-group-item threads-list-item"},void 0,Ye||(Ye=(0,i.Z)("div",{className:"threads-list-item-col-starter"},void 0,(0,i.Z)(Se.ZP,{size:26}))),t&&(Ve||(Ve=(0,i.Z)("div",{className:"threads-list-item-col-read-status"},void 0,(0,i.Z)(ze,{})))),(0,i.Z)("div",{className:"threads-list-item-right-col"},void 0,(0,i.Z)("div",{className:"threads-list-item-top-row"},void 0,t&&(Ge||(Ge=(0,i.Z)("div",{className:"threads-list-item-col-icon"},void 0,(0,i.Z)("span",{className:"threads-list-icon ui-preview-img"})))),$e||($e=(0,i.Z)("div",{className:"threads-list-item-col-title"},void 0,(0,i.Z)("span",{className:"threads-list-item-title"},void 0,(0,i.Z)(He,{width:"90"})," ",(0,i.Z)(He,{width:"40"})," ",(0,i.Z)(He,{width:"120"}))))),We||(We=(0,i.Z)("div",{className:"threads-list-item-bottom-row"},void 0,(0,i.Z)("div",{className:"threads-list-item-bottom-left"},void 0,(0,i.Z)("div",{className:"threads-list-item-col-starter-sm"},void 0,(0,i.Z)(Se.ZP,{size:20})),(0,i.Z)("div",{className:"threads-list-item-col-category"},void 0,(0,i.Z)(He,{width:"70"}))),(0,i.Z)("div",{className:"threads-list-item-bottom-right"},void 0,(0,i.Z)("div",{className:"threads-list-item-col-replies"},void 0,(0,i.Z)(He,{width:"50"})),(0,i.Z)("div",{className:"threads-list-item-col-last-poster"},void 0,(0,i.Z)("span",{className:"threads-list-item-last-poster"},void 0,(0,i.Z)(Se.ZP,{size:26}))),(0,i.Z)("div",{className:"threads-list-item-col-last-activity"},void 0,(0,i.Z)("span",{className:"threads-list-item-last-activity"},void 0,(0,i.Z)(He,{width:"50"}))),(0,i.Z)("div",{className:"threads-list-item-col-last-poster-sm"},void 0,(0,i.Z)(Se.ZP,{size:20}))))))),(0,i.Z)("li",{className:"list-group-item threads-list-item"},void 0,Qe||(Qe=(0,i.Z)("div",{className:"threads-list-item-col-starter"},void 0,(0,i.Z)(Se.ZP,{size:26}))),t&&(Xe||(Xe=(0,i.Z)("div",{className:"threads-list-item-col-read-status"},void 0,(0,i.Z)(ze,{})))),(0,i.Z)("div",{className:"threads-list-item-right-col"},void 0,(0,i.Z)("div",{className:"threads-list-item-top-row"},void 0,t&&(Ke||(Ke=(0,i.Z)("div",{className:"threads-list-item-col-icon"},void 0,(0,i.Z)("span",{className:"threads-list-icon ui-preview-img"})))),Je||(Je=(0,i.Z)("div",{className:"threads-list-item-col-title"},void 0,(0,i.Z)("span",{className:"threads-list-item-title"},void 0,(0,i.Z)(He,{width:"120"})," ",(0,i.Z)(He,{width:"30"})," ",(0,i.Z)(He,{width:"60"}))))),et||(et=(0,i.Z)("div",{className:"threads-list-item-bottom-row"},void 0,(0,i.Z)("div",{className:"threads-list-item-bottom-left"},void 0,(0,i.Z)("div",{className:"threads-list-item-col-starter-sm"},void 0,(0,i.Z)(Se.ZP,{size:20})),(0,i.Z)("div",{className:"threads-list-item-col-category"},void 0,(0,i.Z)(He,{width:"90"}))),(0,i.Z)("div",{className:"threads-list-item-bottom-right"},void 0,(0,i.Z)("div",{className:"threads-list-item-col-replies"},void 0,(0,i.Z)(He,{width:"70"})),(0,i.Z)("div",{className:"threads-list-item-col-last-poster"},void 0,(0,i.Z)("span",{className:"threads-list-item-last-poster"},void 0,(0,i.Z)(Se.ZP,{size:26}))),(0,i.Z)("div",{className:"threads-list-item-col-last-activity"},void 0,(0,i.Z)("span",{className:"threads-list-item-last-activity"},void 0,(0,i.Z)(He,{width:"40"}))),(0,i.Z)("div",{className:"threads-list-item-col-last-poster-sm"},void 0,(0,i.Z)(Se.ZP,{size:20}))))))),(0,i.Z)("li",{className:"list-group-item threads-list-item"},void 0,tt||(tt=(0,i.Z)("div",{className:"threads-list-item-col-starter"},void 0,(0,i.Z)(Se.ZP,{size:26}))),t&&(at||(at=(0,i.Z)("div",{className:"threads-list-item-col-read-status"},void 0,(0,i.Z)(ze,{})))),(0,i.Z)("div",{className:"threads-list-item-right-col"},void 0,(0,i.Z)("div",{className:"threads-list-item-top-row"},void 0,t&&(nt||(nt=(0,i.Z)("div",{className:"threads-list-item-col-icon"},void 0,(0,i.Z)("span",{className:"threads-list-icon ui-preview-img"})))),it||(it=(0,i.Z)("div",{className:"threads-list-item-col-title"},void 0,(0,i.Z)("span",{className:"threads-list-item-title"},void 0,(0,i.Z)(He,{width:"40"})," ",(0,i.Z)(He,{width:"120"})," ",(0,i.Z)(He,{width:"80"}))))),st||(st=(0,i.Z)("div",{className:"threads-list-item-bottom-row"},void 0,(0,i.Z)("div",{className:"threads-list-item-bottom-left"},void 0,(0,i.Z)("div",{className:"threads-list-item-col-starter-sm"},void 0,(0,i.Z)(Se.ZP,{size:20})),(0,i.Z)("div",{className:"threads-list-item-col-category"},void 0,(0,i.Z)(He,{width:"80"}))),(0,i.Z)("div",{className:"threads-list-item-bottom-right"},void 0,(0,i.Z)("div",{className:"threads-list-item-col-replies"},void 0,(0,i.Z)(He,{width:"50"})),(0,i.Z)("div",{className:"threads-list-item-col-last-poster"},void 0,(0,i.Z)("span",{className:"threads-list-item-last-poster"},void 0,(0,i.Z)(Se.ZP,{size:26}))),(0,i.Z)("div",{className:"threads-list-item-col-last-activity"},void 0,(0,i.Z)("span",{className:"threads-list-item-last-activity"},void 0,(0,i.Z)(He,{width:"45"}))),(0,i.Z)("div",{className:"threads-list-item-col-last-poster-sm"},void 0,(0,i.Z)(Se.ZP,{size:20})))))))))};var rt;const lt=function(e){var t=e.threads,a=e.onClick;return(0,i.Z)("li",{className:"list-group-item threads-list-update-prompt"},void 0,(0,i.Z)("button",{type:"button",className:"btn btn-block threads-list-update-prompt-btn",onClick:a},void 0,rt||(rt=(0,i.Z)("span",{className:"material-icon"},void 0,"cached")),(0,i.Z)("span",{className:"threads-list-update-prompt-message"},void 0,interpolate(npgettext("threads list update prompt","There is %(threads)s new or updated thread. Click here to show it.","There are %(threads)s new or updated threads. Click here to show them.",t),{threads:t},!0))))},ct=function(e){var t=e.list,a=e.categories,n=e.category,s=e.threads,o=e.busyThreads,r=e.selection,l=e.isLoaded,c=e.showOptions,u=e.updatedThreads,d=e.applyUpdate,p=e.emptyMessage;return l?(0,i.Z)("div",{className:"threads-list"},void 0,s.length>0?(0,i.Z)("ul",{className:"list-group"},void 0,u>0&&(0,i.Z)(lt,{threads:u,onClick:d}),s.map((function(e){return(0,i.Z)(Fe,{activeCategory:n,categories:a,thread:e,showOptions:c,showNotifications:c&&"watched"===t.type,isBusy:o.indexOf(e.id)>=0,isSelected:r.indexOf(e.id)>=0},e.id)}))):(0,i.Z)("ul",{className:"list-group"},void 0,u>0&&(0,i.Z)(lt,{threads:u,onClick:d}),(0,i.Z)(ge,{category:n,list:t,message:p}))):(0,i.Z)(ot,{showOptions:c})};var ut=a(82125),dt=a(55547),pt=a(53328),ht=a(20370),vt=a(99755);var mt=function(e){(0,l.Z)(p,e);var t,a,n=(t=p,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(a){var i=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function p(e){var t;(0,s.Z)(this,p),t=n.call(this,e),(0,d.Z)((0,r.Z)(t),"loadMore",(function(){t.setState({isBusy:!0}),t.loadThreads(t.getCategory(),t.state.next)})),(0,d.Z)((0,r.Z)(t),"pollResponse",(function(e){var a,n,i;t.setState({diff:Object.assign({},e,{results:(a=t.props.threads,n=e.results,i={},a.forEach((function(e){i[e.id]=e})),n.filter((function(e){return!i[e.id]||function(e,t){return[e.title===t.title,e.weight===t.weight,e.category===t.category,e.last_post===t.last_post,e.last_poster_name===t.last_poster_name].indexOf(!1)>=0}(i[e.id],e)})))})})})),(0,d.Z)((0,r.Z)(t),"addThreads",(function(e){F.Z.dispatch((0,j.R3)(e,t.getSorting()))})),(0,d.Z)((0,r.Z)(t),"applyDiff",(function(){t.addThreads(t.state.diff.results),t.setState(Object.assign({},t.state.diff,{moderation:Ze(F.Z.getState().threads),diff:{results:[]}}))})),(0,d.Z)((0,r.Z)(t),"freezeThread",(function(e){t.setState((function(t){return{busyThreads:ht.ZN(t.busyThreads,e)}}))})),(0,d.Z)((0,r.Z)(t),"updateThread",(function(e){F.Z.dispatch((0,j.r$)(e,e,t.getSorting()))})),(0,d.Z)((0,r.Z)(t),"deleteThread",(function(e){F.Z.dispatch((0,j.l8)(e))})),t.state={isMounted:!0,isLoaded:!1,isBusy:!1,diff:{results:[]},moderation:[],busyThreads:[],dropdown:!1,subcategories:[],next:0};var a=t.getCategory();return B.Z.has("THREADS")?t.initWithPreloadedData(a,B.Z.get("THREADS")):t.initWithoutPreloadedData(a),t}return(0,o.Z)(p,[{key:"getCategory",value:function(){return this.props.route.category.special_role?null:this.props.route.category.id}},{key:"initWithPreloadedData",value:function(e,t){this.state=Object.assign(this.state,{moderation:Ze(t.results),subcategories:t.subcategories,next:t.next}),this.startPolling(e)}},{key:"initWithoutPreloadedData",value:function(e){this.loadThreads(e)}},{key:"loadThreads",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;U.Z.get(this.props.options.api,{category:e,list:this.props.route.list.type,start:a||0},"threads").then((function(n){t.state.isMounted&&(0===a?F.Z.dispatch((0,j.ZB)(n.results)):F.Z.dispatch((0,j.R3)(n.results,t.getSorting())),t.setState({isLoaded:!0,isBusy:!1,moderation:Ze(F.Z.getState().threads),subcategories:n.subcategories,next:n.next}),t.startPolling(e))}),(function(e){q.Z.apiError(e)}))}},{key:"startPolling",value:function(e){dt.Z.start({poll:"threads",url:this.props.options.api,data:{category:e,list:this.props.route.list.type},frequency:12e4,update:this.pollResponse})}},{key:"componentDidMount",value:function(){this.setPageTitle(),B.Z.has("THREADS")&&(F.Z.dispatch((0,j.ZB)(B.Z.pop("THREADS").results)),this.setState({isLoaded:!0})),F.Z.dispatch(D.YP())}},{key:"componentWillUnmount",value:function(){this.state.isMounted=!1,dt.Z.stop("threads")}},{key:"getTitle",value:function(){return this.props.options.title?this.props.options.title:(e=this.props.route).category.level?e.category.name:B.Z.get("THREADS_ON_INDEX")?B.Z.get("SETTINGS").index_header?B.Z.get("SETTINGS").index_header:B.Z.get("SETTINGS").forum_name:pgettext("threads list title","Threads");var e}},{key:"setPageTitle",value:function(){var e;this.props.route.category.level||!B.Z.get("THREADS_ON_INDEX")?pt.Z.set((e=this.props.route).category.level?e.list.path?{title:e.list.longName,parent:e.category.name}:{title:e.category.name}:B.Z.get("THREADS_ON_INDEX")?e.list.path?{title:e.list.longName}:null:e.list.path?{title:e.list.longName,parent:pgettext("threads list title","Threads")}:{title:pgettext("threads list title","Threads")}):this.props.options.title?pt.Z.set(this.props.options.title):B.Z.get("SETTINGS").index_title?document.title=B.Z.get("SETTINGS").index_title:document.title=B.Z.get("SETTINGS").forum_name}},{key:"getSorting",value:function(){return this.props.route.category.level?Z:f}},{key:"getMoreButton",value:function(){return this.state.next?(0,i.Z)("div",{className:"pager-more"},void 0,(0,i.Z)(v.Z,{className:"btn btn-default btn-outline",loading:this.state.isBusy||this.state.busyThreads.length,onClick:this.loadMore},void 0,pgettext("threas list more btn","Show more"))):null}},{key:"getClassName",value:function(){var e,t="page page-threads";return t+=" page-threads-"+this.props.route.list.type,(e=this.props).route.category.level||!B.Z.get("THREADS_ON_INDEX")||e.options.title||(t+=" page-threads-index"),this.props.route.category.css_class&&(t+=" page-threads-"+this.props.route.category.css_class),t}},{key:"render",value:function(){var e=this.props.route.categories[0],t=this.props.route,a=t.category,n=t.list,s=a.special_role;return(0,i.Z)("div",{className:this.getClassName()},void 0,"root_category"==s&&B.Z.get("THREADS_ON_INDEX")&&B.Z.get("SETTINGS").index_header&&(0,i.Z)(vt.Iv,{header:B.Z.get("SETTINGS").index_header,message:a.description&&(0,i.Z)(vt.Ql,{message:a.description.html}),styleName:"forum-index"}),"root_category"==s&&!B.Z.get("THREADS_ON_INDEX")&&(0,i.Z)(vt.Iv,{header:pgettext("threads list title","Threads"),styleName:"threads"}),"private_threads"==s&&(0,i.Z)(vt.Iv,{header:this.props.options.title,message:this.props.options.pageLead&&(0,i.Z)(vt.bM,{},void 0,(0,i.Z)("p",{},void 0,this.props.options.pageLead)),styleName:"private-threads"}),!s&&(0,i.Z)(vt.Iv,{header:a.name,message:a.description&&(0,i.Z)(vt.Ql,{message:a.description.html}),styleName:a.css_class||"category-threads"}),(0,i.Z)(me,{api:this.props.options.api,root:e,route:this.props.route,user:this.props.user,pageLead:this.props.options.pageLead,threads:this.props.threads,threadsCount:this.state.count,moderation:this.state.moderation,selection:this.props.selection,busyThreads:this.state.busyThreads,addThreads:this.addThreads,startThread:this.props.options.startThread,freezeThread:this.freezeThread,deleteThread:this.deleteThread,updateThread:this.updateThread,isLoaded:this.state.isLoaded,isBusy:this.state.isBusy},void 0,(0,i.Z)(ct,{category:a,categories:this.props.route.categoriesMap,list:n,selection:this.props.selection,threads:this.props.threads,updatedThreads:this.state.diff.results.length,applyUpdate:this.applyDiff,showOptions:!!this.props.user.id,isLoaded:this.state.isLoaded,busyThreads:this.state.busyThreads,emptyMessage:this.props.options.emptyMessage}),this.getMoreButton()))}}]),p}(ut.Z);var ft=a(39633),Zt="misago:private-threads";function gt(e){return e.get("CURRENT_LINK").substr(0,Zt.length)===Zt?{api:e.get("PRIVATE_THREADS_API"),startThread:{mode:"START_PRIVATE",submit:B.Z.get("PRIVATE_THREADS_API")},title:pgettext("private threads title","Private threads"),pageLead:pgettext("private threads list","Private threads are threads which only those that started them and those they have invited may see and participate in."),emptyMessage:pgettext("private threads list empty","You aren't participating in any private threads.")}:{api:e.get("THREADS_API")}}B.Z.addInitializer({name:"component:threads",initializer:function(e){var t,a,i,s,o;e.has("THREADS")&&e.has("CATEGORIES")&&(0,ft.Z)({paths:(t=e.get("user"),a=gt(e),i=function(e){var t=[{type:"all",path:"",name:pgettext("threads list","All"),longName:gettext("All threads")}];return e.id&&(t.push({type:"my",path:"my/",name:pgettext("threads list","My"),longName:pgettext("threads list","My threads")}),t.push({type:"new",path:"new/",name:pgettext("threads list","New"),longName:pgettext("threads list","New threads")}),t.push({type:"unread",path:"unread/",name:pgettext("threads list","Unread"),longName:pgettext("threads list","Unread threads")}),t.push({type:"watched",path:"watched/",name:pgettext("threads list","Watched"),longName:pgettext("threads list","Watched threads")}),e.acl.can_see_unapproved_content_lists&&t.push({type:"unapproved",path:"unapproved/",name:pgettext("threads list","Unapproved"),longName:pgettext("threads list","Unapproved content")})),t}(t),s=[],o={},B.Z.get("CATEGORIES").forEach((function(e){i.forEach((function(t){var r;o[e.id]=e,s.push({path:e.url.index+t.path,component:(0,n.$j)((r=a,function(e){return{options:r,selection:e.selection,threads:e.threads,tick:e.tick.tick,user:e.auth.user}}))(mt),categories:B.Z.get("CATEGORIES"),categoriesMap:o,category:e,lists:i,list:t})}))})),s)})},after:"store"})},63290:(e,t,a)=>{"use strict";var n,i=a(22928),s=(a(57588),a(73935)),o=a.n(s),r=a(37424),l=a(28166),c=a(90287);misago.addInitializer({name:"component:user-nav-overlay",initializer:function(e){var t=document.getElementById("user-nav-mount");o().render((0,i.Z)(r.zt,{store:c.Z.getStore()},void 0,n||(n=(0,i.Z)(l.Qm,{}))),t)},after:"store"})},77031:(e,t,a)=>{"use strict";var n,i=a(22928),s=a(15671),o=a(43144),r=a(79340),l=a(6215),c=a(61120),u=a(57588),d=a.n(u),p=a(37424),h=a(97326),v=a(4942),m=a(59131),f=a(69987),Z=a(94417),g=function(e,t){var a=e;return"rank"===t.component?a+=t.slug:a+=t.component,a+"/"};const b=function(e){var t=e.baseUrl,a=e.page,s=e.pages;return(0,i.Z)("div",{className:"nav-container"},void 0,(0,i.Z)("div",{className:"dropdown hidden-sm hidden-md hidden-lg"},void 0,(0,i.Z)("button",{className:"btn btn-default btn-block btn-outline dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},void 0,n||(n=(0,i.Z)("span",{className:"material-icon"},void 0,"menu")),a.name),(0,i.Z)("ul",{className:"dropdown-menu stick-to-bottom"},void 0,s.map((function(e){var a=g(t,e);return(0,i.Z)("li",{},a,(0,i.Z)(f.rU,{to:a},void 0,e.name))})))),(0,i.Z)("ul",{className:"nav nav-pills hidden-xs",role:"menu"},void 0,s.map((function(e){var a=g(t,e);return(0,i.Z)(Z.Z,{path:a},a,(0,i.Z)(f.rU,{to:a},void 0,e.name))}))))};var y,_,N=function(e){(0,r.Z)(u,e);var t,a,n=(t=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function u(){return(0,s.Z)(this,u),n.apply(this,arguments)}return(0,o.Z)(u,[{key:"getEmptyMessage",value:function(){return interpolate(npgettext("top posters empty","No users have posted any new messages during last %(days)s day.","No users have posted any new messages during last %(days)s days.",this.props.trackedPeriod),{days:this.props.trackedPeriod},!0)}},{key:"render",value:function(){return(0,i.Z)("div",{className:"active-posters-list"},void 0,(0,i.Z)(m.Z,{},void 0,(0,i.Z)(b,{baseUrl:misago.get("USERS_LIST_URL"),page:this.props.page,pages:misago.get("USERS_LISTS")}),(0,i.Z)("p",{className:"lead"},void 0,this.getEmptyMessage())))}}]),u}(d().Component),k=a(19605),x=a(44039);var w=function(e){(0,r.Z)(u,e);var t,a,n=(t=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function u(){return(0,s.Z)(this,u),n.apply(this,arguments)}return(0,o.Z)(u,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"getClassName",value:function(){return this.props.hiddenOnMobile?"list-group-item hidden-xs hidden-sm":"list-group-item"}},{key:"render",value:function(){return(0,i.Z)("li",{className:this.getClassName()},void 0,y||(y=(0,i.Z)("div",{className:"rank-user-avatar"},void 0,(0,i.Z)("span",{},void 0,(0,i.Z)(k.ZP,{size:"50"})))),(0,i.Z)("div",{className:"rank-user"},void 0,(0,i.Z)("div",{className:"user-name"},void 0,(0,i.Z)("span",{className:"item-title"},void 0,(0,i.Z)("span",{className:"ui-preview-text",style:{width:x.e(30,80)+"px"}},void 0," "))),(0,i.Z)("div",{className:"user-details"},void 0,(0,i.Z)("span",{className:"user-status"},void 0,_||(_=(0,i.Z)("span",{className:"status-icon ui-preview-text"},void 0," ")),(0,i.Z)("span",{className:"status-label ui-preview-text hidden-xs hidden-sm",style:{width:x.e(30,50)+"px"}},void 0," ")),(0,i.Z)("span",{className:"rank-name"},void 0,(0,i.Z)("span",{className:"ui-preview-text",style:{width:x.e(30,50)+"px"}},void 0," ")),(0,i.Z)("span",{className:"user-title hidden-xs hidden-sm"},void 0,(0,i.Z)("span",{className:"ui-preview-text",style:{width:x.e(30,50)+"px"}},void 0," "))),(0,i.Z)("div",{className:"user-compact-stats visible-xs-block"},void 0,(0,i.Z)("span",{className:"rank-position"},void 0,(0,i.Z)("strong",{},void 0,(0,i.Z)("span",{className:"ui-preview-text",style:{width:x.e(20,30)+"px"}},void 0," ")),(0,i.Z)("small",{},void 0,pgettext("top posters list item","Rank"))),(0,i.Z)("span",{className:"rank-posts-counted"},void 0,(0,i.Z)("strong",{},void 0,(0,i.Z)("span",{className:"ui-preview-text",style:{width:x.e(20,30)+"px"}},void 0," ")),(0,i.Z)("small",{},void 0,pgettext("top posters list item","Ranked posts"))))),(0,i.Z)("div",{className:"rank-position hidden-xs"},void 0,(0,i.Z)("strong",{},void 0,(0,i.Z)("span",{className:"ui-preview-text",style:{width:x.e(20,30)+"px"}},void 0," ")),(0,i.Z)("small",{},void 0,pgettext("top posters list item","Rank"))),(0,i.Z)("div",{className:"rank-posts-counted hidden-xs"},void 0,(0,i.Z)("strong",{},void 0,(0,i.Z)("span",{className:"ui-preview-text",style:{width:x.e(20,30)+"px"}},void 0," ")),(0,i.Z)("small",{},void 0,pgettext("top posters list item","Ranked posts"))),(0,i.Z)("div",{className:"rank-posts-total hidden-xs"},void 0,(0,i.Z)("strong",{},void 0,(0,i.Z)("span",{className:"ui-preview-text",style:{width:x.e(20,30)+"px"}},void 0," ")),(0,i.Z)("small",{},void 0,pgettext("top posters list item","Total posts"))))}}]),u}(d().Component);var C,R=function(e){(0,r.Z)(u,e);var t,a,n=(t=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function u(){return(0,s.Z)(this,u),n.apply(this,arguments)}return(0,o.Z)(u,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return(0,i.Z)("div",{className:"active-posters-list"},void 0,(0,i.Z)(m.Z,{},void 0,(0,i.Z)(b,{baseUrl:misago.get("USERS_LIST_URL"),page:this.props.page,pages:misago.get("USERS_LISTS")}),(0,i.Z)("p",{className:"lead ui-preview"},void 0,(0,i.Z)("span",{className:"ui-preview-text",style:{width:x.e(50,220)+"px"}},void 0," ")),(0,i.Z)("div",{className:"active-posters ui-preview"},void 0,(0,i.Z)("ul",{className:"list-group"},void 0,[0,1,2].map((function(e){return(0,i.Z)(w,{hiddenOnMobile:e>0},e)}))))))}}]),u}(d().Component),E=a(24678),S=a(54385);var O=function(e){(0,r.Z)(u,e);var t,a,n=(t=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function u(){return(0,s.Z)(this,u),n.apply(this,arguments)}return(0,o.Z)(u,[{key:"getClassName",value:function(){return this.props.rank.css_class?"list-group-item list-group-rank-"+this.props.rank.css_class:"list-group-item"}},{key:"getUserStatus",value:function(){return this.props.user.status?(0,i.Z)(E.ZP,{user:this.props.user,status:this.props.user.status},void 0,(0,i.Z)(E.Jj,{user:this.props.user,status:this.props.user.status}),(0,i.Z)(E.pg,{user:this.props.user,status:this.props.user.status,className:"status-label hidden-xs hidden-sm"})):(0,i.Z)("span",{className:"user-status"},void 0,C||(C=(0,i.Z)("span",{className:"status-icon ui-preview-text"},void 0," ")),(0,i.Z)("span",{className:"status-label ui-preview-text hidden-xs hidden-sm",style:{width:x.e(30,50)+"px"}},void 0," "))}},{key:"getRankName",value:function(){if(!this.props.rank.is_tab)return(0,i.Z)("span",{className:"rank-name item-title"},void 0,this.props.rank.name);var e=S.Z.get("USERS_LIST_URL")+this.props.rank.slug+"/";return(0,i.Z)(f.rU,{to:e,className:"rank-name item-title"},void 0,this.props.rank.name)}},{key:"getUserTitle",value:function(){return this.props.user.title?(0,i.Z)("span",{className:"user-title hidden-xs hidden-sm"},void 0,this.props.user.title):null}},{key:"render",value:function(){return(0,i.Z)("li",{className:this.getClassName()},void 0,(0,i.Z)("div",{className:"rank-user-avatar"},void 0,(0,i.Z)("a",{href:this.props.user.url},void 0,(0,i.Z)(k.ZP,{user:this.props.user,size:50,size2x:64}))),(0,i.Z)("div",{className:"rank-user"},void 0,(0,i.Z)("div",{className:"user-name"},void 0,(0,i.Z)("a",{href:this.props.user.url,className:"item-title"},void 0,this.props.user.username)),(0,i.Z)("div",{className:"user-details"},void 0,this.getUserStatus(),this.getRankName(),this.getUserTitle()),(0,i.Z)("div",{className:"user-compact-stats visible-xs-block"},void 0,(0,i.Z)("span",{className:"rank-position"},void 0,(0,i.Z)("strong",{},void 0,"#",this.props.counter),(0,i.Z)("small",{},void 0,pgettext("top posters list item","Rank"))),(0,i.Z)("span",{className:"rank-posts-counted"},void 0,(0,i.Z)("strong",{},void 0,this.props.user.meta.score),(0,i.Z)("small",{},void 0,pgettext("top posters list item","Ranked posts"))))),(0,i.Z)("div",{className:"rank-position hidden-xs"},void 0,(0,i.Z)("strong",{},void 0,"#",this.props.counter),(0,i.Z)("small",{},void 0,pgettext("top posters list item","Rank"))),(0,i.Z)("div",{className:"rank-posts-counted hidden-xs"},void 0,(0,i.Z)("strong",{},void 0,this.props.user.meta.score),(0,i.Z)("small",{},void 0,pgettext("top posters list item","Ranked posts"))),(0,i.Z)("div",{className:"rank-posts-total hidden-xs"},void 0,(0,i.Z)("strong",{},void 0,this.props.user.posts),(0,i.Z)("small",{},void 0,pgettext("top posters list item","Total posts"))))}}]),u}(d().Component);var T=function(e){(0,r.Z)(u,e);var t,a,n=(t=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function u(){return(0,s.Z)(this,u),n.apply(this,arguments)}return(0,o.Z)(u,[{key:"getLeadMessage",value:function(){var e=npgettext("top posters list","%(posters)s top poster from last %(days)s days.","%(posters)s top posters from last %(days)s days.",this.props.count);return interpolate(e,{posters:this.props.count,days:this.props.trackedPeriod},!0)}},{key:"render",value:function(){return(0,i.Z)("div",{className:"active-posters-list"},void 0,(0,i.Z)(m.Z,{},void 0,(0,i.Z)(b,{baseUrl:misago.get("USERS_LIST_URL"),page:this.props.page,pages:misago.get("USERS_LISTS")}),(0,i.Z)("p",{className:"lead"},void 0,this.getLeadMessage()),(0,i.Z)("div",{className:"active-posters ui-ready"},void 0,(0,i.Z)("ul",{className:"list-group"},void 0,this.props.users.map((function(e,t){return(0,i.Z)(O,{user:e,rank:e.rank,counter:t+1},e.id)}))))))}}]),u}(d().Component),P=a(6935),L=a(55547),A=a(90287),I=a(53328);var B=function(e){(0,r.Z)(u,e);var t,a,n=(t=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function u(e){var t;return(0,s.Z)(this,u),t=n.call(this,e),(0,v.Z)((0,h.Z)(t),"update",(function(e){A.Z.dispatch((0,P.ZB)(e.results)),t.setState({isLoaded:!0,trackedPeriod:e.tracked_period,count:e.count})})),S.Z.has("USERS")?t.initWithPreloadedData(S.Z.pop("USERS")):t.initWithoutPreloadedData(),t.startPolling(),t}return(0,o.Z)(u,[{key:"initWithPreloadedData",value:function(e){this.state={isLoaded:!0,trackedPeriod:e.tracked_period,count:e.count},A.Z.dispatch((0,P.ZB)(e.results))}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1}}},{key:"startPolling",value:function(){L.Z.start({poll:"active-posters",url:S.Z.get("USERS_API"),data:{list:"active"},frequency:9e4,update:this.update})}},{key:"componentDidMount",value:function(){I.Z.set({title:this.props.route.extra.name,parent:pgettext("users page title","Users")})}},{key:"componentWillUnmount",value:function(){L.Z.stop("active-posters")}},{key:"render",value:function(){var e={name:this.props.route.extra.name};return this.state.isLoaded?this.state.count>0?(0,i.Z)(T,{page:e,users:this.props.users,trackedPeriod:this.state.trackedPeriod,count:this.state.count}):(0,i.Z)(N,{page:e,trackedPeriod:this.state.trackedPeriod}):(0,i.Z)(R,{page:e})}}]),u}(d().Component);var j=function(e){(0,r.Z)(u,e);var t,a,n=(t=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function u(){return(0,s.Z)(this,u),n.apply(this,arguments)}return(0,o.Z)(u,[{key:"getClassName",value:function(){return this.props.copy&&this.props.copy.length&&1===function(e,t){if(e=(e+"").toLowerCase(),(t=(t+"").toLowerCase()).length<=0)return 0;for(var a=0,n=0,i=t.length;(n=e.indexOf(t,n))>=0;)a+=1,n+=i;return a}(this.props.copy,"<p")&&-1===this.props.copy.indexOf("<br")?"page-lead lead":"page-lead"}},{key:"render",value:function(){return this.props.copy&&this.props.copy.length?(0,i.Z)("div",{className:this.getClassName(),dangerouslySetInnerHTML:{__html:this.props.copy}}):null}}]),u}(d().Component),D=a(40429);const z=function(e){var t=e.users;return(0,i.Z)(D.Z,{cols:4,isReady:!0,showStatus:!0,users:t})};var U;const M=function(e){(0,r.Z)(u,e);var t,a,n=(t=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function u(){var e;(0,s.Z)(this,u);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),(0,v.Z)((0,h.Z)(e),"render",(function(){return U||(U=(0,i.Z)(D.Z,{cols:4,isReady:!1}))})),e}return(0,o.Z)(u,[{key:"shouldComponentUpdate",value:function(){return!1}}]),u}(d().Component);var q=a(92490);const F=function(e){var t=e.users;return t.more?(0,i.Z)("p",{},void 0,interpolate(npgettext("rank users list","There is %(more)s more user with this rank.","There are %(more)s more users with this rank.",t.more),{more:t.more},!0)):(0,i.Z)("p",{},void 0,pgettext("rank users list empty","There are no more users with this rank."))};var H,Y,V,G,$,W,Q,X;const K=function(e){var t=e.baseUrl,a=e.users;return(0,i.Z)("div",{className:"misago-pagination"},void 0,a.isLoaded&&a.first?(0,i.Z)(f.rU,{className:"btn btn-default btn-outline btn-icon",to:t,title:pgettext("rank users list paginator","Go to first page")},void 0,H||(H=(0,i.Z)("span",{className:"material-icon"},void 0,"first_page"))):(0,i.Z)("button",{className:"btn btn-default btn-outline btn-icon",title:pgettext("rank users list paginator","Go to first page"),type:"button",disabled:!0},void 0,Y||(Y=(0,i.Z)("span",{className:"material-icon"},void 0,"first_page"))),a.isLoaded&&a.previous?(0,i.Z)(f.rU,{className:"btn btn-default btn-outline btn-icon",to:t+(a.previous>1?a.previous+"/":""),title:pgettext("rank users list paginator","Go to previous page")},void 0,V||(V=(0,i.Z)("span",{className:"material-icon"},void 0,"chevron_left"))):(0,i.Z)("button",{className:"btn btn-default btn-outline btn-icon",title:pgettext("rank users list paginator","Go to previous page"),type:"button",disabled:!0},void 0,G||(G=(0,i.Z)("span",{className:"material-icon"},void 0,"chevron_left"))),a.isLoaded&&a.next?(0,i.Z)(f.rU,{className:"btn btn-default btn-outline btn-icon",to:t+a.next+"/",title:pgettext("rank users list paginator","Go to next page")},void 0,$||($=(0,i.Z)("span",{className:"material-icon"},void 0,"chevron_right"))):(0,i.Z)("button",{className:"btn btn-default btn-outline btn-icon",title:pgettext("rank users list paginator","Go to next page"),type:"button",disabled:!0},void 0,W||(W=(0,i.Z)("span",{className:"material-icon"},void 0,"chevron_right"))),a.isLoaded&&a.last?(0,i.Z)(f.rU,{className:"btn btn-default btn-outline btn-icon",to:t+a.last+"/",title:pgettext("rank users list paginator","Go to last page")},void 0,Q||(Q=(0,i.Z)("span",{className:"material-icon"},void 0,"last_page"))):(0,i.Z)("button",{className:"btn btn-default btn-outline btn-icon",title:pgettext("rank users list paginator","Go to last page"),type:"button",disabled:!0},void 0,X||(X=(0,i.Z)("span",{className:"material-icon"},void 0,"last_page"))))},J=function(e){var t=e.baseUrl,a=e.users;return(0,i.Z)(q.o8,{},void 0,(0,i.Z)(q.Z2,{},void 0,(0,i.Z)(q.Eg,{},void 0,(0,i.Z)(K,{baseUrl:t,users:a}))),(0,i.Z)(q.Z2,{auto:!0},void 0,(0,i.Z)(q.Eg,{},void 0,(0,i.Z)(F,{users:a}))))};var ee;var te=function(e){(0,r.Z)(u,e);var t,a,n=(t=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function u(e){var t;return(0,s.Z)(this,u),t=n.call(this,e),(0,v.Z)((0,h.Z)(t),"update",(function(e){A.Z.dispatch((0,P.ZB)(e.results)),e.isLoaded=!0,t.setState(e)})),S.Z.has("USERS")?t.initWithPreloadedData(S.Z.pop("USERS")):t.initWithoutPreloadedData(),t.startPolling(e.params.page||1),t}return(0,o.Z)(u,[{key:"initWithPreloadedData",value:function(e){this.state=Object.assign(e,{isLoaded:!0}),A.Z.dispatch((0,P.ZB)(e.results))}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1}}},{key:"startPolling",value:function(e){L.Z.start({poll:"rank-users",url:S.Z.get("USERS_API"),data:{rank:this.props.route.rank.id,page:e},frequency:9e4,update:this.update})}},{key:"componentDidMount",value:function(){I.Z.set({title:this.props.route.rank.name,page:this.props.params.page||null,parent:pgettext("users page title","Users")})}},{key:"componentWillUnmount",value:function(){L.Z.stop("rank-users")}},{key:"componentWillReceiveProps",value:function(e){this.props.params.page!==e.params.page&&(I.Z.set({title:this.props.route.rank.name,page:e.params.page||null,parent:pgettext("users page title","Users")}),this.setState({isLoaded:!1}),L.Z.stop("rank-users"),this.startPolling(e.params.page))}},{key:"getClassName",value:function(){return this.props.route.rank.css_class?"rank-users-list rank-users-"+this.props.route.rank.css_class:"rank-users-list"}},{key:"getRankDescription",value:function(){return this.props.route.rank.description?(0,i.Z)("div",{className:"rank-description"},void 0,(0,i.Z)(j,{copy:this.props.route.rank.description.html})):null}},{key:"getComponent",value:function(){return this.state.isLoaded?this.state.count>0?(0,i.Z)(z,{users:this.props.users}):(0,i.Z)("p",{className:"lead"},void 0,pgettext("rank users list","There are no users with this rank at the moment.")):ee||(ee=(0,i.Z)(M,{}))}},{key:"render",value:function(){return(0,i.Z)("div",{className:this.getClassName()},void 0,(0,i.Z)(m.Z,{},void 0,(0,i.Z)(b,{baseUrl:S.Z.get("USERS_LIST_URL"),page:{name:this.props.route.rank.name},pages:S.Z.get("USERS_LISTS")}),this.getRankDescription(),this.getComponent(),(0,i.Z)(J,{baseUrl:S.Z.get("USERS_LIST_URL")+this.props.route.rank.slug+"/",users:this.state})))}}]),u}(d().Component),ae=a(82125),ne=a(99755);var ie=function(e){(0,r.Z)(u,e);var t,a,n=(t=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(a){var i=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function u(){return(0,s.Z)(this,u),n.apply(this,arguments)}return(0,o.Z)(u,[{key:"render",value:function(){return(0,i.Z)("div",{className:"page page-users-lists"},void 0,(0,i.Z)(ne.sP,{},void 0,(0,i.Z)(ne.mr,{styleName:"users-lists"},void 0,(0,i.Z)(ne.gC,{styleName:"users-lists"},void 0,(0,i.Z)("h1",{},void 0,pgettext("users page title","Users"))))),this.props.children)}}]),u}(ae.Z);function se(e){return{tick:e.tick.tick,user:e.auth.user,users:e.users}}function oe(){var e=[];return S.Z.get("USERS_LISTS").forEach((function(t){"rank"===t.component?(e.push({path:S.Z.get("USERS_LIST_URL")+t.slug+"/:page/",component:(0,p.$j)(se)(te),rank:t}),e.push({path:S.Z.get("USERS_LIST_URL")+t.slug+"/",component:(0,p.$j)(se)(te),rank:t})):"active-posters"===t.component&&e.push({path:S.Z.get("USERS_LIST_URL")+t.component+"/",component:(0,p.$j)(se)(B),extra:{name:t.name}})})),e}var re=a(39633);S.Z.addInitializer({name:"component:users",initializer:function(e){e.has("USERS_LISTS")&&(0,re.Z)({root:S.Z.get("USERS_LIST_URL"),component:ie,paths:oe()})},after:"store"})},97751:(e,t,a)=>{"use strict";var n=a(54385),i=a(96142);n.Z.addInitializer({name:"include",initializer:function(e){i.Z.init(e.get("STATIC_URL"))}})},76093:(e,t,a)=>{"use strict";var n=a(54385),i=a(62833);n.Z.addInitializer({name:"local-storage",initializer:function(){i.Z.init("misago_")}})},87336:(e,t,a)=>{"use strict";var n=a(54385),i=a(15671),s=a(43144),o=a(4869),r=a(19755);const l=new(function(){function e(){(0,i.Z)(this,e)}return(0,s.Z)(e,[{key:"init",value:function(e){this._element=e,this._component=null}},{key:"show",value:function(e){this._component===e?this.hide():(this._component=e,(0,o.Z)(e,this._element.id),r(this._element).addClass("open"))}},{key:"showConnected",value:function(e,t){this._component===e?this.hide():(this._component=e,(0,o.Z)(t,this._element.id,!0),r(this._element).addClass("open"))}},{key:"hide",value:function(){r(this._element).removeClass("open"),this._component=null}}]),e}());n.Z.addInitializer({name:"dropdown",initializer:function(){var e=document.getElementById("mobile-navbar-dropdown-mount");e&&l.init(e)},before:"store"})},47549:(e,t,a)=>{"use strict";var n=a(54385),i=a(59801);n.Z.addInitializer({name:"modal",initializer:function(){var e=document.getElementById("modal-mount");e&&i.Z.init(e)},before:"store"})},22331:(e,t,a)=>{"use strict";var n=a(30381),i=a.n(n),s=a(54385),o=a(19755);s.Z.addInitializer({name:"moment",initializer:function(){i().locale(o("html").attr("lang"))}})},21513:(e,t,a)=>{"use strict";var n=a(54385),i=a(53328);n.Z.addInitializer({name:"page-title",initializer:function(e){i.Z.init(e.get("SETTINGS").forum_index_title,e.get("SETTINGS").forum_name)}})},98749:(e,t,a)=>{"use strict";var n=a(54385),i=a(78657),s=a(53904),o=a(55547);n.Z.addInitializer({name:"polls",initializer:function(){o.Z.init(i.Z,s.Z)}})},98251:(e,t,a)=>{"use strict";var n=a(54385),i=a(78657),s=a(64646),o=a(53904);n.Z.addInitializer({name:"posting",initializer:function(){s.Z.init(i.Z,o.Z,document.getElementById("posting-mount"))}})},6720:(e,t,a)=>{"use strict";var n=a(54385),i=a(35486),s=a(90287);n.Z.addInitializer({name:"reducer:auth",initializer:function(e){s.Z.addReducer("auth",i.ZP,Object.assign({isAuthenticated:e.get("isAuthenticated"),isAnonymous:!e.get("isAuthenticated"),user:e.get("user")},i.E3))},before:"store"})},66806:(e,t,a)=>{"use strict";var n=a(54385),i=a(993),s=a(90287);n.Z.addInitializer({name:"reducer:overlay",initializer:function(e){s.Z.addReducer("overlay",i.ZP,i.E3)},before:"store"})},10846:(e,t,a)=>{"use strict";var n=a(54385),i=a(8154),s=a(90287);n.Z.addInitializer({name:"reducer:participants",initializer:function(){var e=null;n.Z.has("THREAD")&&(e=n.Z.get("THREAD").participants),s.Z.addReducer("participants",i.ZP,e||[])},before:"store"})},18255:(e,t,a)=>{"use strict";var n=a(54385),i=a(59752),s=a(90287);n.Z.addInitializer({name:"reducer:poll",initializer:function(){var e;e=n.Z.has("THREAD")&&n.Z.get("THREAD").poll?(0,i.ZB)(n.Z.get("THREAD").poll):{},s.Z.addReducer("poll",i.ZP,e)},before:"store"})},14113:(e,t,a)=>{"use strict";var n=a(54385),i=a(21981),s=a(90287);n.Z.addInitializer({name:"reducer:posts",initializer:function(){var e;e=n.Z.has("POSTS")?(0,i.ZB)(n.Z.get("POSTS")):{isLoaded:!1,isBusy:!1},s.Z.addReducer("posts",i.ZP,e)},before:"store"})},24444:(e,t,a)=>{"use strict";var n=a(54385),i=a(58598),s=a(90287);n.Z.addInitializer({name:"reducer:profile-details",initializer:function(){var e=null;n.Z.has("PROFILE_DETAILS")&&(e=n.Z.get("PROFILE_DETAILS")),s.Z.addReducer("profile-details",i.ZP,e||{})},before:"store"})},1764:(e,t,a)=>{"use strict";var n=a(54385),i=a(27519),s=a(90287);n.Z.addInitializer({name:"reducer:profile-hydrate",initializer:function(){n.Z.has("PROFILE")&&s.Z.dispatch((0,i.ZB)(n.Z.get("PROFILE")))},after:"store"})},68351:(e,t,a)=>{"use strict";var n=a(54385),i=a(27519),s=a(90287);n.Z.addInitializer({name:"reducer:profile",initializer:function(){s.Z.addReducer("profile",i.ZP,{})},before:"store"})},81521:(e,t,a)=>{"use strict";var n=a(54385),i=a(16427),s=a(90287);n.Z.addInitializer({name:"reducer:search",initializer:function(){s.Z.addReducer("search",i.ZP,Object.assign({},i.E3,{providers:n.Z.get("SEARCH_PROVIDERS")||[],query:n.Z.get("SEARCH_QUERY")||""}))},before:"store"})},19984:(e,t,a)=>{"use strict";var n=a(54385),i=a(77751),s=a(90287);n.Z.addInitializer({name:"reducer:selection",initializer:function(){s.Z.addReducer("selection",i.ZP,[])},before:"store"})},41229:(e,t,a)=>{"use strict";var n=a(54385),i=a(27346),s=a(90287);n.Z.addInitializer({name:"reducer:snackbar",initializer:function(){s.Z.addReducer("snackbar",i.ZP,i.E3)},before:"store"})},43589:(e,t,a)=>{"use strict";var n=a(54385),i=a(7738),s=a(90287);n.Z.addInitializer({name:"reducer:thread",initializer:function(){var e;e=n.Z.has("THREAD")?(0,i.ZB)(n.Z.get("THREAD")):{isBusy:!1},s.Z.addReducer("thread",i.ZP,e)},before:"store"})},24108:(e,t,a)=>{"use strict";var n=a(54385),i=a(61340),s=a(90287);n.Z.addInitializer({name:"reducer:threads",initializer:function(){s.Z.addReducer("threads",i.ZP,[])},before:"store"})},33934:(e,t,a)=>{"use strict";var n=a(54385),i=a(85586),s=a(90287);n.Z.addInitializer({name:"reducer:tick",initializer:function(){s.Z.addReducer("tick",i.ZP,i.E3)},before:"store"})},85577:(e,t,a)=>{"use strict";var n=a(54385),i=a(48927),s=a(90287);n.Z.addInitializer({name:"reducer:username-history",initializer:function(){s.Z.addReducer("username-history",i.ZP,[])},before:"store"})},83526:(e,t,a)=>{"use strict";var n=a(54385),i=a(6935),s=a(90287);n.Z.addInitializer({name:"reducer:users",initializer:function(){s.Z.addReducer("users",i.ZP,[])},before:"store"})},43060:(e,t,a)=>{"use strict";var n=a(54385),i=a(53904),s=a(90287);n.Z.addInitializer({name:"snackbar",initializer:function(){i.Z.init(s.Z)},after:"store"})},92292:(e,t,a)=>{"use strict";var n=a(54385),i=a(90287);n.Z.addInitializer({name:"store",initializer:function(){i.Z.init()},before:"_end"})},33409:(e,t,a)=>{"use strict";var n=a(54385),i=a(85586),s=a(90287);n.Z.addInitializer({name:"tick-start",initializer:function(){window.setInterval((function(){s.Z.dispatch((0,i.bq)())}),5e4)},after:"store"})},31341:(e,t,a)=>{"use strict";var n=a(54385),i=a(96142),s=a(59940);n.Z.addInitializer({name:"zxcvbn",initializer:function(){s.Z.init(i.Z)}})},35486:(e,t,a)=>{"use strict";a.d(t,{E3:()=>i,ZP:()=>h,r$:()=>u,w7:()=>p,yH:()=>c,zB:()=>d});var n=a(6935),i={signedIn:!1,signedOut:!1},s="UPDATE_AUTHENTICATED_USER",o="PATCH_USER",r="SIGN_IN",l="SIGN_OUT";function c(e){return{type:s,data:e}}function u(e){return{type:o,patch:e}}function d(e){return{type:r,user:e}}function p(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:l,soft:e}}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case o:var a=Object.assign({},e);return a.user=Object.assign({},e.user,t.patch),a;case s:var c=Object.assign({},e);return c.user=Object.assign({},e.user,t.data),c;case r:return Object.assign({},e,{signedIn:t.user});case l:return Object.assign({},e,{isAuthenticated:!1,isAnonymous:!0,signedOut:!t.soft});case n.oB:if(e.isAuthenticated&&e.user.id===t.userId){var u=Object.assign({},e);return u.user=Object.assign({},e.user,{avatars:t.avatars}),u}return e;case n.D9:if(e.isAuthenticated&&e.user.id===t.userId){var d=Object.assign({},e);return d.user=Object.assign({},e.user,{username:t.username,slug:t.slug}),d}return e;default:return e}}},993:(e,t,a)=>{"use strict";a.d(t,{AU:()=>c,E3:()=>v,T5:()=>p,UL:()=>u,ZP:()=>m,hN:()=>d,xv:()=>h});var n="OPEN_SITE_NAV",i="OPEN_SEARCH",s="OPEN_NOTIFICATIONS",o="OPEN_PRIVATE_THREADS",r="OPEN_USER_NAV",l="CLOSE_OVERLAYS";function c(){return{type:n}}function u(){return{type:i}}function d(){return{type:s}}function p(){return{type:r}}function h(){return{type:l}}var v={siteNav:!1,search:!1,notifications:!1,privateThreads:!1,userNav:!1};function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case n:return Object.assign({},e,v,{siteNav:!0});case i:return Object.assign({},e,v,{search:!0});case s:return Object.assign({},e,v,{notifications:!0});case o:return Object.assign({},e,v,{privateThreads:!0});case r:return Object.assign({},e,v,{userNav:!0});case l:return Object.assign({},e,v);default:return e}}},8154:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>s,gx:()=>i});var n="REPLACE_PARTICIPANTS";function i(e){return{type:n,state:e}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t.type===n?t.state:e}},59752:(e,t,a)=>{"use strict";a.d(t,{Ar:()=>p,Od:()=>v,ZB:()=>u,ZH:()=>r,ZP:()=>m,b9:()=>l,gx:()=>h,n6:()=>d});var n=a(30381),i=a.n(n),s="BUSY_POLL",o="RELEASE_POLL",r="REMOVE_POLL",l="REPLACE_POLL",c="UPDATE_POLL";function u(e){var t=!1;for(var a in e.choices)if(e.choices[a].selected){t=!0;break}return Object.assign({},e,{posted_on:i()(e.posted_on),hasSelectedChoices:t,endsOn:e.length?i()(e.posted_on).add(e.length,"days"):null,isBusy:!1})}function d(){return{type:s}}function p(){return{type:o}}function h(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:l,state:t?e:u(e)}}function v(){return{type:r}}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case s:return Object.assign({},e,{isBusy:!0});case o:return Object.assign({},e,{isBusy:!1});case r:return{isBusy:!1};case l:return t.state;case c:return Object.assign({},e,t.data);default:return e}}},92747:(e,t,a)=>{"use strict";a.d(t,{Qu:()=>o,ZB:()=>r,ZP:()=>u,r$:()=>c});var n=a(30381),i=a.n(n),s=a(6935),o="PATCH_POST";function r(e){return Object.assign({},e,{posted_on:i()(e.posted_on),updated_on:i()(e.updated_on),hidden_on:i()(e.hidden_on),attachments:e.attachments?e.attachments.map(l):null,poster:e.poster?(0,s.Ru)(e.poster):null,isSelected:!1,isBusy:!1,isDeleted:!1})}function l(e){return Object.assign({},e,{uploaded_on:i()(e.uploaded_on)})}function c(e,t){return{type:o,post:e,patch:t}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t.type===o&&e.id==t.post.id?Object.assign({},e,t.patch):e}},21981:(e,t,a)=>{"use strict";a.d(t,{R3:()=>f,Rz:()=>Z,Vx:()=>g,Ys:()=>d,ZB:()=>v,ZP:()=>b,_H:()=>p,kR:()=>h,zD:()=>m});var n=a(92747),i="APPEND_POSTS",s="SELECT_POST",o="DESELECT_POST",r="DESELECT_POSTS",l="LOAD_POSTS",c="UNLOAD_POSTS",u="UPDATE_POSTS";function d(e){return{type:s,post:e}}function p(e){return{type:o,post:e}}function h(){return{type:r}}function v(e){return Object.assign({},e,{results:e.results.map(n.ZB),isLoaded:!0,isBusy:!1,isSelected:!1})}function m(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:l,state:t?e:v(e)}}function f(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:i,state:t?e:v(e)}}function Z(){return{type:c}}function g(e){return{type:u,update:e}}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case s:var a=e.results.map((function(e){return e.id==t.post.id?Object.assign({},e,{isSelected:!0}):e}));return Object.assign({},e,{results:a});case o:var d=e.results.map((function(e){return e.id==t.post.id?Object.assign({},e,{isSelected:!1}):e}));return Object.assign({},e,{results:d});case r:var p=e.results.map((function(e){return Object.assign({},e,{isSelected:!1})}));return Object.assign({},e,{results:p});case i:var h=e.results.slice(),v=e.results.map((function(e){return e.id}));return t.state.results.map((function(e){-1===v.indexOf(e.id)&&h.push(e)})),Object.assign({},t.state,{results:h});case l:return t.state;case c:return Object.assign({},e,{isLoaded:!1});case u:return Object.assign({},e,t.update);case n.Qu:var m=e.results.map((function(e){return(0,n.ZP)(e,t)}));return Object.assign({},e,{results:m});default:return e}}},58598:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>s,zD:()=>i});var n="LOAD_DETAILS";function i(e){return{type:n,newState:e}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t.type===n?t.newState:e}},27519:(e,t,a)=>{"use strict";a.d(t,{ZB:()=>l,ZP:()=>u,r$:()=>c});var n=a(30381),i=a.n(n),s=a(6935),o="HYDRATE_PROFILE",r="PATCH_PROFILE";function l(e){return{type:o,profile:e}}function c(e){return{type:r,patch:e}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case o:return Object.assign({},t.profile,{joined_on:i()(t.profile.joined_on),status:(0,s.$q)(t.profile.status)});case r:return Object.assign({},e,t.patch);case s.oB:return e.id===t.userId?Object.assign({},e,{avatars:t.avatars}):e;case s.D9:return e.id===t.userId?Object.assign({},e,{username:t.username,slug:t.slug}):e;default:return e}}},16427:(e,t,a)=>{"use strict";a.d(t,{E3:()=>o,P0:()=>l,Vx:()=>r,ZP:()=>c});var n="REPLACE_SEARCH",i="UPDATE_SEARCH",s="UPDATE_SEARCH_PROVIDER",o={isLoading:!1,query:"",providers:[]};function r(e){return{type:i,update:e}}function l(e){return{type:s,provider:e}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case n:return t.state;case i:return Object.assign({},e,t.update);case s:return Object.assign({},e,{providers:e.providers.map((function(e){return e.id===t.provider.id?t.provider:e}))});default:return e}}},77751:(e,t,a)=>{"use strict";a.d(t,{$6:()=>r,YP:()=>l,ZP:()=>u,wc:()=>c});var n=a(20370),i="SELECT_ALL",s="SELECT_NONE",o="SELECT_ITEM";function r(e){return{type:i,items:e}}function l(){return{type:s}}function c(e){return{type:o,item:e}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case i:return t.items;case s:return[];case o:return(0,n.ZN)(e,t.item);default:return e}}},27346:(e,t,a)=>{"use strict";a.d(t,{E3:()=>n,OV:()=>o,ZP:()=>l,p2:()=>r});var n={type:"info",message:"",isVisible:!1},i="SHOW_SNACKBAR",s="HIDE_SNACKBAR";function o(e,t){return{type:i,message:e,messageType:t}}function r(){return{type:s}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t.type===i?{type:t.messageType,message:t.message,isVisible:!0}:t.type===s?Object.assign({},e,{isVisible:!1}):e}},7738:(e,t,a)=>{"use strict";a.d(t,{Ar:()=>h,Vx:()=>m,ZB:()=>d,ZP:()=>Z,gx:()=>v,n6:()=>p,y8:()=>f});var n=a(30381),i=a.n(n),s=a(59752),o="BUSY_THREAD",r="RELEASE_THREAD",l="REPLACE_THREAD",c="UPDATE_THREAD",u="UPDATE_THREAD_ACL";function d(e){return Object.assign({},e,{started_on:i()(e.started_on),last_post_on:i()(e.last_post_on),best_answer_marked_on:e.best_answer_marked_on?i()(e.best_answer_marked_on):null,isBusy:!1})}function p(){return{type:o}}function h(){return{type:r}}function v(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:l,state:t?e:d(e)}}function m(e){return{type:c,data:e}}function f(e){return{type:u,data:e}}function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case o:return Object.assign({},e,{isBusy:!0});case r:return Object.assign({},e,{isBusy:!1});case s.ZH:return Object.assign({},e,{poll:null});case s.b9:return Object.assign({},e,{poll:t.state});case l:return t.state;case c:return Object.assign({},e,t.data);case u:var a=Object.assign({},e.acl,t.data);return Object.assign({},e,{acl:a});default:return e}}},61340:(e,t,a)=>{"use strict";a.d(t,{R3:()=>d,V8:()=>h,ZB:()=>v,ZP:()=>Z,l8:()=>p,r$:()=>m}),a(30381);var n=a(89759),i="APPEND_THREADS",s="DELETE_THREAD",o="FILTER_THREADS",r="HYDRATE_THREADS",l="PATCH_THREAD",c="SORT_THREADS",u=["can_announce","can_approve","can_close","can_hide","can_move","can_merge","can_pin","can_review"];function d(e,t){return{type:i,items:e,sorting:t}}function p(e){return{type:s,thread:e}}function h(e,t){return{type:o,category:e,categoriesMap:t}}function v(e){return{type:r,items:e}}function m(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:l,thread:e,patch:t,sorting:a}}function f(e){return Object.assign({},e,{moderation:(t=e.acl,a=[],u.forEach((function(e){t[e]&&a.push(e)})),a)});var t,a}function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case i:var a=(0,n.Z)(t.items.map(f),e);return a.sort(t.sorting);case s:return e.filter((function(e){return e.id!==t.thread.id}));case o:return e.filter((function(e){var a=t.categoriesMap[e.category];return a.lft>=t.category.lft&&a.rght<=t.category.rght||2==e.weight}));case r:return t.items.map(f);case l:var u=e.map((function(e){return e.id===t.thread.id?Object.assign({},e,t.patch):e}));return t.sorting?u.sort(t.sorting):u;case c:return e.sort(t.sorting);default:return e}}},85586:(e,t,a)=>{"use strict";a.d(t,{E3:()=>n,ZP:()=>o,bq:()=>s});var n={tick:0},i="TICK";function s(){return{type:i}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t.type===i?Object.assign({},e,{tick:e.tick+1}):e}},48927:(e,t,a)=>{"use strict";a.d(t,{KP:()=>u,R3:()=>d,ZB:()=>p,ZP:()=>v});var n=a(30381),i=a.n(n),s=a(6935),o=a(89759),r="ADD_NAME_CHANGE",l="APPEND_HISTORY",c="HYDRATE_HISTORY";function u(e,t,a){return{type:r,change:e,user:t,changedBy:a}}function d(e){return{type:l,items:e}}function p(e){return{type:c,items:e}}function h(e){return Object.assign({},e,{changed_on:i()(e.changed_on)})}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case r:var a=e.slice();return a.unshift({id:Math.floor(Date.now()/1e3),changed_by:t.changedBy,changed_by_username:t.changedBy.username,changed_on:i()(),new_username:t.change.username,old_username:t.user.username}),a;case l:return(0,o.Z)(e,t.items.map(h));case c:return t.items.map(h);case s.oB:return e.map((function(e){return(e=Object.assign({},e)).changed_by&&e.changed_by.id===t.userId&&(e.changed_by=Object.assign({},e.changed_by,{avatars:t.avatars})),e}));case s.D9:return e.map((function(e){return(e=Object.assign({},e)).changed_by&&e.changed_by.id===t.userId&&(e.changed_by=Object.assign({},e.changed_by,{username:t.username,slug:t.slug})),Object.assign({},e)}));default:return e}}},6935:(e,t,a)=>{"use strict";a.d(t,{$q:()=>p,D9:()=>c,R3:()=>u,Ru:()=>h,ZB:()=>d,ZP:()=>f,_S:()=>m,n1:()=>v,oB:()=>l});var n=a(30381),i=a.n(n),s=a(89759),o="APPEND_USERS",r="HYDRATE_USERS",l="UPDATE_AVATAR",c="UPDATE_USERNAME";function u(e){return{type:o,items:e}}function d(e){return{type:r,items:e}}function p(e){return e?Object.assign({},e,{last_click:e.last_click?i()(e.last_click):null,banned_until:e.banned_until?i()(e.banned_until):null}):null}function h(e){return Object.assign({},e,{joined_on:i()(e.joined_on),status:p(e.status)})}function v(e,t){return{type:l,userId:e.id,avatars:t}}function m(e,t,a){return{type:c,userId:e.id,username:t,slug:a}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case o:return(0,s.Z)(e,t.items.map(h));case r:return t.items.map(h);case l:return e.map((function(e){return(e=Object.assign({},e)).id===t.userId&&(e.avatars=t.avatars),e}));default:return e}}},78657:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var n=a(15671),i=a(43144),s=a(19755);const o=new(function(){function e(){(0,n.Z)(this,e),this._cookieName=null,this._csrfToken=null,this._locks={}}return(0,i.Z)(e,[{key:"init",value:function(e){this._cookieName=e}},{key:"getCsrfToken",value:function(){if(-1!==document.cookie.indexOf(this._cookieName)){var e=new RegExp(this._cookieName+"=([^;]*)"),t=document.cookie.match(e)[0];return t?t.split("=")[1]:null}return null}},{key:"request",value:function(e,t,a){var n=this;return new Promise((function(i,o){var r={url:t,method:e,headers:{"X-CSRFToken":n.getCsrfToken()},data:a?JSON.stringify(a):null,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){i(e)},error:function(e){var t=e.responseJSON||{};t.status=e.status,0===t.status&&(t.detail=pgettext("ajax client error","Could not connect to the site.")),404===t.status&&(t.detail&&"NOT FOUND"!==t.detail||(t.detail=pgettext("ajax client error","Action link is invalid."))),500!==t.status||t.detail||(t.detail=pgettext("ajax client error","Unknown error has occurred.")),t.statusText=e.statusText,o(t)}};s.ajax(r)}))}},{key:"get",value:function(e,t,a){if(t&&(e+="?"+s.param(t)),a){var n=this;return this._locks[a]&&(this._locks[a].url=e),this._locks[a]&&this._locks[a].waiter?{then:function(){}}:this._locks[a]&&this._locks[a].wait?(this._locks[a].waiter=!0,new Promise((function(t,i){var s=function e(s){n._locks[a].wait?window.setTimeout((function(){e(s)}),300):n._locks[a].url!==s?e(n._locks[a].url):(n._locks[a].waiter=!1,n.request("GET",n._locks[a].url).then((function(i){n._locks[a].url===s?t(i):(n._locks[a].waiter=!0,e(n._locks[a].url))}),(function(t){n._locks[a].url===s?i(t):(n._locks[a].waiter=!0,e(n._locks[a].url))})))};window.setTimeout((function(){s(e)}),300)}))):(this._locks[a]={url:e,wait:!0,waiter:!1},new Promise((function(t,i){n.request("GET",e).then((function(i){n._locks[a].wait=!1,n._locks[a].url===e&&t(i)}),(function(t){n._locks[a].wait=!1,n._locks[a].url===e&&i(t)}))})))}return this.request("GET",e)}},{key:"post",value:function(e,t){return this.request("POST",e,t)}},{key:"patch",value:function(e,t){return this.request("PATCH",e,t)}},{key:"put",value:function(e,t){return this.request("PUT",e,t)}},{key:"delete",value:function(e,t){return this.request("DELETE",e,t)}},{key:"upload",value:function(e,t,a){var n=this;return new Promise((function(i,o){var r={url:e,method:"POST",headers:{"X-CSRFToken":n.getCsrfToken()},data:t,contentType:!1,processData:!1,xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){e.lengthComputable&&a(Math.round(e.loaded/e.total*100))}),!1),e},success:function(e){i(e)},error:function(e){var t=e.responseJSON||{};t.status=e.status,0===t.status&&(t.detail=pgettext("api error","Could not connect to the site.")),413!==t.status||t.detail||(t.detail=pgettext("api error","Upload was rejected by the site as too large.")),404===t.status&&(t.detail&&"NOT FOUND"!==t.detail||(t.detail=pgettext("api error","Action link is invalid."))),500!==t.status||t.detail||(t.detail=pgettext("api error","Unknown error has occurred.")),t.statusText=e.statusText,o(t)}};s.ajax(r)}))}}]),e}())},98274:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var n=a(15671),i=a(43144),s=a(35486);const o=new(function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,[{key:"init",value:function(e,t,a){this._store=e,this._local=t,this._modal=a,this.syncSession(),this.watchState()}},{key:"syncSession",value:function(){var e=this._store.getState().auth;e.isAuthenticated?this._local.set("auth",{isAuthenticated:!0,username:e.user.username}):this._local.set("auth",{isAuthenticated:!1})}},{key:"watchState",value:function(){var e=this,t=this._store.getState().auth;this._local.watch("auth",(function(a){a.isAuthenticated?e._store.dispatch((0,s.zB)({username:a.username})):t.isAuthenticated&&e._store.dispatch((0,s.w7)())})),this._modal.hide()}},{key:"signIn",value:function(e){this._store.dispatch((0,s.zB)(e)),this._local.set("auth",{isAuthenticated:!0,username:e.username}),this._modal.hide()}},{key:"signOut",value:function(){this._store.dispatch((0,s.w7)()),this._local.set("auth",{isAuthenticated:!1}),this._modal.hide()}},{key:"softSignOut",value:function(){this._store.dispatch((0,s.w7)(!0)),this._local.set("auth",{isAuthenticated:!1}),this._modal.hide()}}]),e}())},93825:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>b});var n,i=a(22928),s=a(79340),o=a(6215),r=a(61120),l=a(15671),c=a(43144),u=a(57588),d=a.n(u),p=a(96359);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,r.Z)(e);if(t){var i=(0,r.Z)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,o.Z)(this,a)}}var v=function(){function e(){(0,l.Z)(this,e)}return(0,c.Z)(e,[{key:"init",value:function(e,t,a,n){this._context=e,this._ajax=t,this._include=a,this._snackbar=n}}]),e}(),m=function(e){(0,s.Z)(a,e);var t=h(a);function a(){return(0,l.Z)(this,a),t.apply(this,arguments)}return(0,c.Z)(a,[{key:"load",value:function(){return new Promise((function(e){e()}))}},{key:"validator",value:function(){return null}},{key:"component",value:function(){return null}}]),a}(v),f=function(e){(0,s.Z)(a,e);var t=h(a);function a(){return(0,l.Z)(this,a),t.apply(this,arguments)}return(0,c.Z)(a,[{key:"load",value:function(){var e=this;return new Promise((function(t,a){e._ajax.get(e._context.get("CAPTCHA_API")).then((function(a){e.question=a.question,e.helpText=a.help_text,t()}),(function(){e._snackbar.error(pgettext("captcha field","Failed to load CAPTCHA.")),a()}))}))}},{key:"validator",value:function(){return[]}},{key:"component",value:function(e){return(0,i.Z)(p.Z,{label:this.question,for:"id_captcha",labelClass:e.labelClass||"",controlClass:e.controlClass||"",validation:e.form.state.errors.captcha,helpText:this.helpText||null},void 0,(0,i.Z)("input",{"aria-describedby":"id_captcha_status",className:"form-control",disabled:e.form.state.isLoading,id:"id_captcha",onChange:e.form.bindInput("captcha"),type:"text",value:e.form.state.captcha}))}}]),a}(v),Z=function(e){(0,s.Z)(a,e);var t=h(a);function a(){return(0,l.Z)(this,a),t.apply(this,arguments)}return(0,c.Z)(a,[{key:"componentDidMount",value:function(){var e=this;grecaptcha.render("recaptcha",{sitekey:this.props.siteKey,callback:function(t){e.props.binding({target:{value:t}})}})}},{key:"render",value:function(){return n||(n=(0,i.Z)("div",{id:"recaptcha"}))}}]),a}(d().Component),g=function(e){(0,s.Z)(a,e);var t=h(a);function a(){return(0,l.Z)(this,a),t.apply(this,arguments)}return(0,c.Z)(a,[{key:"load",value:function(){return this._include.include("https://www.google.com/recaptcha/api.js",!0),new Promise((function(e){!function t(){"undefined"==typeof grecaptcha?window.setTimeout((function(){t()}),200):e()}()}))}},{key:"validator",value:function(){return[]}},{key:"component",value:function(e){return(0,i.Z)(p.Z,{label:pgettext("captcha field","Please solve the quick test"),for:"id_captcha",labelClass:e.labelClass||"",controlClass:e.controlClass||"",validation:e.form.state.errors.captcha,helpText:pgettext("captcha field","This test helps us prevent automated spam registrations on the site.")},void 0,(0,i.Z)(Z,{binding:e.form.bindInput("captcha"),siteKey:this._context.get("SETTINGS").recaptcha_site_key}))}}]),a}(v);const b=new(function(){function e(){(0,l.Z)(this,e)}return(0,c.Z)(e,[{key:"init",value:function(e,t,a,n){switch(e.get("SETTINGS").captcha_type){case"no":this._captcha=new m;break;case"qa":this._captcha=new f;break;case"re":this._captcha=new g}this._captcha.init(e,t,a,n)}},{key:"load",value:function(){return this._captcha.load()}},{key:"validator",value:function(){return this._captcha.validator()}},{key:"component",value:function(e){return this._captcha.component(e)}}]),e}())},96142:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var n=a(15671),i=a(43144),s=a(19755);const o=new(function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,[{key:"init",value:function(e){this._staticUrl=e,this._included=[]}},{key:"include",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];-1===this._included.indexOf(e)&&(this._included.push(e),this._include(e,t))}},{key:"_include",value:function(e,t){s.ajax({url:(t?"":this._staticUrl)+e,cache:!0,dataType:"script"})}}]),e}())},62833:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var n=a(15671),i=a(43144),s=window.localStorage;const o=new(function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,[{key:"init",value:function(e){var t=this;this._prefix=e,this._watchers=[],window.addEventListener("storage",(function(e){var a=JSON.parse(e.newValue);t._watchers.forEach((function(t){t.key===e.key&&e.oldValue!==e.newValue&&t.callback(a)}))}))}},{key:"set",value:function(e,t){s.setItem(this._prefix+e,JSON.stringify(t))}},{key:"get",value:function(e){var t=s.getItem(this._prefix+e);return t?JSON.parse(t):null}},{key:"watch",value:function(e,t){this._watchers.push({key:this._prefix+e,callback:t})}}]),e}())},59801:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var n=a(15671),i=a(43144),s=a(73935),o=a.n(s),r=a(4869),l=a(19755);const c=new(function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,[{key:"init",value:function(e){var t=this;this._element=e,this._modal=l(e).modal({show:!1}),this._modal.on("hidden.bs.modal",(function(){o().unmountComponentAtNode(t._element)}))}},{key:"show",value:function(e){(0,r.Z)(e,this._element.id),this._modal.modal("show")}},{key:"hide",value:function(){this._modal.modal("hide")}}]),e}())},53328:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(15671),i=a(43144);const s=new(function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,[{key:"init",value:function(e,t){this._indexTitle=e,this._forumName=t}},{key:"set",value:function(e){if(e){"string"==typeof e&&(e={title:e});var t=e.title;e.page>1&&(t+=" ("+interpolate(pgettext("page title pagination","page: %(page)s"),{page:e.page},!0)+")"),e.parent&&(t+=" | "+e.parent),document.title=t+" | "+this._forumName}else document.title=this._indexTitle||this._forumName}}]),e}())},55547:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(15671),i=a(43144);const s=new(function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,[{key:"init",value:function(e,t){this._ajax=e,this._snackbar=t,this._polls={}}},{key:"start",value:function(e){var t=this;this.stop(e.poll);var a=function a(){t._polls[e.poll]=e,t._ajax.get(e.url,e.data||null).then((function(n){t._polls[e.poll]._stopped||(e.update(n),t._polls[e.poll].timeout=window.setTimeout(a,e.frequency))}),(function(a){t._polls[e.poll]._stopped||(e.error?e.error(a):t._snackbar.apiError(a))}))};e.delayed?this._polls[e.poll]={timeout:window.setTimeout(a,e.frequency)}:a()}},{key:"stop",value:function(e){this._polls[e]&&(window.clearTimeout(this._polls[e].timeout),this._polls[e]._stopped=!0)}}]),e}())},64646:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var n=a(15671),i=a(43144),s=a(4942),o=a(57588),r=a.n(o),l=a(73935),c=a.n(l),u=a(9771),d=a(4869);const p=new(function(){function e(){var t=this;(0,n.Z)(this,e),(0,s.Z)(this,"close",(function(){t.unsetBeforeUnload(),t._props=null,t._isOpen&&!t._isClosing&&(t._isClosing=!0,t._mount.classList.remove("show"),window.setTimeout((function(){c().unmountComponentAtNode(t._mount),t._observer.unobserve(t._mount),t._spacer.style.height="0px;",t._isClosing=!1,t._isOpen=!1,t._mode=null}),300))}))}return(0,i.Z)(e,[{key:"init",value:function(e,t,a){var n=this;this._ajax=e,this._snackbar=t,this._mount=a,this._mode=null,this._spacer=document.getElementById("posting-spacer"),this._observer=new ResizeObserver((function(e){n._spacer.style.height=e[0].contentRect.height+"px"})),this._isOpen=!1,this._isClosing=!1,this._beforeunloadSet=!1,this._props=null}},{key:"isOpen",value:function(){return this._isOpen}},{key:"setBeforeUnload",value:function(){this._beforeunloadSet||(window.addEventListener("beforeunload",this.beforeUnload,{capture:!0}),this._beforeunloadSet=!0)}},{key:"unsetBeforeUnload",value:function(){window.removeEventListener("beforeunload",this.beforeUnload,{capture:!0}),this._beforeunloadSet=!1}},{key:"beforeUnload",value:function(e){return e.returnValue="true","true"}},{key:"open",value:function(e){if(!1===this._isOpen)"QUOTE"===e.mode?this._mode="REPLY":this._mode=e.mode,this._isOpen=e.submit,this._realOpen(Object.assign({},e,{mode:this._mode}));else if("QUOTE"===e.mode)this._realOpen(Object.assign({},this._props,{config:e.config,context:e.context}));else if(this._isOpen!==e.submit){var t=gettext("You are already working on other message. Do you want to discard it?");window.confirm(t)&&(this._mode=e.mode,this._isOpen=e.submit,this._realOpen(e))}else"REPLY"==this._mode&&"REPLY"==e.mode&&this._realOpen(e)}},{key:"_realOpen",value:function(e){(0,d.Z)(r().createElement(u.ZP,e),this._mount.id),this._props=e,this._mount.classList.add("show"),this._observer.observe(this._mount),this.setBeforeUnload()}}]),e}())},53904:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(15671),i=a(43144),s=a(4942),o=a(27346);const r=new(function(){function e(){var t=this;(0,n.Z)(this,e),(0,s.Z)(this,"alert",(function(e,a){t._timeout?(window.clearTimeout(t._timeout),t._store.dispatch((0,o.p2)()),t._timeout=window.setTimeout((function(){t._timeout=null,t.alert(e,a)}),300)):(t._store.dispatch((0,o.OV)(e,a)),t._timeout=window.setTimeout((function(){t._store.dispatch((0,o.p2)()),t._timeout=null}),5e3))})),(0,s.Z)(this,"info",(function(e){t.alert(e,"info")})),(0,s.Z)(this,"success",(function(e){t.alert(e,"success")})),(0,s.Z)(this,"warning",(function(e){t.alert(e,"warning")})),(0,s.Z)(this,"error",(function(e){t.alert(e,"error")})),(0,s.Z)(this,"apiError",(function(e){var a=e.data?e.data.detail:e.detail;a||(a=0===e.status?pgettext("api error","Could not connect to the site."):404===e.status?pgettext("api error","Action link is invalid."):pgettext("api error","Unknown error has occurred.")),403===e.status&&"Permission denied"===a&&(a=pgettext("api error","You don't have permission to perform this action.")),t.error(a)}))}return(0,i.Z)(e,[{key:"init",value:function(e){this._store=e,this._timeout=null}}]),e}())},90287:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var n=a(15671),i=a(43144),s=a(41438);const o=new(function(){function e(){(0,n.Z)(this,e),this._store=null,this._reducers={},this._initialState={}}return(0,i.Z)(e,[{key:"addReducer",value:function(e,t,a){this._reducers[e]=t,this._initialState[e]=a}},{key:"init",value:function(){this._store=(0,s.createStore)((0,s.combineReducers)(this._reducers),this._initialState)}},{key:"getStore",value:function(){return this._store}},{key:"getState",value:function(){return this._store.getState()}},{key:"dispatch",value:function(e){return this._store.dispatch(e)}}]),e}())},59940:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(15671),i=a(43144);const s=new(function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,[{key:"init",value:function(e){this._include=e,this._isLoaded=!1}},{key:"scorePassword",value:function(e,t){return this._isLoaded?zxcvbn(e,t).score:0}},{key:"load",value:function(){return this._isLoaded?this._loadedPromise():(this._include.include("misago/js/zxcvbn.js"),this._loadingPromise())}},{key:"_loadingPromise",value:function(){var e=this;return new Promise((function(t,a){!function n(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(i+=1)>200?a():"undefined"==typeof zxcvbn?window.setTimeout((function(){n(i)}),200):(e._isLoaded=!0,t())}()}))}},{key:"_loadedPromise",value:function(){return new Promise((function(e){e()}))}}]),e}())},93051:(e,t,a)=>{"use strict";a.d(t,{Z:()=>_});var n,i=a(22928),s=a(30381),o=a.n(s),r=a(57588),l=a.n(r),c=a(73935),u=a.n(c),d=a(37424),p=a(15671),h=a(43144),v=a(79340),m=a(6215),f=a(61120);var Z=function(e){(0,v.Z)(r,e);var t,a,s=(t=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,f.Z)(t);if(a){var i=(0,f.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,m.Z)(this,e)});function r(){return(0,p.Z)(this,r),s.apply(this,arguments)}return(0,h.Z)(r,[{key:"getReasonMessage",value:function(){return this.props.message.html?(0,i.Z)("div",{className:"lead",dangerouslySetInnerHTML:{__html:this.props.message.html}}):(0,i.Z)("p",{className:"lead"},void 0,this.props.message.plain)}},{key:"getExpirationMessage",value:function(){if(this.props.expires){if(this.props.expires.isAfter(o()())){var e=interpolate(pgettext("banned page","This ban expires on %(expires_on)s."),{expires_on:this.props.expires.format("LL, LT")},!0),t=interpolate(pgettext("banned page","This ban expires %(expires_on)s."),{expires_on:this.props.expires.fromNow()},!0);return(0,i.Z)("abbr",{title:e},void 0,t)}return pgettext("banned page","This ban has expired.")}return pgettext("banned page","This ban is permanent.")}},{key:"render",value:function(){return(0,i.Z)("div",{className:"page page-error page-error-banned"},void 0,(0,i.Z)("div",{className:"container"},void 0,(0,i.Z)("div",{className:"message-panel"},void 0,n||(n=(0,i.Z)("div",{className:"message-icon"},void 0,(0,i.Z)("span",{className:"material-icon"},void 0,"highlight_off"))),(0,i.Z)("div",{className:"message-body"},void 0,this.getReasonMessage(),(0,i.Z)("p",{className:"message-footnote"},void 0,this.getExpirationMessage())))))}}]),r}(l().Component),g=a(54385),b=a(90287),y=(0,d.$j)((function(e){return e.tick}))(Z);function _(e,t){if(u().render((0,i.Z)(d.zt,{store:b.Z.getStore()},void 0,(0,i.Z)(y,{message:e.message,expires:e.expires_on?o()(e.expires_on):null})),document.getElementById("page-mount")),void 0===t||t){var a=g.Z.get("SETTINGS").forum_name;document.title=pgettext("banned error title","You are banned")+" | "+a,window.history.pushState({},"",g.Z.get("BANNED_URL"))}}},69130:(e,t,a)=>{"use strict";function n(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[],i=[];if(e.forEach((function(e){i.push(e),i.length===t&&(n.push(i),i=[])})),!1!==a&&i.length>0&&i.length<t)for(var s=i.length;s<t;s++)i.push(a);return i.length&&n.push(i),n}a.d(t,{Z:()=>n})},89759:(e,t,a)=>{"use strict";function n(e,t){var a=[];return e.concat(t).filter((function(e){return-1===a.indexOf(e.id)&&(a.push(e.id),!0)}))}a.d(t,{Z:()=>n})},89627:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};function i(e){return e.replace(/[&<>"']/g,(function(e){return n[e]}))}},48772:(e,t,a)=>{"use strict";function n(e){return e>1073741824?i(e/1073741824)+" GB":e>1048576?i(e/1048576)+" MB":e>1024?i(e/1024)+" KB":i(e)+" B"}function i(e){return e.toFixed(1)}a.d(t,{Z:()=>n})},54031:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>s});var n="12345678990abcdefghijklmnopqrstuvwxyz",i=n.length;function s(e){for(var t=[],a=0;a<e;a++){var s=Math.floor(Math.random()*i);t.push(n[s])}return t.join("")}},4869:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var n=a(22928),i=(a(57588),a(73935)),s=a.n(i),o=a(37424),r=a(90287);function l(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=document.getElementById(t),l=e.props?e:(0,n.Z)(e,{});i&&(a?s().render((0,n.Z)(o.zt,{store:r.Z.getStore()},void 0,l),i):s().render(l,i))}},44039:(e,t,a)=>{"use strict";function n(e,t){return Math.floor(Math.random()*(t-e+1))+e}a.d(t,{e:()=>n})},39633:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var n=a(22928),i=(a(57588),a(73935)),s=a.n(i),o=a(37424),r=a(69987),l=a(90287),c=document.getElementById("page-mount");function u(e){var t={component:e.component||null,childRoutes:[]};e.root?t.childRoutes=[{path:e.root,onEnter:function(t,a){a(null,e.paths[0].path)}}].concat(e.paths):t.childRoutes=e.paths,s().render((0,n.Z)(o.zt,{store:l.Z.getStore()},void 0,(0,n.Z)(r.F0,{routes:t,history:r.mW})),c)}},20370:(e,t,a)=>{"use strict";function n(e,t){if(-1===e.indexOf(t)){var a=e.slice();return a.push(t),a}return e.filter((function(e){return e!==t}))}a.d(t,{ZN:()=>n})},55210:(e,t,a)=>{"use strict";a.d(t,{BS:()=>d,C1:()=>o,Do:()=>c,Ei:()=>u,HR:()=>p,Vb:()=>m,fT:()=>r,gS:()=>h,jA:()=>l,lG:()=>v});var n=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,i=new RegExp("^[0-9a-z_]+$","i"),s=new RegExp("[0-9a-z]","i");function o(e){return function(t){if(!1===t||null===t||0===String(t).trim().length)return e||gettext("This field is required.")}}function r(e){var t=pgettext("agreement validator","You have to accept the terms of service.");return o(e||t)}function l(e){var t=pgettext("agreement validator","You have to accept the privacy policy.");return o(e||t)}function c(e){return function(t){if(!n.test(t))return e||pgettext("email validator","Enter a valid e-mail address.")}}function u(e,t){return function(a){var n="",i=a.trim().length;if(i<e)return n=t?t(e,i):npgettext("value length validator","Ensure this value has at least %(limit_value)s character (it has %(show_value)s).","Ensure this value has at least %(limit_value)s characters (it has %(show_value)s).",e),interpolate(n,{limit_value:e,show_value:i},!0)}}function d(e,t){return function(a){var n="",i=a.trim().length;if(i>e)return n=t?t(e,i):npgettext("value length validator","Ensure this value has at most %(limit_value)s character (it has %(show_value)s).","Ensure this value has at most %(limit_value)s characters (it has %(show_value)s).",e),interpolate(n,{limit_value:e,show_value:i},!0)}}function p(e){return u(e,(function(e){return npgettext("username length validator","Username must be at least %(limit_value)s character long.","Username must be at least %(limit_value)s characters long.",e)}))}function h(e){return d(e,(function(e){return npgettext("username length validator","Username cannot be longer than %(limit_value)s character.","Username cannot be longer than %(limit_value)s characters.",e)}))}function v(){return function(e){var t=e.trim();return i.test(t)?s.test(t)?void 0:pgettext("username validator","Username must contain Latin alphabet letters or digits."):pgettext("username validator","Username can only contain Latin alphabet letters, digits, and an underscore sign.")}}function m(e){return function(t){var a=t.length;if(a<e){var n=npgettext("password length validator","Valid password must be at least %(limit_value)s character long.","Valid password must be at least %(limit_value)s characters long.",e);return interpolate(n,{limit_value:e,show_value:a},!0)}}}},46700:(e,t,a)=>{var n={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn-bd":76225,"./bn-bd.js":76225,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-in":44175,"./en-in.js":44175,"./en-nz":76319,"./en-nz.js":76319,"./en-sg":31662,"./en-sg.js":31662,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":55251,"./es-do.js":55251,"./es-mx":96112,"./es-mx.js":96112,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fil":42549,"./fil.js":42549,"./fo":94694,"./fo.js":94694,"./fr":94470,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":94470,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-deva":27884,"./gom-deva.js":27884,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./oc-lnc":92135,"./oc-lnc.js":92135,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":85893,"./ss.js":85893,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tk":19005,"./tk.js":19005,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-mo":99807,"./zh-mo.js":99807,"./zh-tw":74152,"./zh-tw.js":74152};function i(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=s,e.exports=i,i.id=46700}},i={};function s(e){var t=i[e];if(void 0!==t)return t.exports;var a=i[e]={id:e,loaded:!1,exports:{}};return n[e].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=n,e=[],s.O=(t,a,n,i)=>{if(!a){var o=1/0;for(u=0;u<e.length;u++){for(var[a,n,i]=e[u],r=!0,l=0;l<a.length;l++)(!1&i||o>=i)&&Object.keys(s.O).every((e=>s.O[e](a[l])))?a.splice(l--,1):(r=!1,i<o&&(o=i));if(r){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[a,n,i]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,a)=>(s.f[a](e,t),t)),[])),s.u=e=>"hljs.js",s.miniCssF=e=>{},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},a="misago:",s.l=(e,n,i,o)=>{if(t[e])t[e].push(n);else{var r,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==a+i){r=d;break}}r||(l=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.setAttribute("data-webpack",a+i),r.src=e),t[e]=[n];var p=(a,n)=>{r.onerror=r.onload=null,clearTimeout(h);var i=t[e];if(delete t[e],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach((e=>e(n))),a)return a(n)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=p.bind(null,r.onerror),r.onload=p.bind(null,r.onload),l&&document.head.appendChild(r)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={174:0};s.f.j=(t,a)=>{var n=s.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else{var i=new Promise(((a,i)=>n=e[t]=[a,i]));a.push(n[2]=i);var o=s.p+s.u(t),r=new Error;s.l(o,(a=>{if(s.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;r.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",r.name="ChunkLoadError",r.type=i,r.request=o,n[1](r)}}),"chunk-"+t,t)}},s.O.j=t=>0===e[t];var t=(t,a)=>{var n,i,[o,r,l]=a,c=0;if(o.some((t=>0!==e[t]))){for(n in r)s.o(r,n)&&(s.m[n]=r[n]);if(l)var u=l(s)}for(t&&t(a);c<o.length;c++)i=o[c],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(u)},a=self.webpackChunkmisago=self.webpackChunkmisago||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),s.O(void 0,[736],(()=>s(54385))),s.O(void 0,[736],(()=>s(58339))),s.O(void 0,[736],(()=>s(64109))),s.O(void 0,[736],(()=>s(46226))),s.O(void 0,[736],(()=>s(93240))),s.O(void 0,[736],(()=>s(75147))),s.O(void 0,[736],(()=>s(4894))),s.O(void 0,[736],(()=>s(29223))),s.O(void 0,[736],(()=>s(73806))),s.O(void 0,[736],(()=>s(27015))),s.O(void 0,[736],(()=>s(88097))),s.O(void 0,[736],(()=>s(46016))),s.O(void 0,[736],(()=>s(32488))),s.O(void 0,[736],(()=>s(11768))),s.O(void 0,[736],(()=>s(61323))),s.O(void 0,[736],(()=>s(64752))),s.O(void 0,[736],(()=>s(40949))),s.O(void 0,[736],(()=>s(78679))),s.O(void 0,[736],(()=>s(61814))),s.O(void 0,[736],(()=>s(95920))),s.O(void 0,[736],(()=>s(84333))),s.O(void 0,[736],(()=>s(62419))),s.O(void 0,[736],(()=>s(63290))),s.O(void 0,[736],(()=>s(77031))),s.O(void 0,[736],(()=>s(97751))),s.O(void 0,[736],(()=>s(76093))),s.O(void 0,[736],(()=>s(87336))),s.O(void 0,[736],(()=>s(47549))),s.O(void 0,[736],(()=>s(22331))),s.O(void 0,[736],(()=>s(21513))),s.O(void 0,[736],(()=>s(98749))),s.O(void 0,[736],(()=>s(98251))),s.O(void 0,[736],(()=>s(6720))),s.O(void 0,[736],(()=>s(66806))),s.O(void 0,[736],(()=>s(10846))),s.O(void 0,[736],(()=>s(18255))),s.O(void 0,[736],(()=>s(14113))),s.O(void 0,[736],(()=>s(24444))),s.O(void 0,[736],(()=>s(1764))),s.O(void 0,[736],(()=>s(68351))),s.O(void 0,[736],(()=>s(81521))),s.O(void 0,[736],(()=>s(19984))),s.O(void 0,[736],(()=>s(41229))),s.O(void 0,[736],(()=>s(43589))),s.O(void 0,[736],(()=>s(24108))),s.O(void 0,[736],(()=>s(33934))),s.O(void 0,[736],(()=>s(85577))),s.O(void 0,[736],(()=>s(83526))),s.O(void 0,[736],(()=>s(43060))),s.O(void 0,[736],(()=>s(92292))),s.O(void 0,[736],(()=>s(33409)));var o=s.O(void 0,[736],(()=>s(31341)));o=s.O(o)})();
//# sourceMappingURL=misago.js.map