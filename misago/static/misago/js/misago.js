!function e(t,a,r){function n(s,l){if(!a[s]){if(!t[s]){var i="function"==typeof require&&require;if(!l&&i)return i(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=a[s]={exports:{}};t[s][0].call(c.exports,function(e){var a=t[s][1][e];return n(a?a:e)},c,c.exports,e,t,a,r)}return a[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return d["default"].createElement("div",{className:"modal-header"},d["default"].createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},d["default"].createElement("span",{"aria-hidden":"true"},"×")),d["default"].createElement("h4",{className:"modal-title"},gettext("Add participant")))}Object.defineProperty(a,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.ModalHeader=i;var c=e("react"),d=n(c),f=e("./form"),p=n(f),h=e("./form-group"),m=n(h),b=e("../reducers/participants"),v=r(b),y=e("../reducers/thread"),g=e("../services/ajax"),_=n(g),E=e("../services/modal"),w=n(E),O=e("../services/snackbar"),k=n(O),N=e("../services/store"),j=n(N),x=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onUsernameChange=function(e){a.changeValue("username",e.target.value)},a.state={isLoading:!1,username:""},a}return l(t,e),u(t,[{key:"clean",value:function(){return!!this.state.username.trim().length||(k["default"].error(gettext("You have to enter user name.")),!1)}},{key:"send",value:function(){return _["default"].patch(this.props.thread.api.index,[{op:"add",path:"participants",value:this.state.username},{op:"add",path:"acl",value:1}])}},{key:"handleSuccess",value:function(e){j["default"].dispatch((0,y.updateAcl)(e)),j["default"].dispatch(v.replace(e.participants)),k["default"].success(gettext("New participant has been added to thread.")),w["default"].hide()}},{key:"render",value:function(){return d["default"].createElement("div",{className:"modal-dialog modal-sm",role:"document"},d["default"].createElement("form",{onSubmit:this.handleSubmit},d["default"].createElement("div",{className:"modal-content"},d["default"].createElement(i,null),d["default"].createElement("div",{className:"modal-body"},d["default"].createElement(m["default"],{"for":"id_username",label:gettext("User to add")},d["default"].createElement("input",{id:"id_username",className:"form-control",disabled:this.state.isLoading,onChange:this.onUsernameChange,type:"text",value:this.state.username}))),d["default"].createElement("div",{className:"modal-footer"},d["default"].createElement("button",{className:"btn btn-block btn-primary",disabled:this.state.isLoading},gettext("Add participant"))))))}}]),t}(p["default"]);a["default"]=x},{"../reducers/participants":280,"../reducers/thread":288,"../services/ajax":293,"../services/modal":299,"../services/snackbar":303,"../services/store":304,"./form":41,"./form-group":40,react:"react"}],2:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{user:e.auth.user,signedIn:e.auth.signedIn,signedOut:e.auth.signedOut}}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.select=l;var u=e("react"),c=r(u),d=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"refresh",value:function(){window.location.reload()}},{key:"getMessage",value:function(){return this.props.signedIn?interpolate(gettext("You have signed in as %(username)s. Please refresh the page before continuing."),{username:this.props.signedIn.username},!0):this.props.signedOut?interpolate(gettext("%(username)s, you have been signed out. Please refresh the page before continuing."),{username:this.props.user.username},!0):void 0}},{key:"getClassName",value:function(){return this.props.signedIn||this.props.signedOut?"auth-message show":"auth-message"}},{key:"render",value:function(){return c["default"].createElement("div",{className:this.getClassName()},c["default"].createElement("div",{className:"container"},c["default"].createElement("p",{className:"lead"},this.getMessage()),c["default"].createElement("p",null,c["default"].createElement("button",{type:"button",className:"btn btn-default",onClick:this.refresh},gettext("Reload page"))," ",c["default"].createElement("span",{className:"hidden-xs hidden-sm text-muted"},gettext("or press F5 key.")))))}}]),t}(c["default"].Component);a["default"]=d},{react:"react"}],3:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=e.size||100,a=i["default"].get("MISAGO_PATH")+"user-avatar/";return a+=e.user&&e.user.id?e.user.avatar_hash+"/"+t+"/"+e.user.id+".png":t+".png"}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return s["default"].createElement("img",{className:e.className||"user-avatar",src:n(e),title:gettext("User avatar")})},a.getSrc=n;var o=e("react"),s=r(o),l=e(".."),i=r(l)},{"..":234,react:"react"}],4:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("moment"),u=r(i),c=e("react"),d=r(c),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getReasonMessage",value:function(){return this.props.message.html?d["default"].createElement("div",{className:"lead",dangerouslySetInnerHTML:{__html:this.props.message.html}}):d["default"].createElement("p",{className:"lead"},this.props.message.plain)}},{key:"getExpirationMessage",value:function(){if(this.props.expires){if(this.props.expires.isAfter((0,u["default"])())){var e=interpolate(gettext("This ban expires on %(expires_on)s."),{expires_on:this.props.expires.format("LL, LT")},!0),t=interpolate(gettext("This ban expires %(expires_on)s."),{expires_on:this.props.expires.fromNow()},!0);return d["default"].createElement("abbr",{title:e},t)}return gettext("This ban has expired.")}return gettext("This ban is permanent.")}},{key:"render",value:function(){return d["default"].createElement("div",{className:"page page-error page-error-banned"},d["default"].createElement("div",{className:"container"},d["default"].createElement("div",{className:"message-panel"},d["default"].createElement("div",{className:"message-icon"},d["default"].createElement("span",{className:"material-icon"},"highlight_off")),d["default"].createElement("div",{className:"message-body"},this.getReasonMessage(),d["default"].createElement("p",{className:"message-footnote"},this.getExpirationMessage())))))}}]),t}(d["default"].Component);a["default"]=f},{moment:"moment",react:"react"}],5:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./loader"),d=r(c),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){var e="btn "+this.props.className,t=this.props.disabled;return this.props.loading&&(e+=" btn-loading",t=!0),u["default"].createElement("button",{type:this.props.onClick?"button":"submit",className:e,disabled:t,onClick:this.props.onClick},this.props.children,this.props.loading?u["default"].createElement(d["default"],null):null)}}]),t}(u["default"].Component);a["default"]=f,f.defaultProps={className:"btn-default",type:"submit",loading:!1,disabled:!1,onClick:null}},{"./loader":43,react:"react"}],6:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0}),a.Subcategory=void 0;var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./last-activity"),d=r(c),f=e("./read-icon"),p=r(f),h=e("./stats"),m=r(h),b=e("./subcategory-subcategories"),v=r(b),y=a.Subcategory=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getClassName",value:function(){return this.props.category.css_class?"list-group-item category-subcategory subcategory-"+this.props.category.css_class:"list-group-item category-subcategory"}},{key:"getDescription",value:function(){return this.props.category.description?u["default"].createElement("div",{className:"subcategory-description",dangerouslySetInnerHTML:{__html:this.props.category.description.html}}):null}},{key:"getSubcategories",value:function(){return this.props.category.subcategories.length?u["default"].createElement(v["default"],{categories:this.props.category.subcategories}):null}},{key:"render",value:function(){return u["default"].createElement("li",{className:this.getClassName()},u["default"].createElement("div",{className:"title-row"},u["default"].createElement("h4",null,u["default"].createElement(p["default"],{category:this.props.category}),u["default"].createElement("a",{href:this.props.category.absolute_url,className:"item-title"},this.props.category.name)),u["default"].createElement(m["default"],{category:this.props.category})),u["default"].createElement(d["default"],{category:this.props.category}),this.getDescription(),this.getSubcategories())}}]),t}(u["default"].Component),g=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("ul",{className:"list-group category-subcategories"},this.props.categories.map(function(e){return u["default"].createElement(y,{category:e,key:e.id})}))}}]),t}(u["default"].Component);a["default"]=g},{"./last-activity":8,"./read-icon":9,"./stats":11,"./subcategory-subcategories":12,react:"react"}],7:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./category-subcategories"),d=r(c),f=e("./last-activity"),p=r(f),h=e("./read-icon"),m=r(h),b=e("./stats"),v=r(b),y=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getClassName",value:function(){return this.props.category.css_class?"panel panel-default panel-category panel-category-"+this.props.category.css_class:"panel panel-default panel-category"}},{key:"getHeadingClassName",value:function(){return this.props.category.subcategories.length?"panel-heading":"panel-heading heading-alone"}},{key:"getCategoryDescription",value:function(){return this.props.category.description?u["default"].createElement("div",{className:"panel-body category-description",dangerouslySetInnerHTML:{__html:this.props.category.description.html}}):null}},{key:"getSubcategories",value:function(){return this.props.category.subcategories.length?u["default"].createElement(d["default"],{categories:this.props.category.subcategories}):null}},{key:"render",value:function(){return u["default"].createElement("div",{id:"panel-category-"+this.props.category.id,className:this.getClassName()},u["default"].createElement("div",{className:this.getHeadingClassName()},u["default"].createElement("div",{className:"panel-heading-inblock"},u["default"].createElement("div",{className:"panel-heading-top-row"},u["default"].createElement("h3",{className:"panel-title"},u["default"].createElement(m["default"],{category:this.props.category}),u["default"].createElement("a",{href:this.props.category.absolute_url,className:"item-title"},this.props.category.name)),u["default"].createElement(v["default"],{category:this.props.category})),u["default"].createElement(p["default"],{category:this.props.category}))),this.getCategoryDescription(),this.getSubcategories())}}]),t}(u["default"].Component);a["default"]=y},{"./category-subcategories":6,"./last-activity":8,"./read-icon":9,"./stats":11,react:"react"}],8:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0}),a.ProtectedMessage=a.PrivateMessage=a.EmptyMessage=a.LastPostMessage=void 0;var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../../utils/escape-html"),d=r(c),f='<a href="%(url)s" class="poster-title">%(user)s</a>',p='<span class="poster-title">%(user)s</span>',h='<a href="%(url)s" class="item-title thread-title">%(thread)s</a>',m='<a href="%(url)s" class="last-title" title="%(absolute)s">%(relative)s</a>',b=a.LastPostMessage=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getLastPoster",value:function(){return this.props.category.last_poster_url?interpolate(f,{url:(0,d["default"])(this.props.category.last_poster_url),user:(0,d["default"])(this.props.category.last_poster_name)},!0):interpolate(p,{user:(0,d["default"])(this.props.category.last_poster_name)},!0)}},{key:"getLastThread",value:function(){return interpolate(h,{url:(0,d["default"])(this.props.category.last_thread_url),thread:(0,d["default"])(this.props.category.last_thread_title)},!0)}},{key:"getLastReplyDate",value:function(){return interpolate(m,{url:(0,d["default"])(this.props.category.last_post_url),absolute:(0,d["default"])(this.props.category.last_post_on.format("LLL")),relative:(0,d["default"])(this.props.category.last_post_on.fromNow())},!0)}},{key:"render",value:function(){return u["default"].createElement("p",{className:"category-last-post",dangerouslySetInnerHTML:{__html:interpolate((0,d["default"])(gettext("Last post in %(thread)s by %(user)s %(date)s")),{thread:this.getLastThread(),date:this.getLastReplyDate(),user:this.getLastPoster()},!0)}})}}]),t}(u["default"].Component),v=a.EmptyMessage=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("p",{className:"category-thread-message"},u["default"].createElement("span",{className:"material-icon"},"error_outline"),gettext("This category is empty."))}}]),t}(u["default"].Component),y=a.PrivateMessage=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("p",{className:"category-thread-message"},u["default"].createElement("span",{className:"material-icon"},"info_outline"),gettext("This category is private. You can see only your own threads within it."))}}]),t}(u["default"].Component),g=a.ProtectedMessage=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("p",{className:"category-thread-message"},u["default"].createElement("span",{className:"material-icon"},"highlight_off"),gettext("This category is protected. You can't browse it's contents."))}}]),t}(u["default"].Component),_=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return this.props.category.acl.can_browse?this.props.category.acl.can_see_all_threads?this.props.category.last_thread_title?u["default"].createElement(b,{category:this.props.category}):u["default"].createElement(v,null):u["default"].createElement(y,null):u["default"].createElement(g,null)}}]),t}(u["default"].Component);a["default"]=_},{"../../utils/escape-html":310,react:"react"}],9:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getClassName",value:function(){return this.props.category.is_read?"read-status item-read":"read-status item-new"}},{key:"getTitle",value:function(){return this.props.category.is_closed?this.props.category.is_read?gettext("This category has no new posts. (closed)"):gettext("This category has new posts. (closed)"):this.props.category.is_read?gettext("This category has no new posts."):gettext("This category has new posts.")}},{key:"getIcon",value:function(){return this.props.category.is_closed?this.props.category.is_read?"lock_outline":"lock":this.props.category.is_read?"chat_bubble_outline":"chat_bubble"}},{key:"render",value:function(){return u["default"].createElement("div",{className:this.getClassName(),title:this.getTitle()},u["default"].createElement("span",{className:"material-icon"},this.getIcon()))}}]),t}(u["default"].Component);a["default"]=c},{react:"react"}],10:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{tick:e.tick.tick}}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.select=l;var u=e("moment"),c=r(u),d=e("react"),f=r(d),p=e("./category"),h=r(p),m=e("../../index"),b=r(m),v=e("../../services/polls"),y=r(v),g=function E(e){return Object.assign({},e,{last_post_on:e.last_post_on?(0,c["default"])(e.last_post_on):null,subcategories:e.subcategories.map(E)})},_=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.update=function(e){a.setState({categories:e.map(g)})},a.state={categories:b["default"].get("CATEGORIES").map(g)},a.startPolling(b["default"].get("CATEGORIES_API")),a}return s(t,e),i(t,[{key:"startPolling",value:function(e){y["default"].start({poll:"categories",url:e,frequency:18e4,update:this.update})}},{key:"render",value:function(){return f["default"].createElement("div",{className:"categories-list"},this.state.categories.map(function(e){return f["default"].createElement(h["default"],{category:e,key:e.id})}))}}]),t}(f["default"].Component);a["default"]=_},{"../../index":234,"../../services/polls":301,"./category":7,moment:"moment",react:"react"}],11:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getThreadsCount",value:function(){var e=ngettext("%(threads)s thread","%(threads)s threads",this.props.category.threads);return interpolate(e,{threads:this.props.category.threads},!0)}},{key:"getPostsCount",value:function(){var e=ngettext("%(posts)s post","%(posts)s posts",this.props.category.posts);return interpolate(e,{posts:this.props.category.posts},!0)}},{key:"render",value:function(){return u["default"].createElement("ul",{className:"list-inline category-stats"},u["default"].createElement("li",{className:"category-threads"},this.getThreadsCount()),u["default"].createElement("li",{className:"category-posts"},this.getPostsCount()))}}]),t}(u["default"].Component);a["default"]=c},{react:"react"}],12:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0}),a.Subcategory=void 0;var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./subcategory-subcategories"),d=(r(c),a.Subcategory=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getClassName",value:function(){return this.props.category.css_class?"subcategory subcategory-"+this.props.category.css_class:"subcategory"}},{key:"render",value:function(){return u["default"].createElement("li",null,u["default"].createElement("a",{href:this.props.category.absolute_url,className:this.getClassName()},this.props.category.name))}}]),t}(u["default"].Component)),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("ul",{className:"list-inline subcategories-list"},this.props.categories.map(function(e){return u["default"].createElement(d,{category:e,key:e.id})}))}}]),t}(u["default"].Component);a["default"]=f},{"./subcategory-subcategories":12,react:"react"}],13:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return o["default"].createElement("select",{className:e.className||"form-control",disabled:e.disabled||!1,id:e.id||null,onChange:e.onChange,value:e.value},e.choices.map(function(e){return o["default"].createElement("option",{disabled:e.disabled||!1,key:e.value,value:e.value},"- - ".repeat(e.level)+e.label)}))};var n=e("react"),o=r(n)},{react:"react"}],14:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../.."),d=r(c),f=e("../avatar"),p=(r(f),e("../button")),h=r(p),m=e("../../services/ajax"),b=r(m),v=e("../../services/snackbar"),y=r(v),g=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.cropAvatar=function(){if(a.state.isLoading)return!1;a.setState({isLoading:!0});var e=a.props.upload?"crop_tmp":"crop_org",t=$(".crop-form");b["default"].post(a.props.user.api_url.avatar,{avatar:e,crop:{offset:t.cropit("offset"),zoom:t.cropit("zoom")}}).then(function(e){a.props.onComplete(e.avatar_hash,e.options),y["default"].success(e.detail)},function(e){400===e.status?(y["default"].error(e.detail),a.setState({isLoading:!1})):a.props.showError(e)})},a.state={isLoading:!1},a}return s(t,e),l(t,[{key:"getAvatarSize",value:function(){return this.props.upload?this.props.options.crop_tmp.size:this.props.options.crop_org.size}},{key:"getAvatarSecret",value:function(){return this.props.upload?this.props.options.crop_tmp.secret:this.props.options.crop_org.secret}},{key:"getAvatarHash",value:function(){return this.props.upload||this.props.user.avatar_hash}},{key:"getImagePath",value:function(){return[d["default"].get("MISAGO_PATH")+"user-avatar",this.getAvatarSecret()+":"+this.getAvatarHash(),this.props.user.id+".png"].join("/");
}},{key:"componentDidMount",value:function(){var e=this,t=$(".crop-form");t.width(this.getAvatarSize()),t.cropit({width:this.getAvatarSize(),height:this.getAvatarSize(),imageState:{src:this.getImagePath()},onImageLoaded:function(){if(e.props.upload){var a=t.cropit("zoom"),r=t.cropit("imageSize");if(r.width>r.height){var n=r.width*a,o=(n-e.getAvatarSize())/-2;t.cropit("offset",{x:o,y:0})}else if(r.width<r.height){var s=r.height*a,l=(s-e.getAvatarSize())/-2;t.cropit("offset",{x:0,y:l})}else t.cropit("offset",{x:0,y:0})}else{var i=e.props.options.crop_org.crop;i&&(t.cropit("zoom",i.zoom),t.cropit("offset",{x:i.x,y:i.y}))}}})}},{key:"componentWillUnmount",value:function(){$(".crop-form").cropit("disable")}},{key:"render",value:function(){return u["default"].createElement("div",null,u["default"].createElement("div",{className:"modal-body modal-avatar-crop"},u["default"].createElement("div",{className:"crop-form"},u["default"].createElement("div",{className:"cropit-preview"}),u["default"].createElement("input",{type:"range",className:"cropit-image-zoom-input"}))),u["default"].createElement("div",{className:"modal-footer"},u["default"].createElement("div",{className:"col-md-6 col-md-offset-3"},u["default"].createElement(h["default"],{onClick:this.cropAvatar,loading:this.state.isLoading,className:"btn-primary btn-block"},this.props.upload?gettext("Set avatar"):gettext("Crop image")),u["default"].createElement(h["default"],{onClick:this.props.showIndex,disabled:this.state.isLoading,className:"btn-default btn-block"},gettext("Cancel")))))}}]),t}(u["default"].Component);a["default"]=g},{"../..":234,"../../services/ajax":293,"../../services/snackbar":303,"../avatar":3,"../button":5,react:"react"}],15:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0}),a.Gallery=a.GalleryItem=void 0;var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../button"),d=r(c),f=e("../../index"),p=r(f),h=e("../../services/ajax"),m=r(h),b=e("../../services/snackbar"),v=r(b),y=e("../../utils/batch"),g=r(y),_=a.GalleryItem=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.select=function(){r.props.select(r.props.image)},s=a,o(r,s)}return s(t,e),l(t,[{key:"getClassName",value:function(){return this.props.selection===this.props.image?this.props.disabled?"btn btn-avatar btn-disabled avatar-selected":"btn btn-avatar avatar-selected":this.props.disabled?"btn btn-avatar btn-disabled":"btn btn-avatar"}},{key:"render",value:function(){return u["default"].createElement("button",{type:"button",className:this.getClassName(),disabled:this.props.disabled,onClick:this.select},u["default"].createElement("img",{src:p["default"].get("MEDIA_URL")+this.props.image}))}}]),t}(u["default"].Component),E=a.Gallery=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){var e=this;return u["default"].createElement("div",{className:"avatars-gallery"},u["default"].createElement("h3",null,this.props.name),u["default"].createElement("div",{className:"avatars-gallery-images"},(0,g["default"])(this.props.images,4,null).map(function(t,a){return u["default"].createElement("div",{className:"row",key:a},t.map(function(t,a){return u["default"].createElement("div",{className:"col-xs-3",key:a},t?u["default"].createElement(_,{image:t,disabled:e.props.disabled,select:e.props.select,selection:e.props.selection}):u["default"].createElement("div",{className:"blank-avatar"}))}))})))}}]),t}(u["default"].Component),w=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.select=function(e){a.setState({selection:e})},a.save=function(){return!a.state.isLoading&&(a.setState({isLoading:!0}),void m["default"].post(a.props.user.api_url.avatar,{avatar:"galleries",image:a.state.selection}).then(function(e){a.setState({isLoading:!1}),v["default"].success(e.detail),a.props.onComplete(e.avatar_hash,e.options)},function(e){400===e.status?(v["default"].error(e.detail),a.setState({isLoading:!1})):a.props.showError(e)}))},a.state={selection:null,isLoading:!1},a}return s(t,e),l(t,[{key:"render",value:function(){var e=this;return u["default"].createElement("div",null,u["default"].createElement("div",{className:"modal-body modal-avatar-gallery"},this.props.options.galleries.map(function(t,a){return u["default"].createElement(E,{name:t.name,images:t.images,selection:e.state.selection,disabled:e.state.isLoading,select:e.select,key:a})})),u["default"].createElement("div",{className:"modal-footer"},u["default"].createElement("div",{className:"row"},u["default"].createElement("div",{className:"col-md-6 col-md-offset-3"},u["default"].createElement(d["default"],{onClick:this.save,loading:this.state.isLoading,disabled:!this.state.selection,className:"btn-primary btn-block"},this.state.selection?gettext("Save choice"):gettext("Select avatar")),u["default"].createElement(d["default"],{onClick:this.props.showIndex,disabled:this.state.isLoading,className:"btn-default btn-block"},gettext("Cancel"))))))}}]),t}(u["default"].Component);a["default"]=w},{"../../index":234,"../../services/ajax":293,"../../services/snackbar":303,"../../utils/batch":307,"../button":5,react:"react"}],16:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../avatar"),d=r(c),f=e("../button"),p=r(f),h=e("../loader"),m=r(h),b=e("../../services/ajax"),v=r(b),y=e("../../services/snackbar"),g=r(y),_=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.setGravatar=function(){a.callApi("gravatar")},a.setGenerated=function(){a.callApi("generated")},a.state={isLoading:!1},a}return s(t,e),l(t,[{key:"callApi",value:function(e){var t=this;return!this.state.isLoading&&(this.setState({isLoading:!0}),void v["default"].post(this.props.user.api_url.avatar,{avatar:e}).then(function(e){t.setState({isLoading:!1}),g["default"].success(e.detail),t.props.onComplete(e.avatar_hash,e.options)},function(e){400===e.status?(g["default"].error(e.detail),t.setState({isLoading:!1})):t.props.showError(e)}))}},{key:"getGravatarButton",value:function(){return this.props.options.gravatar?u["default"].createElement(p["default"],{onClick:this.setGravatar,disabled:this.state.isLoading,className:"btn-default btn-block btn-avatar-gravatar"},gettext("Download my Gravatar")):null}},{key:"getCropButton",value:function(){return this.props.options.crop_org?u["default"].createElement(p["default"],{onClick:this.props.showCrop,disabled:this.state.isLoading,className:"btn-default btn-block btn-avatar-crop"},gettext("Re-crop uploaded image")):null}},{key:"getUploadButton",value:function(){return this.props.options.upload?u["default"].createElement(p["default"],{onClick:this.props.showUpload,disabled:this.state.isLoading,className:"btn-default btn-block btn-avatar-upload"},gettext("Upload new image")):null}},{key:"getGalleryButton",value:function(){return this.props.options.galleries?u["default"].createElement(p["default"],{onClick:this.props.showGallery,disabled:this.state.isLoading,className:"btn-default btn-block btn-avatar-gallery"},gettext("Pick avatar from gallery")):null}},{key:"getAvatarPreview",value:function(){var e={id:this.props.user.id,avatar_hash:this.props.options.avatar_hash};return this.state.isLoading?u["default"].createElement("div",{className:"avatar-preview preview-loading"},u["default"].createElement(d["default"],{user:e,size:"200"}),u["default"].createElement(m["default"],null)):u["default"].createElement("div",{className:"avatar-preview"},u["default"].createElement(d["default"],{user:e,size:"200"}))}},{key:"render",value:function(){return u["default"].createElement("div",{className:"modal-body modal-avatar-index"},u["default"].createElement("div",{className:"row"},u["default"].createElement("div",{className:"col-md-5"},this.getAvatarPreview()),u["default"].createElement("div",{className:"col-md-7"},this.getGravatarButton(),u["default"].createElement(p["default"],{onClick:this.setGenerated,disabled:this.state.isLoading,className:"btn-default btn-block btn-avatar-generate"},gettext("Generate my individual avatar")),this.getCropButton(),this.getUploadButton(),this.getGalleryButton())))}}]),t}(u["default"].Component);a["default"]=_},{"../../services/ajax":293,"../../services/snackbar":303,"../avatar":3,"../button":5,"../loader":43,react:"react"}],17:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{user:e.auth.user}}Object.defineProperty(a,"__esModule",{value:!0}),a.ChangeAvatarError=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.select=l;var u=e("react"),c=r(u),d=e("./index"),f=r(d),p=e("./crop"),h=r(p),m=e("./upload"),b=r(m),v=e("./gallery"),y=r(v),g=e("../modal-loader"),_=r(g),E=e("../../reducers/users"),w=e("../../services/ajax"),O=r(w),k=e("../../services/store"),N=r(k),j=a.ChangeAvatarError=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"getErrorReason",value:function(){return this.props.reason?c["default"].createElement("p",{dangerouslySetInnerHTML:{__html:this.props.reason}}):null}},{key:"render",value:function(){return c["default"].createElement("div",{className:"modal-body"},c["default"].createElement("div",{className:"message-icon"},c["default"].createElement("span",{className:"material-icon"},"remove_circle_outline")),c["default"].createElement("div",{className:"message-body"},c["default"].createElement("p",{className:"lead"},this.props.message),this.getErrorReason()))}}]),t}(c["default"].Component),x=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.showError=function(e){r.setState({error:e})},r.showIndex=function(){r.setState({component:f["default"]})},r.showUpload=function(){r.setState({component:b["default"]})},r.showCrop=function(){r.setState({component:h["default"]})},r.showGallery=function(){r.setState({component:y["default"]})},r.completeFlow=function(e,t){N["default"].dispatch((0,E.updateAvatar)(r.props.user,e)),r.setState({component:f["default"],options:t})},s=a,o(r,s)}return s(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this;O["default"].get(this.props.user.api_url.avatar).then(function(t){e.setState({component:f["default"],options:t,error:null})},function(t){e.showError(t)})}},{key:"getBody",value:function(){return this.state?this.state.error?c["default"].createElement(j,{message:this.state.error.detail,reason:this.state.error.reason}):c["default"].createElement(this.state.component,{options:this.state.options,user:this.props.user,onComplete:this.completeFlow,showError:this.showError,showIndex:this.showIndex,showCrop:this.showCrop,showUpload:this.showUpload,showGallery:this.showGallery}):c["default"].createElement(_["default"],null)}},{key:"getClassName",value:function(){return this.state&&this.state.error?"modal-dialog modal-message modal-change-avatar":"modal-dialog modal-change-avatar"}},{key:"render",value:function(){return c["default"].createElement("div",{className:this.getClassName(),role:"document"},c["default"].createElement("div",{className:"modal-content"},c["default"].createElement("div",{className:"modal-header"},c["default"].createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},c["default"].createElement("span",{"aria-hidden":"true"},"×")),c["default"].createElement("h4",{className:"modal-title"},gettext("Change your avatar"))),this.getBody()))}}]),t}(c["default"].Component);a["default"]=x},{"../../reducers/users":292,"../../services/ajax":293,"../../services/store":304,"../modal-loader":46,"./crop":14,"./gallery":15,"./index":16,"./upload":18,react:"react"}],18:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./crop"),d=r(c),f=e("../button"),p=r(f),h=e("../../services/ajax"),m=r(h),b=e("../../services/snackbar"),v=r(b),y=e("../../utils/file-size"),g=r(y),_=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.pickFile=function(){document.getElementById("avatar-hidden-upload").click()},a.uploadFile=function(){var e=document.getElementById("avatar-hidden-upload").files[0],t=a.validateFile(e);if(t)return void v["default"].error(t);a.setState({image:e,preview:URL.createObjectURL(e),progress:0});var r=new FormData;r.append("avatar","upload"),r.append("image",e),m["default"].upload(a.props.user.api_url.avatar,r,function(e){a.setState({progress:e})}).then(function(e){a.setState({options:e.options,uploaded:e.detail}),v["default"].info(gettext("Your image has been uploaded and you may now crop it."))},function(e){400===e.status?(v["default"].error(e.detail),a.setState({isLoading:!1,image:null,progress:0})):a.props.showError(e)})},a.state={image:null,preview:null,progress:0,uploaded:null},a}return s(t,e),l(t,[{key:"validateFile",value:function(e){if(e.size>this.props.options.upload.limit)return interpolate(gettext("Selected file is too big. (%(filesize)s)"),{filesize:(0,g["default"])(e.size)},!0);var t=gettext("Selected file type is not supported.");if(this.props.options.upload.allowed_mime_types.indexOf(e.type)===-1)return t;var a=!1,r=e.name.toLowerCase();return this.props.options.upload.allowed_extensions.map(function(e){r.substr(e.length*-1)===e&&(a=!0)}),!a&&t}},{key:"getUploadRequirements",value:function(e){var t=e.allowed_extensions.map(function(e){return e.substr(1)});return interpolate(gettext("%(files)s files smaller than %(limit)s"),{files:t.join(", "),limit:(0,g["default"])(e.limit)},!0)}},{key:"getUploadButton",value:function(){return u["default"].createElement("div",{className:"modal-body modal-avatar-upload"},u["default"].createElement(p["default"],{className:"btn-pick-file",onClick:this.pickFile},u["default"].createElement("div",{className:"material-icon"},"input"),gettext("Select file")),u["default"].createElement("p",{className:"text-muted"},this.getUploadRequirements(this.props.options.upload)))}},{key:"getUploadProgressLabel",value:function(){return interpolate(gettext("%(progress)s % complete"),{progress:this.state.progress},!0)}},{key:"getUploadProgress",value:function(){return u["default"].createElement("div",{className:"modal-body modal-avatar-upload"},u["default"].createElement("div",{className:"upload-progress"},u["default"].createElement("img",{src:this.state.preview}),u["default"].createElement("div",{className:"progress"},u["default"].createElement("div",{className:"progress-bar",role:"progressbar","aria-valuenow":"{this.state.progress}","aria-valuemin":"0","aria-valuemax":"100",style:{width:this.state.progress+"%"}},u["default"].createElement("span",{className:"sr-only"},this.getUploadProgressLabel())))))}},{key:"renderUpload",value:function(){return u["default"].createElement("div",null,u["default"].createElement("input",{type:"file",id:"avatar-hidden-upload",className:"hidden-file-upload",onChange:this.uploadFile}),this.state.image?this.getUploadProgress():this.getUploadButton(),u["default"].createElement("div",{className:"modal-footer"},u["default"].createElement("div",{className:"col-md-6 col-md-offset-3"},u["default"].createElement(p["default"],{onClick:this.props.showIndex,disabled:!!this.state.image,className:"btn-default btn-block"},gettext("Cancel")))))}},{key:"renderCrop",value:function(){return u["default"].createElement(d["default"],{options:this.state.options,user:this.props.user,upload:this.state.uploaded,onComplete:this.props.onComplete,showError:this.props.showError,showIndex:this.props.showIndex})}},{key:"render",value:function(){return this.state.uploaded?this.renderCrop():this.renderUpload()}}]),t}(u["default"].Component);a["default"]=_},{"../../services/ajax":293,"../../services/snackbar":303,"../../utils/file-size":311,"../button":5,"./crop":14,react:"react"}],19:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getClassName",value:function(){return this.props.dropdown?"btn btn-default btn-aligned btn-icon btn-dropdown-toggle open hidden-md hidden-lg":"btn btn-default btn-aligned btn-icon btn-dropdown-toggle hidden-md hidden-lg"}},{key:"render",value:function(){return u["default"].createElement("button",{className:this.getClassName(),type:"button",onClick:this.props.toggleNav,"aria-haspopup":"true","aria-expanded":this.props.dropdown?"true":"false"},u["default"].createElement("i",{className:"material-icon"},"menu"))}}]),t}(u["default"].Component);a["default"]=c},{react:"react"}],20:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){r.props.replaceSelection(r.props.execAction)},s=a,o(r,s)}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("button",{className:"btn btn-icon "+this.props.className,disabled:this.props.disabled,onClick:this.onClick,title:this.props.title,type:"button"},this.props.children)}}]),t}(u["default"].Component);a["default"]=c},{react:"react"}],21:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){var a=$.trim(prompt(gettext("Enter name of syntax of your code (optional)")+":"));t("\n\n```"+a+"\n"+e+"\n```\n\n")}Object.defineProperty(a,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a["default"]=function(e){return l["default"].createElement(u["default"],o({execAction:n,title:gettext("Insert code")},e),l["default"].createElement("span",{className:"material-icon"},"functions"))},a.insertCode=n;var s=e("react"),l=r(s),i=e("./action"),u=r(i),c=e("../../../utils/is-url");r(c)},{"../../../utils/is-url":312,"./action":20,react:"react"}],22:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){e.length&&t("*"+e+"*")}Object.defineProperty(a,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a["default"]=function(e){return l["default"].createElement(u["default"],o({execAction:n,title:gettext("Emphase selection")},e),l["default"].createElement("span",{className:"material-icon"},"format_italic"))},a.makeEmphasis=n;var s=e("react"),l=r(s),i=e("./action"),u=r(i)},{"./action":20,react:"react"}],23:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){t("\n\n- - - - -\n\n")}Object.defineProperty(a,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a["default"]=function(e){return l["default"].createElement(u["default"],o({execAction:n,title:gettext("Insert horizontal ruler")},e),l["default"].createElement("span",{className:"material-icon"},"remove"))},a.insertHr=n;var s=e("react"),l=r(s),i=e("./action"),u=r(i)},{"./action":20,react:"react"}],24:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){var a="",r="";e.length&&((0,d["default"])(e)?a=e:r=e),a=$.trim(prompt(gettext("Enter link to image")+":",a)),r=$.trim(prompt(gettext("Enter image label (optional)")+":",r)),a.length&&t(r.length>0?"!["+r+"]("+a+")":"!("+a+")")}Object.defineProperty(a,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a["default"]=function(e){return l["default"].createElement(u["default"],o({execAction:n,title:gettext("Insert image")},e),l["default"].createElement("span",{className:"material-icon"},"insert_photo"))},a.insertImage=n;var s=e("react"),l=r(s),i=e("./action"),u=r(i),c=e("../../../utils/is-url"),d=r(c)},{"../../../utils/is-url":312,"./action":20,react:"react"}],25:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){var a="",r="";e.length&&((0,d["default"])(e)?a=e:r=e),a=$.trim(prompt(gettext("Enter link address")+":",a)),r=$.trim(prompt(gettext("Enter link label (optional)")+":",r)),a.length&&t(r.length>0?"["+r+"]("+a+")":a)}Object.defineProperty(a,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a["default"]=function(e){return l["default"].createElement(u["default"],o({execAction:n,title:gettext("Insert link")},e),l["default"].createElement("span",{className:"material-icon"},"insert_link"))},a.insertLink=n;var s=e("react"),l=r(s),i=e("./action"),u=r(i),c=e("../../../utils/is-url"),d=r(c)},{"../../../utils/is-url":312,"./action":20,react:"react"}],26:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){var a=$.trim(prompt(gettext("Enter image label (optional)")+":",a));a.length&&"@"!==a[0]&&(a="@"+a),t(a?'\n\n[quote="'+a+'"]\n'+e+"\n[/quote]\n\n":"\n\n[quote=]\n"+e+"\n[/quote]\n\n")}Object.defineProperty(a,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a["default"]=function(e){return l["default"].createElement(u["default"],o({execAction:n,title:gettext("Insert quote")},e),l["default"].createElement("span",{className:"material-icon"},"format_quote"))},a.insertQuote=n;var s=e("react"),l=r(s),i=e("./action"),u=r(i),c=e("../../../utils/is-url");r(c)},{"../../../utils/is-url":312,"./action":20,react:"react"}],27:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){e.length&&t("~~"+e+"~~")}Object.defineProperty(a,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a["default"]=function(e){return l["default"].createElement(u["default"],o({execAction:n,title:gettext("Striketrough selection")},e),l["default"].createElement("span",{className:"material-icon"},"format_strikethrough"))},a.makeStriketrough=n;var s=e("react"),l=r(s),i=e("./action"),u=r(i)},{"./action":20,react:"react"}],28:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){e.length&&t("**"+e+"**")}Object.defineProperty(a,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a["default"]=function(e){return l["default"].createElement(u["default"],o({execAction:n,title:gettext("Bolder selection")},e),l["default"].createElement("span",{className:"material-icon"},"format_bold"))},a.makeStrong=n;var s=e("react"),l=r(s),i=e("./action"),u=r(i)},{"./action":20,react:"react"}],29:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return e.item.is_image?g["default"].createElement(i,e):g["default"].createElement(u,e)}function i(e){var t=e.item.url.thumb||e.item.url.index;return g["default"].createElement("div",{className:"editor-attachment-image"},g["default"].createElement("a",{href:e.item.url.index+"?shva=1",style:{backgroundImage:"url('"+t+"?shva=1')"},target:"_blank"}))}function u(e){return g["default"].createElement("div",{className:"editor-attachment-icon"},g["default"].createElement("span",{className:"material-icon"},"insert_drive_file"))}function c(e){return g["default"].createElement("h4",null,g["default"].createElement("a",{className:"item-title",href:e.item.url.index+"?shva=1",target:"_blank"},e.item.filename))}function d(e){var t=null;t=e.item.url.uploader?interpolate(x,{url:(0,w["default"])(e.item.url.uploader),user:(0,w["default"])(e.item.uploader_name)},!0):interpolate(j,{user:(0,w["default"])(e.item.uploader_name)},!0);var a=interpolate(N,{absolute:(0,w["default"])(e.item.uploaded_on.format("LLL")),relative:(0,w["default"])(e.item.uploaded_on.fromNow())},!0),r=interpolate((0,w["default"])(gettext("%(filetype)s, %(size)s, uploaded by %(uploader)s %(uploaded_on)s.")),{filetype:e.item.filetype,size:(0,k["default"])(e.item.size),uploader:t,uploaded_on:a},!0);return g["default"].createElement("p",{dangerouslySetInnerHTML:{__html:r}})}function f(e){return g["default"].createElement("ul",{className:"list-unstyled list-inline editor-attachment-actions"},g["default"].createElement(p,e),g["default"].createElement(h,e),g["default"].createElement(m,e))}function p(e){return e.item.isRemoved?null:g["default"].createElement("li",null,g["default"].createElement("button",{className:"btn btn-default btn-sm",onClick:e.onInsert,type:"button"},gettext("Insert")))}function h(e){return e.item.isRemoved&&e.item.acl.can_delete?null:g["default"].createElement("li",null,g["default"].createElement("button",{className:"btn btn-default btn-sm",onClick:e.onRemove,type:"button"},gettext("Remove")))}function m(e){return e.item.isRemoved?g["default"].createElement("li",null,g["default"].createElement("button",{className:"btn btn-default btn-sm",onClick:e.onUndo,type:"button"},gettext("Undo removal"))):null}Object.defineProperty(a,"__esModule",{value:!0});var b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},v=function(){function e(e,t){
for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.Preview=l,a.Image=i,a.Icon=u,a.Filename=c,a.Details=d,a.Actions=f,a.Insert=p,a.Remove=h,a.Undo=m;var y=e("react"),g=r(y),_=e("../../../.."),E=(r(_),e("../../../../utils/escape-html")),w=r(E),O=e("../../../../utils/file-size"),k=r(O),N='<abbr title="%(absolute)s">%(relative)s</abbr>',j='<span class="item-title">%(user)s</span>',x='<a href="%(url)s" class="item-title">%(user)s</a>',P=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onInsert=function(){r.props.replaceSelection(r.insertAttachment)},r.insertAttachment=function(e,t){var a=r.props.item;t(a.is_image?a.url.thumb?"[!["+a.filename+"]("+a.url.thumb+")]("+a.url.index+")":"[!["+a.filename+"]("+a.url.index+")]("+a.url.index+")":"["+a.filename+"]("+a.url.index+")")},r.onRemove=function(){r.updateItem({isRemoved:!0})},r.onUndo=function(){r.updateItem({isRemoved:!1})},r.updateItem=function(e){var t=r.props.attachments.map(function(t){return t.id===r.props.item.id?Object.assign({},t,e):t});r.props.onAttachmentsChange(t)},s=a,o(r,s)}return s(t,e),v(t,[{key:"render",value:function(){return g["default"].createElement("li",{className:"editor-attachment-complete"},g["default"].createElement(l,this.props),g["default"].createElement(f,b({onInsert:this.onInsert,onRemove:this.onRemove,onUndo:this.onUndo},this.props)),g["default"].createElement("div",{className:"editor-attachment-details"},g["default"].createElement(c,this.props),g["default"].createElement(d,this.props)))}}]),t}(g["default"].Component);a["default"]=P},{"../../../..":234,"../../../../utils/escape-html":310,"../../../../utils/file-size":311,react:"react"}],30:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../../../../utils/escape-html"),d=r(c),f="<strong>%(name)s</strong>",p=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){var e=r.props.attachments.filter(function(e){return e.key!==r.props.item.key});r.props.onAttachmentsChange(e)},s=a,o(r,s)}return s(t,e),l(t,[{key:"render",value:function(){var e=interpolate(f,{name:(0,d["default"])(this.props.item.filename)},!0),t=interpolate(gettext("Error uploading %(filename)s"),{filename:e,progress:this.props.item.progress+"%"},!0);return u["default"].createElement("li",{className:"editor-attachment-error"},u["default"].createElement("div",{className:"editor-attachment-error-icon"},u["default"].createElement("span",{className:"material-icon"},"warning")),u["default"].createElement("div",{className:"editor-attachment-error-message"},u["default"].createElement("h4",{dangerouslySetInnerHTML:{__html:t+":"}}),u["default"].createElement("p",null,this.props.item.error),u["default"].createElement("button",{className:"btn btn-default btn-sm",onClick:this.onClick,type:"button"},gettext("Dismiss"))))}}]),t}(u["default"].Component);a["default"]=p},{"../../../../utils/escape-html":310,react:"react"}],31:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return e.item.id?o["default"].createElement(l["default"],e):e.item.error?o["default"].createElement(u["default"],e):o["default"].createElement(d["default"],e)};var n=e("react"),o=r(n),s=e("./complete"),l=r(s),i=e("./error"),u=r(i),c=e("./upload"),d=r(c),f=e("../../../.."),p=(r(f),e("../../../../utils/escape-html"));r(p)},{"../../../..":234,"../../../../utils/escape-html":310,"./complete":29,"./error":30,"./upload":32,react:"react"}],32:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){var t=interpolate(i,{name:(0,l["default"])(e.item.filename)},!0),a=interpolate(gettext("Uploading %(filename)s... %(progress)s"),{filename:t,progress:e.item.progress+"%"},!0);return o["default"].createElement("li",{className:"editor-attachment-upload"},o["default"].createElement("div",{className:"editor-attachment-progress-bar"},o["default"].createElement("div",{className:"editor-attachment-progress",style:{width:e.item.progress+"%"}})),o["default"].createElement("p",{className:"editor-attachment-upload-message",dangerouslySetInnerHTML:{__html:a}}))};var n=e("react"),o=r(n),s=e("../../../../utils/escape-html"),l=r(s),i="<strong>%(name)s</strong>"},{"../../../../utils/escape-html":310,react:"react"}],33:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return d["default"].get("user").acl.max_attachment_size?o["default"].createElement("div",{className:"editor-attachments"},o["default"].createElement(l["default"],e),o["default"].createElement(u["default"],e)):null};var n=e("react"),o=r(n),s=e("./list"),l=r(s),i=e("./uploader"),u=r(i),c=e("../../.."),d=r(c)},{"../../..":234,"./list":34,"./uploader":36,react:"react"}],34:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a["default"]=function(e){return s["default"].createElement("ul",{className:"list-unstyled editor-attachments-list"},e.attachments.map(function(t){return s["default"].createElement(i["default"],n({item:t,key:t.id||t.key},e))}))};var o=e("react"),s=r(o),l=e("./attachment"),i=r(l)},{"./attachment":31,react:"react"}],35:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../../.."),d=r(c),f=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){document.getElementById("editor-upload-field").click()},s=a,o(r,s)}return s(t,e),l(t,[{key:"render",value:function(){return d["default"].get("user").acl.max_attachment_size?u["default"].createElement("button",{className:"btn btn-icon "+this.props.className,disabled:this.props.disabled,onClick:this.onClick,title:gettext("Upload file"),type:"button"},u["default"].createElement("span",{className:"material-icon"},"file_upload")):null}}]),t}(u["default"].Component);a["default"]=f},{"../../..":234,react:"react"}],36:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(){return"upld-"+Math.round((new Date).getTime())}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.getRandomKey=l;var u=e("react"),c=r(u),d=e("moment"),f=r(d),p=e("../../.."),h=r(p),m=e("../../../services/ajax"),b=r(m),v=e("../../../services/snackbar"),y=r(v),g=function(e){function t(){var e,a,r,s;n(this,t);for(var i=arguments.length,u=Array(i),c=0;c<i;c++)u[c]=arguments[c];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.onChange=function(e){var t=e.target.files[0];if(t){var a={id:null,key:l(),progress:0,error:null,filename:t.name};r.props.onAttachmentsChange([a].concat(r.props.attachments));var n=new FormData;n.append("upload",t),b["default"].upload(h["default"].get("ATTACHMENTS_API"),n,function(e){a.progress=e,r.props.onAttachmentsChange(r.props.attachments.concat())}).then(function(e){e.uploaded_on=(0,f["default"])(e.uploaded_on),Object.assign(a,e),r.props.onAttachmentsChange(r.props.attachments.concat())},function(e){400===e.status?(a.error=e.detail,r.props.onAttachmentsChange(r.props.attachments.concat())):y["default"].apiError(e)})}},s=a,o(r,s)}return s(t,e),i(t,[{key:"render",value:function(){return c["default"].createElement("input",{id:"editor-upload-field",onChange:this.onChange,type:"file"})}}]),t}(c["default"].Component);a["default"]=g},{"../../..":234,"../../../services/ajax":293,"../../../services/snackbar":303,moment:"moment",react:"react"}],37:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e.canProtect?d["default"].createElement("button",{className:"btn btn-icon btn-default btn-sm pull-right",disabled:e.disabled,onClick:e.protect?e.onUnprotect:e.onProtect,title:e.protect?gettext("Protected"):gettext("Protect"),type:"button"},d["default"].createElement("span",{className:"material-icon"},e.protect?"lock":"lock_outline")):null}Object.defineProperty(a,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.Protect=i;var c=e("react"),d=n(c),f=e("./actions/code"),p=n(f),h=e("./actions/emphasis"),m=n(h),b=e("./actions/hr"),v=n(b),y=e("./actions/image"),g=n(y),_=e("./actions/link"),E=n(_),w=e("./actions/striketrough"),O=n(w),k=e("./actions/strong"),N=n(k),j=e("./actions/quote"),x=n(j),P=e("./attachments"),C=n(P),S=e("./attachments/upload-button/"),T=n(S),M=e("./markup-preview"),L=n(M),R=e("./textUtils"),A=r(R),I=e("../button"),D=n(I),U=e("../.."),B=n(U),H=e("../../services/ajax"),z=n(H),F=e("../../services/modal"),G=n(F),V=e("../../services/snackbar"),q=n(V),Y=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onPreviewClick=function(){a.state.isPreviewLoading||(a.setState({isPreviewLoading:!0}),z["default"].post(B["default"].get("PARSE_MARKUP_API"),{post:a.props.value}).then(function(e){G["default"].show(d["default"].createElement(L["default"],{markup:e.parsed})),a.setState({isPreviewLoading:!1})},function(e){400===e.status?q["default"].error(e.detail):q["default"].apiError(e),a.setState({isPreviewLoading:!1})}))},a.replaceSelection=function(e){e(A.getSelectionText(),a._replaceSelection)},a._replaceSelection=function(e){a.props.onChange({target:{value:A.replace(e)}})},a.state={isPreviewLoading:!1},a}return l(t,e),u(t,[{key:"render",value:function(){return d["default"].createElement("div",{className:"editor-border"},d["default"].createElement("textarea",{className:"form-control",defaultValue:this.props.value,disabled:this.props.loading,id:"editor-textarea",onChange:this.props.onChange,rows:"9"}),d["default"].createElement("div",{className:"editor-footer"},d["default"].createElement(N["default"],{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading,replaceSelection:this.replaceSelection}),d["default"].createElement(m["default"],{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading,replaceSelection:this.replaceSelection}),d["default"].createElement(O["default"],{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading,replaceSelection:this.replaceSelection}),d["default"].createElement(v["default"],{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading,replaceSelection:this.replaceSelection}),d["default"].createElement(E["default"],{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading,replaceSelection:this.replaceSelection}),d["default"].createElement(g["default"],{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading,replaceSelection:this.replaceSelection}),d["default"].createElement(x["default"],{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading,replaceSelection:this.replaceSelection}),d["default"].createElement(p["default"],{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading,replaceSelection:this.replaceSelection}),d["default"].createElement(T["default"],{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading}),d["default"].createElement(D["default"],{className:"btn-default btn-sm pull-left",disabled:this.props.loading||this.state.isPreviewLoading,onClick:this.onPreviewClick,type:"button"},gettext("Preview")),d["default"].createElement(D["default"],{className:"btn-primary btn-sm pull-right",loading:this.props.loading},this.props.submitLabel||gettext("Post")),d["default"].createElement("button",{className:"btn btn-default btn-sm pull-right",disabled:this.props.loading,onClick:this.props.onCancel,type:"button"},gettext("Cancel")),d["default"].createElement(i,{canProtect:this.props.canProtect,disabled:this.props.loading,onProtect:this.props.onProtect,onUnprotect:this.props.onUnprotect,protect:this.props.protect})),d["default"].createElement(C["default"],{attachments:this.props.attachments,onAttachmentsChange:this.props.onAttachmentsChange,placeholder:this.props.placeholder,replaceSelection:this.replaceSelection}))}}]),t}(d["default"].Component);a["default"]=Y},{"../..":234,"../../services/ajax":293,"../../services/modal":299,"../../services/snackbar":303,"../button":5,"./actions/code":21,"./actions/emphasis":22,"./actions/hr":23,"./actions/image":24,"./actions/link":25,"./actions/quote":26,"./actions/striketrough":27,"./actions/strong":28,"./attachments":33,"./attachments/upload-button/":35,"./markup-preview":38,"./textUtils":39,react:"react"}],38:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return o["default"].createElement("div",{className:"modal-dialog",role:"document"},o["default"].createElement("div",{className:"modal-content"},o["default"].createElement("div",{className:"modal-header"},o["default"].createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},o["default"].createElement("span",{"aria-hidden":"true"},"×")),o["default"].createElement("h4",{className:"modal-title"},gettext("Preview message"))),o["default"].createElement("div",{className:"modal-body markup-preview"},o["default"].createElement(l["default"],{markup:e.markup}))))};var n=e("react"),o=r(n),s=e("../misago-markup"),l=r(s)},{"../misago-markup":45,react:"react"}],39:[function(e,t,a){"use strict";function r(){return document.getElementById(d)}function n(){return document.getElementById(d).value}function o(e,t){return{start:e,end:t}}function s(){var e=r();if(document.selection){e.focus();var t=document.selection.createRange(),a=t.text.length;return t.moveStart("character",-e.value.length),o(t.text.length-a,t.text.length)}if(e.selectionStart||"0"==e.selectionStart)return o(e.selectionStart,e.selectionEnd)}function l(){var e=s();return $.trim(n().substring(e.start,e.end))}function i(e){var t=r();if(t.setSelectionRange)t.focus(),t.setSelectionRange(e.start,e.end);else if(t.createTextRange){var a=t.createTextRange();a.collapse(!0),a.moveStart("character",e.start),a.moveEnd("character",e.end),a.select()}}function u(e,t){var a=r(),n=a.value,s=n.substring(0,e.start);return a.value=n.substring(0,e.start)+t+n.substring(e.end),i(o(s.length+t.length,s.length+t.length)),a.value}function c(e){return u(s(),e)}Object.defineProperty(a,"__esModule",{value:!0}),a.getTextarea=r,a.getValue=n,a.getSelectionRange=o,a.getSelection=s,a.getSelectionText=l,a.setSelection=i,a._replace=u,a.replace=c;var d=a.textareaId="editor-textarea"},{}],40:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"isValidated",value:function(){return"undefined"!=typeof this.props.validation}},{key:"getClassName",value:function(){var e="form-group";return this.isValidated()&&(e+=" has-feedback",e+=null===this.props.validation?" has-success":" has-error"),e}},{key:"getFeedback",value:function(){var e=this;return this.props.validation?u["default"].createElement("div",{className:"help-block errors"},this.props.validation.map(function(t,a){return u["default"].createElement("p",{key:e.props["for"]+"FeedbackItem"+a},t)})):null}},{key:"getFeedbackIcon",value:function(){return this.isValidated()?u["default"].createElement("span",{className:"material-icon form-control-feedback","aria-hidden":"true",key:this.props["for"]+"FeedbackIcon"},this.props.validation?"clear":"check"):null}},{key:"getFeedbackDescription",value:function(){return this.isValidated()?u["default"].createElement("span",{id:this.props["for"]+"_status",className:"sr-only"},this.props.validation?gettext("(error)"):gettext("(success)")):null}},{key:"getHelpText",value:function(){return this.props.helpText?u["default"].createElement("p",{className:"help-block"},this.props.helpText):null}},{key:"render",value:function(){return u["default"].createElement("div",{className:this.getClassName()},u["default"].createElement("label",{className:"control-label "+(this.props.labelClass||""),htmlFor:this.props["for"]||""},this.props.label+":"),u["default"].createElement("div",{className:this.props.controlClass||""},this.props.children,this.getFeedbackIcon(),this.getFeedbackDescription(),this.getFeedback(),this.getHelpText(),this.props.extra||null))}}]),t}(u["default"].Component);a["default"]=c},{react:"react"}],41:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=r(u),d=e("../utils/validators"),f=e("../services/snackbar"),p=r(f),h=(0,d.required)(),m=function(e){function t(){var e,a,r,l;o(this,t);for(var i=arguments.length,u=Array(i),c=0;c<i;c++)u[c]=arguments[c];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.bindInput=function(e){return function(t){r.changeValue(e,t.target.value)}},r.changeValue=function(e,t){var a=n({},e,t),o=r.state.errors||{};o[e]=r.validateField(e,a[e]),a.errors=o,r.setState(a)},r.handleSubmit=function(e){if(e.preventDefault(),!r.state.isLoading&&r.clean()){r.setState({isLoading:!0});var t=r.send();t?t.then(function(e){r.setState({isLoading:!1}),r.handleSuccess(e)},function(e){r.setState({isLoading:!1}),r.handleError(e)}):r.setState({isLoading:!1})}},l=a,s(r,l)}return l(t,e),i(t,[{key:"validate",value:function(){var e={};if(!this.state.validators)return e;var t={required:this.state.validators.required||this.state.validators,optional:this.state.validators.optional||{}},a=[];for(var r in t.required)t.required.hasOwnProperty(r)&&t.required[r]&&a.push(r);for(var n in t.optional)t.optional.hasOwnProperty(n)&&t.optional[n]&&a.push(n);for(var o in a){var s=a[o],l=this.validateField(s,this.state[s]);null===l?e[s]=null:l&&(e[s]=l)}return e}},{key:"isValid",value:function(){var e=this.validate();for(var t in e)if(e.hasOwnProperty(t)&&null!==e[t])return!1;return!0}},{key:"validateField",value:function(e,t){var a=[];if(!this.state.validators)return a;var r={required:(this.state.validators.required||this.state.validators)[e],optional:(this.state.validators.optional||{})[e]},n=h(t)||!1;if(r.required){if(n)a=[n];else for(var o in r.required){var s=r.required[o](t);s&&a.push(s)}return a.length?a:null}if(n===!1&&r.optional){for(var l in r.optional){var i=r.optional[l](t);i&&a.push(i)}return a.length?a:null}return!1}},{key:"clean",value:function(){return!0}},{key:"send",value:function(){return null}},{key:"handleSuccess",value:function(e){}},{key:"handleError",value:function(e){p["default"].apiError(e)}}]),t}(c["default"].Component);a["default"]=m},{"../services/snackbar":303,"../utils/validators":320,react:"react"}],42:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"isActive",value:function(){return this.props.isControlled?this.props.isActive:!!this.props.path&&0===document.location.pathname.indexOf(this.props.path)}},{key:"getClassName",value:function(){return this.isActive()?(this.props.className||"")+" "+(this.props.activeClassName||"active"):this.props.className||""}},{key:"render",value:function(){return u["default"].createElement("li",{className:this.getClassName()},this.props.children)}}]),t}(u["default"].Component);a["default"]=c},{react:"react"}],43:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:this.props.className||"loader"},u["default"].createElement("div",{className:"loader-spinning-wheel"}))}}]),t}(u["default"].Component);a["default"]=c},{react:"react"}],44:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./button"),d=r(c),f=e("./form"),p=r(f),h=e("./form-group"),m=r(h),b=e("../services/ajax"),v=r(b),y=e("../services/modal"),g=r(y),_=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleSuccess=function(e){a.props.onSuccess(e),g["default"].hide()},a.handleError=function(e){a.props.onError(e)},a.onPollChange=function(e){a.changeValue("poll",e.target.value)},a.state={isLoading:!1,poll:0},a}return s(t,e),l(t,[{key:"clean",value:function(){var e=confirm(gettext("Are you sure? This will delete other polls."));return e}},{key:"send",value:function(){var e=Object.assign({},this.props.data,{poll:this.state.poll});return v["default"].post(this.props.api,e)}},{key:"render",value:function(){return u["default"].createElement("div",{className:"modal-dialog",role:"document"},u["default"].createElement("div",{className:"modal-content"},u["default"].createElement("div",{className:"modal-header"},u["default"].createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},u["default"].createElement("span",{"aria-hidden":"true"},"×")),u["default"].createElement("h4",{className:"modal-title"},gettext("Merge polls"))),u["default"].createElement("form",{onSubmit:this.handleSubmit},u["default"].createElement("div",{className:"modal-body"},u["default"].createElement("p",null,gettext("Select poll to use in merged thread. Other polls will be deleted.")),u["default"].createElement(m["default"],{label:gettext("Poll"),"for":"id_poll"},u["default"].createElement("select",{className:"form-control",id:"id_poll",onChange:this.onPollChange,value:this.state.poll},this.props.polls.map(function(e){return u["default"].createElement("option",{value:e[0],key:e[0]},e[1])})))),u["default"].createElement("div",{className:"modal-footer"},u["default"].createElement(d["default"],{className:"btn-primary",loading:this.state.isLoading},gettext("Merge polls"))))))}}]),t}(p["default"]);a["default"]=_},{"../services/ajax":293,"../services/modal":299,"./button":5,"./form":41,"./form-group":40,react:"react"}],45:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return o["default"].createElement("article",{className:"misago-markup",dangerouslySetInnerHTML:{__html:e.markup}})};var n=e("react"),o=r(n)},{react:"react"}],46:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,
writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./loader"),d=r(c),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"modal-body modal-loader"},u["default"].createElement(d["default"],null))}}]),t}(u["default"].Component);a["default"]=f},{"./loader":43,react:"react"}],47:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./panel-message"),d=r(c),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getHelpText",value:function(){return this.props.helpText?u["default"].createElement("p",{className:"help-block"},this.props.helpText):null}},{key:"render",value:function(){return u["default"].createElement("div",{className:"modal-body"},u["default"].createElement("div",{className:"message-icon"},u["default"].createElement("span",{className:"material-icon"},this.props.icon||"info_outline")),u["default"].createElement("div",{className:"message-body"},u["default"].createElement("p",{className:"lead"},this.props.message),this.getHelpText()))}}]),t}(d["default"]);a["default"]=f},{"./panel-message":60,react:"react"}],48:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../../panel-loader"),d=r(c),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"panel panel-default panel-form"},u["default"].createElement("div",{className:"panel-heading"},u["default"].createElement("h3",{className:"panel-title"},gettext("Change username"))),u["default"].createElement(d["default"],null))}}]),t}(u["default"].Component);a["default"]=f},{"../../panel-loader":59,react:"react"}],49:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../../panel-message"),d=r(c),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getHelpText",value:function(){return this.props.options.next_on?interpolate(gettext("You will be able to change your username %(next_change)s."),{next_change:this.props.options.next_on.fromNow()},!0):gettext("You have used up available name changes.")}},{key:"render",value:function(){return u["default"].createElement("div",{className:"panel panel-default panel-form"},u["default"].createElement("div",{className:"panel-heading"},u["default"].createElement("h3",{className:"panel-title"},gettext("Change username"))),u["default"].createElement(d["default"],{message:gettext("You can't change your username at the moment."),helpText:this.getHelpText()}))}}]),t}(u["default"].Component);a["default"]=f},{"../../panel-message":60,react:"react"}],50:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../../button"),f=n(d),p=e("../../form"),h=n(p),m=e("../../form-group"),b=n(m),v=e("../../../services/ajax"),y=n(v),g=e("../../../services/snackbar"),_=n(g),E=e("../../../utils/validators"),w=r(E),O=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={username:"",validators:{username:[w.usernameContent(),w.usernameMinLength({username_length_min:e.options.length_min}),w.usernameMaxLength({username_length_max:e.options.length_max})]},isLoading:!1},a}return l(t,e),i(t,[{key:"getHelpText",value:function(){var e=[];if(this.props.options.changes_left>0){var t=ngettext("You can change your username %(changes_left)s more time.","You can change your username %(changes_left)s more times.",this.props.options.changes_left);e.push(interpolate(t,{changes_left:this.props.options.changes_left},!0))}if(this.props.user.acl.name_changes_expire>0){var a=ngettext("Used changes redeem after %(name_changes_expire)s day.","Used changes redeem after %(name_changes_expire)s days.",this.props.user.acl.name_changes_expire);e.push(interpolate(a,{name_changes_expire:this.props.user.acl.name_changes_expire},!0))}return e.length?e.join(" "):null}},{key:"clean",value:function(){var e=this.validate();return e.username?(_["default"].error(e.username[0]),!1):this.state.username.trim()!==this.props.user.username||(_["default"].info(gettext("Your new username is same as current one.")),!1)}},{key:"send",value:function(){return y["default"].post(this.props.user.api_url.username,{username:this.state.username})}},{key:"handleSuccess",value:function(e){this.setState({username:""}),this.props.complete(e.username,e.slug,e.options)}},{key:"handleError",value:function(e){_["default"].apiError(e)}},{key:"render",value:function(){return c["default"].createElement("form",{onSubmit:this.handleSubmit,className:"form-horizontal"},c["default"].createElement("div",{className:"panel panel-default panel-form"},c["default"].createElement("div",{className:"panel-heading"},c["default"].createElement("h3",{className:"panel-title"},gettext("Change username"))),c["default"].createElement("div",{className:"panel-body"},c["default"].createElement(b["default"],{label:gettext("New username"),"for":"id_username",labelClass:"col-sm-4",controlClass:"col-sm-8",helpText:this.getHelpText()},c["default"].createElement("input",{type:"text",id:"id_username",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("username"),value:this.state.username}))),c["default"].createElement("div",{className:"panel-footer"},c["default"].createElement("div",{className:"row"},c["default"].createElement("div",{className:"col-sm-8 col-sm-offset-4"},c["default"].createElement(f["default"],{className:"btn-primary",loading:this.state.isLoading},gettext("Change username")))))))}}]),t}(h["default"]);a["default"]=O},{"../../../services/ajax":293,"../../../services/snackbar":303,"../../../utils/validators":320,"../../button":5,"../../form":41,"../../form-group":40,react:"react"}],51:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("moment"),u=r(i),c=e("react"),d=r(c),f=e("./form-loading"),p=r(f),h=e("./form-locked"),m=r(h),b=e("./form"),v=r(b),y=e("../../username-history/root"),g=r(y),_=e("../../../index"),E=r(_),w=e("../../../reducers/username-history"),O=e("../../../reducers/users"),k=e("../../../services/ajax"),N=r(k),j=e("../../../services/page-title"),x=r(j),P=e("../../../services/snackbar"),C=r(P),S=e("../../../services/store"),T=r(S),M=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onComplete=function(e,t,r){a.setState({options:r}),T["default"].dispatch((0,w.addNameChange)({username:e,slug:t},a.props.user,a.props.user)),T["default"].dispatch((0,O.updateUsername)(a.props.user,e,t)),C["default"].success(gettext("Your username has been changed successfully."))},a.state={isLoaded:!1,options:null},a}return s(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;x["default"].set({title:gettext("Change username"),parent:gettext("Change your options")}),Promise.all([N["default"].get(this.props.user.api_url.username),N["default"].get(E["default"].get("USERNAME_CHANGES_API"),{user:this.props.user.id})]).then(function(t){T["default"].dispatch((0,w.hydrate)(t[1].results)),e.setState({isLoaded:!0,options:{changes_left:t[0].changes_left,length_min:t[0].length_min,length_max:t[0].length_max,next_on:t[0].next_on?(0,u["default"])(t[0].next_on):null}})})}},{key:"getChangeForm",value:function(){return this.state.isLoaded?this.state.options.changes_left>0?d["default"].createElement(v["default"],{user:this.props.user,options:this.state.options,complete:this.onComplete}):d["default"].createElement(m["default"],{options:this.state.options}):d["default"].createElement(p["default"],null)}},{key:"render",value:function(){return d["default"].createElement("div",null,this.getChangeForm(),d["default"].createElement(g["default"],{isLoaded:this.state.isLoaded,changes:this.props["username-history"]}))}}]),t}(d["default"].Component);a["default"]=M},{"../../../index":234,"../../../reducers/username-history":291,"../../../reducers/users":292,"../../../services/ajax":293,"../../../services/page-title":300,"../../../services/snackbar":303,"../../../services/store":304,"../../username-history/root":216,"./form":50,"./form-loading":48,"./form-locked":49,moment:"moment",react:"react"}],52:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../button"),d=r(c),f=e("../form"),p=r(f),h=e("../form-group"),m=r(h),b=e("../select"),v=r(b),y=e("../yes-no-switch"),g=r(y),_=e("../../reducers/auth"),E=e("../../services/ajax"),w=r(E),O=e("../../services/page-title"),k=r(O),N=e("../../services/snackbar"),j=r(N),x=e("../../services/store"),P=r(x),C=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isLoading:!1,is_hiding_presence:e.user.is_hiding_presence,limits_private_thread_invites_to:e.user.limits_private_thread_invites_to,subscribe_to_started_threads:e.user.subscribe_to_started_threads,subscribe_to_replied_threads:e.user.subscribe_to_replied_threads,errors:{}},a.privateThreadInvitesChoices=[{value:0,icon:"help_outline",label:gettext("Everybody")},{value:1,icon:"done_all",label:gettext("Users I follow")},{value:2,icon:"highlight_off",label:gettext("Nobody")}],a.subscribeToChoices=[{value:0,icon:"star_border",label:gettext("No")},{value:1,icon:"star_half",label:gettext("Notify")},{value:2,icon:"star",label:gettext("Notify with e-mail")}],a}return s(t,e),l(t,[{key:"send",value:function(){return w["default"].post(this.props.user.api_url.options,{is_hiding_presence:this.state.is_hiding_presence,limits_private_thread_invites_to:this.state.limits_private_thread_invites_to,subscribe_to_started_threads:this.state.subscribe_to_started_threads,subscribe_to_replied_threads:this.state.subscribe_to_replied_threads})}},{key:"handleSuccess",value:function(){P["default"].dispatch((0,_.patch)({is_hiding_presence:this.state.is_hiding_presence,limits_private_thread_invites_to:this.state.limits_private_thread_invites_to,subscribe_to_started_threads:this.state.subscribe_to_started_threads,subscribe_to_replied_threads:this.state.subscribe_to_replied_threads})),j["default"].success(gettext("Your forum options have been changed."))}},{key:"handleError",value:function(e){400===e.status?j["default"].error(gettext("Please reload page and try again.")):j["default"].apiError(e)}},{key:"componentDidMount",value:function(){k["default"].set({title:gettext("Forum options"),parent:gettext("Change your options")})}},{key:"render",value:function(){return u["default"].createElement("form",{onSubmit:this.handleSubmit,className:"form-horizontal"},u["default"].createElement("div",{className:"panel panel-default panel-form"},u["default"].createElement("div",{className:"panel-heading"},u["default"].createElement("h3",{className:"panel-title"},gettext("Change forum options"))),u["default"].createElement("div",{className:"panel-body"},u["default"].createElement("fieldset",null,u["default"].createElement("legend",null,gettext("Privacy settings")),u["default"].createElement(m["default"],{label:gettext("Hide my presence"),helpText:gettext("If you hide your presence, only members with permission to see hidden users will see when you are online."),"for":"id_is_hiding_presence",labelClass:"col-sm-4",controlClass:"col-sm-8"},u["default"].createElement(g["default"],{id:"id_is_hiding_presence",disabled:this.state.isLoading,iconOn:"visibility_off",iconOff:"visibility",labelOn:gettext("Hide my presence from other users"),labelOff:gettext("Show my presence to other users"),onChange:this.bindInput("is_hiding_presence"),value:this.state.is_hiding_presence})),u["default"].createElement(m["default"],{label:gettext("Private thread invitations"),"for":"id_limits_private_thread_invites_to",labelClass:"col-sm-4",controlClass:"col-sm-8"},u["default"].createElement(v["default"],{id:"id_limits_private_thread_invites_to",disabled:this.state.isLoading,onChange:this.bindInput("limits_private_thread_invites_to"),value:this.state.limits_private_thread_invites_to,choices:this.privateThreadInvitesChoices}))),u["default"].createElement("fieldset",null,u["default"].createElement("legend",null,gettext("Automatic subscriptions")),u["default"].createElement(m["default"],{label:gettext("Threads I start"),"for":"id_subscribe_to_started_threads",labelClass:"col-sm-4",controlClass:"col-sm-8"},u["default"].createElement(v["default"],{id:"id_subscribe_to_started_threads",disabled:this.state.isLoading,onChange:this.bindInput("subscribe_to_started_threads"),value:this.state.subscribe_to_started_threads,choices:this.subscribeToChoices})),u["default"].createElement(m["default"],{label:gettext("Threads I reply to"),"for":"id_subscribe_to_replied_threads",labelClass:"col-sm-4",controlClass:"col-sm-8"},u["default"].createElement(v["default"],{id:"id_subscribe_to_replied_threads",disabled:this.state.isLoading,onChange:this.bindInput("subscribe_to_replied_threads"),value:this.state.subscribe_to_replied_threads,choices:this.subscribeToChoices})))),u["default"].createElement("div",{className:"panel-footer"},u["default"].createElement("div",{className:"row"},u["default"].createElement("div",{className:"col-sm-8 col-sm-offset-4"},u["default"].createElement(d["default"],{className:"btn-primary",loading:this.state.isLoading},gettext("Save changes")))))))}}]),t}(p["default"]);a["default"]=C},{"../../reducers/auth":279,"../../services/ajax":293,"../../services/page-title":300,"../../services/snackbar":303,"../../services/store":304,"../button":5,"../form":41,"../form-group":40,"../select":152,"../yes-no-switch":233,react:"react"}],53:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0}),a.CompactNav=a.SideNav=void 0;var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("react-router"),d=e("../li"),f=r(d),p=e("../../index");r(p),a.SideNav=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){var e=this;return u["default"].createElement("div",{className:"list-group nav-side"},this.props.options.map(function(t){return u["default"].createElement(c.Link,{to:e.props.baseUrl+t.component+"/",className:"list-group-item",activeClassName:"active",key:t.component},u["default"].createElement("span",{className:"material-icon"},t.icon),t.name)}))}}]),t}(u["default"].Component),a.CompactNav=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){var e=this;return u["default"].createElement("ul",{className:"dropdown-menu",role:"menu"},this.props.options.map(function(t){return u["default"].createElement(f["default"],{path:e.props.baseUrl+t.component+"/",key:t.component},u["default"].createElement(c.Link,{to:e.props.baseUrl+t.component+"/",onClick:e.props.hideNav},u["default"].createElement("span",{className:"material-icon"},t.icon),t.name))}))}}]),t}(u["default"].Component)},{"../../index":234,"../li":42,react:"react","react-router":"react-router"}],54:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{tick:e.tick.tick,user:e.auth.user,"username-history":e["username-history"]}}function i(){return[{path:N["default"].get("USERCP_URL")+"forum-options/",component:(0,f.connect)(l)(v["default"])},{path:N["default"].get("USERCP_URL")+"change-username/",component:(0,f.connect)(l)(g["default"])},{path:N["default"].get("USERCP_URL")+"sign-in-credentials/",component:(0,f.connect)(l)(E["default"])}]}Object.defineProperty(a,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.select=l,a.paths=i;var c=e("react"),d=r(c),f=e("react-redux"),p=e("../dropdown-toggle"),h=r(p),m=e("./navs"),b=e("./forum-options"),v=r(b),y=e("./change-username/root"),g=r(y),_=e("./sign-in-credentials/root"),E=r(_),w=e("../with-dropdown"),O=r(w),k=e("../../index"),N=r(k),j=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"render",value:function(){return d["default"].createElement("div",{className:"page page-options"},d["default"].createElement("div",{className:"page-header"},d["default"].createElement("div",{className:"container"},d["default"].createElement("h1",{className:"pull-left"},gettext("Change your options")),d["default"].createElement(h["default"],{toggleNav:this.toggleNav,dropdown:this.state.dropdown}))),d["default"].createElement("div",{className:this.getCompactNavClassName()},d["default"].createElement(m.CompactNav,{options:N["default"].get("USER_OPTIONS"),baseUrl:N["default"].get("USERCP_URL"),hideNav:this.hideNav})),d["default"].createElement("div",{className:"container"},d["default"].createElement("div",{className:"row"},d["default"].createElement("div",{className:"col-md-3 hidden-xs hidden-sm"},d["default"].createElement(m.SideNav,{options:N["default"].get("USER_OPTIONS"),baseUrl:N["default"].get("USERCP_URL")})),d["default"].createElement("div",{className:"col-md-9"},this.props.children))))}}]),t}(O["default"]);a["default"]=j},{"../../index":234,"../dropdown-toggle":19,"../with-dropdown":232,"./change-username/root":51,"./forum-options":52,"./navs":53,"./sign-in-credentials/root":57,react:"react","react-redux":"react-redux"}],55:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../../button"),f=n(d),p=e("../../form"),h=n(p),m=e("../../form-group"),b=n(m),v=e("../../../services/ajax"),y=n(v),g=e("../../../services/snackbar"),_=n(g),E=e("../../../utils/validators"),w=r(E),O=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={new_email:"",password:"",validators:{new_email:[w.email()],password:[]},isLoading:!1},a}return l(t,e),i(t,[{key:"clean",value:function(){var e=this.validate(),t=[this.state.new_email.trim().length,this.state.password.trim().length];return t.indexOf(0)!==-1?(_["default"].error(gettext("Fill out all fields.")),!1):!e.new_email||(_["default"].error(e.new_email[0]),!1)}},{key:"send",value:function(){return y["default"].post(this.props.user.api_url.change_email,{new_email:this.state.new_email,password:this.state.password})}},{key:"handleSuccess",value:function(e){this.setState({new_email:"",password:""}),_["default"].success(e.detail)}},{key:"handleError",value:function(e){400===e.status?e.new_email?_["default"].error(e.new_email):_["default"].error(e.password):_["default"].apiError(e)}},{key:"render",value:function(){return c["default"].createElement("form",{onSubmit:this.handleSubmit,className:"form-horizontal"},c["default"].createElement("input",{type:"type",style:{display:"none"}}),c["default"].createElement("input",{type:"password",style:{display:"none"}}),c["default"].createElement("div",{className:"panel panel-default panel-form"},c["default"].createElement("div",{className:"panel-heading"},c["default"].createElement("h3",{className:"panel-title"},gettext("Change e-mail address"))),c["default"].createElement("div",{className:"panel-body"},c["default"].createElement(b["default"],{label:gettext("New e-mail"),"for":"id_new_email",labelClass:"col-sm-4",controlClass:"col-sm-8"},c["default"].createElement("input",{type:"text",id:"id_new_email",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("new_email"),value:this.state.new_email})),c["default"].createElement("hr",null),c["default"].createElement(b["default"],{label:gettext("Your current password"),"for":"id_password",labelClass:"col-sm-4",controlClass:"col-sm-8"},c["default"].createElement("input",{type:"password",id:"id_password",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("password"),value:this.state.password}))),c["default"].createElement("div",{className:"panel-footer"},c["default"].createElement("div",{className:"row"},c["default"].createElement("div",{className:"col-sm-8 col-sm-offset-4"},c["default"].createElement(f["default"],{className:"btn-primary",loading:this.state.isLoading},gettext("Change e-mail")))))))}}]),t}(h["default"]);a["default"]=O},{"../../../services/ajax":293,"../../../services/snackbar":303,"../../../utils/validators":320,"../../button":5,"../../form":41,"../../form-group":40,react:"react"}],56:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../../button"),f=n(d),p=e("../../form"),h=n(p),m=e("../../form-group"),b=n(m),v=e("../../../index"),y=n(v),g=e("../../../services/ajax"),_=n(g),E=e("../../../services/snackbar"),w=n(E),O=e("../../../utils/validators"),k=r(O),N=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={new_password:"",repeat_password:"",password:"",validators:{new_password:[k.passwordMinLength(y["default"].get("SETTINGS"))],repeat_password:[],password:[]},isLoading:!1},a}return l(t,e),i(t,[{key:"clean",value:function(){var e=this.validate(),t=[this.state.new_password.trim().length,this.state.repeat_password.trim().length,this.state.password.trim().length];return t.indexOf(0)!==-1?(w["default"].error(gettext("Fill out all fields.")),!1):e.new_password?(w["default"].error(e.new_password[0]),!1):this.state.new_password.trim()===this.state.repeat_password.trim()||(w["default"].error(gettext("New passwords are different.")),!1)}},{key:"send",value:function(){return _["default"].post(this.props.user.api_url.change_password,{new_password:this.state.new_password,password:this.state.password})}},{key:"handleSuccess",value:function(e){this.setState({new_password:"",repeat_password:"",password:""}),w["default"].success(e.detail)}},{key:"handleError",value:function(e){400===e.status?e.new_password?w["default"].error(e.new_password):w["default"].error(e.password):w["default"].apiError(e)}},{key:"render",value:function(){return c["default"].createElement("form",{onSubmit:this.handleSubmit,className:"form-horizontal"},c["default"].createElement("input",{type:"type",style:{display:"none"}}),c["default"].createElement("input",{type:"password",style:{display:"none"}}),c["default"].createElement("div",{className:"panel panel-default panel-form"},c["default"].createElement("div",{
className:"panel-heading"},c["default"].createElement("h3",{className:"panel-title"},gettext("Change password"))),c["default"].createElement("div",{className:"panel-body"},c["default"].createElement(b["default"],{label:gettext("New password"),"for":"id_new_password",labelClass:"col-sm-4",controlClass:"col-sm-8"},c["default"].createElement("input",{type:"password",id:"id_new_password",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("new_password"),value:this.state.new_password})),c["default"].createElement(b["default"],{label:gettext("Repeat password"),"for":"id_repeat_password",labelClass:"col-sm-4",controlClass:"col-sm-8"},c["default"].createElement("input",{type:"password",id:"id_repeat_password",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("repeat_password"),value:this.state.repeat_password})),c["default"].createElement("hr",null),c["default"].createElement(b["default"],{label:gettext("Your current password"),"for":"id_password",labelClass:"col-sm-4",controlClass:"col-sm-8"},c["default"].createElement("input",{type:"password",id:"id_password",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("password"),value:this.state.password}))),c["default"].createElement("div",{className:"panel-footer"},c["default"].createElement("div",{className:"row"},c["default"].createElement("div",{className:"col-sm-8 col-sm-offset-4"},c["default"].createElement(f["default"],{className:"btn-primary",loading:this.state.isLoading},gettext("Change password")))))))}}]),t}(h["default"]);a["default"]=N},{"../../../index":234,"../../../services/ajax":293,"../../../services/snackbar":303,"../../../utils/validators":320,"../../button":5,"../../form":41,"../../form-group":40,react:"react"}],57:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./change-email"),d=r(c),f=e("./change-password"),p=r(f),h=e("../../../index"),m=r(h),b=e("../../../services/page-title"),v=r(b),y=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"componentDidMount",value:function(){v["default"].set({title:gettext("Change email or password"),parent:gettext("Change your options")})}},{key:"render",value:function(){return u["default"].createElement("div",null,u["default"].createElement(d["default"],{user:this.props.user}),u["default"].createElement(p["default"],{user:this.props.user}),u["default"].createElement("p",{className:"message-line"},u["default"].createElement("span",{className:"material-icon"},"warning"),u["default"].createElement("a",{href:m["default"].get("FORGOTTEN_PASSWORD_URL")},gettext("Change forgotten password"))))}}]),t}(u["default"].Component);a["default"]=y},{"../../../index":234,"../../../services/page-title":300,"./change-email":55,"./change-password":56,react:"react"}],58:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../utils/string-count"),d=r(c),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getClassName",value:function(){return this.props.copy&&this.props.copy.length&&1===(0,d["default"])(this.props.copy,"<p")&&this.props.copy.indexOf("<br")===-1?"page-lead lead":"page-lead"}},{key:"render",value:function(){return this.props.copy&&this.props.copy.length?u["default"].createElement("div",{className:this.getClassName(),dangerouslySetInnerHTML:{__html:this.props.copy}}):null}}]),t}(u["default"].Component);a["default"]=f},{"../utils/string-count":319,react:"react"}],59:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./loader"),d=r(c),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"panel-body panel-body-loading"},u["default"].createElement(d["default"],{className:"loader loader-spaced"}))}}]),t}(u["default"].Component);a["default"]=f},{"./loader":43,react:"react"}],60:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getHelpText",value:function(){return this.props.helpText?u["default"].createElement("p",{className:"help-block"},this.props.helpText):null}},{key:"render",value:function(){return u["default"].createElement("div",{className:"panel-body panel-message-body"},u["default"].createElement("div",{className:"message-icon"},u["default"].createElement("span",{className:"material-icon"},this.props.icon||"info_outline")),u["default"].createElement("div",{className:"message-body"},u["default"].createElement("p",{className:"lead"},this.props.message),this.getHelpText()))}}]),t}(u["default"].Component);a["default"]=c},{react:"react"}],61:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function o(e,t){h["default"].patch(e.api.index,[{op:"remove",path:"participants",value:t.id}]).then(function(){b["default"].success(gettext("You have left this thread.")),window.setTimeout(function(){window.location=f["default"].get("PRIVATE_THREADS_URL")},3e3)},function(e){b["default"].apiError(e)})}function s(e,t){h["default"].patch(e.api.index,[{op:"remove",path:"participants",value:t.id},{op:"add",path:"acl",value:1}]).then(function(e){y["default"].dispatch((0,c.updateAcl)(e)),y["default"].dispatch(u.replace(e.participants));var a=gettext("%(user)s has been removed from this thread.");b["default"].success(interpolate(a,{user:t.username},!0))},function(e){b["default"].apiError(e)})}function l(e,t){h["default"].patch(e.api.index,[{op:"replace",path:"owner",value:t.id},{op:"add",path:"acl",value:1}]).then(function(e){y["default"].dispatch((0,c.updateAcl)(e)),y["default"].dispatch(u.replace(e.participants));var a=gettext("%(user)s has been made new thread owner.");b["default"].success(interpolate(a,{user:t.username},!0))},function(e){b["default"].apiError(e)})}Object.defineProperty(a,"__esModule",{value:!0}),a.leave=o,a.remove=s,a.changeOwner=l;var i=e("../../../reducers/participants"),u=n(i),c=e("../../../reducers/thread"),d=e("../../.."),f=r(d),p=e("../../../services/ajax"),h=r(p),m=e("../../../services/snackbar"),b=r(m),v=e("../../../services/store"),y=r(v)},{"../../..":234,"../../../reducers/participants":280,"../../../reducers/thread":288,"../../../services/ajax":293,"../../../services/snackbar":303,"../../../services/store":304}],62:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return e.is_owner?s["default"].createElement("li",{className:"participant-owner"},s["default"].createElement("span",{className:"material-icon"},"grade"),gettext("Owner")):null}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){var t=e.participant;return s["default"].createElement("div",{className:"col-md-3 participant-card"},s["default"].createElement("a",{className:"avatar-link",href:t.url},s["default"].createElement(f["default"],{user:t,size:"50"})),s["default"].createElement("div",{className:"participant-profile"},s["default"].createElement("a",{className:"item-title",href:t.url},t.username),s["default"].createElement("ul",{className:"list-unstyled list-inline"},s["default"].createElement(n,t),s["default"].createElement(i["default"],e),s["default"].createElement(c["default"],e))))},a.OwnerBadge=n;var o=e("react"),s=r(o),l=e("./make-owner"),i=r(l),u=e("./remove"),c=r(u),d=e("../../avatar"),f=r(d)},{"../../avatar":3,"./make-owner":64,"./remove":65,react:"react"}],63:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return o["default"].createElement("div",{className:"participants-cards"},(0,u["default"])(e.participants,4).map(function(t){var a=t.map(function(e){return e.id}).join("_");return o["default"].createElement(l["default"],{key:a,participants:t,thread:e.thread,user:e.user,userIsOwner:e.userIsOwner})}))};var n=e("react"),o=r(n),s=e("./row"),l=r(s),i=e("../../../utils/batch"),u=r(i)},{"../../../utils/batch":307,"./row":66,react:"react"}],64:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./actions"),d=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onClick=function(){var e=!1;if(a.isUser)e=confirm(gettext("Are you sure you want to take over this thread?"));else{var t=gettext("Are you sure you want to change thread owner to %(user)s?");e=confirm(interpolate(t,{user:a.props.participant.username},!0))}e&&(0,c.changeOwner)(a.props.thread,a.props.participant)},a.isUser=e.participant.id===e.user.id,a}return s(t,e),l(t,[{key:"render",value:function(){return this.props.participant.is_owner?null:this.props.thread.acl.can_change_owner?u["default"].createElement("li",null,u["default"].createElement("button",{type:"button",onClick:this.onClick,className:"btn-link btn-sm"},gettext("Make owner"))):null}}]),t}(u["default"].Component);a["default"]=d},{"./actions":61,react:"react"}],65:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./actions"),d=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onClick=function(){var e=!1;if(a.isUser)e=confirm(gettext("Are you sure you want to leave this thread?"));else{var t=gettext("Are you sure you want to remove %(user)s from this thread?");e=confirm(interpolate(t,{user:a.props.participant.username},!0))}e&&(a.isUser?(0,c.leave)(a.props.thread,a.props.participant):(0,c.remove)(a.props.thread,a.props.participant))},a.isUser=e.participant.id===e.user.id,a}return s(t,e),l(t,[{key:"render",value:function(){var e=this.props.user.acl.can_moderate_private_threads;return this.props.userIsOwner||this.isUser||e?u["default"].createElement("li",null,u["default"].createElement("button",{className:"btn-link btn-sm",onClick:this.onClick,type:"button"},this.isUser?gettext("Leave thread"):gettext("Remove"))):null}}]),t}(u["default"].Component);a["default"]=d},{"./actions":61,react:"react"}],66:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return o["default"].createElement("div",{className:"row"},e.participants.map(function(t){return o["default"].createElement(l["default"],{key:t.id,participant:t,thread:e.thread,user:e.user,userIsOwner:e.userIsOwner})}))};var n=e("react"),o=r(n),s=e("./card"),l=r(s)},{"./card":62,react:"react"}],67:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){return t[0].id===e.id}Object.defineProperty(a,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a["default"]=function(e){return e.participants.length?i["default"].createElement("div",{className:"panel panel-default panel-participants"},i["default"].createElement("div",{className:"panel-body"},i["default"].createElement(c["default"],s({userIsOwner:o(e.user,e.participants)},e)),i["default"].createElement("p",null,f.getParticipantsCopy(e.participants)))):null},a.getUserIsOwner=o;var l=e("react"),i=n(l),u=e("./cards-list"),c=n(u),d=e("./utils"),f=r(d)},{"./cards-list":63,"./utils":68,react:"react"}],68:[function(e,t,a){"use strict";function r(e){var t=e.length,a=ngettext("This thread has %(users)s participant.","This thread has %(users)s participants.",t);return interpolate(a,{users:t},!0)}Object.defineProperty(a,"__esModule",{value:!0}),a.getParticipantsCopy=r},{}],69:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0}),a.LABELS=a.STYLES=void 0;var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../services/zxcvbn"),d=r(c),f=a.STYLES=["progress-bar-danger","progress-bar-warning","progress-bar-warning","progress-bar-primary","progress-bar-success"],p=a.LABELS=[gettext("Entered password is very weak."),gettext("Entered password is weak."),gettext("Entered password is average."),gettext("Entered password is strong."),gettext("Entered password is very strong.")],h=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a._score=0,a._password=null,a._inputs=[],a}return s(t,e),l(t,[{key:"getScore",value:function(e,t){var a=this,r=!1;return e.trim()!==this._password&&(r=!0),t.length!==this._inputs.length?r=!0:t.map(function(e,t){e.trim()!==a._inputs[t]&&(r=!0)}),r&&(this._score=d["default"].scorePassword(e,t),this._password=e.trim(),this._inputs=t.map(function(e){return e.trim()})),this._score}},{key:"render",value:function(){var e=this.getScore(this.props.password,this.props.inputs);return u["default"].createElement("div",{className:"help-block password-strength"},u["default"].createElement("div",{className:"progress"},u["default"].createElement("div",{className:"progress-bar "+f[e],style:{width:20+20*e+"%"},role:"progress-bar","aria-valuenow":e,"aria-valuemin":"0","aria-valuemax":"4"},u["default"].createElement("span",{className:"sr-only"},p[e]))),u["default"].createElement("p",{className:"text-small"},p[e]))}}]),t}(u["default"].Component);a["default"]=h},{"../services/zxcvbn":305,react:"react"}],70:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(){for(var e="";12!=e.length;)e=Math.random().toString(36).replace(/[^a-zA-Z0-9]+/g,"").substr(1,12);return e}Object.defineProperty(a,"__esModule",{value:!0}),a.PollChoice=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.generateRandomHash=l;var u=e("react"),c=r(u),d=function(e){function t(){var e,a,r,s;n(this,t);for(var i=arguments.length,u=Array(i),c=0;c<i;c++)u[c]=arguments[c];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.onAdd=function(){var e=r.props.choices.slice();e.push({hash:l(),label:""}),r.props.setChoices(e)},r.onChange=function(e,t){var a=r.props.choices.map(function(a){return a.hash===e&&(a.label=t),a});r.props.setChoices(a)},r.onDelete=function(e){var t=r.props.choices.filter(function(t){return t.hash!==e});r.props.setChoices(t)},s=a,o(r,s)}return s(t,e),i(t,[{key:"render",value:function(){var e=this;return c["default"].createElement("div",{className:"poll-choices-control"},c["default"].createElement("ul",{className:"list-group"},this.props.choices.map(function(t){return c["default"].createElement(f,{canDelete:e.props.choices.length>2,choice:t,disabled:e.props.disabled,key:t.hash,onChange:e.onChange,onDelete:e.onDelete})})),c["default"].createElement("button",{className:"btn btn-default btn-sm",disabled:this.props.disabled,onClick:this.onAdd,type:"button"},gettext("Add choice")))}}]),t}(c["default"].Component);a["default"]=d;var f=a.PollChoice=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onChange=function(e){r.props.onChange(r.props.choice.hash,e.target.value)},r.onDelete=function(){var e=confirm(gettext("Are you sure you want to delete this choice?"));e&&r.props.onDelete(r.props.choice.hash)},s=a,o(r,s)}return s(t,e),i(t,[{key:"render",value:function(){return c["default"].createElement("li",{className:"list-group-item"},c["default"].createElement("button",{className:"btn",disabled:!this.props.canDelete||this.props.disabled,onClick:this.onDelete,title:gettext("Delete this choice"),type:"button"},c["default"].createElement("span",{className:"material-icon"},"close")),c["default"].createElement("input",{disabled:this.props.disabled,maxlength:"255",placeholder:gettext("choice label"),type:"text",onChange:this.onChange,value:this.props.choice.label}))}}]),t}(c["default"].Component)},{react:"react"}],71:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e.isEdit?null:d["default"].createElement(g["default"],{label:gettext("Make voting public"),helpText:gettext("Making voting public will allow everyone to access detailed list of votes, showing which users voted for which choices and at which times. This option can't be changed after poll's creation. Moderators may see voting details for all polls."),"for":"id_is_public",labelClass:"col-sm-4",controlClass:"col-sm-8"},d["default"].createElement(E["default"],{id:"id_is_public",disabled:e.disabled,iconOn:"visibility",iconOff:"visibility_off",labelOn:gettext("Votes are public"),labelOff:gettext("Votes are hidden"),onChange:e.bindInput("is_public"),value:e.value}))}Object.defineProperty(a,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.PollPublicSwitch=i;var c=e("react"),d=n(c),f=e("./choices-control"),p=n(f),h=e("../../button"),m=n(h),b=e("../../form"),v=n(b),y=e("../../form-group"),g=n(y),_=e("../../yes-no-switch"),E=n(_),w=e("../../../reducers/poll"),O=r(w),k=e("../../../services/ajax"),N=n(k),j=e("../../../services/posting"),x=n(j),P=e("../../../services/snackbar"),C=n(P),S=e("../../../services/store"),T=n(S),M=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.setChoices=function(e){var t=Object.assign({},t,{choices:null});a.setState({choices:e,errors:t})},a.onCancel=function(){var e=confirm(gettext("Are you sure you want to discard poll?"));e&&x["default"].close()};var r=e.poll||{question:"",choices:[{hash:"choice-10000",label:""},{hash:"choice-20000",label:""}],length:0,allowed_choices:1,allow_revotes:0,is_public:0};return a.state={isLoading:!1,isEdit:!!r.question,question:r.question,choices:r.choices,length:r.length,allowed_choices:r.allowed_choices,allow_revotes:r.allow_revotes,is_public:r.is_public,validators:{question:[],choices:[],length:[],allowed_choices:[]},errors:{}},a}return l(t,e),u(t,[{key:"send",value:function(){var e={question:this.state.question,choices:this.state.choices,length:this.state.length,allowed_choices:this.state.allowed_choices,allow_revotes:this.state.allow_revotes,is_public:this.state.is_public};return this.state.isEdit?N["default"].put(this.props.poll.api.index,e):N["default"].post(this.props.thread.api.poll,e)}},{key:"handleSuccess",value:function(e){T["default"].dispatch(O.replace(e)),this.state.isEdit?C["default"].success(gettext("Poll has been edited.")):C["default"].success(gettext("Poll has been posted.")),x["default"].close()}},{key:"handleError",value:function(e){400===e.status?(e.non_field_errors&&(e.allowed_choices=e.non_field_errors),this.setState({errors:Object.assign({},e)}),C["default"].error(gettext("Form contains errors."))):C["default"].apiError(e)}},{key:"render",value:function(){return d["default"].createElement("div",{className:"poll-form"},d["default"].createElement("div",{className:"container"},d["default"].createElement("form",{onSubmit:this.handleSubmit,className:"form-horizontal"},d["default"].createElement("div",{className:"panel panel-default panel-form"},d["default"].createElement("div",{className:"panel-body"},d["default"].createElement("fieldset",null,d["default"].createElement("legend",null,gettext("Question and choices")),d["default"].createElement(g["default"],{label:gettext("Poll question"),"for":"id_questions",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.question},d["default"].createElement("input",{className:"form-control",disabled:this.state.isLoading,id:"id_questions",onChange:this.bindInput("question"),type:"text",maxlength:"255",value:this.state.question})),d["default"].createElement(g["default"],{label:gettext("Available choices"),labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.choices},d["default"].createElement(p["default"],{choices:this.state.choices,disabled:this.state.isLoading,setChoices:this.setChoices}))),d["default"].createElement("fieldset",null,d["default"].createElement("legend",null,gettext("Voting")),d["default"].createElement(g["default"],{label:gettext("Poll length"),helpText:gettext("Enter number of days for which voting in this poll should be possible or zero to run this poll indefinitely."),"for":"id_length",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.length},d["default"].createElement("input",{className:"form-control",disabled:this.state.isLoading,id:"id_length",onChange:this.bindInput("length"),type:"text",value:this.state.length})),d["default"].createElement(g["default"],{label:gettext("Allowed choices"),"for":"id_allowed_choices",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.allowed_choices},d["default"].createElement("input",{className:"form-control",disabled:this.state.isLoading,id:"id_allowed_choices",onChange:this.bindInput("allowed_choices"),type:"text",maxlength:"255",value:this.state.allowed_choices})),d["default"].createElement(g["default"],{label:gettext("Allow vote changes"),"for":"id_allow_revotes",labelClass:"col-sm-4",controlClass:"col-sm-8"},d["default"].createElement(E["default"],{id:"id_allow_revotes",disabled:this.state.isLoading,iconOn:"check",iconOff:"close",labelOn:gettext("Allow participants to change their vote"),labelOff:gettext("Don't allow participants to change their vote"),onChange:this.bindInput("allow_revotes"),value:this.state.allow_revotes})),d["default"].createElement(i,{bindInput:this.bindInput,disabled:this.state.isLoading,isEdit:this.state.isEdit,value:this.state.is_public}))),d["default"].createElement("div",{className:"panel-footer"},d["default"].createElement("div",{className:"row"},d["default"].createElement("div",{className:"col-sm-8 col-sm-offset-4"},d["default"].createElement(m["default"],{className:"btn-primary",loading:this.state.isLoading},this.state.isEdit?gettext("Save changes"):gettext("Post poll"))," ",d["default"].createElement("button",{className:"btn btn-default",disabled:this.state.isLoading,onClick:this.onCancel,type:"button"},gettext("Cancel")))))))))}}]),t}(v["default"]);a["default"]=M},{"../../../reducers/poll":281,"../../../services/ajax":293,"../../../services/posting":302,"../../../services/snackbar":303,"../../../services/store":304,"../../button":5,"../../form":41,"../../form-group":40,"../../yes-no-switch":233,"./choices-control":70,react:"react"}],72:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a.PollForm=a.Poll=void 0;var n=e("./poll"),o=r(n),s=e("./form"),l=r(s);a.Poll=o["default"],a.PollForm=l["default"]},{"./form":71,"./poll":74}],73:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=interpolate((0,h["default"])(gettext("Posted by %(poster)s %(posted_on)s.")),{poster:o(e.poll),posted_on:s(e.poll)},!0);return f["default"].createElement("li",{className:"poll-info-creation",dangerouslySetInnerHTML:{__html:t}})}function o(e){return e.url.poster?interpolate(v,{url:(0,h["default"])(e.url.poster),user:(0,h["default"])(e.poster_name)},!0):interpolate(b,{user:(0,h["default"])(e.poster_name)},!0)}function s(e){return interpolate(m,{absolute:(0,h["default"])(e.posted_on.format("LLL")),relative:(0,h["default"])(e.posted_on.fromNow())},!0)}function l(e){if(!e.poll.length)return null;var t=interpolate((0,h["default"])(gettext("Voting ends %(ends_on)s.")),{ends_on:i(e.poll)},!0);return f["default"].createElement("li",{className:"poll-info-ends-on",dangerouslySetInnerHTML:{__html:t}})}function i(e){return interpolate(m,{absolute:(0,h["default"])(e.endsOn.format("LLL")),
relative:(0,h["default"])(e.endsOn.fromNow())},!0)}function u(e){var t=ngettext("%(votes)s vote","%(votes)s votes",e.votes),a=interpolate(t,{votes:e.votes},!0);return f["default"].createElement("li",{className:"poll-info-votes"},a)}function c(e){return e.poll.is_public?f["default"].createElement("li",{className:"poll-info-public"},gettext("Votes are public.")):null}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return f["default"].createElement("ul",{className:"list-unstyled list-inline poll-details"},f["default"].createElement(n,{poll:e.poll}),f["default"].createElement(l,{poll:e.poll}),f["default"].createElement(u,{votes:e.poll.votes}),f["default"].createElement(c,{poll:e.poll}))},a.PollCreation=n,a.getPoster=o,a.getPostedOn=s,a.PollLength=l,a.getEndsOn=i,a.PollVotes=u,a.PollIsPublic=c;var d=e("react"),f=r(d),p=e("../../utils/escape-html"),h=r(p),m='<abbr title="%(absolute)s">%(relative)s</abbr>',b='<span class="item-title">%(user)s</span>',v='<a href="%(url)s" class="item-title">%(user)s</a>'},{"../../utils/escape-html":310,react:"react"}],74:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return!!e.length&&(0,p["default"])().isAfter(e.endsOn)}Object.defineProperty(a,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.getIsPollOver=l;var c=e("react"),d=r(c),f=e("moment"),p=r(f),h=e("./results"),m=r(h),b=e("./voting"),v=r(b),y=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.showResults=function(){a.setState({showResults:!0})},a.showVoting=function(){a.setState({showResults:!1})};var r=!0;return e.user.id&&!e.poll.hasSelectedChoices&&(r=!1),a.state={showResults:r},a}return s(t,e),u(t,[{key:"render",value:function(){if(!this.props.thread.poll)return null;var e=l(this.props.poll);return e||!this.props.poll.acl.can_vote||this.state.showResults?d["default"].createElement(m["default"],i({isPollOver:e,showVoting:this.showVoting},this.props)):d["default"].createElement(v["default"],i({showResults:this.showResults},this.props))}}]),t}(d["default"].Component);a["default"]=y},{"./results":76,"./voting":80,moment:"moment",react:"react"}],75:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=0;return e.choice.votes&&e.poll.votes&&(t=Math.ceil(100*e.choice.votes/e.poll.votes)),u["default"].createElement("li",null,u["default"].createElement("ul",{className:"list-unstyled list-inline poll-chart"},u["default"].createElement("li",{className:"poll-char-label"},u["default"].createElement("strong",null,e.choice.label)),u["default"].createElement(o,{proc:t,votes:e.choice.votes}),u["default"].createElement(l,{selected:e.choice.selected})),u["default"].createElement("div",{className:"progress"},u["default"].createElement("div",{className:"progress-bar",role:"progressbar","aria-valuenow":t,"aria-valuemin":"0","aria-valuemax":"100",style:{width:t+"%"}},u["default"].createElement("span",{className:"sr-only"},s(e.votes,e.proc)))))}function o(e){return u["default"].createElement("li",{className:"poll-chart-votes"},s(e.votes,e.proc))}function s(e,t){var a=ngettext("%(votes)s vote, %(proc)s% of total.","%(votes)s votes, %(proc)s% of total.",e);return interpolate(a,{votes:e,proc:t},!0)}function l(e){return e.selected?u["default"].createElement("li",{className:"poll-chart-selected"},u["default"].createElement("span",{className:"material-icon"},"check_circle"),gettext("Your choice.")):null}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return u["default"].createElement("ul",{className:"list-unstyled poll-choices-bars"},e.poll.choices.map(function(t){return u["default"].createElement(n,{choice:t,key:t.hash,poll:e.poll})}))},a.PollChoice=n,a.ChoiceVotes=o,a.getVotesLabel=s,a.UserChoice=l;var i=e("react"),u=r(i)},{react:"react"}],76:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return o["default"].createElement("div",{className:"panel panel-default panel-poll"},o["default"].createElement("div",{className:"panel-body"},o["default"].createElement("h2",null,e.poll.question),o["default"].createElement(d["default"],{poll:e.poll}),o["default"].createElement(l["default"],{poll:e.poll}),o["default"].createElement(u["default"],{isPollOver:e.isPollOver,poll:e.poll,showVoting:e.showVoting,thread:e.thread})))};var n=e("react"),o=r(n),s=e("./chart"),l=r(s),i=e("./options"),u=r(i),c=e("../info"),d=r(c)},{"../info":73,"./chart":75,"./options":78,react:"react"}],77:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return e.isLoading?v["default"].createElement(O["default"],null):e.error?v["default"].createElement(E["default"],{icon:"error_outline",message:e.error}):v["default"].createElement(i,{data:e.data})}function i(e){return v["default"].createElement("div",{className:"modal-body"},v["default"].createElement("ul",{className:"list-unstyled votes-details"},e.data.map(function(e){return v["default"].createElement(u,h({key:e.hash},e))})))}function u(e){return v["default"].createElement("li",null,v["default"].createElement("h4",null,e.label),v["default"].createElement(c,{votes:e.votes}),v["default"].createElement(d,{voters:e.voters}),v["default"].createElement("hr",null))}function c(e){var t=ngettext("%(votes)s user has voted for this choice.","%(votes)s users have voted for this choice.",e.votes),a=interpolate(t,{votes:e.votes},!0);return v["default"].createElement("p",null,a)}function d(e){return e.voters.length?v["default"].createElement("ul",{className:"list-unstyled"},e.voters.map(function(e){return v["default"].createElement(f,h({key:e.slug},e))})):null}function f(e){return e.url?v["default"].createElement("li",null,v["default"].createElement("a",{className:"item-title",href:e.url},e.username)," ",v["default"].createElement(p,{voted_on:e.voted_on})):v["default"].createElement("li",null,v["default"].createElement("strong",null,e.username)," ",v["default"].createElement(p,{voted_on:e.voted_on}))}function p(e){return v["default"].createElement("abbr",{className:"text-muted",title:e.voted_on.format("LLL")},e.voted_on.fromNow())}Object.defineProperty(a,"__esModule",{value:!0});var h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},m=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.ModalBody=l,a.ChoicesList=i,a.ChoiceDetails=u,a.VotesCount=c,a.VotesList=d,a.Voter=f,a.VoteDate=p;var b=e("react"),v=r(b),y=e("moment"),g=r(y),_=e("../../modal-message"),E=r(_),w=e("../../modal-loader"),O=r(w),k=e("../../../services/ajax"),N=r(k),j=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isLoading:!0,error:null,data:[]},a}return s(t,e),m(t,[{key:"componentDidMount",value:function(){var e=this;N["default"].get(this.props.poll.api.votes).then(function(t){var a=t.map(function(e){return Object.assign({},e,{voters:e.voters.map(function(e){return Object.assign({},e,{voted_on:(0,g["default"])(e.voted_on)})})})});e.setState({isLoading:!1,data:a})},function(t){e.setState({isLoading:!1,error:t.detail})})}},{key:"render",value:function(){return v["default"].createElement("div",{className:"modal-dialog"+(this.state.error?" modal-message":" modal-sm"),role:"document"},v["default"].createElement("div",{className:"modal-content"},v["default"].createElement("div",{className:"modal-header"},v["default"].createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},v["default"].createElement("span",{"aria-hidden":"true"},"×")),v["default"].createElement("h4",{className:"modal-title"},gettext("Poll votes"))),v["default"].createElement(l,{data:this.state.data,error:this.state.error,isLoading:this.state.isLoading})))}}]),t}(v["default"].Component);a["default"]=j},{"../../../services/ajax":293,"../../modal-loader":46,"../../modal-message":47,moment:"moment",react:"react"}],78:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t,a){return a.is_public||t.can_delete||t.can_edit||t.can_see_votes||t.can_vote&&!e&&(!a.hasSelectedChoices||a.allow_revotes)}function u(e){var t=e.poll.acl.can_vote,a=!e.poll.hasSelectedChoices||e.poll.allow_revotes;return t&&a?f["default"].createElement("li",null,f["default"].createElement("button",{className:"btn btn-default",disabled:e.poll.isBusy,onClick:e.showVoting},gettext("Vote"))):null}Object.defineProperty(a,"__esModule",{value:!0}),a.Delete=a.Edit=a.SeeVotes=void 0;var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a["default"]=function(e){return i(e.isPollOver,e.poll.acl,e.poll)?f["default"].createElement("ul",{className:"list-unstyled list-inline poll-options"},f["default"].createElement(u,{isPollOver:e.isPollOver,poll:e.poll,showVoting:e.showVoting}),f["default"].createElement(C,{poll:e.poll}),f["default"].createElement(S,{poll:e.poll,thread:e.thread}),f["default"].createElement(T,{poll:e.poll})):null},a.isVisible=i,a.ChangeVote=u;var d=e("react"),f=n(d),p=e("./modal"),h=n(p),m=e("../../../reducers/poll"),b=r(m),v=e("../../../reducers/thread"),y=r(v),g=e("../../../services/ajax"),_=n(g),E=e("../../../services/modal"),w=n(E),O=e("../../../services/posting"),k=n(O),N=e("../../../services/snackbar"),j=n(N),x=e("../../../services/store"),P=n(x),C=a.SeeVotes=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){w["default"].show(f["default"].createElement(h["default"],{poll:r.props.poll}))},n=a,s(r,n)}return l(t,e),c(t,[{key:"render",value:function(){var e=this.props.poll.is_public||this.props.poll.acl.can_see_votes;return e?f["default"].createElement("li",null,f["default"].createElement("button",{className:"btn btn-default",disabled:this.props.poll.isBusy,onClick:this.onClick},gettext("See votes"))):null}}]),t}(f["default"].Component),S=a.Edit=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){k["default"].open({thread:r.props.thread,poll:r.props.poll,config:{mode:"POLL"}})},n=a,s(r,n)}return l(t,e),c(t,[{key:"render",value:function(){return this.props.poll.acl.can_edit?f["default"].createElement("li",null,f["default"].createElement("button",{className:"btn btn-default",disabled:this.props.poll.isBusy,onClick:this.onClick},gettext("Edit"))):null}}]),t}(f["default"].Component),T=a.Delete=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){var e=confirm(gettext("Are you sure you want to delete this poll? This action is not reversible."));e&&(P["default"].dispatch(b.busy()),_["default"]["delete"](r.props.poll.api.index).then(r.handleSuccess,r.handleError))},r.handleSuccess=function(e){j["default"].success("Poll has been deleted"),P["default"].dispatch(b.remove()),P["default"].dispatch(y.updateAcl(e))},r.handleError=function(e){j["default"].apiError(e),P["default"].dispatch(b.release())},n=a,s(r,n)}return l(t,e),c(t,[{key:"render",value:function(){return this.props.poll.acl.can_delete?f["default"].createElement("li",null,f["default"].createElement("button",{className:"btn btn-default",disabled:this.props.poll.isBusy,onClick:this.onClick},gettext("Delete"))):null}}]),t}(f["default"].Component)},{"../../../reducers/poll":281,"../../../reducers/thread":288,"../../../services/ajax":293,"../../../services/modal":299,"../../../services/posting":302,"../../../services/snackbar":303,"../../../services/store":304,"./modal":77,react:"react"}],79:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=ngettext("You can select %(choices)s choice.","You can select %(choices)s choices.",e.choicesLeft),a=interpolate(t,{choices:e.choicesLeft},!0);return l["default"].createElement("li",{className:"poll-help-choices-left"},a)}function o(e){return e.poll.allow_revotes?l["default"].createElement("li",{className:"poll-help-allow-revotes"},gettext("You can change your vote later.")):l["default"].createElement("li",{className:"poll-help-no-revotes"},gettext("Votes are final."))}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return l["default"].createElement("ul",{className:"list-unstyled list-inline poll-help"},l["default"].createElement(n,{choicesLeft:e.choicesLeft}),l["default"].createElement(o,{poll:e.poll}))},a.PollChoicesLeft=n,a.PollAllowRevote=o;var s=e("react"),l=r(s),i=e("../../../utils/escape-html");r(i)},{"../../../utils/escape-html":310,react:"react"}],80:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("./help"),f=n(d),p=e("./select"),h=n(p),m=e("./utils"),b=e("../info"),v=n(b),y=e("../../button"),g=n(y),_=e("../../form"),E=n(_),w=e("../../../reducers/poll"),O=r(w),k=e("../../../services/ajax"),N=n(k),j=e("../../../services/snackbar"),x=n(j),P=e("../../../services/store"),C=n(P),S=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.toggleChoice=function(e){var t=(0,m.getChoiceFromHash)(a.state.choices,e),r=null;r=t.selected?a.deselectChoice(t,e):a.selectChoice(t,e),a.setState({choices:r,choicesLeft:(0,m.getChoicesLeft)(a.props.poll,r)})},a.selectChoice=function(e,t){var r=(0,m.getChoicesLeft)(a.props.poll,a.state.choices);if(!r)for(var n in a.state.choices.slice()){var o=a.state.choices[n];if(o.selected&&o.hash!=t){o.selected=!1;break}}return a.state.choices.map(function(e){return Object.assign({},e,{selected:e.hash==t||e.selected})})},a.deselectChoice=function(e,t){return a.state.choices.map(function(e){return Object.assign({},e,{selected:e.hash!=t&&e.selected})})},a.state={isLoading:!1,choices:e.poll.choices,choicesLeft:(0,m.getChoicesLeft)(e.poll,e.poll.choices)},a}return l(t,e),i(t,[{key:"clean",value:function(){return this.state.choicesLeft!==this.props.poll.allowed_choices||(x["default"].error(gettext("You need to select at least one choice")),!1)}},{key:"send",value:function(){var e=[];for(var t in this.state.choices.slice()){var a=this.state.choices[t];a.selected&&e.push(a.hash)}return N["default"].post(this.props.poll.api.votes,e)}},{key:"handleSuccess",value:function(e){C["default"].dispatch(O.replace(e)),x["default"].success(gettext("Your vote has been saved.")),this.props.showResults()}},{key:"handleError",value:function(e){400===e.status?x["default"].error(e.detail):x["default"].apiError(e)}},{key:"render",value:function(){return c["default"].createElement("div",{className:"panel panel-default panel-poll"},c["default"].createElement("form",{onSubmit:this.handleSubmit},c["default"].createElement("div",{className:"panel-body"},c["default"].createElement("h2",null,this.props.poll.question),c["default"].createElement(v["default"],{poll:this.props.poll}),c["default"].createElement(h["default"],{choices:this.state.choices,toggleChoice:this.toggleChoice}),c["default"].createElement(f["default"],{choicesLeft:this.state.choicesLeft,poll:this.props.poll})),c["default"].createElement("div",{className:"panel-footer"},c["default"].createElement(g["default"],{className:"btn-primary",loading:this.state.isLoading},gettext("Save your vote"))," ",c["default"].createElement("button",{className:"btn btn-default",disabled:this.state.isLoading,onClick:this.props.showResults,type:"button"},gettext("See results")))))}}]),t}(E["default"]);a["default"]=S},{"../../../reducers/poll":281,"../../../services/ajax":293,"../../../services/snackbar":303,"../../../services/store":304,"../../button":5,"../../form":41,"../info":73,"./help":79,"./select":81,"./utils":82,react:"react"}],81:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0}),a.ChoiceSelect=void 0;var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a["default"]=function(e){return u["default"].createElement("ul",{className:"list-unstyled poll-select-choices"},e.choices.map(function(t){return u["default"].createElement(c,{choice:t,key:t.hash,toggleChoice:e.toggleChoice})}))};var i=e("react"),u=r(i),c=a.ChoiceSelect=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){r.props.toggleChoice(r.props.choice.hash)},s=a,o(r,s)}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("li",{className:"poll-select-choice"},u["default"].createElement("button",{className:this.props.choice.selected?"btn btn-selected":"btn",onClick:this.onClick,type:"button"},u["default"].createElement("span",{className:"material-icon"},this.props.choice.selected?"check_circle":"check"),u["default"].createElement("strong",null,this.props.choice.label)))}}]),t}(u["default"].Component)},{react:"react"}],82:[function(e,t,a){"use strict";function r(e,t){for(var a in e){var r=e[a];if(r.hash===t)return r}return null}function n(e,t){var a=[];for(var r in t){var n=t[r];n.selected&&a.push(n)}return e.allowed_choices-a.length}Object.defineProperty(a,"__esModule",{value:!0}),a.getChoiceFromHash=r,a.getChoicesLeft=n},{}],83:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return"?"===e.item[0]?null:i["default"].createElement("li",{className:o(e.item)},s(e.item))}function o(e){var t="diff-item";return"-"===e[0]?t+=" diff-item-sub":"+"===e[0]&&(t+=" diff-item-add"),t}function s(e){return e.substr(2)}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return i["default"].createElement("div",{className:"modal-body post-changelog-diff"},i["default"].createElement("ul",{className:"list-unstyled"},e.diff.map(function(e,t){return i["default"].createElement(n,{item:e,key:t})})))},a.DiffItem=n,a.getItemClassName=o,a.cleanItem=s;var l=e("react"),i=r(l)},{react:"react"}],84:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return d["default"].createElement("div",{className:e.className||"modal-dialog",role:"document"},d["default"].createElement("div",{className:"modal-content"},d["default"].createElement("div",{className:"modal-header"},d["default"].createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},d["default"].createElement("span",{"aria-hidden":"true"},"×")),d["default"].createElement("h4",{className:"modal-title"},gettext("Post edits history"))),e.children))}Object.defineProperty(a,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.ModalDialog=i;var c=e("react"),d=n(c),f=e("./diff"),p=n(f),h=e("./toolbar"),m=n(h),b=e("./utils"),v=e("../modal-message"),y=n(v),g=e("../modal-loader"),_=n(g),E=e("../../reducers/post"),w=r(E),O=e("../../services/ajax"),k=n(O),N=e("../../services/modal"),j=n(N),x=e("../../services/snackbar"),P=n(x),C=e("../../services/store"),S=n(C),T=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.goToEdit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;a.setState({isBusy:!0});var t=a.props.post.api.edits;null!==e&&(t+="?edit="+e),k["default"].get(t).then(function(e){a.setState({isReady:!0,isBusy:!1,edit:(0,b.hydrateEdit)(e)})},function(e){a.setState({isReady:!0,isBusy:!1,error:e.detail})})},a.revertEdit=function(e){if(!a.state.isBusy){var t=confirm(gettext("Are you sure you with to revert this post to the state from before this edit?"));if(t){a.setState({isBusy:!0});var r=a.props.post.api.edits+"?edit="+e;k["default"].post(r).then(function(e){var t=w.hydrate(e);S["default"].dispatch(w.patch(e,t)),P["default"].success(gettext("Post has been reverted to previous state.")),j["default"].hide()},function(e){P["default"].apiError(e),a.setState({isBusy:!1})})}}},a.state={isReady:!1,isBusy:!0,canRevert:e.post.acl.can_edit,error:null,edit:null},a}return l(t,e),u(t,[{key:"componentDidMount",value:function(){this.goToEdit()}},{key:"render",value:function(){return this.state.error?d["default"].createElement(i,{className:"modal-dialog modal-message"},d["default"].createElement(y["default"],{message:this.state.error})):this.state.isReady?d["default"].createElement(i,null,d["default"].createElement(m["default"],{canRevert:this.state.canRevert,disabled:this.state.isBusy,edit:this.state.edit,goToEdit:this.goToEdit,revertEdit:this.revertEdit}),d["default"].createElement(p["default"],{diff:this.state.edit.diff})):d["default"].createElement(i,null,d["default"].createElement(_["default"],null))}}]),t}(d["default"].Component);a["default"]=T},{"../../reducers/post":282,"../../services/ajax":293,"../../services/modal":299,"../../services/snackbar":303,"../../services/store":304,"../modal-loader":46,"../modal-message":47,"./diff":83,"./toolbar":85,"./utils":86,react:"react"}],85:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return h["default"].createElement(b["default"],{className:"btn-default btn-icon btn-sm pull-left",disabled:e.disabled||!e.edit.previous,onClick:e.onClick,title:gettext("See previous change")},h["default"].createElement("span",{className:"material-icon"},"chevron_left"))}function i(e){return h["default"].createElement(b["default"],{className:"btn-default btn-icon btn-sm pull-left",disabled:e.disabled||!e.edit.next,onClick:e.onClick,title:gettext("See previous change")},h["default"].createElement("span",{className:"material-icon"},"chevron_right"))}function u(e){return h["default"].createElement(b["default"],{className:"btn-default btn-icon btn-sm pull-left",disabled:e.disabled||!e.edit.next,onClick:e.onClick,title:gettext("See previous change")},h["default"].createElement("span",{className:"material-icon"},"last_page"))}function c(e){return e.canRevert?h["default"].createElement(b["default"],{className:"btn-default btn-sm pull-right",disabled:e.disabled,onClick:e.onClick,title:gettext("Revert post to state from before this edit.")},gettext("Revert")):null}function d(e){var t=null;t=e.edit.url.editor?interpolate(E,{url:(0,y["default"])(e.edit.url.editor),user:(0,y["default"])(e.edit.editor_name)},!0):interpolate(_,{user:(0,y["default"])(e.edit.editor_name)},!0);var a=interpolate(g,{absolute:(0,y["default"])(e.edit.edited_on.format("LLL")),relative:(0,y["default"])(e.edit.edited_on.fromNow())},!0),r=interpolate((0,y["default"])(gettext("By %(edited_by)s %(edited_on)s.")),{edited_by:t,edited_on:a},!0);return h["default"].createElement("p",{className:"pull-left",dangerouslySetInnerHTML:{__html:r}})}Object.defineProperty(a,"__esModule",{value:!0});var f=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.GoBackBtn=l,a.GoForwardBtn=i,a.GoLastBtn=u,a.RevertBtn=c,a.Label=d;var p=e("react"),h=r(p),m=e("../button"),b=r(m),v=e("../../utils/escape-html"),y=r(v),g='<abbr title="%(absolute)s">%(relative)s</abbr>',_='<span class="item-title">%(user)s</span>',E='<a href="%(url)s" class="item-title">%(user)s</a>',w=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.goLast=function(){r.props.goToEdit()},r.goForward=function(){r.props.goToEdit(r.props.edit.next)},r.goBack=function(){r.props.goToEdit(r.props.edit.previous)},r.revertEdit=function(){r.props.revertEdit(r.props.edit.id)},s=a,o(r,s)}return s(t,e),f(t,[{key:"render",value:function(){return h["default"].createElement("div",{className:"modal-toolbar"},h["default"].createElement(l,{disabled:this.props.disabled,edit:this.props.edit,onClick:this.goBack}),h["default"].createElement(i,{disabled:this.props.disabled,edit:this.props.edit,onClick:this.goForward}),h["default"].createElement(u,{disabled:this.props.disabled,edit:this.props.edit,onClick:this.goLast}),h["default"].createElement(d,{edit:this.props.edit}),h["default"].createElement(c,{canRevert:this.props.canRevert,disabled:this.props.disabled,onClick:this.revertEdit}))}}]),t}(h["default"].Component);a["default"]=w},{"../../utils/escape-html":310,"../button":5,react:"react"}],86:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return Object.assign({},e,{edited_on:(0,s["default"])(e.edited_on)})}Object.defineProperty(a,"__esModule",{value:!0}),a.hydrateEdit=n;var o=e("moment"),s=r(o)},{moment:"moment"}],87:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return Object.assign({},e,{liked_on:(0,v["default"])(e.liked_on)})}function i(e){return m["default"].createElement("div",{className:"modal-dialog modal-sm "+(e.className||""),role:"document"},m["default"].createElement("div",{className:"modal-content"
},m["default"].createElement("div",{className:"modal-header"},m["default"].createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},m["default"].createElement("span",{"aria-hidden":"true"},"×")),m["default"].createElement("h4",{className:"modal-title"},gettext("Post Likes"))),e.children))}function u(e){return m["default"].createElement("table",{className:"table"},m["default"].createElement("tbody",null,e.likes.map(function(e){return m["default"].createElement(c,f({key:e.id},e))})))}function c(e){return e.url?m["default"].createElement("tr",null,m["default"].createElement("td",{className:"col-md-6"},m["default"].createElement("a",{className:"item-title",href:e.url},e.username)),m["default"].createElement(d,{likedOn:e.liked_on})):m["default"].createElement("tr",null,m["default"].createElement("td",{className:"col-md-6"},m["default"].createElement("strong",null,e.username)),m["default"].createElement(d,{likedOn:e.liked_on}))}function d(e){return m["default"].createElement("td",{className:"col-md-6"},m["default"].createElement("abbr",{className:"text-muted",title:e.likedOn.format("LLL")},e.likedOn.fromNow()))}Object.defineProperty(a,"__esModule",{value:!0});var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},p=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.hydrateLike=l,a.ModalDialog=i,a.LikesList=u,a.LikeDetails=c,a.LikeDate=d;var h=e("react"),m=r(h),b=e("moment"),v=r(b),y=e("./modal-message"),g=r(y),_=e("./modal-loader"),E=r(_),w=e("../services/ajax"),O=r(w),k=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isReady:!1,error:null,likes:[]},a}return s(t,e),p(t,[{key:"componentDidMount",value:function(){var e=this;O["default"].get(this.props.post.api.likes).then(function(t){e.setState({isReady:!0,likes:t.map(l)})},function(t){e.setState({isReady:!0,error:t.detail})})}},{key:"render",value:function(){return this.state.error?m["default"].createElement(i,{className:"modal-message"},m["default"].createElement(g["default"],{message:this.state.error})):this.state.isReady?this.state.likes.length?m["default"].createElement(i,null,m["default"].createElement(u,{likes:this.state.likes})):m["default"].createElement(i,{className:"modal-message"},m["default"].createElement(g["default"],{message:gettext("No users have liked this post.")})):m["default"].createElement(i,null,m["default"].createElement(E["default"],null))}}]),t}(m["default"].Component);a["default"]=k},{"../services/ajax":293,"./modal-loader":46,"./modal-message":47,moment:"moment",react:"react"}],88:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../editor"),f=n(d),p=e("../form"),h=n(p),m=e("./utils/container"),b=n(m),v=e("./utils/loader"),y=n(v),g=e("./utils/message"),_=n(g),E=e("./utils/attachments"),w=r(E),O=e("./utils/validators"),k=e("../../services/ajax"),N=n(k),j=e("../../services/posting"),x=n(j),P=e("../../services/snackbar"),C=n(P),S=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.loadSuccess=function(e){a.setState({isReady:!0,post:e.post,attachments:w.hydrate(e.attachments),protect:e.is_protected,canProtect:e.can_protect})},a.loadError=function(e){a.setState({isErrored:e.detail})},a.onCancel=function(){var e=confirm(gettext("Are you sure you want to discard changes?"));e&&x["default"].close()},a.onProtect=function(){a.setState({protect:!0})},a.onUnprotect=function(){a.setState({protect:!1})},a.onPostChange=function(e){a.changeValue("post",e.target.value)},a.onAttachmentsChange=function(e){a.setState({attachments:e})},a.state={isReady:!1,isLoading:!1,isErrored:!1,post:"",attachments:[],protect:!1,canProtect:!1,validators:{post:(0,O.getPostValidators)()},errors:{}},a}return l(t,e),i(t,[{key:"componentDidMount",value:function(){N["default"].get(this.props.config).then(this.loadSuccess,this.loadError)}},{key:"clean",value:function(){if(!this.state.post.trim().length)return C["default"].error(gettext("You have to enter a message.")),!1;var e=this.validate();return!e.post||(C["default"].error(e.post[0]),!1)}},{key:"send",value:function(){return N["default"].put(this.props.submit,{post:this.state.post,attachments:w.clean(this.state.attachments),protect:this.state.protect})}},{key:"handleSuccess",value:function(e){C["default"].success(gettext("Reply has been edited.")),window.location=e.url.index,this.setState({isLoading:!0})}},{key:"handleError",value:function(e){400===e.status?e.category?C["default"].error(e.category[0]):e.title?C["default"].error(e.title[0]):e.post&&C["default"].error(e.post[0]):C["default"].apiError(e)}},{key:"render",value:function(){return this.state.isReady?c["default"].createElement(b["default"],{className:"posting-form"},c["default"].createElement("form",{onSubmit:this.handleSubmit,method:"POST"},c["default"].createElement("div",{className:"row"},c["default"].createElement("div",{className:"col-md-12"},c["default"].createElement(f["default"],{attachments:this.state.attachments,canProtect:this.state.canProtect,loading:this.state.isLoading,onAttachmentsChange:this.onAttachmentsChange,onCancel:this.onCancel,onChange:this.onPostChange,onProtect:this.onProtect,onUnprotect:this.onUnprotect,protect:this.state.protect,submitLabel:gettext("Edit reply"),value:this.state.post}))))):this.state.isErrored?c["default"].createElement(_["default"],{message:this.state.isErrored}):c["default"].createElement(y["default"],null)}}]),t}(h["default"]);a["default"]=S},{"../../services/ajax":293,"../../services/posting":302,"../../services/snackbar":303,"../editor":37,"../form":41,"./utils/attachments":93,"./utils/container":94,"./utils/loader":95,"./utils/message":96,"./utils/validators":99,react:"react"}],89:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return"START"===e.mode?o["default"].createElement(l["default"],e):"START_PRIVATE"===e.mode?o["default"].createElement(u["default"],e):"REPLY"===e.mode?o["default"].createElement(d["default"],e):"EDIT"===e.mode?o["default"].createElement(p["default"],e):null};var n=e("react"),o=r(n),s=e("./start"),l=r(s),i=e("./start-private"),u=r(i),c=e("./reply"),d=r(c),f=e("./edit"),p=r(f)},{"./edit":88,"./reply":90,"./start":92,"./start-private":91,react:"react"}],90:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../editor"),f=n(d),p=e("../form"),h=n(p),m=e("./utils/container"),b=n(m),v=e("./utils/loader"),y=n(v),g=e("./utils/message"),_=n(g),E=e("./utils/attachments"),w=r(E),O=e("./utils/validators"),k=e("../../services/ajax"),N=n(k),j=e("../../services/posting"),x=n(j),P=e("../../services/snackbar"),C=n(P),S=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.loadSuccess=function(e){a.setState({isReady:!0,post:e.post?'[quote="'+e.poster+'"]\n'+e.post+"\n[/quote]":""})},a.loadError=function(e){a.setState({isErrored:e.detail})},a.onCancel=function(){var e=confirm(gettext("Are you sure you want to discard your reply?"));e&&x["default"].close()},a.onPostChange=function(e){a.changeValue("post",e.target.value)},a.onAttachmentsChange=function(e){a.setState({attachments:e})},a.state={isReady:!1,isLoading:!1,isErrored:!1,post:"",attachments:[],validators:{post:(0,O.getPostValidators)()},errors:{}},a}return l(t,e),i(t,[{key:"componentDidMount",value:function(){N["default"].get(this.props.config,this.props.context||null).then(this.loadSuccess,this.loadError)}},{key:"clean",value:function(){if(!this.state.post.trim().length)return C["default"].error(gettext("You have to enter a message.")),!1;var e=this.validate();return!e.post||(C["default"].error(e.post[0]),!1)}},{key:"send",value:function(){return N["default"].post(this.props.submit,{post:this.state.post,attachments:w.clean(this.state.attachments)})}},{key:"handleSuccess",value:function(e){C["default"].success(gettext("Your reply has been posted.")),window.location=e.url.index,this.setState({isLoading:!0})}},{key:"handleError",value:function(e){400===e.status?e.category?C["default"].error(e.category[0]):e.title?C["default"].error(e.title[0]):e.post&&C["default"].error(e.post[0]):C["default"].apiError(e)}},{key:"render",value:function(){return this.state.isReady?c["default"].createElement(b["default"],{className:"posting-form"},c["default"].createElement("form",{onSubmit:this.handleSubmit,method:"POST"},c["default"].createElement("div",{className:"row"},c["default"].createElement("div",{className:"col-md-12"},c["default"].createElement(f["default"],{attachments:this.state.attachments,loading:this.state.isLoading,onAttachmentsChange:this.onAttachmentsChange,onCancel:this.onCancel,onChange:this.onPostChange,submitLabel:gettext("Post reply"),value:this.state.post}))))):this.state.isErrored?c["default"].createElement(_["default"],{message:this.state.isErrored}):c["default"].createElement(y["default"],null)}}]),t}(h["default"]);a["default"]=S},{"../../services/ajax":293,"../../services/posting":302,"../../services/snackbar":303,"../editor":37,"../form":41,"./utils/attachments":93,"./utils/container":94,"./utils/loader":95,"./utils/message":96,"./utils/validators":99,react:"react"}],91:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../editor"),f=n(d),p=e("../form"),h=n(p),m=e("./utils/container"),b=n(m),v=e("./utils/message"),y=(n(v),e("./utils/attachments")),g=r(y),_=e("./utils/usernames"),E=n(_),w=e("./utils/validators"),O=e("../../services/ajax"),k=n(O),N=e("../../services/posting"),j=n(N),x=e("../../services/snackbar"),P=n(x),C=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onCancel=function(){var e=confirm(gettext("Are you sure you want to discard private thread?"));e&&j["default"].close()},a.onToChange=function(e){a.changeValue("to",e.target.value)},a.onTitleChange=function(e){a.changeValue("title",e.target.value)},a.onPostChange=function(e){a.changeValue("post",e.target.value)},a.onAttachmentsChange=function(e){a.setState({attachments:e})};var r=(e.to||[]).map(function(e){return e.username}).join(", ");return a.state={isLoading:!1,to:r,title:"",post:"",attachments:[],validators:{title:(0,w.getTitleValidators)(),post:(0,w.getPostValidators)()},errors:{}},a}return l(t,e),i(t,[{key:"clean",value:function(){if(!(0,E["default"])(this.state.to).length)return P["default"].error(gettext("You have to enter at least one recipient.")),!1;if(!this.state.title.trim().length)return P["default"].error(gettext("You have to enter thread title.")),!1;if(!this.state.post.trim().length)return P["default"].error(gettext("You have to enter a message.")),!1;var e=this.validate();return e.title?(P["default"].error(e.title[0]),!1):!e.post||(P["default"].error(e.post[0]),!1)}},{key:"send",value:function(){return k["default"].post(this.props.submit,{to:(0,E["default"])(this.state.to),title:this.state.title,post:this.state.post,attachments:g.clean(this.state.attachments)})}},{key:"handleSuccess",value:function(e){P["default"].success(gettext("Your thread has been posted.")),window.location=e.url,this.setState({isLoading:!0})}},{key:"handleError",value:function(e){400===e.status?e.to?P["default"].error(e.to[0]):e.title?P["default"].error(e.title[0]):e.post&&P["default"].error(e.post[0]):P["default"].apiError(e)}},{key:"render",value:function(){return c["default"].createElement(b["default"],{className:"posting-form",withFirstRow:!0},c["default"].createElement("form",{onSubmit:this.handleSubmit},c["default"].createElement("div",{className:"row first-row"},c["default"].createElement("div",{className:"col-xs-12"},c["default"].createElement("input",{className:"form-control",disabled:this.state.isLoading,onChange:this.onToChange,placeholder:gettext("Comma separated list of user names, eg.: Danny, Lisa"),type:"text",value:this.state.to}))),c["default"].createElement("div",{className:"row first-row"},c["default"].createElement("div",{className:"col-xs-12"},c["default"].createElement("input",{className:"form-control",disabled:this.state.isLoading,onChange:this.onTitleChange,placeholder:gettext("Thread title"),type:"text",value:this.state.title}))),c["default"].createElement("div",{className:"row"},c["default"].createElement("div",{className:"col-xs-12"},c["default"].createElement(f["default"],{attachments:this.state.attachments,loading:this.state.isLoading,onAttachmentsChange:this.onAttachmentsChange,onCancel:this.onCancel,onChange:this.onPostChange,submitLabel:gettext("Post thread"),value:this.state.post})))))}}]),t}(h["default"]);a["default"]=C},{"../../services/ajax":293,"../../services/posting":302,"../../services/snackbar":303,"../editor":37,"../form":41,"./utils/attachments":93,"./utils/container":94,"./utils/message":96,"./utils/usernames":98,"./utils/validators":99,react:"react"}],92:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../category-select"),f=n(d),p=e("../editor"),h=n(p),m=e("../form"),b=n(m),v=e("./utils/container"),y=n(v),g=e("./utils/loader"),_=n(g),E=e("./utils/message"),w=n(E),O=e("./utils/options"),k=n(O),N=e("./utils/attachments"),j=r(N),x=e("./utils/validators"),P=e("../../services/ajax"),C=n(P),S=e("../../services/posting"),T=n(S),M=e("../../services/snackbar"),L=n(M),R=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.loadSuccess=function(e){var t=null,r=!1,n=null,o=e.map(function(e){return e.post===!1||t&&e.id!=a.state.category||(t=e.id,n=e.post),e.post&&(e.post.close||e.post.hide||e.post.pin)&&(r=!0),Object.assign(e,{disabled:e.post===!1,label:e.name,value:e.id})});a.setState({isReady:!0,showOptions:r,categories:o,category:t,categoryOptions:n})},a.loadError=function(e){a.setState({isErrored:e.detail})},a.onCancel=function(){var e=confirm(gettext("Are you sure you want to discard thread?"));e&&T["default"].close()},a.onTitleChange=function(e){a.changeValue("title",e.target.value)},a.onCategoryChange=function(e){var t=a.state.categories.find(function(t){return e.target.value==t.value}),r=a.state.pin;t.post.pin&&t.post.pin<r&&(r=t.post.pin),a.setState({category:t.id,categoryOptions:t.post,pin:r})},a.onPostChange=function(e){a.changeValue("post",e.target.value)},a.onAttachmentsChange=function(e){a.setState({attachments:e})},a.onClose=function(){a.changeValue("close",!0)},a.onOpen=function(){a.changeValue("close",!1)},a.onPinGlobally=function(){a.changeValue("pin",2)},a.onPinLocally=function(){a.changeValue("pin",1)},a.onUnpin=function(){a.changeValue("pin",0)},a.onHide=function(){a.changeValue("hide",1)},a.onUnhide=function(){a.changeValue("hide",0)},a.state={isReady:!1,isLoading:!1,isErrored:!1,showOptions:!1,categoryOptions:null,title:"",category:e.category||null,categories:[],post:"",attachments:[],close:!1,hide:!1,pin:0,validators:{title:(0,x.getTitleValidators)(),post:(0,x.getPostValidators)()},errors:{}},a}return l(t,e),i(t,[{key:"componentDidMount",value:function(){C["default"].get(this.props.config).then(this.loadSuccess,this.loadError)}},{key:"clean",value:function(){if(!this.state.title.trim().length)return L["default"].error(gettext("You have to enter thread title.")),!1;if(!this.state.post.trim().length)return L["default"].error(gettext("You have to enter a message.")),!1;var e=this.validate();return e.title?(L["default"].error(e.title[0]),!1):!e.post||(L["default"].error(e.post[0]),!1)}},{key:"send",value:function(){return C["default"].post(this.props.submit,{title:this.state.title,category:this.state.category,post:this.state.post,attachments:j.clean(this.state.attachments),close:this.state.close,hide:this.state.hide,pin:this.state.pin})}},{key:"handleSuccess",value:function(e){L["default"].success(gettext("Your thread has been posted.")),window.location=e.url,this.setState({isLoading:!0})}},{key:"handleError",value:function(e){400===e.status?e.category?L["default"].error(e.category[0]):e.title?L["default"].error(e.title[0]):e.post&&L["default"].error(e.post[0]):L["default"].apiError(e)}},{key:"render",value:function(){return this.state.isReady?c["default"].createElement(y["default"],{className:"posting-form",withFirstRow:!0},c["default"].createElement("form",{onSubmit:this.handleSubmit},c["default"].createElement("div",{className:"row first-row"},c["default"].createElement("div",{className:this.state.showOptions?"col-md-6":"col-md-8"},c["default"].createElement("input",{className:"form-control",disabled:this.state.isLoading,onChange:this.onTitleChange,placeholder:gettext("Thread title"),type:"text",value:this.state.title})),c["default"].createElement("div",{className:"col-md-4"},c["default"].createElement(f["default"],{choices:this.state.categories,disabled:this.state.isLoading,onChange:this.onCategoryChange,value:this.state.category})),c["default"].createElement(k["default"],{close:this.state.close,disabled:this.state.isLoading,hide:this.state.hide,onClose:this.onClose,onHide:this.onHide,onOpen:this.onOpen,onPinGlobally:this.onPinGlobally,onPinLocally:this.onPinLocally,onUnhide:this.onUnhide,onUnpin:this.onUnpin,options:this.state.categoryOptions,pin:this.state.pin,showOptions:this.state.showOptions})),c["default"].createElement("div",{className:"row"},c["default"].createElement("div",{className:"col-md-12"},c["default"].createElement(h["default"],{attachments:this.state.attachments,loading:this.state.isLoading,onAttachmentsChange:this.onAttachmentsChange,onCancel:this.onCancel,onChange:this.onPostChange,submitLabel:gettext("Post thread"),value:this.state.post}))))):this.state.isErrored?c["default"].createElement(w["default"],{message:this.state.isErrored}):c["default"].createElement(_["default"],null)}}]),t}(b["default"]);a["default"]=R},{"../../services/ajax":293,"../../services/posting":302,"../../services/snackbar":303,"../category-select":13,"../editor":37,"../form":41,"./utils/attachments":93,"./utils/container":94,"./utils/loader":95,"./utils/message":96,"./utils/options":97,"./utils/validators":99,react:"react"}],93:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=e.filter(function(e){return e.id&&!e.isRemoved});return t.map(function(e){return e.id})}function o(e){return e.map(function(e){return Object.assign({},e,{uploaded_on:(0,l["default"])(e.uploaded_on)})})}Object.defineProperty(a,"__esModule",{value:!0}),a.clean=n,a.hydrate=o;var s=e("moment"),l=r(s)},{moment:"moment"}],94:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return o["default"].createElement("div",{className:e.className},o["default"].createElement("div",{className:"container"},e.children))};var n=e("react"),o=r(n)},{react:"react"}],95:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return o["default"].createElement(l["default"],{className:"posting-loader"},o["default"].createElement(u["default"],null))};var n=e("react"),o=r(n),s=e("./container"),l=r(s),i=e("../../loader"),u=r(i)},{"../../loader":43,"./container":94,react:"react"}],96:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return o["default"].createElement(l["default"],{className:"posting-message"},o["default"].createElement("div",{className:"message-body"},o["default"].createElement("p",null,o["default"].createElement("span",{className:"material-icon"},"error_outline"),e.message),o["default"].createElement("button",{type:"button",className:"btn btn-default",onClick:u["default"].close},gettext("Dismiss"))))};var n=e("react"),o=r(n),s=e("./container"),l=r(s),i=e("../../../services/posting"),u=r(i)},{"../../../services/posting":302,"./container":94,react:"react"}],97:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return e.show?i["default"].createElement("button",{className:"btn btn-default",disabled:e.disabled,onClick:e.close?e.onOpen:e.onClose,title:e.close?gettext("Closed"):gettext("Open"),type:"button"},i["default"].createElement("span",{className:"material-icon"},e.close?"lock":"lock_outline")):null}function o(e){return e.show?i["default"].createElement("button",{className:"btn btn-default",disabled:e.disabled,onClick:e.hide?e.onUnhide:e.onHide,title:e.hide?gettext("Hidden"):gettext("Not hidden"),type:"button"},i["default"].createElement("span",{className:"material-icon"},e.hide?"visibility_off":"visibility")):null}function s(e){if(e.show){var t=null,a=null,r=null;switch(e.pin){case 0:t="radio_button_unchecked",a=e.onPinLocally,r=gettext("Unpinned");break;case 1:t="info_outline",a=e.onPinGlobally,r=gettext("Pinned locally"),a=2==e.show?e.onPinGlobally:e.onUnpin;break;case 2:t="info",a=e.onUnpin,r=gettext("Pinned globally")}return i["default"].createElement("button",{className:"btn btn-default",disabled:e.disabled,onClick:a,title:r,type:"button"},i["default"].createElement("span",{className:"material-icon"},t))}return null}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return e.showOptions?i["default"].createElement("div",{className:"col-md-2 posting-options"},i["default"].createElement(s,{disabled:e.disabled,onPinGlobally:e.onPinGlobally,onPinLocally:e.onPinLocally,onUnpin:e.onUnpin,pin:e.pin,show:e.options.pin}),i["default"].createElement(o,{disabled:e.disabled,hide:e.hide,onHide:e.onHide,onUnhide:e.onUnhide,show:e.options.hide}),i["default"].createElement(n,{close:e.close,disabled:e.disabled,onClose:e.onClose,onOpen:e.onOpen,show:e.options.close})):null},a.CloseOptions=n,a.HideOptions=o,a.PinOptions=s;var l=e("react"),i=r(l)},{react:"react"}],98:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){var t=e.split(",").map(function(e){return e.trim().toLowerCase()}),a=t.filter(function(e){return e.length>0}),r=a.filter(function(e,t){return a.indexOf(e)==t});return r}},{}],99:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){return[s(),l()]}function o(){return f["default"].get("SETTINGS").post_length_max?[i(),u()]:[i()]}function s(){return(0,c.minLength)(f["default"].get("SETTINGS").thread_title_length_min,function(e,t){var a=ngettext("Thread title should be at least %(limit_value)s character long (it has %(show_value)s).","Thread title should be at least %(limit_value)s characters long (it has %(show_value)s).",e);return interpolate(a,{limit_value:e,show_value:t},!0)})}function l(){return(0,c.maxLength)(f["default"].get("SETTINGS").thread_title_length_max,function(e,t){var a=ngettext("Thread title cannot be longer than %(limit_value)s character (it has %(show_value)s).","Thread title cannot be longer than %(limit_value)s characters (it has %(show_value)s).",e);return interpolate(a,{limit_value:e,show_value:t},!0)})}function i(){return(0,c.minLength)(f["default"].get("SETTINGS").post_length_min,function(e,t){var a=ngettext("Posted message should be at least %(limit_value)s character long (it has %(show_value)s).","Posted message should be at least %(limit_value)s characters long (it has %(show_value)s).",e);return interpolate(a,{limit_value:e,show_value:t},!0)})}function u(){return(0,c.maxLength)(f["default"].get("SETTINGS").post_length_max||1e6,function(e,t){var a=ngettext("Posted message cannot be longer than %(limit_value)s character (it has %(show_value)s).","Posted message cannot be longer than %(limit_value)s characters (it has %(show_value)s).",e);return interpolate(a,{limit_value:e,show_value:t},!0)})}Object.defineProperty(a,"__esModule",{value:!0}),a.getTitleValidators=n,a.getPostValidators=o,a.getTitleLengthMin=s,a.getTitleLengthMax=l,a.validatePostLengthMin=i,a.validatePostLengthMax=u;var c=e("../../../utils/validators"),d=e("../../.."),f=r(d)},{"../../..":234,"../../../utils/validators":320}],100:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e.can_hide}Object.defineProperty(a,"__esModule",{value:!0}),a.Delete=a.Unhide=a.Hide=void 0;var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a["default"]=function(e){return i(e.post.acl)?d["default"].createElement("li",{className:"event-controls"},d["default"].createElement(w,e),d["default"].createElement(O,e),d["default"].createElement(k,e)):null},a.isVisible=i;var c=e("react"),d=n(c),f=e("moment"),p=n(f),h=e("../../../reducers/post"),m=r(h),b=e("../../../services/ajax"),v=n(b),y=e("../../../services/snackbar"),g=n(y),_=e("../../../services/store"),E=n(_),w=a.Hide=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){E["default"].dispatch(m.patch(r.props.post,{is_hidden:!0,hidden_on:(0,p["default"])(),hidden_by_name:r.props.user.username,url:Object.assign(r.props.post.url,{hidden_by:r.props.user.absolute_url})}));var e={op:"replace",path:"is-hidden",value:!0};v["default"].patch(r.props.post.api.index,[e]).then(function(e){E["default"].dispatch(m.patch(r.props.post,e))},function(e){400===e.status?g["default"].error(e.detail[0]):g["default"].apiError(e),E["default"].dispatch(m.patch(r.props.post,{is_hidden:!1}))})},n=a,s(r,n)}return l(t,e),u(t,[{key:"render",value:function(){return this.props.post.is_hidden?null:d["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Hide"))}}]),t}(d["default"].Component),O=a.Unhide=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){E["default"].dispatch(m.patch(r.props.post,{is_hidden:!1}));var e={op:"replace",path:"is-hidden",value:!1};v["default"].patch(r.props.post.api.index,[e]).then(function(e){E["default"].dispatch(m.patch(r.props.post,e))},function(e){400===e.status?g["default"].error(e.detail[0]):g["default"].apiError(e),E["default"].dispatch(m.patch(r.props.post,{is_hidden:!0}))})},n=a,s(r,n)}return l(t,e),u(t,[{key:"render",value:function(){return this.props.post.is_hidden?d["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Unhide")):null;
}}]),t}(d["default"].Component),k=a.Delete=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){var e=confirm(gettext("Are you sure you wish to delete this event? This action is not reversible!"));e&&r["delete"]()},r["delete"]=function(){E["default"].dispatch(m.patch(r.props.post,{isDeleted:!0})),v["default"]["delete"](r.props.post.api.index).then(function(){g["default"].success(gettext("Event has been deleted."))},function(e){400===e.status?g["default"].error(e.detail[0]):g["default"].apiError(e),E["default"].dispatch(m.patch(r.props.post,{isDeleted:!1}))})},n=a,s(r,n)}return l(t,e),u(t,[{key:"render",value:function(){return d["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Delete"))}}]),t}(d["default"].Component)},{"../../../reducers/post":282,"../../../services/ajax":293,"../../../services/snackbar":303,"../../../services/store":304,moment:"moment",react:"react"}],101:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return o["default"].createElement("div",{className:"post-avatar"},o["default"].createElement("span",{className:"material-icon"},s[e.post.event_type]))};var n=e("react"),o=r(n),s={changed_title:"edit",pinned_globally:"bookmark",pinned_locally:"bookmark_border",unpoinned:"panorama_fish_eye",moved:"arrow_forward",merged:"call_merge",approved:"done",opened:"lock_open",closed:"lock_outline",unhid:"visibility",hid:"visibility_off",changed_owner:"grade",tookover:"grade",added_participant:"person_add",owner_left:"person_outline",participant_left:"person_outline",removed_participant:"remove_circle_outline"}},{react:"react"}],102:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){var t="event";return e.post.isDeleted?t="hide":e.post.is_hidden&&!e.post.acl.can_see_hidden&&(t="event post-hidden"),o["default"].createElement("li",{id:"post-"+e.post.id,className:t},o["default"].createElement("div",{className:"post-border"},o["default"].createElement(l["default"],e),o["default"].createElement(p["default"],{className:"post-body",post:e.post},o["default"].createElement(d["default"],e),o["default"].createElement(u["default"],e))))};var n=e("react"),o=r(n),s=e("./icon"),l=r(s),i=e("./info"),u=r(i),c=e("./message"),d=r(c),f=e("../waypoint"),p=r(f)},{"../waypoint":120,"./icon":101,"./info":103,"./message":104,react:"react"}],103:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(e.post.is_hidden){var t=null;t=e.post.url.hidden_by?interpolate(b,{url:(0,c["default"])(e.post.url.hidden_by),user:(0,c["default"])(e.post.hidden_by_name)},!0):interpolate(m,{user:(0,c["default"])(e.post.hidden_by_name)},!0);var a=interpolate(p,{absolute:(0,c["default"])(e.post.hidden_on.format("LLL")),relative:(0,c["default"])(e.post.hidden_on.fromNow())},!0),r=interpolate((0,c["default"])(gettext("Hidden by %(event_by)s %(event_on)s.")),{event_by:t,event_on:a},!0);return i["default"].createElement("li",{className:"event-hidden-message",dangerouslySetInnerHTML:{__html:r}})}return null}function o(e){var t=null;t=e.post.poster?interpolate(b,{url:(0,c["default"])(e.post.poster.absolute_url),user:(0,c["default"])(e.post.poster_name)},!0):interpolate(m,{user:(0,c["default"])(e.post.poster_name)},!0);var a=interpolate(h,{url:(0,c["default"])(e.post.url.index),absolute:(0,c["default"])(e.post.posted_on.format("LLL")),relative:(0,c["default"])(e.post.posted_on.fromNow())},!0),r=interpolate((0,c["default"])(gettext("By %(event_by)s %(event_on)s.")),{event_by:t,event_on:a},!0);return i["default"].createElement("li",{className:"event-posters",dangerouslySetInnerHTML:{__html:r}})}function s(e){return e.user.acl.can_see_users_ips?i["default"].createElement("li",{className:"event-ip"},i["default"].createElement("abbr",{title:e.post.poster_ip},gettext("IP recorded"))):null}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return i["default"].createElement("ul",{className:"list-inline event-info"},i["default"].createElement(n,e),i["default"].createElement(o,e),i["default"].createElement(s,e),i["default"].createElement(f["default"],e))},a.Hidden=n,a.Poster=o,a.Ip=s;var l=e("react"),i=r(l),u=e("../../../utils/escape-html"),c=r(u),d=e("./controls"),f=r(d),p='<abbr title="%(absolute)s">%(relative)s</abbr>',h='<a href="%(url)s" title="%(absolute)s">%(relative)s</a>',m='<span class="item-title">%(user)s</span>',b='<a href="%(url)s" class="item-title">%(user)s</a>'},{"../../../utils/escape-html":310,"./controls":100,react:"react"}],104:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=(0,p["default"])(gettext("Thread title has been changed from %(old_title)s.")),a=interpolate(b,{old_title:(0,p["default"])(e.post.event_context.old_title)},!0),r=interpolate(t,{old_title:a},!0);return d["default"].createElement("p",{className:"event-message",dangerouslySetInnerHTML:{__html:r}})}function o(e){var t=(0,p["default"])(gettext("Thread has been moved from %(from_category)s.")),a=interpolate(m,{url:(0,p["default"])(e.post.event_context.from_category.url),name:(0,p["default"])(e.post.event_context.from_category.name)},!0),r=interpolate(t,{from_category:a},!0);return d["default"].createElement("p",{className:"event-message",dangerouslySetInnerHTML:{__html:r}})}function s(e){var t=(0,p["default"])(gettext("The %(merged_thread)s thread has been merged into this thread.")),a=interpolate(b,{name:(0,p["default"])(e.post.event_context.merged_thread)},!0),r=interpolate(t,{merged_thread:a},!0);return d["default"].createElement("p",{className:"event-message",dangerouslySetInnerHTML:{__html:r}})}function l(e){var t=(0,p["default"])(gettext("Changed thread owner to %(user)s.")),a=interpolate(m,{url:(0,p["default"])(e.post.event_context.user.url),name:(0,p["default"])(e.post.event_context.user.username)},!0),r=interpolate(t,{user:a},!0);return d["default"].createElement("p",{className:"event-message",dangerouslySetInnerHTML:{__html:r}})}function i(e){var t=(0,p["default"])(gettext("Added %(user)s to thread.")),a=interpolate(m,{url:(0,p["default"])(e.post.event_context.user.url),name:(0,p["default"])(e.post.event_context.user.username)},!0),r=interpolate(t,{user:a},!0);return d["default"].createElement("p",{className:"event-message",dangerouslySetInnerHTML:{__html:r}})}function u(e){var t=(0,p["default"])(gettext("Removed %(user)s from thread.")),a=interpolate(m,{url:(0,p["default"])(e.post.event_context.user.url),name:(0,p["default"])(e.post.event_context.user.username)},!0),r=interpolate(t,{user:a},!0);return d["default"].createElement("p",{className:"event-message",dangerouslySetInnerHTML:{__html:r}})}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return h[e.post.event_type]?d["default"].createElement("p",{className:"event-message"},h[e.post.event_type]):"changed_title"===e.post.event_type?d["default"].createElement(n,e):"moved"===e.post.event_type?d["default"].createElement(o,e):"merged"===e.post.event_type?d["default"].createElement(s,e):"changed_owner"===e.post.event_type?d["default"].createElement(l,e):"added_participant"===e.post.event_type?d["default"].createElement(i,e):"removed_participant"===e.post.event_type?d["default"].createElement(u,e):null},a.ChangedTitle=n,a.Moved=o,a.Merged=s,a.ChangedOwner=l,a.AddedParticipant=i,a.RemovedParticipant=u;var c=e("react"),d=r(c),f=e("../../../utils/escape-html"),p=r(f),h={pinned_globally:gettext("Thread has been pinned globally."),pinned_locally:gettext("Thread has been pinned locally."),unpinned:gettext("Thread has been unpinned."),approved:gettext("Thread has been approved."),opened:gettext("Thread has been opened."),closed:gettext("Thread has been closed."),unhid:gettext("Thread has been revealed."),hid:gettext("Thread has been made hidden."),tookover:gettext("Took thread over."),owner_left:gettext("Owner has left thread. This thread is now closed."),participant_left:gettext("Participant has left thread.")},m='<a href="%(url)s" class="item-title">%(name)s</a>',b='<span class="item-title">%(name)s</span>'},{"../../../utils/escape-html":310,react:"react"}],105:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return e.post.is_event?l["default"].createElement(u["default"],e):l["default"].createElement(d["default"],e)}Object.defineProperty(a,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a["default"]=function(e){return e.posts.isLoaded?l["default"].createElement("ul",{className:"posts-list ui-ready"},e.posts.results.map(function(t){return l["default"].createElement(n,o({key:t.id,post:t},e))})):l["default"].createElement("ul",{className:"posts-list ui-preview"},l["default"].createElement(p["default"],null))},a.ListItem=n;var s=e("react"),l=r(s),i=e("./event"),u=r(i),c=e("./post"),d=r(c),f=e("./post/preview"),p=r(f)},{"./event":102,"./post":117,"./post/preview":118,react:"react"}],106:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return e.attachment.is_image?u["default"].createElement("div",{className:"post-attachment-preview"},u["default"].createElement(s,e)):u["default"].createElement("div",{className:"post-attachment-preview"},u["default"].createElement(o,e))}function o(e){return u["default"].createElement("a",{href:e.attachment.url.index,className:"material-icon"},"insert_drive_file")}function s(e){var t=e.attachment.url.thumb||e.attachment.url.index;return u["default"].createElement("a",{className:"post-thumbnail",href:e.attachment.url.index,style:{backgroundImage:'url("'+(0,f["default"])(t)+'")'}})}function l(e){var t=null;t=e.attachment.url.uploader?interpolate(v,{url:(0,f["default"])(e.attachment.url.uploader),user:(0,f["default"])(e.attachment.uploader_name)},!0):interpolate(b,{user:(0,f["default"])(e.attachment.uploader_name)},!0);var a=interpolate(m,{absolute:(0,f["default"])(e.attachment.uploaded_on.format("LLL")),relative:(0,f["default"])(e.attachment.uploaded_on.fromNow())},!0),r=interpolate((0,f["default"])(gettext("%(filetype)s, %(size)s, uploaded by %(uploader)s %(uploaded_on)s.")),{filetype:e.attachment.filetype,size:(0,h["default"])(e.attachment.size),uploader:t,uploaded_on:a},!0);return u["default"].createElement("p",{className:"post-attachment-description",dangerouslySetInnerHTML:{__html:r}})}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return null===e.attachment?u["default"].createElement("td",{className:"col-md-6"}," "):u["default"].createElement("td",{className:"col-md-6"},u["default"].createElement(n,e),u["default"].createElement("div",{className:"post-attachment"},u["default"].createElement("a",{href:e.attachment.url.index,className:"item-title"},e.attachment.filename),u["default"].createElement(l,e)))},a.AttachmentPreview=n,a.AttachmentIcon=o,a.AttachmentThumbnail=s,a.AttachmentDetails=l;var i=e("react"),u=r(i),c=e("../../../.."),d=(r(c),e("../../../../utils/escape-html")),f=r(d),p=e("../../../../utils/file-size"),h=r(p),m='<abbr title="%(absolute)s">%(relative)s</abbr>',b='<span class="item-title">%(user)s</span>',v='<a href="%(url)s" class="item-title">%(user)s</a>'},{"../../../..":234,"../../../../utils/escape-html":310,"../../../../utils/file-size":311,react:"react"}],107:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return(!e.is_hidden||e.acl.can_see_hidden)&&e.attachments}function o(e){return l["default"].createElement("tr",{className:"row"},e.row.map(function(e){return l["default"].createElement(d["default"],{attachment:e,key:e?e.id:0})}))}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return n(e.post)?l["default"].createElement("table",{className:"table post-attachments"},l["default"].createElement("tbody",null,(0,u["default"])(e.post.attachments,2,null).map(function(e){var t=e.map(function(e){return e?e.id:0}).join("_");return l["default"].createElement(o,{key:t,row:e})}))):null},a.isVisible=n,a.Row=o;var s=e("react"),l=r(s),i=e("../../../../utils/batch"),u=r(i),c=e("./attachment"),d=r(c)},{"../../../../utils/batch":307,"./attachment":106,react:"react"}],108:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return i["default"].createElement(c["default"],{className:"panel-body",post:e.post},i["default"].createElement(f["default"],{markup:e.post.content}))}function o(e){var t=null;t=e.post.hidden_by?interpolate(m,{url:(0,h["default"])(e.post.url.hidden_by),user:(0,h["default"])(e.post.hidden_by_name)},!0):interpolate(b,{user:(0,h["default"])(e.post.hidden_by_name)},!0);var a=interpolate(v,{absolute:(0,h["default"])(e.post.hidden_on.format("LLL")),relative:(0,h["default"])(e.post.hidden_on.fromNow())},!0),r=interpolate((0,h["default"])(gettext("Hidden by %(hidden_by)s %(hidden_on)s.")),{hidden_by:t,hidden_on:a},!0);return i["default"].createElement(c["default"],{className:"panel-body panel-body-hidden",post:e.post},i["default"].createElement("p",{className:"lead"},gettext("This post is hidden. You cannot not see its contents.")),i["default"].createElement("p",{className:"text-muted",dangerouslySetInnerHTML:{__html:r}}))}function s(e){return i["default"].createElement(c["default"],{className:"panel-body panel-body-invalid",post:e.post},i["default"].createElement("p",{className:"lead"},gettext("This post's contents cannot be displayed.")),i["default"].createElement("p",{className:"text-muted"},gettext("This error is caused by invalid post content manipulation.")))}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return e.post.is_hidden&&!e.post.acl.can_see_hidden?i["default"].createElement(o,e):e.post.content?i["default"].createElement(n,e):i["default"].createElement(s,e)},a.Default=n,a.Hidden=o,a.Invalid=s;var l=e("react"),i=r(l),u=e("../waypoint"),c=r(u),d=e("../../misago-markup"),f=r(d),p=e("../../../utils/escape-html"),h=r(p),m='<a href="%(url)s" class="item-title">%(user)s</a>',b='<span class="item-title">%(user)s</span>',v='<abbr class="last-title" title="%(absolute)s">%(relative)s</abbr>'},{"../../../utils/escape-html":310,"../../misago-markup":45,"../waypoint":120,react:"react"}],109:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){O["default"].dispatch(v.patch(e.post,{is_unapproved:!1}));var t=[{op:"replace",path:"is-unapproved",value:!1}],a={is_unapproved:e.post.is_unapproved};f(e,t,a)}function s(e){O["default"].dispatch(v.patch(e.post,{is_protected:!0}));var t=[{op:"replace",path:"is-protected",value:!0}],a={is_protected:e.post.is_protected};f(e,t,a)}function l(e){O["default"].dispatch(v.patch(e.post,{is_protected:!1}));var t=[{op:"replace",path:"is-protected",value:!1}],a={is_protected:e.post.is_protected};f(e,t,a)}function i(e){O["default"].dispatch(v.patch(e.post,{is_hidden:!0,hidden_on:(0,m["default"])(),hidden_by_name:e.user.username,url:Object.assign(e.post.url,{hidden_by:e.user.absolute_url})}));var t=[{op:"replace",path:"is-hidden",value:!0}],a={is_hidden:e.post.is_hidden,hidden_on:e.post.hidden_on,hidden_by_name:e.post.hidden_by_name,url:e.post.url};f(e,t,a)}function u(e){O["default"].dispatch(v.patch(e.post,{is_hidden:!1}));var t=[{op:"replace",path:"is-hidden",value:!1}],a={is_hidden:e.post.is_hidden};f(e,t,a)}function c(e){var t=e.post.last_likes||[],a=[e.user].concat(t),r=a.length>3?a.slice(0,-1):a;O["default"].dispatch(v.patch(e.post,{is_liked:!0,likes:e.post.likes+1,last_likes:r}));var n=[{op:"replace",path:"is-liked",value:!0}],o={is_liked:e.post.is_liked,likes:e.post.likes,last_likes:e.post.last_likes};f(e,n,o)}function d(e){O["default"].dispatch(v.patch(e.post,{is_liked:!1,likes:e.post.likes-1,last_likes:e.post.last_likes.filter(function(t){return!t.id||t.id!==e.user.id})}));var t=[{op:"replace",path:"is-liked",value:!1}],a={is_liked:e.post.is_liked,likes:e.post.likes,last_likes:e.post.last_likes};f(e,t,a)}function f(e,t,a){g["default"].patch(e.post.api.index,t).then(function(t){O["default"].dispatch(v.patch(e.post,t))},function(t){400===t.status?E["default"].error(t.detail[0]):E["default"].apiError(t),O["default"].dispatch(v.patch(e.post,a))})}function p(e){var t=confirm(gettext("Are you sure you want to delete this post? This action is not reversible!"));t&&(O["default"].dispatch(v.patch(e.post,{isDeleted:!0})),g["default"]["delete"](e.post.api.index).then(function(){E["default"].success(gettext("Post has been deleted."))},function(t){400===t.status?E["default"].error(t.detail):E["default"].apiError(t),O["default"].dispatch(v.patch(e.post,{isDeleted:!1}))}))}Object.defineProperty(a,"__esModule",{value:!0}),a.approve=o,a.protect=s,a.unprotect=l,a.hide=i,a.unhide=u,a.like=c,a.unlike=d,a.patch=f,a.remove=p;var h=e("moment"),m=n(h),b=e("../../../../reducers/post"),v=r(b),y=e("../../../../services/ajax"),g=n(y),_=e("../../../../services/snackbar"),E=n(_),w=e("../../../../services/store"),O=n(w)},{"../../../../reducers/post":282,"../../../../services/ajax":293,"../../../../services/snackbar":303,"../../../../services/store":304,moment:"moment"}],110:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0}),a.Delete=a.Unhide=a.Hide=a.Unprotect=a.Protect=a.Split=a.Move=a.Approve=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a["default"]=function(e){return c["default"].createElement("ul",{className:"dropdown-menu dropdown-menu-right"},c["default"].createElement(g,e),c["default"].createElement(_,e),c["default"].createElement(E,e),c["default"].createElement(w,e),c["default"].createElement(O,e),c["default"].createElement(k,e),c["default"].createElement(N,e),c["default"].createElement(j,e))};var u=e("react"),c=n(u),d=e("../../../../services/modal"),f=n(d),p=e("./actions"),h=r(p),m=e("./move"),b=n(m),v=e("./split"),y=n(v),g=a.Approve=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){h.approve(r.props)},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){return this.props.post.acl.can_approve&&this.props.post.is_unapproved?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Approve"))):null}}]),t}(c["default"].Component),_=a.Move=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){f["default"].show(c["default"].createElement(b["default"],r.props))},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){return this.props.post.acl.can_move?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Move"))):null}}]),t}(c["default"].Component),E=a.Split=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){f["default"].show(c["default"].createElement(y["default"],r.props))},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){return this.props.post.acl.can_move?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Split"))):null}}]),t}(c["default"].Component),w=a.Protect=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){h.protect(r.props)},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){return this.props.post.acl.can_protect&&!this.props.post.is_protected?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Protect"))):null}}]),t}(c["default"].Component),O=a.Unprotect=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){h.unprotect(r.props)},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){return this.props.post.acl.can_protect&&this.props.post.is_protected?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Remove protection"))):null}}]),t}(c["default"].Component),k=a.Hide=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){h.hide(r.props)},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){return this.props.post.acl.can_hide&&!this.props.post.is_hidden?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Hide"))):null}}]),t}(c["default"].Component),N=a.Unhide=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){h.unhide(r.props)},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){return this.props.post.acl.can_unhide&&this.props.post.is_hidden?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Unhide"))):null}}]),t}(c["default"].Component),j=a.Delete=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){h.remove(r.props)},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){return this.props.post.acl.can_delete?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Delete"))):null}}]),t}(c["default"].Component)},{"../../../../services/modal":299,"./actions":109,"./move":112,"./split":113,react:"react"}],111:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return e.can_approve||e.can_hide||e.can_protect||e.can_unhide||e.can_delete||e.can_move}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return n(e.post.acl)?s["default"].createElement("div",{className:"pull-right dropdown"},s["default"].createElement("button",{"aria-expanded":"true","aria-haspopup":"true",className:"btn btn-default btn-icon dropdown-toggle","data-toggle":"dropdown",type:"button"},s["default"].createElement("span",{className:"material-icon"},"expand_more")),s["default"].createElement(i["default"],e)):null},a.isVisible=n;var o=e("react"),s=r(o),l=e("./dropdown"),i=r(l)},{"./dropdown":110,react:"react"}],112:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return d["default"].createElement("div",{className:"modal-header"},d["default"].createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},d["default"].createElement("span",{"aria-hidden":"true"},"×")),d["default"].createElement("h4",{className:"modal-title"},gettext("Move post")))}Object.defineProperty(a,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.ModalHeader=i;var c=e("react"),d=n(c),f=e("../../../button"),p=(n(f),e("../../../form")),h=n(p),m=e("../../../form-group"),b=n(m),v=e("../../../../reducers/post"),y=r(v),g=e("../../../../services/ajax"),_=n(g),E=e("../../../../services/modal"),w=n(E),O=e("../../../../services/snackbar"),k=n(O),N=e("../../../../services/store"),j=n(N),x=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onUrlChange=function(e){a.changeValue("url",e.target.value)},a.state={isLoading:!1,url:"",validators:{url:[]},errors:{}},a}return l(t,e),u(t,[{key:"clean",value:function(){return!!this.state.url.trim().length||(k["default"].error(gettext("You have to enter link to the other thread.")),!1)}},{key:"send",value:function(){return _["default"].post(this.props.thread.api.posts.move,{thread_url:this.state.url,posts:[this.props.post.id]})}},{key:"handleSuccess",value:function(e){j["default"].dispatch(y.patch(this.props.post,{isDeleted:!0})),w["default"].hide(),k["default"].success(gettext("Selected post was moved to the other thread."))}},{key:"handleError",value:function(e){400===e.status?k["default"].error(e.detail):k["default"].apiError(e)}},{key:"render",value:function(){return d["default"].createElement("div",{className:"modal-dialog",role:"document"},d["default"].createElement("form",{onSubmit:this.handleSubmit},d["default"].createElement("div",{className:"modal-content"},d["default"].createElement(i,null),d["default"].createElement("div",{className:"modal-body"},d["default"].createElement(b["default"],{"for":"id_url",label:gettext("Link to thread you want to move post to")},d["default"].createElement("input",{className:"form-control",disabled:this.state.isLoading,id:"id_url",onChange:this.onUrlChange,value:this.state.url}))),d["default"].createElement("div",{className:"modal-footer"},d["default"].createElement("button",{className:"btn btn-primary",loading:this.state.isLoading},gettext("Move post"))))))}}]),t}(h["default"]);a["default"]=x},{"../../../../reducers/post":282,"../../../../services/ajax":293,"../../../../services/modal":299,"../../../../services/snackbar":303,"../../../../services/store":304,"../../../button":5,"../../../form":41,"../../../form-group":40,react:"react"}],113:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(){return h["default"].createElement(c,{className:"modal-dialog"},h["default"].createElement(k["default"],null))}function u(e){return h["default"].createElement(c,{className:"modal-dialog modal-message"},h["default"].createElement("div",{className:"message-icon"},h["default"].createElement("span",{className:"material-icon"},"info_outline")),h["default"].createElement("div",{className:"message-body"},h["default"].createElement("p",{className:"lead"},gettext("You can't move this post at the moment.")),h["default"].createElement("p",null,e.message)))}function c(e){return h["default"].createElement("div",{className:e.className,role:"document"},h["default"].createElement("div",{className:"modal-content"},h["default"].createElement("div",{className:"modal-header"},h["default"].createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},h["default"].createElement("span",{"aria-hidden":"true"},"×")),h["default"].createElement("h4",{className:"modal-title"},gettext("Split post into new thread"))),e.children))}Object.defineProperty(a,"__esModule",{value:!0}),a.ModerationForm=a.PostingConfig=void 0;var d=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a["default"]=function(e){return h["default"].createElement(B,f({},e,{Form:H}))},a.Loader=i,a.Error=u,a.Modal=c;var p=e("react"),h=n(p),m=e("../../../button"),b=n(m),v=e("../../../form"),y=n(v),g=e("../../../form-group"),_=n(g),E=e("../../../category-select"),w=n(E),O=e("../../../modal-loader"),k=n(O),N=e("../../../select"),j=n(N),x=e("../../../../reducers/post"),P=r(x),C=e("../../../../services/ajax"),S=n(C),T=e("../../../../services/modal"),M=n(T),L=e("../../../../services/snackbar"),R=n(L),A=e("../../../../services/store"),I=n(A),D=e("../../../../utils/validators"),U=r(D),B=a.PostingConfig=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isLoaded:!1,isError:!1,categories:[]},a}return l(t,e),d(t,[{key:"componentDidMount",value:function(){var e=this;S["default"].get(misago.get("THREAD_EDITOR_URL")).then(function(t){var a=t.map(function(e){return Object.assign(e,{disabled:e.post===!1,label:e.name,value:e.id,
post:e.post})});e.setState({isLoaded:!0,categories:a})},function(t){e.setState({isError:t.detail})})}},{key:"render",value:function(){return this.state.isError?h["default"].createElement(u,{message:this.state.isError}):this.state.isLoaded?h["default"].createElement(H,f({},this.props,{categories:this.state.categories})):h["default"].createElement(i,null)}}]),t}(h["default"].Component),H=a.ModerationForm=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onCategoryChange=function(e){var t=e.target.value,r={category:t};a.acl[t].can_pin_threads<r.weight&&(r.weight=0),a.acl[t].can_hide_threads||(r.is_hidden=0),a.acl[t].can_close_threads||(r.is_closed=!1),a.setState(r)},a.state={isLoading:!1,title:"",category:null,categories:e.categories,weight:0,is_hidden:0,is_closed:!1,validators:{title:[U.required()]},errors:{}},a.isHiddenChoices=[{value:0,icon:"visibility",label:gettext("No")},{value:1,icon:"visibility_off",label:gettext("Yes")}],a.isClosedChoices=[{value:!1,icon:"lock_outline",label:gettext("No")},{value:!0,icon:"lock",label:gettext("Yes")}],a.acl={},a.props.categories.forEach(function(e){e.post&&(a.state.category||(a.state.category=e.id),a.acl[e.id]={can_pin_threads:e.post.pin,can_close_threads:e.post.close,can_hide_threads:e.post.hide})}),a}return l(t,e),d(t,[{key:"clean",value:function(){return!!this.isValid()||(R["default"].error(gettext("Form contains errors.")),this.setState({errors:this.validate()}),!1)}},{key:"send",value:function(){return S["default"].post(this.props.thread.api.posts.split,{title:this.state.title,category:this.state.category,weight:this.state.weight,is_hidden:this.state.is_hidden,is_closed:this.state.is_closed,posts:[this.props.post.id]})}},{key:"handleSuccess",value:function(e){I["default"].dispatch(P.patch(this.props.post,{isDeleted:!0})),M["default"].hide(),R["default"].success(gettext("Selected post was split into new thread."))}},{key:"handleError",value:function(e){400===e.status?(this.setState({errors:Object.assign({},this.state.errors,e)}),R["default"].error(gettext("Form contains errors."))):403===e.status&&Array.isArray(e)?M["default"].show(h["default"].createElement(ErrorsModal,{errors:e})):R["default"].apiError(e)}},{key:"getWeightChoices",value:function(){var e=[{value:0,icon:"remove",label:gettext("Not pinned")},{value:1,icon:"bookmark_border",label:gettext("Pinned locally")}];return 2==this.acl[this.state.category].can_pin_threads&&e.push({value:2,icon:"bookmark",label:gettext("Pinned globally")}),e}},{key:"renderWeightField",value:function(){return this.acl[this.state.category].can_pin_threads?h["default"].createElement(_["default"],{label:gettext("Thread weight"),"for":"id_weight",labelClass:"col-sm-4",controlClass:"col-sm-8"},h["default"].createElement(j["default"],{id:"id_weight",onChange:this.bindInput("weight"),value:this.state.weight,choices:this.getWeightChoices()})):null}},{key:"renderHiddenField",value:function(){return this.acl[this.state.category].can_hide_threads?h["default"].createElement(_["default"],{label:gettext("Hide thread"),"for":"id_is_hidden",labelClass:"col-sm-4",controlClass:"col-sm-8"},h["default"].createElement(j["default"],{id:"id_is_closed",onChange:this.bindInput("is_hidden"),value:this.state.is_hidden,choices:this.isHiddenChoices})):null}},{key:"renderClosedField",value:function(){return this.acl[this.state.category].can_close_threads?h["default"].createElement(_["default"],{label:gettext("Close thread"),"for":"id_is_closed",labelClass:"col-sm-4",controlClass:"col-sm-8"},h["default"].createElement(j["default"],{id:"id_is_closed",onChange:this.bindInput("is_closed"),value:this.state.is_closed,choices:this.isClosedChoices})):null}},{key:"render",value:function(){return h["default"].createElement(c,{className:"modal-dialog"},h["default"].createElement("form",{onSubmit:this.handleSubmit},h["default"].createElement("div",{className:"modal-body"},h["default"].createElement(_["default"],{label:gettext("Thread title"),"for":"id_title",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.title},h["default"].createElement("input",{id:"id_title",className:"form-control",type:"text",onChange:this.bindInput("title"),value:this.state.title})),h["default"].createElement("div",{className:"clearfix"}),h["default"].createElement(_["default"],{label:gettext("Category"),"for":"id_category",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.category},h["default"].createElement(w["default"],{id:"id_category",onChange:this.onCategoryChange,value:this.state.category,choices:this.state.categories})),h["default"].createElement("div",{className:"clearfix"}),this.renderWeightField(),this.renderHiddenField(),this.renderClosedField()),h["default"].createElement("div",{className:"modal-footer"},h["default"].createElement(b["default"],{className:"btn-primary",loading:this.state.isLoading},gettext("Split post")))))}}]),t}(y["default"])},{"../../../../reducers/post":282,"../../../../services/ajax":293,"../../../../services/modal":299,"../../../../services/snackbar":303,"../../../../services/store":304,"../../../../utils/validators":320,"../../../button":5,"../../../category-select":13,"../../../form":41,"../../../form-group":40,"../../../modal-loader":46,"../../../select":152,react:"react"}],114:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return s(e.post)&&e.post.is_hidden?i["default"].createElement("div",{className:"post-status-message post-status-hidden"},i["default"].createElement("span",{className:"material-icon"},"visibility_off"),i["default"].createElement("p",null,gettext("This post is hidden. Only users with permission may see its contents."))):null}function o(e){return s(e.post)&&e.post.is_unapproved?i["default"].createElement("div",{className:"post-status-message post-status-unapproved"},i["default"].createElement("span",{className:"material-icon"},"remove_circle_outline"),i["default"].createElement("p",null,gettext("This post is unapproved. Only users with permission to approve posts and its author may see its contents."))):null}function s(e){return!e.is_hidden||e.acl.can_see_hidden}Object.defineProperty(a,"__esModule",{value:!0}),a.FlagHidden=n,a.FlagUnapproved=o,a.isVisible=s;var l=e("react"),i=r(l)},{react:"react"}],115:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return(!e.is_hidden||e.acl.can_see_hidden)&&(e.acl.can_reply||e.acl.can_edit||e.acl.can_see_likes||e.acl.can_like)}function u(e,t){var a=t.slice(0,3).map(function(e){return e.username});if(1==a.length)return interpolate(gettext("%(user)s likes this."),{user:a[0]},!0);var r=e-a.length,n=a.slice(0,-1).join(", "),o=a.slice(-1)[0],s=interpolate(gettext("%(users)s and %(last_user)s"),{users:n,last_user:o},!0);if(0===r)return interpolate(gettext("%(users)s like this."),{users:s},!0);var l=ngettext("%(users)s and %(likes)s other user like this.","%(users)s and %(likes)s other users like this.",r);return interpolate(l,{users:s,likes:r},!0)}Object.defineProperty(a,"__esModule",{value:!0}),a.Edit=a.Reply=a.Likes=a.Like=void 0;var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a["default"]=function(e){return i(e.post)?p["default"].createElement("div",{className:"panel-footer post-footer"},p["default"].createElement(w,e),p["default"].createElement(O,d({lastLikes:e.post.last_likes,likes:e.post.likes},e)),p["default"].createElement(k,e),p["default"].createElement(N,e)):null},a.isVisible=i,a.getLikesMessage=u;var f=e("react"),p=n(f),h=e("./controls/actions"),m=r(h),b=e("../../post-likes"),v=n(b),y=e("../../../services/modal"),g=n(y),_=e("../../../services/posting"),E=n(_),w=a.Like=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){r.props.post.is_liked?m.unlike(r.props):m.like(r.props)},n=a,s(r,n)}return l(t,e),c(t,[{key:"render",value:function(){return this.props.post.acl.can_like?p["default"].createElement("button",{className:"btn btn-default pull-left",disabled:this.props.post.isBusy,onClick:this.onClick,type:"button"},this.props.post.is_liked?gettext("Unlike"):gettext("Like")):null}}]),t}(p["default"].Component),O=a.Likes=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){g["default"].show(p["default"].createElement(v["default"],{post:r.props.post}))},n=a,s(r,n)}return l(t,e),c(t,[{key:"render",value:function(){var e=(this.props.post.last_likes||[]).length>0;return this.props.post.acl.can_see_likes&&e?2===this.props.post.acl.can_see_likes?p["default"].createElement("button",{className:"btn btn-link pull-left",onClick:this.onClick,type:"button"},u(this.props.likes,this.props.lastLikes)):p["default"].createElement("p",{className:"pull-left"},u(this.props.likes,this.props.lastLikes)):null}}]),t}(p["default"].Component),k=a.Reply=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){E["default"].open({mode:"REPLY",config:r.props.thread.api.editor,submit:r.props.thread.api.posts.index,context:{reply:r.props.post.id}})},n=a,s(r,n)}return l(t,e),c(t,[{key:"render",value:function(){return this.props.post.acl.can_reply?p["default"].createElement("button",{type:"button",className:"btn btn-primary pull-right",onClick:this.onClick},gettext("Reply")):null}}]),t}(p["default"].Component),N=a.Edit=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){E["default"].open({mode:"EDIT",config:r.props.post.api.editor,submit:r.props.post.api.index})},n=a,s(r,n)}return l(t,e),c(t,[{key:"render",value:function(){return this.props.post.acl.can_edit?p["default"].createElement("button",{type:"button",className:"btn btn-default pull-right",onClick:this.onClick},gettext("Edit")):null}}]),t}(p["default"].Component)},{"../../../services/modal":299,"../../../services/posting":302,"../../post-likes":87,"./controls/actions":109,react:"react"}],116:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return e.post.poster?m["default"].createElement("div",{className:(0,_.getStatusClassName)(e.post.poster.status),title:(0,_.getStatusDescription)(e.post.poster,e.post.poster.status)},m["default"].createElement(_.StatusIcon,{status:e.post.poster.status,user:e.post.poster})):null}function i(e){return e.post.poster?m["default"].createElement("a",{className:"item-title",href:e.post.poster.absolute_url},e.post.poster.username):m["default"].createElement("strong",{className:"item-title"},e.post.poster_name)}function u(e){if(e.post.poster){if(e.post.poster.rank.is_default)return null;var t="label-"+(e.post.poster.rank.css_class||"default");return e.post.poster.rank.is_tab?m["default"].createElement("a",{href:e.post.poster.rank.absolute_url,className:"label "+t},e.post.poster.short_title):m["default"].createElement("span",{className:"label "+t},e.post.poster.short_title)}return m["default"].createElement("span",{className:"rank-name item-title"},gettext("Unregistered"))}function c(e){var t=interpolate(gettext("posted %(posted_on)s"),{posted_on:e.post.posted_on.format("LL, LT")},!0),a=interpolate(gettext("posted %(posted_on)s"),{posted_on:e.post.posted_on.fromNow()},!0);return m["default"].createElement("a",{href:e.post.url.index,className:"posted-on",title:t},a)}function d(e){return e.post.is_read?null:m["default"].createElement("span",{className:"label label-warning pull-right"},gettext("New"))}function f(e){var t=e.post.poster&&e.post.poster.id===e.user.id,a=e.post.acl.can_protect,r=e.user.id&&e.post.is_protected&&(t||a);return r?m["default"].createElement("span",{className:"label label-default pull-right",title:gettext("This post is protected and may not be edited.")},gettext("Protected")):null}Object.defineProperty(a,"__esModule",{value:!0}),a.PostEdits=void 0;var p=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a["default"]=function(e){return m["default"].createElement("div",{className:"panel-heading post-heading"},m["default"].createElement(l,e),m["default"].createElement(i,e),m["default"].createElement(u,e),m["default"].createElement(c,e),m["default"].createElement(g["default"],e),m["default"].createElement(v["default"],e),m["default"].createElement(N,e),m["default"].createElement(f,e),m["default"].createElement(d,e))},a.PosterStatus=l,a.Poster=i,a.PosterRank=u,a.PostedOn=c,a.UnreadLabel=d,a.ProtectedLabel=f;var h=e("react"),m=r(h),b=e("./controls"),v=r(b),y=e("./select"),g=r(y),_=e("../../user-status"),E=e("../../post-changelog"),w=r(E),O=e("../../../services/modal"),k=r(O),N=a.PostEdits=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){k["default"].show(m["default"].createElement(w["default"],{post:r.props.post}))},s=a,o(r,s)}return s(t,e),p(t,[{key:"render",value:function(){var e=this.props.post.is_hidden&&!this.props.post.acl.can_see_hidden,t=0===this.props.post.edits;if(e||t)return null;var a=ngettext("This post was edited %(edits)s time.","This post was edited %(edits)s times.",this.props.post.edits),r=interpolate(a,{edits:this.props.post.edits},!0);return m["default"].createElement("button",{className:"btn btn-default btn-sm pull-right",onClick:this.onClick,title:r,type:"button"},m["default"].createElement("span",{className:"material-icon"},"edit"),this.props.post.edits)}}]),t}(m["default"].Component)},{"../../../services/modal":299,"../../post-changelog":84,"../../user-status":210,"./controls":111,"./select":119,react:"react"}],117:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return e.post.poster?s["default"].createElement("a",{href:e.post.poster.absolute_url},s["default"].createElement(i["default"],{size:100,user:e.post.poster})):s["default"].createElement(i["default"],{size:100})}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){var t="post";return e.post.isDeleted?t="hide":e.post.is_hidden&&!e.post.acl.can_see_hidden&&(t="post post-hidden"),e.post.is_read||(t+=" post-new"),s["default"].createElement("li",{id:"post-"+e.post.id,className:t},s["default"].createElement("div",{className:"post-border"},s["default"].createElement("div",{className:"post-avatar"},s["default"].createElement(n,{post:e.post})),s["default"].createElement("div",{className:"post-body"},s["default"].createElement("div",{className:"panel panel-default panel-post"},s["default"].createElement(v["default"],e),s["default"].createElement(p.FlagHidden,e),s["default"].createElement(p.FlagUnapproved,e),s["default"].createElement(f["default"],e),s["default"].createElement(c["default"],e),s["default"].createElement(m["default"],e)))))},a.PosterAvatar=n;var o=e("react"),s=r(o),l=e("../../avatar"),i=r(l),u=e("./attachments"),c=r(u),d=e("./body"),f=r(d),p=e("./flags"),h=e("./footer"),m=r(h),b=e("./header"),v=r(b)},{"../../avatar":3,"./attachments":107,"./body":108,"./flags":114,"./footer":115,"./header":116,react:"react"}],118:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return s["default"].createElement("li",{className:"post"},s["default"].createElement("div",{className:"post-border"},s["default"].createElement("div",{className:"post-avatar"},s["default"].createElement(i["default"],{size:"100"})),s["default"].createElement("div",{className:"post-body"},s["default"].createElement("div",{className:"panel panel-default panel-post"},s["default"].createElement("div",{className:"panel-heading post-heading"},s["default"].createElement("span",{className:"ui-preview-text",style:{width:c["int"](30,100)+"px"}}," "),s["default"].createElement("span",{className:"ui-preview-text",style:{width:c["int"](30,100)+"px"}}," ")),s["default"].createElement("div",{className:"panel-body"},s["default"].createElement("article",{className:"misago-markup"},s["default"].createElement("p",{className:"ui-preview-text",style:{width:c["int"](50,100)+"%"}}," "),s["default"].createElement("p",{className:"ui-preview-text",style:{width:c["int"](50,100)+"%"}}," "),s["default"].createElement("p",{className:"ui-preview-text",style:{width:c["int"](50,100)+"%"}}," ")))))))};var o=e("react"),s=n(o),l=e("../../avatar"),i=n(l),u=e("../../../utils/random"),c=r(u)},{"../../../utils/random":315,"../../avatar":3,react:"react"}],119:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("./controls"),f=e("../../../reducers/posts"),p=r(f),h=e("../../../services/store"),m=n(h),b=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){r.props.post.isSelected?m["default"].dispatch(p.deselect(r.props.post)):m["default"].dispatch(p.select(r.props.post))},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){return this.props.thread.acl.can_merge_posts||(0,d.isVisible)(this.props.post.acl)?c["default"].createElement("div",{className:"pull-right"},c["default"].createElement("button",{className:"btn btn-default btn-icon",onClick:this.onClick,type:"button"},c["default"].createElement("span",{className:"material-icon"},this.props.post.isSelected?"check_box":"check_box_outline_blank"))):null}}]),t}(c["default"].Component);a["default"]=b},{"../../../reducers/posts":283,"../../../services/store":304,"./controls":111,react:"react"}],120:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../../reducers/post"),f=r(d),p=e("../../services/ajax"),h=n(p),m=e("../../services/store"),b=n(m),v=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this;this.props.post.is_read||$("#post-"+this.props.post.id).waypoint({handler:function(t){"down"!==t||e.props.post.is_read||window.setTimeout(function(){b["default"].dispatch(f.patch(e.props.post,{is_read:!0})),h["default"].post(e.props.post.api.read)},1e3)},offset:"bottom-in-view"})}},{key:"render",value:function(){return c["default"].createElement("div",{className:this.props.className},this.props.children)}}]),t}(c["default"].Component);a["default"]=v},{"../../reducers/post":282,"../../services/ajax":293,"../../services/store":304,react:"react"}],121:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("moment"),u=r(i),c=e("react"),d=r(c),f=e("../panel-loader"),p=r(f),h=e("../panel-message"),m=r(h),b=e("../../index"),v=r(b),y=e("../../services/polls"),g=r(y),_=e("../../services/page-title"),E=r(_),w=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.update=function(e){e.expires_on&&(e.expires_on=(0,u["default"])(e.expires_on)),a.setState({isLoaded:!0,error:null,ban:e})},a.error=function(e){a.setState({isLoaded:!0,error:e.detail,ban:null})},v["default"].has("PROFILE_BAN")?a.initWithPreloadedData(v["default"].pop("PROFILE_BAN")):a.initWithoutPreloadedData(),a.startPolling(e.profile.api_url.ban),a}return s(t,e),l(t,[{key:"initWithPreloadedData",value:function(e){e.expires_on&&(e.expires_on=(0,u["default"])(e.expires_on)),this.state={isLoaded:!0,ban:e}}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1}}},{key:"startPolling",value:function(e){g["default"].start({poll:"ban-details",url:e,frequency:9e4,update:this.update,error:this.error})}},{key:"componentDidMount",value:function(){E["default"].set({title:gettext("Ban details"),parent:this.props.profile.username})}},{key:"componentWillUnmount",value:function(){g["default"].stop("ban-details")}},{key:"getUserMessage",value:function(){return this.state.ban.user_message?d["default"].createElement("div",{className:"panel-body ban-message ban-user-message"},d["default"].createElement("h4",null,gettext("User-shown ban message")),d["default"].createElement("div",{className:"lead",dangerouslySetInnerHTML:{__html:this.state.ban.user_message.html}})):null}},{key:"getStaffMessage",value:function(){return this.state.ban.staff_message?d["default"].createElement("div",{className:"panel-body ban-message ban-staff-message"},d["default"].createElement("h4",null,gettext("Team-shown ban message")),d["default"].createElement("div",{className:"lead",dangerouslySetInnerHTML:{__html:this.state.ban.staff_message.html}})):null}},{key:"getExpirationMessage",value:function(){if(this.state.ban.expires_on){if(this.state.ban.expires_on.isAfter((0,u["default"])())){var e=interpolate(gettext("This ban expires on %(expires_on)s."),{expires_on:this.state.ban.expires_on.format("LL, LT")},!0),t=interpolate(gettext("This ban expires %(expires_on)s."),{expires_on:this.state.ban.expires_on.fromNow()},!0);return d["default"].createElement("abbr",{title:e},t)}return gettext("This ban has expired.")}return interpolate(gettext("%(username)s's ban is permanent."),{username:this.props.profile.username},!0)}},{key:"getPanelBody",value:function(){return this.state.ban?Object.keys(this.state.ban).length?d["default"].createElement("div",null,this.getUserMessage(),this.getStaffMessage(),d["default"].createElement("div",{className:"panel-body ban-expires"},d["default"].createElement("h4",null,gettext("Ban expiration")),d["default"].createElement("p",{className:"lead"},this.getExpirationMessage()))):d["default"].createElement("div",null,d["default"].createElement(m["default"],{message:gettext("No ban is active at the moment.")})):this.state.error?d["default"].createElement("div",null,d["default"].createElement(m["default"],{icon:"error_outline",message:this.state.error})):d["default"].createElement("div",null,d["default"].createElement(p["default"],null))}},{key:"render",value:function(){return d["default"].createElement("div",{className:"profile-ban-details"},d["default"].createElement("div",{className:"panel panel-default"},d["default"].createElement("div",{className:"panel-heading"},d["default"].createElement("h3",{className:"panel-title"},gettext("Ban details"))),this.getPanelBody()))}}]),t}(d["default"].Component);a["default"]=w},{"../../index":234,"../../services/page-title":300,"../../services/polls":301,"../panel-loader":59,"../panel-message":60,moment:"moment",react:"react"}],122:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=null;t=e.user.id===e.profile.id?gettext("You have no started threads."):interpolate(gettext("%(username)s started no threads."),{username:e.profile.username},!0);var a=null;if(e.posts.isLoaded)if(e.profile.id===e.user.id){var r=ngettext("You have started %(threads)s thread.","You have started %(threads)s threads.",e.posts.count);a=interpolate(r,{threads:e.posts.count},!0)}else{var n=ngettext("%(username)s has started %(threads)s thread.","%(username)s has started %(threads)s threads.",e.posts.count);a=interpolate(n,{username:e.profile.username,threads:e.posts.count},!0)}else a=gettext("Loading...");return i["default"].createElement(c["default"],s({api:e.profile.api_url.threads,emptyMessage:t,header:a,title:gettext("Threads")},e))}function o(e){var t=null;t=e.user.id===e.profile.id?gettext("You have posted no messages."):interpolate(gettext("%(username)s posted no messages."),{username:e.profile.username},!0);var a=null;if(e.posts.isLoaded)if(e.profile.id===e.user.id){var r=ngettext("You have posted %(posts)s message.","You have posted %(posts)s messages.",e.posts.count);a=interpolate(r,{posts:e.posts.count},!0)}else{var n=ngettext("%(username)s has posted %(posts)s message.","%(username)s has posted %(posts)s messages.",e.posts.count);a=interpolate(n,{username:e.profile.username,posts:e.posts.count},!0)}else a=gettext("Loading...");return i["default"].createElement(c["default"],s({api:e.profile.api_url.posts,emptyMessage:t,header:a,title:gettext("Posts")},e))}Object.defineProperty(a,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a.Threads=n,a.Posts=o;var l=e("react"),i=r(l),u=e("./route"),c=r(u)},{"./route":126,react:"react"}],123:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return e.isReady?o["default"].createElement("ul",{className:"posts-list ui-ready"},e.posts.map(function(e){return o["default"].createElement(l["default"],{key:e.id,post:e})})):o["default"].createElement("ul",{className:"posts-list ui-preview"},o["default"].createElement(u["default"],null))};var n=e("react"),o=r(n),s=e("./post"),l=r(s),i=e("./post-preview"),u=r(i)},{"./post":125,"./post-preview":124,react:"react"}],124:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return s["default"].createElement("li",{className:"post post-infeed"},s["default"].createElement("div",{className:"post-border"},s["default"].createElement("div",{className:"post-body"},s["default"].createElement("div",{className:"panel panel-default panel-post"},s["default"].createElement("div",{className:"panel-heading post-heading"},s["default"].createElement("span",{className:"ui-preview-text",style:{width:i["int"](20,50)+"%"}}," "),s["default"].createElement("span",{className:"ui-preview-text",style:{width:i["int"](30,100)+"px"}}," ")),s["default"].createElement("div",{className:"panel-body"},s["default"].createElement("article",{className:"misago-markup"},s["default"].createElement("p",{className:"ui-preview-text",style:{width:i["int"](30,100)+"%"}}," "),s["default"].createElement("p",{className:"ui-preview-text",style:{width:i["int"](30,100)+"%"}}," "),s["default"].createElement("p",{className:"ui-preview-text",style:{width:i["int"](30,100)+"%"}}," ")))))))};var o=e("react"),s=n(o),l=e("../../../../utils/random"),i=r(l)},{"../../../../utils/random":315,react:"react"}],125:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return c["default"].createElement("div",{
className:"panel-heading post-heading"},c["default"].createElement(o,e.thread),c["default"].createElement(s,{post:e.post}),c["default"].createElement(l,{url:e.post.url.index}))}function o(e){return c["default"].createElement("a",{className:"item-title",href:e.url},e.title)}function s(e){var t=interpolate(gettext("posted %(posted_on)s"),{posted_on:e.post.posted_on.format("LL, LT")},!0),a=interpolate(gettext("posted %(posted_on)s"),{posted_on:e.post.posted_on.fromNow()},!0);return c["default"].createElement("a",{href:e.post.url.index,className:"posted-on",title:t},a)}function l(e){return c["default"].createElement("div",{className:"pull-right"},c["default"].createElement("a",{className:"btn btn-default btn-sm",href:e.url},gettext("Go to post")))}function i(e){return e.content?c["default"].createElement("div",{className:"panel-body"},c["default"].createElement(f["default"],{markup:e.content})):c["default"].createElement("div",{className:"panel-body panel-body-invalid"},c["default"].createElement("p",{className:"lead"},gettext("This post's contents cannot be displayed.")),c["default"].createElement("p",{className:"text-muted"},gettext("This error is caused by invalid post content manipulation.")))}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){var t="post post-infeed";return e.post.is_read||(t+=" post-new"),c["default"].createElement("li",{id:"post-"+e.post.id,className:t},c["default"].createElement("div",{className:"post-border"},c["default"].createElement("div",{className:"post-body"},c["default"].createElement("div",{className:"panel panel-default panel-post"},c["default"].createElement(n,{post:e.post,thread:e.post.thread}),c["default"].createElement(i,{content:e.post.content})))))},a.PostHeader=n,a.Thread=o,a.PostedOn=s,a.GoTo=l,a.PostBody=i;var u=e("react"),c=r(u),d=e("../../../misago-markup"),f=r(d)},{"../../../misago-markup":45,react:"react"}],126:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e.posts.count?p["default"].createElement("div",null,p["default"].createElement(m["default"],{isReady:e.posts.isLoaded,posts:e.posts.results}),p["default"].createElement(u,{isLoading:e.isLoading,loadMore:e.loadMore,more:e.posts.more})):p["default"].createElement("p",{className:"lead"},e.emptyMessage)}function u(e){return e.more?p["default"].createElement("div",{className:"pager-more"},p["default"].createElement(v["default"],{loading:e.isLoading,onClick:e.loadMore},interpolate(gettext("Show more (%(more)s)"),{more:e.more},!0))):null}Object.defineProperty(a,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.Feed=i,a.LoadMoreButton=u;var f=e("react"),p=n(f),h=e("./posts-list"),m=n(h),b=e("../../button"),v=n(b),y=e("../../../reducers/posts"),g=r(y),_=e("../../../services/page-title"),E=n(_),w=e("../../../services/ajax"),O=n(w),k=e("../../../services/snackbar"),N=n(k),j=e("../../../services/store"),x=n(j),P=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.loadMore=function(){a.setState({isLoading:!0}),a.loadItems(a.props.posts.page+1)},a.state={isLoading:!1},a}return l(t,e),d(t,[{key:"loadItems",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;O["default"].get(this.props.api,{page:t||1}).then(function(a){1===t?x["default"].dispatch(g.load(a)):x["default"].dispatch(g.append(a)),e.setState({isLoading:!1})},function(t){e.setState({isLoading:!1}),N["default"].apiError(t)})}},{key:"componentDidMount",value:function(){E["default"].set({title:this.props.title,parent:this.props.profile.username}),this.loadItems()}},{key:"render",value:function(){return p["default"].createElement("div",{className:"profile-feed"},p["default"].createElement("nav",{className:"toolbar"},p["default"].createElement("h3",{className:"toolbar-left"},this.props.header)),p["default"].createElement(i,c({isLoading:this.state.isLoading,loadMore:this.loadMore},this.props)))}}]),t}(p["default"].Component);a["default"]=P},{"../../../reducers/posts":283,"../../../services/ajax":293,"../../../services/page-title":300,"../../../services/snackbar":303,"../../../services/store":304,"../../button":5,"./posts-list":123,react:"react"}],127:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../button"),d=r(c),f=e("../../reducers/profile"),p=e("../../services/ajax"),h=r(p),m=e("../../services/snackbar"),b=r(m),v=e("../../services/store"),y=r(v),g=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.action=function(){a.setState({isLoading:!0}),a.props.profile.is_followed?y["default"].dispatch((0,f.patch)({is_followed:!1,followers:a.props.profile.followers-1})):y["default"].dispatch((0,f.patch)({is_followed:!0,followers:a.props.profile.followers+1})),h["default"].post(a.props.profile.api_url.follow).then(function(e){a.setState({isLoading:!1}),y["default"].dispatch((0,f.patch)(e))},function(e){a.setState({isLoading:!1}),b["default"].apiError(e)})},a.state={isLoading:!1},a}return s(t,e),l(t,[{key:"getClassName",value:function(){return this.props.profile.is_followed?this.props.className+" btn-default btn-following":this.props.className+" btn-default btn-follow"}},{key:"getIcon",value:function(){return this.props.profile.is_followed?"favorite":"favorite_border"}},{key:"getLabel",value:function(){return this.props.profile.is_followed?gettext("Following"):gettext("Follow")}},{key:"render",value:function(){return u["default"].createElement(d["default"],{className:this.getClassName(),disabled:this.state.isLoading,onClick:this.action},u["default"].createElement("span",{className:"material-icon"},this.getIcon()),this.getLabel())}}]),t}(u["default"].Component);a["default"]=g},{"../../reducers/profile":284,"../../services/ajax":293,"../../services/snackbar":303,"../../services/store":304,"../button":5,react:"react"}],128:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=r(u),d=e("../button"),f=r(d),p=e("../quick-search"),h=r(p),m=e("../users-list/root"),b=r(m),v=e("../../index"),y=r(v),g=e("../../reducers/users"),_=e("../../services/ajax"),E=r(_),w=e("../../services/snackbar"),O=r(w),k=e("../../services/store"),N=r(k),j=e("../../services/page-title"),x=r(j),P=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.loadMore=function(){a.setState({isBusy:!0}),a.loadUsers(a.state.page+1,a.state.search)},a.search=function(e){a.setState({isLoaded:!1,isBusy:!0,search:e.target.value,count:0,more:0,page:1,pages:1}),a.loadUsers(1,e.target.value)},a.setSpecialProps(),y["default"].has(a.PRELOADED_DATA_KEY)?a.initWithPreloadedData(y["default"].pop(a.PRELOADED_DATA_KEY)):a.initWithoutPreloadedData(),a}return l(t,e),i(t,[{key:"setSpecialProps",value:function(){this.PRELOADED_DATA_KEY="PROFILE_FOLLOWERS",this.TITLE=gettext("Followers"),this.API_FILTER="followers"}},{key:"initWithPreloadedData",value:function(e){this.state={isLoaded:!0,isBusy:!1,search:"",count:e.count,more:e.more,page:e.page,pages:e.pages},N["default"].dispatch((0,g.hydrate)(e.results))}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1,isBusy:!1,search:"",count:0,more:0,page:1,pages:1},this.loadUsers()}},{key:"loadUsers",value:function(){var e,t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;E["default"].get(y["default"].get("USERS_API"),(e={},n(e,this.API_FILTER,this.props.profile.id),n(e,"name",r),n(e,"page",a||1),e),"user-"+this.API_FILTER).then(function(e){1===a?N["default"].dispatch((0,g.hydrate)(e.results)):N["default"].dispatch((0,g.append)(e.results)),t.setState({isLoaded:!0,isBusy:!1,count:e.count,more:e.more,page:e.page,pages:e.pages})},function(e){O["default"].apiError(e)})}},{key:"componentDidMount",value:function(){x["default"].set({title:this.TITLE,parent:this.props.profile.username})}},{key:"getLabel",value:function(){if(this.state.isLoaded){if(this.state.search){var e=ngettext("Found %(users)s user.","Found %(users)s users.",this.state.count);return interpolate(e,{users:this.state.count},!0)}if(this.props.profile.id===this.props.user.id){var t=ngettext("You have %(users)s follower.","You have %(users)s followers.",this.state.count);return interpolate(t,{users:this.state.count},!0)}var a=ngettext("%(username)s has %(users)s follower.","%(username)s has %(users)s followers.",this.state.count);return interpolate(a,{username:this.props.profile.username,users:this.state.count},!0)}return gettext("Loading...")}},{key:"getEmptyMessage",value:function(){return this.state.search?gettext("Search returned no users matching specified criteria."):this.props.user.id===this.props.profile.id?gettext("You have no followers."):interpolate(gettext("%(username)s has no followers."),{username:this.props.profile.username},!0)}},{key:"getMoreButton",value:function(){return this.state.more?c["default"].createElement("div",{className:"pager-more"},c["default"].createElement(f["default"],{loading:this.state.isBusy,onClick:this.loadMore},interpolate(gettext("Show more (%(more)s)"),{more:this.state.more},!0))):null}},{key:"getListBody",value:function(){return this.state.isLoaded&&0===this.state.count?c["default"].createElement("p",{className:"lead"},this.getEmptyMessage()):c["default"].createElement("div",null,c["default"].createElement(b["default"],{isLoaded:this.state.isLoaded,users:this.props.users,showRank:!0,cols:2}),this.getMoreButton())}},{key:"getClassName",value:function(){return"profile-"+this.API_FILTER}},{key:"render",value:function(){return c["default"].createElement("div",{className:this.getClassName()},c["default"].createElement("nav",{className:"toolbar"},c["default"].createElement("h3",{className:"toolbar-left"},this.getLabel()),c["default"].createElement(h["default"],{className:"toolbar-right",value:this.state.search,onChange:this.search,placeholder:gettext("Search history...")})),this.getListBody())}}]),t}(c["default"].Component);a["default"]=P},{"../../index":234,"../../reducers/users":292,"../../services/ajax":293,"../../services/page-title":300,"../../services/snackbar":303,"../../services/store":304,"../button":5,"../quick-search":139,"../users-list/root":217,react:"react"}],129:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=(r(i),e("./followers")),c=r(u),d=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"setSpecialProps",value:function(){this.PRELOADED_DATA_KEY="PROFILE_FOLLOWS",this.TITLE=gettext("Follows"),this.API_FILTER="follows"}},{key:"getLabel",value:function(){if(this.state.isLoaded){if(this.state.search){var e=ngettext("Found %(users)s user.","Found %(users)s users.",this.state.count);return interpolate(e,{users:this.state.count},!0)}if(this.props.profile.id===this.props.user.id){var t=ngettext("You are following %(users)s user.","You are following %(users)s users.",this.state.count);return interpolate(t,{users:this.state.count},!0)}var a=ngettext("%(username)s is following %(users)s user.","%(username)s is following %(users)s users.",this.state.count);return interpolate(a,{username:this.props.profile.username,users:this.state.count},!0)}return gettext("Loading...")}},{key:"getEmptyMessage",value:function(){return this.state.search?gettext("Search returned no users matching specified criteria."):this.props.user.id===this.props.profile.id?gettext("You are not following any users."):interpolate(gettext("%(username)s is not following any users."),{username:this.props.profile.username},!0)}}]),t}(c["default"]);a["default"]=d},{"./followers":128,react:"react"}],130:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../avatar"),d=r(c),f=e("../dropdown-toggle"),p=r(f),h=e("./follow-button"),m=r(h),b=e("./message-button"),v=r(b),y=e("./moderation/nav"),g=r(y),_=e("../user-status"),E=r(_),w=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getUserStatus",value:function(){return u["default"].createElement("li",{className:"user-status-display"},u["default"].createElement(E["default"],{user:this.props.profile,status:this.props.profile.status},u["default"].createElement(_.StatusIcon,{user:this.props.profile,status:this.props.profile.status}),u["default"].createElement(_.StatusLabel,{user:this.props.profile,status:this.props.profile.status,className:"status-label"})))}},{key:"getUserRank",value:function(){return this.props.profile.rank.is_tab?u["default"].createElement("li",{className:"user-rank"},u["default"].createElement("a",{href:this.props.profile.rank.absolute_url,className:"item-title"},this.props.profile.rank.name)):u["default"].createElement("li",{className:"user-rank"},u["default"].createElement("span",{className:"item-title"},this.props.profile.rank.name))}},{key:"getUserTitle",value:function(){return this.props.profile.title?u["default"].createElement("li",{className:"user-title"},this.props.profile.title):this.props.profile.rank.title?u["default"].createElement("li",{className:"user-title"},this.props.profile.rank.title):null}},{key:"getJoinedOn",value:function(){var e=interpolate(gettext("Joined on %(joined_on)s"),{joined_on:this.props.profile.joined_on.format("LL, LT")},!0),t=interpolate(gettext("Joined %(joined_on)s"),{joined_on:this.props.profile.joined_on.fromNow()},!0);return u["default"].createElement("li",{className:"user-joined-on"},u["default"].createElement("abbr",{title:e},t))}},{key:"getEmail",value:function(){return this.props.profile.email?u["default"].createElement("li",{className:"user-email"},u["default"].createElement("a",{href:"mailto:"+this.props.profile.email,className:"item-title"},this.props.profile.email)):null}},{key:"getFollowButton",value:function(){return this.props.profile.acl.can_follow?u["default"].createElement(m["default"],{className:"btn btn-aligned hidden-xs hidden-sm",profile:this.props.profile}):null}},{key:"getModerationButton",value:function(){return this.props.profile.acl.can_moderate?u["default"].createElement("div",{className:"btn-group btn-aligned hidden-xs hidden-sm"},u["default"].createElement("button",{className:"btn btn-default btn-moderate dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},u["default"].createElement("span",{className:"material-icon"},"tonality"),gettext("Moderation")),u["default"].createElement(g["default"],{profile:this.props.profile})):null}},{key:"render",value:function(){return u["default"].createElement("div",{className:"page-header"},u["default"].createElement("div",{className:"container"},u["default"].createElement("div",{className:"row"},u["default"].createElement("div",{className:"col-md-9 col-md-offset-3"},u["default"].createElement("h1",{className:"pull-left"},u["default"].createElement(d["default"],{user:this.props.profile,size:"100"}),u["default"].createElement("span",{className:"user-name"},this.props.profile.username)),u["default"].createElement(v["default"],{className:"btn btn-default btn-aligned hidden-xs hidden-sm",profile:this.props.profile,user:this.props.user}),this.getFollowButton(),this.getModerationButton(),u["default"].createElement(p["default"],{toggleNav:this.props.toggleNav,dropdown:this.props.dropdown})))),u["default"].createElement("div",{className:"header-stats"},u["default"].createElement("div",{className:"container"},u["default"].createElement("div",{className:"row"},u["default"].createElement("div",{className:"col-md-9 col-md-offset-3"},u["default"].createElement("ul",{className:"list-inline"},this.getUserStatus(),this.getUserRank(),this.getUserTitle(),this.getJoinedOn(),this.getEmail()))))))}}]),t}(u["default"].Component);a["default"]=w},{"../avatar":3,"../dropdown-toggle":19,"../user-status":210,"./follow-button":127,"./message-button":131,"./moderation/nav":135,react:"react"}],131:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../../services/posting"),d=r(c),f=e("../.."),p=r(f),h=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){d["default"].open({mode:"START_PRIVATE",submit:p["default"].get("PRIVATE_THREADS_API"),to:[r.props.profile]})},s=a,o(r,s)}return s(t,e),l(t,[{key:"render",value:function(){var e=this.props.user.acl.can_start_private_threads,t=this.props.user.id===this.props.profile.id;return!e||t?null:u["default"].createElement("button",{className:this.props.className,onClick:this.onClick,type:"button"},u["default"].createElement("span",{className:"material-icon"},"comment"),gettext("Message"))}}]),t}(u["default"].Component);a["default"]=h},{"../..":234,"../../services/posting":302,react:"react"}],132:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../../button"),d=r(c),f=e("../../form"),p=r(f),h=e("../../form-group"),m=r(h),b=e("../../modal-loader"),v=r(b),y=e("../../yes-no-switch"),g=r(y),_=e("../../modal-message"),E=r(_),w=e("../../../reducers/users"),O=e("../../../services/ajax"),k=r(O),N=e("../../../services/snackbar"),j=r(N),x=e("../../../services/store"),P=r(x),C=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isLoaded:!1,isLoading:!1,error:null,is_avatar_locked:"",avatar_lock_user_message:"",avatar_lock_staff_message:""},a}return s(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;k["default"].get(this.props.profile.api_url.moderate_avatar).then(function(t){e.setState({isLoaded:!0,is_avatar_locked:t.is_avatar_locked,avatar_lock_user_message:t.avatar_lock_user_message||"",avatar_lock_staff_message:t.avatar_lock_staff_message||""})},function(t){e.setState({isLoaded:!0,error:t.detail})})}},{key:"clean",value:function(){return!!this.isValid()||(j["default"].error(this.validate().username[0]),!1)}},{key:"send",value:function(){return k["default"].post(this.props.profile.api_url.moderate_avatar,{is_avatar_locked:this.state.is_avatar_locked,avatar_lock_user_message:this.state.avatar_lock_user_message,avatar_lock_staff_message:this.state.avatar_lock_staff_message})}},{key:"handleSuccess",value:function(e){P["default"].dispatch((0,w.updateAvatar)(this.props.profile,e.avatar_hash)),j["default"].success(gettext("Avatar controls have been changed."))}},{key:"getFormBody",value:function(){return u["default"].createElement("form",{onSubmit:this.handleSubmit},u["default"].createElement("div",{className:"modal-body"},u["default"].createElement(m["default"],{label:gettext("Lock avatar"),helpText:gettext("Locking user avatar will prohibit user from changing his avatar and will reset his/her avatar to default one."),"for":"id_is_avatar_locked"},u["default"].createElement(g["default"],{id:"id_is_avatar_locked",disabled:this.state.isLoading,iconOn:"lock_outline",iconOff:"lock_open",labelOn:gettext("Disallow user from changing avatar"),labelOff:gettext("Allow user to change avatar"),onChange:this.bindInput("is_avatar_locked"),value:this.state.is_avatar_locked})),u["default"].createElement(m["default"],{label:gettext("User message"),helpText:gettext("Optional message for user explaining why he/she is prohibited form changing avatar."),"for":"id_avatar_lock_user_message"},u["default"].createElement("textarea",{id:"id_avatar_lock_user_message",className:"form-control",rows:"4",disabled:this.state.isLoading,onChange:this.bindInput("avatar_lock_user_message"),value:this.state.avatar_lock_user_message})),u["default"].createElement(m["default"],{label:gettext("Staff message"),helpText:gettext("Optional message for forum team members explaining why user is prohibited form changing avatar."),"for":"id_avatar_lock_staff_message"},u["default"].createElement("textarea",{id:"id_avatar_lock_staff_message",className:"form-control",rows:"4",disabled:this.state.isLoading,onChange:this.bindInput("avatar_lock_staff_message"),value:this.state.avatar_lock_staff_message}))),u["default"].createElement("div",{className:"modal-footer"},u["default"].createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},gettext("Close")),u["default"].createElement(d["default"],{className:"btn-primary",loading:this.state.isLoading},gettext("Save changes"))))}},{key:"getModalBody",value:function(){return this.state.error?u["default"].createElement(E["default"],{icon:"remove_circle_outline",message:this.state.error}):this.state.isLoaded?this.getFormBody():u["default"].createElement(v["default"],null)}},{key:"getClassName",value:function(){return this.state.error?"modal-dialog modal-message modal-avatar-controls":"modal-dialog modal-avatar-controls"}},{key:"render",value:function(){return u["default"].createElement("div",{className:this.getClassName(),role:"document"},u["default"].createElement("div",{className:"modal-content"},u["default"].createElement("div",{className:"modal-header"},u["default"].createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},u["default"].createElement("span",{"aria-hidden":"true"},"×")),u["default"].createElement("h4",{className:"modal-title"},gettext("Avatar controls"))),this.getModalBody()))}}]),t}(p["default"]);a["default"]=C},{"../../../reducers/users":292,"../../../services/ajax":293,"../../../services/snackbar":303,"../../../services/store":304,"../../button":5,"../../form":41,"../../form-group":40,"../../modal-loader":46,"../../modal-message":47,"../../yes-no-switch":233,react:"react"}],133:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../../button"),f=n(d),p=e("../../form"),h=n(p),m=e("../../form-group"),b=n(m),v=e("../../modal-loader"),y=n(v),g=e("../../modal-message"),_=n(g),E=e("../../../index"),w=n(E),O=e("../../../reducers/username-history"),k=e("../../../reducers/users"),N=e("../../../services/ajax"),j=n(N),x=e("../../../services/snackbar"),P=n(x),C=e("../../../services/store"),S=n(C),T=e("../../../utils/validators"),M=r(T),L=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isLoaded:!1,isLoading:!1,error:null,username:"",validators:{username:[M.usernameContent(),M.usernameMinLength(w["default"].get("SETTINGS")),M.usernameMaxLength(w["default"].get("SETTINGS"))]}},a}return l(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this;j["default"].get(this.props.profile.api_url.moderate_username).then(function(){e.setState({isLoaded:!0})},function(t){e.setState({isLoaded:!0,error:t.detail})})}},{key:"clean",value:function(){return!!this.isValid()||(P["default"].error(this.validate().username[0]),!1)}},{key:"send",value:function(){return j["default"].post(this.props.profile.api_url.moderate_username,{username:this.state.username})}},{key:"handleSuccess",value:function(e){this.setState({username:""}),S["default"].dispatch((0,O.addNameChange)(e,this.props.profile,this.props.user)),S["default"].dispatch((0,k.updateUsername)(this.props.profile,e.username,e.slug)),P["default"].success(gettext("Username has been changed."))}},{key:"getFormBody",value:function(){return c["default"].createElement("form",{onSubmit:this.handleSubmit},c["default"].createElement("div",{className:"modal-body"},c["default"].createElement(b["default"],{label:gettext("New username"),"for":"id_username"},c["default"].createElement("input",{type:"text",id:"id_username",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("username"),value:this.state.username}))),c["default"].createElement("div",{className:"modal-footer"},c["default"].createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},gettext("Close")),c["default"].createElement(f["default"],{className:"btn-primary",loading:this.state.isLoading},gettext("Change username"))))}},{key:"getModalBody",value:function(){return this.state.error?c["default"].createElement(_["default"],{icon:"remove_circle_outline",message:this.state.error}):this.state.isLoaded?this.getFormBody():c["default"].createElement(y["default"],null)}},{key:"getClassName",value:function(){return this.state.error?"modal-dialog modal-message modal-rename-user":"modal-dialog modal-rename-user";
}},{key:"render",value:function(){return c["default"].createElement("div",{className:this.getClassName(),role:"document"},c["default"].createElement("div",{className:"modal-content"},c["default"].createElement("div",{className:"modal-header"},c["default"].createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},c["default"].createElement("span",{"aria-hidden":"true"},"×")),c["default"].createElement("h4",{className:"modal-title"},gettext("Change username"))),this.getModalBody()))}}]),t}(h["default"]);a["default"]=L},{"../../../index":234,"../../../reducers/username-history":291,"../../../reducers/users":292,"../../../services/ajax":293,"../../../services/snackbar":303,"../../../services/store":304,"../../../utils/validators":320,"../../button":5,"../../form":41,"../../form-group":40,"../../modal-loader":46,"../../modal-message":47,react:"react"}],134:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../../button"),d=r(c),f=e("../../form"),p=r(f),h=e("../../form-group"),m=r(h),b=e("../../modal-loader"),v=r(b),y=e("../../modal-message"),g=r(y),_=e("../../yes-no-switch"),E=r(_),w=e("../../../index"),O=r(w),k=e("../../../services/ajax"),N=r(k),j=e("../../../services/polls"),x=r(j),P=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.countdown=function(){window.setTimeout(function(){a.state.countdown>1?(a.setState({countdown:a.state.countdown-1}),a.countdown()):a.state.confirm||a.setState({confirm:!0})},1e3)},a.state={isLoaded:!1,isLoading:!1,isDeleted:!1,error:null,countdown:5,confirm:!1,with_content:!1},a}return s(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;N["default"].get(this.props.profile.api_url["delete"]).then(function(){e.setState({isLoaded:!0}),e.countdown()},function(t){e.setState({isLoaded:!0,error:t.detail})})}},{key:"send",value:function(){return N["default"].post(this.props.profile.api_url["delete"],{with_content:this.state.with_content})}},{key:"handleSuccess",value:function(){x["default"].stop("user-profile"),this.state.with_content?this.setState({isDeleted:interpolate(gettext("%(username)s's account, threads, posts and other content has been deleted."),{username:this.props.profile.username},!0)}):this.setState({isDeleted:interpolate(gettext("%(username)s's account has been deleted and other content has been hidden."),{username:this.props.profile.username},!0)})}},{key:"getButtonLabel",value:function(){return this.state.confirm?interpolate(gettext("Delete %(username)s"),{username:this.props.profile.username},!0):interpolate(gettext("Please wait... (%(countdown)ss)"),{countdown:this.state.countdown},!0)}},{key:"getForm",value:function(){return u["default"].createElement("form",{onSubmit:this.handleSubmit,className:"form-horizontal"},u["default"].createElement("div",{className:"modal-body"},u["default"].createElement(m["default"],{label:gettext("User content"),labelClass:"col-sm-4",controlClass:"col-sm-8","for":"id_with_content"},u["default"].createElement(E["default"],{id:"id_with_content",disabled:this.state.isLoading,labelOn:gettext("Delete together with user's account"),labelOff:gettext("Hide after deleting user's account"),onChange:this.bindInput("with_content"),value:this.state.with_content}))),u["default"].createElement("div",{className:"modal-footer"},u["default"].createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},gettext("Cancel")),u["default"].createElement(d["default"],{className:"btn-danger",loading:this.state.isLoading,disabled:!this.state.confirm},this.getButtonLabel())))}},{key:"getDeletedBody",value:function(){return u["default"].createElement("div",{className:"modal-body"},u["default"].createElement("div",{className:"message-icon"},u["default"].createElement("span",{className:"material-icon"},"info_outline")),u["default"].createElement("div",{className:"message-body"},u["default"].createElement("p",{className:"lead"},this.state.isDeleted),u["default"].createElement("p",null,u["default"].createElement("a",{href:O["default"].get("USERS_LIST_URL")},gettext("Return to users list")))))}},{key:"getModalBody",value:function(){return this.state.error?u["default"].createElement(g["default"],{icon:"remove_circle_outline",message:this.state.error}):this.state.isLoaded?this.state.isDeleted?this.getDeletedBody():this.getForm():u["default"].createElement(v["default"],null)}},{key:"getClassName",value:function(){return this.state.error||this.state.isDeleted?"modal-dialog modal-message modal-delete-account":"modal-dialog modal-delete-account"}},{key:"render",value:function(){return u["default"].createElement("div",{className:this.getClassName(),role:"document"},u["default"].createElement("div",{className:"modal-content"},u["default"].createElement("div",{className:"modal-header"},u["default"].createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},u["default"].createElement("span",{"aria-hidden":"true"},"×")),u["default"].createElement("h4",{className:"modal-title"},gettext("Delete user account"))),this.getModalBody()))}}]),t}(p["default"]);a["default"]=P},{"../../../index":234,"../../../services/ajax":293,"../../../services/polls":301,"../../button":5,"../../form":41,"../../form-group":40,"../../modal-loader":46,"../../modal-message":47,"../../yes-no-switch":233,react:"react"}],135:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("react-redux"),d=e("./avatar-controls"),f=r(d),p=e("./change-username"),h=r(p),m=e("./delete-account"),b=r(m),v=e("../../../services/modal"),y=r(v),g=function(e){return{tick:e.tick,user:e.auth,profile:e.profile}},_=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.showAvatarDialog=function(){y["default"].show((0,c.connect)(g)(f["default"]))},r.showRenameDialog=function(){y["default"].show((0,c.connect)(g)(h["default"]))},r.showDeleteDialog=function(){y["default"].show((0,c.connect)(g)(b["default"]))},s=a,o(r,s)}return s(t,e),l(t,[{key:"getAvatarButton",value:function(){return this.props.profile.acl.can_moderate_avatar?u["default"].createElement("li",null,u["default"].createElement("button",{type:"button",className:"btn-link",onClick:this.showAvatarDialog},u["default"].createElement("span",{className:"material-icon"},"portrait"),gettext("Avatar controls"))):null}},{key:"getRenameButton",value:function(){return this.props.profile.acl.can_rename?u["default"].createElement("li",null,u["default"].createElement("button",{type:"button",className:"btn-link",onClick:this.showRenameDialog},u["default"].createElement("span",{className:"material-icon"},"credit_card"),gettext("Change username"))):null}},{key:"getDeleteButton",value:function(){return this.props.profile.acl.can_delete?u["default"].createElement("li",null,u["default"].createElement("button",{type:"button",className:"btn-link",onClick:this.showDeleteDialog},u["default"].createElement("span",{className:"material-icon"},"clear"),gettext("Delete account"))):null}},{key:"render",value:function(){return u["default"].createElement("ul",{className:"dropdown-menu dropdown-menu-right",role:"menu"},this.getAvatarButton(),this.getRenameButton(),this.getDeleteButton(),u["default"].createElement("li",{className:"divider hidden-md hidden-lg"}),u["default"].createElement("li",{className:"dropdown-buttons hidden-md hidden-lg"},u["default"].createElement("button",{type:"button",className:"btn btn-default btn-block",onClick:this.props.toggleNav},u["default"].createElement("span",{className:"material-icon"},"menu"),gettext("Menu"))))}}]),t}(u["default"].Component);a["default"]=_},{"../../../services/modal":299,"./avatar-controls":132,"./change-username":133,"./delete-account":134,react:"react","react-redux":"react-redux"}],136:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0}),a.CompactNav=a.SideNav=void 0;var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("react-router"),d=e("../li"),f=r(d),p=e("./follow-button"),h=r(p),m=e("../../index"),b=(r(m),a.SideNav=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getMeta",value:function(e){return e?u["default"].createElement("span",{className:"badge"},this.props.profile[e.attr]):null}},{key:"render",value:function(){var e=this;return u["default"].createElement("div",{className:"list-group nav-side"},this.props.pages.map(function(t){return u["default"].createElement(c.Link,{to:e.props.baseUrl+t.component+"/",className:"list-group-item",activeClassName:"active",key:t.component},u["default"].createElement("span",{className:"material-icon"},t.icon),t.name,e.getMeta(t.meta))}))}}]),t}(u["default"].Component));a.CompactNav=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"showSpecialOptions",value:function(){return this.props.profile.acl.can_follow||this.props.profile.acl.can_moderate}},{key:"getFollowButton",value:function(){return this.props.profile.acl.can_follow?u["default"].createElement(h["default"],{className:"btn btn-block",profile:this.props.profile}):null}},{key:"getModerationButton",value:function(){return this.props.profile.acl.can_moderate?u["default"].createElement("button",{type:"button",className:"btn btn-default btn-block",onClick:this.props.toggleModeration},u["default"].createElement("span",{className:"material-icon"},"tonality"),gettext("Moderation")):null}},{key:"getSpecialOptions",value:function(){return this.showSpecialOptions()?u["default"].createElement("li",{className:"dropdown-buttons"},this.getFollowButton(),this.getModerationButton()):null}},{key:"render",value:function(){var e=this;return u["default"].createElement("ul",{className:"dropdown-menu",role:"menu"},this.getSpecialOptions(),this.showSpecialOptions()?u["default"].createElement("li",{className:"divider"}):null,this.props.pages.map(function(t){return u["default"].createElement(f["default"],{path:e.props.baseUrl+t.component+"/",key:t.component},u["default"].createElement(c.Link,{to:e.props.baseUrl+t.component+"/",onClick:e.props.hideNav},u["default"].createElement("span",{className:"material-icon"},t.icon),t.name,e.getMeta(t.meta)))}))}}]),t}(b)},{"../../index":234,"../li":42,"./follow-button":127,react:"react","react-router":"react-router"}],137:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{tick:e.tick.tick,user:e.auth.user,users:e.users,posts:e.posts,profile:e.profile,"username-history":e["username-history"]}}function i(){var e=[];return M["default"].get("PROFILE_PAGES").forEach(function(t){e.push(Object.assign({},t,{path:M["default"].get("PROFILE").absolute_url+t.component+"/",component:(0,f.connect)(l)(B[t.component])}))}),e}Object.defineProperty(a,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.select=l,a.paths=i;var c=e("react"),d=r(c),f=e("react-redux"),p=e("./ban-details"),h=r(p),m=e("./feed"),b=e("./followers"),v=r(b),y=e("./follows"),g=r(y),_=e("./username-history"),E=r(_),w=e("./header"),O=r(w),k=e("./moderation/nav"),N=r(k),j=e("./navs"),x=e("../avatar"),P=r(x),C=e("../with-dropdown"),S=r(C),T=e("../.."),M=r(T),L=e("../../reducers/profile"),R=e("../../services/polls"),A=r(R),I=e("../../services/store"),D=r(I),U=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.update=function(e){D["default"].dispatch((0,L.hydrate)(e))},a.toggleNav=function(){"pages"===a.state.dropdown?a.setState({dropdown:!1}):a.setState({dropdown:"pages"})},a.toggleModeration=function(){"moderation"===a.state.dropdown?a.setState({dropdown:!1}):a.setState({dropdown:"moderation"})},a.startPolling(e.profile.api_url.root),a}return s(t,e),u(t,[{key:"startPolling",value:function(e){A["default"].start({poll:"user-profile",url:e,frequency:9e4,update:this.update})}},{key:"getNavDropdown",value:function(){return"pages"===this.state.dropdown?d["default"].createElement(j.CompactNav,{pages:M["default"].get("PROFILE_PAGES"),baseUrl:M["default"].get("PROFILE").absolute_url,profile:this.props.profile,toggleModeration:this.toggleModeration,hideNav:this.hideNav}):"moderation"===this.state.dropdown?d["default"].createElement(N["default"],{profile:this.props.profile,toggleNav:this.toggleNav,hideNav:this.hideNav}):null}},{key:"getClassName",value:function(){var e="page page-user-profile";return e}},{key:"render",value:function(){return d["default"].createElement("div",{className:this.getClassName()},d["default"].createElement(O["default"],{user:this.props.user,profile:this.props.profile,toggleNav:this.toggleNav,toggleModeration:this.toggleModeration}),d["default"].createElement("div",{className:this.getCompactNavClassName()},this.getNavDropdown()),d["default"].createElement("div",{className:"container"},d["default"].createElement("div",{className:"row"},d["default"].createElement("div",{className:"col-md-3 hidden-xs hidden-sm"},d["default"].createElement("div",{className:"profile-side-avatar"},d["default"].createElement(P["default"],{user:this.props.profile,size:"400"})),d["default"].createElement(j.SideNav,{pages:M["default"].get("PROFILE_PAGES"),baseUrl:M["default"].get("PROFILE").absolute_url,profile:this.props.profile})),d["default"].createElement("div",{className:"col-md-9"},this.props.children))))}}]),t}(S["default"]);a["default"]=U;var B={posts:m.Posts,threads:m.Threads,followers:v["default"],follows:g["default"],"username-history":E["default"],"ban-details":h["default"]}},{"../..":234,"../../reducers/profile":284,"../../services/polls":301,"../../services/store":304,"../avatar":3,"../with-dropdown":232,"./ban-details":121,"./feed":122,"./followers":128,"./follows":129,"./header":130,"./moderation/nav":135,"./navs":136,"./username-history":138,react:"react","react-redux":"react-redux"}],138:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../button"),d=r(c),f=e("../quick-search"),p=r(f),h=e("../username-history/root"),m=r(h),b=e("../../index"),v=r(b),y=e("../../reducers/username-history"),g=e("../../services/ajax"),_=r(g),E=e("../../services/snackbar"),w=r(E),O=e("../../services/store"),k=r(O),N=e("../../services/page-title"),j=r(N),x=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.loadMore=function(){a.setState({isBusy:!0}),a.loadChanges(a.state.page+1,a.state.search)},a.search=function(e){a.setState({isLoaded:!1,isBusy:!0,search:e.target.value,count:0,more:0,page:1,pages:1}),a.loadChanges(1,e.target.value)},v["default"].has("PROFILE_NAME_HISTORY")?a.initWithPreloadedData(v["default"].pop("PROFILE_NAME_HISTORY")):a.initWithoutPreloadedData(),a}return s(t,e),l(t,[{key:"initWithPreloadedData",value:function(e){this.state={isLoaded:!0,isBusy:!1,search:"",count:e.count,more:e.more,page:e.page,pages:e.pages},k["default"].dispatch((0,y.hydrate)(e.results))}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1,isBusy:!1,search:"",count:0,more:0,page:1,pages:1},this.loadChanges()}},{key:"loadChanges",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_["default"].get(v["default"].get("USERNAME_CHANGES_API"),{user:this.props.profile.id,search:a,page:t||1},"search-username-history").then(function(a){1===t?k["default"].dispatch((0,y.hydrate)(a.results)):k["default"].dispatch((0,y.append)(a.results)),e.setState({isLoaded:!0,isBusy:!1,count:a.count,more:a.more,page:a.page,pages:a.pages})},function(e){w["default"].apiError(e)})}},{key:"componentDidMount",value:function(){j["default"].set({title:gettext("Username history"),parent:this.props.profile.username})}},{key:"getLabel",value:function(){if(this.state.isLoaded){if(this.state.search){var e=ngettext("Found %(changes)s username change.","Found %(changes)s username changes.",this.state.count);return interpolate(e,{changes:this.state.count},!0)}if(this.props.profile.id===this.props.user.id){var t=ngettext("Your username was changed %(changes)s time.","Your username was changed %(changes)s times.",this.state.count);return interpolate(t,{changes:this.state.count},!0)}var a=ngettext("%(username)s's username was changed %(changes)s time.","%(username)s's username was changed %(changes)s times.",this.state.count);return interpolate(a,{username:this.props.profile.username,changes:this.state.count},!0)}return gettext("Loading...")}},{key:"getEmptyMessage",value:function(){return this.state.search?gettext("Search returned no username changes matching specified criteria."):this.props.user.id===this.props.profile.id?gettext("No name changes have been recorded for your account."):interpolate(gettext("%(username)s's username was never changed."),{username:this.props.profile.username},!0)}},{key:"getMoreButton",value:function(){return this.state.more?u["default"].createElement("div",{className:"pager-more"},u["default"].createElement(d["default"],{loading:this.state.isBusy,onClick:this.loadMore},interpolate(gettext("Show older (%(more)s)"),{more:this.state.more},!0))):null}},{key:"render",value:function(){return u["default"].createElement("div",{className:"profile-username-history"},u["default"].createElement("nav",{className:"toolbar"},u["default"].createElement("h3",{className:"toolbar-left"},this.getLabel()),u["default"].createElement(p["default"],{className:"toolbar-right",value:this.state.search,onChange:this.search,placeholder:gettext("Search history...")})),u["default"].createElement(m["default"],{isLoaded:this.state.isLoaded,emptyMessage:this.getEmptyMessage(),changes:this.props["username-history"]}),this.getMoreButton())}}]),t}(u["default"].Component);a["default"]=x},{"../../index":234,"../../reducers/username-history":291,"../../services/ajax":293,"../../services/page-title":300,"../../services/snackbar":303,"../../services/store":304,"../button":5,"../quick-search":139,"../username-history/root":216,react:"react"}],139:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getClassName",value:function(){return this.props.className?"form-search "+this.props.className:"form-search"}},{key:"render",value:function(){return u["default"].createElement("div",{className:this.getClassName()},u["default"].createElement("input",{type:"text",className:"form-control",value:this.props.value,onChange:this.props.onChange,placeholder:this.props.placeholder||gettext("Search...")}),u["default"].createElement("span",{className:"material-icon"},"search"))}}]),t}(u["default"].Component);a["default"]=c},{react:"react"}],140:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./loader"),d=r(c),f=e("./register.js"),p=r(f),h=e("../services/captcha"),m=r(h),b=e("../services/modal"),v=r(b),y=e("../services/snackbar"),g=r(y),_=e("../services/zxcvbn"),E=r(_),w=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.showRegisterModal=function(){"closed"===misago.get("SETTINGS").account_activation?g["default"].info(gettext("New registrations are currently disabled.")):a.state.isLoaded?v["default"].show(p["default"]):(a.setState({isLoading:!0}),Promise.all([m["default"].load(),E["default"].load()]).then(function(){a.state.isLoaded||a.setState({isLoading:!1,isLoaded:!1}),v["default"].show(p["default"])}))},a.state={isLoading:!1,isLoaded:!1},a}return s(t,e),l(t,[{key:"getClassName",value:function(){return this.props.className+(this.state.isLoading?" btn-loading":"")}},{key:"render",value:function(){return u["default"].createElement("button",{type:"button",onClick:this.showRegisterModal,className:"btn "+this.getClassName(),disabled:this.state.isLoaded},gettext("Register"),this.state.isLoading?u["default"].createElement(d["default"],null):null)}}]),t}(u["default"].Component);a["default"]=w},{"../services/captcha":295,"../services/modal":299,"../services/snackbar":303,"../services/zxcvbn":305,"./loader":43,"./register.js":141,react:"react"}],141:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0}),a.RegisterComplete=a.RegisterForm=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("./button"),f=n(d),p=e("./form"),h=n(p),m=e("./form-group"),b=n(m),v=e("./password-strength"),y=n(v),g=e(".."),_=n(g),E=e("../services/ajax"),w=n(E),O=e("../services/auth"),k=n(O),N=e("../services/captcha"),j=n(N),x=e("../services/modal"),P=n(x),C=e("../services/snackbar"),S=n(C),T=e("../utils/banned-page"),M=n(T),L=e("../utils/validators"),R=r(L),A=a.RegisterForm=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isLoading:!1,username:"",email:"",password:"",captcha:"",validators:{username:[R.usernameContent(),R.usernameMinLength(_["default"].get("SETTINGS")),R.usernameMaxLength(_["default"].get("SETTINGS"))],email:[R.email()],password:[R.passwordMinLength(_["default"].get("SETTINGS"))],captcha:j["default"].validator()},errors:{}},a}return l(t,e),i(t,[{key:"clean",value:function(){return!!this.isValid()||(S["default"].error(gettext("Form contains errors.")),this.setState({errors:this.validate()}),!1)}},{key:"send",value:function(){return w["default"].post(_["default"].get("USERS_API"),{username:this.state.username,email:this.state.email,password:this.state.password,captcha:this.state.captcha})}},{key:"handleSuccess",value:function(e){this.props.callback(e)}},{key:"handleError",value:function(e){400===e.status?(this.setState({errors:Object.assign({},this.state.errors,e)}),S["default"].error(gettext("Form contains errors."))):403===e.status&&e.ban?((0,M["default"])(e.ban),P["default"].hide()):S["default"].apiError(e)}},{key:"getLegalFootNote",value:function(){return _["default"].get("TERMS_OF_SERVICE_URL")?c["default"].createElement("a",{href:_["default"].get("TERMS_OF_SERVICE_URL"),target:"_blank"},gettext("By registering you agree to site's terms and conditions.")):null}},{key:"render",value:function(){return c["default"].createElement("div",{className:"modal-dialog modal-register",role:"document"},c["default"].createElement("div",{className:"modal-content"},c["default"].createElement("div",{className:"modal-header"},c["default"].createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},c["default"].createElement("span",{"aria-hidden":"true"},"×")),c["default"].createElement("h4",{className:"modal-title"},gettext("Register"))),c["default"].createElement("form",{onSubmit:this.handleSubmit,className:"form-horizontal"},c["default"].createElement("input",{type:"type",style:{display:"none"}}),c["default"].createElement("input",{type:"password",style:{display:"none"}}),c["default"].createElement("div",{className:"modal-body"},c["default"].createElement(b["default"],{label:gettext("Username"),"for":"id_username",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.username},c["default"].createElement("input",{type:"text",id:"id_username",className:"form-control","aria-describedby":"id_username_status",disabled:this.state.isLoading,onChange:this.bindInput("username"),value:this.state.username})),c["default"].createElement(b["default"],{label:gettext("E-mail"),"for":"id_email",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.email},c["default"].createElement("input",{type:"text",id:"id_email",className:"form-control","aria-describedby":"id_email_status",disabled:this.state.isLoading,onChange:this.bindInput("email"),value:this.state.email})),c["default"].createElement(b["default"],{label:gettext("Password"),"for":"id_password",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.password,extra:c["default"].createElement(y["default"],{password:this.state.password,inputs:[this.state.username,this.state.email]})},c["default"].createElement("input",{type:"password",id:"id_password",className:"form-control","aria-describedby":"id_password_status",disabled:this.state.isLoading,onChange:this.bindInput("password"),value:this.state.password})),j["default"].component({form:this,labelClass:"col-sm-4",controlClass:"col-sm-8"})),c["default"].createElement("div",{className:"modal-footer"},this.getLegalFootNote(),c["default"].createElement(f["default"],{className:"btn-primary",loading:this.state.isLoading},gettext("Register account"))))))}}]),t}(h["default"]),I=a.RegisterComplete=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));
}return l(t,e),i(t,[{key:"getLead",value:function(){return"user"===this.props.activation?gettext("%(username)s, your account has been created but you need to activate it before you will be able to sign in."):"admin"===this.props.activation?gettext("%(username)s, your account has been created but board administrator will have to activate it before you will be able to sign in."):void 0}},{key:"getSubscript",value:function(){return"user"===this.props.activation?gettext("We have sent an e-mail to %(email)s with link that you have to click to activate your account."):"admin"===this.props.activation?gettext("We will send an e-mail to %(email)s when this takes place."):void 0}},{key:"render",value:function(){return c["default"].createElement("div",{className:"modal-dialog modal-message modal-register",role:"document"},c["default"].createElement("div",{className:"modal-content"},c["default"].createElement("div",{className:"modal-header"},c["default"].createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},c["default"].createElement("span",{"aria-hidden":"true"},"×")),c["default"].createElement("h4",{className:"modal-title"},gettext("Registration complete"))),c["default"].createElement("div",{className:"modal-body"},c["default"].createElement("div",{className:"message-icon"},c["default"].createElement("span",{className:"material-icon"},"info_outline")),c["default"].createElement("div",{className:"message-body"},c["default"].createElement("p",{className:"lead"},interpolate(this.getLead(),{username:this.props.username},!0)),c["default"].createElement("p",null,interpolate(this.getSubscript(),{email:this.props.email},!0))))))}}]),t}(c["default"].Component),D=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.completeRegistration=function(e){"active"===e.activation?(P["default"].hide(),k["default"].signIn(e)):a.setState({complete:e})},a.state={complete:!1},a}return l(t,e),i(t,[{key:"render",value:function(){return this.state.complete?c["default"].createElement(I,{activation:this.state.complete.activation,username:this.state.complete.username,email:this.state.complete.email}):c["default"].createElement(A,{callback:this.completeRegistration})}}]),t}(c["default"].Component);a["default"]=D},{"..":234,"../services/ajax":293,"../services/auth":294,"../services/captcha":295,"../services/modal":299,"../services/snackbar":303,"../utils/banned-page":306,"../utils/validators":320,"./button":5,"./form":41,"./form-group":40,"./password-strength":69,react:"react"}],142:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0}),a.LinkSent=a.RequestLinkForm=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../index"),f=n(d),p=e("./button"),h=n(p),m=e("./form"),b=n(m),v=e("../services/ajax"),y=n(v),g=e("../services/snackbar"),_=n(g),E=e("../utils/validators"),w=r(E),O=e("../utils/banned-page"),k=n(O),N=a.RequestLinkForm=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isLoading:!1,email:"",validators:{email:[w.email()]}},a}return l(t,e),i(t,[{key:"clean",value:function(){return!!this.isValid()||(_["default"].error(gettext("Enter a valid email address.")),!1)}},{key:"send",value:function(){return y["default"].post(f["default"].get("SEND_ACTIVATION_API"),{email:this.state.email})}},{key:"handleSuccess",value:function(e){this.props.callback(e)}},{key:"handleError",value:function(e){["already_active","inactive_admin"].indexOf(e.code)>-1?_["default"].info(e.detail):403===e.status&&e.ban?(0,k["default"])(e.ban):_["default"].apiError(e)}},{key:"render",value:function(){return c["default"].createElement("div",{className:"well well-form well-form-request-activation-link"},c["default"].createElement("form",{onSubmit:this.handleSubmit},c["default"].createElement("div",{className:"form-group"},c["default"].createElement("div",{className:"control-input"},c["default"].createElement("input",{type:"text",className:"form-control",placeholder:gettext("Your e-mail address"),disabled:this.state.isLoading,onChange:this.bindInput("email"),value:this.state.email}))),c["default"].createElement(h["default"],{className:"btn-primary btn-block",loading:this.state.isLoading},gettext("Send link"))))}}]),t}(b["default"]),j=a.LinkSent=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"getMessage",value:function(){return interpolate(gettext("Activation link was sent to %(email)s"),{email:this.props.user.email},!0)}},{key:"render",value:function(){return c["default"].createElement("div",{className:"well well-form well-form-request-activation-link well-done"},c["default"].createElement("div",{className:"done-message"},c["default"].createElement("div",{className:"message-icon"},c["default"].createElement("span",{className:"material-icon"},"check")),c["default"].createElement("div",{className:"message-body"},c["default"].createElement("p",null,this.getMessage())),c["default"].createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:this.props.callback},gettext("Request another link"))))}}]),t}(c["default"].Component),x=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.complete=function(e){a.setState({complete:e})},a.reset=function(){a.setState({complete:!1})},a.state={complete:!1},a}return l(t,e),i(t,[{key:"render",value:function(){return this.state.complete?c["default"].createElement(j,{user:this.state.complete,callback:this.reset}):c["default"].createElement(N,{callback:this.complete})}}]),t}(c["default"].Component);a["default"]=x},{"../index":234,"../services/ajax":293,"../services/snackbar":303,"../utils/banned-page":306,"../utils/validators":320,"./button":5,"./form":41,react:"react"}],143:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0}),a.AccountInactivePage=a.LinkSent=a.RequestResetForm=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("react-dom"),f=n(d),p=e("../index"),h=n(p),m=e("./button"),b=n(m),v=e("./form"),y=n(v),g=e("../services/ajax"),_=n(g),E=e("../services/snackbar"),w=n(E),O=e("../utils/validators"),k=r(O),N=e("../utils/banned-page"),j=n(N),x=a.RequestResetForm=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isLoading:!1,email:"",validators:{email:[k.email()]}},a}return l(t,e),i(t,[{key:"clean",value:function(){return!!this.isValid()||(w["default"].error(gettext("Enter a valid email address.")),!1)}},{key:"send",value:function(){return _["default"].post(h["default"].get("SEND_PASSWORD_RESET_API"),{email:this.state.email})}},{key:"handleSuccess",value:function(e){this.props.callback(e)}},{key:"handleError",value:function(e){["inactive_user","inactive_admin"].indexOf(e.code)>-1?this.props.showInactivePage(e):403===e.status&&e.ban?(0,j["default"])(e.ban):w["default"].apiError(e)}},{key:"render",value:function(){return c["default"].createElement("div",{className:"well well-form well-form-request-password-reset"},c["default"].createElement("form",{onSubmit:this.handleSubmit},c["default"].createElement("div",{className:"form-group"},c["default"].createElement("div",{className:"control-input"},c["default"].createElement("input",{type:"text",className:"form-control",placeholder:gettext("Your e-mail address"),disabled:this.state.isLoading,onChange:this.bindInput("email"),value:this.state.email}))),c["default"].createElement(b["default"],{className:"btn-primary btn-block",loading:this.state.isLoading},gettext("Send link"))))}}]),t}(y["default"]),P=a.LinkSent=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"getMessage",value:function(){return interpolate(gettext("Reset password link was sent to %(email)s"),{email:this.props.user.email},!0)}},{key:"render",value:function(){return c["default"].createElement("div",{className:"well well-form well-form-request-password-reset well-done"},c["default"].createElement("div",{className:"done-message"},c["default"].createElement("div",{className:"message-icon"},c["default"].createElement("span",{className:"material-icon"},"check")),c["default"].createElement("div",{className:"message-body"},c["default"].createElement("p",null,this.getMessage())),c["default"].createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:this.props.callback},gettext("Request another link"))))}}]),t}(c["default"].Component),C=a.AccountInactivePage=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"getActivateButton",value:function(){return"inactive_user"===this.props.activation?c["default"].createElement("p",null,c["default"].createElement("a",{href:h["default"].get("REQUEST_ACTIVATION_URL")},gettext("Activate your account."))):null}},{key:"render",value:function(){return c["default"].createElement("div",{className:"page page-message page-message-info page-forgotten-password-inactive"},c["default"].createElement("div",{className:"container"},c["default"].createElement("div",{className:"message-panel"},c["default"].createElement("div",{className:"message-icon"},c["default"].createElement("span",{className:"material-icon"},"info_outline")),c["default"].createElement("div",{className:"message-body"},c["default"].createElement("p",{className:"lead"},gettext("Your account is inactive.")),c["default"].createElement("p",null,this.props.message),this.getActivateButton()))))}}]),t}(c["default"].Component),S=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.complete=function(e){a.setState({complete:e})},a.reset=function(){a.setState({complete:!1})},a.state={complete:!1},a}return l(t,e),i(t,[{key:"showInactivePage",value:function(e){f["default"].render(c["default"].createElement(C,{activation:e.code,message:e.detail}),document.getElementById("page-mount"))}},{key:"render",value:function(){return this.state.complete?c["default"].createElement(P,{user:this.state.complete,callback:this.reset}):c["default"].createElement(x,{callback:this.complete,showInactivePage:this.showInactivePage})}}]),t}(c["default"].Component);a["default"]=S},{"../index":234,"../services/ajax":293,"../services/snackbar":303,"../utils/banned-page":306,"../utils/validators":320,"./button":5,"./form":41,react:"react","react-dom":"react-dom"}],144:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0}),a.PasswordChangedPage=a.ResetPasswordForm=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("react-dom"),f=n(d),p=e("../index"),h=n(p),m=e("./button"),b=n(m),v=e("./form"),y=n(v),g=e("./sign-in.js"),_=n(g),E=e("../services/ajax"),w=n(E),O=e("../services/auth"),k=n(O),N=e("../services/modal"),j=n(N),x=e("../services/snackbar"),P=n(x),C=e("../utils/validators"),S=r(C),T=e("../utils/banned-page"),M=n(T),L=a.ResetPasswordForm=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isLoading:!1,password:"",validators:{password:[S.passwordMinLength(h["default"].get("SETTINGS"))]}},a}return l(t,e),i(t,[{key:"clean",value:function(){return!!this.isValid()||(this.state.password.trim().length?P["default"].error(this.state.errors.password[0]):P["default"].error(gettext("Enter new password.")),!1)}},{key:"send",value:function(){return w["default"].post(h["default"].get("CHANGE_PASSWORD_API"),{password:this.state.password})}},{key:"handleSuccess",value:function(e){this.props.callback(e)}},{key:"handleError",value:function(e){403===e.status&&e.ban?(0,M["default"])(e.ban):P["default"].apiError(e)}},{key:"render",value:function(){return c["default"].createElement("div",{className:"well well-form well-form-reset-password"},c["default"].createElement("form",{onSubmit:this.handleSubmit},c["default"].createElement("div",{className:"form-group"},c["default"].createElement("div",{className:"control-input"},c["default"].createElement("input",{type:"password",className:"form-control",placeholder:gettext("Enter new password"),disabled:this.state.isLoading,onChange:this.bindInput("password"),value:this.state.password}))),c["default"].createElement(b["default"],{className:"btn-primary btn-block",loading:this.state.isLoading},gettext("Change password"))))}}]),t}(y["default"]),R=a.PasswordChangedPage=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"getMessage",value:function(){return interpolate(gettext("%(username)s, your password has been changed successfully."),{username:this.props.user.username},!0)}},{key:"showSignIn",value:function(){j["default"].show(_["default"])}},{key:"render",value:function(){return c["default"].createElement("div",{className:"page page-message page-message-success page-forgotten-password-changed"},c["default"].createElement("div",{className:"container"},c["default"].createElement("div",{className:"message-panel"},c["default"].createElement("div",{className:"message-icon"},c["default"].createElement("span",{className:"material-icon"},"check")),c["default"].createElement("div",{className:"message-body"},c["default"].createElement("p",{className:"lead"},this.getMessage()),c["default"].createElement("p",null,gettext("You will have to sign in using new password before continuing.")),c["default"].createElement("p",null,c["default"].createElement("button",{type:"button",className:"btn btn-primary",onClick:this.showSignIn},gettext("Sign in")))))))}}]),t}(c["default"].Component),A=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.complete=function(e){k["default"].softSignOut(),$('#hidden-login-form input[name="redirect_to"]').remove(),f["default"].render(c["default"].createElement(R,{user:e}),document.getElementById("page-mount"))},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){return c["default"].createElement(L,{callback:this.complete})}}]),t}(c["default"].Component);a["default"]=A},{"../index":234,"../services/ajax":293,"../services/auth":294,"../services/modal":299,"../services/snackbar":303,"../utils/banned-page":306,"../utils/validators":320,"./button":5,"./form":41,"./sign-in.js":153,react:"react","react-dom":"react-dom"}],145:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../.."),d=r(c),f=e("../form"),p=r(f),h=e("../../reducers/posts"),m=e("../../reducers/search"),b=e("../../reducers/users"),v=e("../../services/ajax"),y=r(v),g=e("../../services/snackbar"),_=r(g),E=e("../../services/store"),w=r(E),O=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onQueryChange=function(e){a.changeValue("query",e.target.value)},a.state={isLoading:!1,query:e.search.query},a}return s(t,e),l(t,[{key:"clean",value:function(){return!!this.state.query.trim().length||(_["default"].error(gettext("You have to enter search query.")),!1)}},{key:"send",value:function(){return w["default"].dispatch((0,m.update)({isLoading:!0})),y["default"].get(d["default"].get("SEARCH_API"),{q:this.state.query.trim()})}},{key:"handleSuccess",value:function(e){w["default"].dispatch((0,m.update)({query:this.state.query.trim(),isLoading:!1,providers:e})),e.forEach(function(e){"users"===e.id?w["default"].dispatch((0,b.hydrate)(e.results.results)):"threads"===e.id&&w["default"].dispatch((0,h.load)(e.results))})}},{key:"handleError",value:function(e){_["default"].apiError(e),w["default"].dispatch((0,m.update)({isLoading:!1}))}},{key:"render",value:function(){return u["default"].createElement("div",{className:"page-header"},u["default"].createElement("form",{onSubmit:this.handleSubmit},u["default"].createElement("div",{className:"container"},u["default"].createElement("div",{className:"row"},u["default"].createElement("div",{className:"col-md-3"},u["default"].createElement("h1",null,gettext("Search"))),u["default"].createElement("div",{className:"col-md-7"},u["default"].createElement("div",{className:"form-group"},u["default"].createElement("input",{className:"form-control",disabled:this.props.search.isLoading||this.state.isLoading,onChange:this.onQueryChange,type:"text",value:this.state.query}))),u["default"].createElement("div",{className:"col-md-2"},u["default"].createElement("button",{className:"btn btn-primary btn-block",disabled:this.props.search.isLoading||this.state.isLoading},gettext("Search")))))))}}]),t}(p["default"]);a["default"]=O},{"../..":234,"../../reducers/posts":283,"../../reducers/search":285,"../../reducers/users":292,"../../services/ajax":293,"../../services/snackbar":303,"../../services/store":304,"../form":41,react:"react"}],146:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return{posts:e.posts,search:e.search,tick:e.tick.tick,user:e.auth.user,users:e.users}}Object.defineProperty(a,"__esModule",{value:!0}),a.select=n,a["default"]=function(e){return e.map(function(e){return{path:e.url,component:(0,o.connect)(n)(c[e.id]),provider:e}})};var o=e("react-redux"),s=e("./threads"),l=r(s),i=e("./users"),u=r(i),c={threads:l["default"],users:u["default"]}},{"./threads":149,"./users":151,"react-redux":"react-redux"}],147:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=null;if(e.search.providers.forEach(function(a){a.id===e.provider.id&&(t=a.time)}),null===t)return null;var a=gettext("Search took %(time)s s to complete");return s["default"].createElement("footer",{className:"search-footer"},s["default"].createElement("p",null,interpolate(a,{time:t},!0)))}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return s["default"].createElement("div",{className:"page page-search"},s["default"].createElement(i["default"],{provider:e.provider,search:e.search}),s["default"].createElement("div",{className:"container"},s["default"].createElement("div",{className:"row"},s["default"].createElement("div",{className:"col-md-3"},s["default"].createElement(c["default"],{providers:e.search.providers})),s["default"].createElement("div",{className:"col-md-9"},e.children,s["default"].createElement(n,{provider:e.provider,search:e.search})))))},a.SearchTime=n;var o=e("react"),s=r(o),l=e("./form"),i=r(l),u=e("./sidenav"),c=r(u)},{"./form":145,"./sidenav":148,react:"react"}],148:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(!e.results)return null;var t=e.results.count;return t>1e6?t=Math.ceil(t/1e6)+"KK":t>1e3&&(t=Math.ceil(t/1e3)+"K"),s["default"].createElement("span",{className:"badge"},t)}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return s["default"].createElement("div",{className:"list-group nav-side"},e.providers.map(function(e){return s["default"].createElement(l.Link,{activeClassName:"active",className:"list-group-item",key:e.id,to:e.url},e.name,s["default"].createElement(n,{results:e.results}))}))},a.Badge=n;var o=e("react"),s=r(o),l=e("react-router")},{react:"react","react-router":"react-router"}],149:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return e.posts&&e.posts.count?e.children:e.query.length?l["default"].createElement("p",{className:"lead"},gettext("No threads matching search query have been found.")):l["default"].createElement("p",{className:"lead"},gettext("Enter at least two characters to search threads."))}Object.defineProperty(a,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a["default"]=function(e){return l["default"].createElement(u["default"],{provider:e.route.provider,search:e.search},l["default"].createElement(n,{query:e.search.query,posts:e.posts},l["default"].createElement(d["default"],o({provider:e.route.provider,query:e.search.query},e.posts))))},a.Blankslate=n;var s=e("react"),l=r(s),i=e("../page"),u=r(i),c=e("./results"),d=r(c)},{"../page":147,"./results":150,react:"react"}],150:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return m["default"].createElement("li",{className:"list-group-item"},m["default"].createElement("h4",null,m["default"].createElement("a",{href:e.url.index,className:"item-title"},e.thread.title)),m["default"].createElement(i,{content:e.content}),m["default"].createElement("ul",{className:"list-inline list-unstyled"},m["default"].createElement(c,e),m["default"].createElement(d,e),m["default"].createElement(u,e.category)))}function i(e){return e.content?m["default"].createElement(g["default"],{markup:e.content}):null}function u(e){return m["default"].createElement("li",null,m["default"].createElement("a",{href:e.absolute_url},e.name))}function c(e){return e.poster?m["default"].createElement("li",null,m["default"].createElement("a",{href:e.poster.url,className:"item-title"},e.poster.username)):m["default"].createElement("li",null,e.poster_namer)}function d(e){var t=interpolate(gettext("posted %(posted_on)s"),{posted_on:e.posted_on.format("LL, LT")},!0),a=interpolate(gettext("posted %(posted_on)s"),{posted_on:e.posted_on.fromNow()},!0);return m["default"].createElement("li",null,m["default"].createElement("abbr",{title:t},a))}Object.defineProperty(a,"__esModule",{value:!0}),a.LoadMore=void 0;var f=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a["default"]=function(e){return m["default"].createElement("div",null,m["default"].createElement("ul",{className:"list-group"},e.results.map(function(e){return m["default"].createElement(l,p({key:e.id},e))})),m["default"].createElement(P,e))},a.Post=l,a.PostContent=i,a.Category=u,a.Poster=c,a.Timestamp=d;var h=e("react"),m=r(h),b=e("../../button"),v=r(b),y=e("../../misago-markup"),g=r(y),_=e("../../../reducers/posts"),E=e("../../../reducers/search"),w=e("../../../services/ajax"),O=r(w),k=e("../../../services/snackbar"),N=r(k),j=e("../../../services/store"),x=r(j),P=a.LoadMore=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){x["default"].dispatch((0,_.update)({isBusy:!0})),O["default"].get(r.props.provider.api,{q:r.props.query,page:r.props.next}).then(function(e){e.forEach(function(e){"threads"===e.id&&(x["default"].dispatch((0,_.append)(e.results)),x["default"].dispatch((0,E.updateProvider)(e)))}),x["default"].dispatch((0,_.update)({isBusy:!1}))},function(e){N["default"].apiError(e),x["default"].dispatch((0,_.update)({isBusy:!1}))})},s=a,o(r,s)}return s(t,e),f(t,[{key:"render",value:function(){return this.props.more?m["default"].createElement("div",{className:"pager-more"},m["default"].createElement(v["default"],{loading:this.props.isBusy,onClick:this.onClick},gettext("Show more"))):null}}]),t}(m["default"].Component)},{"../../../reducers/posts":283,"../../../reducers/search":285,"../../../services/ajax":293,"../../../services/snackbar":303,"../../../services/store":304,"../../button":5,"../../misago-markup":45,react:"react"}],151:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return e.users.length?e.children:e.query.length?s["default"].createElement("p",{className:"lead"},gettext("No users matching search query have been found.")):s["default"].createElement("p",{className:"lead"},gettext("Enter at least two characters to search users."))}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return s["default"].createElement(i["default"],{provider:e.route.provider,search:e.search},s["default"].createElement(n,{query:e.search.query,users:e.users},s["default"].createElement(c["default"],{isLoaded:!0,cols:2,users:e.users})))},a.Blankslate=n;var o=e("react"),s=r(o),l=e("../page"),i=r(l),u=e("../../users-list/root"),c=r(u)},{"../../users-list/root":217,"../page":147,react:"react"}],152:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.change=function(e){return function(){r.props.onChange({target:{value:e}})}},s=a,o(r,s)}return s(t,e),l(t,[{key:"getChoice",value:function(){var e=this,t=null;return this.props.choices.map(function(a){a.value===e.props.value&&(t=a)}),t}},{key:"getIcon",value:function(){return this.getChoice().icon}},{key:"getLabel",value:function(){return this.getChoice().label}},{key:"render",value:function(){var e=this;return u["default"].createElement("div",{className:"btn-group btn-select-group"},u["default"].createElement("button",{type:"button",className:"btn btn-select dropdown-toggle",id:this.props.id||null,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false","aria-describedby":this.props["aria-describedby"]||null,disabled:this.props.disabled||!1},u["default"].createElement("span",{className:"material-icon"},this.getIcon()),this.getLabel()),u["default"].createElement("ul",{className:"dropdown-menu"},this.props.choices.map(function(t,a){return u["default"].createElement("li",{key:a},u["default"].createElement("button",{type:"button",className:"btn-link",onClick:e.change(t.value)},u["default"].createElement("span",{className:"material-icon"},t.icon),t.label))})))}}]),t}(u["default"].Component);a["default"]=c},{react:"react"}],153:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../index"),d=r(c),f=e("./button"),p=r(f),h=e("./form"),m=r(h),b=e("../services/ajax"),v=r(b),y=e("../services/modal"),g=r(y),_=e("../services/snackbar"),E=r(_),w=e("../utils/banned-page"),O=r(w),k=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isLoading:!1,showActivation:!1,username:"",password:"",validators:{username:[],password:[]}},a}return s(t,e),l(t,[{key:"clean",value:function(){return!!this.isValid()||(E["default"].error(gettext("Fill out both fields.")),!1)}},{key:"send",value:function(){return v["default"].post(d["default"].get("AUTH_API"),{username:this.state.username,password:this.state.password})}},{key:"handleSuccess",value:function(){var e=$("#hidden-login-form");e.append('<input type="text" name="username" />'),e.append('<input type="password" name="password" />'),e.find('input[type="hidden"]').val(v["default"].getCsrfToken()),e.find('input[name="redirect_to"]').val(window.location.pathname),e.find('input[name="username"]').val(this.state.username),e.find('input[name="password"]').val(this.state.password),e.submit(),this.setState({isLoading:!0})}},{key:"handleError",value:function(e){400===e.status?"inactive_admin"===e.code?E["default"].info(e.detail):"inactive_user"===e.code?(E["default"].info(e.detail),this.setState({showActivation:!0})):"banned"===e.code?((0,O["default"])(e.detail),g["default"].hide()):E["default"].error(e.detail):403===e.status&&e.ban?((0,O["default"])(e.ban),g["default"].hide()):E["default"].apiError(e)}},{key:"getActivationButton",value:function(){return this.state.showActivation?u["default"].createElement("a",{href:d["default"].get("REQUEST_ACTIVATION_URL"),className:"btn btn-success btn-block"},gettext("Activate account")):null}},{key:"render",value:function(){return u["default"].createElement("div",{className:"modal-dialog modal-sm modal-sign-in",role:"document"},u["default"].createElement("div",{className:"modal-content"},u["default"].createElement("div",{className:"modal-header"},u["default"].createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},u["default"].createElement("span",{"aria-hidden":"true"},"×")),u["default"].createElement("h4",{className:"modal-title"},gettext("Sign in"))),u["default"].createElement("form",{onSubmit:this.handleSubmit},u["default"].createElement("div",{className:"modal-body"},u["default"].createElement("div",{className:"form-group"},u["default"].createElement("div",{className:"control-input"},u["default"].createElement("input",{id:"id_username",className:"form-control",type:"text",disabled:this.state.isLoading,placeholder:gettext("Username or e-mail"),onChange:this.bindInput("username"),value:this.state.username}))),u["default"].createElement("div",{className:"form-group"},u["default"].createElement("div",{className:"control-input"},u["default"].createElement("input",{id:"id_password",className:"form-control",type:"password",disabled:this.state.isLoading,placeholder:gettext("Password"),onChange:this.bindInput("password"),value:this.state.password})))),u["default"].createElement("div",{className:"modal-footer"},this.getActivationButton(),u["default"].createElement(p["default"],{className:"btn-primary btn-block",loading:this.state.isLoading},gettext("Sign in")),u["default"].createElement("a",{href:d["default"].get("FORGOTTEN_PASSWORD_URL"),className:"btn btn-default btn-block"},gettext("Forgot password?"))))))}}]),t}(m["default"]);a["default"]=k},{"../index":234,"../services/ajax":293,"../services/modal":299,"../services/snackbar":303,"../utils/banned-page":306,"./button":5,"./form":41,react:"react"}],154:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return e.snackbar}Object.defineProperty(a,"__esModule",{value:!0}),a.Snackbar=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.select=l;var u=e("react"),c=r(u),d={info:"alert-info",success:"alert-success",warning:"alert-warning",error:"alert-danger"};a.Snackbar=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"getSnackbarClass",value:function(){var e="alerts-snackbar";return e+=this.props.isVisible?" in":" out"}},{key:"render",value:function(){return c["default"].createElement("div",{className:this.getSnackbarClass()},c["default"].createElement("p",{className:"alert "+d[this.props.type]},this.props.message))}}]),t}(c["default"].Component)},{react:"react"}],155:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return s["default"].createElement("li",null,s["default"].createElement("a",{href:e.node.absolute_url},e.node.name))}Object.defineProperty(a,"__esModule",{value:!0}),a.Breadcrumb=n,a["default"]=function(e){return s["default"].createElement("div",{className:"page-breadcrumbs"},s["default"].createElement("div",{className:"container"},s["default"].createElement("ol",{className:"breadcrumb"},e.path.map(function(e){return s["default"].createElement(n,{key:e.id,node:e})}))))};var o=e("react"),s=r(o)},{react:"react"}],156:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return e.user.id&&(0,u.isModerationVisible)(e.thread)?s["default"].createElement("div",{className:"btn-group pull-right"},s["default"].createElement("button",{"aria-expanded":"false","aria-haspopup":"true",className:"btn btn-default dropdown-toggle","data-toggle":"dropdown",disabled:e.thread.isBusy,type:"button"},s["default"].createElement("span",{className:"material-icon"},"settings"),gettext("Moderation")),s["default"].createElement(u.ModerationControls,{posts:e.posts,thread:e.thread,user:e.user})):null}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return s["default"].createElement("div",{className:"page-header with-stats with-breadcrumbs"},s["default"].createElement(i["default"],{path:e.thread.path}),s["default"].createElement("div",{className:"container"},s["default"].createElement("div",{className:"row"},s["default"].createElement("div",{className:"col-md-10"},s["default"].createElement(p["default"],{thread:e.thread,user:e.user})),s["default"].createElement("div",{className:"col-md-2"},s["default"].createElement(n,{posts:e.posts,thread:e.thread,user:e.user})))),s["default"].createElement(d["default"],{thread:e.thread}))},a.Moderation=n;var o=e("react"),s=r(o),l=e("./breadcrumbs"),i=r(l),u=e("../moderation/thread"),c=e("./stats"),d=r(c),f=e("./title"),p=r(f)},{"../moderation/thread":165,"./breadcrumbs":155,"./stats":157,"./title":158,react:"react"}],157:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return 2==e.thread.weight?d["default"].createElement("li",{className:"thread-pinned-globally"},d["default"].createElement("span",{className:"material-icon"},"bookmark"),d["default"].createElement("span",{className:"icon-legend"},gettext("Pinned globally"))):1==e.thread.weight?d["default"].createElement("li",{className:"thread-pinned-locally"},d["default"].createElement("span",{className:"material-icon"},"bookmark_border"),d["default"].createElement("span",{className:"icon-legend"},gettext("Pinned locally"))):null}function o(e){return e.thread.is_unapproved?d["default"].createElement("li",{className:"thread-unapproved"},d["default"].createElement("span",{className:"material-icon"},"remove_circle"),d["default"].createElement("span",{className:"icon-legend"},gettext("Unapproved"))):e.thread.has_unapproved_posts?d["default"].createElement("li",{className:"thread-unapproved-posts"},d["default"].createElement("span",{className:"material-icon"},"remove_circle_outline"),d["default"].createElement("span",{className:"icon-legend"},gettext("Unapproved posts"))):null}function s(e){return e.thread.is_hidden?d["default"].createElement("li",{className:"thread-hidden"},d["default"].createElement("span",{className:"material-icon"},"visibility_off"),d["default"].createElement("span",{className:"icon-legend"},gettext("Hidden"))):null}function l(e){return e.thread.is_closed?d["default"].createElement("li",{className:"thread-closed"},d["default"].createElement("span",{className:"material-icon"},"lock_outline"),d["default"].createElement("span",{className:"icon-legend"},gettext("Closed"))):null}function i(e){var t=ngettext("%(replies)s reply","%(replies)s replies",e.thread.replies),a=interpolate(t,{replies:e.thread.replies},!0);return d["default"].createElement("li",{className:"thread-replies"},d["default"].createElement("span",{className:"material-icon"},"forum"),d["default"].createElement("span",{className:"icon-legend"},a))}function u(e){var t=null;t=e.thread.url.last_poster?interpolate(h,{url:(0,p["default"])(e.thread.url.last_poster),user:(0,p["default"])(e.thread.last_poster_name)},!0):interpolate(m,{user:(0,p["default"])(e.thread.last_poster_name)},!0);var a=interpolate(b,{absolute:(0,p["default"])(e.thread.last_post_on.format("LLL")),relative:(0,p["default"])(e.thread.last_post_on.fromNow())},!0),r=interpolate((0,p["default"])(gettext("last reply by %(user)s %(date)s")),{date:a,user:t},!0);return d["default"].createElement("li",{className:"thread-last-reply",dangerouslySetInnerHTML:{__html:r}})}Object.defineProperty(a,"__esModule",{value:!0}),a.Weight=n,a.Unapproved=o,a.IsHidden=s,a.IsClosed=l,a.Replies=i,a.LastReply=u,a["default"]=function(e){return d["default"].createElement("div",{className:"header-stats"},d["default"].createElement("div",{className:"container"},d["default"].createElement("ul",{className:"list-inline"},d["default"].createElement(n,{thread:e.thread}),d["default"].createElement(o,{thread:e.thread}),d["default"].createElement(s,{thread:e.thread}),d["default"].createElement(l,{thread:e.thread}),d["default"].createElement(i,{thread:e.thread}),d["default"].createElement(u,{thread:e.thread}))))};var c=e("react"),d=r(c),f=e("../../../utils/escape-html"),p=r(f),h='<a href="%(url)s" class="poster-title">%(user)s</a>',m='<span class="poster-title">%(user)s</span>',b='<abbr class="last-title" title="%(absolute)s">%(relative)s</abbr>'},{"../../../utils/escape-html":310,react:"react"}],158:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../../form"),f=n(d),p=e("../../posting/utils/validators"),h=e("../../../reducers/thread"),m=r(h),b=e("../../../services/ajax"),v=n(b),y=e("../../../services/snackbar"),g=n(y),_=e("../../../services/store"),E=n(_),w=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onChange=function(e){a.changeValue("title",e.target.value)},a.onEdit=function(){a.setState({isEditing:!0})},a.onCancel=function(){a.setState({title:a.props.thread.title,isEditing:!1})},a.state={isEditing:!1,isLoading:!1,title:e.thread.title,validators:{title:(0,p.getTitleValidators)()},errors:{}},a}return l(t,e),i(t,[{key:"clean",value:function(){if(!this.state.title.trim().length)return g["default"].error(gettext("You have to enter thread title.")),!1;var e=this.validate();return!e.title||(g["default"].error(e.title[0]),!1)}},{key:"send",value:function(){return v["default"].patch(this.props.thread.api.index,[{op:"replace",path:"title",value:this.state.title}])}},{key:"handleSuccess",value:function(e){E["default"].dispatch(m.update(e)),this.setState({isEditing:!1})}},{key:"handleError",value:function(e){400===e.status?console.log(e):g["default"].apiError(e)}},{key:"render",value:function(){return this.state.isEditing?c["default"].createElement("form",{onSubmit:this.handleSubmit,className:"title-edit-form"},c["default"].createElement("div",{className:"input-group"},c["default"].createElement("input",{className:"form-control",type:"text",value:this.state.title,onChange:this.onChange}),c["default"].createElement("span",{className:"input-group-btn"},c["default"].createElement("button",{className:"btn btn-success",disabled:this.state.isLoading,title:gettext("Change title")},gettext("Save changes")),c["default"].createElement("button",{className:"btn btn-default",disabled:this.state.isLoading,onClick:this.onCancel,title:gettext("Cancel"),type:"button"},gettext("Cancel"))))):this.props.user.id&&this.props.thread.acl.can_edit?c["default"].createElement("div",{className:"title-editable"},c["default"].createElement("h1",null,this.props.thread.title),c["default"].createElement("button",{className:"btn btn-default",onClick:this.onEdit,title:gettext("Edit title"),type:"button"},c["default"].createElement("span",{className:"material-icon"},"edit"))):c["default"].createElement("h1",null,this.props.thread.title)}}]),t}(f["default"]);a["default"]=w},{"../../../reducers/thread":288,"../../../services/ajax":293,"../../../services/snackbar":303,"../../../services/store":304,"../../form":41,"../../posting/utils/validators":99,react:"react"}],159:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){e.selection.forEach(function(e){k["default"].dispatch(b.patch(e,{is_unapproved:!1}));var t=[{op:"replace",path:"is-unapproved",value:!1}],a={is_unapproved:e.is_unapproved};c(e,t,a)}),k["default"].dispatch(y.deselectAll())}function s(e){e.selection.forEach(function(e){k["default"].dispatch(b.patch(e,{is_protected:!1}));var t=[{op:"replace",path:"is-protected",value:!0}],a={is_protected:e.is_protected};c(e,t,a)}),k["default"].dispatch(y.deselectAll())}function l(e){e.selection.forEach(function(e){k["default"].dispatch(b.patch(e,{is_protected:!1}));var t=[{op:"replace",path:"is-protected",value:!1}],a={is_protected:e.is_protected};c(e,t,a)}),k["default"].dispatch(y.deselectAll())}function i(e){e.selection.forEach(function(t){k["default"].dispatch(b.patch(t,{is_hidden:!0,hidden_on:(0,h["default"])(),hidden_by_name:e.user.username,url:Object.assign(t.url,{hidden_by:e.user.absolute_url})}));var a=[{op:"replace",path:"is-hidden",value:!0}],r={is_hidden:t.is_hidden,hidden_on:t.hidden_on,hidden_by_name:t.hidden_by_name,url:t.url};c(t,a,r)}),k["default"].dispatch(y.deselectAll())}function u(e){e.selection.forEach(function(e){k["default"].dispatch(b.patch(e,{is_hidden:!1}));var t=[{op:"replace",path:"is-hidden",value:!1}],a={is_hidden:e.is_hidden};c(e,t,a)}),k["default"].dispatch(y.deselectAll())}function c(e,t,a){_["default"].patch(e.api.index,t).then(function(t){k["default"].dispatch(b.patch(e,t))},function(t){400===t.status?w["default"].error(t.detail[0]):w["default"].apiError(t),k["default"].dispatch(b.patch(e,a))})}function d(e){var t=confirm(gettext("Are you sure you want to merge selected posts? This action is not reversible!"));t&&(e.selection.slice(1).map(function(e){k["default"].dispatch(b.patch(e,{isDeleted:!0}))}),_["default"].post(e.thread.api.posts.merge,{posts:e.selection.map(function(e){return e.id})}).then(function(e){k["default"].dispatch(b.patch(e,b.hydrate(e)))},function(t){400===t.status?w["default"].error(t.detail):w["default"].apiError(t),e.selection.slice(1).map(function(e){k["default"].dispatch(b.patch(e,{isDeleted:!1}))})}),k["default"].dispatch(y.deselectAll()))}function f(e){var t=confirm(gettext("Are you sure you want to delete selected posts? This action is not reversible!"));t&&(e.selection.forEach(function(e){k["default"].dispatch(b.patch(e,{isDeleted:!0})),_["default"]["delete"](e.api.index).then(function(){},function(t){400===t.status?w["default"].error(t.detail):w["default"].apiError(t),k["default"].dispatch(b.patch(e,{isDeleted:!1}))})}),k["default"].dispatch(y.deselectAll()))}Object.defineProperty(a,"__esModule",{value:!0}),a.approve=o,a.protect=s,a.unprotect=l,a.hide=i,a.unhide=u,a.patch=c,a.merge=d,a.remove=f;var p=e("moment"),h=n(p),m=e("../../../../reducers/post"),b=r(m),v=e("../../../../reducers/posts"),y=r(v),g=e("../../../../services/ajax"),_=n(g),E=e("../../../../services/snackbar"),w=n(E),O=e("../../../../services/store"),k=n(O)},{"../../../../reducers/post":282,"../../../../reducers/posts":283,"../../../../services/ajax":293,"../../../../services/snackbar":303,"../../../../services/store":304,moment:"moment"}],160:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0}),a.Delete=a.Unhide=a.Hide=a.Unprotect=a.Protect=a.Split=a.Move=a.Merge=a.Approve=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a["default"]=function(e){return c["default"].createElement("ul",{className:"dropdown-menu dropdown-menu-right"},c["default"].createElement(g,e),c["default"].createElement(_,e),c["default"].createElement(E,e),c["default"].createElement(w,e),c["default"].createElement(O,e),c["default"].createElement(k,e),c["default"].createElement(N,e),c["default"].createElement(j,e),c["default"].createElement(x,e))};var u=e("react"),c=n(u),d=e("../../../../services/modal"),f=n(d),p=e("./actions"),h=r(p),m=e("./move"),b=n(m),v=e("./split"),y=n(v),g=a.Approve=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){h.approve(r.props)},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props.selection.find(function(e){return e.acl.can_approve});return e?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Approve"))):null}}]),t}(c["default"].Component),_=a.Merge=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){h.merge(r.props)},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){return this.props.selection.length<2||!this.props.thread.acl.can_merge_posts?null:c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Merge")))}}]),t}(c["default"].Component),E=a.Move=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){f["default"].show(c["default"].createElement(b["default"],r.props))},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props.selection.find(function(e){return e.acl.can_move});return e?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Move"))):null}}]),t}(c["default"].Component),w=a.Split=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){f["default"].show(c["default"].createElement(y["default"],r.props))},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props.selection.find(function(e){return e.acl.can_move});return e?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Split"))):null}}]),t}(c["default"].Component),O=a.Protect=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){h.protect(r.props)},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props.selection.find(function(e){return e.acl.can_protect});return e?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Protect"))):null}}]),t}(c["default"].Component),k=a.Unprotect=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){h.unprotect(r.props)},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props.selection.find(function(e){return e.acl.can_protect});return e?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Unprotect"))):null}}]),t}(c["default"].Component),N=a.Hide=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){h.hide(r.props)},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props.selection.find(function(e){return e.acl.can_hide});return e?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Hide"))):null}}]),t}(c["default"].Component),j=a.Unhide=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){h.unhide(r.props)},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props.selection.find(function(e){return e.acl.can_unhide});return e?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Unhide"))):null}}]),t}(c["default"].Component),x=a.Delete=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){h.remove(r.props)},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props.selection.find(function(e){return e.acl.can_delete});return e?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Delete"))):null}}]),t}(c["default"].Component)},{"../../../../services/modal":299,"./actions":159,"./move":162,"./split":163,react:"react"}],161:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(e.acl.can_merge_posts&&t.length>1)return!0;var a=!1;return t.forEach(function(e){if(!e.is_event){var t=e.acl.can_approve||e.acl.can_delete||!e.is_hidden&&e.acl.can_hide||e.acl.can_move||e.acl.can_protect||e.is_hidden&&e.acl.can_unhide||e.acl.can_unprotect;t&&(a=!0)}}),a}Object.defineProperty(a,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a["default"]=function(e){if(!e.user.id||!n(e.thread,e.posts.results))return null;var t=e.posts.results.filter(function(e){return e.isSelected});return l["default"].createElement("div",{className:"pull-right dropup"},l["default"].createElement("button",{"aria-expanded":"true","aria-haspopup":"true",className:"btn btn-default btn-icon dropdown-toggle","data-toggle":"dropdown",disabled:!t.length,type:"button"},gettext("Posts options")),l["default"].createElement(u["default"],o({selection:t},e)))},a.isVisible=n;var s=e("react"),l=r(s),i=e("./dropdown"),u=r(i)},{"./dropdown":160,react:"react"}],162:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return d["default"].createElement("div",{className:"modal-header"},d["default"].createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},d["default"].createElement("span",{"aria-hidden":"true"},"×")),d["default"].createElement("h4",{className:"modal-title"},gettext("Move posts")))}Object.defineProperty(a,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.ModalHeader=i;var c=e("react"),d=n(c),f=e("../../../button"),p=(n(f),e("../../../form")),h=n(p),m=e("../../../form-group"),b=n(m),v=e("../../../../reducers/post"),y=r(v),g=e("../../../../services/ajax"),_=n(g),E=e("../../../../services/modal"),w=n(E),O=e("../../../../services/snackbar"),k=n(O),N=e("../../../../services/store"),j=n(N),x=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onUrlChange=function(e){a.changeValue("url",e.target.value)},a.state={isLoading:!1,url:"",validators:{url:[]},errors:{}},a}return l(t,e),u(t,[{key:"clean",value:function(){return!!this.state.url.trim().length||(k["default"].error(gettext("You have to enter link to the other thread.")),!1)}},{key:"send",value:function(){return _["default"].post(this.props.thread.api.posts.move,{thread_url:this.state.url,posts:this.props.selection.map(function(e){return e.id})})}},{key:"handleSuccess",value:function(e){this.props.selection.forEach(function(e){j["default"].dispatch(y.patch(e,{isDeleted:!0}))}),w["default"].hide(),k["default"].success(gettext("Selected posts were moved to the other thread."))}},{key:"handleError",value:function(e){400===e.status?k["default"].error(e.detail):k["default"].apiError(e)}},{key:"render",value:function(){return d["default"].createElement("div",{className:"modal-dialog",role:"document"},d["default"].createElement("form",{onSubmit:this.handleSubmit},d["default"].createElement("div",{className:"modal-content"},d["default"].createElement(i,null),d["default"].createElement("div",{className:"modal-body"},d["default"].createElement(b["default"],{"for":"id_url",label:gettext("Link to thread you want to move posts to")},d["default"].createElement("input",{className:"form-control",disabled:this.state.isLoading,id:"id_url",onChange:this.onUrlChange,value:this.state.url}))),d["default"].createElement("div",{className:"modal-footer"},d["default"].createElement("button",{className:"btn btn-primary",loading:this.state.isLoading},gettext("Move posts"))))))}}]),t}(h["default"]);a["default"]=x},{"../../../../reducers/post":282,"../../../../services/ajax":293,"../../../../services/modal":299,"../../../../services/snackbar":303,"../../../../services/store":304,"../../../button":5,"../../../form":41,"../../../form-group":40,react:"react"}],163:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(){return h["default"].createElement(c,{className:"modal-dialog"},h["default"].createElement(k["default"],null))}function u(e){return h["default"].createElement(c,{className:"modal-dialog modal-message"},h["default"].createElement("div",{className:"message-icon"},h["default"].createElement("span",{className:"material-icon"
},"info_outline")),h["default"].createElement("div",{className:"message-body"},h["default"].createElement("p",{className:"lead"},gettext("You can't move selected posts at the moment.")),h["default"].createElement("p",null,e.message)))}function c(e){return h["default"].createElement("div",{className:e.className,role:"document"},h["default"].createElement("div",{className:"modal-content"},h["default"].createElement("div",{className:"modal-header"},h["default"].createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},h["default"].createElement("span",{"aria-hidden":"true"},"×")),h["default"].createElement("h4",{className:"modal-title"},gettext("Split posts into new thread"))),e.children))}Object.defineProperty(a,"__esModule",{value:!0}),a.ModerationForm=a.PostingConfig=void 0;var d=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a["default"]=function(e){return h["default"].createElement(B,f({},e,{Form:H}))},a.Loader=i,a.Error=u,a.Modal=c;var p=e("react"),h=n(p),m=e("../../../button"),b=n(m),v=e("../../../form"),y=n(v),g=e("../../../form-group"),_=n(g),E=e("../../../category-select"),w=n(E),O=e("../../../modal-loader"),k=n(O),N=e("../../../select"),j=n(N),x=e("../../../../reducers/post"),P=r(x),C=e("../../../../services/ajax"),S=n(C),T=e("../../../../services/modal"),M=n(T),L=e("../../../../services/snackbar"),R=n(L),A=e("../../../../services/store"),I=n(A),D=e("../../../../utils/validators"),U=r(D),B=a.PostingConfig=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isLoaded:!1,isError:!1,categories:[]},a}return l(t,e),d(t,[{key:"componentDidMount",value:function(){var e=this;S["default"].get(misago.get("THREAD_EDITOR_URL")).then(function(t){var a=t.map(function(e){return Object.assign(e,{disabled:e.post===!1,label:e.name,value:e.id,post:e.post})});e.setState({isLoaded:!0,categories:a})},function(t){e.setState({isError:t.detail})})}},{key:"render",value:function(){return this.state.isError?h["default"].createElement(u,{message:this.state.isError}):this.state.isLoaded?h["default"].createElement(H,f({},this.props,{categories:this.state.categories})):h["default"].createElement(i,null)}}]),t}(h["default"].Component),H=a.ModerationForm=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onCategoryChange=function(e){var t=e.target.value,r={category:t};a.acl[t].can_pin_threads<r.weight&&(r.weight=0),a.acl[t].can_hide_threads||(r.is_hidden=0),a.acl[t].can_close_threads||(r.is_closed=!1),a.setState(r)},a.state={isLoading:!1,title:"",category:null,categories:e.categories,weight:0,is_hidden:0,is_closed:!1,validators:{title:[U.required()]},errors:{}},a.isHiddenChoices=[{value:0,icon:"visibility",label:gettext("No")},{value:1,icon:"visibility_off",label:gettext("Yes")}],a.isClosedChoices=[{value:!1,icon:"lock_outline",label:gettext("No")},{value:!0,icon:"lock",label:gettext("Yes")}],a.acl={},a.props.categories.forEach(function(e){e.post&&(a.state.category||(a.state.category=e.id),a.acl[e.id]={can_pin_threads:e.post.pin,can_close_threads:e.post.close,can_hide_threads:e.post.hide})}),a}return l(t,e),d(t,[{key:"clean",value:function(){return!!this.isValid()||(R["default"].error(gettext("Form contains errors.")),this.setState({errors:this.validate()}),!1)}},{key:"send",value:function(){return S["default"].post(this.props.thread.api.posts.split,{title:this.state.title,category:this.state.category,weight:this.state.weight,is_hidden:this.state.is_hidden,is_closed:this.state.is_closed,posts:this.props.selection.map(function(e){return e.id})})}},{key:"handleSuccess",value:function(e){this.props.selection.forEach(function(e){I["default"].dispatch(P.patch(e,{isDeleted:!0}))}),M["default"].hide(),R["default"].success(gettext("Selected posts were split into new thread."))}},{key:"handleError",value:function(e){400===e.status?(this.setState({errors:Object.assign({},this.state.errors,e)}),R["default"].error(gettext("Form contains errors."))):403===e.status&&Array.isArray(e)?M["default"].show(h["default"].createElement(ErrorsModal,{errors:e})):R["default"].apiError(e)}},{key:"getWeightChoices",value:function(){var e=[{value:0,icon:"remove",label:gettext("Not pinned")},{value:1,icon:"bookmark_border",label:gettext("Pinned locally")}];return 2==this.acl[this.state.category].can_pin_threads&&e.push({value:2,icon:"bookmark",label:gettext("Pinned globally")}),e}},{key:"renderWeightField",value:function(){return this.acl[this.state.category].can_pin_threads?h["default"].createElement(_["default"],{label:gettext("Thread weight"),"for":"id_weight",labelClass:"col-sm-4",controlClass:"col-sm-8"},h["default"].createElement(j["default"],{id:"id_weight",onChange:this.bindInput("weight"),value:this.state.weight,choices:this.getWeightChoices()})):null}},{key:"renderHiddenField",value:function(){return this.acl[this.state.category].can_hide_threads?h["default"].createElement(_["default"],{label:gettext("Hide thread"),"for":"id_is_hidden",labelClass:"col-sm-4",controlClass:"col-sm-8"},h["default"].createElement(j["default"],{id:"id_is_closed",onChange:this.bindInput("is_hidden"),value:this.state.is_hidden,choices:this.isHiddenChoices})):null}},{key:"renderClosedField",value:function(){return this.acl[this.state.category].can_close_threads?h["default"].createElement(_["default"],{label:gettext("Close thread"),"for":"id_is_closed",labelClass:"col-sm-4",controlClass:"col-sm-8"},h["default"].createElement(j["default"],{id:"id_is_closed",onChange:this.bindInput("is_closed"),value:this.state.is_closed,choices:this.isClosedChoices})):null}},{key:"render",value:function(){return h["default"].createElement(c,{className:"modal-dialog"},h["default"].createElement("form",{onSubmit:this.handleSubmit},h["default"].createElement("div",{className:"modal-body"},h["default"].createElement(_["default"],{label:gettext("Thread title"),"for":"id_title",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.title},h["default"].createElement("input",{id:"id_title",className:"form-control",type:"text",onChange:this.bindInput("title"),value:this.state.title})),h["default"].createElement("div",{className:"clearfix"}),h["default"].createElement(_["default"],{label:gettext("Category"),"for":"id_category",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.category},h["default"].createElement(w["default"],{id:"id_category",onChange:this.onCategoryChange,value:this.state.category,choices:this.state.categories})),h["default"].createElement("div",{className:"clearfix"}),this.renderWeightField(),this.renderHiddenField(),this.renderClosedField()),h["default"].createElement("div",{className:"modal-footer"},h["default"].createElement(b["default"],{className:"btn-primary",loading:this.state.isLoading},gettext("Split posts")))))}}]),t}(y["default"])},{"../../../../reducers/post":282,"../../../../services/ajax":293,"../../../../services/modal":299,"../../../../services/snackbar":303,"../../../../services/store":304,"../../../../utils/validators":320,"../../../button":5,"../../../category-select":13,"../../../form":41,"../../../form-group":40,"../../../modal-loader":46,"../../../select":152,react:"react"}],164:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("./merge"),f=n(d),p=e("./move"),h=n(p),m=e("../../../../reducers/thread"),b=r(m),v=e("../../../../services/ajax"),y=n(v),g=e("../../../../services/modal"),_=n(g),E=e("../../../../services/snackbar"),w=n(E),O=e("../../../../services/store"),k=n(O),N=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.callApi=function(e,t){k["default"].dispatch(b.busy()),e.push({op:"add",path:"acl",value:!0}),y["default"].patch(r.props.thread.api.index,e).then(function(e){k["default"].dispatch(b.update(e)),k["default"].dispatch(b.release()),w["default"].success(t)},function(e){k["default"].dispatch(b.release()),400===e.status?w["default"].error(e.detail[0]):w["default"].apiError(e)})},r.pinGlobally=function(){r.callApi([{op:"replace",path:"weight",value:2}],gettext("Thread has been pinned globally."))},r.pinLocally=function(){r.callApi([{op:"replace",path:"weight",value:1}],gettext("Thread has been pinned locally."))},r.unpin=function(){r.callApi([{op:"replace",path:"weight",value:0}],gettext("Thread has been unpinned."))},r.approve=function(){r.callApi([{op:"replace",path:"is-unapproved",value:!1}],gettext("Thread has been approved."))},r.open=function(){r.callApi([{op:"replace",path:"is-closed",value:!1}],gettext("Thread has been opened."))},r.close=function(){r.callApi([{op:"replace",path:"is-closed",value:!0}],gettext("Thread has been closed."))},r.unhide=function(){r.callApi([{op:"replace",path:"is-hidden",value:!1}],gettext("Thread has been made visible."))},r.hide=function(){r.callApi([{op:"replace",path:"is-hidden",value:!0}],gettext("Thread has been made hidden."))},r.move=function(){_["default"].show(c["default"].createElement(h["default"],{posts:r.props.posts,thread:r.props.thread}))},r.merge=function(){_["default"].show(c["default"].createElement(f["default"],{thread:r.props.thread}))},r["delete"]=function(){confirm(gettext("Are you sure you want to delete this thread?"))&&(k["default"].dispatch(b.busy()),y["default"]["delete"](r.props.thread.api.index).then(function(e){w["default"].success(gettext("Thread has been deleted.")),window.location=r.props.thread.category.absolute_url},function(e){k["default"].dispatch(b.release()),w["default"].apiError(e)}))},n=a,s(r,n)}return l(t,e),i(t,[{key:"getPinGloballyButton",value:function(){return this.props.thread.weight<2&&2==this.props.thread.acl.can_pin?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.pinGlobally},gettext("Pin globally"))):null}},{key:"getPinLocallyButton",value:function(){return 1!==this.props.thread.weight&&this.props.thread.acl.can_pin>0?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.pinLocally},gettext("Pin locally"))):null}},{key:"getUnpinButton",value:function(){return this.props.thread.weight>0&&this.props.thread.acl.can_pin>0?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.unpin},gettext("Unpin"))):null}},{key:"getMoveButton",value:function(){return this.props.thread.acl.can_move?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.move},gettext("Move"))):null}},{key:"getMergeButton",value:function(){return this.props.thread.acl.can_merge?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.merge},gettext("Merge"))):null}},{key:"getApproveButton",value:function(){return this.props.thread.is_unapproved&&this.props.thread.acl.can_approve?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.approve},gettext("Approve"))):null}},{key:"getOpenButton",value:function(){return this.props.thread.is_closed&&this.props.thread.acl.can_close?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.open},gettext("Open"))):null}},{key:"getCloseButton",value:function(){return!this.props.thread.is_closed&&this.props.thread.acl.can_close?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.close},gettext("Close"))):null}},{key:"getUnhideButton",value:function(){return this.props.thread.is_hidden&&this.props.thread.acl.can_hide?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.unhide},gettext("Unhide"))):null}},{key:"getHideButton",value:function(){return!this.props.thread.is_hidden&&this.props.thread.acl.can_hide?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.hide},gettext("Hide"))):null}},{key:"getDeleteButton",value:function(){return 2==this.props.thread.acl.can_hide?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this["delete"]},gettext("Delete"))):null}},{key:"render",value:function(){return c["default"].createElement("ul",{className:"dropdown-menu"},this.getPinGloballyButton(),this.getPinLocallyButton(),this.getUnpinButton(),this.getMoveButton(),this.getMergeButton(),this.getApproveButton(),this.getOpenButton(),this.getCloseButton(),this.getUnhideButton(),this.getHideButton(),this.getDeleteButton())}}]),t}(c["default"].Component);a["default"]=N},{"../../../../reducers/thread":288,"../../../../services/ajax":293,"../../../../services/modal":299,"../../../../services/snackbar":303,"../../../../services/store":304,"./merge":167,"./move":168,react:"react"}],165:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a.isModerationVisible=a.ModerationControls=void 0;var n=e("./controls"),o=r(n),s=e("./is-visible"),l=r(s);a.ModerationControls=o["default"],a.isModerationVisible=l["default"]},{"./controls":164,"./is-visible":166}],166:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return e.acl.can_approve&&e.is_unapproved||e.acl.can_close||e.acl.can_hide||e.acl.can_move||e.acl.can_pin}},{}],167:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return d["default"].createElement("div",{className:"modal-header"},d["default"].createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},d["default"].createElement("span",{"aria-hidden":"true"},"×")),d["default"].createElement("h4",{className:"modal-title"},gettext("Merge thread")))}Object.defineProperty(a,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.ModalHeader=i;var c=e("react"),d=n(c),f=e("../../../form"),p=n(f),h=e("../../../form-group"),m=n(h),b=e("../../../merge-polls"),v=n(b),y=e("../../../../reducers/thread"),g=r(y),_=e("../../../../services/ajax"),E=n(_),w=e("../../../../services/modal"),O=n(w),k=e("../../../../services/snackbar"),N=n(k),j=e("../../../../services/store"),x=n(j),P=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleSuccess=function(e){a.handleSuccessUnmounted(e),a.setState({isLoading:!0})},a.handleSuccessUnmounted=function(e){N["default"].success(gettext("Thread has been merged with other one.")),window.location=e.url},a.handleError=function(e){x["default"].dispatch(g.release()),400===e.status?e.polls?O["default"].show(d["default"].createElement(v["default"],{api:a.props.thread.api.merge,data:{thread_url:a.state.url},polls:e.polls,onError:a.handleError,onSuccess:a.handleSuccessUnmounted})):N["default"].error(e.detail):N["default"].apiError(e)},a.onUrlChange=function(e){a.changeValue("url",e.target.value)},a.state={isLoading:!1,url:"",validators:{url:[]},errors:{}},a}return l(t,e),u(t,[{key:"clean",value:function(){return!!this.state.url.trim().length||(N["default"].error(gettext("You have to enter link to the other thread.")),!1)}},{key:"send",value:function(){return x["default"].dispatch(g.busy()),E["default"].post(this.props.thread.api.merge,{thread_url:this.state.url})}},{key:"render",value:function(){return d["default"].createElement("div",{className:"modal-dialog",role:"document"},d["default"].createElement("form",{onSubmit:this.handleSubmit},d["default"].createElement("div",{className:"modal-content"},d["default"].createElement(i,null),d["default"].createElement("div",{className:"modal-body"},d["default"].createElement(m["default"],{"for":"id_url",label:gettext("Link to thread you want to merge with"),help_text:gettext("Merge will delete current thread and move its contents to the thread specified here.")},d["default"].createElement("input",{className:"form-control",disabled:this.state.isLoading||this.props.thread.isBusy,id:"id_url",onChange:this.onUrlChange,value:this.state.url}))),d["default"].createElement("div",{className:"modal-footer"},d["default"].createElement("button",{className:"btn btn-primary",loading:this.state.isLoading||this.props.thread.isBusy},gettext("Merge thread"))))))}}]),t}(p["default"]);a["default"]=P},{"../../../../reducers/thread":288,"../../../../services/ajax":293,"../../../../services/modal":299,"../../../../services/snackbar":303,"../../../../services/store":304,"../../../form":41,"../../../form-group":40,"../../../merge-polls":44,react:"react"}],168:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return p["default"].createElement("div",{className:"modal-header"},p["default"].createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},p["default"].createElement("span",{"aria-hidden":"true"},"×")),p["default"].createElement("h4",{className:"modal-title"},gettext("Move thread")))}function u(e){return p["default"].createElement("div",{className:"modal-dialog",role:"document"},p["default"].createElement("div",{className:"modal-content"},p["default"].createElement(i,null),p["default"].createElement(E["default"],null)))}function c(e){return p["default"].createElement("div",{className:"modal-dialog modal-message",role:"document"},p["default"].createElement("div",{className:"modal-content"},p["default"].createElement(i,null),p["default"].createElement("div",{className:"message-icon"},p["default"].createElement("span",{className:"material-icon"},"info_outline")),p["default"].createElement("div",{className:"message-body"},p["default"].createElement("p",{className:"lead"},gettext("You can't move this thread at the moment.")),p["default"].createElement("p",null,e.message))))}Object.defineProperty(a,"__esModule",{value:!0});var d=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.ModalHeader=i,a.ModalLoading=u,a.ModalMessage=c;var f=e("react"),p=n(f),h=e("../../../form"),m=n(h),b=e("../../../form-group"),v=n(b),y=e("../../../category-select"),g=n(y),_=e("../../../modal-loader"),E=n(_),w=e("../../../../reducers/posts"),O=r(w),k=e("../../../../reducers/thread"),N=r(k),j=e("../../../.."),x=n(j),P=e("../../../../services/ajax"),C=n(P),S=e("../../../../services/modal"),T=n(S),M=e("../../../../services/snackbar"),L=n(M),R=e("../../../../services/store"),A=n(R),I=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onCategoryChange=function(e){a.changeValue("category",e.target.value)},a.state={isReady:!1,isLoading:!1,isError:!1,category:null,categories:[]},a}return l(t,e),d(t,[{key:"componentDidMount",value:function(){var e=this;C["default"].get(x["default"].get("THREAD_EDITOR_URL")).then(function(t){var a=null,r=t.map(function(e){return e.post===!1||a||(a=e.id),Object.assign(e,{disabled:e.post===!1,label:e.name,value:e.id})});e.setState({isReady:!0,category:a,categories:r})},function(t){e.setState({isError:t.detail})})}},{key:"send",value:function(){return A["default"].dispatch(N.busy()),C["default"].patch(this.props.thread.api.index,[{op:"replace",path:"category",value:this.state.category}])}},{key:"handleSuccess",value:function(){C["default"].get(this.props.thread.api.posts,{page:this.props.posts.page}).then(function(e){A["default"].dispatch(N.replace(e)),A["default"].dispatch(O.load(e.post_set)),A["default"].dispatch(N.release()),L["default"].success(gettext("Thread has been moved.")),T["default"].hide()},function(e){A["default"].dispatch(N.release()),L["default"].apiError(e)})}},{key:"handleError",value:function(e){400===e.status?L["default"].error(e.detail[0]):L["default"].apiError(e)}},{key:"render",value:function(){return this.state.isReady?p["default"].createElement("div",{className:"modal-dialog",role:"document"},p["default"].createElement("form",{onSubmit:this.handleSubmit},p["default"].createElement("div",{className:"modal-content"},p["default"].createElement(i,null),p["default"].createElement("div",{className:"modal-body"},p["default"].createElement(v["default"],{"for":"id_category",label:gettext("New category")},p["default"].createElement(g["default"],{choices:this.state.categories,disabled:this.state.isLoading||this.props.thread.isBusy,id:"id_category",onChange:this.onCategoryChange,value:this.state.category}))),p["default"].createElement("div",{className:"modal-footer"},p["default"].createElement("button",{className:"btn btn-primary",loading:this.state.isLoading||this.props.thread.isBusy},gettext("Move thread")))))):this.state.isError?p["default"].createElement(c,{message:this.state.isError}):p["default"].createElement(u,null)}}]),t}(m["default"]);a["default"]=I},{"../../../..":234,"../../../../reducers/posts":283,"../../../../reducers/thread":288,"../../../../services/ajax":293,"../../../../services/modal":299,"../../../../services/snackbar":303,"../../../../services/store":304,"../../../category-select":13,"../../../form":41,"../../../form-group":40,"../../../modal-loader":46,react:"react"}],169:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return e.posts.pages>1?d["default"].createElement("ul",{className:"pagination"},d["default"].createElement(o,e),d["default"].createElement(s,e),d["default"].createElement(l,e),d["default"].createElement(i,e)):null}function o(e){return e.posts.isLoaded&&e.posts.first?d["default"].createElement("li",null,d["default"].createElement(f.Link,{to:e.thread.url.index,title:gettext("Go to first page")},d["default"].createElement("span",{className:"material-icon"},"first_page"))):d["default"].createElement("li",{className:"disabled"},d["default"].createElement("span",{title:gettext("Go to first page")},d["default"].createElement("span",{className:"material-icon"},"first_page")))}function s(e){if(e.posts.isLoaded&&e.posts.page>1){var t="";return e.posts.previous&&(t=e.posts.previous+"/"),d["default"].createElement("li",null,d["default"].createElement(f.Link,{to:e.thread.url.index+t,title:gettext("Go to previous page")},d["default"].createElement("span",{className:"material-icon"},"chevron_left")))}return d["default"].createElement("li",{className:"disabled"},d["default"].createElement("span",{title:gettext("Go to previous page")},d["default"].createElement("span",{className:"material-icon"},"chevron_left")))}function l(e){if(e.posts.isLoaded&&e.posts.more){var t="";return e.posts.next&&(t=e.posts.next+"/"),d["default"].createElement("li",null,d["default"].createElement(f.Link,{to:e.thread.url.index+t,title:gettext("Go to next page")},d["default"].createElement("span",{className:"material-icon"},"chevron_right")))}return d["default"].createElement("li",{className:"disabled"},d["default"].createElement("span",{title:gettext("Go to next page")},d["default"].createElement("span",{className:"material-icon"},"chevron_right")))}function i(e){return e.posts.isLoaded&&e.posts.last?d["default"].createElement("li",null,d["default"].createElement(f.Link,{to:e.thread.url.index+e.posts.last+"/",title:gettext("Go to last page")},d["default"].createElement("span",{className:"material-icon"},"last_page"))):d["default"].createElement("li",{className:"disabled"},d["default"].createElement("span",{title:gettext("Go to last page")},d["default"].createElement("span",{className:"material-icon"},"last_page")))}function u(e){var t=null;return e.more?(t=ngettext("There is %(more)s more post in this thread.","There are %(more)s more posts in this thread.",e.more),t=interpolate(t,{more:e.more},!0)):t=gettext("There are no more posts in this thread."),d["default"].createElement("p",null,t)}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return d["default"].createElement("nav",{className:"misago-pagination pull-left"},d["default"].createElement(n,e),d["default"].createElement(u,{more:e.posts.more}))},a.Pager=n,a.FirstPage=o,a.PreviousPage=s,a.NextPage=l,a.LastPage=i,a.More=u;var c=e("react"),d=r(c),f=e("react-router")},{react:"react","react-router":"react-router"}],170:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return o["default"].createElement("button",{className:e.className||"btn btn-success",onClick:e.onClick,type:"button"},o["default"].createElement("span",{className:"material-icon"},"chat"),gettext("Reply"))};var n=e("react"),o=r(n)},{react:"react"}],171:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return{participants:e.participants,poll:e.poll,posts:e.posts,thread:e.thread,tick:e.tick.tick,user:e.auth.user}}function o(){var e=c["default"].get("THREAD"),t=e.url.index.replace(e.slug+"-"+e.pk,":slug");return[{path:t,component:(0,s.connect)(n)(i["default"])},{path:t+":page/",component:(0,s.connect)(n)(i["default"])}]}Object.defineProperty(a,"__esModule",{value:!0}),a.select=n,a.paths=o;var s=e("react-redux"),l=e("./route"),i=r(l),u=e("../../index"),c=r(u)},{"../../index":234,"./route":172,"react-redux":"react-redux"}],172:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e.thread.acl.can_reply?f["default"].createElement(O["default"],{className:"btn btn-success toolbar-right",onClick:e.onClick}):null}Object.defineProperty(a,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.Reply=i;var d=e("react"),f=n(d),p=e("../participants"),h=n(p),m=e("../poll"),b=e("../posts-list"),v=n(b),y=e("./header"),g=n(y),_=e("./paginator"),E=n(_),w=e("./reply-button"),O=n(w),k=e("./subscription"),N=n(k),j=e("./toolbar-top"),x=n(j),P=e("./moderation/posts"),C=n(P),S=e("../../reducers/participants"),T=r(S),M=e("../../reducers/poll"),L=r(M),R=e("../../reducers/posts"),A=r(R),I=e("../../reducers/thread"),D=r(I),U=e("../../services/ajax"),B=n(U),H=e("../../services/polls"),z=n(H),F=e("../../services/snackbar"),G=n(F),V=e("../../services/posting"),q=n(V),Y=e("../../services/store"),W=n(Y),$=e("../../services/page-title"),K=n($),J=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.update=function(e){W["default"].dispatch(D.replace(e)),W["default"].dispatch(A.load(e.post_set)),e.participants&&W["default"].dispatch(T.replace(e.participants)),e.poll&&W["default"].dispatch(L.replace(e.poll)),r.setPageTitle()},r.openReplyForm=function(){q["default"].open({mode:"REPLY",config:r.props.thread.api.editor,submit:r.props.thread.api.posts.index})},n=a,s(r,n)}return l(t,e),c(t,[{key:"componentDidMount",value:function(){this.shouldFetchData()&&(this.fetchData(),this.setPageTitle()),this.startPollingApi()}},{key:"componentDidUpdate",value:function(){this.shouldFetchData()&&(this.fetchData(),this.startPollingApi(),this.setPageTitle())}},{key:"componentWillUnmount",value:function(){this.stopPollingApi()}},{key:"shouldFetchData",value:function(){if(this.props.posts.isLoaded){var e=1*(this.props.params.page||1);return e!=this.props.posts.page}return!1}},{key:"fetchData",value:function(){var e=this;W["default"].dispatch(A.unload()),
B["default"].get(this.props.thread.api.posts.index,{page:this.props.params.page||1},"posts").then(function(t){e.update(t)},function(e){G["default"].apiError(e)})}},{key:"startPollingApi",value:function(){z["default"].start({poll:"thread-posts",url:this.props.thread.api.posts.index,data:{page:this.props.params.page||1},update:this.update,frequency:12e4,delayed:!0})}},{key:"stopPollingApi",value:function(){z["default"].stop("thread-posts")}},{key:"setPageTitle",value:function(){K["default"].set({title:this.props.thread.title,page:1*(this.props.params.page||1)})}},{key:"render",value:function(){return f["default"].createElement("div",{className:"page page-thread"},f["default"].createElement(g["default"],this.props),f["default"].createElement("div",{className:"container"},f["default"].createElement(x["default"],u({openReplyForm:this.openReplyForm},this.props)),f["default"].createElement(m.Poll,{poll:this.props.poll,thread:this.props.thread,user:this.props.user}),f["default"].createElement(h["default"],{participants:this.props.participants,thread:this.props.thread,user:this.props.user}),f["default"].createElement(v["default"],this.props),f["default"].createElement("div",{className:"toolbar-bottom"},f["default"].createElement(E["default"],this.props),f["default"].createElement(i,{onClick:this.openReplyForm,thread:this.props.thread}),f["default"].createElement(N["default"],u({className:"toolbar-right dropup"},this.props)),f["default"].createElement(C["default"],this.props),f["default"].createElement("div",{className:"clear-fix"}))))}}]),t}(f["default"].Component);a["default"]=J},{"../../reducers/participants":280,"../../reducers/poll":281,"../../reducers/posts":283,"../../reducers/thread":288,"../../services/ajax":293,"../../services/page-title":300,"../../services/polls":301,"../../services/posting":302,"../../services/snackbar":303,"../../services/store":304,"../participants":67,"../poll":72,"../posts-list":105,"./header":156,"./moderation/posts":161,"./paginator":169,"./reply-button":170,"./subscription":173,"./toolbar-top":174,react:"react"}],173:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e===!0?"star":e===!1?"star_half":"star_border"}function u(e){return e===!0?gettext("E-mail"):e===!1?gettext("Enabled"):gettext("Disabled")}function c(e){return h["default"].createElement("ul",{className:"dropdown-menu dropdown-menu-right"},h["default"].createElement(O,e),h["default"].createElement(k,e),h["default"].createElement(N,e))}function d(e,t,a){var r={subscription:e.subscription};w["default"].dispatch(b.update({subscription:t})),y["default"].patch(e.api.index,[{op:"replace",path:"subscription",value:a}]).then(function(e){w["default"].dispatch(b.update(e))},function(e){400===e.status?_["default"].error(e.detail[0]):_["default"].apiError(e),w["default"].dispatch(b.update(r))})}Object.defineProperty(a,"__esModule",{value:!0}),a.Email=a.Enable=a.Disable=void 0;var f=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a["default"]=function(e){return e.user.id?h["default"].createElement("div",{className:e.className},h["default"].createElement("button",{"aria-expanded":"true","aria-haspopup":"true",className:"btn btn-default dropdown-toggle","data-toggle":"dropdown",type:"button"},h["default"].createElement("span",{className:"material-icon"},i(e.thread.subscription)),u(e.thread.subscription)),h["default"].createElement(c,e)):null},a.getIcon=i,a.getLabel=u,a.Dropdown=c,a.update=d;var p=e("react"),h=n(p),m=e("../../reducers/thread"),b=r(m),v=e("../../services/ajax"),y=n(v),g=e("../../services/snackbar"),_=n(g),E=e("../../services/store"),w=n(E),O=a.Disable=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){null!==r.props.thread.subscription&&d(r.props.thread,null,"unsubscribe")},n=a,s(r,n)}return l(t,e),f(t,[{key:"render",value:function(){return h["default"].createElement("li",null,h["default"].createElement("button",{className:"btn-link",onClick:this.onClick},h["default"].createElement("span",{className:"material-icon"},"star_border"),gettext("Unsubscribe")))}}]),t}(h["default"].Component),k=a.Enable=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){r.props.thread.subscription!==!1&&d(r.props.thread,!1,"notify")},n=a,s(r,n)}return l(t,e),f(t,[{key:"render",value:function(){return h["default"].createElement("li",null,h["default"].createElement("button",{className:"btn-link",onClick:this.onClick},h["default"].createElement("span",{className:"material-icon"},"star_half"),gettext("Subscribe")))}}]),t}(h["default"].Component),N=a.Email=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){r.props.thread.subscription!==!0&&d(r.props.thread,!0,"email")},n=a,s(r,n)}return l(t,e),f(t,[{key:"render",value:function(){return h["default"].createElement("li",null,h["default"].createElement("button",{className:"btn-link",onClick:this.onClick},h["default"].createElement("span",{className:"material-icon"},"star"),gettext("Subscribe with e-mail")))}}]),t}(h["default"].Component)},{"../../reducers/thread":288,"../../services/ajax":293,"../../services/snackbar":303,"../../services/store":304,react:"react"}],174:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return e.thread.is_new?m["default"].createElement("li",null,m["default"].createElement("a",{href:e.thread.url.new_post,className:"btn btn-default",title:gettext("Go to first new post")},gettext("New"))):null}function i(e){return e.thread.has_unapproved_posts&&e.thread.acl.can_approve?m["default"].createElement("li",null,m["default"].createElement("a",{href:e.thread.url.unapproved_post,className:"btn btn-default",title:gettext("Go to first unapproved post")},gettext("Unapproved"))):null}function u(e){return m["default"].createElement("li",null,m["default"].createElement("a",{href:e.thread.url.last_post,className:"btn btn-default",title:gettext("Go to last post")},gettext("Last")))}function c(e){return e.user.id?m["default"].createElement("li",{className:"pull-right"},m["default"].createElement(g["default"],p({className:"dropdown toolbar-right"},e))):null}function d(e){return e.thread.acl.can_reply?m["default"].createElement("li",{className:"pull-right"},m["default"].createElement(v["default"],{onClick:e.openReplyForm})):null}Object.defineProperty(a,"__esModule",{value:!0}),a.AddParticipant=a.StartPoll=void 0;var f=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a["default"]=function(e){return m["default"].createElement("div",{className:"toolbar"},m["default"].createElement("ul",{className:"list-inline"},m["default"].createElement(l,{thread:e.thread}),m["default"].createElement(i,{thread:e.thread}),m["default"].createElement(u,{thread:e.thread}),m["default"].createElement(d,{openReplyForm:e.openReplyForm,thread:e.thread}),m["default"].createElement(j,{poll:e.poll,thread:e.thread}),m["default"].createElement(x,{thread:e.thread}),m["default"].createElement(c,e)))},a.GotoNew=l,a.GotoUnapproved=i,a.GotoLast=u,a.SubscriptionMenu=c,a.Reply=d;var h=e("react"),m=r(h),b=e("./reply-button"),v=r(b),y=e("./subscription"),g=r(y),_=e("../add-participant"),E=r(_),w=e("../../services/modal"),O=r(w),k=e("../../services/posting"),N=r(k),j=a.StartPoll=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){N["default"].open({mode:"POLL",submit:r.props.thread.api.poll,thread:r.props.thread,poll:null})},s=a,o(r,s)}return s(t,e),f(t,[{key:"render",value:function(){return!this.props.thread.acl.can_start_poll||this.props.thread.poll?null:m["default"].createElement("li",{className:"pull-right"},m["default"].createElement("button",{className:"btn btn-default",onClick:this.onClick,type:"button"},m["default"].createElement("span",{className:"material-icon"},"poll"),gettext("Add poll")))}}]),t}(m["default"].Component),x=a.AddParticipant=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onClick=function(){O["default"].show(m["default"].createElement(E["default"],{thread:r.props.thread}))},s=a,o(r,s)}return s(t,e),f(t,[{key:"render",value:function(){return this.props.thread.acl.can_add_participants?m["default"].createElement("li",{className:"pull-right"},m["default"].createElement("button",{className:"btn btn-default",onClick:this.onClick,type:"button"},m["default"].createElement("span",{className:"material-icon"},"person_add"),gettext("Add participant"))):null}}]),t}(m["default"].Component)},{"../../services/modal":299,"../../services/posting":302,"../add-participant":1,"./reply-button":170,"./subscription":173,react:"react"}],175:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getMessage",value:function(){var e=ngettext("There is %(threads)s new or updated thread. Click this message to show it.","There are %(threads)s new or updated threads. Click this message to show them.",this.props.diffSize);return interpolate(e,{threads:this.props.diffSize},!0)}},{key:"render",value:function(){return u["default"].createElement("li",{className:"list-group-item threads-diff-message"},u["default"].createElement("button",{type:"button",className:"btn btn-block btn-default",onClick:this.props.applyDiff},u["default"].createElement("span",{className:"material-icon"},"cached"),u["default"].createElement("span",{className:"diff-message"},this.getMessage())))}}]),t}(u["default"].Component);a["default"]=c},{react:"react"}],176:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./diff-message"),d=r(c),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getDiffMessage",value:function(){return 0===this.props.diffSize?null:u["default"].createElement(d["default"],{applyDiff:this.props.applyDiff,diffSize:this.props.diffSize})}},{key:"render",value:function(){return u["default"].createElement("div",{className:"threads-list ui-ready"},u["default"].createElement("ul",{className:"list-group"},this.getDiffMessage(),this.props.children))}}]),t}(u["default"].Component);a["default"]=f},{"./diff-message":175,react:"react"}],177:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../thread/preview"),d=r(c),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return u["default"].createElement("div",{className:"threads-list ui-preview"},u["default"].createElement("ul",{className:"list-group"},[0,1,2].map(function(e){return u["default"].createElement(d["default"],{hiddenOnMobile:e>0,key:e})})))}}]),t}(u["default"].Component);a["default"]=f},{"../thread/preview":186,react:"react"}],178:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./diff-message"),d=r(c),f=e("../thread/ready"),p=r(f),h=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getDiffMessage",value:function(){return this.props.diffSize>0?u["default"].createElement(d["default"],{diffSize:this.props.diffSize,applyDiff:this.props.applyDiff}):null}},{key:"render",value:function(){var e=this;return u["default"].createElement("div",{className:"threads-list ui-ready"},u["default"].createElement("ul",{className:"list-group"},this.getDiffMessage(),this.props.threads.map(function(t){return u["default"].createElement(p["default"],{categories:e.props.categories,thread:t,list:e.props.list,showOptions:e.props.showOptions,isSelected:e.props.selection.indexOf(t.id)>=0,isBusy:e.props.busyThreads.indexOf(t.id)>=0,key:t.id})})))}}]),t}(u["default"].Component);a["default"]=h},{"../thread/ready":187,"./diff-message":175,react:"react"}],179:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./list/empty"),d=r(c),f=e("./list/ready"),p=r(f),h=e("./list/preview"),m=r(h),b=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return this.props.isLoaded?this.props.threads.length>0?u["default"].createElement(p["default"],{threads:this.props.threads,categories:this.props.categories,list:this.props.list,diffSize:this.props.diffSize,applyDiff:this.props.applyDiff,showOptions:this.props.showOptions,selection:this.props.selection,busyThreads:this.props.busyThreads}):u["default"].createElement(d["default"],{diffSize:this.props.diffSize,applyDiff:this.props.applyDiff},this.props.children):u["default"].createElement(m["default"],null)}}]),t}(u["default"].Component);a["default"]=b},{"./list/empty":176,"./list/preview":177,"./list/ready":178,react:"react"}],180:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("react-router"),d=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getUrl",value:function(){return this.props.category.absolute_url+this.props.list.path}},{key:"getClassName",value:function(){return this.props.category.css_class?"thread-category thread-category-"+this.props.category.css_class:"thread-category"}},{key:"render",value:function(){return u["default"].createElement(c.Link,{to:this.getUrl(),className:this.getClassName()},this.props.category.name)}}]),t}(u["default"].Component);a["default"]=d},{react:"react","react-router":"react-router"}],181:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../category"),d=r(c),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getPath",value:function(){var e=this.props.categories[this.props.thread.top_category],t=this.props.categories[this.props.thread.category];return e&&t&&e.id!==t.id?u["default"].createElement("li",{className:"thread-path"},u["default"].createElement(d["default"],{category:t,list:this.props.list})):e?u["default"].createElement("li",{className:"thread-path"},u["default"].createElement(d["default"],{category:e,list:this.props.list})):null}},{key:"getRepliesCount",value:function(){return u["default"].createElement("li",{className:"thread-replies-count"},u["default"].createElement("span",{className:"material-icon"},"forum"),u["default"].createElement("span",{className:"icon-legend"},this.props.thread.replies))}},{key:"getLastReply",value:function(){return u["default"].createElement("li",{className:"thread-last-reply-clock"},u["default"].createElement("span",{className:"material-icon"},"schedule"),u["default"].createElement("span",{className:"icon-legend"},this.props.thread.last_post_on.fromNow()))}},{key:"render",value:function(){return u["default"].createElement("ul",{className:"thread-details-compact list-inline"},this.getPath(),this.getRepliesCount(),this.getLastReply())}}]),t}(u["default"].Component);a["default"]=f},{"../category":180,react:"react"}],182:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../category"),d=r(c),f=e("../../../../utils/escape-html"),p=r(f),h='<a href="%(url)s" class="poster-title">%(user)s</a>',m='<span class="poster-title">%(user)s</span>',b='<a href="%(url)s" class="last-title" title="%(absolute)s">%(relative)s</a>',v=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getNewLabel",value:function(){return this.props.thread.is_read?null:u["default"].createElement("li",{className:"thread-new-posts",title:gettext("Go to first unread post")},u["default"].createElement("a",{href:this.props.thread.url.new_post},u["default"].createElement("span",{className:"material-icon"},"comment"),u["default"].createElement("span",{className:"icon-legend"},gettext("New posts"))))}},{key:"getPinnedLabel",value:function(){return 2===this.props.thread.weight?u["default"].createElement("li",{className:"thread-pinned-globally"},u["default"].createElement("span",{className:"material-icon"},"bookmark"),u["default"].createElement("span",{className:"icon-legend"},gettext("Pinned globally"))):1===this.props.thread.weight?u["default"].createElement("li",{className:"thread-pinned-locally"},u["default"].createElement("span",{className:"material-icon"},"bookmark_border"),u["default"].createElement("span",{className:"icon-legend"},gettext("Pinned locally"))):null}},{key:"getUnapprovedLabel",value:function(){return this.props.thread.is_unapproved?u["default"].createElement("li",{className:"thread-unapproved"},u["default"].createElement("span",{className:"material-icon"},"remove_circle"),u["default"].createElement("span",{className:"icon-legend"},gettext("Unapproved"))):this.props.thread.has_unapproved_posts?u["default"].createElement("li",{className:"thread-unapproved-posts"},u["default"].createElement("span",{className:"material-icon"},"remove_circle_outline"),u["default"].createElement("span",{className:"icon-legend"},gettext("Unapproved posts"))):null}},{key:"getHiddenLabel",value:function(){return this.props.thread.is_hidden?u["default"].createElement("li",{className:"thread-hidden"},u["default"].createElement("span",{className:"material-icon"},"visibility_off"),u["default"].createElement("span",{className:"icon-legend"},gettext("Hidden"))):null}},{key:"getClosedLabel",value:function(){return this.props.thread.is_closed?u["default"].createElement("li",{className:"thread-closed"},u["default"].createElement("span",{className:"material-icon"},"lock_outline"),u["default"].createElement("span",{className:"icon-legend"},gettext("Closed"))):null}},{key:"getPath",value:function(){var e=this.props.categories[this.props.thread.top_category],t=this.props.categories[this.props.thread.category];return e&&t&&e.id!==t.id?u["default"].createElement("li",{className:"thread-path"},u["default"].createElement(d["default"],{category:e,list:this.props.list}),u["default"].createElement("span",{className:"path-separator material-icon"},"arrow_forward"),u["default"].createElement(d["default"],{category:t,list:this.props.list})):e?u["default"].createElement("li",{className:"thread-path"},u["default"].createElement(d["default"],{category:e,list:this.props.list})):null}},{key:"getRepliesCount",value:function(){var e=ngettext("%(replies)s reply","%(replies)s replies",this.props.thread.replies);return u["default"].createElement("li",{className:"thread-replies"},u["default"].createElement("span",{className:"material-icon"},"forum"),u["default"].createElement("span",{className:"icon-legend"},interpolate(e,{replies:this.props.thread.replies},!0)))}},{key:"getLastReplyDate",value:function(){return interpolate(b,{url:(0,p["default"])(this.props.thread.url.last_post),absolute:(0,p["default"])(this.props.thread.last_post_on.format("LLL")),relative:(0,p["default"])(this.props.thread.last_post_on.fromNow())},!0)}},{key:"getLastPoster",value:function(){return this.props.thread.url.last_poster?interpolate(h,{url:(0,p["default"])(this.props.thread.url.last_poster),user:(0,p["default"])(this.props.thread.last_poster_name)},!0):interpolate(m,{user:(0,p["default"])(this.props.thread.last_poster_name)},!0)}},{key:"getLastReply",value:function(){return u["default"].createElement("li",{className:"thread-last-reply",dangerouslySetInnerHTML:{__html:interpolate((0,p["default"])(gettext("last reply by %(user)s %(date)s")),{date:this.getLastReplyDate(),user:this.getLastPoster()},!0)}})}},{key:"render",value:function(){return u["default"].createElement("ul",{className:"thread-details-full list-inline"},this.getNewLabel(),this.getPinnedLabel(),this.getUnapprovedLabel(),this.getHiddenLabel(),this.getClosedLabel(),this.getPath(),this.getRepliesCount(),this.getLastReply())}}]),t}(u["default"].Component);a["default"]=v},{"../../../../utils/escape-html":310,"../category":180,react:"react"}],183:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getPinnedIcon",value:function(){return 2===this.props.thread.weight?u["default"].createElement("span",{className:"thread-pinned-globally"},u["default"].createElement("span",{className:"material-icon"},"bookmark")):1===this.props.thread.weight?u["default"].createElement("span",{className:"thread-pinned-locally"},u["default"].createElement("span",{className:"material-icon"},"bookmark_border")):null}},{key:"getUnapprovedIcon",value:function(){return this.props.thread.is_unapproved?u["default"].createElement("span",{className:"thread-unapproved"},u["default"].createElement("span",{className:"material-icon"},"remove_circle")):this.props.thread.has_unapproved_posts?u["default"].createElement("span",{className:"thread-unapproved-posts"},u["default"].createElement("span",{className:"material-icon"},"remove_circle_outline")):null}},{key:"getHiddenIcon",value:function(){return this.props.thread.is_hidden?u["default"].createElement("span",{className:"thread-hidden"},u["default"].createElement("span",{className:"material-icon"},"visibility_off")):null}},{key:"getClosedIcon",
value:function(){return this.props.thread.is_closed?u["default"].createElement("span",{className:"thread-closed"},u["default"].createElement("span",{className:"material-icon"},"lock_outline")):null}},{key:"render",value:function(){return u["default"].createElement("div",{className:"thread-flags"},this.getPinnedIcon(),this.getUnapprovedIcon(),this.getHiddenIcon(),this.getClosedIcon())}}]),t}(u["default"].Component);a["default"]=c},{react:"react"}],184:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getClassName",value:function(){return this.props.thread.is_read?"read-status item-read":"read-status item-new"}},{key:"getTitle",value:function(){return this.props.thread.is_read?gettext("This thread has no new posts."):gettext("This thread has new posts.")}},{key:"getIcon",value:function(){return this.props.thread.is_read?"chat_bubble_outline":"chat_bubble"}},{key:"getUrl",value:function(){return this.props.thread.is_read?this.props.thread.url.last_post:this.props.thread.url.new_post}},{key:"render",value:function(){return u["default"].createElement("a",{className:this.getClassName(),href:this.getUrl(),title:this.getTitle()},u["default"].createElement("span",{className:"material-icon"},this.getIcon()))}}]),t}(u["default"].Component);a["default"]=c},{react:"react"}],185:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("./subscription/compact"),f=n(d),p=e("./subscription/full"),h=n(p),m=e("../../../reducers/selection"),b=r(m),v=e("../../../services/store"),y=n(v),g=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.toggleSelection=function(){y["default"].dispatch(b.item(r.props.thread.id))},n=a,s(r,n)}return l(t,e),i(t,[{key:"getSelectToggle",value:function(){return this.props.thread.moderation.length?c["default"].createElement("li",null,c["default"].createElement("button",{className:"btn btn-default btn-checkbox",onClick:this.toggleSelection,disabled:this.props.disabled},c["default"].createElement("span",{className:"material-icon"},this.props.isSelected?"check_box":"check_box_outline_blank"),c["default"].createElement("span",{className:"icon-legend"},this.props.isSelected?gettext("Selected"):gettext("Select")))):null}},{key:"render",value:function(){return c["default"].createElement("div",{className:"thread-options"},c["default"].createElement("ul",{className:"list-inline"},this.getSelectToggle(),c["default"].createElement(h["default"],{thread:this.props.thread,disabled:this.props.disabled}),c["default"].createElement(f["default"],{thread:this.props.thread,disabled:this.props.disabled})))}}]),t}(c["default"].Component);a["default"]=g},{"../../../reducers/selection":286,"../../../services/store":304,"./subscription/compact":188,"./subscription/full":189,react:"react"}],186:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../../../utils/random"),f=r(d),p=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"getClassName",value:function(){return this.props.hiddenOnMobile?"list-group-item thread-preview hidden-xs hidden-sm":"list-group-item thread-preview"}},{key:"render",value:function(){return c["default"].createElement("li",{className:this.getClassName()},c["default"].createElement("div",{className:"thread-icon"},c["default"].createElement("span",{className:"read-status item-read"},c["default"].createElement("span",{className:"material-icon"},"chat_bubble_outline"))),c["default"].createElement("div",{className:"thread-main"},c["default"].createElement("span",{className:"item-title thread-title"},c["default"].createElement("span",{className:"ui-preview-text",style:{width:f["int"](60,200)+"px"}}," ")),c["default"].createElement("ul",{className:"thread-details-compact list-inline"},c["default"].createElement("li",null,c["default"].createElement("span",{className:"ui-preview-text",style:{width:f["int"](20,70)+"px"}}," ")),c["default"].createElement("li",null,c["default"].createElement("span",{className:"ui-preview-text",style:{width:f["int"](20,70)+"px"}}," ")),c["default"].createElement("li",null,c["default"].createElement("span",{className:"ui-preview-text",style:{width:f["int"](20,70)+"px"}}," "))),c["default"].createElement("ul",{className:"thread-details-full list-inline"},c["default"].createElement("li",null,c["default"].createElement("span",{className:"ui-preview-text",style:{width:f["int"](50,150)+"px"}}," ")),c["default"].createElement("li",null,c["default"].createElement("span",{className:"ui-preview-text",style:{width:f["int"](50,100)+"px"}}," ")),c["default"].createElement("li",null,c["default"].createElement("span",{className:"ui-preview-text",style:{width:f["int"](100,250)+"px"}}," ")))),c["default"].createElement("div",{className:"clearfix"}))}}]),t}(c["default"].Component);a["default"]=p},{"../../../utils/random":315,react:"react"}],187:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../../loader"),d=r(c),f=e("./details/compact"),p=r(f),h=e("./details/full"),m=r(h),b=e("./flags"),v=r(b),y=e("./icon"),g=r(y),_=e("./options"),E=r(_),w=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getIcon",value:function(){return this.props.isBusy?u["default"].createElement(d["default"],null):u["default"].createElement(g["default"],{thread:this.props.thread})}},{key:"getOptions",value:function(){return this.props.showOptions?u["default"].createElement(E["default"],{thread:this.props.thread,disabled:this.props.isBusy,isSelected:this.props.isSelected}):null}},{key:"getClassName",value:function(){var e=["list-group-item"];return this.props.thread.is_read?e.push("thread-read"):e.push("thread-new"),this.props.isBusy?e.push("thread-busy"):this.props.isSelected&&e.push("thread-selected"),this.props.showOptions&&(this.props.thread.moderation.length?e.push("thread-ops-two"):e.push("thread-ops-one")),e.join(" ")}},{key:"render",value:function(){return u["default"].createElement("li",{className:this.getClassName()},u["default"].createElement("div",{className:"thread-icon"},this.getIcon(),u["default"].createElement(v["default"],{thread:this.props.thread})),this.getOptions(),u["default"].createElement("div",{className:"thread-main"},u["default"].createElement("a",{href:this.props.thread.url.index,className:"item-title thread-title"},this.props.thread.title),u["default"].createElement(m["default"],{categories:this.props.categories,list:this.props.list,thread:this.props.thread}),u["default"].createElement(p["default"],{categories:this.props.categories,list:this.props.list,thread:this.props.thread})),u["default"].createElement("div",{className:"clearfix"}))}}]),t}(u["default"].Component);a["default"]=w},{"../../loader":43,"./details/compact":181,"./details/full":182,"./flags":183,"./icon":184,"./options":185,react:"react"}],188:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./full"),d=r(c),f=e("./modal"),p=r(f),h=e("../../../../services/modal"),m=r(h),b=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),c=0;c<l;c++)i[c]=arguments[c];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.showOptions=function(){m["default"].show(u["default"].createElement(p["default"],{thread:r.props.thread}))},s=a,o(r,s)}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("li",{className:"hidden-md hidden-lg"},u["default"].createElement("button",{type:"button",className:this.getClassName(),disabled:this.props.disabled,onClick:this.showOptions},u["default"].createElement("span",{className:"material-icon"},this.getIcon()),u["default"].createElement("span",{className:"icon-legend"},this.getLegend())))}}]),t}(d["default"]);a["default"]=b},{"../../../../services/modal":299,"./full":189,"./modal":190,react:"react"}],189:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./options"),d=r(c),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getIcon",value:function(){return this.props.thread.subscription===!0?"star":this.props.thread.subscription===!1?"star_half":"star_border"}},{key:"getLegend",value:function(){return this.props.thread.subscription===!0?gettext("E-mail"):this.props.thread.subscription===!1?gettext("Enabled"):gettext("Disabled")}},{key:"getClassName",value:function(){return this.props.thread.subscription===!0?"btn btn-default btn-subscribe btn-subscribe-full dropdown-toggle":this.props.thread.subscription===!1?"btn btn-default btn-subscribe btn-subscribe-half dropdown-toggle":"btn btn-default btn-subscribe dropdown-toggle"}},{key:"render",value:function(){return u["default"].createElement("li",{className:"hidden-xs hidden-sm"},u["default"].createElement("div",{className:"btn-group"},u["default"].createElement("button",{type:"button",className:this.getClassName(),disabled:this.props.disabled,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},u["default"].createElement("span",{className:"material-icon"},this.getIcon()),u["default"].createElement("span",{className:"icon-legend"},this.getLegend())),u["default"].createElement(d["default"],{className:"dropdown-menu dropdown-menu-right",thread:this.props.thread})))}}]),t}(u["default"].Component);a["default"]=f},{"./options":191,react:"react"}],190:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./options"),d=r(c),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"modal-dialog modal-sm",role:"document"},u["default"].createElement("div",{className:"modal-content"},u["default"].createElement("div",{className:"modal-header"},u["default"].createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},u["default"].createElement("span",{"aria-hidden":"true"},"×")),u["default"].createElement("h4",{className:"modal-title"},gettext("Change subscription"))),u["default"].createElement(d["default"],{className:"modal-menu",thread:this.props.thread})))}}]),t}(u["default"].Component);a["default"]=f},{"./options":191,react:"react"}],191:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../../../button"),d=(r(c),e("../../../../reducers/threads")),f=e("../../../../services/ajax"),p=r(f),h=e("../../../../services/modal"),m=r(h),b=e("../../../../services/snackbar"),v=r(b),y=e("../../../../services/store"),g=r(y),_={unsubscribe:null,notify:!1,email:!0},E=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.setSubscription=function(e){m["default"].hide(),a.setState({isLoading:!0});var t=a.props.thread.subscription;g["default"].dispatch((0,d.patch)(a.props.thread,{subscription:_[e]})),p["default"].patch(a.props.thread.api.index,[{op:"replace",path:"subscription",value:e}]).then(function(){a.setState({isLoading:!1})},function(e){a.setState({isLoading:!1}),g["default"].dispatch((0,d.patch)(a.props.thread,{subscription:_[t]})),v["default"].apiError(e)})},a.unsubscribe=function(){a.setSubscription("unsubscribe")},a.notify=function(){a.setSubscription("notify")},a.email=function(){a.setSubscription("email")},a.state={isLoading:!1},a}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("ul",{className:this.props.className},u["default"].createElement("li",null,u["default"].createElement("button",{className:"btn-link",onClick:this.unsubscribe},u["default"].createElement("span",{className:"material-icon"},"star_border"),gettext("Unsubscribe"))),u["default"].createElement("li",null,u["default"].createElement("button",{className:"btn-link",onClick:this.notify},u["default"].createElement("span",{className:"material-icon"},"star_half"),gettext("Subscribe"))),u["default"].createElement("li",null,u["default"].createElement("button",{className:"btn-link",onClick:this.email},u["default"].createElement("span",{className:"material-icon"},"star"),gettext("Subscribe with e-mail"))))}}]),t}(u["default"].Component);a["default"]=E},{"../../../../reducers/threads":289,"../../../../services/ajax":293,"../../../../services/modal":299,"../../../../services/snackbar":303,"../../../../services/store":304,"../../../button":5,react:"react"}],192:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0}),a.Subcategory=void 0;var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("react-router"),d=a.Subcategory=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getUrl",value:function(){return this.props.listPath?this.props.category.absolute_url+this.props.listPath:this.props.category.absolute_url}},{key:"render",value:function(){return u["default"].createElement("li",null,u["default"].createElement(c.Link,{to:this.getUrl(),className:"btn btn-link"},this.props.category.name))}}]),t}(u["default"].Component),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){var e=this;return u["default"].createElement("div",{className:"btn-group category-picker"},u["default"].createElement("button",{type:"button",className:"btn btn-default dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},u["default"].createElement("span",{className:"material-icon"},"more_vert"),gettext("Go to")),u["default"].createElement("ul",{className:"dropdown-menu categories-menu"},this.props.choices.map(function(t){return e.props.categories[t]?u["default"].createElement(d,{category:e.props.categories[t],listPath:e.props.list.path,key:t}):null})))}}]),t}(u["default"].Component);a["default"]=f},{react:"react","react-router":"react-router"}],193:[function(e,t,a){"use strict";function r(e,t){return e.last_post>t.last_post?-1:e.last_post<t.last_post?1:0}function n(e,t){return 2===e.weight&&e.weight>t.weight?-1:2===t.weight&&e.weight<t.weight?1:r(e,t)}function o(e,t){return e.weight>t.weight?-1:e.weight<t.weight?1:r(e,t)}Object.defineProperty(a,"__esModule",{value:!0}),a.compareLastPostAge=r,a.compareGlobalWeight=n,a.compareWeight=o},{}],194:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../page-lead"),d=r(c),f=e("./toolbar"),p=r(f),h=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getCategoryDescription",value:function(){return this.props.pageLead?u["default"].createElement("div",{className:"category-description"},u["default"].createElement("div",{className:"page-lead"},u["default"].createElement("p",null,this.props.pageLead))):this.props.route.category.description?u["default"].createElement("div",{className:"category-description"},u["default"].createElement(d["default"],{copy:this.props.route.category.description.html})):null}},{key:"getDisableToolbar",value:function(){return!this.props.isLoaded||this.props.isBusy||this.props.busyThreads.length}},{key:"getToolbar",value:function(){return this.props.subcategories.length||this.props.user.id?u["default"].createElement(p["default"],{subcategories:this.props.subcategories,categories:this.props.route.categories,categoriesMap:this.props.route.categoriesMap,list:this.props.route.list,threads:this.props.threads,moderation:this.props.moderation,selection:this.props.selection,selectAllThreads:this.props.selectAllThreads,selectNoneThreads:this.props.selectNoneThreads,addThreads:this.props.addThreads,freezeThread:this.props.freezeThread,deleteThread:this.props.deleteThread,updateThread:this.props.updateThread,route:this.props.route,disabled:this.getDisableToolbar(),user:this.props.user}):null}},{key:"render",value:function(){return u["default"].createElement("div",{className:"container"},this.getCategoryDescription(),this.getToolbar(),this.props.children)}}]),t}(u["default"].Component);a["default"]=h},{"../page-lead":58,"./toolbar":205,react:"react"}],195:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("react-router"),d=e("../button"),f=r(d),p=e("../dropdown-toggle"),h=r(p),m=e("./navs"),b=e("../../reducers/threads"),v=e("../../services/ajax"),y=r(v),g=e("../../services/posting"),_=r(g),E=e("../../services/snackbar"),w=r(E),O=e("../../services/store"),k=r(O),N=e("../.."),j=r(N),x=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.markAsRead=function(){a.setState({isBusy:!0}),y["default"].post(a.props.route.category.api_url.read).then(function(){k["default"].dispatch((0,b.read)(a.props.route.categoriesMap,a.props.route.category)),a.setState({isBusy:!1}),w["default"].success(gettext("Threads have been marked as read."))},function(e){a.setState({isBusy:!1}),w["default"].apiError(e)})},a.startThread=function(){_["default"].open(a.props.startThread||{mode:"START",config:j["default"].get("THREAD_EDITOR_API"),submit:j["default"].get("THREADS_API"),category:a.props.route.category.id})},a.state={isBusy:!1},a}return s(t,e),l(t,[{key:"getGoBackButton",value:function(){if(this.props.route.category.parent){var e=this.props.categories[this.props.route.category.parent];return u["default"].createElement(c.Link,{className:"btn btn-default btn-aligned btn-icon btn-go-back pull-left",to:e.absolute_url+this.props.route.list.path},u["default"].createElement("span",{className:"material-icon"},"keyboard_arrow_left"))}return null}},{key:"getStartThreadButton",value:function(){return this.props.user.id?u["default"].createElement(f["default"],{className:"btn btn-success btn-aligned hidden-xs hidden-sm",onClick:this.startThread,disabled:this.props.disabled},u["default"].createElement("span",{className:"material-icon"},"chat"),gettext("Start thread")):null}},{key:"getMarkAsReadButton",value:function(){return this.props.user.id?u["default"].createElement(f["default"],{className:"btn btn-default btn-aligned hidden-xs hidden-sm",onClick:this.markAsRead,loading:this.state.isBusy,disabled:this.props.disabled},u["default"].createElement("span",{className:"material-icon"},"playlist_add_check"),gettext("Mark as read")):null}},{key:"getCompactNavToggle",value:function(){return this.props.route.lists.length>1?u["default"].createElement(h["default"],{toggleNav:this.props.toggleNav,dropdown:this.props.dropdown}):null}},{key:"getTabsNav",value:function(){return this.props.route.lists.length>1?u["default"].createElement(m.TabsNav,{baseUrl:this.props.route.category.absolute_url,list:this.props.route.list,lists:this.props.route.lists}):null}},{key:"getClassName",value:function(){return this.props.route.lists.length>1?"page-header tabbed":"page-header"}},{key:"render",value:function(){return u["default"].createElement("div",{className:this.getClassName()},u["default"].createElement("div",{className:"container"},this.getGoBackButton(),u["default"].createElement("h1",{className:"pull-left"},this.props.title),this.getStartThreadButton(),this.getMarkAsReadButton(),this.getCompactNavToggle()),this.getTabsNav())}}]),t}(u["default"].Component);a["default"]=x},{"../..":234,"../../reducers/threads":289,"../../services/ajax":293,"../../services/posting":302,"../../services/snackbar":303,"../../services/store":304,"../button":5,"../dropdown-toggle":19,"./navs":202,react:"react","react-router":"react-router"}],196:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return"all"===this.props.list.type?this.props.emptyMessage?u["default"].createElement("li",{className:"list-group-item empty-message"},u["default"].createElement("p",{className:"lead"},this.props.emptyMessage),u["default"].createElement("p",null,gettext("Why not start one yourself?"))):u["default"].createElement("li",{className:"list-group-item empty-message"},u["default"].createElement("p",{className:"lead"},this.props.category.special_role?gettext("There are no threads on this forum... yet!"):gettext("There are no threads in this category.")),u["default"].createElement("p",null,gettext("Why not start one yourself?"))):u["default"].createElement("li",{className:"list-group-item empty-message"},gettext("No threads matching specified criteria were found."));
}}]),t}(u["default"].Component);a["default"]=c},{react:"react"}],197:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("./errors-list"),f=n(d),p=e("./merge"),h=n(p),m=e("./move"),b=n(m),v=e("../../../reducers/selection"),y=r(v),g=e("../../../services/ajax"),_=n(g),E=e("../../../services/modal"),w=n(E),O=e("../../../services/snackbar"),k=n(O),N=e("../../../services/store"),j=n(N),x=e("../../../utils/countdown"),P=n(x),C=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.callApi=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=[],o=new P["default"](function(){r.props.threads.forEach(function(e){r.props.freezeThread(e.id)}),n.length?w["default"].show(c["default"].createElement(f["default"],{errors:n})):(k["default"].success(t),a&&a())},r.props.threads.length);e.push({op:"add",path:"acl",value:!0}),r.props.threads.forEach(function(t){r.props.freezeThread(t.id),_["default"].patch(t.api.index,e).then(function(e){r.props.updateThread(e),o.count()},function(e){n.push({thread:t,errors:[e.detail]}),o.count()})})},r.pinGlobally=function(){r.callApi([{op:"replace",path:"weight",value:2}],gettext("Selected threads were pinned globally."))},r.pinLocally=function(){r.callApi([{op:"replace",path:"weight",value:1}],gettext("Selected threads were pinned locally."))},r.unpin=function(){r.callApi([{op:"replace",path:"weight",value:0}],gettext("Selected threads were unpinned."))},r.approve=function(){r.callApi([{op:"replace",path:"is-unapproved",value:!1}],gettext("Selected threads were approved."))},r.open=function(){r.callApi([{op:"replace",path:"is-closed",value:!1}],gettext("Selected threads were opened."))},r.close=function(){r.callApi([{op:"replace",path:"is-closed",value:!0}],gettext("Selected threads were closed."))},r.unhide=function(){r.callApi([{op:"replace",path:"is-hidden",value:!1}],gettext("Selected threads were unhidden."))},r.hide=function(){r.callApi([{op:"replace",path:"is-hidden",value:!0}],gettext("Selected threads were hidden."))},r.move=function(){w["default"].show(c["default"].createElement(b["default"],{callApi:r.callApi,categories:r.props.categories,categoriesMap:r.props.categoriesMap,route:r.props.route,user:r.props.user}))},r.merge=function(){var e=[];if(r.props.threads.forEach(function(t){t.acl.can_merge||e.append({id:t.id,title:t.title,errors:[gettext("You don't have permission to merge this thread with others.")]})}),r.props.threads.length<2)k["default"].info(gettext("You have to select at least two threads to merge."));else{if(e.length)return void w["default"].show(c["default"].createElement(f["default"],{errors:e}));w["default"].show(c["default"].createElement(h["default"],r.props))}},r["delete"]=function(){if(confirm(gettext("Are you sure you want to delete selected threads?"))){var e=[],t=new P["default"](function(){e.length?w["default"].show(c["default"].createElement(f["default"],{errors:e})):k["default"].success(gettext("Selected threads were deleted.")),r.props.threads.forEach(function(e){r.props.freezeThread(e.id)}),j["default"].dispatch(y.all(r.props.threads.map(function(e){return e.id})))},r.props.threads.length);r.props.threads.forEach(function(a){r.props.freezeThread(a.id),_["default"]["delete"](a.api.index).then(function(e){r.props.freezeThread(a.id),r.props.deleteThread(a),t.count()},function(r){e.push({thread:a,errors:[r.detail]}),t.count()})})}},n=a,s(r,n)}return l(t,e),i(t,[{key:"getPinGloballyButton",value:function(){return 2==this.props.moderation.can_pin?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.pinGlobally},gettext("Pin threads globally"))):null}},{key:"getPinLocallyButton",value:function(){return this.props.moderation.can_pin>0?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.pinLocally},gettext("Pin threads locally"))):null}},{key:"getUnpinButton",value:function(){return this.props.moderation.can_pin>0?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.unpin},gettext("Unpin threads"))):null}},{key:"getMoveButton",value:function(){return this.props.moderation.can_move?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.move},gettext("Move threads"))):null}},{key:"getMergeButton",value:function(){return this.props.moderation.can_merge?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.merge},gettext("Merge threads"))):null}},{key:"getApproveButton",value:function(){return this.props.moderation.can_approve?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.approve},gettext("Approve threads"))):null}},{key:"getOpenButton",value:function(){return this.props.moderation.can_close?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.open},gettext("Open threads"))):null}},{key:"getCloseButton",value:function(){return this.props.moderation.can_close?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.close},gettext("Close threads"))):null}},{key:"getUnhideButton",value:function(){return this.props.moderation.can_hide?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.unhide},gettext("Unhide threads"))):null}},{key:"getHideButton",value:function(){return this.props.moderation.can_hide?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this.hide},gettext("Hide threads"))):null}},{key:"getDeleteButton",value:function(){return 2==this.props.moderation.can_hide?c["default"].createElement("li",null,c["default"].createElement("button",{type:"button",className:"btn btn-link",onClick:this["delete"]},gettext("Delete threads"))):null}},{key:"render",value:function(){return c["default"].createElement("ul",{className:this.props.className},this.getPinGloballyButton(),this.getPinLocallyButton(),this.getUnpinButton(),this.getMoveButton(),this.getMergeButton(),this.getApproveButton(),this.getOpenButton(),this.getCloseButton(),this.getUnhideButton(),this.getHideButton(),this.getDeleteButton())}}]),t}(c["default"].Component);a["default"]=C},{"../../../reducers/selection":286,"../../../services/ajax":293,"../../../services/modal":299,"../../../services/snackbar":303,"../../../services/store":304,"../../../utils/countdown":309,"./errors-list":198,"./merge":199,"./move":200,react:"react"}],198:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return c["default"].createElement("li",null,c["default"].createElement("h5",null,e.thread.title),c["default"].createElement("ul",{className:"list-unstyled list-item-errors"},e.errors.map(function(e,t){return c["default"].createElement("li",{key:t},e)})))}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.ThreadErrors=l;var u=e("react"),c=r(u),d=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"render",value:function(){return c["default"].createElement("div",{className:"modal-dialog",role:"document"},c["default"].createElement("div",{className:"modal-content"},c["default"].createElement("div",{className:"modal-header"},c["default"].createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},c["default"].createElement("span",{"aria-hidden":"true"},"×")),c["default"].createElement("h4",{className:"modal-title"},gettext("Threads moderation"))),c["default"].createElement("div",{className:"modal-body"},c["default"].createElement("p",{className:"lead"},gettext("Errors were encountered when performing moderation action on one or more threads:")),c["default"].createElement("ul",{className:"list-unstyled list-errored-items"},this.props.errors.map(function(e){return c["default"].createElement(l,{errors:e.errors,key:e.thread.id,thread:e.thread})})))))}}]),t}(c["default"].Component);a["default"]=d},{react:"react"}],199:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../../button"),f=n(d),p=e("../../form"),h=n(p),m=e("../../form-group"),b=n(m),v=e("../../category-select"),y=n(v),g=e("../../select"),_=n(g),E=e("../../../index"),w=n(E),O=e("../../../reducers/threads"),k=e("../../../reducers/selection"),N=r(k),j=e("./errors-list"),x=n(j),P=e("../../merge-polls"),C=n(P),S=e("../../../services/ajax"),T=n(S),M=e("../../../services/modal"),L=n(M),R=e("../../../services/snackbar"),A=n(R),I=e("../../../services/store"),D=n(I),U=e("../../../utils/validators"),B=r(U),H=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.getFormdata=function(){return{top_category:a.props.route.category.id,threads:a.props.threads.map(function(e){return e.id}),title:a.state.title,category:a.state.category,weight:a.state.weight,is_hidden:a.state.is_hidden,is_closed:a.state.is_closed}},a.handleSuccess=function(e){a.props.threads.forEach(function(e){a.props.freezeThread(e.id),a.props.deleteThread(e)}),D["default"].dispatch(N.none()),a.props.addThreads([e]),D["default"].dispatch((0,O.filterThreads)(a.props.route.category,a.props.categoriesMap)),L["default"].hide()},a.handleError=function(e){400===e.status?e.polls?L["default"].show(c["default"].createElement(C["default"],{api:w["default"].get("MERGE_THREADS_API"),data:a.getFormdata(),polls:e.polls,onError:a.handleError,onSuccess:a.handleSuccess})):(a.setState({errors:Object.assign({},a.state.errors,e)}),A["default"].error(gettext("Form contains errors."))):403===e.status&&Array.isArray(e)?L["default"].show(c["default"].createElement(x["default"],{errors:e})):A["default"].apiError(e)},a.onCategoryChange=function(e){var t=e.target.value,r={category:t};a.acl[t].can_pin_threads<r.weight&&(r.weight=0),a.acl[t].can_hide_threads||(r.is_hidden=0),a.acl[t].can_close_threads||(r.is_closed=!1),a.setState(r)},a.state={isLoading:!1,title:"",category:null,weight:0,is_hidden:0,is_closed:!1,validators:{title:[B.required()]},errors:{}},a.acl={};for(var r in e.user.acl.categories)if(e.user.acl.categories.hasOwnProperty(r)){var n=e.user.acl.categories[r];a.acl[n.id]=n}return a.categoryChoices=[],e.categories.forEach(function(e){if(e.level>0){var t=a.acl[e.id],r=!t.can_start_threads||e.is_closed&&!t.can_close_threads;a.categoryChoices.push({value:e.id,disabled:r,level:e.level-1,label:e.name}),r||a.state.category||(a.state.category=e.id)}}),a.isHiddenChoices=[{value:0,icon:"visibility",label:gettext("No")},{value:1,icon:"visibility_off",label:gettext("Yes")}],a.isClosedChoices=[{value:!1,icon:"lock_outline",label:gettext("No")},{value:!0,icon:"lock",label:gettext("Yes")}],a}return l(t,e),i(t,[{key:"clean",value:function(){return!!this.isValid()||(A["default"].error(gettext("Form contains errors.")),this.setState({errors:this.validate()}),!1)}},{key:"send",value:function(){return T["default"].post(w["default"].get("MERGE_THREADS_API"),this.getFormdata())}},{key:"getWeightChoices",value:function(){var e=[{value:0,icon:"remove",label:gettext("Not pinned")},{value:1,icon:"bookmark_border",label:gettext("Pinned locally")}];return 2==this.acl[this.state.category].can_pin_threads&&e.push({value:2,icon:"bookmark",label:gettext("Pinned globally")}),e}},{key:"renderWeightField",value:function(){return this.acl[this.state.category].can_pin_threads?c["default"].createElement(b["default"],{label:gettext("Thread weight"),"for":"id_weight",labelClass:"col-sm-4",controlClass:"col-sm-8"},c["default"].createElement(_["default"],{id:"id_weight",onChange:this.bindInput("weight"),value:this.state.weight,choices:this.getWeightChoices()})):null}},{key:"renderHiddenField",value:function(){return this.acl[this.state.category].can_hide_threads?c["default"].createElement(b["default"],{label:gettext("Hide thread"),"for":"id_is_hidden",labelClass:"col-sm-4",controlClass:"col-sm-8"},c["default"].createElement(_["default"],{id:"id_is_closed",onChange:this.bindInput("is_hidden"),value:this.state.is_hidden,choices:this.isHiddenChoices})):null}},{key:"renderClosedField",value:function(){return this.acl[this.state.category].can_close_threads?c["default"].createElement(b["default"],{label:gettext("Close thread"),"for":"id_is_closed",labelClass:"col-sm-4",controlClass:"col-sm-8"},c["default"].createElement(_["default"],{id:"id_is_closed",onChange:this.bindInput("is_closed"),value:this.state.is_closed,choices:this.isClosedChoices})):null}},{key:"renderForm",value:function(){return c["default"].createElement("form",{onSubmit:this.handleSubmit},c["default"].createElement("div",{className:"modal-body"},c["default"].createElement(b["default"],{label:gettext("Thread title"),"for":"id_title",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.title},c["default"].createElement("input",{id:"id_title",className:"form-control",type:"text",onChange:this.bindInput("title"),value:this.state.title})),c["default"].createElement("div",{className:"clearfix"}),c["default"].createElement(b["default"],{label:gettext("Category"),"for":"id_category",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.category},c["default"].createElement(y["default"],{id:"id_category",onChange:this.onCategoryChange,value:this.state.category,choices:this.categoryChoices})),c["default"].createElement("div",{className:"clearfix"}),this.renderWeightField(),this.renderHiddenField(),this.renderClosedField()),c["default"].createElement("div",{className:"modal-footer"},c["default"].createElement(f["default"],{className:"btn-primary",loading:this.state.isLoading},gettext("Merge threads"))))}},{key:"renderCantMergeMessage",value:function(){return c["default"].createElement("div",{className:"modal-body"},c["default"].createElement("div",{className:"message-icon"},c["default"].createElement("span",{className:"material-icon"},"info_outline")),c["default"].createElement("div",{className:"message-body"},c["default"].createElement("p",{className:"lead"},gettext("You can't move threads because there are no categories you are allowed to move them to.")),c["default"].createElement("p",null,gettext("You need permission to start threads in category to be able to merge threads to it."))))}},{key:"getClassName",value:function(){return this.state.category?"modal-dialog":"modal-dialog modal-message"}},{key:"render",value:function(){return c["default"].createElement("div",{className:this.getClassName(),role:"document"},c["default"].createElement("div",{className:"modal-content"},c["default"].createElement("div",{className:"modal-header"},c["default"].createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},c["default"].createElement("span",{"aria-hidden":"true"},"×")),c["default"].createElement("h4",{className:"modal-title"},gettext("Merge threads"))),this.state.category?this.renderForm():this.renderCantMergeMessage()))}}]),t}(h["default"]);a["default"]=H},{"../../../index":234,"../../../reducers/selection":286,"../../../reducers/threads":289,"../../../services/ajax":293,"../../../services/modal":299,"../../../services/snackbar":303,"../../../services/store":304,"../../../utils/validators":320,"../../button":5,"../../category-select":13,"../../form":41,"../../form-group":40,"../../merge-polls":44,"../../select":152,"./errors-list":198,react:"react"}],200:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../../form"),f=n(d),p=e("../../form-group"),h=n(p),m=e("../../category-select"),b=n(m),v=e("../../../reducers/selection"),y=r(v),g=e("../../../reducers/threads"),_=e("../../../services/modal"),E=n(_),w=e("../../../services/store"),O=n(w),k=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleSubmit=function(e){e.preventDefault(),E["default"].hide();var t=function(){O["default"].dispatch((0,g.filterThreads)(a.props.route.category,a.props.categoriesMap));var e=O["default"].getState(),t=e.threads.map(function(e){return e.id});O["default"].dispatch(y.all(e.selection.filter(function(e){return t.indexOf(e)!==-1})))};a.props.callApi([{op:"replace",path:"category",value:a.state.category},{op:"add",path:"top-category",value:a.props.route.category.id},{op:"replace",path:"flatten-categories",value:null},{op:"add",path:"acl",value:!0}],gettext("Selected threads were moved."),t)},a.state={category:null};var r={};for(var n in e.user.acl.categories)if(e.user.acl.categories.hasOwnProperty(n)){var l=e.user.acl.categories[n];r[l.id]=l}return a.categoryChoices=[],e.categories.forEach(function(e){if(e.level>0){var t=r[e.id],n=!t.can_start_threads||e.is_closed&&!t.can_close_threads;a.categoryChoices.push({value:e.id,disabled:n,level:e.level-1,label:e.name}),n||a.state.category||(a.state.category=e.id)}}),a}return l(t,e),i(t,[{key:"getClassName",value:function(){return this.state.category?"modal-dialog":"modal-dialog modal-message"}},{key:"renderForm",value:function(){return c["default"].createElement("form",{onSubmit:this.handleSubmit},c["default"].createElement("div",{className:"modal-body"},c["default"].createElement(h["default"],{label:gettext("New category"),"for":"id_new_category",labelClass:"col-sm-4",controlClass:"col-sm-8"},c["default"].createElement(b["default"],{id:"id_new_category",onChange:this.bindInput("category"),value:this.state.category,choices:this.categoryChoices}))),c["default"].createElement("div",{className:"modal-footer"},c["default"].createElement("button",{className:"btn btn-primary"},gettext("Move threads"))))}},{key:"renderCantMoveMessage",value:function(){return c["default"].createElement("div",{className:"modal-body"},c["default"].createElement("div",{className:"message-icon"},c["default"].createElement("span",{className:"material-icon"},"info_outline")),c["default"].createElement("div",{className:"message-body"},c["default"].createElement("p",{className:"lead"},gettext("You can't move threads because there are no categories you are allowed to move them to.")),c["default"].createElement("p",null,gettext("You need permission to start threads in category to be able to move threads to it."))))}},{key:"render",value:function(){return c["default"].createElement("div",{className:this.getClassName(),role:"document"},c["default"].createElement("div",{className:"modal-content"},c["default"].createElement("div",{className:"modal-header"},c["default"].createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},c["default"].createElement("span",{"aria-hidden":"true"},"×")),c["default"].createElement("h4",{className:"modal-title"},gettext("Move threads"))),this.state.category?this.renderForm():this.renderCantMoveMessage()))}}]),t}(f["default"]);a["default"]=k},{"../../../reducers/selection":286,"../../../reducers/threads":289,"../../../services/modal":299,"../../../services/store":304,"../../category-select":13,"../../form":41,"../../form-group":40,react:"react"}],201:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../../../reducers/selection"),f=r(d),p=e("../../../services/store"),h=n(p),m=function(e){function t(){var e,a,r,n;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.selectAll=function(){h["default"].dispatch(f.all(r.props.threads.map(function(e){return e.id})))},r.selectNone=function(){h["default"].dispatch(f.none())},n=a,s(r,n)}return l(t,e),i(t,[{key:"render",value:function(){return c["default"].createElement("ul",{className:this.props.className},c["default"].createElement("li",null,c["default"].createElement("button",{className:"btn btn-link",type:"button",onClick:this.selectAll},c["default"].createElement("span",{className:"material-icon"},"check_box"),gettext("Select all"))),c["default"].createElement("li",null,c["default"].createElement("button",{className:"btn btn-link",type:"button",onClick:this.selectNone},c["default"].createElement("span",{className:"material-icon"},"check_box_outline_blank"),gettext("Select none"))))}}]),t}(c["default"].Component);a["default"]=m},{"../../../reducers/selection":286,"../../../services/store":304,react:"react"}],202:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0}),a.CompactNav=a.TabsNav=void 0;var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("react-router"),d=e("../li"),f=r(d),p=function(e,t,a,r){return a.map(function(a){return u["default"].createElement(f["default"],{isControlled:!0,isActive:a.path===t.path,key:e+a.path},u["default"].createElement(c.Link,{to:e+a.path,onClick:r},u["default"].createElement("span",{className:"hidden-xs hidden-sm"},a.name),u["default"].createElement("span",{className:"hidden-md hidden-lg"},a.longName)))})};a.TabsNav=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"page-tabs hidden-xs hidden-sm"},u["default"].createElement("div",{className:"container"},u["default"].createElement("ul",{className:"nav nav-pills"},p(this.props.baseUrl,this.props.list,this.props.lists,this.props.hideNav))))}}]),t}(u["default"].Component),a.CompactNav=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("ul",{className:"dropdown-menu",role:"menu"},p(this.props.baseUrl,this.props.list,this.props.lists,this.props.hideNav))}}]),t}(u["default"].Component)},{"../li":42,react:"react","react-router":"react-router"}],203:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return function(t){return{options:e,selection:t.selection,threads:t.threads,tick:t.tick.tick,user:t.auth.user}}}function o(e){var t=[{type:"all",path:"",name:gettext("All"),longName:gettext("All threads")}];return e.id&&(t.push({type:"my",path:"my/",name:gettext("My"),longName:gettext("My threads")}),t.push({type:"new",path:"new/",name:gettext("New"),longName:gettext("New threads")}),t.push({type:"unread",path:"unread/",name:gettext("Unread"),longName:gettext("Unread threads")}),t.push({type:"subscribed",path:"subscribed/",name:gettext("Subscribed"),longName:gettext("Subscribed threads")}),e.acl.can_see_unapproved_content_lists&&t.push({type:"unapproved",path:"unapproved/",name:gettext("Unapproved"),longName:gettext("Unapproved content")})),t}function s(e,t){var a=o(e),r=[],s={};return d["default"].get("CATEGORIES").forEach(function(e){a.forEach(function(o){s[e.id]=e,r.push({path:e.absolute_url+o.path,component:(0,l.connect)(n(t))(u["default"]),categories:d["default"].get("CATEGORIES"),categoriesMap:s,category:e,lists:a,list:o})})}),r}Object.defineProperty(a,"__esModule",{value:!0}),a.getSelect=n,a.getLists=o,a.paths=s;var l=e("react-redux"),i=e("./route"),u=r(i),c=e("../../index"),d=r(c)},{"../../index":234,"./route":204,"react-redux":"react-redux"}],204:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../button"),f=n(d),p=e("./compare"),h=e("./container"),m=n(h),b=e("./navs"),v=e("./header"),y=n(v),g=e("./utils"),_=e("../threads-list/root"),E=n(_),w=e("./list-empty"),O=n(w),k=e("../with-dropdown"),N=n(k),j=e("../../index"),x=n(j),P=e("../../reducers/selection"),C=r(P),S=e("../../reducers/threads"),T=e("../../services/ajax"),M=n(T),L=e("../../services/polls"),R=n(L),A=e("../../services/snackbar"),I=n(A),D=e("../../services/store"),U=n(D),B=e("../../services/page-title"),H=n(B),z=e("../../utils/sets"),F=r(z),G=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.loadMore=function(){a.setState({isBusy:!0}),a.loadThreads(a.getCategory(),a.state.page+1)},a.pollResponse=function(e){a.setState({diff:Object.assign({},e,{results:(0,g.diffThreads)(a.props.threads,e.results)})})},a.addThreads=function(e){U["default"].dispatch((0,S.append)(e,a.getSorting()))},a.applyDiff=function(){a.addThreads(a.state.diff.results),a.setState(Object.assign({},a.state.diff,{moderation:(0,g.getModerationActions)(U["default"].getState().threads),diff:{results:[]}}))},a.freezeThread=function(e){a.setState(function(t){return{busyThreads:F.toggle(t.busyThreads,e)}})},a.updateThread=function(e){U["default"].dispatch((0,S.patch)(e,e,a.getSorting()))},a.deleteThread=function(e){U["default"].dispatch((0,S.deleteThread)(e));
},a.state={isMounted:!0,isLoaded:!1,isBusy:!1,diff:{results:[]},moderation:[],busyThreads:[],dropdown:!1,subcategories:[],count:0,more:0,page:1,pages:1};var r=a.getCategory();return x["default"].has("THREADS")?a.initWithPreloadedData(r,x["default"].get("THREADS")):a.initWithoutPreloadedData(r),a}return l(t,e),i(t,[{key:"getCategory",value:function(){return this.props.route.category.special_role?null:this.props.route.category.id}},{key:"initWithPreloadedData",value:function(e,t){this.state=Object.assign(this.state,{moderation:(0,g.getModerationActions)(t.results),subcategories:t.subcategories,count:t.count,more:t.more,page:t.page,pages:t.pages}),this.startPolling(e)}},{key:"initWithoutPreloadedData",value:function(e){this.loadThreads(e)}},{key:"loadThreads",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;M["default"].get(this.props.options.api,{category:e,list:this.props.route.list.type,page:a||1},"threads").then(function(r){t.state.isMounted&&(1===a?U["default"].dispatch((0,S.hydrate)(r.results)):U["default"].dispatch((0,S.append)(r.results,t.getSorting())),t.setState({isLoaded:!0,isBusy:!1,moderation:(0,g.getModerationActions)(U["default"].getState().threads),subcategories:r.subcategories,count:r.count,more:r.more,page:r.page,pages:r.pages}),t.startPolling(e))},function(e){I["default"].apiError(e)})}},{key:"startPolling",value:function(e){R["default"].start({poll:"threads",url:this.props.options.api,data:{category:e,list:this.props.route.list.type},frequency:12e4,update:this.pollResponse})}},{key:"componentDidMount",value:function(){this.setPageTitle(),x["default"].has("THREADS")&&(U["default"].dispatch((0,S.hydrate)(x["default"].pop("THREADS").results)),this.setState({isLoaded:!0})),U["default"].dispatch(C.none())}},{key:"componentWillUnmount",value:function(){this.state.isMounted=!1,R["default"].stop("threads")}},{key:"getTitle",value:function(){return this.props.options.title?this.props.options.title:(0,g.getTitle)(this.props.route)}},{key:"setPageTitle",value:function(){this.props.route.category.level||!x["default"].get("THREADS_ON_INDEX")?H["default"].set((0,g.getPageTitle)(this.props.route)):this.props.options.title?H["default"].set(this.props.options.title):x["default"].get("SETTINGS").forum_index_title?document.title=x["default"].get("SETTINGS").forum_index_title:document.title=x["default"].get("SETTINGS").forum_name}},{key:"getSorting",value:function(){return this.props.route.category.special_role?p.compareGlobalWeight:p.compareWeight}},{key:"getCompactNav",value:function(){return this.props.route.lists.length>1?c["default"].createElement("div",{className:this.getCompactNavClassName()},c["default"].createElement(b.CompactNav,{baseUrl:this.props.route.category.absolute_url,list:this.props.route.list,lists:this.props.route.lists,hideNav:this.hideNav})):null}},{key:"getMoreButton",value:function(){return this.state.more?c["default"].createElement("div",{className:"pager-more"},c["default"].createElement(f["default"],{loading:this.state.isBusy||this.state.busyThreads.length,onClick:this.loadMore},gettext("Show more"))):null}},{key:"getClassName",value:function(){var e="page page-threads";return e+=" page-threads-"+this.props.route.list,this.props.route.category.css_class&&(e+=" page-"+this.props.route.category.css_class),e}},{key:"render",value:function(){return c["default"].createElement("div",{className:this.getClassName()},c["default"].createElement(y["default"],{categories:this.props.route.categoriesMap,disabled:!this.state.isLoaded,startThread:this.props.options.startThread,threads:this.props.threads,title:this.getTitle(),toggleNav:this.toggleNav,route:this.props.route,user:this.props.user}),this.getCompactNav(),c["default"].createElement(m["default"],{route:this.props.route,subcategories:this.state.subcategories,user:this.props.user,pageLead:this.props.options.pageLead,threads:this.props.threads,threadsCount:this.state.count,moderation:this.state.moderation,selection:this.props.selection,busyThreads:this.state.busyThreads,addThreads:this.addThreads,freezeThread:this.freezeThread,deleteThread:this.deleteThread,updateThread:this.updateThread,isLoaded:this.state.isLoaded,isBusy:this.state.isBusy},c["default"].createElement(E["default"],{categories:this.props.route.categoriesMap,list:this.props.route.list,selection:this.props.selection,threads:this.props.threads,diffSize:this.state.diff.results.length,applyDiff:this.applyDiff,showOptions:!!this.props.user.id,isLoaded:this.state.isLoaded,busyThreads:this.state.busyThreads},c["default"].createElement(O["default"],{category:this.props.route.category,emptyMessage:this.props.options.emptyMessage,list:this.props.route.list})),this.getMoreButton()))}}]),t}(N["default"]);a["default"]=G},{"../../index":234,"../../reducers/selection":286,"../../reducers/threads":289,"../../services/ajax":293,"../../services/page-title":300,"../../services/polls":301,"../../services/snackbar":303,"../../services/store":304,"../../utils/sets":318,"../button":5,"../threads-list/root":179,"../with-dropdown":232,"./compare":193,"./container":194,"./header":195,"./list-empty":196,"./navs":202,"./utils":206,react:"react"}],205:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./category-picker"),d=r(c),f=e("./moderation/controls"),p=r(f),h=e("./moderation/selection"),m=r(h),b=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getCategoryPicker",value:function(){return this.props.subcategories.length?u["default"].createElement("div",{className:"toolbar-left"},u["default"].createElement(d["default"],{choices:this.props.subcategories,categories:this.props.categoriesMap,list:this.props.list})):null}},{key:"showModerationOptions",value:function(){return this.props.user.id&&this.props.moderation.allow}},{key:"getSelectionButton",value:function(){return this.showModerationOptions()?u["default"].createElement("div",{className:"toolbar-right dropdown"},u["default"].createElement("button",{type:"button",className:"btn btn-default btn-icon dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:this.props.disabled},u["default"].createElement("span",{className:"material-icon"},"select_all")),u["default"].createElement(m["default"],{className:"dropdown-menu dropdown-menu-right",threads:this.props.threads})):null}},{key:"getSelectedThreads",value:function(){var e=this;return this.props.threads.filter(function(t){return e.props.selection.indexOf(t.id)>=0})}},{key:"getModerationButton",value:function(){return this.showModerationOptions()?u["default"].createElement("div",{className:"toolbar-right dropdown"},u["default"].createElement("button",{type:"button",className:"btn btn-default dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:this.props.disabled||!this.props.selection.length},u["default"].createElement("span",{className:"material-icon"},"settings"),gettext("Options")),u["default"].createElement(p["default"],{addThreads:this.props.addThreads,categories:this.props.categories,categoriesMap:this.props.categoriesMap,className:"dropdown-menu dropdown-menu-right",deleteThread:this.props.deleteThread,freezeThread:this.props.freezeThread,moderation:this.props.moderation,route:this.props.route,threads:this.getSelectedThreads(),updateThread:this.props.updateThread,user:this.props.user})):null}},{key:"render",value:function(){return u["default"].createElement("div",{className:"toolbar with-js"},this.getCategoryPicker(),this.getSelectionButton(),this.getModerationButton())}}]),t}(u["default"].Component);a["default"]=b},{"./category-picker":192,"./moderation/controls":197,"./moderation/selection":201,react:"react"}],206:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return e.category.level?e.list.path?{title:e.list.longName,parent:e.category.name}:{title:e.category.name}:c["default"].get("THREADS_ON_INDEX")?e.list.path?{title:e.list.longName}:null:e.list.path?{title:e.list.longName,parent:gettext("Threads")}:{title:gettext("Threads")}}function o(e){return e.category.level?e.category.name:c["default"].get("THREADS_ON_INDEX")?c["default"].get("SETTINGS").forum_index_title?c["default"].get("SETTINGS").forum_index_title:c["default"].get("SETTINGS").forum_name:gettext("Threads")}function s(e,t){return[e.title===t.title,e.weight===t.weight,e.category===t.category,e.top_category===t.top_category,e.last_post===t.last_post,e.last_poster_name===t.last_poster_name].indexOf(!1)>=0}function l(e,t){var a={};return e.forEach(function(e){a[e.id]=e}),t.filter(function(e){return!a[e.id]||s(a[e.id],e)})}function i(e){var t={allow:!1,can_approve:0,can_close:0,can_hide:0,can_merge:0,can_move:0,can_pin:0};return e.forEach(function(e){e.is_unapproved&&e.acl.can_approve>t.can_approve&&(t.can_approve=e.acl.can_approve),e.acl.can_close>t.can_close&&(t.can_close=e.acl.can_close),e.acl.can_hide>t.can_hide&&(t.can_hide=e.acl.can_hide),e.acl.can_merge>t.can_merge&&(t.can_merge=e.acl.can_merge),e.acl.can_move>t.can_move&&(t.can_move=e.acl.can_move),e.acl.can_pin>t.can_pin&&(t.can_pin=e.acl.can_pin),t.allow=t.can_approve||t.can_close||t.can_hide||t.can_merge||t.can_move||t.can_pin}),t}Object.defineProperty(a,"__esModule",{value:!0}),a.getPageTitle=n,a.getTitle=o,a.isThreadChanged=s,a.diffThreads=l,a.getModerationActions=i;var u=e("../../index"),c=r(u)},{"../../index":234}],207:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0}),a.CompactGuestNav=a.GuestNav=a.GuestMenu=void 0;var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../avatar"),d=r(c),f=e("../register-button"),p=r(f),h=e("../sign-in.js"),m=r(h),b=e("../../services/mobile-navbar-dropdown"),v=r(b),y=e("../../services/modal"),g=r(y),_=a.GuestMenu=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"showSignInModal",value:function(){g["default"].show(m["default"])}},{key:"render",value:function(){return u["default"].createElement("ul",{className:"dropdown-menu user-dropdown dropdown-menu-right",role:"menu"},u["default"].createElement("li",{className:"guest-preview"},u["default"].createElement("h4",null,gettext("You are browsing as guest.")),u["default"].createElement("p",null,gettext("Sign in or register to start and participate in discussions.")),u["default"].createElement("div",{className:"row"},u["default"].createElement("div",{className:"col-xs-6"},u["default"].createElement("button",{type:"button",className:"btn btn-default btn-block",onClick:this.showSignInModal},gettext("Sign in"))),u["default"].createElement("div",{className:"col-xs-6"},u["default"].createElement(p["default"],{className:"btn-primary btn-block"},gettext("Register"))))))}}]),t}(u["default"].Component);a.GuestNav=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"nav nav-guest"},u["default"].createElement("button",{type:"button",className:"btn navbar-btn btn-default",onClick:this.showSignInModal},gettext("Sign in")),u["default"].createElement(p["default"],{className:"navbar-btn btn-primary"},gettext("Register")))}}]),t}(_),a.CompactGuestNav=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"showGuestMenu",value:function(){v["default"].show(_)}},{key:"render",value:function(){return u["default"].createElement("button",{type:"button",onClick:this.showGuestMenu},u["default"].createElement(d["default"],{size:"64"}))}}]),t}(u["default"].Component)},{"../../services/mobile-navbar-dropdown":298,"../../services/modal":299,"../avatar":3,"../register-button":140,"../sign-in.js":153,react:"react"}],208:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return e.auth}Object.defineProperty(a,"__esModule",{value:!0}),a.CompactUserMenu=a.UserMenu=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.select=l;var u=e("react"),c=r(u),d=e("./guest-nav"),f=e("./user-nav");a.UserMenu=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"render",value:function(){return this.props.isAuthenticated?c["default"].createElement(f.UserNav,{user:this.props.user}):c["default"].createElement(d.GuestNav,null)}}]),t}(c["default"].Component),a.CompactUserMenu=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"render",value:function(){return this.props.isAuthenticated?c["default"].createElement(f.CompactUserNav,{user:this.props.user}):c["default"].createElement(d.CompactGuestNav,null)}}]),t}(c["default"].Component)},{"./guest-nav":207,"./user-nav":209,react:"react"}],209:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return e.user.unread_private_threads?p["default"].createElement("span",{className:"badge"},e.user.unread_private_threads):null}function i(e){return p["default"].createElement("ul",{className:"ul nav navbar-nav nav-user"},p["default"].createElement(u,{user:e.user}),p["default"].createElement("li",{className:"dropdown"},p["default"].createElement("a",{"aria-haspopup":"true","aria-expanded":"false",className:"dropdown-toggle","data-toggle":"dropdown",href:e.user.absolute_url,role:"button"},p["default"].createElement(b["default"],{user:e.user,size:"64"})),p["default"].createElement(N,{user:e.user})))}function u(e){return e.user.unread_private_threads?p["default"].createElement("li",null,p["default"].createElement("a",{className:"navbar-notification",href:_["default"].get("PRIVATE_THREADS_URL"),title:gettext("You have unread private threads.")},p["default"].createElement("span",{className:"material-icon"},"message"),p["default"].createElement("span",{className:"badge"},e.user.unread_private_threads))):null}function c(e){return{user:e.auth.user}}Object.defineProperty(a,"__esModule",{value:!0}),a.CompactUserNav=a.UserMenu=void 0;var d=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.PrivateThreadsBadge=l,a.UserNav=i,a.UserPrivateThreadsLink=u,a.selectUserMenu=c;var f=e("react"),p=r(f),h=e("react-redux"),m=e("../avatar"),b=r(m),v=e("../change-avatar/root"),y=r(v),g=e("../.."),_=r(g),E=e("../../services/mobile-navbar-dropdown"),w=r(E),O=e("../../services/modal"),k=r(O),N=a.UserMenu=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),d(t,[{key:"logout",value:function(){var e=confirm(gettext("Are you sure you want to sign out?"));e&&$("#hidden-logout-form").submit()}},{key:"changeAvatar",value:function(){k["default"].show((0,h.connect)(v.select)(y["default"]))}},{key:"render",value:function(){return p["default"].createElement("ul",{className:"dropdown-menu user-dropdown dropdown-menu-right",role:"menu"},p["default"].createElement("li",{className:"dropdown-header"},p["default"].createElement("strong",null,this.props.user.username)),p["default"].createElement("li",{className:"divider"}),p["default"].createElement("li",null,p["default"].createElement("a",{href:this.props.user.absolute_url},p["default"].createElement("span",{className:"material-icon"},"account_circle"),gettext("See your profile"))),p["default"].createElement("li",null,p["default"].createElement("a",{href:_["default"].get("USERCP_URL")},p["default"].createElement("span",{className:"material-icon"},"done_all"),gettext("Change options"))),p["default"].createElement("li",null,p["default"].createElement("button",{className:"btn-link",onClick:this.changeAvatar,type:"button"},p["default"].createElement("span",{className:"material-icon"},"portrait"),gettext("Change avatar"))),p["default"].createElement("li",null,p["default"].createElement("a",{href:_["default"].get("PRIVATE_THREADS_URL")},p["default"].createElement("span",{className:"material-icon"},"message"),gettext("Private threads"),p["default"].createElement(l,{user:this.props.user}))),p["default"].createElement("li",{className:"divider"}),p["default"].createElement("li",{className:"dropdown-buttons"},p["default"].createElement("button",{className:"btn btn-default btn-block",onClick:this.logout,type:"button"},gettext("Log out"))))}}]),t}(p["default"].Component);a.CompactUserNav=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),d(t,[{key:"showUserMenu",value:function(){w["default"].showConnected("user-menu",(0,h.connect)(c)(N))}},{key:"render",value:function(){return p["default"].createElement("button",{type:"button",onClick:this.showUserMenu},p["default"].createElement(b["default"],{user:this.props.user,size:"64"}))}}]),t}(p["default"].Component)},{"../..":234,"../../services/mobile-navbar-dropdown":298,"../../services/modal":299,"../avatar":3,"../change-avatar/root":17,react:"react","react-redux":"react-redux"}],210:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){var t="";return e.is_banned?t="banned":e.is_hidden?t="offline":e.is_online_hidden?t="online":e.is_offline_hidden?t="offline":e.is_online?t="online":e.is_offline&&(t="offline"),"user-status user-"+t}function i(e,t){return t.is_banned?t.banned_until?interpolate(gettext("%(username)s is banned until %(ban_expires)s"),{username:e.username,ban_expires:t.banned_until.format("LL, LT")},!0):interpolate(gettext("%(username)s is banned"),{username:e.username},!0):t.is_hidden?interpolate(gettext("%(username)s is hiding presence"),{username:e.username},!0):t.is_online_hidden?interpolate(gettext("%(username)s is online (hidden)"),{username:e.username},!0):t.is_offline_hidden?interpolate(gettext("%(username)s was last seen %(last_click)s (hidden)"),{username:e.username,last_click:t.last_click.fromNow()},!0):t.is_online?interpolate(gettext("%(username)s is online"),{username:e.username},!0):t.is_offline?interpolate(gettext("%(username)s was last seen %(last_click)s"),{username:e.username,last_click:t.last_click.fromNow()},!0):void 0}Object.defineProperty(a,"__esModule",{value:!0}),a.StatusLabel=a.StatusIcon=void 0;var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.getStatusClassName=l,a.getStatusDescription=i;var c=e("react"),d=r(c),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"getClass",value:function(){return l(this.props.status)}},{key:"render",value:function(){return d["default"].createElement("span",{className:this.getClass()},this.props.children)}}]),t}(d["default"].Component);a["default"]=f;a.StatusIcon=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"getIcon",value:function(){return this.props.status.is_banned?"remove_circle_outline":this.props.status.is_hidden?"help_outline":this.props.status.is_online_hidden?"label":this.props.status.is_offline_hidden?"label_outline":this.props.status.is_online?"lens":this.props.status.is_offline?"panorama_fish_eye":void 0}},{key:"render",value:function(){return d["default"].createElement("span",{className:"material-icon status-icon"},this.getIcon())}}]),t}(d["default"].Component),a.StatusLabel=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"getHelp",value:function(){return i(this.props.user,this.props.status)}},{key:"getLabel",value:function(){return this.props.status.is_banned?gettext("Banned"):this.props.status.is_hidden?gettext("Hidden"):this.props.status.is_online_hidden?gettext("Online (hidden)"):this.props.status.is_offline_hidden?gettext("Offline (hidden)"):this.props.status.is_online?gettext("Online"):this.props.status.is_offline?gettext("Offline"):void 0}},{key:"render",value:function(){return d["default"].createElement("span",{className:this.props.className||"status-label",title:this.getHelp()},this.getLabel())}}]),t}(d["default"].Component)},{react:"react"}],211:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../avatar"),f=n(d),p=e("../../utils/random"),h=r(p),m=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"getClassName",value:function(){return this.props.hiddenOnMobile?"list-group-item hidden-xs hidden-sm":"list-group-item"}},{key:"render",value:function(){return c["default"].createElement("li",{className:this.getClassName()},c["default"].createElement("div",{className:"change-avatar"},c["default"].createElement("span",{className:"user-avatar"},c["default"].createElement(f["default"],{size:"100"}))),c["default"].createElement("div",{className:"change-author"},c["default"].createElement("span",{className:"ui-preview-text",style:{width:h["int"](30,100)+"px"}}," ")),c["default"].createElement("div",{className:"change"},c["default"].createElement("span",{className:"ui-preview-text",style:{width:h["int"](30,70)+"px"}}," "),c["default"].createElement("span",{className:"material-icon"},"arrow_forward"),c["default"].createElement("span",{className:"ui-preview-text",style:{width:h["int"](30,70)+"px"}}," ")),c["default"].createElement("div",{className:"change-date"},c["default"].createElement("span",{className:"ui-preview-text",style:{width:h["int"](80,140)+"px"}}," ")))}}]),t}(c["default"].Component);a["default"]=m},{"../../utils/random":315,"../avatar":3,react:"react"}],212:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../avatar"),d=r(c),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"renderUserAvatar",value:function(){return this.props.change.changed_by?u["default"].createElement("a",{href:this.props.change.changed_by.absolute_url,className:"user-avatar-wrapper"},u["default"].createElement(d["default"],{user:this.props.change.changed_by,size:"100"})):u["default"].createElement("span",{className:"user-avatar-wrapper"},u["default"].createElement(d["default"],{size:"100"}))}},{key:"renderUsername",value:function(){return this.props.change.changed_by?u["default"].createElement("a",{href:this.props.change.changed_by.absolute_url,className:"item-title"},this.props.change.changed_by.username):u["default"].createElement("span",{className:"item-title"},this.props.change.changed_by_username)}},{key:"render",value:function(){return u["default"].createElement("li",{className:"list-group-item",key:this.props.change.id},u["default"].createElement("div",{className:"change-avatar"},this.renderUserAvatar()),u["default"].createElement("div",{className:"change-author"},this.renderUsername()),u["default"].createElement("div",{className:"change"},u["default"].createElement("span",{className:"old-username"},this.props.change.old_username),u["default"].createElement("span",{className:"material-icon"},"arrow_forward"),u["default"].createElement("span",{className:"new-username"},this.props.change.new_username)),u["default"].createElement("div",{className:"change-date"},u["default"].createElement("abbr",{title:this.props.change.changed_on.format("LLL")},this.props.change.changed_on.fromNow())))}}]),t}(u["default"].Component);a["default"]=f},{"../avatar":3,react:"react"}],213:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getEmptyMessage",value:function(){return this.props.emptyMessage?this.props.emptyMessage:gettext("No name changes have been recorded for your account.")}},{key:"render",value:function(){return u["default"].createElement("div",{className:"username-history ui-ready"},u["default"].createElement("ul",{className:"list-group"},u["default"].createElement("li",{className:"list-group-item empty-message"},this.getEmptyMessage())))}}]),t}(u["default"].Component);a["default"]=c},{react:"react"}],214:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){
var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./change-preview"),d=r(c),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return u["default"].createElement("div",{className:"username-history ui-preview"},u["default"].createElement("ul",{className:"list-group"},[0,1,2].map(function(e){return u["default"].createElement(d["default"],{hiddenOnMobile:e>0,key:e})})))}}]),t}(u["default"].Component);a["default"]=f},{"./change-preview":211,react:"react"}],215:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./change"),d=r(c),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"username-history ui-ready"},u["default"].createElement("ul",{className:"list-group"},this.props.changes.map(function(e){return u["default"].createElement(d["default"],{change:e,key:e.id})})))}}]),t}(u["default"].Component);a["default"]=f},{"./change":212,react:"react"}],216:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./list-empty"),d=r(c),f=e("./list-ready"),p=r(f),h=e("./list-preview"),m=r(h),b=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return this.props.isLoaded?this.props.changes.length?u["default"].createElement(p["default"],{changes:this.props.changes}):u["default"].createElement(d["default"],{emptyMessage:this.props.emptyMessage}):u["default"].createElement(m["default"],null)}}]),t}(u["default"].Component);a["default"]=b},{"./list-empty":213,"./list-preview":214,"./list-ready":215,react:"react"}],217:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./user-card"),d=r(c),f=e("./user-preview"),p=r(f),h=e("../../utils/batch"),m=r(h),b=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"shouldComponentUpdate",value:function(e){return e.isLoaded}},{key:"getPager",value:function(){return this.props.pages>1?u["default"].createElement(Pager,this.props):null}},{key:"getClassName",value:function(){return this.props.className?"users-cards-list "+this.props.className+" ui-ready":"users-cards-list ui-ready"}},{key:"getColClassName",value:function(){return"col-md-"+12/this.props.cols}},{key:"getBody",value:function(){var e=this;if(this.props.isLoaded)return(0,m["default"])(this.props.users,this.props.cols).map(function(t,a){return u["default"].createElement("div",{className:"row",key:a},t.map(function(t){return u["default"].createElement("div",{className:e.getColClassName(),key:t.id},u["default"].createElement(d["default"],{user:t,showStatus:e.props.showStatus,showRank:e.props.showRank}))}))});for(var t=[],a=0;a<this.props.cols;a++)0===a?t.push(this.getColClassName()):t.push(this.getColClassName()+" hidden-xs hidden-sm");return u["default"].createElement("div",{className:"row"},t.map(function(t,a){return u["default"].createElement("div",{className:t,key:a},u["default"].createElement(p["default"],{showStatus:e.props.showStatus}))}))}},{key:"render",value:function(){return u["default"].createElement("div",{className:"users-cards-list ui-ready"},this.getBody())}}]),t}(u["default"].Component);a["default"]=b},{"../../utils/batch":307,"./user-card":218,"./user-preview":219,react:"react"}],218:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../avatar"),f=n(d),p=e("../user-status"),h=n(p),m=e("../../utils/random"),b=r(m),v=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"getUserStatus",value:function(){return this.props.showStatus?this.props.user.status?c["default"].createElement(h["default"],{user:this.props.user,status:this.props.user.status},c["default"].createElement(p.StatusIcon,{user:this.props.user,status:this.props.user.status}),c["default"].createElement(p.StatusLabel,{user:this.props.user,status:this.props.user.status,className:"status-label"})):c["default"].createElement("span",{className:"user-status"},c["default"].createElement("span",{className:"status-icon ui-preview-text"}," "),c["default"].createElement("span",{className:"status-label ui-preview-text",style:{width:b["int"](30,50)+"px"}}," ")):null}},{key:"getRankName",value:function(){return this.props.showRank?this.props.user.rank.is_tab?c["default"].createElement("a",{href:this.props.user.rank.absolute_url,className:"item-title rank-name"},this.props.user.rank.name):c["default"].createElement("span",{className:"item-title rank-name"},this.props.user.rank.name):null}},{key:"getUserTitle",value:function(){return this.props.user.title?c["default"].createElement("span",{className:"user-title"},this.props.user.title):null}},{key:"getUserJoinedOn",value:function(){var e=interpolate(gettext("Joined on %(joined_on)s"),{joined_on:this.props.user.joined_on.format("LL, LT")},!0),t=interpolate(gettext("Joined %(joined_on)s"),{joined_on:this.props.user.joined_on.fromNow()},!0);return c["default"].createElement("span",{className:"user-joined-on",title:e},t)}},{key:"getPostsCount",value:function(){var e=ngettext("%(posts)s post","%(posts)s posts",this.props.user.posts);return interpolate(e,{posts:this.props.user.posts},!0)}},{key:"getThreadsCount",value:function(){var e=ngettext("%(threads)s thread","%(threads)s threads",this.props.user.threads);return interpolate(e,{threads:this.props.user.threads},!0)}},{key:"getFollowersCount",value:function(){var e=ngettext("%(followers)s follower","%(followers)s followers",this.props.user.followers);return interpolate(e,{followers:this.props.user.followers},!0)}},{key:"getClassName",value:function(){return this.props.user.rank.css_class?"user-card user-card-"+this.props.user.rank.css_class+" ui-ready":"user-card ui-ready"}},{key:"render",value:function(){return c["default"].createElement("div",{className:this.getClassName()},c["default"].createElement("div",{className:"user-card-bg-image"},c["default"].createElement(f["default"],{user:this.props.user,size:"400",className:"bg-image"}),c["default"].createElement("div",{className:"user-card-bg"},c["default"].createElement("div",{className:"user-details"},c["default"].createElement("div",{className:"user-avatar"},c["default"].createElement("a",{href:this.props.user.absolute_url},c["default"].createElement(f["default"],{user:this.props.user,size:"400"}))),c["default"].createElement("h4",{className:"user-name"},c["default"].createElement("a",{href:this.props.user.absolute_url,className:"item-title"},this.props.user.username)),c["default"].createElement("p",{className:"user-subscript"},this.getUserStatus(),this.getRankName(),this.getUserTitle(),this.getUserJoinedOn())),c["default"].createElement("div",{className:"user-card-stats"},c["default"].createElement("ul",{className:"list-unstyled"},c["default"].createElement("li",{className:"user-posts-count"},this.getPostsCount()),c["default"].createElement("li",{className:"user-threads-count"},this.getThreadsCount()),c["default"].createElement("li",{className:"user-followers-count"},this.getFollowersCount()))))))}}]),t}(c["default"].Component);a["default"]=v},{"../../utils/random":315,"../avatar":3,"../user-status":210,react:"react"}],219:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../avatar"),f=n(d),p=e("../../utils/random"),h=r(p),m=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"getUserStatus",value:function(){return this.props.showStatus?c["default"].createElement("span",{className:"user-status"},c["default"].createElement("span",{className:"status-icon ui-preview-text"}," "),c["default"].createElement("span",{className:"status-label ui-preview-text",style:{width:h["int"](30,50)+"px"}}," ")):null}},{key:"render",value:function(){return c["default"].createElement("div",{className:"user-card ui-preview"},c["default"].createElement("div",{className:"user-card-bg-image"},c["default"].createElement(f["default"],{size:"400",className:"bg-image"}),c["default"].createElement("div",{className:"user-card-bg"},c["default"].createElement("div",{className:"user-details"},c["default"].createElement("div",{className:"user-avatar"},c["default"].createElement(f["default"],{size:"400"})),c["default"].createElement("h4",{className:"user-name"},c["default"].createElement("span",{className:"item-title"},c["default"].createElement("span",{className:"ui-preview-text",style:{width:h["int"](60,150)+"px"}}," "))),c["default"].createElement("p",{className:"user-subscript"},this.getUserStatus(),c["default"].createElement("span",{className:"user-joined-on"},c["default"].createElement("span",{className:"ui-preview-text",style:{width:h["int"](30,50)+"px"}}," ")))),c["default"].createElement("div",{className:"user-card-stats"},c["default"].createElement("ul",{className:"list-unstyled"},c["default"].createElement("li",{className:"user-posts-count"},c["default"].createElement("span",{className:"ui-preview-text",style:{width:h["int"](40,70)+"px"}}," ")),c["default"].createElement("li",{className:"user-threads-count"},c["default"].createElement("span",{className:"ui-preview-text",style:{width:h["int"](40,70)+"px"}}," ")),c["default"].createElement("li",{className:"user-followers-count"},c["default"].createElement("span",{className:"ui-preview-text",style:{width:h["int"](40,70)+"px"}}," ")))))))}}]),t}(c["default"].Component);a["default"]=m},{"../../utils/random":315,"../avatar":3,react:"react"}],220:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getEmptyMessage",value:function(){return interpolate(gettext("No users have posted any new messages during last %(days)s days."),{days:this.props.trackedPeriod},!0)}},{key:"render",value:function(){return u["default"].createElement("div",{className:"active-posters-list"},u["default"].createElement("div",{className:"container"},u["default"].createElement("p",{className:"lead"},this.getEmptyMessage())))}}]),t}(u["default"].Component);a["default"]=c},{react:"react"}],221:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("../../avatar"),f=n(d),p=e("../../../utils/random"),h=r(p),m=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"getClassName",value:function(){return this.props.hiddenOnMobile?"list-group-item hidden-xs hidden-sm":"list-group-item"}},{key:"render",value:function(){return c["default"].createElement("li",{className:this.getClassName()},c["default"].createElement("div",{className:"rank-user-avatar"},c["default"].createElement("span",null,c["default"].createElement(f["default"],{size:"50"}))),c["default"].createElement("div",{className:"rank-user"},c["default"].createElement("div",{className:"user-name"},c["default"].createElement("span",{className:"item-title"},c["default"].createElement("span",{className:"ui-preview-text",style:{width:h["int"](30,80)+"px"}}," "))),c["default"].createElement("div",{className:"user-details"},c["default"].createElement("span",{className:"user-status"},c["default"].createElement("span",{className:"status-icon ui-preview-text"}," "),c["default"].createElement("span",{className:"status-label ui-preview-text hidden-xs hidden-sm",style:{width:h["int"](30,50)+"px"}}," ")),c["default"].createElement("span",{className:"rank-name"},c["default"].createElement("span",{className:"ui-preview-text",style:{width:h["int"](30,50)+"px"}}," ")),c["default"].createElement("span",{className:"user-title hidden-xs hidden-sm"},c["default"].createElement("span",{className:"ui-preview-text",style:{width:h["int"](30,50)+"px"}}," ")))),c["default"].createElement("div",{className:"rank-position"},c["default"].createElement("strong",null,c["default"].createElement("span",{className:"ui-preview-text",style:{width:h["int"](20,30)+"px"}}," ")),c["default"].createElement("small",null,gettext("Rank"))),c["default"].createElement("div",{className:"rank-posts-counted"},c["default"].createElement("strong",null,c["default"].createElement("span",{className:"ui-preview-text",style:{width:h["int"](20,30)+"px"}}," ")),c["default"].createElement("small",null,gettext("Ranked posts"))),c["default"].createElement("div",{className:"rank-posts-total"},c["default"].createElement("strong",null,c["default"].createElement("span",{className:"ui-preview-text",style:{width:h["int"](20,30)+"px"}}," ")),c["default"].createElement("small",null,gettext("Total posts"))))}}]),t}(c["default"].Component);a["default"]=m},{"../../../utils/random":315,"../../avatar":3,react:"react"}],222:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("react-router"),f=e("../../avatar"),p=n(f),h=e("../../user-status"),m=n(h),b=e("../../../index"),v=n(b),y=e("../../../utils/random"),g=r(y),_=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"getClassName",value:function(){return this.props.rank.css_class?"list-group-item list-group-rank-"+this.props.rank.css_class:"list-group-item"}},{key:"getUserStatus",value:function(){return this.props.user.status?c["default"].createElement(m["default"],{user:this.props.user,status:this.props.user.status},c["default"].createElement(h.StatusIcon,{user:this.props.user,status:this.props.user.status}),c["default"].createElement(h.StatusLabel,{user:this.props.user,status:this.props.user.status,className:"status-label hidden-xs hidden-sm"})):c["default"].createElement("span",{className:"user-status"},c["default"].createElement("span",{className:"status-icon ui-preview-text"}," "),c["default"].createElement("span",{className:"status-label ui-preview-text hidden-xs hidden-sm",style:{width:g["int"](30,50)+"px"}}," "))}},{key:"getRankName",value:function(){if(this.props.rank.is_tab){var e=v["default"].get("USERS_LIST_URL")+this.props.rank.slug+"/";return c["default"].createElement(d.Link,{to:e,className:"rank-name item-title"},this.props.rank.name)}return c["default"].createElement("span",{className:"rank-name item-title"},this.props.rank.name)}},{key:"getUserTitle",value:function(){return this.props.user.title?c["default"].createElement("span",{className:"user-title hidden-xs hidden-sm"},this.props.user.title):null}},{key:"render",value:function(){return c["default"].createElement("li",{className:this.getClassName()},c["default"].createElement("div",{className:"rank-user-avatar"},c["default"].createElement("a",{href:this.props.user.absolute_url},c["default"].createElement(p["default"],{user:this.props.user,size:"50"}))),c["default"].createElement("div",{className:"rank-user"},c["default"].createElement("div",{className:"user-name"},c["default"].createElement("a",{href:this.props.user.absolute_url,className:"item-title"},this.props.user.username)),c["default"].createElement("div",{className:"user-details"},this.getUserStatus(),this.getRankName(),this.getUserTitle())),c["default"].createElement("div",{className:"rank-position"},c["default"].createElement("strong",null,"#",this.props.counter),c["default"].createElement("small",null,gettext("Rank"))),c["default"].createElement("div",{className:"rank-posts-counted"},c["default"].createElement("strong",null,this.props.user.meta.score),c["default"].createElement("small",null,gettext("Ranked posts"))),c["default"].createElement("div",{className:"rank-posts-total"},c["default"].createElement("strong",null,this.props.user.posts),c["default"].createElement("small",null,gettext("Total posts"))))}}]),t}(c["default"].Component);a["default"]=_},{"../../../index":234,"../../../utils/random":315,"../../avatar":3,"../../user-status":210,react:"react","react-router":"react-router"}],223:[function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=n(u),d=e("./list-item-preview"),f=n(d),p=e("../../../utils/random"),h=r(p),m=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return c["default"].createElement("div",{className:"active-posters-list"},c["default"].createElement("div",{className:"container"},c["default"].createElement("p",{className:"lead ui-preview"},c["default"].createElement("span",{className:"ui-preview-text",style:{width:h["int"](50,220)+"px"}}," ")),c["default"].createElement("div",{className:"active-posters ui-preview"},c["default"].createElement("ul",{className:"list-group"},[0,1,2].map(function(e){return c["default"].createElement(f["default"],{hiddenOnMobile:e>0,key:e})})))))}}]),t}(c["default"].Component);a["default"]=m},{"../../../utils/random":315,"./list-item-preview":221,react:"react"}],224:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./list-item"),d=r(c),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getLeadMessage",value:function(){var e=ngettext("%(posters)s most active poster from last %(days)s days.","%(posters)s most active posters from last %(days)s days.",this.props.count);return interpolate(e,{posters:this.props.count,days:this.props.trackedPeriod},!0)}},{key:"render",value:function(){return u["default"].createElement("div",{className:"active-posters-list"},u["default"].createElement("div",{className:"container"},u["default"].createElement("p",{className:"lead"},this.getLeadMessage()),u["default"].createElement("div",{className:"active-posters ui-ready"},u["default"].createElement("ul",{className:"list-group"},this.props.users.map(function(e,t){return u["default"].createElement(d["default"],{user:e,rank:e.rank,counter:t+1,key:e.id})})))))}}]),t}(u["default"].Component);a["default"]=f},{"./list-item":222,react:"react"}],225:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./list-empty"),d=r(c),f=e("./list-preview"),p=r(f),h=e("./list-ready"),m=r(h),b=e("../../../index"),v=r(b),y=e("../../../reducers/users"),g=e("../../../services/polls"),_=r(g),E=e("../../../services/store"),w=r(E),O=e("../../../services/page-title"),k=r(O),N=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.update=function(e){w["default"].dispatch((0,y.hydrate)(e.results)),a.setState({isLoaded:!0,trackedPeriod:e.tracked_period,count:e.count})},v["default"].has("USERS")?a.initWithPreloadedData(v["default"].pop("USERS")):a.initWithoutPreloadedData(),a.startPolling(),a}return s(t,e),l(t,[{key:"initWithPreloadedData",value:function(e){this.state={isLoaded:!0,trackedPeriod:e.tracked_period,count:e.count},w["default"].dispatch((0,y.hydrate)(e.results))}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1}}},{key:"startPolling",value:function(){_["default"].start({poll:"active-posters",url:v["default"].get("USERS_API"),data:{list:"active"},frequency:9e4,update:this.update})}},{key:"componentDidMount",value:function(){k["default"].set({title:this.props.route.extra.name,parent:gettext("Users")})}},{key:"componentWillUnmount",value:function(){_["default"].stop("active-posters")}},{key:"render",value:function(){return this.state.isLoaded?this.state.count>0?u["default"].createElement(m["default"],{users:this.props.users,trackedPeriod:this.state.trackedPeriod,count:this.state.count}):u["default"].createElement(d["default"],{trackedPeriod:this.state.trackedPeriod}):u["default"].createElement(p["default"],null)}}]),t}(u["default"].Component);a["default"]=N},{"../../../index":234,"../../../reducers/users":292,"../../../services/page-title":300,"../../../services/polls":301,"../../../services/store":304,"./list-empty":220,"./list-preview":223,"./list-ready":224,react:"react"}],226:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0}),a.CompactNav=a.TabsNav=void 0;var l=function(){function e(e,t){for(var a=0;a<t.length;a++){
var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("react-router"),d=e("../li"),f=r(d),p=e("../../index"),h=(r(p),function(e,t){var a=e;return a+="rank"===t.component?t.slug:t.component,a+"/"}),m=function(e,t,a){return t.map(function(t){var r=h(e,t);return u["default"].createElement(f["default"],{path:r,key:r},u["default"].createElement(c.Link,{to:r,onClick:a},t.name))})};a.TabsNav=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("ul",{className:"nav nav-pills"},m(this.props.baseUrl,this.props.lists))}}]),t}(u["default"].Component),a.CompactNav=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("ul",{className:"dropdown-menu",role:"menu"},m(this.props.baseUrl,this.props.lists,this.props.hideNav))}}]),t}(u["default"].Component)},{"../../index":234,"../li":42,react:"react","react-router":"react-router"}],227:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../../users-list/root"),d=r(c),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return u["default"].createElement("div",null,u["default"].createElement(d["default"],{isLoaded:!1,cols:3,showStatus:!0}))}}]),t}(u["default"].Component);a["default"]=f},{"../../users-list/root":217,react:"react"}],228:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("./pager"),d=r(c),f=e("../../users-list/root"),p=r(f),h=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getPager",value:function(){return this.props.pages>1?u["default"].createElement(d["default"],this.props):null}},{key:"render",value:function(){return u["default"].createElement("div",null,u["default"].createElement(p["default"],{users:this.props.users,showStatus:!0,cols:3,isLoaded:!0}),this.getPager())}}]),t}(u["default"].Component);a["default"]=h},{"../../users-list/root":217,"./pager":229,react:"react"}],229:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("react-router"),d=e("../../../utils/reset-scroll"),f=r(d),p=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"getPreviousPage",value:function(){if(this.props.previous||this.props.first){var e=this.props.baseUrl;return this.props.previous&&(e+=this.props.previous+"/"),u["default"].createElement("li",{className:"previous"},u["default"].createElement(c.Link,{to:e,onClick:f["default"]},u["default"].createElement("span",{"aria-hidden":"true",className:"material-icon"},"arrow_back")))}return null}},{key:"getNextPage",value:function(){if(this.props.next){var e=this.props.baseUrl+this.props.next+"/";return u["default"].createElement("li",{className:"next"},u["default"].createElement(c.Link,{to:e,onClick:f["default"]},u["default"].createElement("span",{"aria-hidden":"true",className:"material-icon"},"arrow_forward")))}return null}},{key:"getProgessBar",value:function(){var e=this;return u["default"].createElement("ul",{className:"pager-progress-bar"},this.props.page_range.map(function(t){var a=t===e.props.page?"active":null,r=e.props.baseUrl;return t>1&&(r+=t+"/"),u["default"].createElement("li",{key:t,className:a},u["default"].createElement(c.Link,{to:r,onClick:f["default"]},t))}))}},{key:"render",value:function(){return u["default"].createElement("div",{className:"pager-undercontent"},u["default"].createElement("nav",null,u["default"].createElement("ul",{className:"pager"},this.getPreviousPage(),this.getNextPage()),this.getProgessBar()))}}]),t}(u["default"].Component);a["default"]=p},{"../../../utils/reset-scroll":316,react:"react","react-router":"react-router"}],230:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=e("react"),c=r(u),d=e("../../page-lead"),f=r(d),p=e("./list"),h=r(p),m=e("./list-loading"),b=r(m),v=e("../../../index"),y=r(v),g=e("../../../reducers/users"),_=e("../../../services/polls"),E=r(_),w=e("../../../services/store"),O=r(w),k=e("../../../services/page-title"),N=r(k),j=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.update=function(e){O["default"].dispatch((0,g.hydrate)(e.results)),e.isLoaded=!0,a.setState(e)},y["default"].has("USERS")?a.initWithPreloadedData(y["default"].pop("USERS")):a.initWithoutPreloadedData(),a.startPolling(e.params.page||1),a}return s(t,e),i(t,[{key:"initWithPreloadedData",value:function(e){this.state=Object.assign(e,{isLoaded:!0}),O["default"].dispatch((0,g.hydrate)(e.results))}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1}}},{key:"startPolling",value:function(e){E["default"].start({poll:"rank-users",url:y["default"].get("USERS_API"),data:{rank:this.props.route.rank.id,page:e},frequency:9e4,update:this.update})}},{key:"componentDidMount",value:function(){N["default"].set({title:this.props.route.rank.name,page:this.props.params.page||null,parent:gettext("Users")})}},{key:"componentWillUnmount",value:function(){E["default"].stop("rank-users")}},{key:"componentWillReceiveProps",value:function(e){this.props.params.page!==e.params.page&&(N["default"].set({title:this.props.route.rank.name,page:e.params.page||null,parent:gettext("Users")}),this.setState({isLoaded:!1}),E["default"].stop("rank-users"),this.startPolling(e.params.page))}},{key:"getClassName",value:function(){return this.props.route.rank.css_class?"rank-users-list rank-users-"+this.props.route.rank.css_class:"rank-users-list"}},{key:"getRankDescription",value:function(){return this.props.route.rank.description?c["default"].createElement("div",{className:"rank-description"},c["default"].createElement(f["default"],{copy:this.props.route.rank.description.html})):null}},{key:"getComponent",value:function(){if(this.state.isLoaded){if(this.state.count>0){var e=y["default"].get("USERS_LIST_URL")+this.props.route.rank.slug+"/";return c["default"].createElement(h["default"],l({baseUrl:e,users:this.props.users},this.state))}return c["default"].createElement("p",{className:"lead"},gettext("There are no users with this rank at the moment."))}return c["default"].createElement(b["default"],null)}},{key:"render",value:function(){return c["default"].createElement("div",{className:this.getClassName()},c["default"].createElement("div",{className:"container"},this.getRankDescription(),this.getComponent()))}}]),t}(c["default"].Component);a["default"]=j},{"../../../index":234,"../../../reducers/users":292,"../../../services/page-title":300,"../../../services/polls":301,"../../../services/store":304,"../../page-lead":58,"./list":228,"./list-loading":227,react:"react"}],231:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{tick:e.tick.tick,user:e.auth.user,users:e.users}}function i(){var e=[];return O["default"].get("USERS_LISTS").forEach(function(t){"rank"===t.component?(e.push({path:O["default"].get("USERS_LIST_URL")+t.slug+"/:page/",component:(0,f.connect)(l)(g["default"]),rank:t}),e.push({path:O["default"].get("USERS_LIST_URL")+t.slug+"/",component:(0,f.connect)(l)(g["default"]),rank:t})):"active-posters"===t.component&&e.push({path:O["default"].get("USERS_LIST_URL")+t.component+"/",component:(0,f.connect)(l)(v["default"]),extra:{name:t.name}})}),e}Object.defineProperty(a,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a.select=l,a.paths=i;var c=e("react"),d=r(c),f=e("react-redux"),p=e("../dropdown-toggle"),h=r(p),m=e("./navs"),b=e("./active-posters/root"),v=r(b),y=e("./rank/root"),g=r(y),_=e("../with-dropdown"),E=r(_),w=e("../../index"),O=r(w),k=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"render",value:function(){return d["default"].createElement("div",{className:"page page-users-lists"},d["default"].createElement("div",{className:"page-header tabbed"},d["default"].createElement("div",{className:"container"},d["default"].createElement("h1",{className:"pull-left"},gettext("Users")),d["default"].createElement(h["default"],{toggleNav:this.toggleNav,dropdown:this.state.dropdown})),d["default"].createElement("div",{className:"page-tabs hidden-xs hidden-sm"},d["default"].createElement("div",{className:"container"},d["default"].createElement(m.TabsNav,{lists:O["default"].get("USERS_LISTS"),baseUrl:O["default"].get("USERS_LIST_URL")})))),d["default"].createElement("div",{className:this.getCompactNavClassName()},d["default"].createElement(m.CompactNav,{lists:O["default"].get("USERS_LISTS"),baseUrl:O["default"].get("USERS_LIST_URL"),hideNav:this.hideNav})),this.props.children)}}]),t}(E["default"]);a["default"]=k},{"../../index":234,"../dropdown-toggle":19,"../with-dropdown":232,"./active-posters/root":225,"./navs":226,"./rank/root":230,react:"react","react-redux":"react-redux"}],232:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.toggleNav=function(){a.setState({dropdown:!a.state.dropdown})},a.hideNav=function(){a.setState({dropdown:!1})},a.state={dropdown:!1},a}return s(t,e),l(t,[{key:"getCompactNavClassName",value:function(){return this.state.dropdown?"compact-nav open":"compact-nav"}}]),t}(u["default"].Component);a["default"]=c},{react:"react"}],233:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=function(e){function t(){var e,a,r,s;n(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.toggle=function(){r.props.onChange({target:{value:!r.props.value}})},s=a,o(r,s)}return s(t,e),l(t,[{key:"getClassName",value:function(){return this.props.value?"btn btn-yes-no btn-yes-no-on":"btn btn-yes-no btn-yes-no-off"}},{key:"getIcon",value:function(){return this.props.value?this.props.iconOn||"check_box":this.props.iconOff||"check_box_outline_blank"}},{key:"getLabel",value:function(){return this.props.value?this.props.labelOn||gettext("yes"):this.props.labelOff||gettext("no")}},{key:"render",value:function(){return u["default"].createElement("button",{type:"button",onClick:this.toggle,className:this.getClassName(),id:this.props.id||null,"aria-describedby":this.props["aria-describedby"]||null,disabled:this.props.disabled||!1},u["default"].createElement("span",{className:"material-icon"},this.getIcon()),this.getLabel())}}]),t}(u["default"].Component);a["default"]=c},{react:"react"}],234:[function(e,t,a){(function(t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0}),a.Misago=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=e("./utils/ordered-list"),l=r(s),i=a.Misago=function(){function e(){n(this,e),this._initializers=[],this._context={}}return o(e,[{key:"addInitializer",value:function(e){this._initializers.push({key:e.name,item:e.initializer,after:e.after,before:e.before})}},{key:"init",value:function(e){var t=this;this._context=e;var a=new l["default"](this._initializers).orderedValues();a.forEach(function(e){e(t)})}},{key:"has",value:function(e){return!!this._context[e]}},{key:"get",value:function(e,t){return this.has(e)?this._context[e]:t||void 0}},{key:"pop",value:function(e){if(this.has(e)){var t=this._context[e];return this._context[e]=null,t}}}]),e}(),u=new i;t.misago=u,a["default"]=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utils/ordered-list":314}],235:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){i["default"].init(s["default"].get("CSRF_COOKIE_NAME"))}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../index"),s=r(o),l=e("../services/ajax"),i=r(l);s["default"].addInitializer({name:"ajax",initializer:n})},{"../index":234,"../services/ajax":293}],236:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){e.get("isAuthenticated")&&window.setInterval(function(){u["default"].get(e.get("AUTH_API")).then(function(e){p["default"].dispatch((0,l.patch)(e))},function(e){d["default"].apiError(e)})},1e3*h)}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../index"),s=r(o),l=e("../reducers/auth"),i=e("../services/ajax"),u=r(i),c=e("../services/snackbar"),d=r(c),f=e("../services/store"),p=r(f),h=45;s["default"].addInitializer({name:"auth-sync",initializer:n,after:"auth"})},{"../index":234,"../reducers/auth":279,"../services/ajax":293,"../services/snackbar":303,"../services/store":304}],237:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){i["default"].init(f["default"],h["default"],c["default"])}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../index"),s=r(o),l=e("../services/auth"),i=r(l),u=e("../services/modal"),c=r(u),d=e("../services/store"),f=r(d),p=e("../services/local-storage"),h=r(p);s["default"].addInitializer({name:"auth",initializer:n,after:"store"})},{"../index":234,"../services/auth":294,"../services/local-storage":297,"../services/modal":299,"../services/store":304}],238:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){c["default"].init(e,i["default"],f["default"],h["default"])}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../index"),s=r(o),l=e("../services/ajax"),i=r(l),u=e("../services/captcha"),c=r(u),d=e("../services/include"),f=r(d),p=e("../services/snackbar"),h=r(p);s["default"].addInitializer({name:"captcha",initializer:n})},{"../index":234,"../services/ajax":293,"../services/captcha":295,"../services/include":296,"../services/snackbar":303}],239:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){(0,d["default"])((0,o.connect)(i.select)(u["default"]),"auth-message-mount")}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("react-redux"),s=e("../../index"),l=r(s),i=e("../../components/auth-message"),u=r(i),c=e("../../utils/mount-component"),d=r(c);l["default"].addInitializer({name:"component:auth-message",initializer:n,after:"store"})},{"../../components/auth-message":2,"../../index":234,"../../utils/mount-component":313,"react-redux":"react-redux"}],240:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){e.has("BAN_MESSAGE")&&(0,i["default"])(e.get("BAN_MESSAGE"),!1)}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../index"),s=r(o),l=e("../../utils/banned-page"),i=r(l);s["default"].addInitializer({name:"component:baned-page",initializer:n,after:"store"})},{"../../index":234,"../../utils/banned-page":306}],241:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){document.getElementById("categories-mount")&&(0,d["default"])((0,o.connect)(s.select)(l["default"]),"categories-mount")}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("react-redux"),s=e("../../components/categories/root"),l=r(s),i=e("../../index"),u=r(i),c=e("../../utils/mount-component"),d=r(c);u["default"].addInitializer({name:"component:reset-password-form",initializer:n,after:"store"})},{"../../components/categories/root":10,"../../index":234,"../../utils/mount-component":313,"react-redux":"react-redux"}],242:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){e.has("USER_OPTIONS")&&(0,c["default"])({root:i["default"].get("USERCP_URL"),component:s["default"],paths:(0,o.paths)()})}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../components/options/root"),s=r(o),l=e("../../index"),i=r(l),u=e("../../utils/routed-component"),c=r(u);i["default"].addInitializer({name:"component:options",initializer:n,after:"store"})},{"../../components/options/root":54,"../../index":234,"../../utils/routed-component":317}],243:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){e.has("PROFILE")&&e.has("PROFILE_PAGES")&&(0,d["default"])({root:u["default"].get("PROFILE").absolute_url,component:(0,o.connect)(s.select)(l["default"]),paths:(0,s.paths)()})}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("react-redux"),s=e("../../components/profile/root"),l=r(s),i=e("../../index"),u=r(i),c=e("../../utils/routed-component"),d=r(c);u["default"].addInitializer({name:"component:profile",initializer:n,after:"reducer:profile-hydrate"})},{"../../components/profile/root":137,"../../index":234,"../../utils/routed-component":317,"react-redux":"react-redux"}],244:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){document.getElementById("request-activation-link-mount")&&(0,c["default"])(i["default"],"request-activation-link-mount",!1)}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../index"),s=r(o),l=e("../../components/request-activation-link"),i=r(l),u=e("../../utils/mount-component"),c=r(u);s["default"].addInitializer({name:"component:request-activation-link",initializer:n,after:"store"})},{"../../components/request-activation-link":142,"../../index":234,"../../utils/mount-component":313}],245:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){document.getElementById("request-password-reset-mount")&&(0,c["default"])(i["default"],"request-password-reset-mount",!1)}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../index"),s=r(o),l=e("../../components/request-password-reset"),i=r(l),u=e("../../utils/mount-component"),c=r(u);s["default"].addInitializer({name:"component:request-password-reset",initializer:n,after:"store"})},{"../../components/request-password-reset":143,"../../index":234,"../../utils/mount-component":313}],246:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){document.getElementById("reset-password-form-mount")&&(0,c["default"])(i["default"],"reset-password-form-mount",!1)}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../index"),s=r(o),l=e("../../components/reset-password-form"),i=r(l),u=e("../../utils/mount-component"),c=r(u);s["default"].addInitializer({name:"component:reset-password-form",initializer:n,after:"store"})},{"../../components/reset-password-form":144,"../../index":234,"../../utils/mount-component":313}],247:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){"misago:search"===e.get("CURRENT_LINK")&&(0,c["default"])({paths:(0,s["default"])(i["default"].get("SEARCH_PROVIDERS"))})}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../components/search"),s=r(o),l=e("../.."),i=r(l),u=e("../../utils/routed-component"),c=r(u);i["default"].addInitializer({name:"component:search",initializer:n,after:"store"})},{"../..":234,"../../components/search":146,"../../utils/routed-component":317}],248:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){(0,c["default"])((0,o.connect)(i.select)(i.Snackbar),"snackbar-mount")}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("react-redux"),s=e("../../index"),l=r(s),i=e("../../components/snackbar"),u=e("../../utils/mount-component"),c=r(u);l["default"].addInitializer({name:"component:snackbar",initializer:n,after:"snackbar"})},{"../../components/snackbar":154,"../../index":234,"../../utils/mount-component":313,"react-redux":"react-redux"}],249:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){e.has("THREAD")&&e.has("POSTS")&&(0,u["default"])({paths:(0,o.paths)()})}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../components/thread/root"),s=e("../../index"),l=r(s),i=e("../../utils/routed-component"),u=r(i);l["default"].addInitializer({name:"component:thread",initializer:n,after:"store"})},{"../../components/thread/root":171,"../../index":234,"../../utils/routed-component":317}],250:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){e.has("THREADS")&&e.has("CATEGORIES")&&(0,c["default"])({paths:(0,s.paths)(e.get("user"),o(e))})}function o(e){var t=e.get("CURRENT_LINK");return t.substr(0,d.length)===d?{api:e.get("PRIVATE_THREADS_API"),startThread:{mode:"START_PRIVATE",submit:i["default"].get("PRIVATE_THREADS_API")},title:gettext("Private threads"),pageLead:gettext("Private threads are threads which only those that started them and those they have invited may see and participate in."),emptyMessage:gettext("You aren't participating in any private threads.")}:{api:e.get("THREADS_API")}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n,a.getListOptions=o;var s=e("../../components/threads/root"),l=e("../../index"),i=r(l),u=e("../../utils/routed-component"),c=r(u),d="misago:private-threads";i["default"].addInitializer({name:"component:threads",initializer:n,after:"store"})},{"../../components/threads/root":203,"../../index":234,"../../utils/routed-component":317}],251:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){(0,c["default"])((0,o.connect)(i.select)(i.UserMenu),"user-menu-mount"),(0,c["default"])((0,o.connect)(i.select)(i.CompactUserMenu),"user-menu-compact-mount")}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("react-redux"),s=e("../../index"),l=r(s),i=e("../../components/user-menu/root"),u=e("../../utils/mount-component"),c=r(u);l["default"].addInitializer({name:"component:user-menu",initializer:n,after:"store"})},{"../../components/user-menu/root":208,"../../index":234,"../../utils/mount-component":313,"react-redux":"react-redux"}],252:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){e.has("USERS_LISTS")&&(0,c["default"])({root:i["default"].get("USERS_LIST_URL"),component:s["default"],paths:(0,o.paths)()})}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../components/users/root"),s=r(o),l=e("../../index"),i=r(l),u=e("../../utils/routed-component"),c=r(u);i["default"].addInitializer({name:"component:users",initializer:n,after:"store"})},{"../../components/users/root":231,"../../index":234,"../../utils/routed-component":317}],253:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){i["default"].init(e.get("STATIC_URL"))}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../index"),s=r(o),l=e("../services/include"),i=r(l);s["default"].addInitializer({name:"include",initializer:n})},{"../index":234,"../services/include":296}],254:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){i["default"].init("misago_")}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../index"),s=r(o),l=e("../services/local-storage"),i=r(l);s["default"].addInitializer({name:"local-storage",initializer:n})},{"../index":234,"../services/local-storage":297}],255:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){var e=document.getElementById("mobile-navbar-dropdown-mount");e&&i["default"].init(e)}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../index"),s=r(o),l=e("../services/mobile-navbar-dropdown"),i=r(l);s["default"].addInitializer({name:"dropdown",initializer:n,before:"store"})},{"../index":234,"../services/mobile-navbar-dropdown":298}],256:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){var e=document.getElementById("modal-mount");e&&i["default"].init(e)}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../index"),s=r(o),l=e("../services/modal"),i=r(l);s["default"].addInitializer({name:"modal",initializer:n,before:"store"})},{"../index":234,"../services/modal":299}],257:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){s["default"].locale($("html").attr("lang"))}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("moment"),s=r(o),l=e("../index"),i=r(l);i["default"].addInitializer({name:"moment",initializer:n})},{"../index":234,moment:"moment"}],258:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){i["default"].init(e.get("SETTINGS").forum_index_title,e.get("SETTINGS").forum_name)}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../index"),s=r(o),l=e("../services/page-title"),i=r(l);s["default"].addInitializer({
name:"page-title",initializer:n})},{"../index":234,"../services/page-title":300}],259:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){f["default"].init(i["default"],c["default"])}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../index"),s=r(o),l=e("../services/ajax"),i=r(l),u=e("../services/snackbar"),c=r(u),d=e("../services/polls"),f=r(d);s["default"].addInitializer({name:"polls",initializer:n})},{"../index":234,"../services/ajax":293,"../services/polls":301,"../services/snackbar":303}],260:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){c["default"].init(i["default"],f["default"],document.getElementById("posting-placeholder"))}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../index"),s=r(o),l=e("../services/ajax"),i=r(l),u=e("../services/posting"),c=r(u),d=e("../services/snackbar"),f=r(d);s["default"].addInitializer({name:"posting",initializer:n})},{"../index":234,"../services/ajax":293,"../services/posting":302,"../services/snackbar":303}],261:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){c["default"].addReducer("auth",i["default"],Object.assign({isAuthenticated:e.get("isAuthenticated"),isAnonymous:!e.get("isAuthenticated"),user:e.get("user")},l.initialState))}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../index"),s=r(o),l=e("../../reducers/auth"),i=r(l),u=e("../../services/store"),c=r(u);s["default"].addInitializer({name:"reducer:auth",initializer:n,before:"store"})},{"../../index":234,"../../reducers/auth":279,"../../services/store":304}],262:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){var e=null;s["default"].has("THREAD")&&(e=s["default"].get("THREAD").participants),c["default"].addReducer("participants",i["default"],e||[])}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../index"),s=r(o),l=e("../../reducers/participants"),i=r(l),u=e("../../services/store"),c=r(u);s["default"].addInitializer({name:"reducer:participants",initializer:n,before:"store"})},{"../../index":234,"../../reducers/participants":280,"../../services/store":304}],263:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){var e=null;e=s["default"].has("THREAD")&&s["default"].get("THREAD").poll?(0,l.hydrate)(s["default"].get("THREAD").poll):{isBusy:!1},c["default"].addReducer("poll",i["default"],e)}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../index"),s=r(o),l=e("../../reducers/poll"),i=r(l),u=e("../../services/store"),c=r(u);s["default"].addInitializer({name:"reducer:poll",initializer:n,before:"store"})},{"../../index":234,"../../reducers/poll":281,"../../services/store":304}],264:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){var e=null;e=s["default"].has("POSTS")?(0,l.hydrate)(s["default"].get("POSTS")):{isLoaded:!1,isBusy:!1},c["default"].addReducer("posts",i["default"],e)}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../index"),s=r(o),l=e("../../reducers/posts"),i=r(l),u=e("../../services/store"),c=r(u);s["default"].addInitializer({name:"reducer:posts",initializer:n,before:"store"})},{"../../index":234,"../../reducers/posts":283,"../../services/store":304}],265:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){s["default"].has("PROFILE")&&u["default"].dispatch((0,l.hydrate)(s["default"].get("PROFILE")))}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../index"),s=r(o),l=e("../../reducers/profile"),i=e("../../services/store"),u=r(i);s["default"].addInitializer({name:"reducer:profile-hydrate",initializer:n,after:"store"})},{"../../index":234,"../../reducers/profile":284,"../../services/store":304}],266:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){c["default"].addReducer("profile",i["default"],{})}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../index"),s=r(o),l=e("../../reducers/profile"),i=r(l),u=e("../../services/store"),c=r(u);s["default"].addInitializer({name:"reducer:profile",initializer:n,before:"store"})},{"../../index":234,"../../reducers/profile":284,"../../services/store":304}],267:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){c["default"].addReducer("search",i["default"],Object.assign({},l.initialState,{providers:s["default"].get("SEARCH_PROVIDERS")||[]}))}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../.."),s=r(o),l=e("../../reducers/search"),i=r(l),u=e("../../services/store"),c=r(u);s["default"].addInitializer({name:"reducer:search",initializer:n,before:"store"})},{"../..":234,"../../reducers/search":285,"../../services/store":304}],268:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){c["default"].addReducer("selection",i["default"],[])}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../index"),s=r(o),l=e("../../reducers/selection"),i=r(l),u=e("../../services/store"),c=r(u);s["default"].addInitializer({name:"reducer:selection",initializer:n,before:"store"})},{"../../index":234,"../../reducers/selection":286,"../../services/store":304}],269:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){c["default"].addReducer("snackbar",i["default"],l.initialState)}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../index"),s=r(o),l=e("../../reducers/snackbar"),i=r(l),u=e("../../services/store"),c=r(u);s["default"].addInitializer({name:"reducer:snackbar",initializer:n,before:"store"})},{"../../index":234,"../../reducers/snackbar":287,"../../services/store":304}],270:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){var e=null;e=s["default"].has("THREAD")?(0,l.hydrate)(s["default"].get("THREAD")):{isBusy:!1},c["default"].addReducer("thread",i["default"],e)}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../index"),s=r(o),l=e("../../reducers/thread"),i=r(l),u=e("../../services/store"),c=r(u);s["default"].addInitializer({name:"reducer:thread",initializer:n,before:"store"})},{"../../index":234,"../../reducers/thread":288,"../../services/store":304}],271:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){c["default"].addReducer("threads",i["default"],[])}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../index"),s=r(o),l=e("../../reducers/threads"),i=r(l),u=e("../../services/store"),c=r(u);s["default"].addInitializer({name:"reducer:threads",initializer:n,before:"store"})},{"../../index":234,"../../reducers/threads":289,"../../services/store":304}],272:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){c["default"].addReducer("tick",i["default"],l.initialState)}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../index"),s=r(o),l=e("../../reducers/tick"),i=r(l),u=e("../../services/store"),c=r(u);s["default"].addInitializer({name:"reducer:tick",initializer:n,before:"store"})},{"../../index":234,"../../reducers/tick":290,"../../services/store":304}],273:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){c["default"].addReducer("username-history",i["default"],[])}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../index"),s=r(o),l=e("../../reducers/username-history"),i=r(l),u=e("../../services/store"),c=r(u);s["default"].addInitializer({name:"reducer:username-history",initializer:n,before:"store"})},{"../../index":234,"../../reducers/username-history":291,"../../services/store":304}],274:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){c["default"].addReducer("users",i["default"],[])}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../../index"),s=r(o),l=e("../../reducers/users"),i=r(l),u=e("../../services/store"),c=r(u);s["default"].addInitializer({name:"reducer:users",initializer:n,before:"store"})},{"../../index":234,"../../reducers/users":292,"../../services/store":304}],275:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){i["default"].init(c["default"])}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../index"),s=r(o),l=e("../services/snackbar"),i=r(l),u=e("../services/store"),c=r(u);s["default"].addInitializer({name:"snackbar",initializer:n,after:"store"})},{"../index":234,"../services/snackbar":303,"../services/store":304}],276:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){i["default"].init()}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../index"),s=r(o),l=e("../services/store"),i=r(l);s["default"].addInitializer({name:"store",initializer:n,before:"_end"})},{"../index":234,"../services/store":304}],277:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){window.setInterval(function(){u["default"].dispatch((0,l.doTick)())},c)}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../index"),s=r(o),l=e("../reducers/tick"),i=e("../services/store"),u=r(i),c=5e4;s["default"].addInitializer({name:"tick-start",initializer:n,after:"store"})},{"../index":234,"../reducers/tick":290,"../services/store":304}],278:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){c["default"].init(i["default"])}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var o=e("../index"),s=r(o),l=e("../services/include"),i=r(l),u=e("../services/zxcvbn"),c=r(u);s["default"].addInitializer({name:"zxcvbn",initializer:n})},{"../index":234,"../services/include":296,"../services/zxcvbn":305}],279:[function(e,t,a){"use strict";function r(e){return{type:u,patch:e}}function n(e){return{type:c,user:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:d,soft:e}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case u:var a=Object.assign({},e);return a.user=Object.assign({},e.user,t.patch),a;case c:return Object.assign({},e,{signedIn:t.user});case d:return Object.assign({},e,{isAuthenticated:!1,isAnonymous:!0,signedOut:!t.soft});case l.UPDATE_AVATAR:if(e.isAuthenticated&&e.user.id===t.userId){var r=Object.assign({},e);return r.user=Object.assign({},e.user,{avatar_hash:t.avatarHash}),r}return e;case l.UPDATE_USERNAME:if(e.isAuthenticated&&e.user.id===t.userId){var n=Object.assign({},e);return n.user=Object.assign({},e.user,{username:t.username,slug:t.slug}),n}return e;default:return e}}Object.defineProperty(a,"__esModule",{value:!0}),a.SIGN_OUT=a.SIGN_IN=a.PATCH_USER=a.initialState=void 0,a.patch=r,a.signIn=n,a.signOut=o,a["default"]=s;var l=e("./users"),i=a.initialState={signedIn:!1,signedOut:!1},u=a.PATCH_USER="PATCH_USER",c=a.SIGN_IN="SIGN_IN",d=a.SIGN_OUT="SIGN_OUT"},{"./users":292}],280:[function(e,t,a){"use strict";function r(e){return{type:o,state:e}}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case o:return t.state;default:return e}}Object.defineProperty(a,"__esModule",{value:!0}),a.replace=r,a["default"]=n;var o=a.REPLACE_PARTICIPANTS="REPLACE_PARTICIPANTS"},{}],281:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=!1;for(var a in e.choices){var r=e.choices[a];if(r.selected){t=!0;break}}return Object.assign({},e,{posted_on:(0,f["default"])(e.posted_on),hasSelectedChoices:t,endsOn:e.length?(0,f["default"])(e.posted_on).add(e.length,"days"):null,isBusy:!1})}function o(){return{type:p}}function s(){return{type:h}}function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:b,state:t?e:n(e)}}function i(e){return{type:v,data:e}}function u(){return{type:m}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case p:return Object.assign({},e,{isBusy:!0});case h:return Object.assign({},e,{isBusy:!1});case m:return{isBusy:!1};case b:return t.state;case v:return Object.assign({},e,t.data);default:return e}}Object.defineProperty(a,"__esModule",{value:!0}),a.UPDATE_POLL=a.REPLACE_POLL=a.REMOVE_POLL=a.RELEASE_POLL=a.BUSY_POLL=void 0,a.hydrate=n,a.busy=o,a.release=s,a.replace=l,a.update=i,a.remove=u,a["default"]=c;var d=e("moment"),f=r(d),p=a.BUSY_POLL="BUSY_POLL",h=a.RELEASE_POLL="RELEASE_POLL",m=a.REMOVE_POLL="REMOVE_POLL",b=a.REPLACE_POLL="REPLACE_POLL",v=a.UPDATE_POLL="UPDATE_POLL"},{moment:"moment"}],282:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return Object.assign({},e,{posted_on:(0,u["default"])(e.posted_on),updated_on:(0,u["default"])(e.updated_on),hidden_on:(0,u["default"])(e.hidden_on),attachments:e.attachments?e.attachments.map(o):null,poster:e.poster?(0,c.hydrateUser)(e.poster):null,isSelected:!1,isBusy:!1,isDeleted:!1})}function o(e){return Object.assign({},e,{uploaded_on:(0,u["default"])(e.uploaded_on)})}function s(e,t){return{type:d,post:e,patch:t}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case d:return e.id==t.post.id?Object.assign({},e,t.patch):e;default:return e}}Object.defineProperty(a,"__esModule",{value:!0}),a.PATCH_POST=void 0,a.hydrate=n,a.hydrateAttachment=o,a.patch=s,a["default"]=l;var i=e("moment"),u=r(i),c=e("./users"),d=a.PATCH_POST="PATCH_POST"},{"./users":292,moment:"moment"}],283:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return{type:v,post:e}}function o(e){return{type:y,post:e}}function s(){return{type:g}}function l(e){return Object.assign({},e,{results:e.results.map(h.hydrate),isLoaded:!0,isBusy:!1,isSelected:!1})}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:_,state:t?e:l(e)}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:b,state:t?e:l(e)}}function c(){return{type:E}}function d(e){return{type:w,update:e}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=function(){switch(t.type){case v:var a=e.results.map(function(e){return e.id==t.post.id?Object.assign({},e,{isSelected:!0}):e});return{v:Object.assign({},e,{results:a})};case y:var r=e.results.map(function(e){return e.id==t.post.id?Object.assign({},e,{isSelected:!1}):e});return{v:Object.assign({},e,{results:r})};case g:var n=e.results.map(function(e){return Object.assign({},e,{isSelected:!1})});return{v:Object.assign({},e,{results:n})};case b:var o=e.results.slice(),s=e.results.map(function(e){return e.id});return t.state.results.map(function(e){s.indexOf(e.id)===-1&&o.push(e)}),{v:Object.assign({},t.state,{results:o})};case _:return{v:t.state};case E:return{v:Object.assign({},e,{isLoaded:!1})};case w:return{v:Object.assign({},e,t.update)};case h.PATCH_POST:var l=e.results.map(function(e){return(0,m["default"])(e,t)});return{v:Object.assign({},e,{results:l})};default:return{v:e}}}();if("object"===("undefined"==typeof a?"undefined":p(a)))return a.v}Object.defineProperty(a,"__esModule",{value:!0}),a.UPDATE_POSTS=a.UNLOAD_POSTS=a.LOAD_POSTS=a.DESELECT_POSTS=a.DESELECT_POST=a.SELECT_POST=a.APPEND_POSTS=void 0;var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};a.select=n,a.deselect=o,a.deselectAll=s,a.hydrate=l,a.load=i,a.append=u,a.unload=c,a.update=d,a["default"]=f;var h=e("./post"),m=r(h),b=a.APPEND_POSTS="APPEND_POSTS",v=a.SELECT_POST="SELECT_POST",y=a.DESELECT_POST="DESELECT_POST",g=a.DESELECT_POSTS="DESELECT_POSTS",_=a.LOAD_POSTS="LOAD_POSTS",E=a.UNLOAD_POSTS="UNLOAD_POSTS",w=a.UPDATE_POSTS="UPDATE_POSTS"},{"./post":282}],284:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return{type:c,profile:e}}function o(e){return{type:d,patch:e}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case c:return Object.assign({},t.profile,{joined_on:(0,i["default"])(t.profile.joined_on),status:(0,u.hydrateStatus)(t.profile.status)});case d:return Object.assign({},e,t.patch);case u.UPDATE_AVATAR:return e.id===t.userId?Object.assign({},e,{avatar_hash:t.avatarHash}):e;case u.UPDATE_USERNAME:return e.id===t.userId?Object.assign({},e,{username:t.username,slug:t.slug}):e;default:return e}}Object.defineProperty(a,"__esModule",{value:!0}),a.PATCH_PROFILE=a.HYDRATE_PROFILE=void 0,a.hydrate=n,a.patch=o,a["default"]=s;var l=e("moment"),i=r(l),u=e("./users"),c=a.HYDRATE_PROFILE="HYDRATE_PROFILE",d=a.PATCH_PROFILE="PATCH_PROFILE"},{"./users":292,moment:"moment"}],285:[function(e,t,a){"use strict";function r(e){return{type:l,state:{isLoading:!1,providers:e}}}function n(e){return{type:i,update:e}}function o(e){return{type:u,provider:e}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case l:return t.state;case i:return Object.assign({},e,t.update);case u:return Object.assign({},e,{providers:e.providers.map(function(e){return e.id===t.provider.id?t.provider:e})});default:return e}}Object.defineProperty(a,"__esModule",{value:!0}),a.replace=r,a.update=n,a.updateProvider=o,a["default"]=s;var l=a.REPLACE_SEARCH="REPLACE_SEARCH",i=a.UPDATE_SEARCH="UPDATE_SEARCH",u=a.UPDATE_SEARCH_PROVIDER="UPDATE_SEARCH_PROVIDER";a.initialState={isLoading:!1,query:"",providers:[]}},{}],286:[function(e,t,a){"use strict";function r(e){return{type:i,items:e}}function n(){return{type:u}}function o(e){return{type:c,item:e}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case i:return t.items;case u:return[];case c:return(0,l.toggle)(e,t.item);default:return e}}Object.defineProperty(a,"__esModule",{value:!0}),a.SELECT_ITEM=a.SELECT_NONE=a.SELECT_ALL=void 0,a.all=r,a.none=n,a.item=o,a["default"]=s;var l=e("../utils/sets"),i=a.SELECT_ALL="SELECT_ALL",u=a.SELECT_NONE="SELECT_NONE",c=a.SELECT_ITEM="SELECT_ITEM"},{"../utils/sets":318}],287:[function(e,t,a){"use strict";function r(e,t){return{type:l,message:e,messageType:t}}function n(){return{type:i}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t.type===l?{type:t.messageType,message:t.message,isVisible:!0}:t.type===i?Object.assign({},e,{isVisible:!1}):e}Object.defineProperty(a,"__esModule",{value:!0}),a.showSnackbar=r,a.hideSnackbar=n,a["default"]=o;var s=a.initialState={type:"info",message:"",isVisible:!1},l=a.SHOW_SNACKBAR="SHOW_SNACKBAR",i=a.HIDE_SNACKBAR="HIDE_SNACKBAR"},{}],288:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return Object.assign({},e,{started_on:(0,f["default"])(e.started_on),last_post_on:(0,f["default"])(e.last_post_on),isBusy:!1})}function o(){return{type:h}}function s(){return{type:m}}function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:b,state:t?e:n(e)}}function i(e){return{type:v,data:e}}function u(e){return{type:y,data:e}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case h:return Object.assign({},e,{isBusy:!0});case m:return Object.assign({},e,{isBusy:!1});case p.REMOVE_POLL:return Object.assign({},e,{poll:null});case p.REPLACE_POLL:return Object.assign({},e,{poll:t.state});case b:return t.state;case v:return Object.assign({},e,t.data);case y:var a=Object.assign({},e.acl,t.data);return Object.assign({},e,{acl:a});default:return e}}Object.defineProperty(a,"__esModule",{value:!0}),a.UPDATE_THREAD_ACL=a.UPDATE_THREAD=a.REPLACE_THREAD=a.RELEASE_THREAD=a.BUSY_THREAD=void 0,a.hydrate=n,a.busy=o,a.release=s,a.replace=l,a.update=i,a.updateAcl=u,a["default"]=c;var d=e("moment"),f=r(d),p=e("./poll"),h=a.BUSY_THREAD="BUSY_THREAD",m=a.RELEASE_THREAD="RELEASE_THREAD",b=a.REPLACE_THREAD="REPLACE_THREAD",v=a.UPDATE_THREAD="UPDATE_THREAD",y=a.UPDATE_THREAD_ACL="UPDATE_THREAD_ACL"},{"./poll":281,moment:"moment"}],289:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){return{type:y,items:e,sorting:t}}function o(e){return{type:g,thread:e}}function s(e,t){return{type:_,category:e,categoriesMap:t}}function l(e){return{type:E,items:e}}function i(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:w,thread:e,patch:t,sorting:a}}function u(e,t){return{type:O,categoriesMap:e,category:t}}function c(e){return{type:k,sorting:e}}function d(e){var t=[];return N.forEach(function(a){e[a]&&t.push(a)}),t}function f(e){return Object.assign({},e,{started_on:(0,m["default"])(e.started_on),last_post_on:(0,m["default"])(e.last_post_on),moderation:d(e.acl)})}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case y:var a=(0,v["default"])(t.items.map(f),e);return a.sort(t.sorting);case g:return e.filter(function(e){return e.id!==t.thread.id});case _:return e.filter(function(e){var a=t.categoriesMap[e.category];return a.lft>=t.category.lft&&a.rght<=t.category.rght||2==e.weight});case E:return t.items.map(f);case w:var r=e.map(function(e){return e.id===t.thread.id?Object.assign({},e,t.patch):e});return t.sorting?r.sort(t.sorting):r;case O:return e.map(function(e){var a=t.categoriesMap[e.category];return a.lft>=t.category.lft&&a.rght<=t.category.rght?Object.assign({},e,{is_read:!0}):e});case k:return e.sort(t.sorting);default:return e}}Object.defineProperty(a,"__esModule",{value:!0}),a.MODERATION_PERMISSIONS=a.SORT_THREADS=a.READ_THREADS=a.PATCH_THREAD=a.HYDRATE_THREADS=a.FILTER_THREADS=a.DELETE_THREAD=a.APPEND_THREADS=void 0,a.append=n,a.deleteThread=o,a.filterThreads=s,a.hydrate=l,a.patch=i,a.read=u,a.sort=c,a.getThreadModerationOptions=d,a.hydrateThread=f,a["default"]=p;var h=e("moment"),m=r(h),b=e("../utils/concat-unique"),v=r(b),y=a.APPEND_THREADS="APPEND_THREADS",g=a.DELETE_THREAD="DELETE_THREAD",_=a.FILTER_THREADS="FILTER_THREADS",E=a.HYDRATE_THREADS="HYDRATE_THREADS",w=a.PATCH_THREAD="PATCH_THREAD",O=a.READ_THREADS="READ_THREADS",k=a.SORT_THREADS="SORT_THREADS",N=a.MODERATION_PERMISSIONS=["can_announce","can_approve","can_close","can_hide","can_move","can_merge","can_pin","can_review"]},{"../utils/concat-unique":308,moment:"moment"}],290:[function(e,t,a){"use strict";function r(){return{type:s}}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t.type===s?Object.assign({},e,{tick:e.tick+1}):e}Object.defineProperty(a,"__esModule",{value:!0}),a.doTick=r,a["default"]=n;var o=a.initialState={tick:0},s=a.TICK="TICK"},{}],291:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,a){return{type:h,change:e,user:t,changedBy:a}}function o(e){return{type:m,items:e}}function s(e){return{type:b,items:e}}function l(e){return Object.assign({},e,{changed_on:(0,c["default"])(e.changed_on)})}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case h:var a=e.slice();return a.unshift({id:Math.floor(Date.now()/1e3),changed_by:t.changedBy,changed_by_username:t.changedBy.username,changed_on:(0,c["default"])(),new_username:t.change.username,old_username:t.user.username}),a;case m:return(0,p["default"])(e,t.items.map(l));case b:return t.items.map(l);case d.UPDATE_AVATAR:return e.map(function(e){return e=Object.assign({},e),e.changed_by&&e.changed_by.id===t.userId&&(e.changed_by=Object.assign({},e.changed_by,{avatar_hash:t.avatarHash})),e});case d.UPDATE_USERNAME:return e.map(function(e){return e=Object.assign({},e),e.changed_by&&e.changed_by.id===t.userId&&(e.changed_by=Object.assign({},e.changed_by,{username:t.username,slug:t.slug})),Object.assign({},e)});default:return e}}Object.defineProperty(a,"__esModule",{value:!0}),a.HYDRATE_HISTORY=a.APPEND_HISTORY=a.ADD_NAME_CHANGE=void 0,a.addNameChange=n,a.append=o,a.hydrate=s,a.hydrateNamechange=l,a["default"]=i;var u=e("moment"),c=r(u),d=e("./users"),f=e("../utils/concat-unique"),p=r(f),h=a.ADD_NAME_CHANGE="ADD_NAME_CHANGE",m=a.APPEND_HISTORY="APPEND_HISTORY",b=a.HYDRATE_HISTORY="HYDRATE_HISTORY"},{"../utils/concat-unique":308,"./users":292,moment:"moment"}],292:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return{type:m,items:e}}function o(e){return{type:b,items:e}}function s(e){return e?Object.assign({},e,{last_click:e.last_click?(0,f["default"])(e.last_click):null,banned_until:e.banned_until?(0,f["default"])(e.banned_until):null}):null}function l(e){return Object.assign({},e,{joined_on:(0,f["default"])(e.joined_on),status:s(e.status)})}function i(e,t){return{type:v,userId:e.id,avatarHash:t}}function u(e,t,a){return{type:y,userId:e.id,username:t,slug:a}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case m:var a=(0,h["default"])(e,t.items.map(l));return a.sort(function(e,t){return e.username<t.username?-1:e.username>t.username?1:0});case b:return t.items.map(l);case v:return e.map(function(e){return e=Object.assign({},e),e.id===t.userId&&(e.avatar_hash=t.avatarHash),e});default:return e}}Object.defineProperty(a,"__esModule",{value:!0}),a.UPDATE_USERNAME=a.UPDATE_AVATAR=a.HYDRATE_USERS=a.APPEND_USERS=void 0,a.append=n,a.hydrate=o,a.hydrateStatus=s,a.hydrateUser=l,a.updateAvatar=i,a.updateUsername=u,a["default"]=c;var d=e("moment"),f=r(d),p=e("../utils/concat-unique"),h=r(p),m=a.APPEND_USERS="APPEND_USERS",b=a.HYDRATE_USERS="HYDRATE_USERS",v=a.UPDATE_AVATAR="UPDATE_AVATAR",y=a.UPDATE_USERNAME="UPDATE_USERNAME"},{"../utils/concat-unique":308,moment:"moment"}],293:[function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=a.Ajax=function(){function e(){r(this,e),this._cookieName=null,this._csrfToken=null,this._locks={}}return o(e,[{key:"init",value:function(e){this._cookieName=e,this._csrfToken=this.getCsrfToken()}},{key:"getCsrfToken",value:function(){if(document.cookie.indexOf(this._cookieName)!==-1){var e=new RegExp(this._cookieName+"=([^;]*)"),t=document.cookie.match(e)[0];return t?t.split("=")[1]:null}return null}},{key:"request",value:function(e,t,a){var r=this;return new Promise(function(n,o){var s={url:t,method:e,headers:{"X-CSRFToken":r._csrfToken},data:a?JSON.stringify(a):null,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){n(e)},error:function(e){var t=e.responseJSON||{};t.status=e.status,0===t.status&&(t.detail=gettext("Lost connection with application.")),404===t.status&&(t.detail&&"NOT FOUND"!==t.detail||(t.detail=gettext("Action link is invalid."))),413!==t.status||t.detail||(t.detail=gettext("Payload sent to application was too large.")),500!==t.status||t.detail||(t.detail=gettext("Unknown error has occured.")),t.statusText=e.statusText,o(t)}};$.ajax(s)})}},{key:"get",value:function(e,t,a){var r=this;if(t&&(e+="?"+$.param(t)),!a)return this.request("GET",e);var o=function(){var t=r;return r._locks[a]&&(r._locks[a].url=e),r._locks[a]&&r._locks[a].waiter?{v:{then:function(){}}}:r._locks[a]&&r._locks[a].wait?(r._locks[a].waiter=!0,{v:new Promise(function(r,n){var o=function s(e){t._locks[a].wait?window.setTimeout(function(){s(e)},300):t._locks[a].url!==e?s(t._locks[a].url):(t._locks[a].waiter=!1,t.request("GET",t._locks[a].url).then(function(n){t._locks[a].url===e?r(n):(t._locks[a].waiter=!0,s(t._locks[a].url))},function(r){t._locks[a].url===e?n(r):(t._locks[a].waiter=!0,s(t._locks[a].url))}))};window.setTimeout(function(){o(e)},300)})}):(r._locks[a]={url:e,wait:!0,waiter:!1},{v:new Promise(function(r,n){t.request("GET",e).then(function(n){t._locks[a].wait=!1,t._locks[a].url===e&&r(n)},function(r){t._locks[a].wait=!1,t._locks[a].url===e&&n(r)})})})}();return"object"===("undefined"==typeof o?"undefined":n(o))?o.v:void 0}},{key:"post",value:function(e,t){return this.request("POST",e,t)}},{key:"patch",value:function(e,t){return this.request("PATCH",e,t)}},{key:"put",value:function(e,t){return this.request("PUT",e,t)}},{key:"delete",value:function(e){return this.request("DELETE",e)}},{key:"upload",value:function(e,t,a){var r=this;return new Promise(function(n,o){var s={url:e,method:"POST",headers:{"X-CSRFToken":r._csrfToken},data:t,contentType:!1,processData:!1,xhr:function l(){var l=new window.XMLHttpRequest;return l.upload.addEventListener("progress",function(e){e.lengthComputable&&a(Math.round(e.loaded/e.total*100))},!1),l},success:function(e){n(e)},error:function(e){var t=e.responseJSON||{};t.status=e.status,0===t.status&&(t.detail=gettext("Lost connection with application.")),404===t.status&&(t.detail&&"NOT FOUND"!==t.detail||(t.detail=gettext("Action link is invalid."))),500!==t.status||t.detail||(t.detail=gettext("Unknown error has occured.")),t.statusText=e.statusText,o(t)}};$.ajax(s)})}}]),e}();a["default"]=new s},{}],294:[function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0}),a.Auth=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=e("../reducers/auth"),s=a.Auth=function(){function e(){r(this,e)}return n(e,[{key:"init",value:function(e,t,a){this._store=e,this._local=t,this._modal=a,this.syncSession(),this.watchState()}},{key:"syncSession",value:function(){var e=this._store.getState().auth;e.isAuthenticated?this._local.set("auth",{isAuthenticated:!0,username:e.user.username}):this._local.set("auth",{isAuthenticated:!1})}},{key:"watchState",value:function(){var e=this;this._local.watch("auth",function(t){t.isAuthenticated?e._store.dispatch((0,o.signIn)({username:t.username})):e._store.dispatch((0,o.signOut)())}),this._modal.hide()}},{key:"signIn",value:function(e){this._store.dispatch((0,o.signIn)(e)),this._local.set("auth",{isAuthenticated:!0,username:e.username}),this._modal.hide()}},{key:"signOut",value:function(){this._store.dispatch((0,o.signOut)()),this._local.set("auth",{isAuthenticated:!1}),this._modal.hide()}},{key:"softSignOut",
value:function(){this._store.dispatch((0,o.signOut)(!0)),this._local.set("auth",{isAuthenticated:!1}),this._modal.hide()}}]),e}();a["default"]=new s},{"../reducers/auth":279}],295:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0}),a.Captcha=a.ReCaptcha=a.ReCaptchaComponent=a.QACaptcha=a.NoCaptcha=a.BaseCaptcha=void 0;var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("react"),u=r(i),c=e("../components/form-group"),d=r(c),f=a.BaseCaptcha=function(){function e(){s(this,e)}return l(e,[{key:"init",value:function(e,t,a,r){this._context=e,this._ajax=t,this._include=a,this._snackbar=r}}]),e}(),p=a.NoCaptcha=function(e){function t(){return s(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"load",value:function(){return new Promise(function(e){e()})}},{key:"validator",value:function(){return null}},{key:"component",value:function(){return null}}]),t}(f),h=a.QACaptcha=function(e){function t(){return s(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"load",value:function(){var e=this;return new Promise(function(t,a){e._ajax.get(e._context.get("CAPTCHA_API")).then(function(a){e.question=a.question,e.helpText=a.help_text,t()},function(){e._snackbar.error(gettext("Failed to load CAPTCHA.")),a()})})}},{key:"validator",value:function(){return[]}},{key:"component",value:function(e){return u["default"].createElement(d["default"],{label:this.question,"for":"id_captcha",labelClass:e.labelClass||"col-sm-4",controlClass:e.controlClass||"col-sm-8",validation:e.form.state.errors.captcha,helpText:this.helpText||null},u["default"].createElement("input",{type:"text",id:"id_captcha",className:"form-control","aria-describedby":"id_captcha_status",disabled:e.form.state.isLoading,onChange:e.form.bindInput("captcha"),value:e.form.state.captcha}))}}]),t}(f),m=a.ReCaptchaComponent=function(e){function t(){return s(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;grecaptcha.render("recaptcha",{sitekey:this.props.siteKey,callback:function(t){e.props.binding({target:{value:t}})}})}},{key:"render",value:function(){return u["default"].createElement("div",{id:"recaptcha"})}}]),t}(u["default"].Component),b=a.ReCaptcha=function(e){function t(){return s(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"load",value:function(){return this._include.include("https://www.google.com/recaptcha/api.js",!0),new Promise(function(e){var t=function a(){"undefined"==typeof grecaptcha?window.setTimeout(function(){a()},200):e()};t()})}},{key:"validator",value:function(){return[]}},{key:"component",value:function(e){return u["default"].createElement(d["default"],{label:gettext("Captcha"),"for":"id_captcha",labelClass:e.labelClass||"col-sm-4",controlClass:e.controlClass||"col-sm-8",validation:e.form.state.errors.captcha,helpText:gettext("Please solve the quick test.")},u["default"].createElement(m,{siteKey:this._context.get("SETTINGS").recaptcha_site_key,binding:e.form.bindInput("captcha")}))}}]),t}(f),v=a.Captcha=function(){function e(){s(this,e)}return l(e,[{key:"init",value:function(e,t,a,r){switch(e.get("SETTINGS").captcha_type){case"no":this._captcha=new p;break;case"qa":this._captcha=new h;break;case"re":this._captcha=new b}this._captcha.init(e,t,a,r)}},{key:"load",value:function(){return this._captcha.load()}},{key:"validator",value:function(){return this._captcha.validator()}},{key:"component",value:function(e){return this._captcha.component(e)}}]),e}();a["default"]=new v},{"../components/form-group":40,react:"react"}],296:[function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a.Include=function(){function e(){r(this,e)}return n(e,[{key:"init",value:function(e){this._staticUrl=e,this._included=[]}},{key:"include",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._included.indexOf(e)===-1&&(this._included.push(e),this._include(e,t))}},{key:"_include",value:function(e,t){$.ajax({url:(t?"":this._staticUrl)+e,cache:!0,dataType:"script"})}}]),e}();a["default"]=new o},{}],297:[function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=window.localStorage,s=a.LocalStorage=function(){function e(){r(this,e)}return n(e,[{key:"init",value:function(e){var t=this;this._prefix=e,this._watchers=[],window.addEventListener("storage",function(e){var a=JSON.parse(e.newValue);t._watchers.forEach(function(t){t.key===e.key&&e.oldValue!==e.newValue&&t.callback(a)})})}},{key:"set",value:function(e,t){o.setItem(this._prefix+e,JSON.stringify(t))}},{key:"get",value:function(e){var t=o.getItem(this._prefix+e);return t?JSON.parse(t):null}},{key:"watch",value:function(e,t){this._watchers.push({key:this._prefix+e,callback:t})}}]),e}();a["default"]=new s},{}],298:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0}),a.MobileNavbarDropdown=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=e("../utils/mount-component"),l=r(s),i=a.MobileNavbarDropdown=function(){function e(){n(this,e)}return o(e,[{key:"init",value:function(e){this._element=e,this._component=null}},{key:"show",value:function(e){this._component===e?this.hide():(this._component=e,(0,l["default"])(e,this._element.id),$(this._element).addClass("open"))}},{key:"showConnected",value:function(e,t){this._component===e?this.hide():(this._component=e,(0,l["default"])(t,this._element.id,!0),$(this._element).addClass("open"))}},{key:"hide",value:function(){$(this._element).removeClass("open"),this._component=null}}]),e}();a["default"]=new i},{"../utils/mount-component":313}],299:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0}),a.Modal=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=e("react-dom"),l=r(s),i=e("../utils/mount-component"),u=r(i),c=a.Modal=function(){function e(){n(this,e)}return o(e,[{key:"init",value:function(e){var t=this;this._element=e,this._modal=$(e).modal({show:!1}),this._modal.on("hidden.bs.modal",function(){l["default"].unmountComponentAtNode(t._element)})}},{key:"show",value:function(e){(0,u["default"])(e,this._element.id),this._modal.modal("show")}},{key:"hide",value:function(){this._modal.modal("hide")}}]),e}();a["default"]=new c},{"../utils/mount-component":313,"react-dom":"react-dom"}],300:[function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a.PageTitle=function(){function e(){r(this,e)}return n(e,[{key:"init",value:function(e,t){this._indexTitle=e,this._forumName=t}},{key:"set",value:function(e){if(!e)return void(document.title=this._indexTitle||this._forumName);"string"==typeof e&&(e={title:e});var t=e.title;if(e.page>1){var a=interpolate(gettext("page: %(page)s"),{page:e.page},!0);t+=" ("+a+")"}e.parent&&(t+=" | "+e.parent),document.title=t+" | "+this._forumName}}]),e}();a["default"]=new o},{}],301:[function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a.Polls=function(){function e(){r(this,e)}return n(e,[{key:"init",value:function(e,t){this._ajax=e,this._snackbar=t,this._polls={}}},{key:"start",value:function(e){var t=this;this.stop(e.poll);var a=function r(){t._polls[e.poll]=e,t._ajax.get(e.url,e.data||null).then(function(a){t._polls[e.poll]._stopped||(e.update(a),t._polls[e.poll].timeout=window.setTimeout(r,e.frequency))},function(a){t._polls[e.poll]._stopped||(e.error?e.error(a):t._snackbar.apiError(a))})};e.delayed?this._polls[e.poll]={timeout:window.setTimeout(a,e.frequency)}:a()}},{key:"stop",value:function(e){this._polls[e]&&(window.clearTimeout(this._polls[e].timeout),this._polls[e]._stopped=!0)}}]),e}();a["default"]=new o},{}],302:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0}),a.Posting=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=e("react"),l=r(s),i=e("react-dom"),u=r(i),c=e("../components/poll"),d=e("../components/posting"),f=r(d),p=e("../utils/mount-component"),h=r(p),m=a.Posting=function(){function e(){var t=this;n(this,e),this.close=function(){t._isOpen&&!t._isClosing&&(t._isClosing=!0,t._placeholder.removeClass("slide-in"),window.setTimeout(function(){u["default"].unmountComponentAtNode(document.getElementById("posting-mount")),t._isClosing=!1,t._isOpen=!1},300))}}return o(e,[{key:"init",value:function(e,t,a){this._ajax=e,this._snackbar=t,this._placeholder=$(a),this._mode=null,this._isOpen=!1,this._isClosing=!1}},{key:"open",value:function(e){if(this._isOpen===!1)this._mode=e.mode,this._isOpen=e.submit,this._realOpen(e);else if(this._isOpen!==e.submit){var t=gettext("You are already working on other message. Do you want to discard it?");"POLL"==this._mode&&(t=gettext("You are already working on a poll. Do you want to discard it?"));var a=confirm(t);a&&(this._mode=e.mode,this._isOpen=e.submit,this._realOpen(e))}}},{key:"_realOpen",value:function(e){"POLL"==e.mode?(0,h["default"])(l["default"].createElement(c.PollForm,e),"posting-mount"):(0,h["default"])(l["default"].createElement(f["default"],e),"posting-mount"),this._placeholder.addClass("slide-in"),$("html, body").animate({scrollTop:this._placeholder.offset().top},1e3)}}]),e}();a["default"]=new m},{"../components/poll":72,"../components/posting":89,"../utils/mount-component":313,react:"react","react-dom":"react-dom"}],303:[function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0}),a.Snackbar=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=e("../reducers/snackbar"),s=300,l=5e3,i=a.Snackbar=function(){function e(){r(this,e)}return n(e,[{key:"init",value:function(e){this._store=e,this._timeout=null}},{key:"alert",value:function(e,t){var a=this;this._timeout?(window.clearTimeout(this._timeout),this._store.dispatch((0,o.hideSnackbar)()),this._timeout=window.setTimeout(function(){a._timeout=null,a.alert(e,t)},s)):(this._store.dispatch((0,o.showSnackbar)(e,t)),this._timeout=window.setTimeout(function(){a._store.dispatch((0,o.hideSnackbar)()),a._timeout=null},l))}},{key:"info",value:function(e){this.alert(e,"info")}},{key:"success",value:function(e){this.alert(e,"success")}},{key:"warning",value:function(e){this.alert(e,"warning")}},{key:"error",value:function(e){this.alert(e,"error")}},{key:"apiError",value:function(e){var t=e.detail;t||(t=404===e.status?gettext("Action link is invalid."):gettext("Unknown error has occured.")),403===e.status&&"Permission denied"===t&&(t=gettext("You don't have permission to perform this action.")),this.error(t)}}]),e}();a["default"]=new i},{"../reducers/snackbar":287}],304:[function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0}),a.StoreWrapper=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=e("redux"),s=a.StoreWrapper=function(){function e(){r(this,e),this._store=null,this._reducers={},this._initialState={}}return n(e,[{key:"addReducer",value:function(e,t,a){this._reducers[e]=t,this._initialState[e]=a}},{key:"init",value:function(){this._store=(0,o.createStore)((0,o.combineReducers)(this._reducers),this._initialState)}},{key:"getStore",value:function(){return this._store}},{key:"getState",value:function(){return this._store.getState()}},{key:"dispatch",value:function(e){return this._store.dispatch(e)}}]),e}();a["default"]=new s},{redux:"redux"}],305:[function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a.Zxcvbn=function(){function e(){r(this,e)}return n(e,[{key:"init",value:function(e){this._include=e}},{key:"scorePassword",value:function(e,t){return zxcvbn(e,t).score}},{key:"load",value:function(){return"undefined"==typeof zxcvbn?(this._include.include("misago/js/zxcvbn.js"),this._loadingPromise()):this._loadedPromise()}},{key:"_loadingPromise",value:function(){return new Promise(function(e){var t=function a(){"undefined"==typeof zxcvbn?window.setTimeout(function(){a()},200):e()};t()})}},{key:"_loadedPromise",value:function(){return new Promise(function(e){e()})}}]),e}();a["default"]=new o},{}],306:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e,t){if(u["default"].render(l["default"].createElement(c.Provider,{store:b["default"].getStore()},l["default"].createElement(y,{message:e.message,expires:e.expires_on?(0,o["default"])(e.expires_on):null})),document.getElementById("page-mount")),"undefined"==typeof t||t){var a=h["default"].get("SETTINGS").forum_name;document.title=gettext("You are banned")+" | "+a,window.history.pushState({},"",h["default"].get("BANNED_URL"))}};var n=e("moment"),o=r(n),s=e("react"),l=r(s),i=e("react-dom"),u=r(i),c=e("react-redux"),d=e("../components/banned-page"),f=r(d),p=e("../index"),h=r(p),m=e("../services/store"),b=r(m),v=function(e){return e.tick},y=(0,c.connect)(v)(f["default"])},{"../components/banned-page":4,"../index":234,"../services/store":304,moment:"moment",react:"react","react-dom":"react-dom","react-redux":"react-redux"}],307:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],n=[];if(e.forEach(function(e){n.push(e),n.length===t&&(r.push(n),n=[])}),a!==!1&&n.length>0&&n.length<t)for(var o=n.length;o<t;o++)n.push(a);return n.length&&r.push(n),r}},{}],308:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e,t){var a=[];return e.concat(t).filter(function(e){return a.indexOf(e.id)===-1&&(a.push(e.id),!0)})}},{}],309:[function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=function(){function e(t,a){r(this,e),this._callback=t,this._count=a}return n(e,[{key:"count",value:function(){this._count-=1,0===this._count&&this._callback()}}]),e}();a["default"]=o},{}],310:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return e.replace(/[&<>"']/g,function(e){return r[e]})};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"}},{}],311:[function(e,t,a){"use strict";function r(e){return e.toFixed(1)}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return e>1073741824?r(e/1073741824)+" GB":e>1048576?r(e/1048576)+" MB":e>1024?r(e/1024)+" KB":r(e)+" B"},a.roundSize=r},{}],312:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return r.test($.trim(e))};var r=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i")},{}],313:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=document.getElementById(t),n=e.props?e:o["default"].createElement(e,null);r&&(a?l["default"].render(o["default"].createElement(i.Provider,{store:c["default"].getStore()},n),r):l["default"].render(n,r))};var n=e("react"),o=r(n),s=e("react-dom"),l=r(s),i=e("react-redux"),u=e("../services/store"),c=r(u)},{"../services/store":304,react:"react","react-dom":"react-dom","react-redux":"react-redux"}],314:[function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.isOrdered=!1,this._items=t||[]}return n(e,[{key:"add",value:function(e,t,a){this._items.push({key:e,item:t,after:a?a.after||null:null,before:a?a.before||null:null})}},{key:"get",value:function(e,t){for(var a=0;a<this._items.length;a++)if(this._items[a].key===e)return this._items[a].item;return t}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"values",value:function t(){for(var t=[],e=0;e<this._items.length;e++)t.push(this._items[e].item);return t}},{key:"order",value:function(e){return this.isOrdered||(this._items=this._order(this._items),this.isOrdered=!0),e||"undefined"==typeof e?this.values():this._items}},{key:"orderedValues",value:function(){return this.order(!0)}},{key:"_order",value:function(e){function t(e){var t=-1;n.indexOf(e.key)===-1&&(e.after?(t=n.indexOf(e.after),t!==-1&&(t+=1)):e.before&&(t=n.indexOf(e.before)),t!==-1&&(r.splice(t,0,e),n.splice(t,0,e.key)))}var a=[];e.forEach(function(e){a.push(e.key)});var r=[],n=[];e.forEach(function(e){e.after||e.before||(r.push(e),n.push(e.key))}),e.forEach(function(e){"_end"===e.before&&(r.push(e),n.push(e.key))});for(var o=200;o>0&&a.length!==n.length;)o-=1,e.forEach(t);return r}}]),e}();a["default"]=o},{}],315:[function(e,t,a){"use strict";function r(e,t){return Math.floor(Math.random()*(t-e+1))+e}function n(e,t){for(var a=new Array(r(e,t)),n=0;n<a.length;n++)a[n]=n;return a}Object.defineProperty(a,"__esModule",{value:!0}),a["int"]=r,a.range=n},{}],316:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(){window.scrollTo(0,0)}},{}],317:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){var t={component:e.component||null,childRoutes:[]};e.root?t.childRoutes=[{path:e.root,onEnter:function(t,a){a(null,e.paths[0].path)}}].concat(e.paths):t.childRoutes=e.paths,l["default"].render(o["default"].createElement(i.Provider,{store:d["default"].getStore()},o["default"].createElement(u.Router,{routes:t,history:u.browserHistory})),f)};var n=e("react"),o=r(n),s=e("react-dom"),l=r(s),i=e("react-redux"),u=e("react-router"),c=e("../services/store"),d=r(c),f=document.getElementById("page-mount")},{"../services/store":304,react:"react","react-dom":"react-dom","react-redux":"react-redux","react-router":"react-router"}],318:[function(e,t,a){"use strict";function r(e,t){if(e.indexOf(t)===-1){var a=e.slice();return a.push(t),a}return e}function n(e,t){return e.indexOf(t)>=0?e.filter(function(e){return e!==t}):e}function o(e,t){if(e.indexOf(t)===-1){var a=e.slice();return a.push(t),a}return e.filter(function(e){return e!==t})}Object.defineProperty(a,"__esModule",{value:!0}),a.push=r,a.remove=n,a.toggle=o},{}],319:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e,t){if(e=(e+"").toLowerCase(),t=(t+"").toLowerCase(),t.length<=0)return 0;for(var a=0,r=0,n=t.length;;){if(r=e.indexOf(t,r),!(r>=0))break;a+=1,r+=n}return a}},{}],320:[function(e,t,a){"use strict";function r(){return function(e){if(0===$.trim(e).length)return gettext("This field is required.")}}function n(e){return function(t){if(!d.test(t))return e||gettext("Enter a valid email address.")}}function o(e,t){return function(a){var r="",n=$.trim(a).length;if(n<e)return r=t?t(e,n):ngettext("Ensure this value has at least %(limit_value)s character (it has %(show_value)s).","Ensure this value has at least %(limit_value)s characters (it has %(show_value)s).",e),interpolate(r,{limit_value:e,show_value:n},!0)}}function s(e,t){return function(a){var r="",n=$.trim(a).length;if(n>e)return r=t?t(e,n):ngettext("Ensure this value has at most %(limit_value)s character (it has %(show_value)s).","Ensure this value has at most %(limit_value)s characters (it has %(show_value)s).",e),interpolate(r,{limit_value:e,show_value:n},!0)}}function l(e){var t=function(e){return ngettext("Username must be at least %(limit_value)s character long.","Username must be at least %(limit_value)s characters long.",e)};return this.minLength(e.username_length_min,t)}function i(e){var t=function(e){return ngettext("Username cannot be longer than %(limit_value)s character.","Username cannot be longer than %(limit_value)s characters.",e)};return this.maxLength(e.username_length_max,t)}function u(){return function(e){if(!f.test($.trim(e)))return gettext("Username can only contain latin alphabet letters and digits.")}}function c(e){var t=function(e){return ngettext("Valid password must be at least %(limit_value)s character long.","Valid password must be at least %(limit_value)s characters long.",e)};return this.minLength(e.password_length_min,t)}Object.defineProperty(a,"__esModule",{value:!0}),a.required=r,a.email=n,a.minLength=o,a.maxLength=s,a.usernameMinLength=l,a.usernameMaxLength=i,a.usernameContent=u,a.passwordMinLength=c;var d=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,f=new RegExp("^[0-9a-z]+$","i")},{}]},{},[234,235,236,237,238,253,254,255,256,257,258,259,260,275,276,277,278,239,240,241,242,243,244,245,246,247,248,249,250,251,252,261,262,263,264,265,266,267,268,269,270,271,272,273,274]);
//# sourceMappingURL=misago.js.map
