//
// Markup editor
// --------------------------------------------------

.markup-editor {
  overflow: hidden;

  background: @markup-editor-bg;
  border: 2px solid @markup-editor-border-color;
  border-radius: @border-radius-base;
}

// Set different border when its focused
.markup-editor.markup-editor-focused {
  border: 2px solid @markup-editor-border-focus;
}

// Toolbar
.markup-editor-toolbar {
  display: flex;
  justify-content: space-between;

  width: 100%;
  padding: @markup-editor-toolbar-padding;

  background: @markup-editor-toolbar-bg;
  border-bottom: 1px solid @markup-editor-toolbar-border-color;
}

.markup-editor-toolbar-left,
.markup-editor-toolbar-right {
  display: flex;
  flex-shrink: 0;
}

.markup-editor-toolbar-secondary {
  display: none;

  &.show {
    display: block;
    overflow: auto;
    padding: @markup-editor-toolbar-secondary-padding;

    background: @markup-editor-toolbar-secondary-bg;
    border-bottom: 1px solid @markup-editor-toolbar-secondary-border-color;

    & > * {
      float: left;
      margin: floor(@line-height-computed / 4);
    }
  }
}

.btn-markup-editor {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;

  height: @markup-editor-btn-size;
  width: @markup-editor-btn-size;
  padding: 0;

  font-size: @markup-editor-btn-icon-size;
  line-height: @markup-editor-btn-icon-size;

  &,
  &:hover {
    background-color: @markup-editor-btn-bg;
    border-color: @markup-editor-btn-border;
    color: @markup-editor-btn-color;
  }

  &:active {
    background-color: @markup-editor-btn-active-bg;
    border-color: @markup-editor-btn-active-border;
    color: @markup-editor-btn-active-color;
  }

  .material-icon {
    margin: 0;
    bottom: 0;
  }
}

.markup-editor-controls-dropdown {
  margin-right: @line-height-computed / 2;
}

// Spacer that pushes items away from each other
.markup-editor-spacer {
  flex: 1;
}

// Toolbar items layout
.markup-editor-toolbar {
  // Add spacing between buttons
  .btn + .btn,
  .btn + .dropdown,
  .dropdown + .btn {
    margin-left: floor(@line-height-computed / 2);
  }
}

// Textarea
.markup-editor-textarea.form-control {
  height: @markup-editor-height;
  padding: @markup-editor-padding;
  resize: none;

  border: 0;
  border-radius: 0;

  font-size: @markup-editor-font-size;

  &,
  &:focus {
    box-shadow: none;
  }
}

// Attachments
.markup-editor-attachments {
  background: @markup-editor-attachments-bg;
  border-top: 1px solid @markup-editor-attachments-border-color;

  .form-group {
    margin: 0;
    padding: @markup-editor-padding;

    .help-block:last-child {
      margin-bottom: 0;
    }
  }
}

.markup-editor-attachments-noscript-row {
  display: flex;

  input {
    margin-right: floor(@grid-gutter-width / 2);
  }
}

@media screen and (min-width: @screen-sm-min) {
  .markup-editor-attachments-noscript-row button {
    width: auto;
  }
}

.markup-editor-attachments-header {
  margin: 0;
  padding: 0 @markup-editor-padding-horizontal;

  font-size: @font-size-base;
  font-weight: bold;
}

.markup-editor-attachments-media-list,
.markup-editor-attachments-other-list {
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  gap: floor(@grid-gutter-width / 2);
  
  margin: 0;
  padding: @markup-editor-padding;

  list-style: none;

  li {
    margin: 0;
    padding: 0;

    border: 1px solid @gray-lighter;
    border-radius: @border-radius-base;
  }
}

.markup-editor-attachments-media-list-item {
  display: block;
}

.markup-editor-attachments-other-list-item {
  display: flex;

  min-width: 0;
  padding: 2px;
}

.markup-editor-attachments-other-list-item-icon {
  display: flex;
  flex-shrink: 0;
  align-items: center;
  justify-content: center;

  width: 40px;
  height: 40px;
  margin-right: floor(@grid-gutter-width / 4);

  background-color: @gray-lighter;
  border-radius: @border-radius-small;
  color: @gray-light;
  font-size: 24px;
}

.markup-editor-attachments-other-list-item-body {
  display: flex;
  align-items: center;

  min-width: 0;

  font-size: @font-size-small;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.markup-editor-attachments-other-list-item-name {
  font-weight: bold;
}

@media screen and (min-width: @screen-sm-min) {
  .markup-editor-attachments-media-list {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }

  .markup-editor-attachments-other-list {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media screen and (min-width: @screen-md-min) {
  .markup-editor-attachments-media-list {
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }

  .markup-editor-attachments-other-list {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}